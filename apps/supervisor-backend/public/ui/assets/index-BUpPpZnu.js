(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();function Gg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var iu={exports:{}},Ln={},nu={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gp;function Xy(){if(Gp)return Le;Gp=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.iterator;function x(k){return k===null||typeof k!="object"?null:(k=_&&k[_]||k["@@iterator"],typeof k=="function"?k:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function E(k,I,q){this.props=k,this.context=I,this.refs=w,this.updater=q||b}E.prototype.isReactComponent={},E.prototype.setState=function(k,I){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,I,"setState")},E.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function M(){}M.prototype=E.prototype;function P(k,I,q){this.props=k,this.context=I,this.refs=w,this.updater=q||b}var j=P.prototype=new M;j.constructor=P,S(j,E.prototype),j.isPureReactComponent=!0;var A=Array.isArray,U=Object.prototype.hasOwnProperty,V={current:null},Z={key:!0,ref:!0,__self:!0,__source:!0};function le(k,I,q){var ie,xe={},Se=null,je=null;if(I!=null)for(ie in I.ref!==void 0&&(je=I.ref),I.key!==void 0&&(Se=""+I.key),I)U.call(I,ie)&&!Z.hasOwnProperty(ie)&&(xe[ie]=I[ie]);var ae=arguments.length-2;if(ae===1)xe.children=q;else if(1<ae){for(var fe=Array(ae),Ce=0;Ce<ae;Ce++)fe[Ce]=arguments[Ce+2];xe.children=fe}if(k&&k.defaultProps)for(ie in ae=k.defaultProps,ae)xe[ie]===void 0&&(xe[ie]=ae[ie]);return{$$typeof:e,type:k,key:Se,ref:je,props:xe,_owner:V.current}}function te(k,I){return{$$typeof:e,type:k.type,key:I,ref:k.ref,props:k.props,_owner:k._owner}}function T(k){return typeof k=="object"&&k!==null&&k.$$typeof===e}function W(k){var I={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(q){return I[q]})}var K=/\/+/g;function F(k,I){return typeof k=="object"&&k!==null&&k.key!=null?W(""+k.key):I.toString(36)}function Y(k,I,q,ie,xe){var Se=typeof k;(Se==="undefined"||Se==="boolean")&&(k=null);var je=!1;if(k===null)je=!0;else switch(Se){case"string":case"number":je=!0;break;case"object":switch(k.$$typeof){case e:case t:je=!0}}if(je)return je=k,xe=xe(je),k=ie===""?"."+F(je,0):ie,A(xe)?(q="",k!=null&&(q=k.replace(K,"$&/")+"/"),Y(xe,I,q,"",function(Ce){return Ce})):xe!=null&&(T(xe)&&(xe=te(xe,q+(!xe.key||je&&je.key===xe.key?"":(""+xe.key).replace(K,"$&/")+"/")+k)),I.push(xe)),1;if(je=0,ie=ie===""?".":ie+":",A(k))for(var ae=0;ae<k.length;ae++){Se=k[ae];var fe=ie+F(Se,ae);je+=Y(Se,I,q,fe,xe)}else if(fe=x(k),typeof fe=="function")for(k=fe.call(k),ae=0;!(Se=k.next()).done;)Se=Se.value,fe=ie+F(Se,ae++),je+=Y(Se,I,q,fe,xe);else if(Se==="object")throw I=String(k),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.");return je}function O(k,I,q){if(k==null)return k;var ie=[],xe=0;return Y(k,ie,"","",function(Se){return I.call(q,Se,xe++)}),ie}function B(k){if(k._status===-1){var I=k._result;I=I(),I.then(function(q){(k._status===0||k._status===-1)&&(k._status=1,k._result=q)},function(q){(k._status===0||k._status===-1)&&(k._status=2,k._result=q)}),k._status===-1&&(k._status=0,k._result=I)}if(k._status===1)return k._result.default;throw k._result}var G={current:null},D={transition:null},Q={ReactCurrentDispatcher:G,ReactCurrentBatchConfig:D,ReactCurrentOwner:V};function X(){throw Error("act(...) is not supported in production builds of React.")}return Le.Children={map:O,forEach:function(k,I,q){O(k,function(){I.apply(this,arguments)},q)},count:function(k){var I=0;return O(k,function(){I++}),I},toArray:function(k){return O(k,function(I){return I})||[]},only:function(k){if(!T(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},Le.Component=E,Le.Fragment=r,Le.Profiler=o,Le.PureComponent=P,Le.StrictMode=n,Le.Suspense=m,Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,Le.act=X,Le.cloneElement=function(k,I,q){if(k==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+k+".");var ie=S({},k.props),xe=k.key,Se=k.ref,je=k._owner;if(I!=null){if(I.ref!==void 0&&(Se=I.ref,je=V.current),I.key!==void 0&&(xe=""+I.key),k.type&&k.type.defaultProps)var ae=k.type.defaultProps;for(fe in I)U.call(I,fe)&&!Z.hasOwnProperty(fe)&&(ie[fe]=I[fe]===void 0&&ae!==void 0?ae[fe]:I[fe])}var fe=arguments.length-2;if(fe===1)ie.children=q;else if(1<fe){ae=Array(fe);for(var Ce=0;Ce<fe;Ce++)ae[Ce]=arguments[Ce+2];ie.children=ae}return{$$typeof:e,type:k.type,key:xe,ref:Se,props:ie,_owner:je}},Le.createContext=function(k){return k={$$typeof:c,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},k.Provider={$$typeof:l,_context:k},k.Consumer=k},Le.createElement=le,Le.createFactory=function(k){var I=le.bind(null,k);return I.type=k,I},Le.createRef=function(){return{current:null}},Le.forwardRef=function(k){return{$$typeof:h,render:k}},Le.isValidElement=T,Le.lazy=function(k){return{$$typeof:v,_payload:{_status:-1,_result:k},_init:B}},Le.memo=function(k,I){return{$$typeof:d,type:k,compare:I===void 0?null:I}},Le.startTransition=function(k){var I=D.transition;D.transition={};try{k()}finally{D.transition=I}},Le.unstable_act=X,Le.useCallback=function(k,I){return G.current.useCallback(k,I)},Le.useContext=function(k){return G.current.useContext(k)},Le.useDebugValue=function(){},Le.useDeferredValue=function(k){return G.current.useDeferredValue(k)},Le.useEffect=function(k,I){return G.current.useEffect(k,I)},Le.useId=function(){return G.current.useId()},Le.useImperativeHandle=function(k,I,q){return G.current.useImperativeHandle(k,I,q)},Le.useInsertionEffect=function(k,I){return G.current.useInsertionEffect(k,I)},Le.useLayoutEffect=function(k,I){return G.current.useLayoutEffect(k,I)},Le.useMemo=function(k,I){return G.current.useMemo(k,I)},Le.useReducer=function(k,I,q){return G.current.useReducer(k,I,q)},Le.useRef=function(k){return G.current.useRef(k)},Le.useState=function(k){return G.current.useState(k)},Le.useSyncExternalStore=function(k,I,q){return G.current.useSyncExternalStore(k,I,q)},Le.useTransition=function(){return G.current.useTransition()},Le.version="18.3.1",Le}var Xp;function tl(){return Xp||(Xp=1,nu.exports=Xy()),nu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jp;function Jy(){if(Jp)return Ln;Jp=1;var e=tl(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(h,m,d){var v,_={},x=null,b=null;d!==void 0&&(x=""+d),m.key!==void 0&&(x=""+m.key),m.ref!==void 0&&(b=m.ref);for(v in m)n.call(m,v)&&!l.hasOwnProperty(v)&&(_[v]=m[v]);if(h&&h.defaultProps)for(v in m=h.defaultProps,m)_[v]===void 0&&(_[v]=m[v]);return{$$typeof:t,type:h,key:x,ref:b,props:_,_owner:o.current}}return Ln.Fragment=r,Ln.jsx=c,Ln.jsxs=c,Ln}var Zp;function Zy(){return Zp||(Zp=1,iu.exports=Jy()),iu.exports}var f=Zy(),C=tl();const Us=Gg(C);var ya={},ou={exports:{}},Ht={},au={exports:{}},lu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var em;function ex(){return em||(em=1,(function(e){function t(D,Q){var X=D.length;D.push(Q);e:for(;0<X;){var k=X-1>>>1,I=D[k];if(0<o(I,Q))D[k]=Q,D[X]=I,X=k;else break e}}function r(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var Q=D[0],X=D.pop();if(X!==Q){D[0]=X;e:for(var k=0,I=D.length,q=I>>>1;k<q;){var ie=2*(k+1)-1,xe=D[ie],Se=ie+1,je=D[Se];if(0>o(xe,X))Se<I&&0>o(je,xe)?(D[k]=je,D[Se]=X,k=Se):(D[k]=xe,D[ie]=X,k=ie);else if(Se<I&&0>o(je,X))D[k]=je,D[Se]=X,k=Se;else break e}}return Q}function o(D,Q){var X=D.sortIndex-Q.sortIndex;return X!==0?X:D.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();e.unstable_now=function(){return c.now()-h}}var m=[],d=[],v=1,_=null,x=3,b=!1,S=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(D){for(var Q=r(d);Q!==null;){if(Q.callback===null)n(d);else if(Q.startTime<=D)n(d),Q.sortIndex=Q.expirationTime,t(m,Q);else break;Q=r(d)}}function A(D){if(w=!1,j(D),!S)if(r(m)!==null)S=!0,B(U);else{var Q=r(d);Q!==null&&G(A,Q.startTime-D)}}function U(D,Q){S=!1,w&&(w=!1,M(le),le=-1),b=!0;var X=x;try{for(j(Q),_=r(m);_!==null&&(!(_.expirationTime>Q)||D&&!W());){var k=_.callback;if(typeof k=="function"){_.callback=null,x=_.priorityLevel;var I=k(_.expirationTime<=Q);Q=e.unstable_now(),typeof I=="function"?_.callback=I:_===r(m)&&n(m),j(Q)}else n(m);_=r(m)}if(_!==null)var q=!0;else{var ie=r(d);ie!==null&&G(A,ie.startTime-Q),q=!1}return q}finally{_=null,x=X,b=!1}}var V=!1,Z=null,le=-1,te=5,T=-1;function W(){return!(e.unstable_now()-T<te)}function K(){if(Z!==null){var D=e.unstable_now();T=D;var Q=!0;try{Q=Z(!0,D)}finally{Q?F():(V=!1,Z=null)}}else V=!1}var F;if(typeof P=="function")F=function(){P(K)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,O=Y.port2;Y.port1.onmessage=K,F=function(){O.postMessage(null)}}else F=function(){E(K,0)};function B(D){Z=D,V||(V=!0,F())}function G(D,Q){le=E(function(){D(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){S||b||(S=!0,B(U))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return r(m)},e.unstable_next=function(D){switch(x){case 1:case 2:case 3:var Q=3;break;default:Q=x}var X=x;x=Q;try{return D()}finally{x=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,Q){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var X=x;x=D;try{return Q()}finally{x=X}},e.unstable_scheduleCallback=function(D,Q,X){var k=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?k+X:k):X=k,D){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=X+I,D={id:v++,callback:Q,priorityLevel:D,startTime:X,expirationTime:I,sortIndex:-1},X>k?(D.sortIndex=X,t(d,D),r(m)===null&&D===r(d)&&(w?(M(le),le=-1):w=!0,G(A,X-k))):(D.sortIndex=I,t(m,D),S||b||(S=!0,B(U))),D},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(D){var Q=x;return function(){var X=x;x=Q;try{return D.apply(this,arguments)}finally{x=X}}}})(lu)),lu}var tm;function tx(){return tm||(tm=1,au.exports=ex()),au.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rm;function rx(){if(rm)return Ht;rm=1;var e=tl(),t=tx();function r(s){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+s,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,o={};function l(s,i){c(s,i),c(s+"Capture",i)}function c(s,i){for(o[s]=i,s=0;s<i.length;s++)n.add(i[s])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},_={};function x(s){return m.call(_,s)?!0:m.call(v,s)?!1:d.test(s)?_[s]=!0:(v[s]=!0,!1)}function b(s,i,a,u){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return u?!1:a!==null?!a.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function S(s,i,a,u){if(i===null||typeof i>"u"||b(s,i,a,u))return!0;if(u)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function w(s,i,a,u,p,g,y){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=u,this.attributeNamespace=p,this.mustUseProperty=a,this.propertyName=s,this.type=i,this.sanitizeURL=g,this.removeEmptyString=y}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){E[s]=new w(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var i=s[0];E[i]=new w(i,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){E[s]=new w(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){E[s]=new w(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){E[s]=new w(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){E[s]=new w(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){E[s]=new w(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){E[s]=new w(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){E[s]=new w(s,5,!1,s.toLowerCase(),null,!1,!1)});var M=/[\-:]([a-z])/g;function P(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var i=s.replace(M,P);E[i]=new w(i,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var i=s.replace(M,P);E[i]=new w(i,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var i=s.replace(M,P);E[i]=new w(i,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){E[s]=new w(s,1,!1,s.toLowerCase(),null,!1,!1)}),E.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){E[s]=new w(s,1,!1,s.toLowerCase(),null,!0,!0)});function j(s,i,a,u){var p=E.hasOwnProperty(i)?E[i]:null;(p!==null?p.type!==0:u||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(S(i,a,p,u)&&(a=null),u||p===null?x(i)&&(a===null?s.removeAttribute(i):s.setAttribute(i,""+a)):p.mustUseProperty?s[p.propertyName]=a===null?p.type===3?!1:"":a:(i=p.attributeName,u=p.attributeNamespace,a===null?s.removeAttribute(i):(p=p.type,a=p===3||p===4&&a===!0?"":""+a,u?s.setAttributeNS(u,i,a):s.setAttribute(i,a))))}var A=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,U=Symbol.for("react.element"),V=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),le=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),W=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),G=Symbol.for("react.offscreen"),D=Symbol.iterator;function Q(s){return s===null||typeof s!="object"?null:(s=D&&s[D]||s["@@iterator"],typeof s=="function"?s:null)}var X=Object.assign,k;function I(s){if(k===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);k=i&&i[1]||""}return`
`+k+s}var q=!1;function ie(s,i){if(!s||q)return"";q=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(H){var u=H}Reflect.construct(s,[],i)}else{try{i.call()}catch(H){u=H}s.call(i.prototype)}else{try{throw Error()}catch(H){u=H}s()}}catch(H){if(H&&u&&typeof H.stack=="string"){for(var p=H.stack.split(`
`),g=u.stack.split(`
`),y=p.length-1,N=g.length-1;1<=y&&0<=N&&p[y]!==g[N];)N--;for(;1<=y&&0<=N;y--,N--)if(p[y]!==g[N]){if(y!==1||N!==1)do if(y--,N--,0>N||p[y]!==g[N]){var R=`
`+p[y].replace(" at new "," at ");return s.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",s.displayName)),R}while(1<=y&&0<=N);break}}}finally{q=!1,Error.prepareStackTrace=a}return(s=s?s.displayName||s.name:"")?I(s):""}function xe(s){switch(s.tag){case 5:return I(s.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 2:case 15:return s=ie(s.type,!1),s;case 11:return s=ie(s.type.render,!1),s;case 1:return s=ie(s.type,!0),s;default:return""}}function Se(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case Z:return"Fragment";case V:return"Portal";case te:return"Profiler";case le:return"StrictMode";case F:return"Suspense";case Y:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case W:return(s.displayName||"Context")+".Consumer";case T:return(s._context.displayName||"Context")+".Provider";case K:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case O:return i=s.displayName||null,i!==null?i:Se(s.type)||"Memo";case B:i=s._payload,s=s._init;try{return Se(s(i))}catch{}}return null}function je(s){var i=s.type;switch(s.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=i.render,s=s.displayName||s.name||"",i.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Se(i);case 8:return i===le?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function ae(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function fe(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ce(s){var i=fe(s)?"checked":"value",a=Object.getOwnPropertyDescriptor(s.constructor.prototype,i),u=""+s[i];if(!s.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var p=a.get,g=a.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return p.call(this)},set:function(y){u=""+y,g.call(this,y)}}),Object.defineProperty(s,i,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(y){u=""+y},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function Te(s){s._valueTracker||(s._valueTracker=Ce(s))}function Ee(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var a=i.getValue(),u="";return s&&(u=fe(s)?s.checked?"true":"false":s.value),s=u,s!==a?(i.setValue(s),!0):!1}function Ne(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function er(s,i){var a=i.checked;return X({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??s._wrapperState.initialChecked})}function Xr(s,i){var a=i.defaultValue==null?"":i.defaultValue,u=i.checked!=null?i.checked:i.defaultChecked;a=ae(i.value!=null?i.value:a),s._wrapperState={initialChecked:u,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function ht(s,i){i=i.checked,i!=null&&j(s,"checked",i,!1)}function tt(s,i){ht(s,i);var a=ae(i.value),u=i.type;if(a!=null)u==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+a):s.value!==""+a&&(s.value=""+a);else if(u==="submit"||u==="reset"){s.removeAttribute("value");return}i.hasOwnProperty("value")?fl(s,i.type,a):i.hasOwnProperty("defaultValue")&&fl(s,i.type,ae(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(s.defaultChecked=!!i.defaultChecked)}function id(s,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var u=i.type;if(!(u!=="submit"&&u!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+s._wrapperState.initialValue,a||i===s.value||(s.value=i),s.defaultValue=i}a=s.name,a!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,a!==""&&(s.name=a)}function fl(s,i,a){(i!=="number"||Ne(s.ownerDocument)!==s)&&(a==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+a&&(s.defaultValue=""+a))}var Ui=Array.isArray;function ri(s,i,a,u){if(s=s.options,i){i={};for(var p=0;p<a.length;p++)i["$"+a[p]]=!0;for(a=0;a<s.length;a++)p=i.hasOwnProperty("$"+s[a].value),s[a].selected!==p&&(s[a].selected=p),p&&u&&(s[a].defaultSelected=!0)}else{for(a=""+ae(a),i=null,p=0;p<s.length;p++){if(s[p].value===a){s[p].selected=!0,u&&(s[p].defaultSelected=!0);return}i!==null||s[p].disabled||(i=s[p])}i!==null&&(i.selected=!0)}}function pl(s,i){if(i.dangerouslySetInnerHTML!=null)throw Error(r(91));return X({},i,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function nd(s,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(r(92));if(Ui(a)){if(1<a.length)throw Error(r(93));a=a[0]}i=a}i==null&&(i=""),a=i}s._wrapperState={initialValue:ae(a)}}function od(s,i){var a=ae(i.value),u=ae(i.defaultValue);a!=null&&(a=""+a,a!==s.value&&(s.value=a),i.defaultValue==null&&s.defaultValue!==a&&(s.defaultValue=a)),u!=null&&(s.defaultValue=""+u)}function ad(s){var i=s.textContent;i===s._wrapperState.initialValue&&i!==""&&i!==null&&(s.value=i)}function ld(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ml(s,i){return s==null||s==="http://www.w3.org/1999/xhtml"?ld(i):s==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var uo,cd=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,u,p){MSApp.execUnsafeLocalFunction(function(){return s(i,a,u,p)})}:s})(function(s,i){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=i;else{for(uo=uo||document.createElement("div"),uo.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=uo.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;i.firstChild;)s.appendChild(i.firstChild)}});function Ki(s,i){if(i){var a=s.firstChild;if(a&&a===s.lastChild&&a.nodeType===3){a.nodeValue=i;return}}s.textContent=i}var Vi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},t0=["Webkit","ms","Moz","O"];Object.keys(Vi).forEach(function(s){t0.forEach(function(i){i=i+s.charAt(0).toUpperCase()+s.substring(1),Vi[i]=Vi[s]})});function ud(s,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Vi.hasOwnProperty(s)&&Vi[s]?(""+i).trim():i+"px"}function hd(s,i){s=s.style;for(var a in i)if(i.hasOwnProperty(a)){var u=a.indexOf("--")===0,p=ud(a,i[a],u);a==="float"&&(a="cssFloat"),u?s.setProperty(a,p):s[a]=p}}var r0=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gl(s,i){if(i){if(r0[s]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(r(137,s));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(r(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(r(61))}if(i.style!=null&&typeof i.style!="object")throw Error(r(62))}}function _l(s,i){if(s.indexOf("-")===-1)return typeof i.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vl=null;function yl(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var xl=null,si=null,ii=null;function dd(s){if(s=mn(s)){if(typeof xl!="function")throw Error(r(280));var i=s.stateNode;i&&(i=Oo(i),xl(s.stateNode,s.type,i))}}function fd(s){si?ii?ii.push(s):ii=[s]:si=s}function pd(){if(si){var s=si,i=ii;if(ii=si=null,dd(s),i)for(s=0;s<i.length;s++)dd(i[s])}}function md(s,i){return s(i)}function gd(){}var Sl=!1;function _d(s,i,a){if(Sl)return s(i,a);Sl=!0;try{return md(s,i,a)}finally{Sl=!1,(si!==null||ii!==null)&&(gd(),pd())}}function qi(s,i){var a=s.stateNode;if(a===null)return null;var u=Oo(a);if(u===null)return null;a=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var wl=!1;if(h)try{var Qi={};Object.defineProperty(Qi,"passive",{get:function(){wl=!0}}),window.addEventListener("test",Qi,Qi),window.removeEventListener("test",Qi,Qi)}catch{wl=!1}function s0(s,i,a,u,p,g,y,N,R){var H=Array.prototype.slice.call(arguments,3);try{i.apply(a,H)}catch(re){this.onError(re)}}var Yi=!1,ho=null,fo=!1,bl=null,i0={onError:function(s){Yi=!0,ho=s}};function n0(s,i,a,u,p,g,y,N,R){Yi=!1,ho=null,s0.apply(i0,arguments)}function o0(s,i,a,u,p,g,y,N,R){if(n0.apply(this,arguments),Yi){if(Yi){var H=ho;Yi=!1,ho=null}else throw Error(r(198));fo||(fo=!0,bl=H)}}function Es(s){var i=s,a=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(a=i.return),s=i.return;while(s)}return i.tag===3?a:null}function vd(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function yd(s){if(Es(s)!==s)throw Error(r(188))}function a0(s){var i=s.alternate;if(!i){if(i=Es(s),i===null)throw Error(r(188));return i!==s?null:s}for(var a=s,u=i;;){var p=a.return;if(p===null)break;var g=p.alternate;if(g===null){if(u=p.return,u!==null){a=u;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===a)return yd(p),s;if(g===u)return yd(p),i;g=g.sibling}throw Error(r(188))}if(a.return!==u.return)a=p,u=g;else{for(var y=!1,N=p.child;N;){if(N===a){y=!0,a=p,u=g;break}if(N===u){y=!0,u=p,a=g;break}N=N.sibling}if(!y){for(N=g.child;N;){if(N===a){y=!0,a=g,u=p;break}if(N===u){y=!0,u=g,a=p;break}N=N.sibling}if(!y)throw Error(r(189))}}if(a.alternate!==u)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?s:i}function xd(s){return s=a0(s),s!==null?Sd(s):null}function Sd(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var i=Sd(s);if(i!==null)return i;s=s.sibling}return null}var wd=t.unstable_scheduleCallback,bd=t.unstable_cancelCallback,l0=t.unstable_shouldYield,c0=t.unstable_requestPaint,Je=t.unstable_now,u0=t.unstable_getCurrentPriorityLevel,Cl=t.unstable_ImmediatePriority,Cd=t.unstable_UserBlockingPriority,po=t.unstable_NormalPriority,h0=t.unstable_LowPriority,kd=t.unstable_IdlePriority,mo=null,br=null;function d0(s){if(br&&typeof br.onCommitFiberRoot=="function")try{br.onCommitFiberRoot(mo,s,void 0,(s.current.flags&128)===128)}catch{}}var pr=Math.clz32?Math.clz32:m0,f0=Math.log,p0=Math.LN2;function m0(s){return s>>>=0,s===0?32:31-(f0(s)/p0|0)|0}var go=64,_o=4194304;function Gi(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function vo(s,i){var a=s.pendingLanes;if(a===0)return 0;var u=0,p=s.suspendedLanes,g=s.pingedLanes,y=a&268435455;if(y!==0){var N=y&~p;N!==0?u=Gi(N):(g&=y,g!==0&&(u=Gi(g)))}else y=a&~p,y!==0?u=Gi(y):g!==0&&(u=Gi(g));if(u===0)return 0;if(i!==0&&i!==u&&(i&p)===0&&(p=u&-u,g=i&-i,p>=g||p===16&&(g&4194240)!==0))return i;if((u&4)!==0&&(u|=a&16),i=s.entangledLanes,i!==0)for(s=s.entanglements,i&=u;0<i;)a=31-pr(i),p=1<<a,u|=s[a],i&=~p;return u}function g0(s,i){switch(s){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _0(s,i){for(var a=s.suspendedLanes,u=s.pingedLanes,p=s.expirationTimes,g=s.pendingLanes;0<g;){var y=31-pr(g),N=1<<y,R=p[y];R===-1?((N&a)===0||(N&u)!==0)&&(p[y]=g0(N,i)):R<=i&&(s.expiredLanes|=N),g&=~N}}function kl(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Ed(){var s=go;return go<<=1,(go&4194240)===0&&(go=64),s}function El(s){for(var i=[],a=0;31>a;a++)i.push(s);return i}function Xi(s,i,a){s.pendingLanes|=i,i!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,i=31-pr(i),s[i]=a}function v0(s,i){var a=s.pendingLanes&~i;s.pendingLanes=i,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=i,s.mutableReadLanes&=i,s.entangledLanes&=i,i=s.entanglements;var u=s.eventTimes;for(s=s.expirationTimes;0<a;){var p=31-pr(a),g=1<<p;i[p]=0,u[p]=-1,s[p]=-1,a&=~g}}function Nl(s,i){var a=s.entangledLanes|=i;for(s=s.entanglements;a;){var u=31-pr(a),p=1<<u;p&i|s[u]&i&&(s[u]|=i),a&=~p}}var Be=0;function Nd(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Pd,Pl,Rd,Ld,jd,Rl=!1,yo=[],Jr=null,Zr=null,es=null,Ji=new Map,Zi=new Map,ts=[],y0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dd(s,i){switch(s){case"focusin":case"focusout":Jr=null;break;case"dragenter":case"dragleave":Zr=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":Ji.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zi.delete(i.pointerId)}}function en(s,i,a,u,p,g){return s===null||s.nativeEvent!==g?(s={blockedOn:i,domEventName:a,eventSystemFlags:u,nativeEvent:g,targetContainers:[p]},i!==null&&(i=mn(i),i!==null&&Pl(i)),s):(s.eventSystemFlags|=u,i=s.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),s)}function x0(s,i,a,u,p){switch(i){case"focusin":return Jr=en(Jr,s,i,a,u,p),!0;case"dragenter":return Zr=en(Zr,s,i,a,u,p),!0;case"mouseover":return es=en(es,s,i,a,u,p),!0;case"pointerover":var g=p.pointerId;return Ji.set(g,en(Ji.get(g)||null,s,i,a,u,p)),!0;case"gotpointercapture":return g=p.pointerId,Zi.set(g,en(Zi.get(g)||null,s,i,a,u,p)),!0}return!1}function Md(s){var i=Ns(s.target);if(i!==null){var a=Es(i);if(a!==null){if(i=a.tag,i===13){if(i=vd(a),i!==null){s.blockedOn=i,jd(s.priority,function(){Rd(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){s.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}s.blockedOn=null}function xo(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var a=jl(s.domEventName,s.eventSystemFlags,i[0],s.nativeEvent);if(a===null){a=s.nativeEvent;var u=new a.constructor(a.type,a);vl=u,a.target.dispatchEvent(u),vl=null}else return i=mn(a),i!==null&&Pl(i),s.blockedOn=a,!1;i.shift()}return!0}function Od(s,i,a){xo(s)&&a.delete(i)}function S0(){Rl=!1,Jr!==null&&xo(Jr)&&(Jr=null),Zr!==null&&xo(Zr)&&(Zr=null),es!==null&&xo(es)&&(es=null),Ji.forEach(Od),Zi.forEach(Od)}function tn(s,i){s.blockedOn===i&&(s.blockedOn=null,Rl||(Rl=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,S0)))}function rn(s){function i(p){return tn(p,s)}if(0<yo.length){tn(yo[0],s);for(var a=1;a<yo.length;a++){var u=yo[a];u.blockedOn===s&&(u.blockedOn=null)}}for(Jr!==null&&tn(Jr,s),Zr!==null&&tn(Zr,s),es!==null&&tn(es,s),Ji.forEach(i),Zi.forEach(i),a=0;a<ts.length;a++)u=ts[a],u.blockedOn===s&&(u.blockedOn=null);for(;0<ts.length&&(a=ts[0],a.blockedOn===null);)Md(a),a.blockedOn===null&&ts.shift()}var ni=A.ReactCurrentBatchConfig,So=!0;function w0(s,i,a,u){var p=Be,g=ni.transition;ni.transition=null;try{Be=1,Ll(s,i,a,u)}finally{Be=p,ni.transition=g}}function b0(s,i,a,u){var p=Be,g=ni.transition;ni.transition=null;try{Be=4,Ll(s,i,a,u)}finally{Be=p,ni.transition=g}}function Ll(s,i,a,u){if(So){var p=jl(s,i,a,u);if(p===null)Ql(s,i,u,wo,a),Dd(s,u);else if(x0(p,s,i,a,u))u.stopPropagation();else if(Dd(s,u),i&4&&-1<y0.indexOf(s)){for(;p!==null;){var g=mn(p);if(g!==null&&Pd(g),g=jl(s,i,a,u),g===null&&Ql(s,i,u,wo,a),g===p)break;p=g}p!==null&&u.stopPropagation()}else Ql(s,i,u,null,a)}}var wo=null;function jl(s,i,a,u){if(wo=null,s=yl(u),s=Ns(s),s!==null)if(i=Es(s),i===null)s=null;else if(a=i.tag,a===13){if(s=vd(i),s!==null)return s;s=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null);return wo=s,null}function Td(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(u0()){case Cl:return 1;case Cd:return 4;case po:case h0:return 16;case kd:return 536870912;default:return 16}default:return 16}}var rs=null,Dl=null,bo=null;function Bd(){if(bo)return bo;var s,i=Dl,a=i.length,u,p="value"in rs?rs.value:rs.textContent,g=p.length;for(s=0;s<a&&i[s]===p[s];s++);var y=a-s;for(u=1;u<=y&&i[a-u]===p[g-u];u++);return bo=p.slice(s,1<u?1-u:void 0)}function Co(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function ko(){return!0}function Id(){return!1}function Ut(s){function i(a,u,p,g,y){this._reactName=a,this._targetInst=p,this.type=u,this.nativeEvent=g,this.target=y,this.currentTarget=null;for(var N in s)s.hasOwnProperty(N)&&(a=s[N],this[N]=a?a(g):g[N]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?ko:Id,this.isPropagationStopped=Id,this}return X(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ko)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ko)},persist:function(){},isPersistent:ko}),i}var oi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ml=Ut(oi),sn=X({},oi,{view:0,detail:0}),C0=Ut(sn),Ol,Tl,nn,Eo=X({},sn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Il,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==nn&&(nn&&s.type==="mousemove"?(Ol=s.screenX-nn.screenX,Tl=s.screenY-nn.screenY):Tl=Ol=0,nn=s),Ol)},movementY:function(s){return"movementY"in s?s.movementY:Tl}}),Ad=Ut(Eo),k0=X({},Eo,{dataTransfer:0}),E0=Ut(k0),N0=X({},sn,{relatedTarget:0}),Bl=Ut(N0),P0=X({},oi,{animationName:0,elapsedTime:0,pseudoElement:0}),R0=Ut(P0),L0=X({},oi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),j0=Ut(L0),D0=X({},oi,{data:0}),Fd=Ut(D0),M0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},O0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},T0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function B0(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=T0[s])?!!i[s]:!1}function Il(){return B0}var I0=X({},sn,{key:function(s){if(s.key){var i=M0[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=Co(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?O0[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Il,charCode:function(s){return s.type==="keypress"?Co(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Co(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),A0=Ut(I0),F0=X({},Eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zd=Ut(F0),z0=X({},sn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Il}),$0=Ut(z0),H0=X({},oi,{propertyName:0,elapsedTime:0,pseudoElement:0}),W0=Ut(H0),U0=X({},Eo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),K0=Ut(U0),V0=[9,13,27,32],Al=h&&"CompositionEvent"in window,on=null;h&&"documentMode"in document&&(on=document.documentMode);var q0=h&&"TextEvent"in window&&!on,$d=h&&(!Al||on&&8<on&&11>=on),Hd=" ",Wd=!1;function Ud(s,i){switch(s){case"keyup":return V0.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kd(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ai=!1;function Q0(s,i){switch(s){case"compositionend":return Kd(i);case"keypress":return i.which!==32?null:(Wd=!0,Hd);case"textInput":return s=i.data,s===Hd&&Wd?null:s;default:return null}}function Y0(s,i){if(ai)return s==="compositionend"||!Al&&Ud(s,i)?(s=Bd(),bo=Dl=rs=null,ai=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return $d&&i.locale!=="ko"?null:i.data;default:return null}}var G0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vd(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!G0[s.type]:i==="textarea"}function qd(s,i,a,u){fd(u),i=jo(i,"onChange"),0<i.length&&(a=new Ml("onChange","change",null,a,u),s.push({event:a,listeners:i}))}var an=null,ln=null;function X0(s){df(s,0)}function No(s){var i=di(s);if(Ee(i))return s}function J0(s,i){if(s==="change")return i}var Qd=!1;if(h){var Fl;if(h){var zl="oninput"in document;if(!zl){var Yd=document.createElement("div");Yd.setAttribute("oninput","return;"),zl=typeof Yd.oninput=="function"}Fl=zl}else Fl=!1;Qd=Fl&&(!document.documentMode||9<document.documentMode)}function Gd(){an&&(an.detachEvent("onpropertychange",Xd),ln=an=null)}function Xd(s){if(s.propertyName==="value"&&No(ln)){var i=[];qd(i,ln,s,yl(s)),_d(X0,i)}}function Z0(s,i,a){s==="focusin"?(Gd(),an=i,ln=a,an.attachEvent("onpropertychange",Xd)):s==="focusout"&&Gd()}function ey(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return No(ln)}function ty(s,i){if(s==="click")return No(i)}function ry(s,i){if(s==="input"||s==="change")return No(i)}function sy(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var mr=typeof Object.is=="function"?Object.is:sy;function cn(s,i){if(mr(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var a=Object.keys(s),u=Object.keys(i);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var p=a[u];if(!m.call(i,p)||!mr(s[p],i[p]))return!1}return!0}function Jd(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Zd(s,i){var a=Jd(s);s=0;for(var u;a;){if(a.nodeType===3){if(u=s+a.textContent.length,s<=i&&u>=i)return{node:a,offset:i-s};s=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Jd(a)}}function ef(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?ef(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function tf(){for(var s=window,i=Ne();i instanceof s.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)s=i.contentWindow;else break;i=Ne(s.document)}return i}function $l(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}function iy(s){var i=tf(),a=s.focusedElem,u=s.selectionRange;if(i!==a&&a&&a.ownerDocument&&ef(a.ownerDocument.documentElement,a)){if(u!==null&&$l(a)){if(i=u.start,s=u.end,s===void 0&&(s=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(s,a.value.length);else if(s=(i=a.ownerDocument||document)&&i.defaultView||window,s.getSelection){s=s.getSelection();var p=a.textContent.length,g=Math.min(u.start,p);u=u.end===void 0?g:Math.min(u.end,p),!s.extend&&g>u&&(p=u,u=g,g=p),p=Zd(a,g);var y=Zd(a,u);p&&y&&(s.rangeCount!==1||s.anchorNode!==p.node||s.anchorOffset!==p.offset||s.focusNode!==y.node||s.focusOffset!==y.offset)&&(i=i.createRange(),i.setStart(p.node,p.offset),s.removeAllRanges(),g>u?(s.addRange(i),s.extend(y.node,y.offset)):(i.setEnd(y.node,y.offset),s.addRange(i)))}}for(i=[],s=a;s=s.parentNode;)s.nodeType===1&&i.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)s=i[a],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var ny=h&&"documentMode"in document&&11>=document.documentMode,li=null,Hl=null,un=null,Wl=!1;function rf(s,i,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Wl||li==null||li!==Ne(u)||(u=li,"selectionStart"in u&&$l(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),un&&cn(un,u)||(un=u,u=jo(Hl,"onSelect"),0<u.length&&(i=new Ml("onSelect","select",null,i,a),s.push({event:i,listeners:u}),i.target=li)))}function Po(s,i){var a={};return a[s.toLowerCase()]=i.toLowerCase(),a["Webkit"+s]="webkit"+i,a["Moz"+s]="moz"+i,a}var ci={animationend:Po("Animation","AnimationEnd"),animationiteration:Po("Animation","AnimationIteration"),animationstart:Po("Animation","AnimationStart"),transitionend:Po("Transition","TransitionEnd")},Ul={},sf={};h&&(sf=document.createElement("div").style,"AnimationEvent"in window||(delete ci.animationend.animation,delete ci.animationiteration.animation,delete ci.animationstart.animation),"TransitionEvent"in window||delete ci.transitionend.transition);function Ro(s){if(Ul[s])return Ul[s];if(!ci[s])return s;var i=ci[s],a;for(a in i)if(i.hasOwnProperty(a)&&a in sf)return Ul[s]=i[a];return s}var nf=Ro("animationend"),of=Ro("animationiteration"),af=Ro("animationstart"),lf=Ro("transitionend"),cf=new Map,uf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ss(s,i){cf.set(s,i),l(i,[s])}for(var Kl=0;Kl<uf.length;Kl++){var Vl=uf[Kl],oy=Vl.toLowerCase(),ay=Vl[0].toUpperCase()+Vl.slice(1);ss(oy,"on"+ay)}ss(nf,"onAnimationEnd"),ss(of,"onAnimationIteration"),ss(af,"onAnimationStart"),ss("dblclick","onDoubleClick"),ss("focusin","onFocus"),ss("focusout","onBlur"),ss(lf,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ly=new Set("cancel close invalid load scroll toggle".split(" ").concat(hn));function hf(s,i,a){var u=s.type||"unknown-event";s.currentTarget=a,o0(u,i,void 0,s),s.currentTarget=null}function df(s,i){i=(i&4)!==0;for(var a=0;a<s.length;a++){var u=s[a],p=u.event;u=u.listeners;e:{var g=void 0;if(i)for(var y=u.length-1;0<=y;y--){var N=u[y],R=N.instance,H=N.currentTarget;if(N=N.listener,R!==g&&p.isPropagationStopped())break e;hf(p,N,H),g=R}else for(y=0;y<u.length;y++){if(N=u[y],R=N.instance,H=N.currentTarget,N=N.listener,R!==g&&p.isPropagationStopped())break e;hf(p,N,H),g=R}}}if(fo)throw s=bl,fo=!1,bl=null,s}function Fe(s,i){var a=i[ec];a===void 0&&(a=i[ec]=new Set);var u=s+"__bubble";a.has(u)||(ff(i,s,2,!1),a.add(u))}function ql(s,i,a){var u=0;i&&(u|=4),ff(a,s,u,i)}var Lo="_reactListening"+Math.random().toString(36).slice(2);function dn(s){if(!s[Lo]){s[Lo]=!0,n.forEach(function(a){a!=="selectionchange"&&(ly.has(a)||ql(a,!1,s),ql(a,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[Lo]||(i[Lo]=!0,ql("selectionchange",!1,i))}}function ff(s,i,a,u){switch(Td(i)){case 1:var p=w0;break;case 4:p=b0;break;default:p=Ll}a=p.bind(null,i,a,s),p=void 0,!wl||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),u?p!==void 0?s.addEventListener(i,a,{capture:!0,passive:p}):s.addEventListener(i,a,!0):p!==void 0?s.addEventListener(i,a,{passive:p}):s.addEventListener(i,a,!1)}function Ql(s,i,a,u,p){var g=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var y=u.tag;if(y===3||y===4){var N=u.stateNode.containerInfo;if(N===p||N.nodeType===8&&N.parentNode===p)break;if(y===4)for(y=u.return;y!==null;){var R=y.tag;if((R===3||R===4)&&(R=y.stateNode.containerInfo,R===p||R.nodeType===8&&R.parentNode===p))return;y=y.return}for(;N!==null;){if(y=Ns(N),y===null)return;if(R=y.tag,R===5||R===6){u=g=y;continue e}N=N.parentNode}}u=u.return}_d(function(){var H=g,re=yl(a),se=[];e:{var ee=cf.get(s);if(ee!==void 0){var ue=Ml,de=s;switch(s){case"keypress":if(Co(a)===0)break e;case"keydown":case"keyup":ue=A0;break;case"focusin":de="focus",ue=Bl;break;case"focusout":de="blur",ue=Bl;break;case"beforeblur":case"afterblur":ue=Bl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Ad;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=E0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=$0;break;case nf:case of:case af:ue=R0;break;case lf:ue=W0;break;case"scroll":ue=C0;break;case"wheel":ue=K0;break;case"copy":case"cut":case"paste":ue=j0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=zd}var pe=(i&4)!==0,Ze=!pe&&s==="scroll",z=pe?ee!==null?ee+"Capture":null:ee;pe=[];for(var L=H,$;L!==null;){$=L;var ne=$.stateNode;if($.tag===5&&ne!==null&&($=ne,z!==null&&(ne=qi(L,z),ne!=null&&pe.push(fn(L,ne,$)))),Ze)break;L=L.return}0<pe.length&&(ee=new ue(ee,de,null,a,re),se.push({event:ee,listeners:pe}))}}if((i&7)===0){e:{if(ee=s==="mouseover"||s==="pointerover",ue=s==="mouseout"||s==="pointerout",ee&&a!==vl&&(de=a.relatedTarget||a.fromElement)&&(Ns(de)||de[Tr]))break e;if((ue||ee)&&(ee=re.window===re?re:(ee=re.ownerDocument)?ee.defaultView||ee.parentWindow:window,ue?(de=a.relatedTarget||a.toElement,ue=H,de=de?Ns(de):null,de!==null&&(Ze=Es(de),de!==Ze||de.tag!==5&&de.tag!==6)&&(de=null)):(ue=null,de=H),ue!==de)){if(pe=Ad,ne="onMouseLeave",z="onMouseEnter",L="mouse",(s==="pointerout"||s==="pointerover")&&(pe=zd,ne="onPointerLeave",z="onPointerEnter",L="pointer"),Ze=ue==null?ee:di(ue),$=de==null?ee:di(de),ee=new pe(ne,L+"leave",ue,a,re),ee.target=Ze,ee.relatedTarget=$,ne=null,Ns(re)===H&&(pe=new pe(z,L+"enter",de,a,re),pe.target=$,pe.relatedTarget=Ze,ne=pe),Ze=ne,ue&&de)t:{for(pe=ue,z=de,L=0,$=pe;$;$=ui($))L++;for($=0,ne=z;ne;ne=ui(ne))$++;for(;0<L-$;)pe=ui(pe),L--;for(;0<$-L;)z=ui(z),$--;for(;L--;){if(pe===z||z!==null&&pe===z.alternate)break t;pe=ui(pe),z=ui(z)}pe=null}else pe=null;ue!==null&&pf(se,ee,ue,pe,!1),de!==null&&Ze!==null&&pf(se,Ze,de,pe,!0)}}e:{if(ee=H?di(H):window,ue=ee.nodeName&&ee.nodeName.toLowerCase(),ue==="select"||ue==="input"&&ee.type==="file")var me=J0;else if(Vd(ee))if(Qd)me=ry;else{me=ey;var _e=Z0}else(ue=ee.nodeName)&&ue.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(me=ty);if(me&&(me=me(s,H))){qd(se,me,a,re);break e}_e&&_e(s,ee,H),s==="focusout"&&(_e=ee._wrapperState)&&_e.controlled&&ee.type==="number"&&fl(ee,"number",ee.value)}switch(_e=H?di(H):window,s){case"focusin":(Vd(_e)||_e.contentEditable==="true")&&(li=_e,Hl=H,un=null);break;case"focusout":un=Hl=li=null;break;case"mousedown":Wl=!0;break;case"contextmenu":case"mouseup":case"dragend":Wl=!1,rf(se,a,re);break;case"selectionchange":if(ny)break;case"keydown":case"keyup":rf(se,a,re)}var ve;if(Al)e:{switch(s){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else ai?Ud(s,a)&&(we="onCompositionEnd"):s==="keydown"&&a.keyCode===229&&(we="onCompositionStart");we&&($d&&a.locale!=="ko"&&(ai||we!=="onCompositionStart"?we==="onCompositionEnd"&&ai&&(ve=Bd()):(rs=re,Dl="value"in rs?rs.value:rs.textContent,ai=!0)),_e=jo(H,we),0<_e.length&&(we=new Fd(we,s,null,a,re),se.push({event:we,listeners:_e}),ve?we.data=ve:(ve=Kd(a),ve!==null&&(we.data=ve)))),(ve=q0?Q0(s,a):Y0(s,a))&&(H=jo(H,"onBeforeInput"),0<H.length&&(re=new Fd("onBeforeInput","beforeinput",null,a,re),se.push({event:re,listeners:H}),re.data=ve))}df(se,i)})}function fn(s,i,a){return{instance:s,listener:i,currentTarget:a}}function jo(s,i){for(var a=i+"Capture",u=[];s!==null;){var p=s,g=p.stateNode;p.tag===5&&g!==null&&(p=g,g=qi(s,a),g!=null&&u.unshift(fn(s,g,p)),g=qi(s,i),g!=null&&u.push(fn(s,g,p))),s=s.return}return u}function ui(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function pf(s,i,a,u,p){for(var g=i._reactName,y=[];a!==null&&a!==u;){var N=a,R=N.alternate,H=N.stateNode;if(R!==null&&R===u)break;N.tag===5&&H!==null&&(N=H,p?(R=qi(a,g),R!=null&&y.unshift(fn(a,R,N))):p||(R=qi(a,g),R!=null&&y.push(fn(a,R,N)))),a=a.return}y.length!==0&&s.push({event:i,listeners:y})}var cy=/\r\n?/g,uy=/\u0000|\uFFFD/g;function mf(s){return(typeof s=="string"?s:""+s).replace(cy,`
`).replace(uy,"")}function Do(s,i,a){if(i=mf(i),mf(s)!==i&&a)throw Error(r(425))}function Mo(){}var Yl=null,Gl=null;function Xl(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Jl=typeof setTimeout=="function"?setTimeout:void 0,hy=typeof clearTimeout=="function"?clearTimeout:void 0,gf=typeof Promise=="function"?Promise:void 0,dy=typeof queueMicrotask=="function"?queueMicrotask:typeof gf<"u"?function(s){return gf.resolve(null).then(s).catch(fy)}:Jl;function fy(s){setTimeout(function(){throw s})}function Zl(s,i){var a=i,u=0;do{var p=a.nextSibling;if(s.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"){if(u===0){s.removeChild(p),rn(i);return}u--}else a!=="$"&&a!=="$?"&&a!=="$!"||u++;a=p}while(a);rn(i)}function is(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return s}function _f(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var a=s.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return s;i--}else a==="/$"&&i++}s=s.previousSibling}return null}var hi=Math.random().toString(36).slice(2),Cr="__reactFiber$"+hi,pn="__reactProps$"+hi,Tr="__reactContainer$"+hi,ec="__reactEvents$"+hi,py="__reactListeners$"+hi,my="__reactHandles$"+hi;function Ns(s){var i=s[Cr];if(i)return i;for(var a=s.parentNode;a;){if(i=a[Tr]||a[Cr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(s=_f(s);s!==null;){if(a=s[Cr])return a;s=_f(s)}return i}s=a,a=s.parentNode}return null}function mn(s){return s=s[Cr]||s[Tr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function di(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(r(33))}function Oo(s){return s[pn]||null}var tc=[],fi=-1;function ns(s){return{current:s}}function ze(s){0>fi||(s.current=tc[fi],tc[fi]=null,fi--)}function Ae(s,i){fi++,tc[fi]=s.current,s.current=i}var os={},kt=ns(os),It=ns(!1),Ps=os;function pi(s,i){var a=s.type.contextTypes;if(!a)return os;var u=s.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===i)return u.__reactInternalMemoizedMaskedChildContext;var p={},g;for(g in a)p[g]=i[g];return u&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=i,s.__reactInternalMemoizedMaskedChildContext=p),p}function At(s){return s=s.childContextTypes,s!=null}function To(){ze(It),ze(kt)}function vf(s,i,a){if(kt.current!==os)throw Error(r(168));Ae(kt,i),Ae(It,a)}function yf(s,i,a){var u=s.stateNode;if(i=i.childContextTypes,typeof u.getChildContext!="function")return a;u=u.getChildContext();for(var p in u)if(!(p in i))throw Error(r(108,je(s)||"Unknown",p));return X({},a,u)}function Bo(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||os,Ps=kt.current,Ae(kt,s),Ae(It,It.current),!0}function xf(s,i,a){var u=s.stateNode;if(!u)throw Error(r(169));a?(s=yf(s,i,Ps),u.__reactInternalMemoizedMergedChildContext=s,ze(It),ze(kt),Ae(kt,s)):ze(It),Ae(It,a)}var Br=null,Io=!1,rc=!1;function Sf(s){Br===null?Br=[s]:Br.push(s)}function gy(s){Io=!0,Sf(s)}function as(){if(!rc&&Br!==null){rc=!0;var s=0,i=Be;try{var a=Br;for(Be=1;s<a.length;s++){var u=a[s];do u=u(!0);while(u!==null)}Br=null,Io=!1}catch(p){throw Br!==null&&(Br=Br.slice(s+1)),wd(Cl,as),p}finally{Be=i,rc=!1}}return null}var mi=[],gi=0,Ao=null,Fo=0,tr=[],rr=0,Rs=null,Ir=1,Ar="";function Ls(s,i){mi[gi++]=Fo,mi[gi++]=Ao,Ao=s,Fo=i}function wf(s,i,a){tr[rr++]=Ir,tr[rr++]=Ar,tr[rr++]=Rs,Rs=s;var u=Ir;s=Ar;var p=32-pr(u)-1;u&=~(1<<p),a+=1;var g=32-pr(i)+p;if(30<g){var y=p-p%5;g=(u&(1<<y)-1).toString(32),u>>=y,p-=y,Ir=1<<32-pr(i)+p|a<<p|u,Ar=g+s}else Ir=1<<g|a<<p|u,Ar=s}function sc(s){s.return!==null&&(Ls(s,1),wf(s,1,0))}function ic(s){for(;s===Ao;)Ao=mi[--gi],mi[gi]=null,Fo=mi[--gi],mi[gi]=null;for(;s===Rs;)Rs=tr[--rr],tr[rr]=null,Ar=tr[--rr],tr[rr]=null,Ir=tr[--rr],tr[rr]=null}var Kt=null,Vt=null,He=!1,gr=null;function bf(s,i){var a=or(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=s,i=s.deletions,i===null?(s.deletions=[a],s.flags|=16):i.push(a)}function Cf(s,i){switch(s.tag){case 5:var a=s.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(s.stateNode=i,Kt=s,Vt=is(i.firstChild),!0):!1;case 6:return i=s.pendingProps===""||i.nodeType!==3?null:i,i!==null?(s.stateNode=i,Kt=s,Vt=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=Rs!==null?{id:Ir,overflow:Ar}:null,s.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=or(18,null,null,0),a.stateNode=i,a.return=s,s.child=a,Kt=s,Vt=null,!0):!1;default:return!1}}function nc(s){return(s.mode&1)!==0&&(s.flags&128)===0}function oc(s){if(He){var i=Vt;if(i){var a=i;if(!Cf(s,i)){if(nc(s))throw Error(r(418));i=is(a.nextSibling);var u=Kt;i&&Cf(s,i)?bf(u,a):(s.flags=s.flags&-4097|2,He=!1,Kt=s)}}else{if(nc(s))throw Error(r(418));s.flags=s.flags&-4097|2,He=!1,Kt=s}}}function kf(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Kt=s}function zo(s){if(s!==Kt)return!1;if(!He)return kf(s),He=!0,!1;var i;if((i=s.tag!==3)&&!(i=s.tag!==5)&&(i=s.type,i=i!=="head"&&i!=="body"&&!Xl(s.type,s.memoizedProps)),i&&(i=Vt)){if(nc(s))throw Ef(),Error(r(418));for(;i;)bf(s,i),i=is(i.nextSibling)}if(kf(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,i=0;s;){if(s.nodeType===8){var a=s.data;if(a==="/$"){if(i===0){Vt=is(s.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}s=s.nextSibling}Vt=null}}else Vt=Kt?is(s.stateNode.nextSibling):null;return!0}function Ef(){for(var s=Vt;s;)s=is(s.nextSibling)}function _i(){Vt=Kt=null,He=!1}function ac(s){gr===null?gr=[s]:gr.push(s)}var _y=A.ReactCurrentBatchConfig;function gn(s,i,a){if(s=a.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(r(309));var u=a.stateNode}if(!u)throw Error(r(147,s));var p=u,g=""+s;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===g?i.ref:(i=function(y){var N=p.refs;y===null?delete N[g]:N[g]=y},i._stringRef=g,i)}if(typeof s!="string")throw Error(r(284));if(!a._owner)throw Error(r(290,s))}return s}function $o(s,i){throw s=Object.prototype.toString.call(i),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s))}function Nf(s){var i=s._init;return i(s._payload)}function Pf(s){function i(z,L){if(s){var $=z.deletions;$===null?(z.deletions=[L],z.flags|=16):$.push(L)}}function a(z,L){if(!s)return null;for(;L!==null;)i(z,L),L=L.sibling;return null}function u(z,L){for(z=new Map;L!==null;)L.key!==null?z.set(L.key,L):z.set(L.index,L),L=L.sibling;return z}function p(z,L){return z=ms(z,L),z.index=0,z.sibling=null,z}function g(z,L,$){return z.index=$,s?($=z.alternate,$!==null?($=$.index,$<L?(z.flags|=2,L):$):(z.flags|=2,L)):(z.flags|=1048576,L)}function y(z){return s&&z.alternate===null&&(z.flags|=2),z}function N(z,L,$,ne){return L===null||L.tag!==6?(L=Jc($,z.mode,ne),L.return=z,L):(L=p(L,$),L.return=z,L)}function R(z,L,$,ne){var me=$.type;return me===Z?re(z,L,$.props.children,ne,$.key):L!==null&&(L.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===B&&Nf(me)===L.type)?(ne=p(L,$.props),ne.ref=gn(z,L,$),ne.return=z,ne):(ne=ha($.type,$.key,$.props,null,z.mode,ne),ne.ref=gn(z,L,$),ne.return=z,ne)}function H(z,L,$,ne){return L===null||L.tag!==4||L.stateNode.containerInfo!==$.containerInfo||L.stateNode.implementation!==$.implementation?(L=Zc($,z.mode,ne),L.return=z,L):(L=p(L,$.children||[]),L.return=z,L)}function re(z,L,$,ne,me){return L===null||L.tag!==7?(L=As($,z.mode,ne,me),L.return=z,L):(L=p(L,$),L.return=z,L)}function se(z,L,$){if(typeof L=="string"&&L!==""||typeof L=="number")return L=Jc(""+L,z.mode,$),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case U:return $=ha(L.type,L.key,L.props,null,z.mode,$),$.ref=gn(z,null,L),$.return=z,$;case V:return L=Zc(L,z.mode,$),L.return=z,L;case B:var ne=L._init;return se(z,ne(L._payload),$)}if(Ui(L)||Q(L))return L=As(L,z.mode,$,null),L.return=z,L;$o(z,L)}return null}function ee(z,L,$,ne){var me=L!==null?L.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return me!==null?null:N(z,L,""+$,ne);if(typeof $=="object"&&$!==null){switch($.$$typeof){case U:return $.key===me?R(z,L,$,ne):null;case V:return $.key===me?H(z,L,$,ne):null;case B:return me=$._init,ee(z,L,me($._payload),ne)}if(Ui($)||Q($))return me!==null?null:re(z,L,$,ne,null);$o(z,$)}return null}function ue(z,L,$,ne,me){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return z=z.get($)||null,N(L,z,""+ne,me);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case U:return z=z.get(ne.key===null?$:ne.key)||null,R(L,z,ne,me);case V:return z=z.get(ne.key===null?$:ne.key)||null,H(L,z,ne,me);case B:var _e=ne._init;return ue(z,L,$,_e(ne._payload),me)}if(Ui(ne)||Q(ne))return z=z.get($)||null,re(L,z,ne,me,null);$o(L,ne)}return null}function de(z,L,$,ne){for(var me=null,_e=null,ve=L,we=L=0,pt=null;ve!==null&&we<$.length;we++){ve.index>we?(pt=ve,ve=null):pt=ve.sibling;var Oe=ee(z,ve,$[we],ne);if(Oe===null){ve===null&&(ve=pt);break}s&&ve&&Oe.alternate===null&&i(z,ve),L=g(Oe,L,we),_e===null?me=Oe:_e.sibling=Oe,_e=Oe,ve=pt}if(we===$.length)return a(z,ve),He&&Ls(z,we),me;if(ve===null){for(;we<$.length;we++)ve=se(z,$[we],ne),ve!==null&&(L=g(ve,L,we),_e===null?me=ve:_e.sibling=ve,_e=ve);return He&&Ls(z,we),me}for(ve=u(z,ve);we<$.length;we++)pt=ue(ve,z,we,$[we],ne),pt!==null&&(s&&pt.alternate!==null&&ve.delete(pt.key===null?we:pt.key),L=g(pt,L,we),_e===null?me=pt:_e.sibling=pt,_e=pt);return s&&ve.forEach(function(gs){return i(z,gs)}),He&&Ls(z,we),me}function pe(z,L,$,ne){var me=Q($);if(typeof me!="function")throw Error(r(150));if($=me.call($),$==null)throw Error(r(151));for(var _e=me=null,ve=L,we=L=0,pt=null,Oe=$.next();ve!==null&&!Oe.done;we++,Oe=$.next()){ve.index>we?(pt=ve,ve=null):pt=ve.sibling;var gs=ee(z,ve,Oe.value,ne);if(gs===null){ve===null&&(ve=pt);break}s&&ve&&gs.alternate===null&&i(z,ve),L=g(gs,L,we),_e===null?me=gs:_e.sibling=gs,_e=gs,ve=pt}if(Oe.done)return a(z,ve),He&&Ls(z,we),me;if(ve===null){for(;!Oe.done;we++,Oe=$.next())Oe=se(z,Oe.value,ne),Oe!==null&&(L=g(Oe,L,we),_e===null?me=Oe:_e.sibling=Oe,_e=Oe);return He&&Ls(z,we),me}for(ve=u(z,ve);!Oe.done;we++,Oe=$.next())Oe=ue(ve,z,we,Oe.value,ne),Oe!==null&&(s&&Oe.alternate!==null&&ve.delete(Oe.key===null?we:Oe.key),L=g(Oe,L,we),_e===null?me=Oe:_e.sibling=Oe,_e=Oe);return s&&ve.forEach(function(Gy){return i(z,Gy)}),He&&Ls(z,we),me}function Ze(z,L,$,ne){if(typeof $=="object"&&$!==null&&$.type===Z&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case U:e:{for(var me=$.key,_e=L;_e!==null;){if(_e.key===me){if(me=$.type,me===Z){if(_e.tag===7){a(z,_e.sibling),L=p(_e,$.props.children),L.return=z,z=L;break e}}else if(_e.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===B&&Nf(me)===_e.type){a(z,_e.sibling),L=p(_e,$.props),L.ref=gn(z,_e,$),L.return=z,z=L;break e}a(z,_e);break}else i(z,_e);_e=_e.sibling}$.type===Z?(L=As($.props.children,z.mode,ne,$.key),L.return=z,z=L):(ne=ha($.type,$.key,$.props,null,z.mode,ne),ne.ref=gn(z,L,$),ne.return=z,z=ne)}return y(z);case V:e:{for(_e=$.key;L!==null;){if(L.key===_e)if(L.tag===4&&L.stateNode.containerInfo===$.containerInfo&&L.stateNode.implementation===$.implementation){a(z,L.sibling),L=p(L,$.children||[]),L.return=z,z=L;break e}else{a(z,L);break}else i(z,L);L=L.sibling}L=Zc($,z.mode,ne),L.return=z,z=L}return y(z);case B:return _e=$._init,Ze(z,L,_e($._payload),ne)}if(Ui($))return de(z,L,$,ne);if(Q($))return pe(z,L,$,ne);$o(z,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,L!==null&&L.tag===6?(a(z,L.sibling),L=p(L,$),L.return=z,z=L):(a(z,L),L=Jc($,z.mode,ne),L.return=z,z=L),y(z)):a(z,L)}return Ze}var vi=Pf(!0),Rf=Pf(!1),Ho=ns(null),Wo=null,yi=null,lc=null;function cc(){lc=yi=Wo=null}function uc(s){var i=Ho.current;ze(Ho),s._currentValue=i}function hc(s,i,a){for(;s!==null;){var u=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),s===a)break;s=s.return}}function xi(s,i){Wo=s,lc=yi=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&i)!==0&&(Ft=!0),s.firstContext=null)}function sr(s){var i=s._currentValue;if(lc!==s)if(s={context:s,memoizedValue:i,next:null},yi===null){if(Wo===null)throw Error(r(308));yi=s,Wo.dependencies={lanes:0,firstContext:s}}else yi=yi.next=s;return i}var js=null;function dc(s){js===null?js=[s]:js.push(s)}function Lf(s,i,a,u){var p=i.interleaved;return p===null?(a.next=a,dc(i)):(a.next=p.next,p.next=a),i.interleaved=a,Fr(s,u)}function Fr(s,i){s.lanes|=i;var a=s.alternate;for(a!==null&&(a.lanes|=i),a=s,s=s.return;s!==null;)s.childLanes|=i,a=s.alternate,a!==null&&(a.childLanes|=i),a=s,s=s.return;return a.tag===3?a.stateNode:null}var ls=!1;function fc(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jf(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function zr(s,i){return{eventTime:s,lane:i,tag:0,payload:null,callback:null,next:null}}function cs(s,i,a){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(Me&2)!==0){var p=u.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),u.pending=i,Fr(s,a)}return p=u.interleaved,p===null?(i.next=i,dc(u)):(i.next=p.next,p.next=i),u.interleaved=i,Fr(s,a)}function Uo(s,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var u=i.lanes;u&=s.pendingLanes,a|=u,i.lanes=a,Nl(s,a)}}function Df(s,i){var a=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var p=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var y={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?p=g=y:g=g.next=y,a=a.next}while(a!==null);g===null?p=g=i:g=g.next=i}else p=g=i;a={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:u.shared,effects:u.effects},s.updateQueue=a;return}s=a.lastBaseUpdate,s===null?a.firstBaseUpdate=i:s.next=i,a.lastBaseUpdate=i}function Ko(s,i,a,u){var p=s.updateQueue;ls=!1;var g=p.firstBaseUpdate,y=p.lastBaseUpdate,N=p.shared.pending;if(N!==null){p.shared.pending=null;var R=N,H=R.next;R.next=null,y===null?g=H:y.next=H,y=R;var re=s.alternate;re!==null&&(re=re.updateQueue,N=re.lastBaseUpdate,N!==y&&(N===null?re.firstBaseUpdate=H:N.next=H,re.lastBaseUpdate=R))}if(g!==null){var se=p.baseState;y=0,re=H=R=null,N=g;do{var ee=N.lane,ue=N.eventTime;if((u&ee)===ee){re!==null&&(re=re.next={eventTime:ue,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var de=s,pe=N;switch(ee=i,ue=a,pe.tag){case 1:if(de=pe.payload,typeof de=="function"){se=de.call(ue,se,ee);break e}se=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=pe.payload,ee=typeof de=="function"?de.call(ue,se,ee):de,ee==null)break e;se=X({},se,ee);break e;case 2:ls=!0}}N.callback!==null&&N.lane!==0&&(s.flags|=64,ee=p.effects,ee===null?p.effects=[N]:ee.push(N))}else ue={eventTime:ue,lane:ee,tag:N.tag,payload:N.payload,callback:N.callback,next:null},re===null?(H=re=ue,R=se):re=re.next=ue,y|=ee;if(N=N.next,N===null){if(N=p.shared.pending,N===null)break;ee=N,N=ee.next,ee.next=null,p.lastBaseUpdate=ee,p.shared.pending=null}}while(!0);if(re===null&&(R=se),p.baseState=R,p.firstBaseUpdate=H,p.lastBaseUpdate=re,i=p.shared.interleaved,i!==null){p=i;do y|=p.lane,p=p.next;while(p!==i)}else g===null&&(p.shared.lanes=0);Os|=y,s.lanes=y,s.memoizedState=se}}function Mf(s,i,a){if(s=i.effects,i.effects=null,s!==null)for(i=0;i<s.length;i++){var u=s[i],p=u.callback;if(p!==null){if(u.callback=null,u=a,typeof p!="function")throw Error(r(191,p));p.call(u)}}}var _n={},kr=ns(_n),vn=ns(_n),yn=ns(_n);function Ds(s){if(s===_n)throw Error(r(174));return s}function pc(s,i){switch(Ae(yn,i),Ae(vn,s),Ae(kr,_n),s=i.nodeType,s){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:ml(null,"");break;default:s=s===8?i.parentNode:i,i=s.namespaceURI||null,s=s.tagName,i=ml(i,s)}ze(kr),Ae(kr,i)}function Si(){ze(kr),ze(vn),ze(yn)}function Of(s){Ds(yn.current);var i=Ds(kr.current),a=ml(i,s.type);i!==a&&(Ae(vn,s),Ae(kr,a))}function mc(s){vn.current===s&&(ze(kr),ze(vn))}var Ke=ns(0);function Vo(s){for(var i=s;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var gc=[];function _c(){for(var s=0;s<gc.length;s++)gc[s]._workInProgressVersionPrimary=null;gc.length=0}var qo=A.ReactCurrentDispatcher,vc=A.ReactCurrentBatchConfig,Ms=0,Ve=null,nt=null,dt=null,Qo=!1,xn=!1,Sn=0,vy=0;function Et(){throw Error(r(321))}function yc(s,i){if(i===null)return!1;for(var a=0;a<i.length&&a<s.length;a++)if(!mr(s[a],i[a]))return!1;return!0}function xc(s,i,a,u,p,g){if(Ms=g,Ve=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,qo.current=s===null||s.memoizedState===null?wy:by,s=a(u,p),xn){g=0;do{if(xn=!1,Sn=0,25<=g)throw Error(r(301));g+=1,dt=nt=null,i.updateQueue=null,qo.current=Cy,s=a(u,p)}while(xn)}if(qo.current=Xo,i=nt!==null&&nt.next!==null,Ms=0,dt=nt=Ve=null,Qo=!1,i)throw Error(r(300));return s}function Sc(){var s=Sn!==0;return Sn=0,s}function Er(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?Ve.memoizedState=dt=s:dt=dt.next=s,dt}function ir(){if(nt===null){var s=Ve.alternate;s=s!==null?s.memoizedState:null}else s=nt.next;var i=dt===null?Ve.memoizedState:dt.next;if(i!==null)dt=i,nt=s;else{if(s===null)throw Error(r(310));nt=s,s={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},dt===null?Ve.memoizedState=dt=s:dt=dt.next=s}return dt}function wn(s,i){return typeof i=="function"?i(s):i}function wc(s){var i=ir(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=s;var u=nt,p=u.baseQueue,g=a.pending;if(g!==null){if(p!==null){var y=p.next;p.next=g.next,g.next=y}u.baseQueue=p=g,a.pending=null}if(p!==null){g=p.next,u=u.baseState;var N=y=null,R=null,H=g;do{var re=H.lane;if((Ms&re)===re)R!==null&&(R=R.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),u=H.hasEagerState?H.eagerState:s(u,H.action);else{var se={lane:re,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};R===null?(N=R=se,y=u):R=R.next=se,Ve.lanes|=re,Os|=re}H=H.next}while(H!==null&&H!==g);R===null?y=u:R.next=N,mr(u,i.memoizedState)||(Ft=!0),i.memoizedState=u,i.baseState=y,i.baseQueue=R,a.lastRenderedState=u}if(s=a.interleaved,s!==null){p=s;do g=p.lane,Ve.lanes|=g,Os|=g,p=p.next;while(p!==s)}else p===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function bc(s){var i=ir(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=s;var u=a.dispatch,p=a.pending,g=i.memoizedState;if(p!==null){a.pending=null;var y=p=p.next;do g=s(g,y.action),y=y.next;while(y!==p);mr(g,i.memoizedState)||(Ft=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,u]}function Tf(){}function Bf(s,i){var a=Ve,u=ir(),p=i(),g=!mr(u.memoizedState,p);if(g&&(u.memoizedState=p,Ft=!0),u=u.queue,Cc(Ff.bind(null,a,u,s),[s]),u.getSnapshot!==i||g||dt!==null&&dt.memoizedState.tag&1){if(a.flags|=2048,bn(9,Af.bind(null,a,u,p,i),void 0,null),ft===null)throw Error(r(349));(Ms&30)!==0||If(a,i,p)}return p}function If(s,i,a){s.flags|=16384,s={getSnapshot:i,value:a},i=Ve.updateQueue,i===null?(i={lastEffect:null,stores:null},Ve.updateQueue=i,i.stores=[s]):(a=i.stores,a===null?i.stores=[s]:a.push(s))}function Af(s,i,a,u){i.value=a,i.getSnapshot=u,zf(i)&&$f(s)}function Ff(s,i,a){return a(function(){zf(i)&&$f(s)})}function zf(s){var i=s.getSnapshot;s=s.value;try{var a=i();return!mr(s,a)}catch{return!0}}function $f(s){var i=Fr(s,1);i!==null&&xr(i,s,1,-1)}function Hf(s){var i=Er();return typeof s=="function"&&(s=s()),i.memoizedState=i.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wn,lastRenderedState:s},i.queue=s,s=s.dispatch=Sy.bind(null,Ve,s),[i.memoizedState,s]}function bn(s,i,a,u){return s={tag:s,create:i,destroy:a,deps:u,next:null},i=Ve.updateQueue,i===null?(i={lastEffect:null,stores:null},Ve.updateQueue=i,i.lastEffect=s.next=s):(a=i.lastEffect,a===null?i.lastEffect=s.next=s:(u=a.next,a.next=s,s.next=u,i.lastEffect=s)),s}function Wf(){return ir().memoizedState}function Yo(s,i,a,u){var p=Er();Ve.flags|=s,p.memoizedState=bn(1|i,a,void 0,u===void 0?null:u)}function Go(s,i,a,u){var p=ir();u=u===void 0?null:u;var g=void 0;if(nt!==null){var y=nt.memoizedState;if(g=y.destroy,u!==null&&yc(u,y.deps)){p.memoizedState=bn(i,a,g,u);return}}Ve.flags|=s,p.memoizedState=bn(1|i,a,g,u)}function Uf(s,i){return Yo(8390656,8,s,i)}function Cc(s,i){return Go(2048,8,s,i)}function Kf(s,i){return Go(4,2,s,i)}function Vf(s,i){return Go(4,4,s,i)}function qf(s,i){if(typeof i=="function")return s=s(),i(s),function(){i(null)};if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function Qf(s,i,a){return a=a!=null?a.concat([s]):null,Go(4,4,qf.bind(null,i,s),a)}function kc(){}function Yf(s,i){var a=ir();i=i===void 0?null:i;var u=a.memoizedState;return u!==null&&i!==null&&yc(i,u[1])?u[0]:(a.memoizedState=[s,i],s)}function Gf(s,i){var a=ir();i=i===void 0?null:i;var u=a.memoizedState;return u!==null&&i!==null&&yc(i,u[1])?u[0]:(s=s(),a.memoizedState=[s,i],s)}function Xf(s,i,a){return(Ms&21)===0?(s.baseState&&(s.baseState=!1,Ft=!0),s.memoizedState=a):(mr(a,i)||(a=Ed(),Ve.lanes|=a,Os|=a,s.baseState=!0),i)}function yy(s,i){var a=Be;Be=a!==0&&4>a?a:4,s(!0);var u=vc.transition;vc.transition={};try{s(!1),i()}finally{Be=a,vc.transition=u}}function Jf(){return ir().memoizedState}function xy(s,i,a){var u=fs(s);if(a={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null},Zf(s))ep(i,a);else if(a=Lf(s,i,a,u),a!==null){var p=jt();xr(a,s,u,p),tp(a,i,u)}}function Sy(s,i,a){var u=fs(s),p={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null};if(Zf(s))ep(i,p);else{var g=s.alternate;if(s.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var y=i.lastRenderedState,N=g(y,a);if(p.hasEagerState=!0,p.eagerState=N,mr(N,y)){var R=i.interleaved;R===null?(p.next=p,dc(i)):(p.next=R.next,R.next=p),i.interleaved=p;return}}catch{}finally{}a=Lf(s,i,p,u),a!==null&&(p=jt(),xr(a,s,u,p),tp(a,i,u))}}function Zf(s){var i=s.alternate;return s===Ve||i!==null&&i===Ve}function ep(s,i){xn=Qo=!0;var a=s.pending;a===null?i.next=i:(i.next=a.next,a.next=i),s.pending=i}function tp(s,i,a){if((a&4194240)!==0){var u=i.lanes;u&=s.pendingLanes,a|=u,i.lanes=a,Nl(s,a)}}var Xo={readContext:sr,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useInsertionEffect:Et,useLayoutEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useMutableSource:Et,useSyncExternalStore:Et,useId:Et,unstable_isNewReconciler:!1},wy={readContext:sr,useCallback:function(s,i){return Er().memoizedState=[s,i===void 0?null:i],s},useContext:sr,useEffect:Uf,useImperativeHandle:function(s,i,a){return a=a!=null?a.concat([s]):null,Yo(4194308,4,qf.bind(null,i,s),a)},useLayoutEffect:function(s,i){return Yo(4194308,4,s,i)},useInsertionEffect:function(s,i){return Yo(4,2,s,i)},useMemo:function(s,i){var a=Er();return i=i===void 0?null:i,s=s(),a.memoizedState=[s,i],s},useReducer:function(s,i,a){var u=Er();return i=a!==void 0?a(i):i,u.memoizedState=u.baseState=i,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:i},u.queue=s,s=s.dispatch=xy.bind(null,Ve,s),[u.memoizedState,s]},useRef:function(s){var i=Er();return s={current:s},i.memoizedState=s},useState:Hf,useDebugValue:kc,useDeferredValue:function(s){return Er().memoizedState=s},useTransition:function(){var s=Hf(!1),i=s[0];return s=yy.bind(null,s[1]),Er().memoizedState=s,[i,s]},useMutableSource:function(){},useSyncExternalStore:function(s,i,a){var u=Ve,p=Er();if(He){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),ft===null)throw Error(r(349));(Ms&30)!==0||If(u,i,a)}p.memoizedState=a;var g={value:a,getSnapshot:i};return p.queue=g,Uf(Ff.bind(null,u,g,s),[s]),u.flags|=2048,bn(9,Af.bind(null,u,g,a,i),void 0,null),a},useId:function(){var s=Er(),i=ft.identifierPrefix;if(He){var a=Ar,u=Ir;a=(u&~(1<<32-pr(u)-1)).toString(32)+a,i=":"+i+"R"+a,a=Sn++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=vy++,i=":"+i+"r"+a.toString(32)+":";return s.memoizedState=i},unstable_isNewReconciler:!1},by={readContext:sr,useCallback:Yf,useContext:sr,useEffect:Cc,useImperativeHandle:Qf,useInsertionEffect:Kf,useLayoutEffect:Vf,useMemo:Gf,useReducer:wc,useRef:Wf,useState:function(){return wc(wn)},useDebugValue:kc,useDeferredValue:function(s){var i=ir();return Xf(i,nt.memoizedState,s)},useTransition:function(){var s=wc(wn)[0],i=ir().memoizedState;return[s,i]},useMutableSource:Tf,useSyncExternalStore:Bf,useId:Jf,unstable_isNewReconciler:!1},Cy={readContext:sr,useCallback:Yf,useContext:sr,useEffect:Cc,useImperativeHandle:Qf,useInsertionEffect:Kf,useLayoutEffect:Vf,useMemo:Gf,useReducer:bc,useRef:Wf,useState:function(){return bc(wn)},useDebugValue:kc,useDeferredValue:function(s){var i=ir();return nt===null?i.memoizedState=s:Xf(i,nt.memoizedState,s)},useTransition:function(){var s=bc(wn)[0],i=ir().memoizedState;return[s,i]},useMutableSource:Tf,useSyncExternalStore:Bf,useId:Jf,unstable_isNewReconciler:!1};function _r(s,i){if(s&&s.defaultProps){i=X({},i),s=s.defaultProps;for(var a in s)i[a]===void 0&&(i[a]=s[a]);return i}return i}function Ec(s,i,a,u){i=s.memoizedState,a=a(u,i),a=a==null?i:X({},i,a),s.memoizedState=a,s.lanes===0&&(s.updateQueue.baseState=a)}var Jo={isMounted:function(s){return(s=s._reactInternals)?Es(s)===s:!1},enqueueSetState:function(s,i,a){s=s._reactInternals;var u=jt(),p=fs(s),g=zr(u,p);g.payload=i,a!=null&&(g.callback=a),i=cs(s,g,p),i!==null&&(xr(i,s,p,u),Uo(i,s,p))},enqueueReplaceState:function(s,i,a){s=s._reactInternals;var u=jt(),p=fs(s),g=zr(u,p);g.tag=1,g.payload=i,a!=null&&(g.callback=a),i=cs(s,g,p),i!==null&&(xr(i,s,p,u),Uo(i,s,p))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var a=jt(),u=fs(s),p=zr(a,u);p.tag=2,i!=null&&(p.callback=i),i=cs(s,p,u),i!==null&&(xr(i,s,u,a),Uo(i,s,u))}};function rp(s,i,a,u,p,g,y){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,g,y):i.prototype&&i.prototype.isPureReactComponent?!cn(a,u)||!cn(p,g):!0}function sp(s,i,a){var u=!1,p=os,g=i.contextType;return typeof g=="object"&&g!==null?g=sr(g):(p=At(i)?Ps:kt.current,u=i.contextTypes,g=(u=u!=null)?pi(s,p):os),i=new i(a,g),s.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Jo,s.stateNode=i,i._reactInternals=s,u&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=p,s.__reactInternalMemoizedMaskedChildContext=g),i}function ip(s,i,a,u){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,u),i.state!==s&&Jo.enqueueReplaceState(i,i.state,null)}function Nc(s,i,a,u){var p=s.stateNode;p.props=a,p.state=s.memoizedState,p.refs={},fc(s);var g=i.contextType;typeof g=="object"&&g!==null?p.context=sr(g):(g=At(i)?Ps:kt.current,p.context=pi(s,g)),p.state=s.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(Ec(s,i,g,a),p.state=s.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(i=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),i!==p.state&&Jo.enqueueReplaceState(p,p.state,null),Ko(s,a,p,u),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308)}function wi(s,i){try{var a="",u=i;do a+=xe(u),u=u.return;while(u);var p=a}catch(g){p=`
Error generating stack: `+g.message+`
`+g.stack}return{value:s,source:i,stack:p,digest:null}}function Pc(s,i,a){return{value:s,source:null,stack:a??null,digest:i??null}}function Rc(s,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var ky=typeof WeakMap=="function"?WeakMap:Map;function np(s,i,a){a=zr(-1,a),a.tag=3,a.payload={element:null};var u=i.value;return a.callback=function(){na||(na=!0,Uc=u),Rc(s,i)},a}function op(s,i,a){a=zr(-1,a),a.tag=3;var u=s.type.getDerivedStateFromError;if(typeof u=="function"){var p=i.value;a.payload=function(){return u(p)},a.callback=function(){Rc(s,i)}}var g=s.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Rc(s,i),typeof u!="function"&&(hs===null?hs=new Set([this]):hs.add(this));var y=i.stack;this.componentDidCatch(i.value,{componentStack:y!==null?y:""})}),a}function ap(s,i,a){var u=s.pingCache;if(u===null){u=s.pingCache=new ky;var p=new Set;u.set(i,p)}else p=u.get(i),p===void 0&&(p=new Set,u.set(i,p));p.has(a)||(p.add(a),s=Fy.bind(null,s,i,a),i.then(s,s))}function lp(s){do{var i;if((i=s.tag===13)&&(i=s.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return s;s=s.return}while(s!==null);return null}function cp(s,i,a,u,p){return(s.mode&1)===0?(s===i?s.flags|=65536:(s.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=zr(-1,1),i.tag=2,cs(a,i,1))),a.lanes|=1),s):(s.flags|=65536,s.lanes=p,s)}var Ey=A.ReactCurrentOwner,Ft=!1;function Lt(s,i,a,u){i.child=s===null?Rf(i,null,a,u):vi(i,s.child,a,u)}function up(s,i,a,u,p){a=a.render;var g=i.ref;return xi(i,p),u=xc(s,i,a,u,g,p),a=Sc(),s!==null&&!Ft?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~p,$r(s,i,p)):(He&&a&&sc(i),i.flags|=1,Lt(s,i,u,p),i.child)}function hp(s,i,a,u,p){if(s===null){var g=a.type;return typeof g=="function"&&!Xc(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=g,dp(s,i,g,u,p)):(s=ha(a.type,null,u,i,i.mode,p),s.ref=i.ref,s.return=i,i.child=s)}if(g=s.child,(s.lanes&p)===0){var y=g.memoizedProps;if(a=a.compare,a=a!==null?a:cn,a(y,u)&&s.ref===i.ref)return $r(s,i,p)}return i.flags|=1,s=ms(g,u),s.ref=i.ref,s.return=i,i.child=s}function dp(s,i,a,u,p){if(s!==null){var g=s.memoizedProps;if(cn(g,u)&&s.ref===i.ref)if(Ft=!1,i.pendingProps=u=g,(s.lanes&p)!==0)(s.flags&131072)!==0&&(Ft=!0);else return i.lanes=s.lanes,$r(s,i,p)}return Lc(s,i,a,u,p)}function fp(s,i,a){var u=i.pendingProps,p=u.children,g=s!==null?s.memoizedState:null;if(u.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(Ci,qt),qt|=a;else{if((a&1073741824)===0)return s=g!==null?g.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:s,cachePool:null,transitions:null},i.updateQueue=null,Ae(Ci,qt),qt|=s,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=g!==null?g.baseLanes:a,Ae(Ci,qt),qt|=u}else g!==null?(u=g.baseLanes|a,i.memoizedState=null):u=a,Ae(Ci,qt),qt|=u;return Lt(s,i,p,a),i.child}function pp(s,i){var a=i.ref;(s===null&&a!==null||s!==null&&s.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Lc(s,i,a,u,p){var g=At(a)?Ps:kt.current;return g=pi(i,g),xi(i,p),a=xc(s,i,a,u,g,p),u=Sc(),s!==null&&!Ft?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~p,$r(s,i,p)):(He&&u&&sc(i),i.flags|=1,Lt(s,i,a,p),i.child)}function mp(s,i,a,u,p){if(At(a)){var g=!0;Bo(i)}else g=!1;if(xi(i,p),i.stateNode===null)ea(s,i),sp(i,a,u),Nc(i,a,u,p),u=!0;else if(s===null){var y=i.stateNode,N=i.memoizedProps;y.props=N;var R=y.context,H=a.contextType;typeof H=="object"&&H!==null?H=sr(H):(H=At(a)?Ps:kt.current,H=pi(i,H));var re=a.getDerivedStateFromProps,se=typeof re=="function"||typeof y.getSnapshotBeforeUpdate=="function";se||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(N!==u||R!==H)&&ip(i,y,u,H),ls=!1;var ee=i.memoizedState;y.state=ee,Ko(i,u,y,p),R=i.memoizedState,N!==u||ee!==R||It.current||ls?(typeof re=="function"&&(Ec(i,a,re,u),R=i.memoizedState),(N=ls||rp(i,a,N,u,ee,R,H))?(se||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=R),y.props=u,y.state=R,y.context=H,u=N):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{y=i.stateNode,jf(s,i),N=i.memoizedProps,H=i.type===i.elementType?N:_r(i.type,N),y.props=H,se=i.pendingProps,ee=y.context,R=a.contextType,typeof R=="object"&&R!==null?R=sr(R):(R=At(a)?Ps:kt.current,R=pi(i,R));var ue=a.getDerivedStateFromProps;(re=typeof ue=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(N!==se||ee!==R)&&ip(i,y,u,R),ls=!1,ee=i.memoizedState,y.state=ee,Ko(i,u,y,p);var de=i.memoizedState;N!==se||ee!==de||It.current||ls?(typeof ue=="function"&&(Ec(i,a,ue,u),de=i.memoizedState),(H=ls||rp(i,a,H,u,ee,de,R)||!1)?(re||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,de,R),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,de,R)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||N===s.memoizedProps&&ee===s.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||N===s.memoizedProps&&ee===s.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=de),y.props=u,y.state=de,y.context=R,u=H):(typeof y.componentDidUpdate!="function"||N===s.memoizedProps&&ee===s.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||N===s.memoizedProps&&ee===s.memoizedState||(i.flags|=1024),u=!1)}return jc(s,i,a,u,g,p)}function jc(s,i,a,u,p,g){pp(s,i);var y=(i.flags&128)!==0;if(!u&&!y)return p&&xf(i,a,!1),$r(s,i,g);u=i.stateNode,Ey.current=i;var N=y&&typeof a.getDerivedStateFromError!="function"?null:u.render();return i.flags|=1,s!==null&&y?(i.child=vi(i,s.child,null,g),i.child=vi(i,null,N,g)):Lt(s,i,N,g),i.memoizedState=u.state,p&&xf(i,a,!0),i.child}function gp(s){var i=s.stateNode;i.pendingContext?vf(s,i.pendingContext,i.pendingContext!==i.context):i.context&&vf(s,i.context,!1),pc(s,i.containerInfo)}function _p(s,i,a,u,p){return _i(),ac(p),i.flags|=256,Lt(s,i,a,u),i.child}var Dc={dehydrated:null,treeContext:null,retryLane:0};function Mc(s){return{baseLanes:s,cachePool:null,transitions:null}}function vp(s,i,a){var u=i.pendingProps,p=Ke.current,g=!1,y=(i.flags&128)!==0,N;if((N=y)||(N=s!==null&&s.memoizedState===null?!1:(p&2)!==0),N?(g=!0,i.flags&=-129):(s===null||s.memoizedState!==null)&&(p|=1),Ae(Ke,p&1),s===null)return oc(i),s=i.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((i.mode&1)===0?i.lanes=1:s.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(y=u.children,s=u.fallback,g?(u=i.mode,g=i.child,y={mode:"hidden",children:y},(u&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=y):g=da(y,u,0,null),s=As(s,u,a,null),g.return=i,s.return=i,g.sibling=s,i.child=g,i.child.memoizedState=Mc(a),i.memoizedState=Dc,s):Oc(i,y));if(p=s.memoizedState,p!==null&&(N=p.dehydrated,N!==null))return Ny(s,i,y,u,N,p,a);if(g){g=u.fallback,y=i.mode,p=s.child,N=p.sibling;var R={mode:"hidden",children:u.children};return(y&1)===0&&i.child!==p?(u=i.child,u.childLanes=0,u.pendingProps=R,i.deletions=null):(u=ms(p,R),u.subtreeFlags=p.subtreeFlags&14680064),N!==null?g=ms(N,g):(g=As(g,y,a,null),g.flags|=2),g.return=i,u.return=i,u.sibling=g,i.child=u,u=g,g=i.child,y=s.child.memoizedState,y=y===null?Mc(a):{baseLanes:y.baseLanes|a,cachePool:null,transitions:y.transitions},g.memoizedState=y,g.childLanes=s.childLanes&~a,i.memoizedState=Dc,u}return g=s.child,s=g.sibling,u=ms(g,{mode:"visible",children:u.children}),(i.mode&1)===0&&(u.lanes=a),u.return=i,u.sibling=null,s!==null&&(a=i.deletions,a===null?(i.deletions=[s],i.flags|=16):a.push(s)),i.child=u,i.memoizedState=null,u}function Oc(s,i){return i=da({mode:"visible",children:i},s.mode,0,null),i.return=s,s.child=i}function Zo(s,i,a,u){return u!==null&&ac(u),vi(i,s.child,null,a),s=Oc(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function Ny(s,i,a,u,p,g,y){if(a)return i.flags&256?(i.flags&=-257,u=Pc(Error(r(422))),Zo(s,i,y,u)):i.memoizedState!==null?(i.child=s.child,i.flags|=128,null):(g=u.fallback,p=i.mode,u=da({mode:"visible",children:u.children},p,0,null),g=As(g,p,y,null),g.flags|=2,u.return=i,g.return=i,u.sibling=g,i.child=u,(i.mode&1)!==0&&vi(i,s.child,null,y),i.child.memoizedState=Mc(y),i.memoizedState=Dc,g);if((i.mode&1)===0)return Zo(s,i,y,null);if(p.data==="$!"){if(u=p.nextSibling&&p.nextSibling.dataset,u)var N=u.dgst;return u=N,g=Error(r(419)),u=Pc(g,u,void 0),Zo(s,i,y,u)}if(N=(y&s.childLanes)!==0,Ft||N){if(u=ft,u!==null){switch(y&-y){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(u.suspendedLanes|y))!==0?0:p,p!==0&&p!==g.retryLane&&(g.retryLane=p,Fr(s,p),xr(u,s,p,-1))}return Gc(),u=Pc(Error(r(421))),Zo(s,i,y,u)}return p.data==="$?"?(i.flags|=128,i.child=s.child,i=zy.bind(null,s),p._reactRetry=i,null):(s=g.treeContext,Vt=is(p.nextSibling),Kt=i,He=!0,gr=null,s!==null&&(tr[rr++]=Ir,tr[rr++]=Ar,tr[rr++]=Rs,Ir=s.id,Ar=s.overflow,Rs=i),i=Oc(i,u.children),i.flags|=4096,i)}function yp(s,i,a){s.lanes|=i;var u=s.alternate;u!==null&&(u.lanes|=i),hc(s.return,i,a)}function Tc(s,i,a,u,p){var g=s.memoizedState;g===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:p}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=a,g.tailMode=p)}function xp(s,i,a){var u=i.pendingProps,p=u.revealOrder,g=u.tail;if(Lt(s,i,u.children,a),u=Ke.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&yp(s,a,i);else if(s.tag===19)yp(s,a,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}u&=1}if(Ae(Ke,u),(i.mode&1)===0)i.memoizedState=null;else switch(p){case"forwards":for(a=i.child,p=null;a!==null;)s=a.alternate,s!==null&&Vo(s)===null&&(p=a),a=a.sibling;a=p,a===null?(p=i.child,i.child=null):(p=a.sibling,a.sibling=null),Tc(i,!1,p,a,g);break;case"backwards":for(a=null,p=i.child,i.child=null;p!==null;){if(s=p.alternate,s!==null&&Vo(s)===null){i.child=p;break}s=p.sibling,p.sibling=a,a=p,p=s}Tc(i,!0,a,null,g);break;case"together":Tc(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ea(s,i){(i.mode&1)===0&&s!==null&&(s.alternate=null,i.alternate=null,i.flags|=2)}function $r(s,i,a){if(s!==null&&(i.dependencies=s.dependencies),Os|=i.lanes,(a&i.childLanes)===0)return null;if(s!==null&&i.child!==s.child)throw Error(r(153));if(i.child!==null){for(s=i.child,a=ms(s,s.pendingProps),i.child=a,a.return=i;s.sibling!==null;)s=s.sibling,a=a.sibling=ms(s,s.pendingProps),a.return=i;a.sibling=null}return i.child}function Py(s,i,a){switch(i.tag){case 3:gp(i),_i();break;case 5:Of(i);break;case 1:At(i.type)&&Bo(i);break;case 4:pc(i,i.stateNode.containerInfo);break;case 10:var u=i.type._context,p=i.memoizedProps.value;Ae(Ho,u._currentValue),u._currentValue=p;break;case 13:if(u=i.memoizedState,u!==null)return u.dehydrated!==null?(Ae(Ke,Ke.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?vp(s,i,a):(Ae(Ke,Ke.current&1),s=$r(s,i,a),s!==null?s.sibling:null);Ae(Ke,Ke.current&1);break;case 19:if(u=(a&i.childLanes)!==0,(s.flags&128)!==0){if(u)return xp(s,i,a);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Ae(Ke,Ke.current),u)break;return null;case 22:case 23:return i.lanes=0,fp(s,i,a)}return $r(s,i,a)}var Sp,Bc,wp,bp;Sp=function(s,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)s.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Bc=function(){},wp=function(s,i,a,u){var p=s.memoizedProps;if(p!==u){s=i.stateNode,Ds(kr.current);var g=null;switch(a){case"input":p=er(s,p),u=er(s,u),g=[];break;case"select":p=X({},p,{value:void 0}),u=X({},u,{value:void 0}),g=[];break;case"textarea":p=pl(s,p),u=pl(s,u),g=[];break;default:typeof p.onClick!="function"&&typeof u.onClick=="function"&&(s.onclick=Mo)}gl(a,u);var y;a=null;for(H in p)if(!u.hasOwnProperty(H)&&p.hasOwnProperty(H)&&p[H]!=null)if(H==="style"){var N=p[H];for(y in N)N.hasOwnProperty(y)&&(a||(a={}),a[y]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(o.hasOwnProperty(H)?g||(g=[]):(g=g||[]).push(H,null));for(H in u){var R=u[H];if(N=p?.[H],u.hasOwnProperty(H)&&R!==N&&(R!=null||N!=null))if(H==="style")if(N){for(y in N)!N.hasOwnProperty(y)||R&&R.hasOwnProperty(y)||(a||(a={}),a[y]="");for(y in R)R.hasOwnProperty(y)&&N[y]!==R[y]&&(a||(a={}),a[y]=R[y])}else a||(g||(g=[]),g.push(H,a)),a=R;else H==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,N=N?N.__html:void 0,R!=null&&N!==R&&(g=g||[]).push(H,R)):H==="children"?typeof R!="string"&&typeof R!="number"||(g=g||[]).push(H,""+R):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(o.hasOwnProperty(H)?(R!=null&&H==="onScroll"&&Fe("scroll",s),g||N===R||(g=[])):(g=g||[]).push(H,R))}a&&(g=g||[]).push("style",a);var H=g;(i.updateQueue=H)&&(i.flags|=4)}},bp=function(s,i,a,u){a!==u&&(i.flags|=4)};function Cn(s,i){if(!He)switch(s.tailMode){case"hidden":i=s.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?s.tail=null:a.sibling=null;break;case"collapsed":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function Nt(s){var i=s.alternate!==null&&s.alternate.child===s.child,a=0,u=0;if(i)for(var p=s.child;p!==null;)a|=p.lanes|p.childLanes,u|=p.subtreeFlags&14680064,u|=p.flags&14680064,p.return=s,p=p.sibling;else for(p=s.child;p!==null;)a|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=s,p=p.sibling;return s.subtreeFlags|=u,s.childLanes=a,i}function Ry(s,i,a){var u=i.pendingProps;switch(ic(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(i),null;case 1:return At(i.type)&&To(),Nt(i),null;case 3:return u=i.stateNode,Si(),ze(It),ze(kt),_c(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(zo(i)?i.flags|=4:s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,gr!==null&&(qc(gr),gr=null))),Bc(s,i),Nt(i),null;case 5:mc(i);var p=Ds(yn.current);if(a=i.type,s!==null&&i.stateNode!=null)wp(s,i,a,u,p),s.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!u){if(i.stateNode===null)throw Error(r(166));return Nt(i),null}if(s=Ds(kr.current),zo(i)){u=i.stateNode,a=i.type;var g=i.memoizedProps;switch(u[Cr]=i,u[pn]=g,s=(i.mode&1)!==0,a){case"dialog":Fe("cancel",u),Fe("close",u);break;case"iframe":case"object":case"embed":Fe("load",u);break;case"video":case"audio":for(p=0;p<hn.length;p++)Fe(hn[p],u);break;case"source":Fe("error",u);break;case"img":case"image":case"link":Fe("error",u),Fe("load",u);break;case"details":Fe("toggle",u);break;case"input":Xr(u,g),Fe("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!g.multiple},Fe("invalid",u);break;case"textarea":nd(u,g),Fe("invalid",u)}gl(a,g),p=null;for(var y in g)if(g.hasOwnProperty(y)){var N=g[y];y==="children"?typeof N=="string"?u.textContent!==N&&(g.suppressHydrationWarning!==!0&&Do(u.textContent,N,s),p=["children",N]):typeof N=="number"&&u.textContent!==""+N&&(g.suppressHydrationWarning!==!0&&Do(u.textContent,N,s),p=["children",""+N]):o.hasOwnProperty(y)&&N!=null&&y==="onScroll"&&Fe("scroll",u)}switch(a){case"input":Te(u),id(u,g,!0);break;case"textarea":Te(u),ad(u);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(u.onclick=Mo)}u=p,i.updateQueue=u,u!==null&&(i.flags|=4)}else{y=p.nodeType===9?p:p.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=ld(a)),s==="http://www.w3.org/1999/xhtml"?a==="script"?(s=y.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof u.is=="string"?s=y.createElement(a,{is:u.is}):(s=y.createElement(a),a==="select"&&(y=s,u.multiple?y.multiple=!0:u.size&&(y.size=u.size))):s=y.createElementNS(s,a),s[Cr]=i,s[pn]=u,Sp(s,i,!1,!1),i.stateNode=s;e:{switch(y=_l(a,u),a){case"dialog":Fe("cancel",s),Fe("close",s),p=u;break;case"iframe":case"object":case"embed":Fe("load",s),p=u;break;case"video":case"audio":for(p=0;p<hn.length;p++)Fe(hn[p],s);p=u;break;case"source":Fe("error",s),p=u;break;case"img":case"image":case"link":Fe("error",s),Fe("load",s),p=u;break;case"details":Fe("toggle",s),p=u;break;case"input":Xr(s,u),p=er(s,u),Fe("invalid",s);break;case"option":p=u;break;case"select":s._wrapperState={wasMultiple:!!u.multiple},p=X({},u,{value:void 0}),Fe("invalid",s);break;case"textarea":nd(s,u),p=pl(s,u),Fe("invalid",s);break;default:p=u}gl(a,p),N=p;for(g in N)if(N.hasOwnProperty(g)){var R=N[g];g==="style"?hd(s,R):g==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&cd(s,R)):g==="children"?typeof R=="string"?(a!=="textarea"||R!=="")&&Ki(s,R):typeof R=="number"&&Ki(s,""+R):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?R!=null&&g==="onScroll"&&Fe("scroll",s):R!=null&&j(s,g,R,y))}switch(a){case"input":Te(s),id(s,u,!1);break;case"textarea":Te(s),ad(s);break;case"option":u.value!=null&&s.setAttribute("value",""+ae(u.value));break;case"select":s.multiple=!!u.multiple,g=u.value,g!=null?ri(s,!!u.multiple,g,!1):u.defaultValue!=null&&ri(s,!!u.multiple,u.defaultValue,!0);break;default:typeof p.onClick=="function"&&(s.onclick=Mo)}switch(a){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Nt(i),null;case 6:if(s&&i.stateNode!=null)bp(s,i,s.memoizedProps,u);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(a=Ds(yn.current),Ds(kr.current),zo(i)){if(u=i.stateNode,a=i.memoizedProps,u[Cr]=i,(g=u.nodeValue!==a)&&(s=Kt,s!==null))switch(s.tag){case 3:Do(u.nodeValue,a,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Do(u.nodeValue,a,(s.mode&1)!==0)}g&&(i.flags|=4)}else u=(a.nodeType===9?a:a.ownerDocument).createTextNode(u),u[Cr]=i,i.stateNode=u}return Nt(i),null;case 13:if(ze(Ke),u=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(He&&Vt!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Ef(),_i(),i.flags|=98560,g=!1;else if(g=zo(i),u!==null&&u.dehydrated!==null){if(s===null){if(!g)throw Error(r(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Cr]=i}else _i(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Nt(i),g=!1}else gr!==null&&(qc(gr),gr=null),g=!0;if(!g)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(u=u!==null,u!==(s!==null&&s.memoizedState!==null)&&u&&(i.child.flags|=8192,(i.mode&1)!==0&&(s===null||(Ke.current&1)!==0?ot===0&&(ot=3):Gc())),i.updateQueue!==null&&(i.flags|=4),Nt(i),null);case 4:return Si(),Bc(s,i),s===null&&dn(i.stateNode.containerInfo),Nt(i),null;case 10:return uc(i.type._context),Nt(i),null;case 17:return At(i.type)&&To(),Nt(i),null;case 19:if(ze(Ke),g=i.memoizedState,g===null)return Nt(i),null;if(u=(i.flags&128)!==0,y=g.rendering,y===null)if(u)Cn(g,!1);else{if(ot!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(y=Vo(s),y!==null){for(i.flags|=128,Cn(g,!1),u=y.updateQueue,u!==null&&(i.updateQueue=u,i.flags|=4),i.subtreeFlags=0,u=a,a=i.child;a!==null;)g=a,s=u,g.flags&=14680066,y=g.alternate,y===null?(g.childLanes=0,g.lanes=s,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=y.childLanes,g.lanes=y.lanes,g.child=y.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=y.memoizedProps,g.memoizedState=y.memoizedState,g.updateQueue=y.updateQueue,g.type=y.type,s=y.dependencies,g.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),a=a.sibling;return Ae(Ke,Ke.current&1|2),i.child}s=s.sibling}g.tail!==null&&Je()>ki&&(i.flags|=128,u=!0,Cn(g,!1),i.lanes=4194304)}else{if(!u)if(s=Vo(y),s!==null){if(i.flags|=128,u=!0,a=s.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Cn(g,!0),g.tail===null&&g.tailMode==="hidden"&&!y.alternate&&!He)return Nt(i),null}else 2*Je()-g.renderingStartTime>ki&&a!==1073741824&&(i.flags|=128,u=!0,Cn(g,!1),i.lanes=4194304);g.isBackwards?(y.sibling=i.child,i.child=y):(a=g.last,a!==null?a.sibling=y:i.child=y,g.last=y)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=Je(),i.sibling=null,a=Ke.current,Ae(Ke,u?a&1|2:a&1),i):(Nt(i),null);case 22:case 23:return Yc(),u=i.memoizedState!==null,s!==null&&s.memoizedState!==null!==u&&(i.flags|=8192),u&&(i.mode&1)!==0?(qt&1073741824)!==0&&(Nt(i),i.subtreeFlags&6&&(i.flags|=8192)):Nt(i),null;case 24:return null;case 25:return null}throw Error(r(156,i.tag))}function Ly(s,i){switch(ic(i),i.tag){case 1:return At(i.type)&&To(),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return Si(),ze(It),ze(kt),_c(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 5:return mc(i),null;case 13:if(ze(Ke),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(r(340));_i()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return ze(Ke),null;case 4:return Si(),null;case 10:return uc(i.type._context),null;case 22:case 23:return Yc(),null;case 24:return null;default:return null}}var ta=!1,Pt=!1,jy=typeof WeakSet=="function"?WeakSet:Set,he=null;function bi(s,i){var a=s.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(u){Ye(s,i,u)}else a.current=null}function Ic(s,i,a){try{a()}catch(u){Ye(s,i,u)}}var Cp=!1;function Dy(s,i){if(Yl=So,s=tf(),$l(s)){if("selectionStart"in s)var a={start:s.selectionStart,end:s.selectionEnd};else e:{a=(a=s.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var p=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var y=0,N=-1,R=-1,H=0,re=0,se=s,ee=null;t:for(;;){for(var ue;se!==a||p!==0&&se.nodeType!==3||(N=y+p),se!==g||u!==0&&se.nodeType!==3||(R=y+u),se.nodeType===3&&(y+=se.nodeValue.length),(ue=se.firstChild)!==null;)ee=se,se=ue;for(;;){if(se===s)break t;if(ee===a&&++H===p&&(N=y),ee===g&&++re===u&&(R=y),(ue=se.nextSibling)!==null)break;se=ee,ee=se.parentNode}se=ue}a=N===-1||R===-1?null:{start:N,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(Gl={focusedElem:s,selectionRange:a},So=!1,he=i;he!==null;)if(i=he,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,he=s;else for(;he!==null;){i=he;try{var de=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var pe=de.memoizedProps,Ze=de.memoizedState,z=i.stateNode,L=z.getSnapshotBeforeUpdate(i.elementType===i.type?pe:_r(i.type,pe),Ze);z.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var $=i.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ne){Ye(i,i.return,ne)}if(s=i.sibling,s!==null){s.return=i.return,he=s;break}he=i.return}return de=Cp,Cp=!1,de}function kn(s,i,a){var u=i.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var p=u=u.next;do{if((p.tag&s)===s){var g=p.destroy;p.destroy=void 0,g!==void 0&&Ic(i,a,g)}p=p.next}while(p!==u)}}function ra(s,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&s)===s){var u=a.create;a.destroy=u()}a=a.next}while(a!==i)}}function Ac(s){var i=s.ref;if(i!==null){var a=s.stateNode;switch(s.tag){case 5:s=a;break;default:s=a}typeof i=="function"?i(s):i.current=s}}function kp(s){var i=s.alternate;i!==null&&(s.alternate=null,kp(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&(delete i[Cr],delete i[pn],delete i[ec],delete i[py],delete i[my])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Ep(s){return s.tag===5||s.tag===3||s.tag===4}function Np(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Ep(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Fc(s,i,a){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(s,i):a.insertBefore(s,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(s,a)):(i=a,i.appendChild(s)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Mo));else if(u!==4&&(s=s.child,s!==null))for(Fc(s,i,a),s=s.sibling;s!==null;)Fc(s,i,a),s=s.sibling}function zc(s,i,a){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?a.insertBefore(s,i):a.appendChild(s);else if(u!==4&&(s=s.child,s!==null))for(zc(s,i,a),s=s.sibling;s!==null;)zc(s,i,a),s=s.sibling}var St=null,vr=!1;function us(s,i,a){for(a=a.child;a!==null;)Pp(s,i,a),a=a.sibling}function Pp(s,i,a){if(br&&typeof br.onCommitFiberUnmount=="function")try{br.onCommitFiberUnmount(mo,a)}catch{}switch(a.tag){case 5:Pt||bi(a,i);case 6:var u=St,p=vr;St=null,us(s,i,a),St=u,vr=p,St!==null&&(vr?(s=St,a=a.stateNode,s.nodeType===8?s.parentNode.removeChild(a):s.removeChild(a)):St.removeChild(a.stateNode));break;case 18:St!==null&&(vr?(s=St,a=a.stateNode,s.nodeType===8?Zl(s.parentNode,a):s.nodeType===1&&Zl(s,a),rn(s)):Zl(St,a.stateNode));break;case 4:u=St,p=vr,St=a.stateNode.containerInfo,vr=!0,us(s,i,a),St=u,vr=p;break;case 0:case 11:case 14:case 15:if(!Pt&&(u=a.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){p=u=u.next;do{var g=p,y=g.destroy;g=g.tag,y!==void 0&&((g&2)!==0||(g&4)!==0)&&Ic(a,i,y),p=p.next}while(p!==u)}us(s,i,a);break;case 1:if(!Pt&&(bi(a,i),u=a.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=a.memoizedProps,u.state=a.memoizedState,u.componentWillUnmount()}catch(N){Ye(a,i,N)}us(s,i,a);break;case 21:us(s,i,a);break;case 22:a.mode&1?(Pt=(u=Pt)||a.memoizedState!==null,us(s,i,a),Pt=u):us(s,i,a);break;default:us(s,i,a)}}function Rp(s){var i=s.updateQueue;if(i!==null){s.updateQueue=null;var a=s.stateNode;a===null&&(a=s.stateNode=new jy),i.forEach(function(u){var p=$y.bind(null,s,u);a.has(u)||(a.add(u),u.then(p,p))})}}function yr(s,i){var a=i.deletions;if(a!==null)for(var u=0;u<a.length;u++){var p=a[u];try{var g=s,y=i,N=y;e:for(;N!==null;){switch(N.tag){case 5:St=N.stateNode,vr=!1;break e;case 3:St=N.stateNode.containerInfo,vr=!0;break e;case 4:St=N.stateNode.containerInfo,vr=!0;break e}N=N.return}if(St===null)throw Error(r(160));Pp(g,y,p),St=null,vr=!1;var R=p.alternate;R!==null&&(R.return=null),p.return=null}catch(H){Ye(p,i,H)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Lp(i,s),i=i.sibling}function Lp(s,i){var a=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(yr(i,s),Nr(s),u&4){try{kn(3,s,s.return),ra(3,s)}catch(pe){Ye(s,s.return,pe)}try{kn(5,s,s.return)}catch(pe){Ye(s,s.return,pe)}}break;case 1:yr(i,s),Nr(s),u&512&&a!==null&&bi(a,a.return);break;case 5:if(yr(i,s),Nr(s),u&512&&a!==null&&bi(a,a.return),s.flags&32){var p=s.stateNode;try{Ki(p,"")}catch(pe){Ye(s,s.return,pe)}}if(u&4&&(p=s.stateNode,p!=null)){var g=s.memoizedProps,y=a!==null?a.memoizedProps:g,N=s.type,R=s.updateQueue;if(s.updateQueue=null,R!==null)try{N==="input"&&g.type==="radio"&&g.name!=null&&ht(p,g),_l(N,y);var H=_l(N,g);for(y=0;y<R.length;y+=2){var re=R[y],se=R[y+1];re==="style"?hd(p,se):re==="dangerouslySetInnerHTML"?cd(p,se):re==="children"?Ki(p,se):j(p,re,se,H)}switch(N){case"input":tt(p,g);break;case"textarea":od(p,g);break;case"select":var ee=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!g.multiple;var ue=g.value;ue!=null?ri(p,!!g.multiple,ue,!1):ee!==!!g.multiple&&(g.defaultValue!=null?ri(p,!!g.multiple,g.defaultValue,!0):ri(p,!!g.multiple,g.multiple?[]:"",!1))}p[pn]=g}catch(pe){Ye(s,s.return,pe)}}break;case 6:if(yr(i,s),Nr(s),u&4){if(s.stateNode===null)throw Error(r(162));p=s.stateNode,g=s.memoizedProps;try{p.nodeValue=g}catch(pe){Ye(s,s.return,pe)}}break;case 3:if(yr(i,s),Nr(s),u&4&&a!==null&&a.memoizedState.isDehydrated)try{rn(i.containerInfo)}catch(pe){Ye(s,s.return,pe)}break;case 4:yr(i,s),Nr(s);break;case 13:yr(i,s),Nr(s),p=s.child,p.flags&8192&&(g=p.memoizedState!==null,p.stateNode.isHidden=g,!g||p.alternate!==null&&p.alternate.memoizedState!==null||(Wc=Je())),u&4&&Rp(s);break;case 22:if(re=a!==null&&a.memoizedState!==null,s.mode&1?(Pt=(H=Pt)||re,yr(i,s),Pt=H):yr(i,s),Nr(s),u&8192){if(H=s.memoizedState!==null,(s.stateNode.isHidden=H)&&!re&&(s.mode&1)!==0)for(he=s,re=s.child;re!==null;){for(se=he=re;he!==null;){switch(ee=he,ue=ee.child,ee.tag){case 0:case 11:case 14:case 15:kn(4,ee,ee.return);break;case 1:bi(ee,ee.return);var de=ee.stateNode;if(typeof de.componentWillUnmount=="function"){u=ee,a=ee.return;try{i=u,de.props=i.memoizedProps,de.state=i.memoizedState,de.componentWillUnmount()}catch(pe){Ye(u,a,pe)}}break;case 5:bi(ee,ee.return);break;case 22:if(ee.memoizedState!==null){Mp(se);continue}}ue!==null?(ue.return=ee,he=ue):Mp(se)}re=re.sibling}e:for(re=null,se=s;;){if(se.tag===5){if(re===null){re=se;try{p=se.stateNode,H?(g=p.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(N=se.stateNode,R=se.memoizedProps.style,y=R!=null&&R.hasOwnProperty("display")?R.display:null,N.style.display=ud("display",y))}catch(pe){Ye(s,s.return,pe)}}}else if(se.tag===6){if(re===null)try{se.stateNode.nodeValue=H?"":se.memoizedProps}catch(pe){Ye(s,s.return,pe)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===s)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===s)break e;for(;se.sibling===null;){if(se.return===null||se.return===s)break e;re===se&&(re=null),se=se.return}re===se&&(re=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:yr(i,s),Nr(s),u&4&&Rp(s);break;case 21:break;default:yr(i,s),Nr(s)}}function Nr(s){var i=s.flags;if(i&2){try{e:{for(var a=s.return;a!==null;){if(Ep(a)){var u=a;break e}a=a.return}throw Error(r(160))}switch(u.tag){case 5:var p=u.stateNode;u.flags&32&&(Ki(p,""),u.flags&=-33);var g=Np(s);zc(s,g,p);break;case 3:case 4:var y=u.stateNode.containerInfo,N=Np(s);Fc(s,N,y);break;default:throw Error(r(161))}}catch(R){Ye(s,s.return,R)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function My(s,i,a){he=s,jp(s)}function jp(s,i,a){for(var u=(s.mode&1)!==0;he!==null;){var p=he,g=p.child;if(p.tag===22&&u){var y=p.memoizedState!==null||ta;if(!y){var N=p.alternate,R=N!==null&&N.memoizedState!==null||Pt;N=ta;var H=Pt;if(ta=y,(Pt=R)&&!H)for(he=p;he!==null;)y=he,R=y.child,y.tag===22&&y.memoizedState!==null?Op(p):R!==null?(R.return=y,he=R):Op(p);for(;g!==null;)he=g,jp(g),g=g.sibling;he=p,ta=N,Pt=H}Dp(s)}else(p.subtreeFlags&8772)!==0&&g!==null?(g.return=p,he=g):Dp(s)}}function Dp(s){for(;he!==null;){var i=he;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Pt||ra(5,i);break;case 1:var u=i.stateNode;if(i.flags&4&&!Pt)if(a===null)u.componentDidMount();else{var p=i.elementType===i.type?a.memoizedProps:_r(i.type,a.memoizedProps);u.componentDidUpdate(p,a.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var g=i.updateQueue;g!==null&&Mf(i,g,u);break;case 3:var y=i.updateQueue;if(y!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}Mf(i,y,a)}break;case 5:var N=i.stateNode;if(a===null&&i.flags&4){a=N;var R=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&a.focus();break;case"img":R.src&&(a.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var H=i.alternate;if(H!==null){var re=H.memoizedState;if(re!==null){var se=re.dehydrated;se!==null&&rn(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Pt||i.flags&512&&Ac(i)}catch(ee){Ye(i,i.return,ee)}}if(i===s){he=null;break}if(a=i.sibling,a!==null){a.return=i.return,he=a;break}he=i.return}}function Mp(s){for(;he!==null;){var i=he;if(i===s){he=null;break}var a=i.sibling;if(a!==null){a.return=i.return,he=a;break}he=i.return}}function Op(s){for(;he!==null;){var i=he;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{ra(4,i)}catch(R){Ye(i,a,R)}break;case 1:var u=i.stateNode;if(typeof u.componentDidMount=="function"){var p=i.return;try{u.componentDidMount()}catch(R){Ye(i,p,R)}}var g=i.return;try{Ac(i)}catch(R){Ye(i,g,R)}break;case 5:var y=i.return;try{Ac(i)}catch(R){Ye(i,y,R)}}}catch(R){Ye(i,i.return,R)}if(i===s){he=null;break}var N=i.sibling;if(N!==null){N.return=i.return,he=N;break}he=i.return}}var Oy=Math.ceil,sa=A.ReactCurrentDispatcher,$c=A.ReactCurrentOwner,nr=A.ReactCurrentBatchConfig,Me=0,ft=null,rt=null,wt=0,qt=0,Ci=ns(0),ot=0,En=null,Os=0,ia=0,Hc=0,Nn=null,zt=null,Wc=0,ki=1/0,Hr=null,na=!1,Uc=null,hs=null,oa=!1,ds=null,aa=0,Pn=0,Kc=null,la=-1,ca=0;function jt(){return(Me&6)!==0?Je():la!==-1?la:la=Je()}function fs(s){return(s.mode&1)===0?1:(Me&2)!==0&&wt!==0?wt&-wt:_y.transition!==null?(ca===0&&(ca=Ed()),ca):(s=Be,s!==0||(s=window.event,s=s===void 0?16:Td(s.type)),s)}function xr(s,i,a,u){if(50<Pn)throw Pn=0,Kc=null,Error(r(185));Xi(s,a,u),((Me&2)===0||s!==ft)&&(s===ft&&((Me&2)===0&&(ia|=a),ot===4&&ps(s,wt)),$t(s,u),a===1&&Me===0&&(i.mode&1)===0&&(ki=Je()+500,Io&&as()))}function $t(s,i){var a=s.callbackNode;_0(s,i);var u=vo(s,s===ft?wt:0);if(u===0)a!==null&&bd(a),s.callbackNode=null,s.callbackPriority=0;else if(i=u&-u,s.callbackPriority!==i){if(a!=null&&bd(a),i===1)s.tag===0?gy(Bp.bind(null,s)):Sf(Bp.bind(null,s)),dy(function(){(Me&6)===0&&as()}),a=null;else{switch(Nd(u)){case 1:a=Cl;break;case 4:a=Cd;break;case 16:a=po;break;case 536870912:a=kd;break;default:a=po}a=Up(a,Tp.bind(null,s))}s.callbackPriority=i,s.callbackNode=a}}function Tp(s,i){if(la=-1,ca=0,(Me&6)!==0)throw Error(r(327));var a=s.callbackNode;if(Ei()&&s.callbackNode!==a)return null;var u=vo(s,s===ft?wt:0);if(u===0)return null;if((u&30)!==0||(u&s.expiredLanes)!==0||i)i=ua(s,u);else{i=u;var p=Me;Me|=2;var g=Ap();(ft!==s||wt!==i)&&(Hr=null,ki=Je()+500,Bs(s,i));do try{Iy();break}catch(N){Ip(s,N)}while(!0);cc(),sa.current=g,Me=p,rt!==null?i=0:(ft=null,wt=0,i=ot)}if(i!==0){if(i===2&&(p=kl(s),p!==0&&(u=p,i=Vc(s,p))),i===1)throw a=En,Bs(s,0),ps(s,u),$t(s,Je()),a;if(i===6)ps(s,u);else{if(p=s.current.alternate,(u&30)===0&&!Ty(p)&&(i=ua(s,u),i===2&&(g=kl(s),g!==0&&(u=g,i=Vc(s,g))),i===1))throw a=En,Bs(s,0),ps(s,u),$t(s,Je()),a;switch(s.finishedWork=p,s.finishedLanes=u,i){case 0:case 1:throw Error(r(345));case 2:Is(s,zt,Hr);break;case 3:if(ps(s,u),(u&130023424)===u&&(i=Wc+500-Je(),10<i)){if(vo(s,0)!==0)break;if(p=s.suspendedLanes,(p&u)!==u){jt(),s.pingedLanes|=s.suspendedLanes&p;break}s.timeoutHandle=Jl(Is.bind(null,s,zt,Hr),i);break}Is(s,zt,Hr);break;case 4:if(ps(s,u),(u&4194240)===u)break;for(i=s.eventTimes,p=-1;0<u;){var y=31-pr(u);g=1<<y,y=i[y],y>p&&(p=y),u&=~g}if(u=p,u=Je()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Oy(u/1960))-u,10<u){s.timeoutHandle=Jl(Is.bind(null,s,zt,Hr),u);break}Is(s,zt,Hr);break;case 5:Is(s,zt,Hr);break;default:throw Error(r(329))}}}return $t(s,Je()),s.callbackNode===a?Tp.bind(null,s):null}function Vc(s,i){var a=Nn;return s.current.memoizedState.isDehydrated&&(Bs(s,i).flags|=256),s=ua(s,i),s!==2&&(i=zt,zt=a,i!==null&&qc(i)),s}function qc(s){zt===null?zt=s:zt.push.apply(zt,s)}function Ty(s){for(var i=s;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var u=0;u<a.length;u++){var p=a[u],g=p.getSnapshot;p=p.value;try{if(!mr(g(),p))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ps(s,i){for(i&=~Hc,i&=~ia,s.suspendedLanes|=i,s.pingedLanes&=~i,s=s.expirationTimes;0<i;){var a=31-pr(i),u=1<<a;s[a]=-1,i&=~u}}function Bp(s){if((Me&6)!==0)throw Error(r(327));Ei();var i=vo(s,0);if((i&1)===0)return $t(s,Je()),null;var a=ua(s,i);if(s.tag!==0&&a===2){var u=kl(s);u!==0&&(i=u,a=Vc(s,u))}if(a===1)throw a=En,Bs(s,0),ps(s,i),$t(s,Je()),a;if(a===6)throw Error(r(345));return s.finishedWork=s.current.alternate,s.finishedLanes=i,Is(s,zt,Hr),$t(s,Je()),null}function Qc(s,i){var a=Me;Me|=1;try{return s(i)}finally{Me=a,Me===0&&(ki=Je()+500,Io&&as())}}function Ts(s){ds!==null&&ds.tag===0&&(Me&6)===0&&Ei();var i=Me;Me|=1;var a=nr.transition,u=Be;try{if(nr.transition=null,Be=1,s)return s()}finally{Be=u,nr.transition=a,Me=i,(Me&6)===0&&as()}}function Yc(){qt=Ci.current,ze(Ci)}function Bs(s,i){s.finishedWork=null,s.finishedLanes=0;var a=s.timeoutHandle;if(a!==-1&&(s.timeoutHandle=-1,hy(a)),rt!==null)for(a=rt.return;a!==null;){var u=a;switch(ic(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&To();break;case 3:Si(),ze(It),ze(kt),_c();break;case 5:mc(u);break;case 4:Si();break;case 13:ze(Ke);break;case 19:ze(Ke);break;case 10:uc(u.type._context);break;case 22:case 23:Yc()}a=a.return}if(ft=s,rt=s=ms(s.current,null),wt=qt=i,ot=0,En=null,Hc=ia=Os=0,zt=Nn=null,js!==null){for(i=0;i<js.length;i++)if(a=js[i],u=a.interleaved,u!==null){a.interleaved=null;var p=u.next,g=a.pending;if(g!==null){var y=g.next;g.next=p,u.next=y}a.pending=u}js=null}return s}function Ip(s,i){do{var a=rt;try{if(cc(),qo.current=Xo,Qo){for(var u=Ve.memoizedState;u!==null;){var p=u.queue;p!==null&&(p.pending=null),u=u.next}Qo=!1}if(Ms=0,dt=nt=Ve=null,xn=!1,Sn=0,$c.current=null,a===null||a.return===null){ot=1,En=i,rt=null;break}e:{var g=s,y=a.return,N=a,R=i;if(i=wt,N.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var H=R,re=N,se=re.tag;if((re.mode&1)===0&&(se===0||se===11||se===15)){var ee=re.alternate;ee?(re.updateQueue=ee.updateQueue,re.memoizedState=ee.memoizedState,re.lanes=ee.lanes):(re.updateQueue=null,re.memoizedState=null)}var ue=lp(y);if(ue!==null){ue.flags&=-257,cp(ue,y,N,g,i),ue.mode&1&&ap(g,H,i),i=ue,R=H;var de=i.updateQueue;if(de===null){var pe=new Set;pe.add(R),i.updateQueue=pe}else de.add(R);break e}else{if((i&1)===0){ap(g,H,i),Gc();break e}R=Error(r(426))}}else if(He&&N.mode&1){var Ze=lp(y);if(Ze!==null){(Ze.flags&65536)===0&&(Ze.flags|=256),cp(Ze,y,N,g,i),ac(wi(R,N));break e}}g=R=wi(R,N),ot!==4&&(ot=2),Nn===null?Nn=[g]:Nn.push(g),g=y;do{switch(g.tag){case 3:g.flags|=65536,i&=-i,g.lanes|=i;var z=np(g,R,i);Df(g,z);break e;case 1:N=R;var L=g.type,$=g.stateNode;if((g.flags&128)===0&&(typeof L.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(hs===null||!hs.has($)))){g.flags|=65536,i&=-i,g.lanes|=i;var ne=op(g,N,i);Df(g,ne);break e}}g=g.return}while(g!==null)}zp(a)}catch(me){i=me,rt===a&&a!==null&&(rt=a=a.return);continue}break}while(!0)}function Ap(){var s=sa.current;return sa.current=Xo,s===null?Xo:s}function Gc(){(ot===0||ot===3||ot===2)&&(ot=4),ft===null||(Os&268435455)===0&&(ia&268435455)===0||ps(ft,wt)}function ua(s,i){var a=Me;Me|=2;var u=Ap();(ft!==s||wt!==i)&&(Hr=null,Bs(s,i));do try{By();break}catch(p){Ip(s,p)}while(!0);if(cc(),Me=a,sa.current=u,rt!==null)throw Error(r(261));return ft=null,wt=0,ot}function By(){for(;rt!==null;)Fp(rt)}function Iy(){for(;rt!==null&&!l0();)Fp(rt)}function Fp(s){var i=Wp(s.alternate,s,qt);s.memoizedProps=s.pendingProps,i===null?zp(s):rt=i,$c.current=null}function zp(s){var i=s;do{var a=i.alternate;if(s=i.return,(i.flags&32768)===0){if(a=Ry(a,i,qt),a!==null){rt=a;return}}else{if(a=Ly(a,i),a!==null){a.flags&=32767,rt=a;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{ot=6,rt=null;return}}if(i=i.sibling,i!==null){rt=i;return}rt=i=s}while(i!==null);ot===0&&(ot=5)}function Is(s,i,a){var u=Be,p=nr.transition;try{nr.transition=null,Be=1,Ay(s,i,a,u)}finally{nr.transition=p,Be=u}return null}function Ay(s,i,a,u){do Ei();while(ds!==null);if((Me&6)!==0)throw Error(r(327));a=s.finishedWork;var p=s.finishedLanes;if(a===null)return null;if(s.finishedWork=null,s.finishedLanes=0,a===s.current)throw Error(r(177));s.callbackNode=null,s.callbackPriority=0;var g=a.lanes|a.childLanes;if(v0(s,g),s===ft&&(rt=ft=null,wt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||oa||(oa=!0,Up(po,function(){return Ei(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=nr.transition,nr.transition=null;var y=Be;Be=1;var N=Me;Me|=4,$c.current=null,Dy(s,a),Lp(a,s),iy(Gl),So=!!Yl,Gl=Yl=null,s.current=a,My(a),c0(),Me=N,Be=y,nr.transition=g}else s.current=a;if(oa&&(oa=!1,ds=s,aa=p),g=s.pendingLanes,g===0&&(hs=null),d0(a.stateNode),$t(s,Je()),i!==null)for(u=s.onRecoverableError,a=0;a<i.length;a++)p=i[a],u(p.value,{componentStack:p.stack,digest:p.digest});if(na)throw na=!1,s=Uc,Uc=null,s;return(aa&1)!==0&&s.tag!==0&&Ei(),g=s.pendingLanes,(g&1)!==0?s===Kc?Pn++:(Pn=0,Kc=s):Pn=0,as(),null}function Ei(){if(ds!==null){var s=Nd(aa),i=nr.transition,a=Be;try{if(nr.transition=null,Be=16>s?16:s,ds===null)var u=!1;else{if(s=ds,ds=null,aa=0,(Me&6)!==0)throw Error(r(331));var p=Me;for(Me|=4,he=s.current;he!==null;){var g=he,y=g.child;if((he.flags&16)!==0){var N=g.deletions;if(N!==null){for(var R=0;R<N.length;R++){var H=N[R];for(he=H;he!==null;){var re=he;switch(re.tag){case 0:case 11:case 15:kn(8,re,g)}var se=re.child;if(se!==null)se.return=re,he=se;else for(;he!==null;){re=he;var ee=re.sibling,ue=re.return;if(kp(re),re===H){he=null;break}if(ee!==null){ee.return=ue,he=ee;break}he=ue}}}var de=g.alternate;if(de!==null){var pe=de.child;if(pe!==null){de.child=null;do{var Ze=pe.sibling;pe.sibling=null,pe=Ze}while(pe!==null)}}he=g}}if((g.subtreeFlags&2064)!==0&&y!==null)y.return=g,he=y;else e:for(;he!==null;){if(g=he,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:kn(9,g,g.return)}var z=g.sibling;if(z!==null){z.return=g.return,he=z;break e}he=g.return}}var L=s.current;for(he=L;he!==null;){y=he;var $=y.child;if((y.subtreeFlags&2064)!==0&&$!==null)$.return=y,he=$;else e:for(y=L;he!==null;){if(N=he,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:ra(9,N)}}catch(me){Ye(N,N.return,me)}if(N===y){he=null;break e}var ne=N.sibling;if(ne!==null){ne.return=N.return,he=ne;break e}he=N.return}}if(Me=p,as(),br&&typeof br.onPostCommitFiberRoot=="function")try{br.onPostCommitFiberRoot(mo,s)}catch{}u=!0}return u}finally{Be=a,nr.transition=i}}return!1}function $p(s,i,a){i=wi(a,i),i=np(s,i,1),s=cs(s,i,1),i=jt(),s!==null&&(Xi(s,1,i),$t(s,i))}function Ye(s,i,a){if(s.tag===3)$p(s,s,a);else for(;i!==null;){if(i.tag===3){$p(i,s,a);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(hs===null||!hs.has(u))){s=wi(a,s),s=op(i,s,1),i=cs(i,s,1),s=jt(),i!==null&&(Xi(i,1,s),$t(i,s));break}}i=i.return}}function Fy(s,i,a){var u=s.pingCache;u!==null&&u.delete(i),i=jt(),s.pingedLanes|=s.suspendedLanes&a,ft===s&&(wt&a)===a&&(ot===4||ot===3&&(wt&130023424)===wt&&500>Je()-Wc?Bs(s,0):Hc|=a),$t(s,i)}function Hp(s,i){i===0&&((s.mode&1)===0?i=1:(i=_o,_o<<=1,(_o&130023424)===0&&(_o=4194304)));var a=jt();s=Fr(s,i),s!==null&&(Xi(s,i,a),$t(s,a))}function zy(s){var i=s.memoizedState,a=0;i!==null&&(a=i.retryLane),Hp(s,a)}function $y(s,i){var a=0;switch(s.tag){case 13:var u=s.stateNode,p=s.memoizedState;p!==null&&(a=p.retryLane);break;case 19:u=s.stateNode;break;default:throw Error(r(314))}u!==null&&u.delete(i),Hp(s,a)}var Wp;Wp=function(s,i,a){if(s!==null)if(s.memoizedProps!==i.pendingProps||It.current)Ft=!0;else{if((s.lanes&a)===0&&(i.flags&128)===0)return Ft=!1,Py(s,i,a);Ft=(s.flags&131072)!==0}else Ft=!1,He&&(i.flags&1048576)!==0&&wf(i,Fo,i.index);switch(i.lanes=0,i.tag){case 2:var u=i.type;ea(s,i),s=i.pendingProps;var p=pi(i,kt.current);xi(i,a),p=xc(null,i,u,s,p,a);var g=Sc();return i.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,At(u)?(g=!0,Bo(i)):g=!1,i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,fc(i),p.updater=Jo,i.stateNode=p,p._reactInternals=i,Nc(i,u,s,a),i=jc(null,i,u,!0,g,a)):(i.tag=0,He&&g&&sc(i),Lt(null,i,p,a),i=i.child),i;case 16:u=i.elementType;e:{switch(ea(s,i),s=i.pendingProps,p=u._init,u=p(u._payload),i.type=u,p=i.tag=Wy(u),s=_r(u,s),p){case 0:i=Lc(null,i,u,s,a);break e;case 1:i=mp(null,i,u,s,a);break e;case 11:i=up(null,i,u,s,a);break e;case 14:i=hp(null,i,u,_r(u.type,s),a);break e}throw Error(r(306,u,""))}return i;case 0:return u=i.type,p=i.pendingProps,p=i.elementType===u?p:_r(u,p),Lc(s,i,u,p,a);case 1:return u=i.type,p=i.pendingProps,p=i.elementType===u?p:_r(u,p),mp(s,i,u,p,a);case 3:e:{if(gp(i),s===null)throw Error(r(387));u=i.pendingProps,g=i.memoizedState,p=g.element,jf(s,i),Ko(i,u,null,a);var y=i.memoizedState;if(u=y.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){p=wi(Error(r(423)),i),i=_p(s,i,u,a,p);break e}else if(u!==p){p=wi(Error(r(424)),i),i=_p(s,i,u,a,p);break e}else for(Vt=is(i.stateNode.containerInfo.firstChild),Kt=i,He=!0,gr=null,a=Rf(i,null,u,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(_i(),u===p){i=$r(s,i,a);break e}Lt(s,i,u,a)}i=i.child}return i;case 5:return Of(i),s===null&&oc(i),u=i.type,p=i.pendingProps,g=s!==null?s.memoizedProps:null,y=p.children,Xl(u,p)?y=null:g!==null&&Xl(u,g)&&(i.flags|=32),pp(s,i),Lt(s,i,y,a),i.child;case 6:return s===null&&oc(i),null;case 13:return vp(s,i,a);case 4:return pc(i,i.stateNode.containerInfo),u=i.pendingProps,s===null?i.child=vi(i,null,u,a):Lt(s,i,u,a),i.child;case 11:return u=i.type,p=i.pendingProps,p=i.elementType===u?p:_r(u,p),up(s,i,u,p,a);case 7:return Lt(s,i,i.pendingProps,a),i.child;case 8:return Lt(s,i,i.pendingProps.children,a),i.child;case 12:return Lt(s,i,i.pendingProps.children,a),i.child;case 10:e:{if(u=i.type._context,p=i.pendingProps,g=i.memoizedProps,y=p.value,Ae(Ho,u._currentValue),u._currentValue=y,g!==null)if(mr(g.value,y)){if(g.children===p.children&&!It.current){i=$r(s,i,a);break e}}else for(g=i.child,g!==null&&(g.return=i);g!==null;){var N=g.dependencies;if(N!==null){y=g.child;for(var R=N.firstContext;R!==null;){if(R.context===u){if(g.tag===1){R=zr(-1,a&-a),R.tag=2;var H=g.updateQueue;if(H!==null){H=H.shared;var re=H.pending;re===null?R.next=R:(R.next=re.next,re.next=R),H.pending=R}}g.lanes|=a,R=g.alternate,R!==null&&(R.lanes|=a),hc(g.return,a,i),N.lanes|=a;break}R=R.next}}else if(g.tag===10)y=g.type===i.type?null:g.child;else if(g.tag===18){if(y=g.return,y===null)throw Error(r(341));y.lanes|=a,N=y.alternate,N!==null&&(N.lanes|=a),hc(y,a,i),y=g.sibling}else y=g.child;if(y!==null)y.return=g;else for(y=g;y!==null;){if(y===i){y=null;break}if(g=y.sibling,g!==null){g.return=y.return,y=g;break}y=y.return}g=y}Lt(s,i,p.children,a),i=i.child}return i;case 9:return p=i.type,u=i.pendingProps.children,xi(i,a),p=sr(p),u=u(p),i.flags|=1,Lt(s,i,u,a),i.child;case 14:return u=i.type,p=_r(u,i.pendingProps),p=_r(u.type,p),hp(s,i,u,p,a);case 15:return dp(s,i,i.type,i.pendingProps,a);case 17:return u=i.type,p=i.pendingProps,p=i.elementType===u?p:_r(u,p),ea(s,i),i.tag=1,At(u)?(s=!0,Bo(i)):s=!1,xi(i,a),sp(i,u,p),Nc(i,u,p,a),jc(null,i,u,!0,s,a);case 19:return xp(s,i,a);case 22:return fp(s,i,a)}throw Error(r(156,i.tag))};function Up(s,i){return wd(s,i)}function Hy(s,i,a,u){this.tag=s,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(s,i,a,u){return new Hy(s,i,a,u)}function Xc(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Wy(s){if(typeof s=="function")return Xc(s)?1:0;if(s!=null){if(s=s.$$typeof,s===K)return 11;if(s===O)return 14}return 2}function ms(s,i){var a=s.alternate;return a===null?(a=or(s.tag,i,s.key,s.mode),a.elementType=s.elementType,a.type=s.type,a.stateNode=s.stateNode,a.alternate=s,s.alternate=a):(a.pendingProps=i,a.type=s.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=s.flags&14680064,a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,i=s.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=s.sibling,a.index=s.index,a.ref=s.ref,a}function ha(s,i,a,u,p,g){var y=2;if(u=s,typeof s=="function")Xc(s)&&(y=1);else if(typeof s=="string")y=5;else e:switch(s){case Z:return As(a.children,p,g,i);case le:y=8,p|=8;break;case te:return s=or(12,a,i,p|2),s.elementType=te,s.lanes=g,s;case F:return s=or(13,a,i,p),s.elementType=F,s.lanes=g,s;case Y:return s=or(19,a,i,p),s.elementType=Y,s.lanes=g,s;case G:return da(a,p,g,i);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case T:y=10;break e;case W:y=9;break e;case K:y=11;break e;case O:y=14;break e;case B:y=16,u=null;break e}throw Error(r(130,s==null?s:typeof s,""))}return i=or(y,a,i,p),i.elementType=s,i.type=u,i.lanes=g,i}function As(s,i,a,u){return s=or(7,s,u,i),s.lanes=a,s}function da(s,i,a,u){return s=or(22,s,u,i),s.elementType=G,s.lanes=a,s.stateNode={isHidden:!1},s}function Jc(s,i,a){return s=or(6,s,null,i),s.lanes=a,s}function Zc(s,i,a){return i=or(4,s.children!==null?s.children:[],s.key,i),i.lanes=a,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}function Uy(s,i,a,u,p){this.tag=i,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=El(0),this.expirationTimes=El(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=El(0),this.identifierPrefix=u,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function eu(s,i,a,u,p,g,y,N,R){return s=new Uy(s,i,a,N,R),i===1?(i=1,g===!0&&(i|=8)):i=0,g=or(3,null,null,i),s.current=g,g.stateNode=s,g.memoizedState={element:u,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},fc(g),s}function Ky(s,i,a){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:V,key:u==null?null:""+u,children:s,containerInfo:i,implementation:a}}function Kp(s){if(!s)return os;s=s._reactInternals;e:{if(Es(s)!==s||s.tag!==1)throw Error(r(170));var i=s;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(At(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(r(171))}if(s.tag===1){var a=s.type;if(At(a))return yf(s,a,i)}return i}function Vp(s,i,a,u,p,g,y,N,R){return s=eu(a,u,!0,s,p,g,y,N,R),s.context=Kp(null),a=s.current,u=jt(),p=fs(a),g=zr(u,p),g.callback=i??null,cs(a,g,p),s.current.lanes=p,Xi(s,p,u),$t(s,u),s}function fa(s,i,a,u){var p=i.current,g=jt(),y=fs(p);return a=Kp(a),i.context===null?i.context=a:i.pendingContext=a,i=zr(g,y),i.payload={element:s},u=u===void 0?null:u,u!==null&&(i.callback=u),s=cs(p,i,y),s!==null&&(xr(s,p,y,g),Uo(s,p,y)),y}function pa(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function qp(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var a=s.retryLane;s.retryLane=a!==0&&a<i?a:i}}function tu(s,i){qp(s,i),(s=s.alternate)&&qp(s,i)}function Vy(){return null}var Qp=typeof reportError=="function"?reportError:function(s){console.error(s)};function ru(s){this._internalRoot=s}ma.prototype.render=ru.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(r(409));fa(s,i,null,null)},ma.prototype.unmount=ru.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;Ts(function(){fa(null,s,null,null)}),i[Tr]=null}};function ma(s){this._internalRoot=s}ma.prototype.unstable_scheduleHydration=function(s){if(s){var i=Ld();s={blockedOn:null,target:s,priority:i};for(var a=0;a<ts.length&&i!==0&&i<ts[a].priority;a++);ts.splice(a,0,s),a===0&&Md(s)}};function su(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function ga(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Yp(){}function qy(s,i,a,u,p){if(p){if(typeof u=="function"){var g=u;u=function(){var H=pa(y);g.call(H)}}var y=Vp(i,u,s,0,null,!1,!1,"",Yp);return s._reactRootContainer=y,s[Tr]=y.current,dn(s.nodeType===8?s.parentNode:s),Ts(),y}for(;p=s.lastChild;)s.removeChild(p);if(typeof u=="function"){var N=u;u=function(){var H=pa(R);N.call(H)}}var R=eu(s,0,!1,null,null,!1,!1,"",Yp);return s._reactRootContainer=R,s[Tr]=R.current,dn(s.nodeType===8?s.parentNode:s),Ts(function(){fa(i,R,a,u)}),R}function _a(s,i,a,u,p){var g=a._reactRootContainer;if(g){var y=g;if(typeof p=="function"){var N=p;p=function(){var R=pa(y);N.call(R)}}fa(i,y,s,p)}else y=qy(a,i,s,p,u);return pa(y)}Pd=function(s){switch(s.tag){case 3:var i=s.stateNode;if(i.current.memoizedState.isDehydrated){var a=Gi(i.pendingLanes);a!==0&&(Nl(i,a|1),$t(i,Je()),(Me&6)===0&&(ki=Je()+500,as()))}break;case 13:Ts(function(){var u=Fr(s,1);if(u!==null){var p=jt();xr(u,s,1,p)}}),tu(s,1)}},Pl=function(s){if(s.tag===13){var i=Fr(s,134217728);if(i!==null){var a=jt();xr(i,s,134217728,a)}tu(s,134217728)}},Rd=function(s){if(s.tag===13){var i=fs(s),a=Fr(s,i);if(a!==null){var u=jt();xr(a,s,i,u)}tu(s,i)}},Ld=function(){return Be},jd=function(s,i){var a=Be;try{return Be=s,i()}finally{Be=a}},xl=function(s,i,a){switch(i){case"input":if(tt(s,a),i=a.name,a.type==="radio"&&i!=null){for(a=s;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var u=a[i];if(u!==s&&u.form===s.form){var p=Oo(u);if(!p)throw Error(r(90));Ee(u),tt(u,p)}}}break;case"textarea":od(s,a);break;case"select":i=a.value,i!=null&&ri(s,!!a.multiple,i,!1)}},md=Qc,gd=Ts;var Qy={usingClientEntryPoint:!1,Events:[mn,di,Oo,fd,pd,Qc]},Rn={findFiberByHostInstance:Ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Yy={bundleType:Rn.bundleType,version:Rn.version,rendererPackageName:Rn.rendererPackageName,rendererConfig:Rn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=xd(s),s===null?null:s.stateNode},findFiberByHostInstance:Rn.findFiberByHostInstance||Vy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var va=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!va.isDisabled&&va.supportsFiber)try{mo=va.inject(Yy),br=va}catch{}}return Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qy,Ht.createPortal=function(s,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!su(i))throw Error(r(200));return Ky(s,i,null,a)},Ht.createRoot=function(s,i){if(!su(s))throw Error(r(299));var a=!1,u="",p=Qp;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onRecoverableError!==void 0&&(p=i.onRecoverableError)),i=eu(s,1,!1,null,null,a,!1,u,p),s[Tr]=i.current,dn(s.nodeType===8?s.parentNode:s),new ru(i)},Ht.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=xd(i),s=s===null?null:s.stateNode,s},Ht.flushSync=function(s){return Ts(s)},Ht.hydrate=function(s,i,a){if(!ga(i))throw Error(r(200));return _a(null,s,i,!0,a)},Ht.hydrateRoot=function(s,i,a){if(!su(s))throw Error(r(405));var u=a!=null&&a.hydratedSources||null,p=!1,g="",y=Qp;if(a!=null&&(a.unstable_strictMode===!0&&(p=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),i=Vp(i,null,s,1,a??null,p,!1,g,y),s[Tr]=i.current,dn(s),u)for(s=0;s<u.length;s++)a=u[s],p=a._getVersion,p=p(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,p]:i.mutableSourceEagerHydrationData.push(a,p);return new ma(i)},Ht.render=function(s,i,a){if(!ga(i))throw Error(r(200));return _a(null,s,i,!1,a)},Ht.unmountComponentAtNode=function(s){if(!ga(s))throw Error(r(40));return s._reactRootContainer?(Ts(function(){_a(null,null,s,!1,function(){s._reactRootContainer=null,s[Tr]=null})}),!0):!1},Ht.unstable_batchedUpdates=Qc,Ht.unstable_renderSubtreeIntoContainer=function(s,i,a,u){if(!ga(a))throw Error(r(200));if(s==null||s._reactInternals===void 0)throw Error(r(38));return _a(s,i,a,!1,u)},Ht.version="18.3.1-next-f1338f8080-20240426",Ht}var sm;function sx(){if(sm)return ou.exports;sm=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ou.exports=rx(),ou.exports}var im;function ix(){if(im)return ya;im=1;var e=sx();return ya.createRoot=e.createRoot,ya.hydrateRoot=e.hydrateRoot,ya}var nx=ix();const ox=Gg(nx);var Ii=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ax={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},lx=class{#e=ax;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},Hs=new lx;function cx(e){setTimeout(e,0)}var Qs=typeof window>"u"||"Deno"in globalThis;function Mt(){}function ux(e,t){return typeof e=="function"?e(t):e}function Ou(e){return typeof e=="number"&&e>=0&&e!==1/0}function Xg(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ws(e,t){return typeof e=="function"?e(t):e}function cr(e,t){return typeof e=="function"?e(t):e}function nm(e,t){const{type:r="all",exact:n,fetchStatus:o,predicate:l,queryKey:c,stale:h}=e;if(c){if(n){if(t.queryHash!==Lh(c,t.options))return!1}else if(!Yn(t.queryKey,c))return!1}if(r!=="all"){const m=t.isActive();if(r==="active"&&!m||r==="inactive"&&m)return!1}return!(typeof h=="boolean"&&t.isStale()!==h||o&&o!==t.state.fetchStatus||l&&!l(t))}function om(e,t){const{exact:r,status:n,predicate:o,mutationKey:l}=e;if(l){if(!t.options.mutationKey)return!1;if(r){if(Ys(t.options.mutationKey)!==Ys(l))return!1}else if(!Yn(t.options.mutationKey,l))return!1}return!(n&&t.state.status!==n||o&&!o(t))}function Lh(e,t){return(t?.queryKeyHashFn||Ys)(e)}function Ys(e){return JSON.stringify(e,(t,r)=>Tu(r)?Object.keys(r).sort().reduce((n,o)=>(n[o]=r[o],n),{}):r)}function Yn(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Yn(e[r],t[r])):!1}var hx=Object.prototype.hasOwnProperty;function Jg(e,t){if(e===t)return e;const r=am(e)&&am(t);if(!r&&!(Tu(e)&&Tu(t)))return t;const o=(r?e:Object.keys(e)).length,l=r?t:Object.keys(t),c=l.length,h=r?new Array(c):{};let m=0;for(let d=0;d<c;d++){const v=r?d:l[d],_=e[v],x=t[v];if(_===x){h[v]=_,(r?d<o:hx.call(e,v))&&m++;continue}if(_===null||x===null||typeof _!="object"||typeof x!="object"){h[v]=x;continue}const b=Jg(_,x);h[v]=b,b===_&&m++}return o===c&&m===o?e:h}function Ha(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function am(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Tu(e){if(!lm(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!lm(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function lm(e){return Object.prototype.toString.call(e)==="[object Object]"}function dx(e){return new Promise(t=>{Hs.setTimeout(t,e)})}function Bu(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Jg(e,t):t}function fx(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function px(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var jh=Symbol();function Zg(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===jh?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Dh(e,t){return typeof e=="function"?e(...t):!!e}function mx(e,t,r){let n=!1,o;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(o??=t(),n||(n=!0,o.aborted?r():o.addEventListener("abort",r,{once:!0})),o)}),e}var gx=class extends Ii{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!Qs&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Mh=new gx;function Iu(){let e,t;const r=new Promise((o,l)=>{e=o,t=l});r.status="pending",r.catch(()=>{});function n(o){Object.assign(r,o),delete r.resolve,delete r.reject}return r.resolve=o=>{n({status:"fulfilled",value:o}),e(o)},r.reject=o=>{n({status:"rejected",reason:o}),t(o)},r}var _x=cx;function vx(){let e=[],t=0,r=h=>{h()},n=h=>{h()},o=_x;const l=h=>{t?e.push(h):o(()=>{r(h)})},c=()=>{const h=e;e=[],h.length&&o(()=>{n(()=>{h.forEach(m=>{r(m)})})})};return{batch:h=>{let m;t++;try{m=h()}finally{t--,t||c()}return m},batchCalls:h=>(...m)=>{l(()=>{h(...m)})},schedule:l,setNotifyFunction:h=>{r=h},setBatchNotifyFunction:h=>{n=h},setScheduler:h=>{o=h}}}var ct=vx(),yx=class extends Ii{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!Qs&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},Wa=new yx;function xx(e){return Math.min(1e3*2**e,3e4)}function e_(e){return(e??"online")==="online"?Wa.isOnline():!0}var Au=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function t_(e){let t=!1,r=0,n;const o=Iu(),l=()=>o.status!=="pending",c=w=>{if(!l()){const E=new Au(w);x(E),e.onCancel?.(E)}},h=()=>{t=!0},m=()=>{t=!1},d=()=>Mh.isFocused()&&(e.networkMode==="always"||Wa.isOnline())&&e.canRun(),v=()=>e_(e.networkMode)&&e.canRun(),_=w=>{l()||(n?.(),o.resolve(w))},x=w=>{l()||(n?.(),o.reject(w))},b=()=>new Promise(w=>{n=E=>{(l()||d())&&w(E)},e.onPause?.()}).then(()=>{n=void 0,l()||e.onContinue?.()}),S=()=>{if(l())return;let w;const E=r===0?e.initialPromise:void 0;try{w=E??e.fn()}catch(M){w=Promise.reject(M)}Promise.resolve(w).then(_).catch(M=>{if(l())return;const P=e.retry??(Qs?0:3),j=e.retryDelay??xx,A=typeof j=="function"?j(r,M):j,U=P===!0||typeof P=="number"&&r<P||typeof P=="function"&&P(r,M);if(t||!U){x(M);return}r++,e.onFail?.(r,M),dx(A).then(()=>d()?void 0:b()).then(()=>{t?x(M):S()})})};return{promise:o,status:()=>o.status,cancel:c,continue:()=>(n?.(),o),cancelRetry:h,continueRetry:m,canStart:v,start:()=>(v()?S():b().then(S),o)}}var r_=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ou(this.gcTime)&&(this.#e=Hs.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Qs?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Hs.clearTimeout(this.#e),this.#e=void 0)}},Sx=class extends r_{#e;#t;#r;#i;#s;#o;#a;constructor(e){super(),this.#a=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#i=e.client,this.#r=this.#i.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=um(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(e){if(this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=um(this.options);t.data!==void 0&&(this.setState(cm(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=Bu(this.state.data,e,this.options);return this.#n({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#n({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#s?.promise;return this.#s?.cancel(e),t?t.then(Mt).catch(Mt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>cr(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===jh||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>ws(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Xg(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#s&&(this.#a?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#n({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(m=>m.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,n=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(this.#a=!0,r.signal)})},o=()=>{const h=Zg(this.options,t),d=(()=>{const v={client:this.#i,queryKey:this.queryKey,meta:this.meta};return n(v),v})();return this.#a=!1,this.options.persister?this.options.persister(h,d,this):h(d)},c=(()=>{const h={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:o};return n(h),h})();this.options.behavior?.onFetch(c,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==c.fetchOptions?.meta)&&this.#n({type:"fetch",meta:c.fetchOptions?.meta}),this.#s=t_({initialPromise:t?.initialPromise,fn:c.fetchFn,onCancel:h=>{h instanceof Au&&h.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(h,m)=>{this.#n({type:"failed",failureCount:h,error:m})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0});try{const h=await this.#s.start();if(h===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(h),this.#r.config.onSuccess?.(h,this),this.#r.config.onSettled?.(h,this.state.error,this),h}catch(h){if(h instanceof Au){if(h.silent)return this.#s.promise;if(h.revert){if(this.state.data===void 0)throw h;return this.state.data}}throw this.#n({type:"error",error:h}),this.#r.config.onError?.(h,this),this.#r.config.onSettled?.(this.state.data,h,this),h}finally{this.scheduleGc()}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...s_(r.data,this.options),fetchMeta:e.meta??null};case"success":const n={...r,...cm(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?n:void 0,n;case"error":const o=e.error;return{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),ct.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function s_(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:e_(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function cm(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function um(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var wx=class extends Ii{constructor(e,t){super(),this.options=t,this.#e=e,this.#n=null,this.#a=Iu(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#i=void 0;#s;#o;#a;#n;#m;#d;#f;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),hm(this.#t,this.options)?this.#h():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Fu(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Fu(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#S(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof cr(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),t._defaulted&&!Ha(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const n=this.hasListeners();n&&dm(this.#t,r,this.options,t)&&this.#h(),this.updateResult(),n&&(this.#t!==r||cr(this.options.enabled,this.#t)!==cr(t.enabled,this.#t)||ws(this.options.staleTime,this.#t)!==ws(t.staleTime,this.#t))&&this.#g();const o=this.#_();n&&(this.#t!==r||cr(this.options.enabled,this.#t)!==cr(t.enabled,this.#t)||o!==this.#l)&&this.#v(o)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return Cx(this,r)&&(this.#i=r,this.#o=this.options,this.#s=this.#t.state),r}getCurrentResult(){return this.#i}trackResult(e,t){return new Proxy(e,{get:(r,n)=>(this.trackProp(n),t?.(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,n))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#h({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#i))}#h(e){this.#w();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Mt)),t}#g(){this.#x();const e=ws(this.options.staleTime,this.#t);if(Qs||this.#i.isStale||!Ou(e))return;const r=Xg(this.#i.dataUpdatedAt,e)+1;this.#c=Hs.setTimeout(()=>{this.#i.isStale||this.updateResult()},r)}#_(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(e){this.#S(),this.#l=e,!(Qs||cr(this.options.enabled,this.#t)===!1||!Ou(this.#l)||this.#l===0)&&(this.#u=Hs.setInterval(()=>{(this.options.refetchIntervalInBackground||Mh.isFocused())&&this.#h()},this.#l))}#y(){this.#g(),this.#v(this.#_())}#x(){this.#c&&(Hs.clearTimeout(this.#c),this.#c=void 0)}#S(){this.#u&&(Hs.clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const r=this.#t,n=this.options,o=this.#i,l=this.#s,c=this.#o,m=e!==r?e.state:this.#r,{state:d}=e;let v={...d},_=!1,x;if(t._optimisticResults){const le=this.hasListeners(),te=!le&&hm(e,t),T=le&&dm(e,r,t,n);(te||T)&&(v={...v,...s_(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(v.fetchStatus="idle")}let{error:b,errorUpdatedAt:S,status:w}=v;x=v.data;let E=!1;if(t.placeholderData!==void 0&&x===void 0&&w==="pending"){let le;o?.isPlaceholderData&&t.placeholderData===c?.placeholderData?(le=o.data,E=!0):le=typeof t.placeholderData=="function"?t.placeholderData(this.#f?.state.data,this.#f):t.placeholderData,le!==void 0&&(w="success",x=Bu(o?.data,le,t),_=!0)}if(t.select&&x!==void 0&&!E)if(o&&x===l?.data&&t.select===this.#m)x=this.#d;else try{this.#m=t.select,x=t.select(x),x=Bu(o?.data,x,t),this.#d=x,this.#n=null}catch(le){this.#n=le}this.#n&&(b=this.#n,x=this.#d,S=Date.now(),w="error");const M=v.fetchStatus==="fetching",P=w==="pending",j=w==="error",A=P&&M,U=x!==void 0,Z={status:w,fetchStatus:v.fetchStatus,isPending:P,isSuccess:w==="success",isError:j,isInitialLoading:A,isLoading:A,data:x,dataUpdatedAt:v.dataUpdatedAt,error:b,errorUpdatedAt:S,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>m.dataUpdateCount||v.errorUpdateCount>m.errorUpdateCount,isFetching:M,isRefetching:M&&!P,isLoadingError:j&&!U,isPaused:v.fetchStatus==="paused",isPlaceholderData:_,isRefetchError:j&&U,isStale:Oh(e,t),refetch:this.refetch,promise:this.#a,isEnabled:cr(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const le=W=>{Z.status==="error"?W.reject(Z.error):Z.data!==void 0&&W.resolve(Z.data)},te=()=>{const W=this.#a=Z.promise=Iu();le(W)},T=this.#a;switch(T.status){case"pending":e.queryHash===r.queryHash&&le(T);break;case"fulfilled":(Z.status==="error"||Z.data!==T.value)&&te();break;case"rejected":(Z.status!=="error"||Z.error!==T.reason)&&te();break}}return Z}updateResult(){const e=this.#i,t=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#o=this.options,this.#s.data!==void 0&&(this.#f=this.#t),Ha(t,e))return;this.#i=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,o=typeof n=="function"?n():n;if(o==="all"||!o&&!this.#p.size)return!0;const l=new Set(o??this.#p);return this.options.throwOnError&&l.add("error"),Object.keys(this.#i).some(c=>{const h=c;return this.#i[h]!==e[h]&&l.has(h)})};this.#b({listeners:r()})}#w(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#b(e){ct.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#i)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function bx(e,t){return cr(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function hm(e,t){return bx(e,t)||e.state.data!==void 0&&Fu(e,t,t.refetchOnMount)}function Fu(e,t,r){if(cr(t.enabled,e)!==!1&&ws(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&Oh(e,t)}return!1}function dm(e,t,r,n){return(e!==t||cr(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Oh(e,r)}function Oh(e,t){return cr(t.enabled,e)!==!1&&e.isStaleByTime(ws(t.staleTime,e))}function Cx(e,t){return!Ha(e.getCurrentResult(),t)}function fm(e){return{onFetch:(t,r)=>{const n=t.options,o=t.fetchOptions?.meta?.fetchMore?.direction,l=t.state.data?.pages||[],c=t.state.data?.pageParams||[];let h={pages:[],pageParams:[]},m=0;const d=async()=>{let v=!1;const _=S=>{mx(S,()=>t.signal,()=>v=!0)},x=Zg(t.options,t.fetchOptions),b=async(S,w,E)=>{if(v)return Promise.reject();if(w==null&&S.pages.length)return Promise.resolve(S);const P=(()=>{const V={client:t.client,queryKey:t.queryKey,pageParam:w,direction:E?"backward":"forward",meta:t.options.meta};return _(V),V})(),j=await x(P),{maxPages:A}=t.options,U=E?px:fx;return{pages:U(S.pages,j,A),pageParams:U(S.pageParams,w,A)}};if(o&&l.length){const S=o==="backward",w=S?kx:pm,E={pages:l,pageParams:c},M=w(n,E);h=await b(E,M,S)}else{const S=e??l.length;do{const w=m===0?c[0]??n.initialPageParam:pm(n,h);if(m>0&&w==null)break;h=await b(h,w),m++}while(m<S)}return h};t.options.persister?t.fetchFn=()=>t.options.persister?.(d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=d}}}function pm(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function kx(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var Ex=class extends r_{#e;#t;#r;#i;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||i_(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#s({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=t_({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(l,c)=>{this.#s({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#s({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const n=this.state.status==="pending",o=!this.#i.canStart();try{if(n)t();else{this.#s({type:"pending",variables:e,isPaused:o}),await this.#r.config.onMutate?.(e,this,r);const c=await this.options.onMutate?.(e,r);c!==this.state.context&&this.#s({type:"pending",context:c,variables:e,isPaused:o})}const l=await this.#i.start();return await this.#r.config.onSuccess?.(l,e,this.state.context,this,r),await this.options.onSuccess?.(l,e,this.state.context,r),await this.#r.config.onSettled?.(l,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(l,null,e,this.state.context,r),this.#s({type:"success",data:l}),l}catch(l){try{await this.#r.config.onError?.(l,e,this.state.context,this,r)}catch(c){Promise.reject(c)}try{await this.options.onError?.(l,e,this.state.context,r)}catch(c){Promise.reject(c)}try{await this.#r.config.onSettled?.(void 0,l,this.state.variables,this.state.context,this,r)}catch(c){Promise.reject(c)}try{await this.options.onSettled?.(void 0,l,e,this.state.context,r)}catch(c){Promise.reject(c)}throw this.#s({type:"error",error:l}),l}finally{this.#r.runNext(this)}}#s(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),ct.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function i_(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Nx=class extends Ii{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,r){const n=new Ex({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){this.#e.add(e);const t=xa(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=xa(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const n=r.indexOf(e);n!==-1&&r.splice(n,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=xa(e);if(typeof t=="string"){const n=this.#t.get(t)?.find(o=>o.state.status==="pending");return!n||n===e}else return!0}runNext(e){const t=xa(e);return typeof t=="string"?this.#t.get(t)?.find(n=>n!==e&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){ct.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>om(t,r))}findAll(e={}){return this.getAll().filter(t=>om(e,t))}notify(e){ct.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return ct.batch(()=>Promise.all(e.map(t=>t.continue().catch(Mt))))}};function xa(e){return e.options.scope?.id}var Px=class extends Ii{#e;#t=void 0;#r;#i;constructor(t,r){super(),this.#e=t,this.setOptions(r),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#e.defaultMutationOptions(t),Ha(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&Ys(r.mutationKey)!==Ys(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#s(),this.#o(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#s(),this.#o()}mutate(t,r){return this.#i=r,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#s(){const t=this.#r?.state??i_();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#o(t){ct.batch(()=>{if(this.#i&&this.hasListeners()){const r=this.#t.variables,n=this.#t.context,o={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#i.onSuccess?.(t.data,r,n,o)}catch(l){Promise.reject(l)}try{this.#i.onSettled?.(t.data,null,r,n,o)}catch(l){Promise.reject(l)}}else if(t?.type==="error"){try{this.#i.onError?.(t.error,r,n,o)}catch(l){Promise.reject(l)}try{this.#i.onSettled?.(void 0,t.error,r,n,o)}catch(l){Promise.reject(l)}}}this.listeners.forEach(r=>{r(this.#t)})})}},Rx=class extends Ii{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const n=t.queryKey,o=t.queryHash??Lh(n,t);let l=this.get(o);return l||(l=new Sx({client:e,queryKey:n,queryHash:o,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(l)),l}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ct.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>nm(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>nm(e,r)):t}notify(e){ct.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){ct.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ct.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Lx=class{#e;#t;#r;#i;#s;#o;#a;#n;constructor(e={}){this.#e=e.queryCache||new Rx,this.#t=e.mutationCache||new Nx,this.#r=e.defaultOptions||{},this.#i=new Map,this.#s=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=Mh.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#n=Wa.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#n?.(),this.#n=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(ws(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),l=this.#e.get(n.queryHash)?.state.data,c=ux(t,l);if(c!==void 0)return this.#e.build(this,n).setData(c,{...r,manual:!0})}setQueriesData(e,t,r){return ct.batch(()=>this.#e.findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;ct.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return ct.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=ct.batch(()=>this.#e.findAll(e).map(o=>o.cancel(r)));return Promise.all(n).then(Mt).catch(Mt)}invalidateQueries(e,t={}){return ct.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=ct.batch(()=>this.#e.findAll(e).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let l=o.fetch(void 0,r);return r.throwOnError||(l=l.catch(Mt)),o.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(n).then(Mt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(ws(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Mt).catch(Mt)}fetchInfiniteQuery(e){return e.behavior=fm(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Mt).catch(Mt)}ensureInfiniteQueryData(e){return e.behavior=fm(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Wa.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#i.set(Ys(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#i.values()],r={};return t.forEach(n=>{Yn(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){this.#s.set(Ys(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#s.values()],r={};return t.forEach(n=>{Yn(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Lh(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===jh&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},n_=C.createContext(void 0),ei=e=>{const t=C.useContext(n_);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},jx=({client:e,children:t})=>(C.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),f.jsx(n_.Provider,{value:e,children:t})),o_=C.createContext(!1),Dx=()=>C.useContext(o_);o_.Provider;function Mx(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Ox=C.createContext(Mx()),Tx=()=>C.useContext(Ox),Bx=(e,t,r)=>{const n=r?.state.error&&typeof e.throwOnError=="function"?Dh(e.throwOnError,[r.state.error,r]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||n)&&(t.isReset()||(e.retryOnMount=!1))},Ix=e=>{C.useEffect(()=>{e.clearReset()},[e])},Ax=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:o})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(o&&e.data===void 0||Dh(r,[e.error,n])),Fx=e=>{if(e.suspense){const r=o=>o==="static"?o:Math.max(o??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...o)=>r(n(...o)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},zx=(e,t)=>e.isLoading&&e.isFetching&&!t,$x=(e,t)=>e?.suspense&&t.isPending,mm=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function Hx(e,t,r){const n=Dx(),o=Tx(),l=ei(),c=l.defaultQueryOptions(e);l.getDefaultOptions().queries?._experimental_beforeQuery?.(c);const h=l.getQueryCache().get(c.queryHash);c._optimisticResults=n?"isRestoring":"optimistic",Fx(c),Bx(c,o,h),Ix(o);const m=!l.getQueryCache().get(c.queryHash),[d]=C.useState(()=>new t(l,c)),v=d.getOptimisticResult(c),_=!n&&e.subscribed!==!1;if(C.useSyncExternalStore(C.useCallback(x=>{const b=_?d.subscribe(ct.batchCalls(x)):Mt;return d.updateResult(),b},[d,_]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),C.useEffect(()=>{d.setOptions(c)},[c,d]),$x(c,v))throw mm(c,d,o);if(Ax({result:v,errorResetBoundary:o,throwOnError:c.throwOnError,query:h,suspense:c.suspense}))throw v.error;return l.getDefaultOptions().queries?._experimental_afterQuery?.(c,v),c.experimental_prefetchInRender&&!Qs&&zx(v,n)&&(m?mm(c,d,o):h?.promise)?.catch(Mt).finally(()=>{d.updateResult()}),c.notifyOnChangeProps?v:d.trackResult(v)}function yt(e,t){return Hx(e,wx)}function hr(e,t){const r=ei(),[n]=C.useState(()=>new Px(r,e));C.useEffect(()=>{n.setOptions(e)},[n,e]);const o=C.useSyncExternalStore(C.useCallback(c=>n.subscribe(ct.batchCalls(c)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),l=C.useCallback((c,h)=>{n.mutate(c,h).catch(Mt)},[n]);if(o.error&&Dh(n.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:l,mutateAsync:o.mutate}}/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var gm="popstate";function Wx(e={}){function t(n,o){let{pathname:l,search:c,hash:h}=n.location;return zu("",{pathname:l,search:c,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(n,o){return typeof o=="string"?o:Gn(o)}return Kx(t,r,null,e)}function We(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function fr(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Ux(){return Math.random().toString(36).substring(2,10)}function _m(e,t){return{usr:e.state,key:e.key,idx:t}}function zu(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ai(t):t,state:r,key:t&&t.key||n||Ux()}}function Gn({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ai(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function Kx(e,t,r,n={}){let{window:o=document.defaultView,v5Compat:l=!1}=n,c=o.history,h="POP",m=null,d=v();d==null&&(d=0,c.replaceState({...c.state,idx:d},""));function v(){return(c.state||{idx:null}).idx}function _(){h="POP";let E=v(),M=E==null?null:E-d;d=E,m&&m({action:h,location:w.location,delta:M})}function x(E,M){h="PUSH";let P=zu(w.location,E,M);d=v()+1;let j=_m(P,d),A=w.createHref(P);try{c.pushState(j,"",A)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;o.location.assign(A)}l&&m&&m({action:h,location:w.location,delta:1})}function b(E,M){h="REPLACE";let P=zu(w.location,E,M);d=v();let j=_m(P,d),A=w.createHref(P);c.replaceState(j,"",A),l&&m&&m({action:h,location:w.location,delta:0})}function S(E){return Vx(E)}let w={get action(){return h},get location(){return e(o,c)},listen(E){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(gm,_),m=E,()=>{o.removeEventListener(gm,_),m=null}},createHref(E){return t(o,E)},createURL:S,encodeLocation(E){let M=S(E);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:x,replace:b,go(E){return c.go(E)}};return w}function Vx(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),We(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Gn(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function a_(e,t,r="/"){return qx(e,t,r,!1)}function qx(e,t,r,n){let o=typeof t=="string"?Ai(t):t,l=qr(o.pathname||"/",r);if(l==null)return null;let c=l_(e);Qx(c);let h=null;for(let m=0;h==null&&m<c.length;++m){let d=nS(l);h=sS(c[m],d,n)}return h}function l_(e,t=[],r=[],n="",o=!1){let l=(c,h,m=o,d)=>{let v={relativePath:d===void 0?c.path||"":d,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(n)&&m)return;We(v.relativePath.startsWith(n),`Absolute route path "${v.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(n.length)}let _=Vr([n,v.relativePath]),x=r.concat(v);c.children&&c.children.length>0&&(We(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),l_(c.children,t,x,_,m)),!(c.path==null&&!c.index)&&t.push({path:_,score:tS(_,c.index),routesMeta:x})};return e.forEach((c,h)=>{if(c.path===""||!c.path?.includes("?"))l(c,h);else for(let m of c_(c.path))l(c,h,!0,m)}),t}function c_(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,o=r.endsWith("?"),l=r.replace(/\?$/,"");if(n.length===0)return o?[l,""]:[l];let c=c_(n.join("/")),h=[];return h.push(...c.map(m=>m===""?l:[l,m].join("/"))),o&&h.push(...c),h.map(m=>e.startsWith("/")&&m===""?"/":m)}function Qx(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:rS(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var Yx=/^:[\w-]+$/,Gx=3,Xx=2,Jx=1,Zx=10,eS=-2,vm=e=>e==="*";function tS(e,t){let r=e.split("/"),n=r.length;return r.some(vm)&&(n+=eS),t&&(n+=Xx),r.filter(o=>!vm(o)).reduce((o,l)=>o+(Yx.test(l)?Gx:l===""?Jx:Zx),n)}function rS(e,t){return e.length===t.length&&e.slice(0,-1).every((n,o)=>n===t[o])?e[e.length-1]-t[t.length-1]:0}function sS(e,t,r=!1){let{routesMeta:n}=e,o={},l="/",c=[];for(let h=0;h<n.length;++h){let m=n[h],d=h===n.length-1,v=l==="/"?t:t.slice(l.length)||"/",_=Ua({path:m.relativePath,caseSensitive:m.caseSensitive,end:d},v),x=m.route;if(!_&&d&&r&&!n[n.length-1].route.index&&(_=Ua({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},v)),!_)return null;Object.assign(o,_.params),c.push({params:o,pathname:Vr([l,_.pathname]),pathnameBase:cS(Vr([l,_.pathnameBase])),route:x}),_.pathnameBase!=="/"&&(l=Vr([l,_.pathnameBase]))}return c}function Ua(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=iS(e.path,e.caseSensitive,e.end),o=t.match(r);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:n.reduce((d,{paramName:v,isOptional:_},x)=>{if(v==="*"){let S=h[x]||"";c=l.slice(0,l.length-S.length).replace(/(.)\/+$/,"$1")}const b=h[x];return _&&!b?d[v]=void 0:d[v]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:c,pattern:e}}function iS(e,t=!1,r=!0){fr(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,m)=>(n.push({paramName:h,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),n]}function nS(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return fr(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function qr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var u_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oS=e=>u_.test(e);function aS(e,t="/"){let{pathname:r,search:n="",hash:o=""}=typeof e=="string"?Ai(e):e,l;if(r)if(oS(r))l=r;else{if(r.includes("//")){let c=r;r=r.replace(/\/\/+/g,"/"),fr(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${r}`)}r.startsWith("/")?l=ym(r.substring(1),"/"):l=ym(r,t)}else l=t;return{pathname:l,search:uS(n),hash:hS(o)}}function ym(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function cu(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function lS(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Th(e){let t=lS(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function Bh(e,t,r,n=!1){let o;typeof e=="string"?o=Ai(e):(o={...e},We(!o.pathname||!o.pathname.includes("?"),cu("?","pathname","search",o)),We(!o.pathname||!o.pathname.includes("#"),cu("#","pathname","hash",o)),We(!o.search||!o.search.includes("#"),cu("#","search","hash",o)));let l=e===""||o.pathname==="",c=l?"/":o.pathname,h;if(c==null)h=r;else{let _=t.length-1;if(!n&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),_-=1;o.pathname=x.join("/")}h=_>=0?t[_]:"/"}let m=aS(o,h),d=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&r.endsWith("/");return!m.pathname.endsWith("/")&&(d||v)&&(m.pathname+="/"),m}var Vr=e=>e.join("/").replace(/\/\/+/g,"/"),cS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),uS=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,hS=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,dS=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function fS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function pS(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var h_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function d_(e,t){let r=e;if(typeof r!="string"||!u_.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let n=r,o=!1;if(h_)try{let l=new URL(window.location.href),c=r.startsWith("//")?new URL(l.protocol+r):new URL(r),h=qr(c.pathname,t);c.origin===l.origin&&h!=null?r=h+c.search+c.hash:o=!0}catch{fr(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:o,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var f_=["POST","PUT","PATCH","DELETE"];new Set(f_);var mS=["GET",...f_];new Set(mS);var Fi=C.createContext(null);Fi.displayName="DataRouter";var rl=C.createContext(null);rl.displayName="DataRouterState";var gS=C.createContext(!1),p_=C.createContext({isTransitioning:!1});p_.displayName="ViewTransition";var _S=C.createContext(new Map);_S.displayName="Fetchers";var vS=C.createContext(null);vS.displayName="Await";var Zt=C.createContext(null);Zt.displayName="Navigation";var so=C.createContext(null);so.displayName="Location";var wr=C.createContext({outlet:null,matches:[],isDataRoute:!1});wr.displayName="Route";var Ih=C.createContext(null);Ih.displayName="RouteError";var m_="REACT_ROUTER_ERROR",yS="REDIRECT",xS="ROUTE_ERROR_RESPONSE";function SS(e){if(e.startsWith(`${m_}:${yS}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function wS(e){if(e.startsWith(`${m_}:${xS}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new dS(t.status,t.statusText,t.data)}catch{}}function bS(e,{relative:t}={}){We(zi(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=C.useContext(Zt),{hash:o,pathname:l,search:c}=io(e,{relative:t}),h=l;return r!=="/"&&(h=l==="/"?r:Vr([r,l])),n.createHref({pathname:h,search:c,hash:o})}function zi(){return C.useContext(so)!=null}function Qr(){return We(zi(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(so).location}var g_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function __(e){C.useContext(Zt).static||C.useLayoutEffect(e)}function Ah(){let{isDataRoute:e}=C.useContext(wr);return e?IS():CS()}function CS(){We(zi(),"useNavigate() may be used only in the context of a <Router> component.");let e=C.useContext(Fi),{basename:t,navigator:r}=C.useContext(Zt),{matches:n}=C.useContext(wr),{pathname:o}=Qr(),l=JSON.stringify(Th(n)),c=C.useRef(!1);return __(()=>{c.current=!0}),C.useCallback((m,d={})=>{if(fr(c.current,g_),!c.current)return;if(typeof m=="number"){r.go(m);return}let v=Bh(m,JSON.parse(l),o,d.relative==="path");e==null&&t!=="/"&&(v.pathname=v.pathname==="/"?t:Vr([t,v.pathname])),(d.replace?r.replace:r.push)(v,d.state,d)},[t,r,l,o,e])}C.createContext(null);function kS(){let{matches:e}=C.useContext(wr),t=e[e.length-1];return t?t.params:{}}function io(e,{relative:t}={}){let{matches:r}=C.useContext(wr),{pathname:n}=Qr(),o=JSON.stringify(Th(r));return C.useMemo(()=>Bh(e,JSON.parse(o),n,t==="path"),[e,o,n,t])}function ES(e,t){return v_(e,t)}function v_(e,t,r,n,o){We(zi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=C.useContext(Zt),{matches:c}=C.useContext(wr),h=c[c.length-1],m=h?h.params:{},d=h?h.pathname:"/",v=h?h.pathnameBase:"/",_=h&&h.route;{let P=_&&_.path||"";x_(d,!_||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let x=Qr(),b;if(t){let P=typeof t=="string"?Ai(t):t;We(v==="/"||P.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${P.pathname}" was given in the \`location\` prop.`),b=P}else b=x;let S=b.pathname||"/",w=S;if(v!=="/"){let P=v.replace(/^\//,"").split("/");w="/"+S.replace(/^\//,"").split("/").slice(P.length).join("/")}let E=a_(e,{pathname:w});fr(_||E!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),fr(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=jS(E&&E.map(P=>Object.assign({},P,{params:Object.assign({},m,P.params),pathname:Vr([v,l.encodeLocation?l.encodeLocation(P.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?v:Vr([v,l.encodeLocation?l.encodeLocation(P.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathnameBase])})),c,r,n,o);return t&&M?C.createElement(so.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},M):M}function NS(){let e=BS(),t=fS(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:n},l={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:l},"ErrorBoundary")," or"," ",C.createElement("code",{style:l},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},t),r?C.createElement("pre",{style:o},r):null,c)}var PS=C.createElement(NS,null),y_=class extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const r=wS(e.digest);r&&(e=r)}let t=e!==void 0?C.createElement(wr.Provider,{value:this.props.routeContext},C.createElement(Ih.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?C.createElement(RS,{error:e},t):t}};y_.contextType=gS;var uu=new WeakMap;function RS({children:e,error:t}){let{basename:r}=C.useContext(Zt);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let n=SS(t.digest);if(n){let o=uu.get(t);if(o)throw o;let l=d_(n.location,r);if(h_&&!uu.get(t))if(l.isExternal||n.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:n.replace}));throw uu.set(t,c),c}return C.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return e}function LS({routeContext:e,match:t,children:r}){let n=C.useContext(Fi);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),C.createElement(wr.Provider,{value:e},r)}function jS(e,t=[],r=null,n=null,o=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,c=r?.errors;if(c!=null){let v=l.findIndex(_=>_.route.id&&c?.[_.route.id]!==void 0);We(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,v+1))}let h=!1,m=-1;if(r)for(let v=0;v<l.length;v++){let _=l[v];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(m=v),_.route.id){let{loaderData:x,errors:b}=r,S=_.route.loader&&!x.hasOwnProperty(_.route.id)&&(!b||b[_.route.id]===void 0);if(_.route.lazy||S){h=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let d=r&&n?(v,_)=>{n(v,{location:r.location,params:r.matches?.[0]?.params??{},unstable_pattern:pS(r.matches),errorInfo:_})}:void 0;return l.reduceRight((v,_,x)=>{let b,S=!1,w=null,E=null;r&&(b=c&&_.route.id?c[_.route.id]:void 0,w=_.route.errorElement||PS,h&&(m<0&&x===0?(x_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,E=null):m===x&&(S=!0,E=_.route.hydrateFallbackElement||null)));let M=t.concat(l.slice(0,x+1)),P=()=>{let j;return b?j=w:S?j=E:_.route.Component?j=C.createElement(_.route.Component,null):_.route.element?j=_.route.element:j=v,C.createElement(LS,{match:_,routeContext:{outlet:v,matches:M,isDataRoute:r!=null},children:j})};return r&&(_.route.ErrorBoundary||_.route.errorElement||x===0)?C.createElement(y_,{location:r.location,revalidation:r.revalidation,component:w,error:b,children:P(),routeContext:{outlet:null,matches:M,isDataRoute:!0},onError:d}):P()},null)}function Fh(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function DS(e){let t=C.useContext(Fi);return We(t,Fh(e)),t}function MS(e){let t=C.useContext(rl);return We(t,Fh(e)),t}function OS(e){let t=C.useContext(wr);return We(t,Fh(e)),t}function zh(e){let t=OS(e),r=t.matches[t.matches.length-1];return We(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function TS(){return zh("useRouteId")}function BS(){let e=C.useContext(Ih),t=MS("useRouteError"),r=zh("useRouteError");return e!==void 0?e:t.errors?.[r]}function IS(){let{router:e}=DS("useNavigate"),t=zh("useNavigate"),r=C.useRef(!1);return __(()=>{r.current=!0}),C.useCallback(async(o,l={})=>{fr(r.current,g_),r.current&&(typeof o=="number"?await e.navigate(o):await e.navigate(o,{fromRouteId:t,...l}))},[e,t])}var xm={};function x_(e,t,r){!t&&!xm[e]&&(xm[e]=!0,fr(!1,r))}C.memo(AS);function AS({routes:e,future:t,state:r,onError:n}){return v_(e,void 0,r,n,t)}function hu({to:e,replace:t,state:r,relative:n}){We(zi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=C.useContext(Zt);fr(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=C.useContext(wr),{pathname:c}=Qr(),h=Ah(),m=Bh(e,Th(l),c,n==="path"),d=JSON.stringify(m);return C.useEffect(()=>{h(JSON.parse(d),{replace:t,state:r,relative:n})},[h,d,n,t,r]),null}function Sr(e){We(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function FS({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:o,static:l=!1,unstable_useTransitions:c}){We(!zi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=e.replace(/^\/*/,"/"),m=C.useMemo(()=>({basename:h,navigator:o,static:l,unstable_useTransitions:c,future:{}}),[h,o,l,c]);typeof r=="string"&&(r=Ai(r));let{pathname:d="/",search:v="",hash:_="",state:x=null,key:b="default"}=r,S=C.useMemo(()=>{let w=qr(d,h);return w==null?null:{location:{pathname:w,search:v,hash:_,state:x,key:b},navigationType:n}},[h,d,v,_,x,b,n]);return fr(S!=null,`<Router basename="${h}"> is not able to match the URL "${d}${v}${_}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:C.createElement(Zt.Provider,{value:m},C.createElement(so.Provider,{children:t,value:S}))}function Sm({children:e,location:t}){return ES($u(e),t)}function $u(e,t=[]){let r=[];return C.Children.forEach(e,(n,o)=>{if(!C.isValidElement(n))return;let l=[...t,o];if(n.type===C.Fragment){r.push.apply(r,$u(n.props.children,l));return}We(n.type===Sr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),We(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=$u(n.props.children,l)),r.push(c)}),r}var ja="get",Da="application/x-www-form-urlencoded";function sl(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function zS(e){return sl(e)&&e.tagName.toLowerCase()==="button"}function $S(e){return sl(e)&&e.tagName.toLowerCase()==="form"}function HS(e){return sl(e)&&e.tagName.toLowerCase()==="input"}function WS(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function US(e,t){return e.button===0&&(!t||t==="_self")&&!WS(e)}var Sa=null;function KS(){if(Sa===null)try{new FormData(document.createElement("form"),0),Sa=!1}catch{Sa=!0}return Sa}var VS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function du(e){return e!=null&&!VS.has(e)?(fr(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Da}"`),null):e}function qS(e,t){let r,n,o,l,c;if($S(e)){let h=e.getAttribute("action");n=h?qr(h,t):null,r=e.getAttribute("method")||ja,o=du(e.getAttribute("enctype"))||Da,l=new FormData(e)}else if(zS(e)||HS(e)&&(e.type==="submit"||e.type==="image")){let h=e.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=e.getAttribute("formaction")||h.getAttribute("action");if(n=m?qr(m,t):null,r=e.getAttribute("formmethod")||h.getAttribute("method")||ja,o=du(e.getAttribute("formenctype"))||du(h.getAttribute("enctype"))||Da,l=new FormData(h,e),!KS()){let{name:d,type:v,value:_}=e;if(v==="image"){let x=d?`${d}.`:"";l.append(`${x}x`,"0"),l.append(`${x}y`,"0")}else d&&l.append(d,_)}}else{if(sl(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=ja,n=null,o=Da,c=e}return l&&o==="text/plain"&&(c=l,l=void 0),{action:n,method:r.toLowerCase(),encType:o,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function $h(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function QS(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&qr(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function YS(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function GS(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function XS(e,t,r){let n=await Promise.all(e.map(async o=>{let l=t.routes[o.route.id];if(l){let c=await YS(l,r);return c.links?c.links():[]}return[]}));return tw(n.flat(1).filter(GS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function wm(e,t,r,n,o,l){let c=(m,d)=>r[d]?m.route.id!==r[d].route.id:!0,h=(m,d)=>r[d].pathname!==m.pathname||r[d].route.path?.endsWith("*")&&r[d].params["*"]!==m.params["*"];return l==="assets"?t.filter((m,d)=>c(m,d)||h(m,d)):l==="data"?t.filter((m,d)=>{let v=n.routes[m.route.id];if(!v||!v.hasLoader)return!1;if(c(m,d)||h(m,d))return!0;if(m.route.shouldRevalidate){let _=m.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function JS(e,t,{includeHydrateFallback:r}={}){return ZS(e.map(n=>{let o=t.routes[n.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),r&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function ZS(e){return[...new Set(e)]}function ew(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function tw(e,t){let r=new Set;return new Set(t),e.reduce((n,o)=>{let l=JSON.stringify(ew(o));return r.has(l)||(r.add(l),n.push({key:l,link:o})),n},[])}function S_(){let e=C.useContext(Fi);return $h(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function rw(){let e=C.useContext(rl);return $h(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Hh=C.createContext(void 0);Hh.displayName="FrameworkContext";function w_(){let e=C.useContext(Hh);return $h(e,"You must render this element inside a <HydratedRouter> element"),e}function sw(e,t){let r=C.useContext(Hh),[n,o]=C.useState(!1),[l,c]=C.useState(!1),{onFocus:h,onBlur:m,onMouseEnter:d,onMouseLeave:v,onTouchStart:_}=t,x=C.useRef(null);C.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let w=M=>{M.forEach(P=>{c(P.isIntersecting)})},E=new IntersectionObserver(w,{threshold:.5});return x.current&&E.observe(x.current),()=>{E.disconnect()}}},[e]),C.useEffect(()=>{if(n){let w=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(w)}}},[n]);let b=()=>{o(!0)},S=()=>{o(!1),c(!1)};return r?e!=="intent"?[l,x,{}]:[l,x,{onFocus:jn(h,b),onBlur:jn(m,S),onMouseEnter:jn(d,b),onMouseLeave:jn(v,S),onTouchStart:jn(_,b)}]:[!1,x,{}]}function jn(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function iw({page:e,...t}){let{router:r}=S_(),n=C.useMemo(()=>a_(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?C.createElement(ow,{page:e,matches:n,...t}):null}function nw(e){let{manifest:t,routeModules:r}=w_(),[n,o]=C.useState([]);return C.useEffect(()=>{let l=!1;return XS(e,t,r).then(c=>{l||o(c)}),()=>{l=!0}},[e,t,r]),n}function ow({page:e,matches:t,...r}){let n=Qr(),{manifest:o,routeModules:l}=w_(),{basename:c}=S_(),{loaderData:h,matches:m}=rw(),d=C.useMemo(()=>wm(e,t,m,o,n,"data"),[e,t,m,o,n]),v=C.useMemo(()=>wm(e,t,m,o,n,"assets"),[e,t,m,o,n]),_=C.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let S=new Set,w=!1;if(t.forEach(M=>{let P=o.routes[M.route.id];!P||!P.hasLoader||(!d.some(j=>j.route.id===M.route.id)&&M.route.id in h&&l[M.route.id]?.shouldRevalidate||P.hasClientLoader?w=!0:S.add(M.route.id))}),S.size===0)return[];let E=QS(e,c,"data");return w&&S.size>0&&E.searchParams.set("_routes",t.filter(M=>S.has(M.route.id)).map(M=>M.route.id).join(",")),[E.pathname+E.search]},[c,h,n,o,d,t,e,l]),x=C.useMemo(()=>JS(v,o),[v,o]),b=nw(v);return C.createElement(C.Fragment,null,_.map(S=>C.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...r})),x.map(S=>C.createElement("link",{key:S,rel:"modulepreload",href:S,...r})),b.map(({key:S,link:w})=>C.createElement("link",{key:S,nonce:r.nonce,...w})))}function aw(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var lw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lw&&(window.__reactRouterVersion="7.11.0")}catch{}function cw({basename:e,children:t,unstable_useTransitions:r,window:n}){let o=C.useRef();o.current==null&&(o.current=Wx({window:n,v5Compat:!0}));let l=o.current,[c,h]=C.useState({action:l.action,location:l.location}),m=C.useCallback(d=>{r===!1?h(d):C.startTransition(()=>h(d))},[r]);return C.useLayoutEffect(()=>l.listen(m),[l,m]),C.createElement(FS,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:r})}var b_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xn=C.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:o,reloadDocument:l,replace:c,state:h,target:m,to:d,preventScrollReset:v,viewTransition:_,unstable_defaultShouldRevalidate:x,...b},S){let{basename:w,unstable_useTransitions:E}=C.useContext(Zt),M=typeof d=="string"&&b_.test(d),P=d_(d,w);d=P.to;let j=bS(d,{relative:o}),[A,U,V]=sw(n,b),Z=fw(d,{replace:c,state:h,target:m,preventScrollReset:v,relative:o,viewTransition:_,unstable_defaultShouldRevalidate:x,unstable_useTransitions:E});function le(T){t&&t(T),T.defaultPrevented||Z(T)}let te=C.createElement("a",{...b,...V,href:P.absoluteURL||j,onClick:P.isExternal||l?t:le,ref:aw(S,U),target:m,"data-discover":!M&&r==="render"?"true":void 0});return A&&!M?C.createElement(C.Fragment,null,te,C.createElement(iw,{page:j})):te});Xn.displayName="Link";var uw=C.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:o=!1,style:l,to:c,viewTransition:h,children:m,...d},v){let _=io(c,{relative:d.relative}),x=Qr(),b=C.useContext(rl),{navigator:S,basename:w}=C.useContext(Zt),E=b!=null&&vw(_)&&h===!0,M=S.encodeLocation?S.encodeLocation(_).pathname:_.pathname,P=x.pathname,j=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;r||(P=P.toLowerCase(),j=j?j.toLowerCase():null,M=M.toLowerCase()),j&&w&&(j=qr(j,w)||j);const A=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let U=P===M||!o&&P.startsWith(M)&&P.charAt(A)==="/",V=j!=null&&(j===M||!o&&j.startsWith(M)&&j.charAt(M.length)==="/"),Z={isActive:U,isPending:V,isTransitioning:E},le=U?t:void 0,te;typeof n=="function"?te=n(Z):te=[n,U?"active":null,V?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let T=typeof l=="function"?l(Z):l;return C.createElement(Xn,{...d,"aria-current":le,className:te,ref:v,style:T,to:c,viewTransition:h},typeof m=="function"?m(Z):m)});uw.displayName="NavLink";var hw=C.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:o,state:l,method:c=ja,action:h,onSubmit:m,relative:d,preventScrollReset:v,viewTransition:_,unstable_defaultShouldRevalidate:x,...b},S)=>{let{unstable_useTransitions:w}=C.useContext(Zt),E=gw(),M=_w(h,{relative:d}),P=c.toLowerCase()==="get"?"get":"post",j=typeof h=="string"&&b_.test(h),A=U=>{if(m&&m(U),U.defaultPrevented)return;U.preventDefault();let V=U.nativeEvent.submitter,Z=V?.getAttribute("formmethod")||c,le=()=>E(V||U.currentTarget,{fetcherKey:t,method:Z,navigate:r,replace:o,state:l,relative:d,preventScrollReset:v,viewTransition:_,unstable_defaultShouldRevalidate:x});w&&r!==!1?C.startTransition(()=>le()):le()};return C.createElement("form",{ref:S,method:P,action:M,onSubmit:n?m:A,...b,"data-discover":!j&&e==="render"?"true":void 0})});hw.displayName="Form";function dw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function C_(e){let t=C.useContext(Fi);return We(t,dw(e)),t}function fw(e,{target:t,replace:r,state:n,preventScrollReset:o,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:h,unstable_useTransitions:m}={}){let d=Ah(),v=Qr(),_=io(e,{relative:l});return C.useCallback(x=>{if(US(x,t)){x.preventDefault();let b=r!==void 0?r:Gn(v)===Gn(_),S=()=>d(e,{replace:b,state:n,preventScrollReset:o,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:h});m?C.startTransition(()=>S()):S()}},[v,d,_,r,n,t,e,o,l,c,h,m])}var pw=0,mw=()=>`__${String(++pw)}__`;function gw(){let{router:e}=C_("useSubmit"),{basename:t}=C.useContext(Zt),r=TS(),n=e.fetch,o=e.navigate;return C.useCallback(async(l,c={})=>{let{action:h,method:m,encType:d,formData:v,body:_}=qS(l,t);if(c.navigate===!1){let x=c.fetcherKey||mw();await n(x,r,c.action||h,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:_,formMethod:c.method||m,formEncType:c.encType||d,flushSync:c.flushSync})}else await o(c.action||h,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:_,formMethod:c.method||m,formEncType:c.encType||d,replace:c.replace,state:c.state,fromRouteId:r,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,o,t,r])}function _w(e,{relative:t}={}){let{basename:r}=C.useContext(Zt),n=C.useContext(wr);We(n,"useFormAction must be used inside a RouteContext");let[o]=n.matches.slice(-1),l={...io(e||".",{relative:t})},c=Qr();if(e==null){l.search=c.search;let h=new URLSearchParams(l.search),m=h.getAll("index");if(m.some(v=>v==="")){h.delete("index"),m.filter(_=>_).forEach(_=>h.append("index",_));let v=h.toString();l.search=v?`?${v}`:""}}return(!e||e===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(l.pathname=l.pathname==="/"?r:Vr([r,l.pathname])),Gn(l)}function vw(e,{relative:t}={}){let r=C.useContext(p_);We(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=C_("useViewTransitionState"),o=io(e,{relative:t});if(!r.isTransitioning)return!1;let l=qr(r.currentLocation.pathname,n)||r.currentLocation.pathname,c=qr(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Ua(o.pathname,c)!=null||Ua(o.pathname,l)!=null}const ke=e=>typeof e=="string",Dn=()=>{let e,t;const r=new Promise((n,o)=>{e=n,t=o});return r.resolve=e,r.reject=t,r},bm=e=>e==null?"":""+e,yw=(e,t,r)=>{e.forEach(n=>{t[n]&&(r[n]=t[n])})},xw=/###/g,Cm=e=>e&&e.indexOf("###")>-1?e.replace(xw,"."):e,km=e=>!e||ke(e),Kn=(e,t,r)=>{const n=ke(t)?t.split("."):t;let o=0;for(;o<n.length-1;){if(km(e))return{};const l=Cm(n[o]);!e[l]&&r&&(e[l]=new r),Object.prototype.hasOwnProperty.call(e,l)?e=e[l]:e={},++o}return km(e)?{}:{obj:e,k:Cm(n[o])}},Em=(e,t,r)=>{const{obj:n,k:o}=Kn(e,t,Object);if(n!==void 0||t.length===1){n[o]=r;return}let l=t[t.length-1],c=t.slice(0,t.length-1),h=Kn(e,c,Object);for(;h.obj===void 0&&c.length;)l=`${c[c.length-1]}.${l}`,c=c.slice(0,c.length-1),h=Kn(e,c,Object),h?.obj&&typeof h.obj[`${h.k}.${l}`]<"u"&&(h.obj=void 0);h.obj[`${h.k}.${l}`]=r},Sw=(e,t,r,n)=>{const{obj:o,k:l}=Kn(e,t,Object);o[l]=o[l]||[],o[l].push(r)},Ka=(e,t)=>{const{obj:r,k:n}=Kn(e,t);if(r&&Object.prototype.hasOwnProperty.call(r,n))return r[n]},ww=(e,t,r)=>{const n=Ka(e,r);return n!==void 0?n:Ka(t,r)},k_=(e,t,r)=>{for(const n in t)n!=="__proto__"&&n!=="constructor"&&(n in e?ke(e[n])||e[n]instanceof String||ke(t[n])||t[n]instanceof String?r&&(e[n]=t[n]):k_(e[n],t[n],r):e[n]=t[n]);return e},Ni=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var bw={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Cw=e=>ke(e)?e.replace(/[&<>"'\/]/g,t=>bw[t]):e;class kw{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const r=this.regExpMap.get(t);if(r!==void 0)return r;const n=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,n),this.regExpQueue.push(t),n}}const Ew=[" ",",","?","!",";"],Nw=new kw(20),Pw=(e,t,r)=>{t=t||"",r=r||"";const n=Ew.filter(c=>t.indexOf(c)<0&&r.indexOf(c)<0);if(n.length===0)return!0;const o=Nw.getRegExp(`(${n.map(c=>c==="?"?"\\?":c).join("|")})`);let l=!o.test(e);if(!l){const c=e.indexOf(r);c>0&&!o.test(e.substring(0,c))&&(l=!0)}return l},Hu=(e,t,r=".")=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const n=t.split(r);let o=e;for(let l=0;l<n.length;){if(!o||typeof o!="object")return;let c,h="";for(let m=l;m<n.length;++m)if(m!==l&&(h+=r),h+=n[m],c=o[h],c!==void 0){if(["string","number","boolean"].indexOf(typeof c)>-1&&m<n.length-1)continue;l+=m-l+1;break}o=c}return o},Jn=e=>e?.replace("_","-"),Rw={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};class Va{constructor(t,r={}){this.init(t,r)}init(t,r={}){this.prefix=r.prefix||"i18next:",this.logger=t||Rw,this.options=r,this.debug=r.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,r,n,o){return o&&!this.debug?null:(ke(t[0])&&(t[0]=`${n}${this.prefix} ${t[0]}`),this.logger[r](t))}create(t){return new Va(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Va(this.logger,t)}}var jr=new Va;class il{constructor(){this.observers={}}on(t,r){return t.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const o=this.observers[n].get(r)||0;this.observers[n].set(r,o+1)}),this}off(t,r){if(this.observers[t]){if(!r){delete this.observers[t];return}this.observers[t].delete(r)}}emit(t,...r){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([o,l])=>{for(let c=0;c<l;c++)o(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([o,l])=>{for(let c=0;c<l;c++)o.apply(o,[t,...r])})}}class Nm extends il{constructor(t,r={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const r=this.options.ns.indexOf(t);r>-1&&this.options.ns.splice(r,1)}getResource(t,r,n,o={}){const l=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,c=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure;let h;t.indexOf(".")>-1?h=t.split("."):(h=[t,r],n&&(Array.isArray(n)?h.push(...n):ke(n)&&l?h.push(...n.split(l)):h.push(n)));const m=Ka(this.data,h);return!m&&!r&&!n&&t.indexOf(".")>-1&&(t=h[0],r=h[1],n=h.slice(2).join(".")),m||!c||!ke(n)?m:Hu(this.data?.[t]?.[r],n,l)}addResource(t,r,n,o,l={silent:!1}){const c=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator;let h=[t,r];n&&(h=h.concat(c?n.split(c):n)),t.indexOf(".")>-1&&(h=t.split("."),o=r,r=h[1]),this.addNamespaces(r),Em(this.data,h,o),l.silent||this.emit("added",t,r,n,o)}addResources(t,r,n,o={silent:!1}){for(const l in n)(ke(n[l])||Array.isArray(n[l]))&&this.addResource(t,r,l,n[l],{silent:!0});o.silent||this.emit("added",t,r,n)}addResourceBundle(t,r,n,o,l,c={silent:!1,skipCopy:!1}){let h=[t,r];t.indexOf(".")>-1&&(h=t.split("."),o=n,n=r,r=h[1]),this.addNamespaces(r);let m=Ka(this.data,h)||{};c.skipCopy||(n=JSON.parse(JSON.stringify(n))),o?k_(m,n,l):m={...m,...n},Em(this.data,h,m),c.silent||this.emit("added",t,r,n)}removeResourceBundle(t,r){this.hasResourceBundle(t,r)&&delete this.data[t][r],this.removeNamespaces(r),this.emit("removed",t,r)}hasResourceBundle(t,r){return this.getResource(t,r)!==void 0}getResourceBundle(t,r){return r||(r=this.options.defaultNS),this.getResource(t,r)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const r=this.getDataByLanguage(t);return!!(r&&Object.keys(r)||[]).find(o=>r[o]&&Object.keys(r[o]).length>0)}toJSON(){return this.data}}var E_={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,r,n,o){return e.forEach(l=>{t=this.processors[l]?.process(t,r,n,o)??t}),t}};const N_=Symbol("i18next/PATH_KEY");function Lw(){const e=[],t=Object.create(null);let r;return t.get=(n,o)=>(r?.revoke?.(),o===N_?e:(e.push(o),r=Proxy.revocable(n,t),r.proxy)),Proxy.revocable(Object.create(null),t).proxy}function Wu(e,t){const{[N_]:r}=e(Lw());return r.join(t?.keySeparator??".")}const Pm={},fu=e=>!ke(e)&&typeof e!="boolean"&&typeof e!="number";class qa extends il{constructor(t,r={}){super(),yw(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=jr.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,r={interpolation:{}}){const n={...r};if(t==null)return!1;const o=this.resolve(t,n);if(o?.res===void 0)return!1;const l=fu(o.res);return!(n.returnObjects===!1&&l)}extractFromKey(t,r){let n=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let l=r.ns||this.options.defaultNS||[];const c=n&&t.indexOf(n)>-1,h=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!Pw(t,n,o);if(c&&!h){const m=t.match(this.interpolator.nestingRegexp);if(m&&m.length>0)return{key:t,namespaces:ke(l)?[l]:l};const d=t.split(n);(n!==o||n===o&&this.options.ns.indexOf(d[0])>-1)&&(l=d.shift()),t=d.join(o)}return{key:t,namespaces:ke(l)?[l]:l}}translate(t,r,n){let o=typeof r=="object"?{...r}:r;if(typeof o!="object"&&this.options.overloadTranslationOptionHandler&&(o=this.options.overloadTranslationOptionHandler(arguments)),typeof o=="object"&&(o={...o}),o||(o={}),t==null)return"";typeof t=="function"&&(t=Wu(t,{...this.options,...o})),Array.isArray(t)||(t=[String(t)]);const l=o.returnDetails!==void 0?o.returnDetails:this.options.returnDetails,c=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,{key:h,namespaces:m}=this.extractFromKey(t[t.length-1],o),d=m[m.length-1];let v=o.nsSeparator!==void 0?o.nsSeparator:this.options.nsSeparator;v===void 0&&(v=":");const _=o.lng||this.language,x=o.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(_?.toLowerCase()==="cimode")return x?l?{res:`${d}${v}${h}`,usedKey:h,exactUsedKey:h,usedLng:_,usedNS:d,usedParams:this.getUsedParamsDetails(o)}:`${d}${v}${h}`:l?{res:h,usedKey:h,exactUsedKey:h,usedLng:_,usedNS:d,usedParams:this.getUsedParamsDetails(o)}:h;const b=this.resolve(t,o);let S=b?.res;const w=b?.usedKey||h,E=b?.exactUsedKey||h,M=["[object Number]","[object Function]","[object RegExp]"],P=o.joinArrays!==void 0?o.joinArrays:this.options.joinArrays,j=!this.i18nFormat||this.i18nFormat.handleAsObject,A=o.count!==void 0&&!ke(o.count),U=qa.hasDefaultValue(o),V=A?this.pluralResolver.getSuffix(_,o.count,o):"",Z=o.ordinal&&A?this.pluralResolver.getSuffix(_,o.count,{ordinal:!1}):"",le=A&&!o.ordinal&&o.count===0,te=le&&o[`defaultValue${this.options.pluralSeparator}zero`]||o[`defaultValue${V}`]||o[`defaultValue${Z}`]||o.defaultValue;let T=S;j&&!S&&U&&(T=te);const W=fu(T),K=Object.prototype.toString.apply(T);if(j&&T&&W&&M.indexOf(K)<0&&!(ke(P)&&Array.isArray(T))){if(!o.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const F=this.options.returnedObjectHandler?this.options.returnedObjectHandler(w,T,{...o,ns:m}):`key '${h} (${this.language})' returned an object instead of string.`;return l?(b.res=F,b.usedParams=this.getUsedParamsDetails(o),b):F}if(c){const F=Array.isArray(T),Y=F?[]:{},O=F?E:w;for(const B in T)if(Object.prototype.hasOwnProperty.call(T,B)){const G=`${O}${c}${B}`;U&&!S?Y[B]=this.translate(G,{...o,defaultValue:fu(te)?te[B]:void 0,joinArrays:!1,ns:m}):Y[B]=this.translate(G,{...o,joinArrays:!1,ns:m}),Y[B]===G&&(Y[B]=T[B])}S=Y}}else if(j&&ke(P)&&Array.isArray(S))S=S.join(P),S&&(S=this.extendTranslation(S,t,o,n));else{let F=!1,Y=!1;!this.isValidLookup(S)&&U&&(F=!0,S=te),this.isValidLookup(S)||(Y=!0,S=h);const B=(o.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Y?void 0:S,G=U&&te!==S&&this.options.updateMissing;if(Y||F||G){if(this.logger.log(G?"updateKey":"missingKey",_,d,h,G?te:S),c){const k=this.resolve(h,{...o,keySeparator:!1});k&&k.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let D=[];const Q=this.languageUtils.getFallbackCodes(this.options.fallbackLng,o.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Q&&Q[0])for(let k=0;k<Q.length;k++)D.push(Q[k]);else this.options.saveMissingTo==="all"?D=this.languageUtils.toResolveHierarchy(o.lng||this.language):D.push(o.lng||this.language);const X=(k,I,q)=>{const ie=U&&q!==S?q:B;this.options.missingKeyHandler?this.options.missingKeyHandler(k,d,I,ie,G,o):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(k,d,I,ie,G,o),this.emit("missingKey",k,d,I,S)};this.options.saveMissing&&(this.options.saveMissingPlurals&&A?D.forEach(k=>{const I=this.pluralResolver.getSuffixes(k,o);le&&o[`defaultValue${this.options.pluralSeparator}zero`]&&I.indexOf(`${this.options.pluralSeparator}zero`)<0&&I.push(`${this.options.pluralSeparator}zero`),I.forEach(q=>{X([k],h+q,o[`defaultValue${q}`]||te)})}):X(D,h,te))}S=this.extendTranslation(S,t,o,b,n),Y&&S===h&&this.options.appendNamespaceToMissingKey&&(S=`${d}${v}${h}`),(Y||F)&&this.options.parseMissingKeyHandler&&(S=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}${v}${h}`:h,F?S:void 0,o))}return l?(b.res=S,b.usedParams=this.getUsedParamsDetails(o),b):S}extendTranslation(t,r,n,o,l){if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const m=ke(t)&&(n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(m){const _=t.match(this.interpolator.nestingRegexp);d=_&&_.length}let v=n.replace&&!ke(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(v={...this.options.interpolation.defaultVariables,...v}),t=this.interpolator.interpolate(t,v,n.lng||this.language||o.usedLng,n),m){const _=t.match(this.interpolator.nestingRegexp),x=_&&_.length;d<x&&(n.nest=!1)}!n.lng&&o&&o.res&&(n.lng=this.language||o.usedLng),n.nest!==!1&&(t=this.interpolator.nest(t,(..._)=>l?.[0]===_[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${_[0]} in key: ${r[0]}`),null):this.translate(..._,r),n)),n.interpolation&&this.interpolator.reset()}const c=n.postProcess||this.options.postProcess,h=ke(c)?[c]:c;return t!=null&&h?.length&&n.applyPostProcessor!==!1&&(t=E_.handle(h,t,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),t}resolve(t,r={}){let n,o,l,c,h;return ke(t)&&(t=[t]),t.forEach(m=>{if(this.isValidLookup(n))return;const d=this.extractFromKey(m,r),v=d.key;o=v;let _=d.namespaces;this.options.fallbackNS&&(_=_.concat(this.options.fallbackNS));const x=r.count!==void 0&&!ke(r.count),b=x&&!r.ordinal&&r.count===0,S=r.context!==void 0&&(ke(r.context)||typeof r.context=="number")&&r.context!=="",w=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);_.forEach(E=>{this.isValidLookup(n)||(h=E,!Pm[`${w[0]}-${E}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(h)&&(Pm[`${w[0]}-${E}`]=!0,this.logger.warn(`key "${o}" for languages "${w.join(", ")}" won't get resolved as namespace "${h}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),w.forEach(M=>{if(this.isValidLookup(n))return;c=M;const P=[v];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(P,v,M,E,r);else{let A;x&&(A=this.pluralResolver.getSuffix(M,r.count,r));const U=`${this.options.pluralSeparator}zero`,V=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(x&&(r.ordinal&&A.indexOf(V)===0&&P.push(v+A.replace(V,this.options.pluralSeparator)),P.push(v+A),b&&P.push(v+U)),S){const Z=`${v}${this.options.contextSeparator||"_"}${r.context}`;P.push(Z),x&&(r.ordinal&&A.indexOf(V)===0&&P.push(Z+A.replace(V,this.options.pluralSeparator)),P.push(Z+A),b&&P.push(Z+U))}}let j;for(;j=P.pop();)this.isValidLookup(n)||(l=j,n=this.getResource(M,E,j,r))}))})}),{res:n,usedKey:o,exactUsedKey:l,usedLng:c,usedNS:h}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,r,n,o={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,r,n,o):this.resourceStore.getResource(t,r,n,o)}getUsedParamsDetails(t={}){const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=t.replace&&!ke(t.replace);let o=n?t.replace:t;if(n&&typeof t.count<"u"&&(o.count=t.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!n){o={...o};for(const l of r)delete o[l]}return o}static hasDefaultValue(t){const r="defaultValue";for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r===n.substring(0,r.length)&&t[n]!==void 0)return!0;return!1}}class Rm{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=jr.create("languageUtils")}getScriptPartFromCode(t){if(t=Jn(t),!t||t.indexOf("-")<0)return null;const r=t.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(t){if(t=Jn(t),!t||t.indexOf("-")<0)return t;const r=t.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(t){if(ke(t)&&t.indexOf("-")>-1){let r;try{r=Intl.getCanonicalLocales(t)[0]}catch{}return r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let r;return t.forEach(n=>{if(r)return;const o=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(o))&&(r=o)}),!r&&this.options.supportedLngs&&t.forEach(n=>{if(r)return;const o=this.getScriptPartFromCode(n);if(this.isSupportedCode(o))return r=o;const l=this.getLanguagePartFromCode(n);if(this.isSupportedCode(l))return r=l;r=this.options.supportedLngs.find(c=>{if(c===l)return c;if(!(c.indexOf("-")<0&&l.indexOf("-")<0)&&(c.indexOf("-")>0&&l.indexOf("-")<0&&c.substring(0,c.indexOf("-"))===l||c.indexOf(l)===0&&l.length>1))return c})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(t,r){if(!t)return[];if(typeof t=="function"&&(t=t(r)),ke(t)&&(t=[t]),Array.isArray(t))return t;if(!r)return t.default||[];let n=t[r];return n||(n=t[this.getScriptPartFromCode(r)]),n||(n=t[this.formatLanguageCode(r)]),n||(n=t[this.getLanguagePartFromCode(r)]),n||(n=t.default),n||[]}toResolveHierarchy(t,r){const n=this.getFallbackCodes((r===!1?[]:r)||this.options.fallbackLng||[],t),o=[],l=c=>{c&&(this.isSupportedCode(c)?o.push(c):this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`))};return ke(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&l(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&l(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&l(this.getLanguagePartFromCode(t))):ke(t)&&l(this.formatLanguageCode(t)),n.forEach(c=>{o.indexOf(c)<0&&l(this.formatLanguageCode(c))}),o}}const Lm={zero:0,one:1,two:2,few:3,many:4,other:5},jm={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class jw{constructor(t,r={}){this.languageUtils=t,this.options=r,this.logger=jr.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,r){this.rules[t]=r}clearCache(){this.pluralRulesCache={}}getRule(t,r={}){const n=Jn(t==="dev"?"en":t),o=r.ordinal?"ordinal":"cardinal",l=JSON.stringify({cleanedCode:n,type:o});if(l in this.pluralRulesCache)return this.pluralRulesCache[l];let c;try{c=new Intl.PluralRules(n,{type:o})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),jm;if(!t.match(/-|_/))return jm;const m=this.languageUtils.getLanguagePartFromCode(t);c=this.getRule(m,r)}return this.pluralRulesCache[l]=c,c}needsPlural(t,r={}){let n=this.getRule(t,r);return n||(n=this.getRule("dev",r)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,r,n={}){return this.getSuffixes(t,n).map(o=>`${r}${o}`)}getSuffixes(t,r={}){let n=this.getRule(t,r);return n||(n=this.getRule("dev",r)),n?n.resolvedOptions().pluralCategories.sort((o,l)=>Lm[o]-Lm[l]).map(o=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${o}`):[]}getSuffix(t,r,n={}){const o=this.getRule(t,n);return o?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${o.select(r)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",r,n))}}const Dm=(e,t,r,n=".",o=!0)=>{let l=ww(e,t,r);return!l&&o&&ke(r)&&(l=Hu(e,r,n),l===void 0&&(l=Hu(t,r,n))),l},pu=e=>e.replace(/\$/g,"$$$$");class Mm{constructor(t={}){this.logger=jr.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(r=>r),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:r,escapeValue:n,useRawValueToEscape:o,prefix:l,prefixEscaped:c,suffix:h,suffixEscaped:m,formatSeparator:d,unescapeSuffix:v,unescapePrefix:_,nestingPrefix:x,nestingPrefixEscaped:b,nestingSuffix:S,nestingSuffixEscaped:w,nestingOptionsSeparator:E,maxReplaces:M,alwaysFormat:P}=t.interpolation;this.escape=r!==void 0?r:Cw,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=o!==void 0?o:!1,this.prefix=l?Ni(l):c||"{{",this.suffix=h?Ni(h):m||"}}",this.formatSeparator=d||",",this.unescapePrefix=v?"":_||"-",this.unescapeSuffix=this.unescapePrefix?"":v||"",this.nestingPrefix=x?Ni(x):b||Ni("$t("),this.nestingSuffix=S?Ni(S):w||Ni(")"),this.nestingOptionsSeparator=E||",",this.maxReplaces=M||1e3,this.alwaysFormat=P!==void 0?P:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(r,n)=>r?.source===n?(r.lastIndex=0,r):new RegExp(n,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,r,n,o){let l,c,h;const m=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=b=>{if(b.indexOf(this.formatSeparator)<0){const M=Dm(r,m,b,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(M,void 0,n,{...o,...r,interpolationkey:b}):M}const S=b.split(this.formatSeparator),w=S.shift().trim(),E=S.join(this.formatSeparator).trim();return this.format(Dm(r,m,w,this.options.keySeparator,this.options.ignoreJSONStructure),E,n,{...o,...r,interpolationkey:w})};this.resetRegExp();const v=o?.missingInterpolationHandler||this.options.missingInterpolationHandler,_=o?.interpolation?.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:b=>pu(b)},{regex:this.regexp,safeValue:b=>this.escapeValue?pu(this.escape(b)):pu(b)}].forEach(b=>{for(h=0;l=b.regex.exec(t);){const S=l[1].trim();if(c=d(S),c===void 0)if(typeof v=="function"){const E=v(t,l,o);c=ke(E)?E:""}else if(o&&Object.prototype.hasOwnProperty.call(o,S))c="";else if(_){c=l[0];continue}else this.logger.warn(`missed to pass in variable ${S} for interpolating ${t}`),c="";else!ke(c)&&!this.useRawValueToEscape&&(c=bm(c));const w=b.safeValue(c);if(t=t.replace(l[0],w),_?(b.regex.lastIndex+=c.length,b.regex.lastIndex-=l[0].length):b.regex.lastIndex=0,h++,h>=this.maxReplaces)break}}),t}nest(t,r,n={}){let o,l,c;const h=(m,d)=>{const v=this.nestingOptionsSeparator;if(m.indexOf(v)<0)return m;const _=m.split(new RegExp(`${v}[ ]*{`));let x=`{${_[1]}`;m=_[0],x=this.interpolate(x,c);const b=x.match(/'/g),S=x.match(/"/g);((b?.length??0)%2===0&&!S||S.length%2!==0)&&(x=x.replace(/'/g,'"'));try{c=JSON.parse(x),d&&(c={...d,...c})}catch(w){return this.logger.warn(`failed parsing options string in nesting for key ${m}`,w),`${m}${v}${x}`}return c.defaultValue&&c.defaultValue.indexOf(this.prefix)>-1&&delete c.defaultValue,m};for(;o=this.nestingRegexp.exec(t);){let m=[];c={...n},c=c.replace&&!ke(c.replace)?c.replace:c,c.applyPostProcessor=!1,delete c.defaultValue;const d=/{.*}/.test(o[1])?o[1].lastIndexOf("}")+1:o[1].indexOf(this.formatSeparator);if(d!==-1&&(m=o[1].slice(d).split(this.formatSeparator).map(v=>v.trim()).filter(Boolean),o[1]=o[1].slice(0,d)),l=r(h.call(this,o[1].trim(),c),c),l&&o[0]===t&&!ke(l))return l;ke(l)||(l=bm(l)),l||(this.logger.warn(`missed to resolve ${o[1]} for nesting ${t}`),l=""),m.length&&(l=m.reduce((v,_)=>this.format(v,_,n.lng,{...n,interpolationkey:o[1].trim()}),l.trim())),t=t.replace(o[0],l),this.regexp.lastIndex=0}return t}}const Dw=e=>{let t=e.toLowerCase().trim();const r={};if(e.indexOf("(")>-1){const n=e.split("(");t=n[0].toLowerCase().trim();const o=n[1].substring(0,n[1].length-1);t==="currency"&&o.indexOf(":")<0?r.currency||(r.currency=o.trim()):t==="relativetime"&&o.indexOf(":")<0?r.range||(r.range=o.trim()):o.split(";").forEach(c=>{if(c){const[h,...m]=c.split(":"),d=m.join(":").trim().replace(/^'+|'+$/g,""),v=h.trim();r[v]||(r[v]=d),d==="false"&&(r[v]=!1),d==="true"&&(r[v]=!0),isNaN(d)||(r[v]=parseInt(d,10))}})}return{formatName:t,formatOptions:r}},Om=e=>{const t={};return(r,n,o)=>{let l=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(l={...l,[o.interpolationkey]:void 0});const c=n+JSON.stringify(l);let h=t[c];return h||(h=e(Jn(n),o),t[c]=h),h(r)}},Mw=e=>(t,r,n)=>e(Jn(r),n)(t);class Ow{constructor(t={}){this.logger=jr.create("formatter"),this.options=t,this.init(t)}init(t,r={interpolation:{}}){this.formatSeparator=r.interpolation.formatSeparator||",";const n=r.cacheInBuiltFormats?Om:Mw;this.formats={number:n((o,l)=>{const c=new Intl.NumberFormat(o,{...l});return h=>c.format(h)}),currency:n((o,l)=>{const c=new Intl.NumberFormat(o,{...l,style:"currency"});return h=>c.format(h)}),datetime:n((o,l)=>{const c=new Intl.DateTimeFormat(o,{...l});return h=>c.format(h)}),relativetime:n((o,l)=>{const c=new Intl.RelativeTimeFormat(o,{...l});return h=>c.format(h,l.range||"day")}),list:n((o,l)=>{const c=new Intl.ListFormat(o,{...l});return h=>c.format(h)})}}add(t,r){this.formats[t.toLowerCase().trim()]=r}addCached(t,r){this.formats[t.toLowerCase().trim()]=Om(r)}format(t,r,n,o={}){const l=r.split(this.formatSeparator);if(l.length>1&&l[0].indexOf("(")>1&&l[0].indexOf(")")<0&&l.find(h=>h.indexOf(")")>-1)){const h=l.findIndex(m=>m.indexOf(")")>-1);l[0]=[l[0],...l.splice(1,h)].join(this.formatSeparator)}return l.reduce((h,m)=>{const{formatName:d,formatOptions:v}=Dw(m);if(this.formats[d]){let _=h;try{const x=o?.formatParams?.[o.interpolationkey]||{},b=x.locale||x.lng||o.locale||o.lng||n;_=this.formats[d](h,b,{...v,...o,...x})}catch(x){this.logger.warn(x)}return _}else this.logger.warn(`there was no format function for ${d}`);return h},t)}}const Tw=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class Bw extends il{constructor(t,r,n,o={}){super(),this.backend=t,this.store=r,this.services=n,this.languageUtils=n.languageUtils,this.options=o,this.logger=jr.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,o.backend,o)}queueLoad(t,r,n,o){const l={},c={},h={},m={};return t.forEach(d=>{let v=!0;r.forEach(_=>{const x=`${d}|${_}`;!n.reload&&this.store.hasResourceBundle(d,_)?this.state[x]=2:this.state[x]<0||(this.state[x]===1?c[x]===void 0&&(c[x]=!0):(this.state[x]=1,v=!1,c[x]===void 0&&(c[x]=!0),l[x]===void 0&&(l[x]=!0),m[_]===void 0&&(m[_]=!0)))}),v||(h[d]=!0)}),(Object.keys(l).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(l),pending:Object.keys(c),toLoadLanguages:Object.keys(h),toLoadNamespaces:Object.keys(m)}}loaded(t,r,n){const o=t.split("|"),l=o[0],c=o[1];r&&this.emit("failedLoading",l,c,r),!r&&n&&this.store.addResourceBundle(l,c,n,void 0,void 0,{skipCopy:!0}),this.state[t]=r?-1:2,r&&n&&(this.state[t]=0);const h={};this.queue.forEach(m=>{Sw(m.loaded,[l],c),Tw(m,t),r&&m.errors.push(r),m.pendingCount===0&&!m.done&&(Object.keys(m.loaded).forEach(d=>{h[d]||(h[d]={});const v=m.loaded[d];v.length&&v.forEach(_=>{h[d][_]===void 0&&(h[d][_]=!0)})}),m.done=!0,m.errors.length?m.callback(m.errors):m.callback())}),this.emit("loaded",h),this.queue=this.queue.filter(m=>!m.done)}read(t,r,n,o=0,l=this.retryTimeout,c){if(!t.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:r,fcName:n,tried:o,wait:l,callback:c});return}this.readingCalls++;const h=(d,v)=>{if(this.readingCalls--,this.waitingReads.length>0){const _=this.waitingReads.shift();this.read(_.lng,_.ns,_.fcName,_.tried,_.wait,_.callback)}if(d&&v&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,t,r,n,o+1,l*2,c)},l);return}c(d,v)},m=this.backend[n].bind(this.backend);if(m.length===2){try{const d=m(t,r);d&&typeof d.then=="function"?d.then(v=>h(null,v)).catch(h):h(null,d)}catch(d){h(d)}return}return m(t,r,h)}prepareLoading(t,r,n={},o){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();ke(t)&&(t=this.languageUtils.toResolveHierarchy(t)),ke(r)&&(r=[r]);const l=this.queueLoad(t,r,n,o);if(!l.toLoad.length)return l.pending.length||o(),null;l.toLoad.forEach(c=>{this.loadOne(c)})}load(t,r,n){this.prepareLoading(t,r,{},n)}reload(t,r,n){this.prepareLoading(t,r,{reload:!0},n)}loadOne(t,r=""){const n=t.split("|"),o=n[0],l=n[1];this.read(o,l,"read",void 0,void 0,(c,h)=>{c&&this.logger.warn(`${r}loading namespace ${l} for language ${o} failed`,c),!c&&h&&this.logger.log(`${r}loaded namespace ${l} for language ${o}`,h),this.loaded(t,c,h)})}saveMissing(t,r,n,o,l,c={},h=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${n}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend?.create){const m={...c,isUpdate:l},d=this.backend.create.bind(this.backend);if(d.length<6)try{let v;d.length===5?v=d(t,r,n,o,m):v=d(t,r,n,o),v&&typeof v.then=="function"?v.then(_=>h(null,_)).catch(h):h(null,v)}catch(v){h(v)}else d(t,r,n,o,h,m)}!t||!t[0]||this.store.addResource(t[0],r,n,o)}}}const Tm=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),ke(e[1])&&(t.defaultValue=e[1]),ke(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const r=e[3]||e[2];Object.keys(r).forEach(n=>{t[n]=r[n]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Bm=e=>(ke(e.ns)&&(e.ns=[e.ns]),ke(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),ke(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e),wa=()=>{},Iw=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(r=>{typeof e[r]=="function"&&(e[r]=e[r].bind(e))})};class Vn extends il{constructor(t={},r){if(super(),this.options=Bm(t),this.services={},this.logger=jr,this.modules={external:[]},Iw(this),r&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,r),this;setTimeout(()=>{this.init(t,r)},0)}}init(t={},r){this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),t.defaultNS==null&&t.ns&&(ke(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const n=Tm();this.options={...n,...this.options,...Bm(t)},this.options.interpolation={...n.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=n.overloadTranslationOptionHandler);const o=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?jr.init(o(this.modules.logger),this.options):jr.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=Ow;const v=new Rm(this.options);this.store=new Nm(this.options.resources,this.options);const _=this.services;_.logger=jr,_.resourceStore=this.store,_.languageUtils=v,_.pluralResolver=new jw(v,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),d&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(_.formatter=o(d),_.formatter.init&&_.formatter.init(_,this.options),this.options.interpolation.format=_.formatter.format.bind(_.formatter)),_.interpolator=new Mm(this.options),_.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},_.backendConnector=new Bw(o(this.modules.backend),_.resourceStore,_,this.options),_.backendConnector.on("*",(b,...S)=>{this.emit(b,...S)}),this.modules.languageDetector&&(_.languageDetector=o(this.modules.languageDetector),_.languageDetector.init&&_.languageDetector.init(_,this.options.detection,this.options)),this.modules.i18nFormat&&(_.i18nFormat=o(this.modules.i18nFormat),_.i18nFormat.init&&_.i18nFormat.init(this)),this.translator=new qa(this.services,this.options),this.translator.on("*",(b,...S)=>{this.emit(b,...S)}),this.modules.external.forEach(b=>{b.init&&b.init(this)})}if(this.format=this.options.interpolation.format,r||(r=wa),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=(...v)=>this.store[d](...v)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=(...v)=>(this.store[d](...v),this)});const h=Dn(),m=()=>{const d=(v,_)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),h.resolve(_),r(v,_)};if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initAsync?m():setTimeout(m,0),h}loadResources(t,r=wa){let n=r;const o=ke(t)?t:this.language;if(typeof t=="function"&&(n=t),!this.options.resources||this.options.partialBundledLanguages){if(o?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const l=[],c=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(d=>{d!=="cimode"&&l.indexOf(d)<0&&l.push(d)})};o?c(o):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(m=>c(m)),this.options.preload?.forEach?.(h=>c(h)),this.services.backendConnector.load(l,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(h)})}else n(null)}reloadResources(t,r,n){const o=Dn();return typeof t=="function"&&(n=t,t=void 0),typeof r=="function"&&(n=r,r=void 0),t||(t=this.languages),r||(r=this.options.ns),n||(n=wa),this.services.backendConnector.reload(t,r,l=>{o.resolve(),n(l)}),o}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&E_.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let r=0;r<this.languages.length;r++){const n=this.languages[r];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,r){this.isLanguageChangingTo=t;const n=Dn();this.emit("languageChanging",t);const o=h=>{this.language=h,this.languages=this.services.languageUtils.toResolveHierarchy(h),this.resolvedLanguage=void 0,this.setResolvedLanguage(h)},l=(h,m)=>{m?this.isLanguageChangingTo===t&&(o(m),this.translator.changeLanguage(m),this.isLanguageChangingTo=void 0,this.emit("languageChanged",m),this.logger.log("languageChanged",m)):this.isLanguageChangingTo=void 0,n.resolve((...d)=>this.t(...d)),r&&r(h,(...d)=>this.t(...d))},c=h=>{!t&&!h&&this.services.languageDetector&&(h=[]);const m=ke(h)?h:h&&h[0],d=this.store.hasLanguageSomeTranslations(m)?m:this.services.languageUtils.getBestMatchFromCodes(ke(h)?[h]:h);d&&(this.language||o(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector?.cacheUserLanguage?.(d)),this.loadResources(d,v=>{l(v,d)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(t),n}getFixedT(t,r,n){const o=(l,c,...h)=>{let m;typeof c!="object"?m=this.options.overloadTranslationOptionHandler([l,c].concat(h)):m={...c},m.lng=m.lng||o.lng,m.lngs=m.lngs||o.lngs,m.ns=m.ns||o.ns,m.keyPrefix!==""&&(m.keyPrefix=m.keyPrefix||n||o.keyPrefix);const d=this.options.keySeparator||".";let v;return m.keyPrefix&&Array.isArray(l)?v=l.map(_=>(typeof _=="function"&&(_=Wu(_,{...this.options,...c})),`${m.keyPrefix}${d}${_}`)):(typeof l=="function"&&(l=Wu(l,{...this.options,...c})),v=m.keyPrefix?`${m.keyPrefix}${d}${l}`:l),this.t(v,m)};return ke(t)?o.lng=t:o.lngs=t,o.ns=r,o.keyPrefix=n,o}t(...t){return this.translator?.translate(...t)}exists(...t){return this.translator?.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,r={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=r.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,l=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const c=(h,m)=>{const d=this.services.backendConnector.state[`${h}|${m}`];return d===-1||d===0||d===2};if(r.precheck){const h=r.precheck(this,c);if(h!==void 0)return h}return!!(this.hasResourceBundle(n,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(n,t)&&(!o||c(l,t)))}loadNamespaces(t,r){const n=Dn();return this.options.ns?(ke(t)&&(t=[t]),t.forEach(o=>{this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}),this.loadResources(o=>{n.resolve(),r&&r(o)}),n):(r&&r(),Promise.resolve())}loadLanguages(t,r){const n=Dn();ke(t)&&(t=[t]);const o=this.options.preload||[],l=t.filter(c=>o.indexOf(c)<0&&this.services.languageUtils.isSupportedCode(c));return l.length?(this.options.preload=o.concat(l),this.loadResources(c=>{n.resolve(),r&&r(c)}),n):(r&&r(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";try{const o=new Intl.Locale(t);if(o&&o.getTextInfo){const l=o.getTextInfo();if(l&&l.direction)return l.direction}}catch{}const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services?.languageUtils||new Rm(Tm());return t.toLowerCase().indexOf("-latn")>1?"ltr":r.indexOf(n.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},r){const n=new Vn(t,r);return n.createInstance=Vn.createInstance,n}cloneInstance(t={},r=wa){const n=t.forkResourceStore;n&&delete t.forkResourceStore;const o={...this.options,...t,isClone:!0},l=new Vn(o);if((t.debug!==void 0||t.prefix!==void 0)&&(l.logger=l.logger.clone(t)),["store","services","language"].forEach(h=>{l[h]=this[h]}),l.services={...this.services},l.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},n){const h=Object.keys(this.store.data).reduce((m,d)=>(m[d]={...this.store.data[d]},m[d]=Object.keys(m[d]).reduce((v,_)=>(v[_]={...m[d][_]},v),m[d]),m),{});l.store=new Nm(h,o),l.services.resourceStore=l.store}return t.interpolation&&(l.services.interpolator=new Mm(o)),l.translator=new qa(l.services,o),l.translator.on("*",(h,...m)=>{l.emit(h,...m)}),l.init(o,r),l.translator.options=o,l.translator.backendConnector.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ot=Vn.createInstance();Ot.createInstance;Ot.dir;Ot.init;Ot.loadResources;Ot.reloadResources;Ot.use;Ot.changeLanguage;Ot.getFixedT;Ot.t;Ot.exists;Ot.setDefaultNamespace;Ot.hasLoadedNamespace;Ot.loadNamespaces;Ot.loadLanguages;const Aw=(e,t,r,n)=>{const o=[r,{code:t,...n||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(o,"warn","react-i18next::",!0);Gs(o[0])&&(o[0]=`react-i18next:: ${o[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...o):console?.warn&&console.warn(...o)},Im={},P_=(e,t,r,n)=>{Gs(r)&&Im[r]||(Gs(r)&&(Im[r]=new Date),Aw(e,t,r,n))},R_=(e,t)=>()=>{if(e.isInitialized)t();else{const r=()=>{setTimeout(()=>{e.off("initialized",r)},0),t()};e.on("initialized",r)}},Uu=(e,t,r)=>{e.loadNamespaces(t,R_(e,r))},Am=(e,t,r,n)=>{if(Gs(r)&&(r=[r]),e.options.preload&&e.options.preload.indexOf(t)>-1)return Uu(e,r,n);r.forEach(o=>{e.options.ns.indexOf(o)<0&&e.options.ns.push(o)}),e.loadLanguages(t,R_(e,n))},Fw=(e,t,r={})=>!t.languages||!t.languages.length?(P_(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:r.lng,precheck:(n,o)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!o(n.isLanguageChangingTo,e))return!1}}),Gs=e=>typeof e=="string",zw=e=>typeof e=="object"&&e!==null,$w=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Hw={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},Ww=e=>Hw[e],Uw=e=>e.replace($w,Ww);let Ku={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Uw,transDefaultProps:void 0};const Kw=(e={})=>{Ku={...Ku,...e}},Vw=()=>Ku;let L_;const qw=e=>{L_=e},Qw=()=>L_,Yw={type:"3rdParty",init(e){Kw(e.options.react),qw(e)}},Gw=C.createContext();class Xw{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var mu={exports:{}},gu={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fm;function Jw(){if(Fm)return gu;Fm=1;var e=tl();function t(_,x){return _===x&&(_!==0||1/_===1/x)||_!==_&&x!==x}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,o=e.useEffect,l=e.useLayoutEffect,c=e.useDebugValue;function h(_,x){var b=x(),S=n({inst:{value:b,getSnapshot:x}}),w=S[0].inst,E=S[1];return l(function(){w.value=b,w.getSnapshot=x,m(w)&&E({inst:w})},[_,b,x]),o(function(){return m(w)&&E({inst:w}),_(function(){m(w)&&E({inst:w})})},[_]),c(b),b}function m(_){var x=_.getSnapshot;_=_.value;try{var b=x();return!r(_,b)}catch{return!0}}function d(_,x){return x()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:h;return gu.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:v,gu}var zm;function Zw(){return zm||(zm=1,mu.exports=Jw()),mu.exports}var e1=Zw();const t1=(e,t)=>Gs(t)?t:zw(t)&&Gs(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,r1={t:t1,ready:!1},s1=()=>()=>{},$i=(e,t={})=>{const{i18n:r}=t,{i18n:n,defaultNS:o}=C.useContext(Gw)||{},l=r||n||Qw();l&&!l.reportNamespaces&&(l.reportNamespaces=new Xw),l||P_(l,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const c=C.useMemo(()=>({...Vw(),...l?.options?.react,...t}),[l,t]),{useSuspense:h,keyPrefix:m}=c,d=o||l?.options?.defaultNS,v=Gs(d)?[d]:d||["translation"],_=C.useMemo(()=>v,v);l?.reportNamespaces?.addUsedNamespaces?.(_);const x=C.useRef(0),b=C.useCallback(te=>{if(!l)return s1;const{bindI18n:T,bindI18nStore:W}=c,K=()=>{x.current+=1,te()};return T&&l.on(T,K),W&&l.store.on(W,K),()=>{T&&T.split(" ").forEach(F=>l.off(F,K)),W&&W.split(" ").forEach(F=>l.store.off(F,K))}},[l,c]),S=C.useRef(),w=C.useCallback(()=>{if(!l)return r1;const te=!!(l.isInitialized||l.initializedStoreOnce)&&_.every(O=>Fw(O,l,c)),T=t.lng||l.language,W=x.current,K=S.current;if(K&&K.ready===te&&K.lng===T&&K.keyPrefix===m&&K.revision===W)return K;const Y={t:l.getFixedT(T,c.nsMode==="fallback"?_:_[0],m),ready:te,lng:T,keyPrefix:m,revision:W};return S.current=Y,Y},[l,_,m,c,t.lng]),[E,M]=C.useState(0),{t:P,ready:j}=e1.useSyncExternalStore(b,w,w);C.useEffect(()=>{if(l&&!j&&!h){const te=()=>M(T=>T+1);t.lng?Am(l,t.lng,_,te):Uu(l,_,te)}},[l,t.lng,_,j,h,E]);const A=l||{},U=C.useRef(null),V=C.useRef(),Z=te=>{const T=Object.getOwnPropertyDescriptors(te);T.__original&&delete T.__original;const W=Object.create(Object.getPrototypeOf(te),T);if(!Object.prototype.hasOwnProperty.call(W,"__original"))try{Object.defineProperty(W,"__original",{value:te,writable:!1,enumerable:!1,configurable:!1})}catch{}return W},le=C.useMemo(()=>{const te=A,T=te?.language;let W=te;te&&(U.current&&U.current.__original===te?V.current!==T?(W=Z(te),U.current=W,V.current=T):W=U.current:(W=Z(te),U.current=W,V.current=T));const K=[P,W,j];return K.t=P,K.i18n=W,K.ready=j,K},[P,A,j,A.resolvedLanguage,A.language,A.languages]);if(l&&h&&!j)throw new Promise(te=>{const T=()=>te();t.lng?Am(l,t.lng,_,T):Uu(l,_,T)});return le};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),j_=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var n1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=C.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:o="",children:l,iconNode:c,...h},m)=>C.createElement("svg",{ref:m,...n1,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:j_("lucide",o),...h},[...c.map(([d,v])=>C.createElement(d,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=(e,t)=>{const r=C.forwardRef(({className:n,...o},l)=>C.createElement(o1,{ref:l,iconNode:t,className:j_(`lucide-${i1(e)}`,n),...o}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=ye("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=ye("AppWindow",[["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}],["path",{d:"M10 4v4",key:"pp8u80"}],["path",{d:"M2 8h20",key:"d11cs7"}],["path",{d:"M6 4v4",key:"1svtjw"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=ye("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=ye("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=ye("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=ye("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=ye("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=ye("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=ye("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=ye("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=ye("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=ye("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=ye("Columns2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=ye("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=ye("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=ye("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=ye("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=ye("FilePen",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=ye("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_=ye("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=ye("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=ye("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=ye("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=ye("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=ye("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=ye("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=ye("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=ye("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=ye("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=ye("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=ye("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=ye("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=ye("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=ye("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=ye("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=ye("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=ye("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=ye("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=ye("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=ye("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),De="";async function $_(){const e=await fetch(`${De}/api/runs`);if(!e.ok)throw new Error("Failed to fetch runs");return e.json()}async function Vu(e){const t=await fetch(`${De}/api/runs/${e}`);if(!t.ok)throw new Error("Failed to fetch run");return t.json()}async function H_(e,t){const r=typeof e=="string"?{goal:e,repoPath:t}:e,n=await fetch(`${De}/api/runs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({goal:r.goal,repo_path:r.repoPath,project_id:r.projectId,mode:r.mode||"implementation"})});if(!n.ok)throw new Error("Failed to create run");return n.json()}async function qh(){const e=await fetch(`${De}/api/projects`);if(!e.ok)throw new Error("Failed to fetch projects");return e.json()}async function P1(e){const t=await fetch(`${De}/api/projects/${e}`);if(!t.ok)throw new Error("Failed to fetch project");return t.json()}async function R1(e){const t=await fetch(`${De}/api/projects`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create project");return t.json()}async function L1(e){if(!(await fetch(`${De}/api/projects/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete project")}async function Oa(e,t){const r=new URL(`${De}/api/logs/${e}`,window.location.origin),n=await fetch(r.toString());if(!n.ok)throw new Error("Failed to fetch logs");return n.json()}async function j1(){const e=await fetch(`${De}/api/sessions/orphaned`);if(!e.ok)throw new Error("Failed to fetch orphaned sessions");return e.json()}async function D1(e){if(!(await fetch(`${De}/api/sessions/orphaned/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete orphaned session")}async function M1(){const e=await fetch(`${De}/api/sessions/parallel`);if(!e.ok)throw new Error("Failed to fetch parallel sessions");return e.json()}class W_ extends Error{constructor(){super("Sessions were modified by another request"),this.name="ParallelSessionsConflictError"}}async function O1(e,t){const r=await fetch(`${De}/api/sessions/parallel`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessions:e,version:t})});if(r.status===409)throw new W_;if(!r.ok)throw new Error("Failed to save parallel sessions");return r.json()}async function T1(){const e=await fetch(`${De}/api/sessions/shell-tabs`);if(!e.ok)throw new Error("Failed to fetch shell tabs");return e.json()}async function B1(e,t){if(!(await fetch(`${De}/api/sessions/shell-tabs`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({tabs:e,activeTabId:t})})).ok)throw new Error("Failed to save shell tabs")}async function U_(){const e=await fetch(`${De}/health`);if(!e.ok)throw new Error("Failed to fetch health");return e.json()}function I1(e,t,r){const n=new URL(`${De}/api/events`,window.location.origin);e&&n.searchParams.set("run_id",e);const o=new EventSource(n.toString());let l=!1;return o.onmessage=c=>{if(!l)try{const h=JSON.parse(c.data);h.type!=="connected"&&t(h)}catch(h){console.error("Failed to parse SSE message:",h)}},o.onerror=c=>{console.error("SSE error:",c),l||(l=!0,o.close())},()=>{l||(l=!0,o.close())}}async function K_(){const e=await fetch(`${De}/api/settings`);if(!e.ok)throw new Error("Failed to fetch settings");return e.json()}async function V_(e){const t=await fetch(`${De}/api/settings`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update settings");return t.json()}async function q_(){const e=await fetch(`${De}/api/copilot/status`);if(!e.ok)throw new Error("Failed to fetch copilot status");return e.json()}async function A1(){const e=await fetch(`${De}/api/copilot/models`);if(!e.ok)throw new Error("Failed to fetch copilot models");return e.json()}async function F1(e,t,r=!1){const n=await fetch(`${De}/api/files/list`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,cwd:t,recursive:r})});if(!n.ok)throw new Error("Failed to list files");return n.json()}async function z1(e,t){const r=await fetch(`${De}/api/files/read`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,cwd:t})});if(!r.ok)throw new Error("Failed to read file");return r.json()}async function Hm(e,t,r){const n=await fetch(`${De}/api/files/write`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,content:t,cwd:r})});if(!n.ok)throw new Error("Failed to write file");return n.json()}async function $1(e,t){const r=await fetch(`${De}/api/files/mkdir`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,cwd:t})});if(!r.ok)throw new Error("Failed to create directory");return r.json()}async function H1(e,t){const r=await fetch(`${De}/api/files/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,cwd:t})});if(!r.ok)throw new Error("Failed to delete file");return r.json()}async function W1(e){const t=await fetch(`${De}/api/files/browse`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e})});if(!t.ok){const r=await t.json().catch(()=>({error:{message:"Failed to browse directory"}}));throw new Error(r.error?.message||"Failed to browse directory")}return t.json()}async function U1(){const e=await fetch(`${De}/api/desktop/applications`);if(!e.ok)throw new Error("Failed to fetch applications");return e.json()}async function K1(e){const t=await fetch(`${De}/api/desktop/applications/${e}/focus`,{method:"POST"});if(!t.ok)throw new Error("Failed to focus application");return t.json()}async function V1(e,t){const r=await fetch(`${De}/api/runs/${e}/message`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t})});if(!r.ok){const n=await r.json().catch(()=>({error:{message:"Unknown error"}}));throw new Error(n.error?.message||"Failed to send message")}return r.json()}async function Q_(e){const t=await fetch(`${De}/api/runs/${e}/conversation`);if(t.status===404)return null;if(!t.ok)throw new Error("Failed to fetch conversation");return t.json()}async function q1(e,t){const r=await fetch(`${De}/api/direct-executor/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({executor_type:e,cwd:t})});if(!r.ok)throw new Error("Failed to create executor session");return r.json()}async function Q1(){const e=await fetch(`${De}/api/direct-executor/sessions`);if(!e.ok)throw new Error("Failed to fetch executor sessions");return e.json()}async function Y1(e){if(!(await fetch(`${De}/api/direct-executor/sessions/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete executor session")}function G1(e,t,r,n,o){const l=new AbortController;return fetch(`${De}/api/direct-executor/sessions/${e}/query`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:t}),signal:l.signal}).then(async c=>{if(!c.ok){const v=await c.json().catch(()=>({error:{message:"Unknown error"}}));throw new Error(v.error?.message||"Query failed")}const h=c.body?.getReader(),m=new TextDecoder;if(!h){n?.(new Error("No response body"));return}let d="";for(;;){const{done:v,value:_}=await h.read();if(v)break;d+=m.decode(_,{stream:!0});const x=d.split(`
`);d=x.pop()||"";for(const b of x)if(b.startsWith("data: ")){const S=b.slice(6);try{const w=JSON.parse(S);if(w.type==="done"||w.type==="error"){w.type==="error"&&n?.(new Error(w.message)),o?.();return}w.executor&&w.message&&r(w)}catch{}}}o?.()}).catch(c=>{c.name!=="AbortError"&&n?.(c)}),()=>l.abort()}function Y_(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=Y_(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ge(){for(var e,t,r=0,n="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=Y_(e))&&(n&&(n+=" "),n+=t);return n}const Wm=[{path:"/projects",labelKey:"nav.projects",icon:Kh},{path:"/agents",labelKey:"nav.agents",icon:Uh},{path:"/executor",labelKey:"nav.executor",icon:A_},{path:"/shell",labelKey:"nav.shell",icon:Xs},{path:"/settings",labelKey:"nav.settings",icon:E1}];function X1({children:e}){const{t}=$i(),r=Qr(),{data:n}=yt({queryKey:["health"],queryFn:U_,refetchInterval:3e4});return f.jsxs("div",{className:"min-h-screen bg-slate-50",children:[f.jsxs("aside",{className:"hidden lg:block fixed top-0 left-0 h-full w-64 bg-white border-r border-slate-200 z-40",children:[f.jsxs("div",{className:"h-14 flex items-center px-4 border-b border-slate-200",children:[f.jsx(a1,{className:"text-primary-600",size:24}),f.jsx("h1",{className:"ml-2 font-bold text-slate-800",children:"Tako Agent"})]}),f.jsx("nav",{className:"p-4 space-y-1",children:Wm.map(({path:o,labelKey:l,icon:c})=>f.jsxs(Xn,{to:o,className:ge("flex items-center gap-3 px-3 py-2 rounded-lg transition-colors",r.pathname.startsWith(o)?"bg-primary-50 text-primary-700":"text-slate-600 hover:bg-slate-100"),children:[f.jsx(c,{size:18}),f.jsx("span",{children:t(l)})]},o))}),f.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-slate-200",children:f.jsxs("div",{className:"text-xs text-slate-500 space-y-1",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:ge("w-2 h-2 rounded-full",n?.status==="ok"?"bg-green-500":"bg-red-500")}),f.jsxs("span",{children:["Backend: ",n?.status??"disconnected"]})]}),f.jsxs("div",{className:"text-slate-400",children:["v",n?.version??"?"]})]})})]}),f.jsx("main",{className:"lg:ml-64 pb-16 lg:pb-0 min-h-screen",children:e}),f.jsx("nav",{className:"lg:hidden fixed bottom-0 left-0 right-0 h-14 bg-white border-t border-slate-200 z-50 flex items-center justify-around px-4 safe-area-pb",children:Wm.map(({path:o,icon:l})=>{const c=r.pathname.startsWith(o);return f.jsx(Xn,{to:o,className:ge("flex items-center justify-center p-3 rounded-full transition-colors",c?"text-primary-600 bg-primary-50":"text-slate-400 active:bg-slate-100"),children:f.jsx(l,{size:24,strokeWidth:c?2.5:2})},o)})})]})}function J1({onSelect:e,onCancel:t,initialPath:r}){const{t:n}=$i(),[o,l]=C.useState(r||""),[c,h]=C.useState([]),[m,d]=C.useState(null),[v,_]=C.useState(!0),[x,b]=C.useState(!0),[S,w]=C.useState(null),[E,M]=C.useState(r||""),P=async T=>{b(!0),w(null);try{const W=await W1(T||void 0);l(W.path),h(W.entries),d(W.parent??null),_(W.isRoot),M(W.path)}catch(W){w(W instanceof Error?W.message:"Failed to load directory")}finally{b(!1)}};C.useEffect(()=>{P(r)},[]);const j=T=>{P(T)},A=()=>{m?P(m):v||P()},U=()=>{P()},V=T=>{T.preventDefault(),E.trim()&&P(E.trim())},Z=()=>{o&&e(o)},te=(()=>{if(!o||v)return[];const T=o.includes("\\")||/^[A-Z]:/i.test(o),W=T?"\\":"/",K=o.split(W).filter(Boolean),F=[];if(T&&K[0]){let Y=K[0]+W;F.push({name:K[0],path:Y});for(let O=1;O<K.length;O++)Y=Y+K[O]+(O<K.length-1?W:""),F.push({name:K[O],path:Y})}else{let Y="/";for(let O=0;O<K.length;O++)Y=Y+K[O]+(O<K.length-1?"/":""),F.push({name:K[O],path:Y})}return F})();return f.jsxs("div",{className:"flex flex-col h-[70vh] max-h-[500px]",children:[f.jsx("div",{className:"flex-shrink-0 border-b border-slate-200 p-3",children:f.jsxs("form",{onSubmit:V,className:"flex gap-2",children:[f.jsx("input",{type:"text",value:E,onChange:T=>M(T.target.value),placeholder:n("fileBrowser.pathPlaceholder","Enter path..."),className:"flex-1 px-3 py-2 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),f.jsx("button",{type:"submit",className:"px-3 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors",children:n("common.go","Go")})]})}),f.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1 px-3 py-2 bg-slate-50 border-b border-slate-200 overflow-x-auto",children:[f.jsx("button",{onClick:U,className:"p-1.5 text-slate-500 hover:text-slate-700 hover:bg-slate-200 rounded transition-colors",title:n("fileBrowser.root","Root"),children:f.jsx(x1,{size:16})}),!v&&m!==null&&f.jsx("button",{onClick:A,className:"p-1.5 text-slate-500 hover:text-slate-700 hover:bg-slate-200 rounded transition-colors",title:n("fileBrowser.up","Go up"),children:f.jsx(c1,{size:16})}),f.jsx("div",{className:"flex items-center gap-0.5 text-sm overflow-x-auto",children:te.map((T,W)=>f.jsxs("div",{className:"flex items-center",children:[W>0&&f.jsx(D_,{size:14,className:"text-slate-400 mx-0.5"}),f.jsx("button",{onClick:()=>j(T.path),className:ge("px-1.5 py-0.5 rounded hover:bg-slate-200 transition-colors truncate max-w-[100px]",W===te.length-1?"text-slate-800 font-medium":"text-slate-600"),title:T.path,children:T.name})]},T.path))})]}),f.jsx("div",{className:"flex-1 overflow-y-auto",children:x?f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsx(Ct,{size:24,className:"animate-spin text-primary-600"})}):S?f.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-red-500 p-4",children:[f.jsx(M_,{size:32,className:"mb-2"}),f.jsx("p",{className:"text-sm text-center",children:S}),f.jsx("button",{onClick:()=>P(),className:"mt-3 px-3 py-1.5 text-sm bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200",children:n("fileBrowser.retry","Go to root")})]}):c.length===0?f.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400 p-4",children:[f.jsx(Ks,{size:32,className:"mb-2"}),f.jsx("p",{className:"text-sm",children:n("fileBrowser.empty","No folders found")})]}):f.jsx("div",{className:"divide-y divide-slate-100",children:c.map(T=>f.jsxs("button",{onClick:()=>j(T.path),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-slate-50 active:bg-slate-100 transition-colors text-left",children:[T.isDrive?f.jsx(y1,{size:20,className:"text-slate-500 flex-shrink-0"}):f.jsx(Ks,{size:20,className:"text-amber-500 flex-shrink-0"}),f.jsx("span",{className:"text-sm text-slate-700 truncate",children:T.name})]},T.path))})}),f.jsxs("div",{className:"flex-shrink-0 border-t border-slate-200 p-3 bg-slate-50",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[f.jsx(ks,{size:16,className:"text-primary-600 flex-shrink-0"}),f.jsx("span",{className:"text-sm text-slate-600 truncate flex-1",title:o||n("fileBrowser.noSelection","No selection"),children:o||n("fileBrowser.selectFolder","Select a folder")})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("button",{onClick:t,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 text-slate-600 hover:bg-slate-200 rounded-lg transition-colors",children:[f.jsx(al,{size:16}),n("common.cancel")]}),f.jsxs("button",{onClick:Z,disabled:!o||v,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[f.jsx(Oi,{size:16}),n("fileBrowser.select","Select")]})]})]})]})}function Z1({project:e,onDelete:t}){const{t:r}=$i();return f.jsx(Xn,{to:`/projects/${e.project_id}`,className:"block bg-white rounded-xl border border-slate-200 p-4 sm:p-5 hover:shadow-lg hover:border-primary-300 active:bg-slate-50 transition-all group",children:f.jsxs("div",{className:"flex items-start justify-between gap-2 sm:gap-3",children:[f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(Kh,{size:20,className:"text-primary-500 flex-shrink-0"}),f.jsx("h3",{className:"font-semibold text-slate-800 truncate text-base sm:text-lg",children:e.name})]}),e.description&&f.jsx("p",{className:"text-sm text-slate-500 line-clamp-2 mb-3",children:e.description}),f.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4 text-xs text-slate-400",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(g1,{size:12}),f.jsx("span",{className:"truncate max-w-[150px] sm:max-w-[200px]",title:e.repo_path,children:e.repo_path.split(/[/\\]/).pop()})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(h1,{size:12}),f.jsx("span",{children:new Date(e.created_at).toLocaleDateString()})]})]})]}),f.jsx("button",{onClick:n=>{n.preventDefault(),n.stopPropagation(),t()},className:"p-2.5 sm:p-2 text-slate-400 sm:text-slate-300 hover:text-red-500 hover:bg-red-50 active:bg-red-100 rounded-lg transition-colors sm:opacity-0 sm:group-hover:opacity-100",title:r("common.delete"),children:f.jsx(ol,{size:18,className:"sm:w-4 sm:h-4"})})]})})}function eb(){const{t:e}=$i(),t=ei(),[r,n]=C.useState(!1),[o,l]=C.useState(!1),[c,h]=C.useState(""),[m,d]=C.useState(""),[v,_]=C.useState(""),{data:x,isLoading:b,error:S}=yt({queryKey:["projects"],queryFn:qh,refetchInterval:1e4}),w=hr({mutationFn:({name:j,description:A,repo_path:U})=>R1({name:j,description:A,repo_path:U}),onSuccess:()=>{t.invalidateQueries({queryKey:["projects"]}),n(!1),h(""),d(""),_("")}}),E=hr({mutationFn:L1,onSuccess:()=>{t.invalidateQueries({queryKey:["projects"]})}}),M=()=>{l(!0)},P=j=>{if(_(j),l(!1),!c){const A=j.split(/[/\\]/).pop()||"";h(A)}};return f.jsxs("div",{className:"mx-auto max-w-4xl px-4 sm:px-6 py-4 sm:py-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6 sm:mb-8",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-slate-800",children:e("projects.title")}),f.jsx("p",{className:"text-slate-500 mt-1 text-sm sm:text-base",children:e("projects.subtitle")})]}),f.jsxs("button",{onClick:()=>n(!0),className:"flex items-center justify-center gap-2 px-4 py-3 sm:py-2.5 bg-primary-600 text-white rounded-xl hover:bg-primary-700 active:bg-primary-800 transition-colors shadow-sm w-full sm:w-auto",children:[f.jsx(Vs,{size:18}),e("projects.newProject")]})]}),r&&f.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-end sm:items-center justify-center z-50 p-0 sm:p-4",children:f.jsxs("div",{className:"bg-white rounded-t-2xl sm:rounded-2xl shadow-xl w-full sm:max-w-md p-5 sm:p-6 max-h-[90vh] overflow-y-auto",children:[f.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-4",children:e("projects.newProject")}),f.jsxs("form",{onSubmit:j=>{j.preventDefault(),c.trim()&&v.trim()&&w.mutate({name:c.trim(),description:m.trim()||void 0,repo_path:v.trim()})},children:[f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:e("projects.name")}),f.jsx("input",{type:"text",value:c,onChange:j=>h(j.target.value),placeholder:e("projects.namePlaceholder"),className:"w-full px-4 py-3 text-base border border-slate-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500",autoFocus:!0,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:e("projects.description")}),f.jsx("textarea",{value:m,onChange:j=>d(j.target.value),placeholder:e("projects.descriptionPlaceholder"),className:"w-full px-4 py-3 text-base border border-slate-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 resize-none",rows:2})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[f.jsx(ks,{size:14,className:"inline mr-1.5"}),e("projects.repoPath")]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{type:"text",value:v,onChange:j=>_(j.target.value),placeholder:e("projects.repoPathPlaceholder"),className:"flex-1 px-4 py-3 text-base border border-slate-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0}),f.jsx("button",{type:"button",onClick:M,className:"px-4 py-3 bg-slate-100 text-slate-700 rounded-xl hover:bg-slate-200 active:bg-slate-300 transition-colors",title:e("projects.browse"),children:f.jsx(ks,{size:18})})]})]})]}),f.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-3 mt-6",children:[f.jsx("button",{type:"button",onClick:()=>{n(!1),h(""),d(""),_("")},className:"px-4 py-3 sm:py-2.5 text-slate-600 hover:bg-slate-100 active:bg-slate-200 rounded-xl transition-colors",children:e("common.cancel")}),f.jsxs("button",{type:"submit",disabled:w.isPending||!c.trim()||!v.trim(),className:"flex items-center justify-center gap-2 px-5 py-3 sm:py-2.5 bg-primary-600 text-white rounded-xl hover:bg-primary-700 active:bg-primary-800 disabled:opacity-50 transition-colors",children:[w.isPending&&f.jsx(Ct,{size:18,className:"animate-spin"}),e("common.create")]})]})]})]})}),o&&f.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-end sm:items-center justify-center z-[60] p-0 sm:p-4",children:f.jsxs("div",{className:"bg-white rounded-t-2xl sm:rounded-2xl shadow-xl w-full sm:max-w-lg overflow-hidden",children:[f.jsx("div",{className:"px-5 py-4 border-b border-slate-200",children:f.jsx("h2",{className:"text-lg font-semibold",children:e("fileBrowser.title","Select Folder")})}),f.jsx(J1,{onSelect:P,onCancel:()=>l(!1),initialPath:v})]})}),b?f.jsx("div",{className:"flex items-center justify-center py-16",children:f.jsx(Ct,{size:32,className:"animate-spin text-primary-600"})}):S?f.jsxs("div",{className:"text-center py-16 text-red-600",children:[e("common.error"),": ",S.message]}):x?.projects.length===0?f.jsxs("div",{className:"text-center py-16",children:[f.jsx(Kh,{size:48,className:"mx-auto text-slate-300 mb-4"}),f.jsx("p",{className:"text-slate-500 mb-2",children:e("projects.noProjects")}),f.jsx("p",{className:"text-sm text-slate-400",children:e("projects.createFirst")})]}):f.jsx("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2",children:x?.projects.map(j=>f.jsx(Z1,{project:j,onDelete:()=>E.mutate(j.project_id)},j.project_id))})]})}function Um(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tb(e){if(Array.isArray(e))return e}function rb(e,t,r){return(t=cb(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sb(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,l,c,h=[],m=!0,d=!1;try{if(l=(r=r.call(e)).next,t!==0)for(;!(m=(n=l.call(r)).done)&&(h.push(n.value),h.length!==t);m=!0);}catch(v){d=!0,o=v}finally{try{if(!m&&r.return!=null&&(c=r.return(),Object(c)!==c))return}finally{if(d)throw o}}return h}}function ib(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Km(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Vm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Km(Object(r),!0).forEach(function(n){rb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Km(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nb(e,t){if(e==null)return{};var r,n,o=ob(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function ob(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ab(e,t){return tb(e)||sb(e,t)||ub(e,t)||ib()}function lb(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cb(e){var t=lb(e,"string");return typeof t=="symbol"?t:t+""}function ub(e,t){if(e){if(typeof e=="string")return Um(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Um(e,t):void 0}}function hb(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Qm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qm(Object(r),!0).forEach(function(n){hb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function db(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return t.reduceRight(function(o,l){return l(o)},n)}}function Fn(e){return function t(){for(var r=this,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return o.length>=e.length?e.apply(this,o):function(){for(var c=arguments.length,h=new Array(c),m=0;m<c;m++)h[m]=arguments[m];return t.apply(r,[].concat(o,h))}}}function Qa(e){return{}.toString.call(e).includes("Object")}function fb(e){return!Object.keys(e).length}function Zn(e){return typeof e=="function"}function pb(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function mb(e,t){return Qa(t)||bs("changeType"),Object.keys(t).some(function(r){return!pb(e,r)})&&bs("changeField"),t}function gb(e){Zn(e)||bs("selectorType")}function _b(e){Zn(e)||Qa(e)||bs("handlerType"),Qa(e)&&Object.values(e).some(function(t){return!Zn(t)})&&bs("handlersType")}function vb(e){e||bs("initialIsRequired"),Qa(e)||bs("initialType"),fb(e)&&bs("initialContent")}function yb(e,t){throw new Error(e[t]||e.default)}var xb={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},bs=Fn(yb)(xb),ba={changes:mb,selector:gb,handler:_b,initial:vb};function Sb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ba.initial(e),ba.handler(t);var r={current:e},n=Fn(Cb)(r,t),o=Fn(bb)(r),l=Fn(ba.changes)(e),c=Fn(wb)(r);function h(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(v){return v};return ba.selector(d),d(r.current)}function m(d){db(n,o,l,c)(d)}return[h,m]}function wb(e,t){return Zn(t)?t(e.current):t}function bb(e,t){return e.current=Qm(Qm({},e.current),t),t}function Cb(e,t,r){return Zn(t)?t(e.current):Object.keys(r).forEach(function(n){var o;return(o=t[n])===null||o===void 0?void 0:o.call(t,e.current[n])}),r}var kb={create:Sb},Eb={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function Nb(e){return function t(){for(var r=this,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return o.length>=e.length?e.apply(this,o):function(){for(var c=arguments.length,h=new Array(c),m=0;m<c;m++)h[m]=arguments[m];return t.apply(r,[].concat(o,h))}}}function Pb(e){return{}.toString.call(e).includes("Object")}function Rb(e){return e||Ym("configIsRequired"),Pb(e)||Ym("configType"),e.urls?(Lb(),{paths:{vs:e.urls.monacoBase}}):e}function Lb(){console.warn(G_.deprecation)}function jb(e,t){throw new Error(e[t]||e.default)}var G_={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Ym=Nb(jb)(G_),Db={config:Rb},Mb=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(o){return r.reduceRight(function(l,c){return c(l)},o)}};function X_(e,t){return Object.keys(t).forEach(function(r){t[r]instanceof Object&&e[r]&&Object.assign(t[r],X_(e[r],t[r]))}),Vm(Vm({},e),t)}var Ob={type:"cancelation",msg:"operation is manually canceled"};function vu(e){var t=!1,r=new Promise(function(n,o){e.then(function(l){return t?o(Ob):n(l)}),e.catch(o)});return r.cancel=function(){return t=!0},r}var Tb=["monaco"],Bb=kb.create({config:Eb,isInitialized:!1,resolve:null,reject:null,monaco:null}),J_=ab(Bb,2),no=J_[0],ll=J_[1];function Ib(e){var t=Db.config(e),r=t.monaco,n=nb(t,Tb);ll(function(o){return{config:X_(o.config,n),monaco:r}})}function Ab(){var e=no(function(t){var r=t.monaco,n=t.isInitialized,o=t.resolve;return{monaco:r,isInitialized:n,resolve:o}});if(!e.isInitialized){if(ll({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),vu(yu);if(window.monaco&&window.monaco.editor)return Z_(window.monaco),e.resolve(window.monaco),vu(yu);Mb(Fb,$b)(Hb)}return vu(yu)}function Fb(e){return document.body.appendChild(e)}function zb(e){var t=document.createElement("script");return e&&(t.src=e),t}function $b(e){var t=no(function(n){var o=n.config,l=n.reject;return{config:o,reject:l}}),r=zb("".concat(t.config.paths.vs,"/loader.js"));return r.onload=function(){return e()},r.onerror=t.reject,r}function Hb(){var e=no(function(r){var n=r.config,o=r.resolve,l=r.reject;return{config:n,resolve:o,reject:l}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(r){var n=r.m||r;Z_(n),e.resolve(n)},function(r){e.reject(r)})}function Z_(e){no().monaco||ll({monaco:e})}function Wb(){return no(function(e){var t=e.monaco;return t})}var yu=new Promise(function(e,t){return ll({resolve:e,reject:t})}),ev={config:Ib,init:Ab,__getMonacoInstance:Wb},Ub={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},xu=Ub,Kb={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Vb=Kb;function qb({children:e}){return Us.createElement("div",{style:Vb.container},e)}var Qb=qb,Yb=Qb;function Gb({width:e,height:t,isEditorReady:r,loading:n,_ref:o,className:l,wrapperProps:c}){return Us.createElement("section",{style:{...xu.wrapper,width:e,height:t},...c},!r&&Us.createElement(Yb,null,n),Us.createElement("div",{ref:o,style:{...xu.fullWidth,...!r&&xu.hide},className:l}))}var Xb=Gb,tv=C.memo(Xb);function Jb(e){C.useEffect(e,[])}var rv=Jb;function Zb(e,t,r=!0){let n=C.useRef(!0);C.useEffect(n.current||!r?()=>{n.current=!1}:e,t)}var Xt=Zb;function qn(){}function Di(e,t,r,n){return eC(e,n)||tC(e,t,r,n)}function eC(e,t){return e.editor.getModel(sv(e,t))}function tC(e,t,r,n){return e.editor.createModel(t,r,n?sv(e,n):void 0)}function sv(e,t){return e.Uri.parse(t)}function rC({original:e,modified:t,language:r,originalLanguage:n,modifiedLanguage:o,originalModelPath:l,modifiedModelPath:c,keepCurrentOriginalModel:h=!1,keepCurrentModifiedModel:m=!1,theme:d="light",loading:v="Loading...",options:_={},height:x="100%",width:b="100%",className:S,wrapperProps:w={},beforeMount:E=qn,onMount:M=qn}){let[P,j]=C.useState(!1),[A,U]=C.useState(!0),V=C.useRef(null),Z=C.useRef(null),le=C.useRef(null),te=C.useRef(M),T=C.useRef(E),W=C.useRef(!1);rv(()=>{let O=ev.init();return O.then(B=>(Z.current=B)&&U(!1)).catch(B=>B?.type!=="cancelation"&&console.error("Monaco initialization: error:",B)),()=>V.current?Y():O.cancel()}),Xt(()=>{if(V.current&&Z.current){let O=V.current.getOriginalEditor(),B=Di(Z.current,e||"",n||r||"text",l||"");B!==O.getModel()&&O.setModel(B)}},[l],P),Xt(()=>{if(V.current&&Z.current){let O=V.current.getModifiedEditor(),B=Di(Z.current,t||"",o||r||"text",c||"");B!==O.getModel()&&O.setModel(B)}},[c],P),Xt(()=>{let O=V.current.getModifiedEditor();O.getOption(Z.current.editor.EditorOption.readOnly)?O.setValue(t||""):t!==O.getValue()&&(O.executeEdits("",[{range:O.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),O.pushUndoStop())},[t],P),Xt(()=>{V.current?.getModel()?.original.setValue(e||"")},[e],P),Xt(()=>{let{original:O,modified:B}=V.current.getModel();Z.current.editor.setModelLanguage(O,n||r||"text"),Z.current.editor.setModelLanguage(B,o||r||"text")},[r,n,o],P),Xt(()=>{Z.current?.editor.setTheme(d)},[d],P),Xt(()=>{V.current?.updateOptions(_)},[_],P);let K=C.useCallback(()=>{if(!Z.current)return;T.current(Z.current);let O=Di(Z.current,e||"",n||r||"text",l||""),B=Di(Z.current,t||"",o||r||"text",c||"");V.current?.setModel({original:O,modified:B})},[r,t,o,e,n,l,c]),F=C.useCallback(()=>{!W.current&&le.current&&(V.current=Z.current.editor.createDiffEditor(le.current,{automaticLayout:!0,..._}),K(),Z.current?.editor.setTheme(d),j(!0),W.current=!0)},[_,d,K]);C.useEffect(()=>{P&&te.current(V.current,Z.current)},[P]),C.useEffect(()=>{!A&&!P&&F()},[A,P,F]);function Y(){let O=V.current?.getModel();h||O?.original?.dispose(),m||O?.modified?.dispose(),V.current?.dispose()}return Us.createElement(tv,{width:b,height:x,isEditorReady:P,loading:v,_ref:le,className:S,wrapperProps:w})}var sC=rC;C.memo(sC);function iC(e){let t=C.useRef();return C.useEffect(()=>{t.current=e},[e]),t.current}var nC=iC,Ca=new Map;function oC({defaultValue:e,defaultLanguage:t,defaultPath:r,value:n,language:o,path:l,theme:c="light",line:h,loading:m="Loading...",options:d={},overrideServices:v={},saveViewState:_=!0,keepCurrentModel:x=!1,width:b="100%",height:S="100%",className:w,wrapperProps:E={},beforeMount:M=qn,onMount:P=qn,onChange:j,onValidate:A=qn}){let[U,V]=C.useState(!1),[Z,le]=C.useState(!0),te=C.useRef(null),T=C.useRef(null),W=C.useRef(null),K=C.useRef(P),F=C.useRef(M),Y=C.useRef(),O=C.useRef(n),B=nC(l),G=C.useRef(!1),D=C.useRef(!1);rv(()=>{let k=ev.init();return k.then(I=>(te.current=I)&&le(!1)).catch(I=>I?.type!=="cancelation"&&console.error("Monaco initialization: error:",I)),()=>T.current?X():k.cancel()}),Xt(()=>{let k=Di(te.current,e||n||"",t||o||"",l||r||"");k!==T.current?.getModel()&&(_&&Ca.set(B,T.current?.saveViewState()),T.current?.setModel(k),_&&T.current?.restoreViewState(Ca.get(l)))},[l],U),Xt(()=>{T.current?.updateOptions(d)},[d],U),Xt(()=>{!T.current||n===void 0||(T.current.getOption(te.current.editor.EditorOption.readOnly)?T.current.setValue(n):n!==T.current.getValue()&&(D.current=!0,T.current.executeEdits("",[{range:T.current.getModel().getFullModelRange(),text:n,forceMoveMarkers:!0}]),T.current.pushUndoStop(),D.current=!1))},[n],U),Xt(()=>{let k=T.current?.getModel();k&&o&&te.current?.editor.setModelLanguage(k,o)},[o],U),Xt(()=>{h!==void 0&&T.current?.revealLine(h)},[h],U),Xt(()=>{te.current?.editor.setTheme(c)},[c],U);let Q=C.useCallback(()=>{if(!(!W.current||!te.current)&&!G.current){F.current(te.current);let k=l||r,I=Di(te.current,n||e||"",t||o||"",k||"");T.current=te.current?.editor.create(W.current,{model:I,automaticLayout:!0,...d},v),_&&T.current.restoreViewState(Ca.get(k)),te.current.editor.setTheme(c),h!==void 0&&T.current.revealLine(h),V(!0),G.current=!0}},[e,t,r,n,o,l,d,v,_,c,h]);C.useEffect(()=>{U&&K.current(T.current,te.current)},[U]),C.useEffect(()=>{!Z&&!U&&Q()},[Z,U,Q]),O.current=n,C.useEffect(()=>{U&&j&&(Y.current?.dispose(),Y.current=T.current?.onDidChangeModelContent(k=>{D.current||j(T.current.getValue(),k)}))},[U,j]),C.useEffect(()=>{if(U){let k=te.current.editor.onDidChangeMarkers(I=>{let q=T.current.getModel()?.uri;if(q&&I.find(ie=>ie.path===q.path)){let ie=te.current.editor.getModelMarkers({resource:q});A?.(ie)}});return()=>{k?.dispose()}}return()=>{}},[U,A]);function X(){Y.current?.dispose(),x?_&&Ca.set(l,T.current.saveViewState()):T.current.getModel()?.dispose(),T.current.dispose()}return Us.createElement(tv,{width:b,height:S,isEditorReady:U,loading:m,_ref:W,className:w,wrapperProps:E})}var aC=oC,lC=C.memo(aC),cC=lC;function uC(e){const t=e.split(".").pop()?.toLowerCase()||"";return{ts:"typescript",tsx:"typescript",js:"javascript",jsx:"javascript",json:"json",md:"markdown",html:"html",css:"css",scss:"scss",less:"less",py:"python",rb:"ruby",go:"go",rs:"rust",java:"java",c:"c",cpp:"cpp",h:"c",hpp:"cpp",sh:"shell",bash:"shell",zsh:"shell",yml:"yaml",yaml:"yaml",xml:"xml",sql:"sql",graphql:"graphql",vue:"vue",svelte:"svelte",dockerfile:"dockerfile",makefile:"makefile",gitignore:"plaintext",env:"plaintext"}[t]||"plaintext"}function iv(e){if(e.isDirectory)return f.jsx(Ks,{size:14,className:"text-amber-500 shrink-0"});const t=e.name.split(".").pop()?.toLowerCase()||"",r={ts:"text-blue-500",tsx:"text-blue-500",js:"text-yellow-500",jsx:"text-yellow-500",json:"text-yellow-600",md:"text-slate-500",html:"text-orange-500",css:"text-blue-400",py:"text-green-500",go:"text-cyan-500",rs:"text-orange-600"};return f.jsx(B_,{size:14,className:ge("shrink-0",r[t]||"text-slate-400")})}function nv({nodes:e,onSelect:t,onToggle:r,selectedPath:n,onRefresh:o,onNewFile:l,onNewFolder:c,onDelete:h,level:m=0}){return f.jsx("div",{className:"text-sm",children:e.map(d=>f.jsxs("div",{children:[f.jsxs("div",{className:ge("flex items-center gap-1 px-2 py-1 cursor-pointer hover:bg-slate-100 group",n===d.entry.path&&"bg-primary-50 text-primary-700"),style:{paddingLeft:`${m*12+8}px`},onClick:()=>{d.entry.isDirectory?r(d.entry):t(d.entry)},children:[d.entry.isDirectory&&f.jsx("span",{className:"w-4 h-4 flex items-center justify-center shrink-0",children:d.isLoading?f.jsx(Ct,{size:12,className:"animate-spin text-slate-400"}):d.isExpanded?f.jsx(Jt,{size:12,className:"text-slate-400"}):f.jsx(D_,{size:12,className:"text-slate-400"})}),!d.entry.isDirectory&&f.jsx("span",{className:"w-4 shrink-0"}),iv(d.entry),f.jsx("span",{className:"truncate flex-1 text-slate-700",children:d.entry.name}),f.jsxs("div",{className:"hidden group-hover:flex items-center gap-0.5 shrink-0",children:[d.entry.isDirectory&&f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:v=>{v.stopPropagation(),l(d.entry.path)},className:"p-0.5 hover:bg-slate-200 rounded text-slate-500",title:"New File",children:f.jsx(I_,{size:12})}),f.jsx("button",{onClick:v=>{v.stopPropagation(),c(d.entry.path)},className:"p-0.5 hover:bg-slate-200 rounded text-slate-500",title:"New Folder",children:f.jsx(Ks,{size:12})}),f.jsx("button",{onClick:v=>{v.stopPropagation(),o(d.entry.path)},className:"p-0.5 hover:bg-slate-200 rounded text-slate-500",title:"Refresh",children:f.jsx(Ti,{size:12})})]}),f.jsx("button",{onClick:v=>{v.stopPropagation(),h(d.entry)},className:"p-0.5 hover:bg-red-100 text-red-500 rounded",title:"Delete",children:f.jsx(ol,{size:12})})]})]}),d.entry.isDirectory&&d.isExpanded&&d.children&&f.jsx(nv,{nodes:d.children,onSelect:t,onToggle:r,selectedPath:n,onRefresh:o,onNewFile:l,onNewFolder:c,onDelete:h,level:m+1})]},d.entry.path))})}function hC({files:e,activeFile:t,onSelect:r,onClose:n}){return f.jsx("div",{className:"flex bg-slate-100 border-b border-slate-200 overflow-x-auto",children:e.map(o=>f.jsxs("div",{className:ge("flex items-center gap-2 px-3 py-2 cursor-pointer min-w-0 max-w-[200px] group border-b-2",t===o.path?"bg-white text-slate-800 border-b-primary-500":"bg-slate-50 text-slate-500 hover:bg-slate-100 border-b-transparent"),onClick:()=>r(o.path),children:[iv({name:o.name,isDirectory:!1}),f.jsx("span",{className:"truncate text-sm",children:o.name}),o.isDirty&&f.jsx("span",{className:"w-2 h-2 rounded-full bg-primary-500 shrink-0",title:"Unsaved changes"}),f.jsx("button",{onClick:l=>{l.stopPropagation(),n(o.path)},className:"p-0.5 hover:bg-slate-200 rounded opacity-0 group-hover:opacity-100 transition-opacity shrink-0",children:f.jsx(al,{size:12})})]},o.path))})}function dC(){const{projectId:e}=kS(),t=Ah(),[r,n]=C.useState([]),[o,l]=C.useState(null),[c,h]=C.useState([]),[m,d]=C.useState(null),[v]=C.useState(240),[_,x]=C.useState(null),[b,S]=C.useState(""),w=C.useRef(null),{data:E,isLoading:M,error:P}=yt({queryKey:["project",e],queryFn:()=>P1(e),enabled:!!e}),j=C.useCallback(async(B,G)=>{try{return[...(await F1(B,G)).entries].sort((X,k)=>X.isDirectory!==k.isDirectory?X.isDirectory?-1:1:X.name.localeCompare(k.name)).map(X=>({entry:X,isExpanded:!1,children:X.isDirectory?[]:void 0}))}catch(D){return console.error("Failed to load directory:",D),[]}},[]);C.useEffect(()=>{E?.repo_path&&j(".",E.repo_path).then(n)},[E?.repo_path,j]);const A=C.useCallback(async B=>{if(!E?.repo_path)return;n(Q=>{const X=k=>k.map(I=>I.entry.path===B.path?I.isExpanded?{...I,isExpanded:!1}:I.children?.length?{...I,isExpanded:!0}:{...I,isLoading:!0}:I.children?{...I,children:X(I.children)}:I);return X(Q)});const G=(Q,X)=>{for(const k of Q){if(k.entry.path===X)return k;if(k.children){const I=G(k.children,X);if(I)return I}}return null},D=G(r,B.path);if(!D?.isExpanded&&!D?.children?.length){const Q=await j(B.path,E.repo_path);n(X=>{const k=I=>I.map(q=>q.entry.path===B.path?{...q,isExpanded:!0,isLoading:!1,children:Q}:q.children?{...q,children:k(q.children)}:q);return k(X)})}},[E?.repo_path,r,j]),U=C.useCallback(async B=>{if(!E?.repo_path||B.isDirectory)return;if(c.find(D=>D.path===B.path)){d(B.path),l(B.path);return}try{const D=await z1(B.path,E.repo_path),Q={path:B.path,name:B.name,content:D.content,originalContent:D.content,language:uC(B.path),isDirty:!1};h(X=>[...X,Q]),d(B.path),l(B.path)}catch(D){console.error("Failed to open file:",D)}},[E?.repo_path,c]),V=C.useCallback(B=>{if(!(c.find(D=>D.path===B)?.isDirty&&!confirm("You have unsaved changes. Close anyway?"))&&(h(D=>D.filter(Q=>Q.path!==B)),m===B)){const D=c.filter(Q=>Q.path!==B);d(D.length>0?D[D.length-1].path:null)}},[c,m]),Z=C.useCallback(B=>{!m||B===void 0||h(G=>G.map(D=>D.path===m?{...D,content:B,isDirty:B!==D.originalContent}:D))},[m]),le=hr({mutationFn:async({path:B,content:G})=>{if(!E?.repo_path)throw new Error("No repo path");return Hm(B,G,E.repo_path)},onSuccess:(B,G)=>{h(D=>D.map(Q=>Q.path===G.path?{...Q,originalContent:G.content,isDirty:!1}:Q))}}),te=C.useCallback(()=>{const B=c.find(G=>G.path===m);!B||!B.isDirty||le.mutate({path:B.path,content:B.content})},[c,m,le]);C.useEffect(()=>{const B=G=>{(G.ctrlKey||G.metaKey)&&G.key==="s"&&(G.preventDefault(),te())};return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[te]);const T=C.useCallback(async B=>{if(!E?.repo_path)return;const G=await j(B,E.repo_path);n(D=>{const Q=X=>X.map(k=>k.entry.path===B?{...k,children:G,isExpanded:!0}:k.children?{...k,children:Q(k.children)}:k);return B==="."?G:Q(D)})},[E?.repo_path,j]),W=C.useCallback(async()=>{if(!_||!b.trim()||!E?.repo_path)return;const B=_.parentPath==="."?b:`${_.parentPath}/${b}`;try{_.type==="folder"?await $1(B,E.repo_path):await Hm(B,"",E.repo_path),await T(_.parentPath),x(null),S("")}catch(G){console.error("Failed to create item:",G)}},[_,b,E?.repo_path,T]),K=hr({mutationFn:async B=>{if(!E?.repo_path)throw new Error("No repo path");return H1(B.path,E.repo_path)},onSuccess:(B,G)=>{c.some(Q=>Q.path===G.path)&&V(G.path);const D=G.path.includes("/")?G.path.substring(0,G.path.lastIndexOf("/")):".";T(D)}}),F=C.useCallback(B=>{confirm(`Delete "${B.name}"?`)&&K.mutate(B)},[K]);C.useEffect(()=>{_&&w.current&&w.current.focus()},[_]);const Y=C.useCallback(()=>{c.some(G=>G.isDirty)&&!confirm("You have unsaved changes. Leave anyway?")||t("/projects")},[c,t]),O=c.find(B=>B.path===m);return M?f.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:f.jsx(Ct,{className:"animate-spin text-primary-600",size:32})}):P||!E?f.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-50",children:[f.jsx(T_,{className:"text-red-400 mb-4",size:48}),f.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Project not found"}),f.jsx("button",{onClick:()=>t("/projects"),className:"text-primary-600 hover:underline text-sm",children:"Go back"})]}):f.jsxs("div",{className:"h-screen flex flex-col bg-slate-50",children:[f.jsxs("header",{className:"h-14 bg-white border-b border-slate-200 flex items-center px-4 shrink-0",children:[f.jsxs("button",{onClick:Y,className:"flex items-center gap-2 px-3 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:[f.jsx(Wh,{size:18}),f.jsx("span",{className:"text-sm font-medium",children:"Back"})]}),f.jsx("div",{className:"mx-4 h-6 w-px bg-slate-200"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h1",{className:"text-sm font-semibold text-slate-800 truncate",children:E.name}),f.jsx("p",{className:"text-xs text-slate-400 font-mono truncate",children:E.repo_path})]}),O?.isDirty&&f.jsxs("button",{onClick:te,disabled:le.isPending,className:"flex items-center gap-1.5 px-3 py-1.5 bg-primary-600 hover:bg-primary-700 text-white text-sm font-medium rounded-lg transition-colors disabled:opacity-50",children:[le.isPending?f.jsx(Ct,{size:14,className:"animate-spin"}):null,"Save"]})]}),f.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f.jsxs("aside",{className:"bg-white border-r border-slate-200 flex flex-col shrink-0",style:{width:v},children:[f.jsxs("div",{className:"h-10 px-4 flex items-center justify-between text-xs font-semibold text-slate-500 uppercase tracking-wider border-b border-slate-100",children:[f.jsx("span",{children:"Explorer"}),f.jsxs("div",{className:"flex items-center gap-0.5",children:[f.jsx("button",{onClick:()=>x({type:"file",parentPath:"."}),className:"p-1 hover:bg-slate-100 rounded text-slate-500",title:"New File",children:f.jsx(Vs,{size:14})}),f.jsx("button",{onClick:()=>x({type:"folder",parentPath:"."}),className:"p-1 hover:bg-slate-100 rounded text-slate-500",title:"New Folder",children:f.jsx(Ks,{size:14})}),f.jsx("button",{onClick:()=>T("."),className:"p-1 hover:bg-slate-100 rounded text-slate-500",title:"Refresh",children:f.jsx(Ti,{size:14})})]})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto",children:[_?.parentPath==="."&&f.jsxs("div",{className:"px-2 py-1 flex items-center gap-1",style:{paddingLeft:"8px"},children:[_.type==="folder"?f.jsx(Ks,{size:14,className:"text-amber-500 shrink-0"}):f.jsx(B_,{size:14,className:"text-slate-400 shrink-0"}),f.jsx("input",{ref:w,type:"text",value:b,onChange:B=>S(B.target.value),onKeyDown:B=>{B.key==="Enter"&&W(),B.key==="Escape"&&(x(null),S(""))},onBlur:()=>{b.trim()?W():x(null)},className:"flex-1 bg-white border border-primary-500 rounded px-2 py-1 text-sm text-slate-700 outline-none focus:ring-1 focus:ring-primary-500",placeholder:_.type==="folder"?"folder name":"file name"})]}),f.jsx(nv,{nodes:r,onSelect:U,onToggle:A,selectedPath:o,onRefresh:T,onNewFile:B=>x({type:"file",parentPath:B}),onNewFolder:B=>x({type:"folder",parentPath:B}),onDelete:F}),r.length===0&&f.jsxs("div",{className:"text-center py-8 text-slate-400",children:[f.jsx(Ks,{size:32,className:"mx-auto mb-2 opacity-50"}),f.jsx("p",{className:"text-xs",children:"No files found"})]})]})]}),f.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden bg-white",children:[c.length>0&&f.jsx(hC,{files:c,activeFile:m,onSelect:d,onClose:V}),f.jsx("div",{className:"flex-1 overflow-hidden",children:O?f.jsx(cC,{height:"100%",language:O.language,value:O.content,onChange:Z,theme:"vs",options:{fontSize:14,fontFamily:"'Cascadia Code', 'Fira Code', Consolas, 'Courier New', monospace",minimap:{enabled:!0},scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,wordWrap:"off",lineNumbers:"on",renderLineHighlight:"all",smoothScrolling:!0,cursorBlinking:"smooth",cursorSmoothCaretAnimation:"on",padding:{top:8,bottom:8}}}):f.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[f.jsx(I_,{size:64,className:"mb-4 opacity-30"}),f.jsx("p",{className:"text-sm",children:"Select a file to start editing"})]})})]})]}),f.jsxs("div",{className:"h-6 bg-primary-600 flex items-center px-4 text-white text-xs shrink-0",children:[f.jsx("span",{children:O?.language||"Plain Text"}),f.jsx("div",{className:"flex-1"}),O?.isDirty&&f.jsx("span",{className:"mr-4",children:"Modified"}),f.jsx("span",{className:"opacity-75",children:"Ctrl+S to save"})]})]})}function fC({name:e,className:t}){const r=t||"w-4 h-4",n=e.toLowerCase();return n.includes("read")||n.includes("glob")||n.includes("grep")?f.jsx(Ma,{className:r}):n.includes("write")||n.includes("edit")?f.jsx(b1,{className:r}):n.includes("bash")||n.includes("shell")?f.jsx(Xs,{className:r}):n.includes("search")?f.jsx(C1,{className:r}):f.jsx(N1,{className:r})}function pC({message:e}){return f.jsxs("div",{className:"flex gap-3 px-4 py-4",children:[f.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center shrink-0",children:f.jsx(z_,{size:16,className:"text-blue-600"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"You"}),f.jsx("div",{className:"text-slate-800 whitespace-pre-wrap",children:e.content})]})]})}function Gm({message:e}){const t=e.isThinking||e.type==="thinking",n=e.executor==="codex"?{color:"text-green-600",bg:"bg-green-100",name:"Codex"}:e.executor==="claude"?{color:"text-purple-600",bg:"bg-purple-100",name:"Claude"}:{color:"text-slate-600",bg:"bg-slate-200",name:"Supervisor"};return f.jsxs("div",{className:"flex gap-3 px-4 py-4 bg-slate-50",children:[f.jsx("div",{className:ge("w-8 h-8 rounded-full flex items-center justify-center shrink-0",n.bg),children:t?f.jsx(u1,{size:16,className:n.color}):f.jsx(Uh,{size:16,className:n.color})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("span",{className:"text-xs text-slate-400",children:n.name}),t&&f.jsxs("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:[f.jsx(Ct,{size:10,className:"animate-spin"}),"Thinking..."]})]}),f.jsx("div",{className:ge("whitespace-pre-wrap",t?"text-slate-500 italic":"text-slate-800"),children:e.content||(t?"Processing...":"")})]})]})}function mC({message:e}){const t=e.toolName||"Tool",r=e.toolInput?JSON.stringify(e.toolInput,null,2):"",n=r.length>300,[o,l]=C.useState(n);return f.jsx("div",{className:"px-4 py-2 ml-11",children:f.jsxs("div",{className:"border border-amber-200 bg-amber-50 rounded-lg overflow-hidden",children:[f.jsxs("div",{className:"flex items-center gap-2 px-3 py-2",children:[f.jsx(fC,{name:t,className:"w-4 h-4 text-amber-600"}),f.jsx("span",{className:"font-medium text-sm text-amber-800",children:t})]}),e.content&&f.jsx("div",{className:"px-3 pb-2",children:f.jsx("div",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:e.content})}),r&&f.jsxs("div",{className:"px-3 pb-3 border-t border-amber-200",children:[f.jsx("pre",{className:"mt-2 bg-white rounded p-2 text-xs font-mono text-slate-700 overflow-x-auto whitespace-pre-wrap",children:o?r.slice(0,300)+"...":r}),n&&f.jsx("button",{onClick:()=>l(!o),className:"mt-2 text-xs text-amber-600 hover:text-amber-800",children:o?" ":" "})]})]})})}function gC({message:e}){const t=e.isError,r=e.content||e.toolOutput||"",n=r.length>500,[o,l]=C.useState(n);return f.jsx("div",{className:"px-4 py-2 ml-11",children:f.jsxs("div",{className:ge("border rounded-lg overflow-hidden",t?"border-red-200 bg-red-50":"border-green-200 bg-green-50"),children:[f.jsxs("div",{className:"flex items-center gap-2 px-3 py-2",children:[t?f.jsx(T_,{size:14,className:"text-red-500 shrink-0"}):f.jsx(O_,{size:14,className:"text-green-500 shrink-0"}),f.jsx("span",{className:ge("font-medium text-sm",t?"text-red-700":"text-green-700"),children:t?"Error":"Result"})]}),f.jsxs("div",{className:ge("px-3 pb-3 border-t",t?"border-red-200":"border-green-200"),children:[f.jsx("pre",{className:"mt-2 bg-white rounded p-2 text-xs font-mono text-slate-700 overflow-x-auto whitespace-pre-wrap",children:o?r.slice(0,500)+"...":r}),n&&f.jsx("button",{onClick:()=>l(!o),className:ge("mt-2 text-xs",t?"text-red-600 hover:text-red-800":"text-green-600 hover:text-green-800"),children:o?" ":" "})]})]})})}function _C({message:e}){const r=e.executor==="codex"?{iconColor:"text-green-600",iconBg:"bg-green-100",contentBg:"bg-green-50",border:"border-green-200"}:e.executor==="claude"?{iconColor:"text-purple-600",iconBg:"bg-purple-100",contentBg:"bg-purple-50",border:"border-purple-200"}:{iconColor:"text-slate-600",iconBg:"bg-slate-100",contentBg:"bg-slate-50",border:"border-slate-200"};return f.jsxs("div",{className:"flex gap-3 px-4 py-4",children:[f.jsx("div",{className:ge("w-8 h-8 rounded-full flex items-center justify-center shrink-0",r.iconBg),children:f.jsx(O_,{size:16,className:r.iconColor})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"text-xs text-slate-400 mb-2",children:"Task Completed"}),f.jsx("div",{className:ge("rounded-lg border p-3",r.contentBg,r.border),children:f.jsx("div",{className:"text-slate-800 whitespace-pre-wrap",children:e.content})})]})]})}function vC({message:e}){const t=e.content.includes("Codex")||e.content.includes(""),r=e.content.includes("Claude")||e.content.includes("");return f.jsx("div",{className:"px-4 py-2",children:f.jsxs("div",{className:ge("flex items-center justify-center gap-2 text-xs",t?"text-green-600":r?"text-purple-600":"text-slate-400"),children:[f.jsx("div",{className:ge("h-px flex-1",t?"bg-green-200":r?"bg-purple-200":"bg-slate-200")}),f.jsx(f1,{size:12}),f.jsx("span",{children:e.content}),f.jsx("div",{className:ge("h-px flex-1",t?"bg-green-200":r?"bg-purple-200":"bg-slate-200")})]})})}function yC({message:e}){const t=e.type==="user",r=e.status==="error"||e.isError,n=()=>e.executor==="codex"?"text-green-500":e.executor==="claude"?"text-purple-500":"text-slate-500";return f.jsx("div",{className:ge("px-2 py-1.5 text-xs rounded",t?"bg-blue-50 text-blue-800":r?"bg-red-50 text-red-700":"bg-slate-50 text-slate-700"),children:f.jsxs("div",{className:"flex items-start gap-1.5",children:[t?f.jsx(z_,{size:12,className:"text-blue-500 shrink-0 mt-0.5"}):f.jsx(Uh,{size:12,className:ge(n(),"shrink-0 mt-0.5")}),f.jsx("span",{className:"break-words",children:e.content})]})})}function ov({message:e,compact:t}){if(t)return f.jsx(yC,{message:e});switch(e.type){case"user":return f.jsx(pC,{message:e});case"assistant":case"thinking":return f.jsx(Gm,{message:e});case"tool_use":return f.jsx(mC,{message:e});case"tool_result":return f.jsx(gC,{message:e});case"result":return f.jsx(_C,{message:e});case"system":return f.jsx(vC,{message:e});default:return f.jsx(Gm,{message:e})}}function Xm(e){const t=e.metadata,r=e.source==="claude"||e.source==="codex"?e.source:void 0;if(e.level==="debug")return null;const n=e.message;if(n.includes(" Completed")||n.includes(" Run completed")){const l=t?.final_summary||n.replace(/^\s*(Completed:|Run completed:?)\s*/i,"").trim()||"";return{id:`${e.timestamp}-${Math.random()}`,type:"result",content:l,timestamp:e.timestamp,executor:void 0,metadata:t}}if(n.includes(" Failed")||n.includes(" Run failed"))return{id:`${e.timestamp}-${Math.random()}`,type:"tool_result",content:n.replace(/^\s*(Failed:|Run failed:?)\s*/i,"").trim()||"",timestamp:e.timestamp,isError:!0,executor:r,metadata:t};if(n.includes("Executing tool")||n.includes("Tool:")){const o=n.match(/tool[:\s]+(\w+)/i);return{id:`${e.timestamp}-${Math.random()}`,type:"tool_use",content:n,timestamp:e.timestamp,toolName:o?.[1]||"Tool",toolInput:t?.args,executor:r,metadata:t}}return n.includes("Spawning workers")||n.includes("Worker")||n.includes("")?{id:`${e.timestamp}-${Math.random()}`,type:"system",content:n,timestamp:e.timestamp,executor:r,metadata:t}:e.level==="error"?{id:`${e.timestamp}-${Math.random()}`,type:"tool_result",content:n,timestamp:e.timestamp,isError:!0,executor:r,metadata:t}:n.includes("Result:")||n.includes("")||n.includes("")?{id:`${e.timestamp}-${Math.random()}`,type:"tool_result",content:n,timestamp:e.timestamp,isError:!1,executor:r,metadata:t}:e.source==="supervisor"||e.source==="system"?{id:`${e.timestamp}-${Math.random()}`,type:"assistant",content:n,timestamp:e.timestamp,executor:void 0,metadata:t}:r?{id:`${e.timestamp}-${Math.random()}`,type:"assistant",content:n,timestamp:e.timestamp,executor:r,metadata:t}:{id:`${e.timestamp}-${Math.random()}`,type:"assistant",content:n,timestamp:e.timestamp,status:e.level==="warn"?"error":"success",metadata:t}}function av({session:e,projects:t,onUpdate:r,onClose:n,onBack:o,showViewToggle:l=!0,availableModels:c,selectedModel:h,onModelChange:m,executorMode:d,onExecutorModeChange:v}){const _=ei(),x=C.useRef(null),[b,S]=C.useState(!1),[w,E]=C.useState(!1),[M,P]=C.useState(!1),[j,A]=C.useState("chat"),U=t.find(T=>T.project_id===e.projectId);C.useEffect(()=>{e.status==="running"&&x.current?.scrollIntoView({behavior:"smooth"})},[e.messages.length,e.logs.length,e.status]),C.useEffect(()=>!e.runId||e.status!=="running"?void 0:I1(e.runId,W=>{r({logs:[...e.logs,W]});const K=Xm(W);K&&r({messages:[...e.messages,K]}),W.message.includes(" Completed")||W.message.includes("Run completed")?r({status:"completed"}):(W.message.includes(" Failed")||W.message.includes("Run failed"))&&r({status:"failed"})}),[e.runId,e.status,e.id]),C.useEffect(()=>{if(!e.runId||e.messages.length>0)return;(async()=>{try{const W=await Vu(e.runId),{logs:K}=await Oa(e.runId),F=K.map(Y=>Xm(Y)).filter(Y=>Y!==null);W.status==="running"||W.status==="pending"?r({status:"running",messages:F,logs:K}):W.status==="completed"?r({status:"completed",messages:F,logs:K}):(W.status==="failed"||W.status==="interrupted")&&r({status:"failed",messages:F,logs:K})}catch{r({runId:null,status:"idle"})}})()},[e.runId]);const V=hr({mutationFn:T=>H_(T),onSuccess:T=>{r({runId:T.run_id,status:"running",messages:[...e.messages,{id:`user-${Date.now()}`,type:"user",content:e.input,timestamp:new Date().toISOString()}],input:""}),_.invalidateQueries({queryKey:["runs"]})}}),Z=()=>{!e.input.trim()||!e.projectId||!U||V.mutate({goal:e.input,repoPath:U.repo_path,projectId:e.projectId})},le=T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),Z())},te=()=>{r({status:"idle"})};return f.jsxs("div",{className:ge("flex flex-col h-full bg-white",n&&"border-r border-slate-200 w-[320px] min-w-[280px] max-w-[400px] flex-shrink-0"),children:[f.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-slate-200 bg-slate-50",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[o&&f.jsx("button",{onClick:o,className:"p-1.5 text-slate-500 hover:text-slate-700 hover:bg-slate-100 rounded-lg transition-colors",children:f.jsx(Wh,{size:20})}),f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:()=>S(!b),disabled:e.status==="running",className:"flex items-center gap-2 px-3 py-1.5 text-sm text-slate-700 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50",children:[f.jsx(ks,{size:16}),f.jsx("span",{className:"truncate max-w-[200px]",children:U?.name||"Select Project"}),f.jsx(Jt,{size:14})]}),b&&f.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 min-w-[250px] max-h-[300px] overflow-y-auto z-50",children:t.map(T=>f.jsxs("button",{onClick:()=>{r({projectId:T.project_id}),S(!1)},className:ge("w-full text-left px-3 py-2 text-sm hover:bg-slate-50",T.project_id===e.projectId&&"bg-primary-50 text-primary-600"),children:[f.jsx("div",{className:"font-medium truncate",children:T.name}),f.jsx("div",{className:"text-xs text-slate-400 truncate",children:T.repo_path})]},T.project_id))})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[e.status==="running"&&f.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium bg-yellow-100 text-yellow-700 rounded-full",children:[f.jsx(Ct,{size:10,className:"animate-spin"}),""]}),e.status==="completed"&&f.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-green-100 text-green-700 rounded-full",children:""}),e.status==="failed"&&f.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-red-100 text-red-700 rounded-full",children:""}),n&&f.jsx("button",{onClick:n,className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:f.jsx(al,{size:18})})]})]}),l&&f.jsxs("div",{className:"flex border-b border-slate-200",children:[f.jsxs("button",{onClick:()=>A("chat"),className:ge("flex-1 px-4 py-2 text-sm font-medium transition-colors",j==="chat"?"text-primary-600 border-b-2 border-primary-600":"text-slate-500 hover:text-slate-700"),children:[f.jsx(Vh,{size:14,className:"inline mr-2"}),"Chat"]}),f.jsxs("button",{onClick:()=>A("logs"),className:ge("flex-1 px-4 py-2 text-sm font-medium transition-colors",j==="logs"?"text-primary-600 border-b-2 border-primary-600":"text-slate-500 hover:text-slate-700"),children:[f.jsx(Xs,{size:14,className:"inline mr-2"}),"Logs"]})]}),f.jsx("div",{className:"flex-1 overflow-y-auto",children:j==="chat"?f.jsxs("div",{className:"max-w-3xl mx-auto p-4 space-y-3",children:[e.messages.length===0?f.jsx("div",{className:"text-center text-slate-400 text-sm py-16",children:e.projectId?"":""}):e.messages.map(T=>f.jsx(ov,{message:T},T.id)),f.jsx("div",{ref:x})]}):f.jsxs("div",{className:"font-mono text-xs",children:[e.logs.length===0?f.jsx("div",{className:"text-center text-slate-400 text-sm py-16",children:""}):e.logs.map((T,W)=>f.jsxs("div",{className:ge("px-4 py-1.5 border-b border-slate-100",T.level==="error"&&"bg-red-50",T.level==="warn"&&"bg-amber-50"),children:[f.jsx("span",{className:"text-slate-400",children:new Date(T.timestamp).toLocaleTimeString()}),f.jsxs("span",{className:ge("ml-2",T.level==="error"&&"text-red-600",T.level==="warn"&&"text-amber-600",T.level==="info"&&"text-primary-600",T.level==="debug"&&"text-slate-400"),children:["[",T.source,"]"]}),f.jsx("span",{className:"ml-2 text-slate-700",children:T.message})]},`${T.timestamp}-${W}`)),f.jsx("div",{ref:x})]})}),f.jsx("div",{className:"border-t border-slate-200 p-4 bg-white",children:f.jsxs("div",{className:"max-w-3xl mx-auto",children:[(c||d)&&f.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[c&&h&&m&&f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:()=>E(!w),disabled:e.status==="running",className:"flex items-center gap-1 px-2 py-1 text-xs text-slate-500 hover:bg-slate-100 rounded transition-colors disabled:opacity-50",children:[f.jsx("span",{children:h}),f.jsx(Jt,{size:12})]}),w&&c.length>0&&f.jsx("div",{className:"absolute bottom-full left-0 mb-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 min-w-[150px] max-h-[200px] overflow-y-auto z-50",children:c.map(T=>f.jsx("button",{onClick:()=>{m(T),E(!1)},className:ge("w-full text-left px-3 py-1.5 text-xs hover:bg-slate-50",T===h&&"bg-primary-50 text-primary-600"),children:T},T))})]}),d&&v&&f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:()=>P(!M),className:ge("flex items-center gap-1.5 px-2 py-1 text-xs rounded transition-colors",d==="codex_only"&&"bg-green-100 text-green-700",d==="claude_only"&&"bg-purple-100 text-purple-700",d==="claude_direct"&&"bg-purple-200 text-purple-800",d==="codex_direct"&&"bg-green-200 text-green-800",d==="agent"&&"bg-slate-100 text-slate-500 hover:bg-slate-200"),children:[f.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:d==="codex_only"?"#22c55e":d==="claude_only"?"#a855f7":d==="claude_direct"?"#7c3aed":d==="codex_direct"?"#16a34a":"#94a3b8"}}),f.jsx("span",{children:d==="codex_only"?"Codex":d==="claude_only"?"Claude":d==="claude_direct"?"Claude Code":d==="codex_direct"?"Codex CLI":""}),f.jsx(Jt,{size:12})]}),M&&f.jsxs("div",{className:"absolute bottom-full left-0 mb-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 min-w-[160px] z-50",children:[f.jsx("div",{className:"px-2 py-1 text-[10px] text-slate-400 uppercase tracking-wide",children:"Supervisor"}),[{value:"agent",label:" ()",color:"#94a3b8"},{value:"codex_only",label:"Codex",color:"#22c55e"},{value:"claude_only",label:"Claude",color:"#a855f7"}].map(T=>f.jsxs("button",{onClick:()=>{v(T.value),P(!1)},className:ge("w-full text-left px-3 py-1.5 text-xs hover:bg-slate-50 flex items-center gap-2",T.value===d&&"bg-primary-50"),children:[f.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:T.color}}),T.label]},T.value)),f.jsxs("div",{className:"border-t border-slate-100 mt-1 pt-1",children:[f.jsx("div",{className:"px-2 py-1 text-[10px] text-slate-400 uppercase tracking-wide",children:""}),[{value:"claude_direct",label:"Claude Code",color:"#7c3aed"},{value:"codex_direct",label:"Codex CLI",color:"#16a34a"}].map(T=>f.jsxs("button",{onClick:()=>{v(T.value),P(!1)},className:ge("w-full text-left px-3 py-1.5 text-xs hover:bg-slate-50 flex items-center gap-2",T.value===d&&"bg-primary-50"),children:[f.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:T.color}}),T.label]},T.value))]})]})]})]}),f.jsxs("div",{className:"relative",children:[f.jsx("textarea",{value:e.input,onChange:T=>r({input:T.target.value}),onKeyDown:le,placeholder:e.projectId?"...":"",disabled:!e.projectId||e.status==="running",className:"w-full resize-none border border-slate-200 rounded-lg px-4 py-3 pr-14 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 min-h-[80px] disabled:bg-slate-50",rows:3}),f.jsx("div",{className:"absolute right-2 bottom-2",children:e.status==="running"?f.jsx("button",{onClick:te,className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:f.jsx(F_,{size:16})}):f.jsx("button",{onClick:Z,disabled:!e.input.trim()||!e.projectId,className:ge("p-2 rounded-lg transition-colors",e.input.trim()&&e.projectId?"bg-primary-500 text-white hover:bg-primary-600":"bg-slate-100 text-slate-400"),children:f.jsx(nl,{size:16})})})]})]})})]})}function xC({session:e,projects:t,onUpdate:r,onBack:n}){const o=C.useRef(null),[l,c]=C.useState(!1),[h,m]=C.useState(!1),d=t.find(x=>x.project_id===e.projectId);C.useEffect(()=>{o.current?.scrollIntoView({behavior:"smooth"})},[e.messages.length]),C.useEffect(()=>{if(!e.runId)return;(async()=>{try{const b=await Q_(e.runId);if(b){const S=b.messages.map(w=>({id:`${w.timestamp}-${Math.random()}`,type:w.role==="user"?"user":"assistant",content:w.content,timestamp:w.timestamp,status:"success"}));r({messages:S})}}catch(b){console.error("Failed to load conversation:",b)}})()},[e.runId]);const v=async()=>{if(!e.input.trim()||!e.runId)return;const x={id:`user-${Date.now()}`,type:"user",content:e.input,timestamp:new Date().toISOString()};r({messages:[...e.messages,x],input:""}),m(!0);try{const b=await V1(e.runId,e.input),S={id:`assistant-${Date.now()}`,type:"assistant",content:b.message,timestamp:new Date().toISOString(),status:"success"};r({messages:[...e.messages,x,S],status:b.completed?"completed":e.status})}catch(b){const S={id:`error-${Date.now()}`,type:"assistant",content:b instanceof Error?b.message:"",timestamp:new Date().toISOString(),status:"error"};r({messages:[...e.messages,x,S],status:"failed"})}finally{m(!1)}},_=x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),v())};return f.jsxs("div",{className:"flex flex-col h-full bg-white",children:[f.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-slate-200 bg-purple-50",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[n&&f.jsx("button",{onClick:n,className:"p-1.5 text-slate-500 hover:text-slate-700 hover:bg-slate-100 rounded-lg transition-colors",children:f.jsx(Wh,{size:20})}),f.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-purple-100 text-purple-700 rounded-full",children:""}),f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:()=>c(!l),disabled:e.status==="running",className:"flex items-center gap-2 px-3 py-1.5 text-sm text-slate-700 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50",children:[f.jsx(ks,{size:16}),f.jsx("span",{className:"truncate max-w-[200px]",children:d?.name||"Select Project"}),f.jsx(Jt,{size:14})]}),l&&f.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 min-w-[250px] max-h-[300px] overflow-y-auto z-50",children:t.map(x=>f.jsxs("button",{onClick:()=>{r({projectId:x.project_id}),c(!1)},className:ge("w-full text-left px-3 py-2 text-sm hover:bg-slate-50",x.project_id===e.projectId&&"bg-primary-50 text-primary-600"),children:[f.jsx("div",{className:"font-medium truncate",children:x.name}),f.jsx("div",{className:"text-xs text-slate-400 truncate",children:x.repo_path})]},x.project_id))})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[h&&f.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium bg-yellow-100 text-yellow-700 rounded-full",children:[f.jsx(Ct,{size:10,className:"animate-spin"}),""]}),e.status==="completed"&&f.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-green-100 text-green-700 rounded-full",children:""})]})]}),f.jsx("div",{className:"flex-1 overflow-y-auto",children:f.jsxs("div",{className:"max-w-3xl mx-auto p-4 space-y-3",children:[e.messages.length===0?f.jsx("div",{className:"text-center text-slate-400 text-sm py-16",children:e.runId?"":""}):e.messages.map(x=>f.jsx(ov,{message:x},x.id)),f.jsx("div",{ref:o})]})}),f.jsx("div",{className:"border-t border-slate-200 p-4 bg-white",children:f.jsx("div",{className:"max-w-3xl mx-auto",children:f.jsxs("div",{className:"relative",children:[f.jsx("textarea",{value:e.input,onChange:x=>r({input:x.target.value}),onKeyDown:_,placeholder:e.runId?"...":"",disabled:!e.runId||h,className:"w-full resize-none border border-slate-200 rounded-lg px-4 py-3 pr-14 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 min-h-[80px] disabled:bg-slate-50",rows:3}),f.jsx("div",{className:"absolute right-2 bottom-2",children:f.jsx("button",{onClick:v,disabled:!e.input.trim()||!e.runId||h,className:ge("p-2 rounded-lg transition-colors",e.input.trim()&&e.runId&&!h?"bg-purple-500 text-white hover:bg-purple-600":"bg-slate-100 text-slate-400"),children:h?f.jsx(Ct,{size:16,className:"animate-spin"}):f.jsx(nl,{size:16})})})]})})})]})}function SC({sessions:e,projects:t,onUpdateSession:r,onAddSession:n,onAddFromHistory:o,onRemoveSession:l,onSwitchToTimeline:c,defaultModel:h,availableModels:m,defaultExecutorMode:d}){const[v,_]=C.useState(!1),x=C.useRef(null),{data:b}=yt({queryKey:["runs"],queryFn:$_}),S=b?.runs||[];return C.useEffect(()=>{const w=x.current;if(!w)return;const E=M=>{Math.abs(M.deltaY)>Math.abs(M.deltaX)&&w.scrollWidth>w.clientWidth&&(M.preventDefault(),w.scrollLeft+=M.deltaY)};return w.addEventListener("wheel",E,{passive:!1}),()=>w.removeEventListener("wheel",E)},[]),f.jsxs("div",{className:"flex flex-col h-full bg-slate-100",children:[f.jsxs("div",{className:"flex items-center justify-between p-2 bg-white border-b border-slate-200",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("h1",{className:"text-sm font-semibold text-slate-700",children:"Parallel Agents"}),f.jsxs("span",{className:"text-xs text-slate-400",children:["(",e.length,")"]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("button",{onClick:n,className:"flex items-center gap-1 px-2 py-1 text-xs text-primary-600 hover:bg-primary-50 rounded transition-colors",children:[f.jsx(Vs,{size:14}),""]}),f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:()=>_(!v),className:"flex items-center gap-1 px-2 py-1 text-xs text-slate-600 hover:bg-slate-100 rounded transition-colors",children:[f.jsx(Vh,{size:14}),"",f.jsx(Jt,{size:12})]}),v&&f.jsx("div",{className:"absolute top-full right-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 w-[300px] max-h-[400px] overflow-y-auto z-50",children:S.length===0?f.jsx("div",{className:"px-3 py-4 text-center text-slate-400 text-xs",children:""}):S.slice(0,20).map(w=>{const E=t.find(M=>M.project_id===w.project_id);return f.jsxs("button",{onClick:()=>{o(w.run_id,w.project_id,w.user_goal),_(!1)},className:"w-full text-left px-3 py-2 hover:bg-slate-50 border-b border-slate-50 last:border-0",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[f.jsx("span",{className:"text-xs font-medium text-slate-700 truncate",children:E?.name||"Unknown"}),f.jsx("span",{className:ge("px-1.5 py-0.5 text-[10px] rounded-full",w.status==="completed"&&"bg-green-100 text-green-700",w.status==="failed"&&"bg-red-100 text-red-700",w.status==="running"&&"bg-yellow-100 text-yellow-700",w.status==="interrupted"&&"bg-orange-100 text-orange-700"),children:w.status})]}),f.jsx("p",{className:"text-xs text-slate-500 line-clamp-1",children:w.user_goal}),f.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(w.created_at).toLocaleString()})]},w.run_id)})})]}),f.jsxs("button",{onClick:c,className:"flex items-center gap-1 px-2 py-1 text-xs text-slate-500 hover:bg-slate-100 rounded transition-colors",children:[f.jsx(w1,{size:14}),""]})]})]}),f.jsxs("div",{ref:x,className:"flex-1 flex overflow-x-auto",children:[e.length===0?f.jsx("div",{className:"flex-1 flex items-center justify-center",children:f.jsxs("button",{onClick:n,className:"flex flex-col items-center gap-2 p-6 text-slate-400 hover:text-slate-600 hover:bg-white rounded-lg border-2 border-dashed border-slate-300 hover:border-slate-400 transition-colors",children:[f.jsx(Vs,{size:24}),f.jsx("span",{className:"text-sm",children:""})]})}):e.map(w=>f.jsx(av,{session:w,projects:t,onUpdate:E=>r(w.id,E),onClose:()=>l(w.id),availableModels:m,selectedModel:w.selectedModel||h,onModelChange:E=>r(w.id,{selectedModel:E}),executorMode:w.executorMode||d,onExecutorModeChange:E=>r(w.id,{executorMode:E})},w.id)),e.length>0&&f.jsx("button",{onClick:n,className:"flex items-center justify-center min-w-[100px] text-slate-400 hover:text-slate-600 hover:bg-white rounded-lg border-2 border-dashed border-slate-300 hover:border-slate-400 transition-colors",children:f.jsx(Vs,{size:20})})]})]})}function wC({projects:e,onStartNew:t,onStartSpec:r,onOpenRun:n,onOpenOrphaned:o,onSwitchToParallel:l,selectedModel:c,availableModels:h,onModelChange:m,executorMode:d,onExecutorModeChange:v,maxContextTokens:_,onMaxContextTokensChange:x}){const b=ei(),[S,w]=C.useState(""),[E,M]=C.useState(null),[P,j]=C.useState("implementation"),[A,U]=C.useState(!1),[V,Z]=C.useState(!1),[le,te]=C.useState(!1),[T,W]=C.useState(!1),K=[{value:5e4,label:"50K"},{value:1e5,label:"100K"},{value:15e4,label:"150K"},{value:2e5,label:"200K"}],{data:F,isLoading:Y}=yt({queryKey:["runs"],queryFn:$_,refetchInterval:5e3}),O=F?.runs||[],{data:B}=yt({queryKey:["orphanedSessions"],queryFn:j1,refetchInterval:1e4}),G=B?.sessions||[],D=async(q,ie)=>{ie.stopPropagation(),await D1(q),b.invalidateQueries({queryKey:["orphanedSessions"]})},Q=e.find(q=>q.project_id===E),X=()=>{if(E)if(P==="spec")r(E),w("");else{if(!S.trim())return;t(E,S),w("")}},k=q=>{q.key==="Enter"&&!q.shiftKey&&(q.preventDefault(),X())},I=q=>{switch(q){case"running":return f.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium bg-yellow-100 text-yellow-700 rounded-full",children:[f.jsx(Ct,{size:10,className:"animate-spin"}),""]});case"completed":return f.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-green-100 text-green-700 rounded-full",children:""});case"failed":return f.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-red-100 text-red-700 rounded-full",children:""});case"interrupted":return f.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-orange-100 text-orange-700 rounded-full",children:""});default:return f.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-slate-100 text-slate-500 rounded-full",children:""})}};return f.jsxs("div",{className:"flex-1 flex flex-col bg-slate-50",children:[f.jsx("div",{className:"p-4 bg-white border-b border-slate-200",children:f.jsxs("div",{className:"max-w-2xl mx-auto space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"flex items-center gap-4",children:f.jsx("h1",{className:"text-lg font-semibold text-slate-800",children:"Agents"})}),f.jsxs("button",{onClick:l,className:"flex items-center gap-1 px-2 py-1 text-xs text-slate-500 hover:bg-slate-100 rounded transition-colors",children:[f.jsx(d1,{size:14}),""]})]}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[f.jsxs("div",{className:"relative flex-1",children:[f.jsxs("button",{onClick:()=>U(!A),className:"flex items-center gap-2 px-3 py-2.5 text-sm text-slate-700 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors w-full border border-slate-200",children:[f.jsx(ks,{size:16}),f.jsx("span",{className:"truncate flex-1 text-left",children:Q?.name||""}),f.jsx(Jt,{size:16})]}),A&&f.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 w-full max-h-[250px] overflow-y-auto z-50",children:e.map(q=>f.jsxs("button",{onClick:()=>{M(q.project_id),U(!1)},className:ge("w-full text-left px-3 py-2 text-sm hover:bg-slate-50",q.project_id===E&&"bg-primary-50 text-primary-600"),children:[f.jsx("div",{className:"font-medium truncate",children:q.name}),f.jsx("div",{className:"text-xs text-slate-400 truncate",children:q.repo_path})]},q.project_id))})]}),f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:()=>Z(!V),className:"flex items-center gap-1 px-3 py-2.5 text-xs text-slate-500 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors border border-slate-200",children:[f.jsx("span",{children:c}),f.jsx(Jt,{size:14})]}),V&&h.length>0&&f.jsx("div",{className:"absolute top-full right-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 min-w-[150px] max-h-[200px] overflow-y-auto z-50",children:h.map(q=>f.jsx("button",{onClick:()=>{m(q),Z(!1)},className:ge("w-full text-left px-3 py-1.5 text-xs hover:bg-slate-50",q===c&&"bg-primary-50 text-primary-600"),children:q},q))})]})]}),f.jsxs("div",{className:"relative",children:[P==="spec"?f.jsxs("div",{className:"border border-purple-200 rounded-lg px-4 py-4 bg-purple-50",children:[f.jsx("p",{className:"text-sm text-purple-700 mb-2",children:"AI"}),f.jsx("p",{className:"text-xs text-purple-600",children:""})]}):f.jsx("textarea",{value:S,onChange:q=>w(q.target.value),onKeyDown:k,placeholder:E?"...":"",disabled:!E,className:"w-full resize-none border border-slate-200 rounded-lg px-4 py-3 pb-12 pr-14 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 min-h-[100px] disabled:bg-slate-50 disabled:text-slate-400",rows:3}),f.jsxs("div",{className:"absolute left-2 right-2 bottom-2 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:()=>te(!le),className:ge("flex items-center gap-1.5 px-2 py-1 text-xs rounded-md transition-colors",P==="spec"&&"bg-amber-100 text-amber-700",P==="implementation"&&d==="codex_only"&&"bg-green-100 text-green-700",P==="implementation"&&d==="claude_only"&&"bg-purple-100 text-purple-700",P==="implementation"&&d==="claude_direct"&&"bg-purple-200 text-purple-800",P==="implementation"&&d==="codex_direct"&&"bg-green-200 text-green-800",P==="implementation"&&d==="agent"&&"bg-slate-100 text-slate-500 hover:bg-slate-200"),children:[f.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:P==="spec"?"#f59e0b":d==="codex_only"?"#22c55e":d==="claude_only"?"#a855f7":d==="claude_direct"?"#7c3aed":d==="codex_direct"?"#16a34a":"#94a3b8"}}),f.jsx("span",{children:P==="spec"?"":d==="codex_only"?"Codex":d==="claude_only"?"Claude":d==="claude_direct"?"Claude Code":d==="codex_direct"?"Codex CLI":""}),f.jsx(Jt,{size:12})]}),le&&f.jsxs("div",{className:"absolute bottom-full left-0 mb-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 min-w-[160px] z-50",children:[f.jsxs("button",{onClick:()=>{j("spec"),te(!1)},className:ge("w-full text-left px-3 py-1.5 text-xs hover:bg-slate-50 flex items-center gap-2",P==="spec"&&"bg-amber-50"),children:[f.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"#f59e0b"}})," (Plan)"]}),f.jsxs("div",{className:"border-t border-slate-100 mt-1 pt-1",children:[f.jsx("div",{className:"px-2 py-1 text-[10px] text-slate-400 uppercase tracking-wide",children:" - Supervisor"}),[{value:"agent",label:" ()",color:"#94a3b8"},{value:"codex_only",label:"Codex",color:"#22c55e"},{value:"claude_only",label:"Claude",color:"#a855f7"}].map(q=>f.jsxs("button",{onClick:()=>{j("implementation"),v(q.value),te(!1)},className:ge("w-full text-left px-3 py-1.5 text-xs hover:bg-slate-50 flex items-center gap-2",P==="implementation"&&q.value===d&&"bg-primary-50"),children:[f.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:q.color}}),q.label]},q.value))]}),f.jsxs("div",{className:"border-t border-slate-100 mt-1 pt-1",children:[f.jsx("div",{className:"px-2 py-1 text-[10px] text-slate-400 uppercase tracking-wide",children:" - "}),[{value:"claude_direct",label:"Claude Code",color:"#7c3aed"},{value:"codex_direct",label:"Codex CLI",color:"#16a34a"}].map(q=>f.jsxs("button",{onClick:()=>{j("implementation"),v(q.value),te(!1)},className:ge("w-full text-left px-3 py-1.5 text-xs hover:bg-slate-50 flex items-center gap-2",P==="implementation"&&q.value===d&&"bg-primary-50"),children:[f.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:q.color}}),q.label]},q.value))]})]})]}),f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:()=>W(!T),className:"flex items-center gap-1 px-2 py-1 text-xs text-slate-500 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:[f.jsxs("span",{children:[Math.round(_/1e3),"K tokens"]}),f.jsx(Jt,{size:12})]}),T&&f.jsx("div",{className:"absolute bottom-full left-0 mb-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 min-w-[100px] z-50",children:K.map(q=>f.jsxs("button",{onClick:()=>{x(q.value),W(!1)},className:ge("w-full text-left px-3 py-1.5 text-xs hover:bg-slate-50",q.value===_&&"bg-primary-50 text-primary-600"),children:[q.label," tokens"]},q.value))})]})]}),P==="implementation"&&f.jsx("button",{onClick:X,disabled:!S.trim()||!E,className:ge("p-2 rounded-lg transition-colors",S.trim()&&E?"bg-primary-500 text-white hover:bg-primary-600":"bg-slate-100 text-slate-400"),children:f.jsx(nl,{size:18})}),P==="spec"&&f.jsxs("button",{onClick:X,disabled:!E,className:ge("px-3 py-1.5 rounded-lg text-xs font-medium transition-colors flex items-center gap-1.5",E?"bg-amber-500 text-white hover:bg-amber-600":"bg-slate-100 text-slate-400"),children:[f.jsx(Vh,{size:14}),""]})]})]})]})}),f.jsx("div",{className:"flex-1 overflow-y-auto",children:f.jsxs("div",{className:"max-w-2xl mx-auto py-4 px-2",children:[G.length>0&&f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:"px-3 text-xs font-semibold text-orange-600 uppercase tracking-wider mb-2",children:""}),f.jsx("div",{className:"bg-white rounded-lg border border-orange-200 divide-y divide-orange-100",children:G.map(q=>f.jsx("div",{onClick:()=>o(q.run_id,q.first_message),className:"px-4 py-3 hover:bg-orange-50 cursor-pointer",children:f.jsxs("div",{className:"flex items-start justify-between gap-3",children:[f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[I("interrupted"),f.jsxs("span",{className:"text-xs text-slate-400",children:[q.log_count," "]})]}),f.jsx("p",{className:"text-sm text-slate-600 line-clamp-2",children:q.first_message||"()"}),f.jsx("p",{className:"text-xs text-slate-400 mt-1",children:new Date(q.last_log).toLocaleString()})]}),f.jsx("button",{onClick:ie=>D(q.run_id,ie),className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg",children:f.jsx(ol,{size:16})})]})},q.run_id))})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"px-3 text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2",children:""}),Y?f.jsxs("div",{className:"text-center text-slate-400 text-sm py-12 bg-white rounded-lg border border-slate-200",children:[f.jsx(Ct,{size:20,className:"animate-spin mx-auto mb-2"}),"..."]}):O.length===0?f.jsx("div",{className:"text-center text-slate-400 text-sm py-12 bg-white rounded-lg border border-slate-200",children:""}):f.jsx("div",{className:"bg-white rounded-lg border border-slate-200 divide-y divide-slate-100",children:(()=>{const q=new Map(e.map(ie=>[ie.project_id,ie]));return O.map(ie=>{const xe=ie.project_id?q.get(ie.project_id):void 0;return f.jsx("div",{onClick:()=>n(ie.run_id,ie.project_id,ie.user_goal,ie.mode||"implementation"),className:"px-4 py-3 hover:bg-slate-50 cursor-pointer",children:f.jsx("div",{className:"flex items-start justify-between gap-3",children:f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("span",{className:"font-medium text-slate-700 truncate",children:xe?.name||"Unknown Project"}),ie.mode==="spec"&&f.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium bg-purple-100 text-purple-700 rounded-full",children:""}),I(ie.status)]}),f.jsx("p",{className:"text-sm text-slate-600 line-clamp-2",children:ie.user_goal||(ie.mode==="spec"?"()":"(no goal)")}),f.jsx("p",{className:"text-xs text-slate-400 mt-1",children:new Date(ie.created_at).toLocaleString()})]})})},ie.run_id)})})()})]})]})})]})}function bC(){const[e,t]=C.useState(()=>typeof window<"u"&&window.innerWidth<768);return C.useEffect(()=>{const r=()=>t(window.innerWidth<768);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),e}function CC(){const e=bC(),[t,r]=C.useState(!1),[n,o]=C.useState("timeline"),[l,c]=C.useState(null),[h,m]=C.useState([]),[d,v]=C.useState(!1),[_,x]=C.useState(1),[b,S]=C.useState("gpt-5.2"),[w,E]=C.useState("agent"),[M,P]=C.useState(15e4),{data:j}=yt({queryKey:["projects"],queryFn:qh}),A=j?.projects||[],{data:U}=yt({queryKey:["parallelSessions"],queryFn:M1,staleTime:1/0}),V=ei(),Z=hr({mutationFn:({sessions:ae,version:fe})=>O1(ae,fe),onSuccess:ae=>{x(ae.version)},onError:async ae=>{ae instanceof W_&&(console.warn("Parallel sessions conflict detected, refetching..."),await V.invalidateQueries({queryKey:["parallelSessions"]}))}}),le=hr({mutationFn:ae=>H_(ae)});C.useEffect(()=>{t||(o(e?"timeline":"columns"),r(!0))},[e,t]),C.useEffect(()=>{if(U?.sessions&&!d){const ae=U.sessions.map(fe=>({id:fe.id,projectId:fe.projectId,runId:fe.runId,mode:fe.mode||"implementation",status:fe.status,input:fe.input,messages:[],logs:[],selectedModel:fe.selectedModel,executorMode:fe.executorMode,terminalSessionId:fe.terminalSessionId}));m(ae),x(U.version||1),v(!0)}},[U,d]),C.useEffect(()=>{if(!d)return;const ae=setTimeout(()=>{const fe=h.map(Ce=>({id:Ce.id,projectId:Ce.projectId,runId:Ce.runId,mode:Ce.mode,status:Ce.status,input:Ce.input,selectedModel:Ce.selectedModel,executorMode:Ce.executorMode,terminalSessionId:Ce.terminalSessionId}));Z.mutate({sessions:fe,version:_})},500);return()=>clearTimeout(ae)},[h,d,_]);const{data:te}=yt({queryKey:["copilotStatus"],queryFn:q_,refetchInterval:1e4}),{data:T}=yt({queryKey:["copilotModels"],queryFn:A1,enabled:te?.running&&te?.healthy,staleTime:6e4}),{data:W}=yt({queryKey:["settings"],queryFn:K_}),K=hr({mutationFn:V_}),F=(T?.models??[]).map(ae=>ae.id);C.useEffect(()=>{W?.dag_model&&S(W.dag_model)},[W?.dag_model]),C.useEffect(()=>{W?.executor_mode&&E(W.executor_mode)},[W?.executor_mode]),C.useEffect(()=>{W?.max_context_tokens&&P(W.max_context_tokens)},[W?.max_context_tokens]);const Y=ae=>{S(ae),K.mutate({dag_model:ae})},O=ae=>{E(ae),K.mutate({executor_mode:ae})},B=ae=>{P(ae),K.mutate({max_context_tokens:ae})},G=(ae,fe)=>{const Ce=A.find(Ee=>Ee.project_id===ae);if(!Ce)return;const Te={id:`session-${Date.now()}`,projectId:ae,runId:null,mode:"implementation",status:"idle",input:"",messages:[],logs:[]};le.mutate({goal:fe,repoPath:Ce.repo_path,projectId:ae,mode:"implementation"},{onSuccess:Ee=>{c({...Te,runId:Ee.run_id,status:"running",messages:[{id:`user-${Date.now()}`,type:"user",content:fe,timestamp:new Date().toISOString()}]}),o("single"),V.invalidateQueries({queryKey:["runs"]})}})},D=ae=>{const fe=A.find(Te=>Te.project_id===ae);if(!fe)return;const Ce={id:`session-${Date.now()}`,projectId:ae,runId:null,mode:"spec",status:"idle",input:"",messages:[],logs:[]};le.mutate({goal:"",repoPath:fe.repo_path,projectId:ae,mode:"spec"},{onSuccess:Te=>{c({...Ce,runId:Te.run_id,status:"running"}),o("single"),V.invalidateQueries({queryKey:["runs"]})}})},Q=async(ae,fe,Ce,Te="implementation")=>{try{const Ee=await Vu(ae),Ne=Ee.mode||Te,er=Ee.status==="running"||Ee.status==="pending"?"running":Ee.status==="completed"?"completed":Ee.status==="failed"?"failed":Ee.status==="interrupted"?"interrupted":"idle";if(Ne==="spec"){const ht=(await Q_(ae))?.messages.map(tt=>({id:`${tt.timestamp}-${Math.random()}`,type:tt.role==="user"?"user":"assistant",content:tt.content,timestamp:tt.timestamp,status:"success"}))||[];c({id:`session-${Date.now()}`,projectId:fe||null,runId:ae,mode:"spec",status:er,input:"",messages:ht,logs:[]})}else{const{logs:Xr}=await Oa(ae),ht=[{id:`user-${Date.now()}`,type:"user",content:Ce,timestamp:Ee.created_at},...Xr.filter(tt=>tt.level==="info"||tt.level==="warn"||tt.level==="error").map(tt=>({id:`${tt.timestamp}-${Math.random()}`,type:"assistant",content:tt.message,timestamp:tt.timestamp,status:tt.level==="error"?"error":"success",executor:tt.source==="claude"||tt.source==="codex"?tt.source:void 0}))];c({id:`session-${Date.now()}`,projectId:fe||null,runId:ae,mode:"implementation",status:er,input:"",messages:ht,logs:Xr})}o("single")}catch(Ee){console.error("Failed to open run:",Ee)}},X=async(ae,fe)=>{try{const{logs:Ce}=await Oa(ae),Te=Ce.filter(Ee=>Ee.level==="info"||Ee.level==="warn"||Ee.level==="error").map(Ee=>({id:`${Ee.timestamp}-${Math.random()}`,type:"assistant",content:Ee.message,timestamp:Ee.timestamp,status:Ee.level==="error"?"error":"success",executor:Ee.source==="claude"||Ee.source==="codex"?Ee.source:void 0}));c({id:`session-${Date.now()}`,projectId:null,runId:null,mode:"implementation",status:"interrupted",input:"",messages:Te,logs:Ce}),o("single")}catch(Ce){console.error("Failed to open orphaned session:",Ce)}},k=ae=>{l&&c({...l,...ae})},I=()=>{const ae={id:`session-${Date.now()}`,projectId:null,runId:null,mode:"implementation",status:"idle",input:"",messages:[],logs:[]};m([...h,ae])},q=ae=>{m(h.filter(fe=>fe.id!==ae))},ie=(ae,fe)=>{m(h.map(Ce=>Ce.id===ae?{...Ce,...fe}:Ce))},xe=async(ae,fe,Ce)=>{try{const Te=await Vu(ae),Ee=Te.status==="running"||Te.status==="pending"?"running":Te.status==="completed"?"completed":Te.status==="failed"?"failed":Te.status==="interrupted"?"interrupted":"idle",{logs:Ne}=await Oa(ae),er=[{id:`user-${Date.now()}`,type:"user",content:Ce,timestamp:Te.created_at},...Ne.filter(ht=>ht.level==="info"||ht.level==="warn"||ht.level==="error").map(ht=>({id:`${ht.timestamp}-${Math.random()}`,type:"assistant",content:ht.message,timestamp:ht.timestamp,status:ht.level==="error"?"error":"success",executor:ht.source==="claude"||ht.source==="codex"?ht.source:void 0}))],Xr={id:`session-${Date.now()}`,projectId:fe||null,runId:ae,mode:Te.mode||"implementation",status:Ee,input:"",messages:er,logs:Ne};m([...h,Xr])}catch(Te){console.error("Failed to load run for parallel:",Te)}},Se=()=>{o("columns"),h.length===0&&I()},je=()=>{o("timeline"),c(null)};return f.jsx("div",{className:"h-[calc(100vh-64px)] lg:h-screen flex flex-col",children:n==="single"&&l?l.mode==="spec"?f.jsx(xC,{session:l,projects:A,onUpdate:k,onBack:()=>{c(null),o("timeline")}}):f.jsx(av,{session:l,projects:A,onUpdate:k,onBack:()=>{c(null),o("timeline")},availableModels:F,selectedModel:b,onModelChange:Y,executorMode:w,onExecutorModeChange:O}):n==="columns"?f.jsx(SC,{sessions:h,projects:A,onUpdateSession:ie,onAddSession:I,onAddFromHistory:xe,onRemoveSession:q,onSwitchToTimeline:je,defaultModel:b,availableModels:F,defaultExecutorMode:w}):f.jsx(wC,{projects:A,onStartNew:G,onStartSpec:D,onOpenRun:Q,onOpenOrphaned:X,onSwitchToParallel:Se,selectedModel:b,availableModels:F,onModelChange:Y,executorMode:w,onExecutorModeChange:O,maxContextTokens:M,onMaxContextTokensChange:B})})}function kC({message:e}){const[t,r]=C.useState(!1);return e.type==="user"?f.jsx("div",{className:"flex justify-end",children:f.jsxs("div",{className:"max-w-[80%] bg-primary-500 text-white rounded-lg px-4 py-2",children:[f.jsx("p",{className:"text-sm whitespace-pre-wrap",children:e.content}),f.jsx("p",{className:"text-xs text-primary-200 mt-1",children:new Date(e.timestamp).toLocaleTimeString()})]})}):e.type==="tool"?f.jsx("div",{className:"flex justify-start",children:f.jsxs("div",{className:"max-w-[90%] bg-slate-100 rounded-lg px-4 py-2 border border-slate-200",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.toolName==="Bash"&&f.jsx(Xs,{size:14,className:"text-green-600"}),(e.toolName==="Edit"||e.toolName==="Write")&&f.jsx(m1,{size:14,className:"text-blue-600"}),e.toolName==="Read"&&f.jsx($m,{size:14,className:"text-purple-600"}),!["Bash","Edit","Write","Read"].includes(e.toolName||"")&&f.jsx($m,{size:14,className:"text-slate-600"}),f.jsx("span",{className:"text-xs font-medium text-slate-700",children:e.toolName}),e.isError?f.jsx(M_,{size:12,className:"text-red-500"}):e.toolOutput?f.jsx(Oi,{size:12,className:"text-green-500"}):f.jsx(Ct,{size:12,className:"text-slate-400 animate-spin"})]}),e.toolInput&&f.jsxs("button",{onClick:()=>r(!t),className:"text-xs text-slate-500 hover:text-slate-700 flex items-center gap-1",children:[f.jsx(Jt,{size:12,className:ge("transition-transform",t&&"rotate-180")}),t?"Hide details":"Show details"]}),t&&e.toolInput&&f.jsx("pre",{className:"mt-2 text-xs bg-slate-200 p-2 rounded overflow-x-auto max-h-40",children:JSON.stringify(e.toolInput,null,2)}),e.toolOutput&&f.jsx("pre",{className:ge("mt-2 text-xs p-2 rounded overflow-x-auto max-h-40",e.isError?"bg-red-50 text-red-700":"bg-green-50 text-green-700"),children:e.toolOutput.length>500?e.toolOutput.slice(0,500)+"...":e.toolOutput})]})}):e.type==="system"?f.jsx("div",{className:"flex justify-center",children:f.jsx("div",{className:ge("text-xs px-3 py-1 rounded-full",e.isError?"bg-red-100 text-red-700":"bg-slate-100 text-slate-500"),children:e.content})}):e.type==="result"?f.jsx("div",{className:"flex justify-start",children:f.jsxs("div",{className:"max-w-[90%] bg-green-50 border border-green-200 rounded-lg px-4 py-2",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(Oi,{size:14,className:"text-green-600"}),f.jsx("span",{className:"text-xs font-medium text-green-700",children:"Result"})]}),f.jsx("p",{className:"text-sm text-green-800 whitespace-pre-wrap",children:e.content})]})}):f.jsx("div",{className:"flex justify-start",children:f.jsxs("div",{className:"max-w-[80%] bg-white border border-slate-200 rounded-lg px-4 py-2",children:[f.jsx("div",{className:"flex items-center gap-2 mb-1",children:f.jsx("span",{className:ge("text-xs px-2 py-0.5 rounded-full",e.executor==="claude"?"bg-purple-100 text-purple-700":"bg-green-100 text-green-700"),children:e.executor==="claude"?"Claude":"Codex"})}),f.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:e.content}),f.jsx("p",{className:"text-xs text-slate-400 mt-1",children:new Date(e.timestamp).toLocaleTimeString()})]})})}function EC(){const e=C.useRef(null),[t,r]=C.useState(null),[n,o]=C.useState("claude"),[l,c]=C.useState(""),[h,m]=C.useState(""),[d,v]=C.useState([]),[_,x]=C.useState(!1),[b,S]=C.useState(!1),[w,E]=C.useState(!1),M=C.useRef(null),{data:P}=yt({queryKey:["projects"],queryFn:qh}),j=P?.projects||[],{data:A,refetch:U}=yt({queryKey:["directExecutorSessions"],queryFn:Q1,refetchInterval:1e4}),V=A?.sessions||[],Z=V.find(O=>O.session_id===t);C.useEffect(()=>{e.current?.scrollIntoView({behavior:"smooth"})},[d.length]);const le=hr({mutationFn:({type:O,dir:B})=>q1(O,B),onSuccess:O=>{r(O.session_id),v([{id:`system-${Date.now()}`,type:"system",content:`Session created with ${O.executor_type==="claude"?"Claude Code":"Codex"}`,timestamp:new Date().toISOString()}]),U()}}),te=hr({mutationFn:Y1,onSuccess:()=>{t&&(r(null),v([])),U()}}),T=()=>{l.trim()&&le.mutate({type:n,dir:l})},W=()=>{if(!h.trim()||!t||_)return;const O={id:`user-${Date.now()}`,type:"user",content:h,timestamp:new Date().toISOString()};v(Q=>[...Q,O]),m(""),x(!0);let B=null;const G=new Map,D=G1(t,h,Q=>{const X=Q.message;if(Q.executor==="claude"){const k=X;if(k.type==="system")v(I=>[...I,{id:`system-${Date.now()}-${Math.random()}`,type:"system",content:k.message||(k.subtype==="init"?"Connected":"System event"),timestamp:Q.timestamp,isError:k.subtype==="error"}]);else if(k.type==="assistant"&&k.content)v(I=>[...I,{id:`assistant-${Date.now()}-${Math.random()}`,type:"assistant",content:k.content,timestamp:Q.timestamp,executor:"claude"}]);else if(k.type==="tool_use"){B=k.tool_use_id||null;const I={id:`tool-${k.tool_use_id||Date.now()}`,type:"tool",content:"",timestamp:Q.timestamp,toolName:k.tool_name,toolInput:k.tool_input,executor:"claude"};B&&G.set(B,I),v(q=>[...q,I])}else if(k.type==="tool_result"){const I=k.tool_use_id||B;I&&v(q=>q.map(ie=>ie.id===`tool-${I}`?{...ie,toolOutput:k.content||"",isError:k.is_error}:ie))}else k.type==="result"&&v(I=>[...I,{id:`result-${Date.now()}`,type:"result",content:k.result||"Completed",timestamp:Q.timestamp,executor:"claude"}])}else{const k=X;if(k.type==="text"&&k.content)v(I=>[...I,{id:`assistant-${Date.now()}-${Math.random()}`,type:"assistant",content:k.content,timestamp:Q.timestamp,executor:"codex"}]);else if(k.type==="tool_call"){const I={id:`tool-${k.tool_call_id||Date.now()}`,type:"tool",content:"",timestamp:Q.timestamp,toolName:k.tool_name,toolInput:k.arguments,executor:"codex"};k.tool_call_id&&G.set(k.tool_call_id,I),v(q=>[...q,I])}else if(k.type==="tool_result"){const I=k.tool_call_id;I&&v(q=>q.map(ie=>ie.id===`tool-${I}`?{...ie,toolOutput:k.output||"",isError:k.is_error}:ie))}else k.type==="file_change"?v(I=>[...I,{id:`system-${Date.now()}-${Math.random()}`,type:"system",content:`File ${k.action}: ${k.path}`,timestamp:Q.timestamp}]):k.type==="complete"&&v(I=>[...I,{id:`result-${Date.now()}`,type:"result",content:k.result||"Completed",timestamp:Q.timestamp,executor:"codex"}])}},Q=>{v(X=>[...X,{id:`error-${Date.now()}`,type:"system",content:Q.message,timestamp:new Date().toISOString(),isError:!0}]),x(!1)},()=>{x(!1)});M.current=D},K=()=>{M.current&&(M.current(),M.current=null),x(!1),v(O=>[...O,{id:`system-${Date.now()}`,type:"system",content:"Execution stopped",timestamp:new Date().toISOString()}])},F=O=>{O.key==="Enter"&&!O.shiftKey&&(O.preventDefault(),W())},Y=O=>{c(O.repo_path),E(!1)};return f.jsxs("div",{className:"h-[calc(100vh-64px)] lg:h-screen flex flex-col bg-slate-50",children:[f.jsx("div",{className:"p-4 bg-white border-b border-slate-200",children:f.jsxs("div",{className:"max-w-3xl mx-auto space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h1",{className:"text-lg font-semibold text-slate-800",children:"Direct Executor"}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:()=>S(!b),disabled:_,className:ge("flex items-center gap-2 px-3 py-1.5 text-sm rounded-lg transition-colors",n==="claude"?"bg-purple-100 text-purple-700":"bg-green-100 text-green-700",_&&"opacity-50 cursor-not-allowed"),children:[f.jsx("span",{className:ge("w-2 h-2 rounded-full",n==="claude"?"bg-purple-500":"bg-green-500")}),n==="claude"?"Claude Code":"Codex",f.jsx(Jt,{size:14})]}),b&&f.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 min-w-[150px] z-50",children:[f.jsxs("button",{onClick:()=>{o("claude"),S(!1)},className:ge("w-full text-left px-3 py-2 text-sm hover:bg-slate-50 flex items-center gap-2",n==="claude"&&"bg-purple-50"),children:[f.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-500"}),"Claude Code"]}),f.jsxs("button",{onClick:()=>{o("codex"),S(!1)},className:ge("w-full text-left px-3 py-2 text-sm hover:bg-slate-50 flex items-center gap-2",n==="codex"&&"bg-green-50"),children:[f.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),"Codex"]})]})]})})]}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[f.jsxs("div",{className:"relative flex-1",children:[f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("button",{onClick:()=>E(!w),disabled:_,className:"flex items-center gap-2 px-3 py-2 text-sm text-slate-700 bg-slate-50 hover:bg-slate-100 rounded-lg border border-slate-200 disabled:opacity-50",children:[f.jsx(ks,{size:16}),f.jsx(Jt,{size:14})]}),f.jsx("input",{type:"text",value:l,onChange:O=>c(O.target.value),placeholder:"Working directory...",disabled:_,className:"flex-1 px-3 py-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-slate-50"})]}),w&&j.length>0&&f.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 w-full max-h-[250px] overflow-y-auto z-50",children:j.map(O=>f.jsxs("button",{onClick:()=>Y(O),className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-50",children:[f.jsx("div",{className:"font-medium truncate",children:O.name}),f.jsx("div",{className:"text-xs text-slate-400 truncate",children:O.repo_path})]},O.project_id))})]}),Z?f.jsxs("button",{onClick:()=>te.mutate(Z.session_id),disabled:_||te.isPending,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-colors disabled:opacity-50",children:[f.jsx(ol,{size:16}),"End Session"]}):f.jsxs("button",{onClick:T,disabled:!l.trim()||le.isPending,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[le.isPending?f.jsx(Ct,{size:16,className:"animate-spin"}):f.jsx(Vs,{size:16}),"New Session"]})]}),V.length>0&&f.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-1",children:[f.jsx("span",{className:"text-xs text-slate-500 shrink-0",children:"Sessions:"}),V.map(O=>f.jsxs("button",{onClick:()=>{r(O.session_id),c(O.cwd),o(O.executor_type),v([{id:`system-${Date.now()}`,type:"system",content:`Switched to ${O.executor_type==="claude"?"Claude":"Codex"} session`,timestamp:new Date().toISOString()}])},className:ge("flex items-center gap-1.5 px-2 py-1 text-xs rounded-lg shrink-0 transition-colors",O.session_id===t?O.executor_type==="claude"?"bg-purple-100 text-purple-700":"bg-green-100 text-green-700":"bg-slate-100 text-slate-600 hover:bg-slate-200"),children:[f.jsx("span",{className:ge("w-1.5 h-1.5 rounded-full",O.executor_type==="claude"?"bg-purple-500":"bg-green-500")}),O.executor_type==="claude"?"Claude":"Codex"]},O.session_id))]})]})}),f.jsx("div",{className:"flex-1 overflow-y-auto",children:f.jsxs("div",{className:"max-w-3xl mx-auto p-4 space-y-3",children:[Z?d.length===0?f.jsxs("div",{className:"text-center text-slate-400 text-sm py-16",children:[f.jsx(A_,{size:48,className:"mx-auto mb-4 opacity-50"}),f.jsxs("p",{children:["Send a prompt to start using ",n==="claude"?"Claude Code":"Codex"]})]}):d.map(O=>f.jsx(kC,{message:O},O.id)):f.jsxs("div",{className:"text-center text-slate-400 text-sm py-16",children:[f.jsx(Xs,{size:48,className:"mx-auto mb-4 opacity-50"}),f.jsx("p",{children:"Select a working directory and create a session to start"})]}),f.jsx("div",{ref:e})]})}),f.jsx("div",{className:"border-t border-slate-200 p-4 bg-white",children:f.jsx("div",{className:"max-w-3xl mx-auto",children:f.jsxs("div",{className:"relative",children:[f.jsx("textarea",{value:h,onChange:O=>m(O.target.value),onKeyDown:F,placeholder:Z?"Enter your prompt...":"Create a session first...",disabled:!Z||_,className:"w-full resize-none border border-slate-200 rounded-lg px-4 py-3 pr-14 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 min-h-[80px] disabled:bg-slate-50 disabled:text-slate-400",rows:3}),f.jsx("div",{className:"absolute right-2 bottom-2",children:_?f.jsx("button",{onClick:K,className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:f.jsx(F_,{size:16})}):f.jsx("button",{onClick:W,disabled:!h.trim()||!Z,className:ge("p-2 rounded-lg transition-colors",h.trim()&&Z?"bg-primary-500 text-white hover:bg-primary-600":"bg-slate-100 text-slate-400"),children:f.jsx(nl,{size:16})})})]})})})]})}/**
 * Copyright (c) 2014-2024 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * @license MIT
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 */var lv=Object.defineProperty,NC=Object.getOwnPropertyDescriptor,PC=(e,t)=>{for(var r in t)lv(e,r,{get:t[r],enumerable:!0})},Xe=(e,t,r,n)=>{for(var o=n>1?void 0:n?NC(t,r):t,l=e.length-1,c;l>=0;l--)(c=e[l])&&(o=(n?c(t,r,o):c(o))||o);return n&&o&&lv(t,r,o),o},ce=(e,t)=>(r,n)=>t(r,n,e),Jm="Terminal input",qu={get:()=>Jm,set:e=>Jm=e},Zm="Too much output to announce, navigate to rows manually to read",Qu={get:()=>Zm,set:e=>Zm=e};function RC(e){return e.replace(/\r?\n/g,"\r")}function LC(e,t){return t?"\x1B[200~"+e+"\x1B[201~":e}function jC(e,t){e.clipboardData&&e.clipboardData.setData("text/plain",t.selectionText),e.preventDefault()}function DC(e,t,r,n){if(e.stopPropagation(),e.clipboardData){let o=e.clipboardData.getData("text/plain");cv(o,t,r,n)}}function cv(e,t,r,n){e=RC(e),e=LC(e,r.decPrivateModes.bracketedPasteMode&&n.rawOptions.ignoreBracketedPasteMode!==!0),r.triggerDataEvent(e,!0),t.value=""}function uv(e,t,r){let n=r.getBoundingClientRect(),o=e.clientX-n.left-10,l=e.clientY-n.top-10;t.style.width="20px",t.style.height="20px",t.style.left=`${o}px`,t.style.top=`${l}px`,t.style.zIndex="1000",t.focus()}function eg(e,t,r,n,o){uv(e,t,r),o&&n.rightClickSelect(e),t.value=n.selectionText,t.select()}function xs(e){return e>65535?(e-=65536,String.fromCharCode((e>>10)+55296)+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)}function cl(e,t=0,r=e.length){let n="";for(let o=t;o<r;++o){let l=e[o];l>65535?(l-=65536,n+=String.fromCharCode((l>>10)+55296)+String.fromCharCode(l%1024+56320)):n+=String.fromCharCode(l)}return n}var MC=class{constructor(){this._interim=0}clear(){this._interim=0}decode(e,t){let r=e.length;if(!r)return 0;let n=0,o=0;if(this._interim){let l=e.charCodeAt(o++);56320<=l&&l<=57343?t[n++]=(this._interim-55296)*1024+l-56320+65536:(t[n++]=this._interim,t[n++]=l),this._interim=0}for(let l=o;l<r;++l){let c=e.charCodeAt(l);if(55296<=c&&c<=56319){if(++l>=r)return this._interim=c,n;let h=e.charCodeAt(l);56320<=h&&h<=57343?t[n++]=(c-55296)*1024+h-56320+65536:(t[n++]=c,t[n++]=h);continue}c!==65279&&(t[n++]=c)}return n}},OC=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(e,t){let r=e.length;if(!r)return 0;let n=0,o,l,c,h,m=0,d=0;if(this.interim[0]){let x=!1,b=this.interim[0];b&=(b&224)===192?31:(b&240)===224?15:7;let S=0,w;for(;(w=this.interim[++S]&63)&&S<4;)b<<=6,b|=w;let E=(this.interim[0]&224)===192?2:(this.interim[0]&240)===224?3:4,M=E-S;for(;d<M;){if(d>=r)return 0;if(w=e[d++],(w&192)!==128){d--,x=!0;break}else this.interim[S++]=w,b<<=6,b|=w&63}x||(E===2?b<128?d--:t[n++]=b:E===3?b<2048||b>=55296&&b<=57343||b===65279||(t[n++]=b):b<65536||b>1114111||(t[n++]=b)),this.interim.fill(0)}let v=r-4,_=d;for(;_<r;){for(;_<v&&!((o=e[_])&128)&&!((l=e[_+1])&128)&&!((c=e[_+2])&128)&&!((h=e[_+3])&128);)t[n++]=o,t[n++]=l,t[n++]=c,t[n++]=h,_+=4;if(o=e[_++],o<128)t[n++]=o;else if((o&224)===192){if(_>=r)return this.interim[0]=o,n;if(l=e[_++],(l&192)!==128){_--;continue}if(m=(o&31)<<6|l&63,m<128){_--;continue}t[n++]=m}else if((o&240)===224){if(_>=r)return this.interim[0]=o,n;if(l=e[_++],(l&192)!==128){_--;continue}if(_>=r)return this.interim[0]=o,this.interim[1]=l,n;if(c=e[_++],(c&192)!==128){_--;continue}if(m=(o&15)<<12|(l&63)<<6|c&63,m<2048||m>=55296&&m<=57343||m===65279)continue;t[n++]=m}else if((o&248)===240){if(_>=r)return this.interim[0]=o,n;if(l=e[_++],(l&192)!==128){_--;continue}if(_>=r)return this.interim[0]=o,this.interim[1]=l,n;if(c=e[_++],(c&192)!==128){_--;continue}if(_>=r)return this.interim[0]=o,this.interim[1]=l,this.interim[2]=c,n;if(h=e[_++],(h&192)!==128){_--;continue}if(m=(o&7)<<18|(l&63)<<12|(c&63)<<6|h&63,m<65536||m>1114111)continue;t[n++]=m}}return n}},hv="",Ss=" ",oo=class dv{constructor(){this.fg=0,this.bg=0,this.extended=new Ya}static toColorRGB(t){return[t>>>16&255,t>>>8&255,t&255]}static fromColorRGB(t){return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255}clone(){let t=new dv;return t.fg=this.fg,t.bg=this.bg,t.extended=this.extended.clone(),t}isInverse(){return this.fg&67108864}isBold(){return this.fg&134217728}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:this.fg&268435456}isBlink(){return this.fg&536870912}isInvisible(){return this.fg&1073741824}isItalic(){return this.bg&67108864}isDim(){return this.bg&134217728}isStrikethrough(){return this.fg&2147483648}isProtected(){return this.bg&536870912}isOverline(){return this.bg&1073741824}getFgColorMode(){return this.fg&50331648}getBgColorMode(){return this.bg&50331648}isFgRGB(){return(this.fg&50331648)===50331648}isBgRGB(){return(this.bg&50331648)===50331648}isFgPalette(){return(this.fg&50331648)===16777216||(this.fg&50331648)===33554432}isBgPalette(){return(this.bg&50331648)===16777216||(this.bg&50331648)===33554432}isFgDefault(){return(this.fg&50331648)===0}isBgDefault(){return(this.bg&50331648)===0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(this.fg&50331648){case 16777216:case 33554432:return this.fg&255;case 50331648:return this.fg&16777215;default:return-1}}getBgColor(){switch(this.bg&50331648){case 16777216:case 33554432:return this.bg&255;case 50331648:return this.bg&16777215;default:return-1}}hasExtendedAttrs(){return this.bg&268435456}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(this.bg&268435456&&~this.extended.underlineColor)switch(this.extended.underlineColor&50331648){case 16777216:case 33554432:return this.extended.underlineColor&255;case 50331648:return this.extended.underlineColor&16777215;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return this.bg&268435456&&~this.extended.underlineColor?this.extended.underlineColor&50331648:this.getFgColorMode()}isUnderlineColorRGB(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===50331648:this.isFgRGB()}isUnderlineColorPalette(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===16777216||(this.extended.underlineColor&50331648)===33554432:this.isFgPalette()}isUnderlineColorDefault(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===0:this.isFgDefault()}getUnderlineStyle(){return this.fg&268435456?this.bg&268435456?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}},Ya=class fv{constructor(t=0,r=0){this._ext=0,this._urlId=0,this._ext=t,this._urlId=r}get ext(){return this._urlId?this._ext&-469762049|this.underlineStyle<<26:this._ext}set ext(t){this._ext=t}get underlineStyle(){return this._urlId?5:(this._ext&469762048)>>26}set underlineStyle(t){this._ext&=-469762049,this._ext|=t<<26&469762048}get underlineColor(){return this._ext&67108863}set underlineColor(t){this._ext&=-67108864,this._ext|=t&67108863}get urlId(){return this._urlId}set urlId(t){this._urlId=t}get underlineVariantOffset(){let t=(this._ext&3758096384)>>29;return t<0?t^4294967288:t}set underlineVariantOffset(t){this._ext&=536870911,this._ext|=t<<29&3758096384}clone(){return new fv(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}},dr=class pv extends oo{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new Ya,this.combinedData=""}static fromCharData(t){let r=new pv;return r.setFromCharData(t),r}isCombined(){return this.content&2097152}getWidth(){return this.content>>22}getChars(){return this.content&2097152?this.combinedData:this.content&2097151?xs(this.content&2097151):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):this.content&2097151}setFromCharData(t){this.fg=t[0],this.bg=0;let r=!1;if(t[1].length>2)r=!0;else if(t[1].length===2){let n=t[1].charCodeAt(0);if(55296<=n&&n<=56319){let o=t[1].charCodeAt(1);56320<=o&&o<=57343?this.content=(n-55296)*1024+o-56320+65536|t[2]<<22:r=!0}else r=!0}else this.content=t[1].charCodeAt(0)|t[2]<<22;r&&(this.combinedData=t[1],this.content=2097152|t[2]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},tg="di$target",Yu="di$dependencies",Su=new Map;function TC(e){return e[Yu]||[]}function xt(e){if(Su.has(e))return Su.get(e);let t=function(r,n,o){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");BC(t,r,o)};return t._id=e,Su.set(e,t),t}function BC(e,t,r){t[tg]===t?t[Yu].push({id:e,index:r}):(t[Yu]=[{id:e,index:r}],t[tg]=t)}var Tt=xt("BufferService"),mv=xt("CoreMouseService"),ti=xt("CoreService"),IC=xt("CharsetService"),Qh=xt("InstantiationService"),gv=xt("LogService"),Bt=xt("OptionsService"),_v=xt("OscLinkService"),AC=xt("UnicodeService"),ao=xt("DecorationService"),Gu=class{constructor(e,t,r){this._bufferService=e,this._optionsService=t,this._oscLinkService=r}provideLinks(e,t){let r=this._bufferService.buffer.lines.get(e-1);if(!r){t(void 0);return}let n=[],o=this._optionsService.rawOptions.linkHandler,l=new dr,c=r.getTrimmedLength(),h=-1,m=-1,d=!1;for(let v=0;v<c;v++)if(!(m===-1&&!r.hasContent(v))){if(r.loadCell(v,l),l.hasExtendedAttrs()&&l.extended.urlId)if(m===-1){m=v,h=l.extended.urlId;continue}else d=l.extended.urlId!==h;else m!==-1&&(d=!0);if(d||m!==-1&&v===c-1){let _=this._oscLinkService.getLinkData(h)?.uri;if(_){let x={start:{x:m+1,y:e},end:{x:v+(!d&&v===c-1?1:0),y:e}},b=!1;if(!o?.allowNonHttpProtocols)try{let S=new URL(_);["http:","https:"].includes(S.protocol)||(b=!0)}catch{b=!0}b||n.push({text:_,range:x,activate:(S,w)=>o?o.activate(S,w,x):FC(S,w),hover:(S,w)=>o?.hover?.(S,w,x),leave:(S,w)=>o?.leave?.(S,w,x)})}d=!1,l.hasExtendedAttrs()&&l.extended.urlId?(m=v,h=l.extended.urlId):(m=-1,h=-1)}}t(n)}};Gu=Xe([ce(0,Tt),ce(1,Bt),ce(2,_v)],Gu);function FC(e,t){if(confirm(`Do you want to navigate to ${t}?

WARNING: This link could potentially be dangerous`)){let r=window.open();if(r){try{r.opener=null}catch{}r.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}}var ul=xt("CharSizeService"),Yr=xt("CoreBrowserService"),Yh=xt("MouseService"),Gr=xt("RenderService"),zC=xt("SelectionService"),vv=xt("CharacterJoinerService"),Hi=xt("ThemeService"),yv=xt("LinkProviderService"),$C=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?rg.isErrorNoTelemetry(e)?new rg(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},HC=new $C;function Ta(e){WC(e)||HC.onUnexpectedError(e)}var Xu="Canceled";function WC(e){return e instanceof UC?!0:e instanceof Error&&e.name===Xu&&e.message===Xu}var UC=class extends Error{constructor(){super(Xu),this.name=this.message}};function KC(e){return new Error(`Illegal argument: ${e}`)}var rg=class Ju extends Error{constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof Ju)return t;let r=new Ju;return r.message=t.message,r.stack=t.stack,r}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}},Zu=class xv extends Error{constructor(t){super(t||"An unexpected bug occurred."),Object.setPrototypeOf(this,xv.prototype)}};function Qt(e,t=0){return e[e.length-(1+t)]}var VC;(e=>{function t(l){return l<0}e.isLessThan=t;function r(l){return l<=0}e.isLessThanOrEqual=r;function n(l){return l>0}e.isGreaterThan=n;function o(l){return l===0}e.isNeitherLessOrGreaterThan=o,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(VC||={});function qC(e,t){let r=this,n=!1,o;return function(){return n||(n=!0,t||(o=e.apply(r,arguments))),o}}var Sv;(e=>{function t(A){return A&&typeof A=="object"&&typeof A[Symbol.iterator]=="function"}e.is=t;let r=Object.freeze([]);function n(){return r}e.empty=n;function*o(A){yield A}e.single=o;function l(A){return t(A)?A:o(A)}e.wrap=l;function c(A){return A||r}e.from=c;function*h(A){for(let U=A.length-1;U>=0;U--)yield A[U]}e.reverse=h;function m(A){return!A||A[Symbol.iterator]().next().done===!0}e.isEmpty=m;function d(A){return A[Symbol.iterator]().next().value}e.first=d;function v(A,U){let V=0;for(let Z of A)if(U(Z,V++))return!0;return!1}e.some=v;function _(A,U){for(let V of A)if(U(V))return V}e.find=_;function*x(A,U){for(let V of A)U(V)&&(yield V)}e.filter=x;function*b(A,U){let V=0;for(let Z of A)yield U(Z,V++)}e.map=b;function*S(A,U){let V=0;for(let Z of A)yield*U(Z,V++)}e.flatMap=S;function*w(...A){for(let U of A)yield*U}e.concat=w;function E(A,U,V){let Z=V;for(let le of A)Z=U(Z,le);return Z}e.reduce=E;function*M(A,U,V=A.length){for(U<0&&(U+=A.length),V<0?V+=A.length:V>A.length&&(V=A.length);U<V;U++)yield A[U]}e.slice=M;function P(A,U=Number.POSITIVE_INFINITY){let V=[];if(U===0)return[V,A];let Z=A[Symbol.iterator]();for(let le=0;le<U;le++){let te=Z.next();if(te.done)return[V,e.empty()];V.push(te.value)}return[V,{[Symbol.iterator](){return Z}}]}e.consume=P;async function j(A){let U=[];for await(let V of A)U.push(V);return Promise.resolve(U)}e.asyncToArray=j})(Sv||={});function Js(e){if(Sv.is(e)){let t=[];for(let r of e)if(r)try{r.dispose()}catch(n){t.push(n)}if(t.length===1)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function QC(...e){return Ue(()=>Js(e))}function Ue(e){return{dispose:qC(()=>{e()})}}var wv=class bv{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{Js(this._toDispose)}finally{this._toDispose.clear()}}add(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?bv.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(t),t}delete(t){if(t){if(t===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(t),t.dispose()}}deleteAndLeak(t){t&&this._toDispose.has(t)&&(this._toDispose.delete(t),void 0)}};wv.DISABLE_DISPOSED_WARNING=!1;var Cs=wv,Re=class{constructor(){this._store=new Cs,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};Re.None=Object.freeze({dispose(){}});var Bi=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){this._isDisposed||e===this._value||(this._value?.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}clearAndLeak(){let e=this._value;return this._value=void 0,e}},Kr=typeof window=="object"?window:globalThis,eh=class th{constructor(t){this.element=t,this.next=th.Undefined,this.prev=th.Undefined}};eh.Undefined=new eh(void 0);var qe=eh,sg=class{constructor(){this._first=qe.Undefined,this._last=qe.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===qe.Undefined}clear(){let e=this._first;for(;e!==qe.Undefined;){let t=e.next;e.prev=qe.Undefined,e.next=qe.Undefined,e=t}this._first=qe.Undefined,this._last=qe.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){let r=new qe(e);if(this._first===qe.Undefined)this._first=r,this._last=r;else if(t){let o=this._last;this._last=r,r.prev=o,o.next=r}else{let o=this._first;this._first=r,r.next=o,o.prev=r}this._size+=1;let n=!1;return()=>{n||(n=!0,this._remove(r))}}shift(){if(this._first!==qe.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==qe.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==qe.Undefined&&e.next!==qe.Undefined){let t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===qe.Undefined&&e.next===qe.Undefined?(this._first=qe.Undefined,this._last=qe.Undefined):e.next===qe.Undefined?(this._last=this._last.prev,this._last.next=qe.Undefined):e.prev===qe.Undefined&&(this._first=this._first.next,this._first.prev=qe.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==qe.Undefined;)yield e.element,e=e.next}},YC=globalThis.performance&&typeof globalThis.performance.now=="function",GC=class Cv{static create(t){return new Cv(t)}constructor(t){this._now=YC&&t===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}},bt;(e=>{e.None=()=>Re.None;function t(K,F){return _(K,()=>{},0,void 0,!0,void 0,F)}e.defer=t;function r(K){return(F,Y=null,O)=>{let B=!1,G;return G=K(D=>{if(!B)return G?G.dispose():B=!0,F.call(Y,D)},null,O),B&&G.dispose(),G}}e.once=r;function n(K,F,Y){return d((O,B=null,G)=>K(D=>O.call(B,F(D)),null,G),Y)}e.map=n;function o(K,F,Y){return d((O,B=null,G)=>K(D=>{F(D),O.call(B,D)},null,G),Y)}e.forEach=o;function l(K,F,Y){return d((O,B=null,G)=>K(D=>F(D)&&O.call(B,D),null,G),Y)}e.filter=l;function c(K){return K}e.signal=c;function h(...K){return(F,Y=null,O)=>{let B=QC(...K.map(G=>G(D=>F.call(Y,D))));return v(B,O)}}e.any=h;function m(K,F,Y,O){let B=Y;return n(K,G=>(B=F(B,G),B),O)}e.reduce=m;function d(K,F){let Y,O={onWillAddFirstListener(){Y=K(B.fire,B)},onDidRemoveLastListener(){Y?.dispose()}},B=new oe(O);return F?.add(B),B.event}function v(K,F){return F instanceof Array?F.push(K):F&&F.add(K),K}function _(K,F,Y=100,O=!1,B=!1,G,D){let Q,X,k,I=0,q,ie={leakWarningThreshold:G,onWillAddFirstListener(){Q=K(Se=>{I++,X=F(X,Se),O&&!k&&(xe.fire(X),X=void 0),q=()=>{let je=X;X=void 0,k=void 0,(!O||I>1)&&xe.fire(je),I=0},typeof Y=="number"?(clearTimeout(k),k=setTimeout(q,Y)):k===void 0&&(k=0,queueMicrotask(q))})},onWillRemoveListener(){B&&I>0&&q?.()},onDidRemoveLastListener(){q=void 0,Q.dispose()}},xe=new oe(ie);return D?.add(xe),xe.event}e.debounce=_;function x(K,F=0,Y){return e.debounce(K,(O,B)=>O?(O.push(B),O):[B],F,void 0,!0,void 0,Y)}e.accumulate=x;function b(K,F=(O,B)=>O===B,Y){let O=!0,B;return l(K,G=>{let D=O||!F(G,B);return O=!1,B=G,D},Y)}e.latch=b;function S(K,F,Y){return[e.filter(K,F,Y),e.filter(K,O=>!F(O),Y)]}e.split=S;function w(K,F=!1,Y=[],O){let B=Y.slice(),G=K(X=>{B?B.push(X):Q.fire(X)});O&&O.add(G);let D=()=>{B?.forEach(X=>Q.fire(X)),B=null},Q=new oe({onWillAddFirstListener(){G||(G=K(X=>Q.fire(X)),O&&O.add(G))},onDidAddFirstListener(){B&&(F?setTimeout(D):D())},onDidRemoveLastListener(){G&&G.dispose(),G=null}});return O&&O.add(Q),Q.event}e.buffer=w;function E(K,F){return(Y,O,B)=>{let G=F(new P);return K(function(D){let Q=G.evaluate(D);Q!==M&&Y.call(O,Q)},void 0,B)}}e.chain=E;let M=Symbol("HaltChainable");class P{constructor(){this.steps=[]}map(F){return this.steps.push(F),this}forEach(F){return this.steps.push(Y=>(F(Y),Y)),this}filter(F){return this.steps.push(Y=>F(Y)?Y:M),this}reduce(F,Y){let O=Y;return this.steps.push(B=>(O=F(O,B),O)),this}latch(F=(Y,O)=>Y===O){let Y=!0,O;return this.steps.push(B=>{let G=Y||!F(B,O);return Y=!1,O=B,G?B:M}),this}evaluate(F){for(let Y of this.steps)if(F=Y(F),F===M)break;return F}}function j(K,F,Y=O=>O){let O=(...Q)=>D.fire(Y(...Q)),B=()=>K.on(F,O),G=()=>K.removeListener(F,O),D=new oe({onWillAddFirstListener:B,onDidRemoveLastListener:G});return D.event}e.fromNodeEventEmitter=j;function A(K,F,Y=O=>O){let O=(...Q)=>D.fire(Y(...Q)),B=()=>K.addEventListener(F,O),G=()=>K.removeEventListener(F,O),D=new oe({onWillAddFirstListener:B,onDidRemoveLastListener:G});return D.event}e.fromDOMEventEmitter=A;function U(K){return new Promise(F=>r(K)(F))}e.toPromise=U;function V(K){let F=new oe;return K.then(Y=>{F.fire(Y)},()=>{F.fire(void 0)}).finally(()=>{F.dispose()}),F.event}e.fromPromise=V;function Z(K,F){return K(Y=>F.fire(Y))}e.forward=Z;function le(K,F,Y){return F(Y),K(O=>F(O))}e.runAndSubscribe=le;class te{constructor(F,Y){this._observable=F,this._counter=0,this._hasChanged=!1;let O={onWillAddFirstListener:()=>{F.addObserver(this)},onDidRemoveLastListener:()=>{F.removeObserver(this)}};this.emitter=new oe(O),Y&&Y.add(this.emitter)}beginUpdate(F){this._counter++}handlePossibleChange(F){}handleChange(F,Y){this._hasChanged=!0}endUpdate(F){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function T(K,F){return new te(K,F).emitter.event}e.fromObservable=T;function W(K){return(F,Y,O)=>{let B=0,G=!1,D={beginUpdate(){B++},endUpdate(){B--,B===0&&(K.reportChanges(),G&&(G=!1,F.call(Y)))},handlePossibleChange(){},handleChange(){G=!0}};K.addObserver(D),K.reportChanges();let Q={dispose(){K.removeObserver(D)}};return O instanceof Cs?O.add(Q):Array.isArray(O)&&O.push(Q),Q}}e.fromObservableLight=W})(bt||={});var rh=class sh{constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${t}_${sh._idPool++}`,sh.all.add(this)}start(t){this._stopWatch=new GC,this.listenerCount=t}stop(){if(this._stopWatch){let t=this._stopWatch.elapsed();this.durations.push(t),this.elapsedOverall+=t,this.invocationCount+=1,this._stopWatch=void 0}}};rh.all=new Set,rh._idPool=0;var XC=rh,JC=-1,kv=class Ev{constructor(t,r,n=(Ev._idPool++).toString(16).padStart(3,"0")){this._errorHandler=t,this.threshold=r,this.name=n,this._warnCountdown=0}dispose(){this._stacks?.clear()}check(t,r){let n=this.threshold;if(n<=0||r<n)return;this._stacks||(this._stacks=new Map);let o=this._stacks.get(t.value)||0;if(this._stacks.set(t.value,o+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let[l,c]=this.getMostFrequentStack(),h=`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${c}):`;console.warn(h),console.warn(l);let m=new t2(h,l);this._errorHandler(m)}return()=>{let l=this._stacks.get(t.value)||0;this._stacks.set(t.value,l-1)}}getMostFrequentStack(){if(!this._stacks)return;let t,r=0;for(let[n,o]of this._stacks)(!t||r<o)&&(t=[n,o],r=o);return t}};kv._idPool=1;var ZC=kv,e2=class Nv{constructor(t){this.value=t}static create(){let t=new Error;return new Nv(t.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},t2=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},r2=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},s2=0,wu=class{constructor(e){this.value=e,this.id=s2++}},i2=2,n2,oe=class{constructor(t){this._size=0,this._options=t,this._leakageMon=this._options?.leakWarningThreshold?new ZC(t?.onListenerError??Ta,this._options?.leakWarningThreshold??JC):void 0,this._perfMon=this._options?._profName?new XC(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){this._disposed||(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose())}get event(){return this._event??=(t,r,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let h=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(h);let m=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],d=new r2(`${h}. HINT: Stack shows most frequent listener (${m[1]}-times)`,m[0]);return(this._options?.onListenerError||Ta)(d),Re.None}if(this._disposed)return Re.None;r&&(t=t.bind(r));let o=new wu(t),l;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(o.stack=e2.create(),l=this._leakageMon.check(o.stack,this._size+1)),this._listeners?this._listeners instanceof wu?(this._deliveryQueue??=new o2,this._listeners=[this._listeners,o]):this._listeners.push(o):(this._options?.onWillAddFirstListener?.(this),this._listeners=o,this._options?.onDidAddFirstListener?.(this)),this._size++;let c=Ue(()=>{l?.(),this._removeListener(o)});return n instanceof Cs?n.add(c):Array.isArray(n)&&n.push(c),c},this._event}_removeListener(t){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let r=this._listeners,n=r.indexOf(t);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,r[n]=void 0;let o=this._deliveryQueue.current===this;if(this._size*i2<=r.length){let l=0;for(let c=0;c<r.length;c++)r[c]?r[l++]=r[c]:o&&(this._deliveryQueue.end--,l<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=l}}_deliver(t,r){if(!t)return;let n=this._options?.onListenerError||Ta;if(!n){t.value(r);return}try{t.value(r)}catch(o){n(o)}}_deliverQueue(t){let r=t.current._listeners;for(;t.i<t.end;)this._deliver(r[t.i++],t.value);t.reset()}fire(t){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof wu)this._deliver(this._listeners,t);else{let r=this._deliveryQueue;r.enqueue(this,t,this._listeners.length),this._deliverQueue(r)}this._perfMon?.stop()}hasListeners(){return this._size>0}},o2=class{constructor(){this.i=-1,this.end=0}enqueue(e,t,r){this.i=0,this.end=r,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},ih=class{constructor(){this.mapWindowIdToZoomLevel=new Map,this._onDidChangeZoomLevel=new oe,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this.mapWindowIdToZoomFactor=new Map,this._onDidChangeFullscreen=new oe,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event,this.mapWindowIdToFullScreen=new Map}getZoomLevel(t){return this.mapWindowIdToZoomLevel.get(this.getWindowId(t))??0}setZoomLevel(t,r){if(this.getZoomLevel(r)===t)return;let n=this.getWindowId(r);this.mapWindowIdToZoomLevel.set(n,t),this._onDidChangeZoomLevel.fire(n)}getZoomFactor(t){return this.mapWindowIdToZoomFactor.get(this.getWindowId(t))??1}setZoomFactor(t,r){this.mapWindowIdToZoomFactor.set(this.getWindowId(r),t)}setFullscreen(t,r){if(this.isFullscreen(r)===t)return;let n=this.getWindowId(r);this.mapWindowIdToFullScreen.set(n,t),this._onDidChangeFullscreen.fire(n)}isFullscreen(t){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(t))}getWindowId(t){return t.vscodeWindowId}};ih.INSTANCE=new ih;var Gh=ih;function a2(e,t,r){typeof t=="string"&&(t=e.matchMedia(t)),t.addEventListener("change",r)}Gh.INSTANCE.onDidChangeZoomLevel;function l2(e){return Gh.INSTANCE.getZoomFactor(e)}Gh.INSTANCE.onDidChangeFullscreen;var Wi=typeof navigator=="object"?navigator.userAgent:"",nh=Wi.indexOf("Firefox")>=0,c2=Wi.indexOf("AppleWebKit")>=0,Xh=Wi.indexOf("Chrome")>=0,u2=!Xh&&Wi.indexOf("Safari")>=0;Wi.indexOf("Electron/")>=0;Wi.indexOf("Android")>=0;var bu=!1;if(typeof Kr.matchMedia=="function"){let e=Kr.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),t=Kr.matchMedia("(display-mode: fullscreen)");bu=e.matches,a2(Kr,e,({matches:r})=>{bu&&t.matches||(bu=r)})}var Mi="en",oh=!1,ah=!1,Ba=!1,Pv=!1,ka,Ia=Mi,ig=Mi,h2,Ur,qs=globalThis,Gt;typeof qs.vscode<"u"&&typeof qs.vscode.process<"u"?Gt=qs.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Gt=process);var d2=typeof Gt?.versions?.electron=="string",f2=d2&&Gt?.type==="renderer";if(typeof Gt=="object"){oh=Gt.platform==="win32",ah=Gt.platform==="darwin",Ba=Gt.platform==="linux",Ba&&Gt.env.SNAP&&Gt.env.SNAP_REVISION,Gt.env.CI||Gt.env.BUILD_ARTIFACTSTAGINGDIRECTORY,ka=Mi,Ia=Mi;let e=Gt.env.VSCODE_NLS_CONFIG;if(e)try{let t=JSON.parse(e);ka=t.userLocale,ig=t.osLocale,Ia=t.resolvedLanguage||Mi,h2=t.languagePack?.translationsConfigFile}catch{}Pv=!0}else typeof navigator=="object"&&!f2?(Ur=navigator.userAgent,oh=Ur.indexOf("Windows")>=0,ah=Ur.indexOf("Macintosh")>=0,(Ur.indexOf("Macintosh")>=0||Ur.indexOf("iPad")>=0||Ur.indexOf("iPhone")>=0)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Ba=Ur.indexOf("Linux")>=0,Ur?.indexOf("Mobi")>=0,Ia=globalThis._VSCODE_NLS_LANGUAGE||Mi,ka=navigator.language.toLowerCase(),ig=ka):console.error("Unable to resolve platform.");var Rv=oh,Mr=ah,p2=Ba,ng=Pv,Or=Ur,_s=Ia,m2;(e=>{function t(){return _s}e.value=t;function r(){return _s.length===2?_s==="en":_s.length>=3?_s[0]==="e"&&_s[1]==="n"&&_s[2]==="-":!1}e.isDefaultVariant=r;function n(){return _s==="en"}e.isDefault=n})(m2||={});var g2=typeof qs.postMessage=="function"&&!qs.importScripts;(()=>{if(g2){let e=[];qs.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,o=e.length;n<o;n++){let l=e[n];if(l.id===r.data.vscodeScheduleAsyncWork){e.splice(n,1),l.callback();return}}});let t=0;return r=>{let n=++t;e.push({id:n,callback:r}),qs.postMessage({vscodeScheduleAsyncWork:n},"*")}}return e=>setTimeout(e)})();var _2=!!(Or&&Or.indexOf("Chrome")>=0);Or&&Or.indexOf("Firefox")>=0;!_2&&Or&&Or.indexOf("Safari")>=0;Or&&Or.indexOf("Edg/")>=0;Or&&Or.indexOf("Android")>=0;var Pi=typeof navigator=="object"?navigator:{};ng||document.queryCommandSupported&&document.queryCommandSupported("copy")||Pi&&Pi.clipboard&&Pi.clipboard.writeText,ng||Pi&&Pi.clipboard&&Pi.clipboard.readText;var Jh=class{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}},Cu=new Jh,og=new Jh,ag=new Jh,v2=new Array(230),Lv;(e=>{function t(h){return Cu.keyCodeToStr(h)}e.toString=t;function r(h){return Cu.strToKeyCode(h)}e.fromString=r;function n(h){return og.keyCodeToStr(h)}e.toUserSettingsUS=n;function o(h){return ag.keyCodeToStr(h)}e.toUserSettingsGeneral=o;function l(h){return og.strToKeyCode(h)||ag.strToKeyCode(h)}e.fromUserSettings=l;function c(h){if(h>=98&&h<=113)return null;switch(h){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return Cu.keyCodeToStr(h)}e.toElectronAccelerator=c})(Lv||={});var y2=class jv{constructor(t,r,n,o,l){this.ctrlKey=t,this.shiftKey=r,this.altKey=n,this.metaKey=o,this.keyCode=l}equals(t){return t instanceof jv&&this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode}getHashCode(){let t=this.ctrlKey?"1":"0",r=this.shiftKey?"1":"0",n=this.altKey?"1":"0",o=this.metaKey?"1":"0";return`K${t}${r}${n}${o}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new x2([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},x2=class{constructor(e){if(e.length===0)throw KC("chords");this.chords=e}getHashCode(){let e="";for(let t=0,r=this.chords.length;t<r;t++)t!==0&&(e+=";"),e+=this.chords[t].getHashCode();return e}equals(e){if(e===null||this.chords.length!==e.chords.length)return!1;for(let t=0;t<this.chords.length;t++)if(!this.chords[t].equals(e.chords[t]))return!1;return!0}};function S2(e){if(e.charCode){let r=String.fromCharCode(e.charCode).toUpperCase();return Lv.fromString(r)}let t=e.keyCode;if(t===3)return 7;if(nh)switch(t){case 59:return 85;case 60:if(p2)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(Mr)return 57;break}else if(c2&&(Mr&&t===93||!Mr&&t===92))return 57;return v2[t]||0}var w2=Mr?256:2048,b2=512,C2=1024,k2=Mr?2048:256,lg=class{constructor(e){this._standardKeyboardEventBrand=!0;let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=t.getModifierState?.("AltGraph"),this.keyCode=S2(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=w2),this.altKey&&(t|=b2),this.shiftKey&&(t|=C2),this.metaKey&&(t|=k2),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new y2(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}},cg=new WeakMap;function E2(e){if(!e.parent||e.parent===e)return null;try{let t=e.location,r=e.parent.location;if(t.origin!=="null"&&r.origin!=="null"&&t.origin!==r.origin)return null}catch{return null}return e.parent}var N2=class{static getSameOriginWindowChain(e){let t=cg.get(e);if(!t){t=[],cg.set(e,t);let r=e,n;do n=E2(r),n?t.push({window:new WeakRef(r),iframeElement:r.frameElement||null}):t.push({window:new WeakRef(r),iframeElement:null}),r=n;while(r)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let r=0,n=0,o=this.getSameOriginWindowChain(e);for(let l of o){let c=l.window.deref();if(r+=c?.scrollY??0,n+=c?.scrollX??0,c===t||!l.iframeElement)break;let h=l.iframeElement.getBoundingClientRect();r+=h.top,n+=h.left}return{top:r,left:n}}},Ea=class{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let r=N2.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=r.left,this.posy-=r.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}},ug=class{constructor(e,t=0,r=0){this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=r,this.deltaX=t;let n=!1;if(Xh){let o=navigator.userAgent.match(/Chrome\/(\d+)/);n=(o?parseInt(o[1]):123)<=122}if(e){let o=e,l=e,c=e.view?.devicePixelRatio||1;if(typeof o.wheelDeltaY<"u")n?this.deltaY=o.wheelDeltaY/(120*c):this.deltaY=o.wheelDeltaY/120;else if(typeof l.VERTICAL_AXIS<"u"&&l.axis===l.VERTICAL_AXIS)this.deltaY=-l.detail/3;else if(e.type==="wheel"){let h=e;h.deltaMode===h.DOM_DELTA_LINE?nh&&!Mr?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof o.wheelDeltaX<"u")u2&&Rv?this.deltaX=-(o.wheelDeltaX/120):n?this.deltaX=o.wheelDeltaX/(120*c):this.deltaX=o.wheelDeltaX/120;else if(typeof l.HORIZONTAL_AXIS<"u"&&l.axis===l.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){let h=e;h.deltaMode===h.DOM_DELTA_LINE?nh&&!Mr?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(n?this.deltaY=e.wheelDelta/(120*c):this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}},Dv=Object.freeze(function(e,t){let r=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(r)}}}),P2;(e=>{function t(r){return r===e.None||r===e.Cancelled||r instanceof R2?!0:!r||typeof r!="object"?!1:typeof r.isCancellationRequested=="boolean"&&typeof r.onCancellationRequested=="function"}e.isCancellationToken=t,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:bt.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Dv})})(P2||={});var R2=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Dv:(this._emitter||(this._emitter=new oe),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},Zh=class{constructor(e,t){this._isDisposed=!1,this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new Zu("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new Zu("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}},L2=class{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(e,t,r=globalThis){if(this.isDisposed)throw new Zu("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let n=r.setInterval(()=>{e()},t);this.disposable=Ue(()=>{r.clearInterval(n),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},j2;(e=>{async function t(n){let o,l=await Promise.all(n.map(c=>c.then(h=>h,h=>{o||(o=h)})));if(typeof o<"u")throw o;return l}e.settled=t;function r(n){return new Promise(async(o,l)=>{try{await n(o,l)}catch(c){l(c)}})}e.withAsyncBody=r})(j2||={});var hg=class lr{static fromArray(t){return new lr(r=>{r.emitMany(t)})}static fromPromise(t){return new lr(async r=>{r.emitMany(await t)})}static fromPromises(t){return new lr(async r=>{await Promise.all(t.map(async n=>r.emitOne(await n)))})}static merge(t){return new lr(async r=>{await Promise.all(t.map(async n=>{for await(let o of n)r.emitOne(o)}))})}constructor(t,r){this._state=0,this._results=[],this._error=null,this._onReturn=r,this._onStateChanged=new oe,queueMicrotask(async()=>{let n={emitOne:o=>this.emitOne(o),emitMany:o=>this.emitMany(o),reject:o=>this.reject(o)};try{await Promise.resolve(t(n)),this.resolve()}catch(o){this.reject(o)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(t<this._results.length)return{done:!1,value:this._results[t++]};if(this._state===1)return{done:!0,value:void 0};await bt.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(t,r){return new lr(async n=>{for await(let o of t)n.emitOne(r(o))})}map(t){return lr.map(this,t)}static filter(t,r){return new lr(async n=>{for await(let o of t)r(o)&&n.emitOne(o)})}filter(t){return lr.filter(this,t)}static coalesce(t){return lr.filter(t,r=>!!r)}coalesce(){return lr.coalesce(this)}static async toPromise(t){let r=[];for await(let n of t)r.push(n);return r}toPromise(){return lr.toPromise(this)}emitOne(t){this._state===0&&(this._results.push(t),this._onStateChanged.fire())}emitMany(t){this._state===0&&(this._results=this._results.concat(t),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(t){this._state===0&&(this._state=2,this._error=t,this._onStateChanged.fire())}};hg.EMPTY=hg.fromArray([]);var{getWindow:Dr,getWindowId:D2,onDidRegisterWindow:M2}=(function(){let e=new Map,t={window:Kr,disposables:new Cs};e.set(Kr.vscodeWindowId,t);let r=new oe,n=new oe,o=new oe;function l(c,h){return(typeof c=="number"?e.get(c):void 0)??(h?t:void 0)}return{onDidRegisterWindow:r.event,onWillUnregisterWindow:o.event,onDidUnregisterWindow:n.event,registerWindow(c){if(e.has(c.vscodeWindowId))return Re.None;let h=new Cs,m={window:c,disposables:h.add(new Cs)};return e.set(c.vscodeWindowId,m),h.add(Ue(()=>{e.delete(c.vscodeWindowId),n.fire(c)})),h.add(be(c,mt.BEFORE_UNLOAD,()=>{o.fire(c)})),r.fire(m),h},getWindows(){return e.values()},getWindowsCount(){return e.size},getWindowId(c){return c.vscodeWindowId},hasWindow(c){return e.has(c)},getWindowById:l,getWindow(c){let h=c;if(h?.ownerDocument?.defaultView)return h.ownerDocument.defaultView.window;let m=c;return m?.view?m.view.window:Kr},getDocument(c){return Dr(c).document}}})(),O2=class{constructor(e,t,r,n){this._node=e,this._type=t,this._handler=r,this._options=n||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function be(e,t,r,n){return new O2(e,t,r,n)}var dg=function(e,t,r,n){return be(e,t,r,n)},ed,T2=class extends L2{constructor(e){super(),this.defaultTarget=e&&Dr(e)}cancelAndSet(e,t,r){return super.cancelAndSet(e,t,r??this.defaultTarget)}},fg=class{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Ta(e)}}static sort(e,t){return t.priority-e.priority}};(function(){let e=new Map,t=new Map,r=new Map,n=new Map,o=l=>{r.set(l,!1);let c=e.get(l)??[];for(t.set(l,c),e.set(l,[]),n.set(l,!0);c.length>0;)c.sort(fg.sort),c.shift().execute();n.set(l,!1)};ed=(l,c,h=0)=>{let m=D2(l),d=new fg(c,h),v=e.get(m);return v||(v=[],e.set(m,v)),v.push(d),r.get(m)||(r.set(m,!0),l.requestAnimationFrame(()=>o(m))),d}})();function B2(e){let t=e.getBoundingClientRect(),r=Dr(e);return{left:t.left+r.scrollX,top:t.top+r.scrollY,width:t.width,height:t.height}}var mt={CLICK:"click",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",KEY_DOWN:"keydown",KEY_UP:"keyup",BEFORE_UNLOAD:"beforeunload",CHANGE:"change",FOCUS:"focus",BLUR:"blur",INPUT:"input"},I2=class{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingTop="",this._paddingLeft="",this._paddingBottom="",this._paddingRight="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){let t=Wt(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){let t=Wt(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){let t=Wt(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){let t=Wt(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){let t=Wt(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){let t=Wt(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){let t=Wt(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingTop(e){let t=Wt(e);this._paddingTop!==t&&(this._paddingTop=t,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(e){let t=Wt(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(e){let t=Wt(e);this._paddingBottom!==t&&(this._paddingBottom=t,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(e){let t=Wt(e);this._paddingRight!==t&&(this._paddingRight=t,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){let t=Wt(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){let t=Wt(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){let t=Wt(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}};function Wt(e){return typeof e=="number"?`${e}px`:e}function Qn(e){return new I2(e)}var Mv=class{constructor(){this._hooks=new Cs,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let r=this._onStopCallback;this._onStopCallback=null,e&&r&&r(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,r,n,o){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=n,this._onStopCallback=o;let l=e;try{e.setPointerCapture(t),this._hooks.add(Ue(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{l=Dr(e)}this._hooks.add(be(l,mt.POINTER_MOVE,c=>{if(c.buttons!==r){this.stopMonitoring(!0);return}c.preventDefault(),this._pointerMoveCallback(c)})),this._hooks.add(be(l,mt.POINTER_UP,c=>this.stopMonitoring(!0)))}};function A2(e,t,r){let n=null,o=null;if(typeof r.value=="function"?(n="value",o=r.value,o.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof r.get=="function"&&(n="get",o=r.get),!o)throw new Error("not supported");let l=`$memoize$${t}`;r[n]=function(...c){return this.hasOwnProperty(l)||Object.defineProperty(this,l,{configurable:!1,enumerable:!1,writable:!1,value:o.apply(this,c)}),this[l]}}var Lr;(e=>(e.Tap="-xterm-gesturetap",e.Change="-xterm-gesturechange",e.Start="-xterm-gesturestart",e.End="-xterm-gesturesend",e.Contextmenu="-xterm-gesturecontextmenu"))(Lr||={});var zn=class Rt extends Re{constructor(){super(),this.dispatched=!1,this.targets=new sg,this.ignoreTargets=new sg,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(bt.runAndSubscribe(M2,({window:t,disposables:r})=>{r.add(be(t.document,"touchstart",n=>this.onTouchStart(n),{passive:!1})),r.add(be(t.document,"touchend",n=>this.onTouchEnd(t,n))),r.add(be(t.document,"touchmove",n=>this.onTouchMove(n),{passive:!1}))},{window:Kr,disposables:this._store}))}static addTarget(t){if(!Rt.isTouchDevice())return Re.None;Rt.INSTANCE||(Rt.INSTANCE=new Rt);let r=Rt.INSTANCE.targets.push(t);return Ue(r)}static ignoreTarget(t){if(!Rt.isTouchDevice())return Re.None;Rt.INSTANCE||(Rt.INSTANCE=new Rt);let r=Rt.INSTANCE.ignoreTargets.push(t);return Ue(r)}static isTouchDevice(){return"ontouchstart"in Kr||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(t){let r=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,o=t.targetTouches.length;n<o;n++){let l=t.targetTouches.item(n);this.activeTouches[l.identifier]={id:l.identifier,initialTarget:l.target,initialTimeStamp:r,initialPageX:l.pageX,initialPageY:l.pageY,rollingTimestamps:[r],rollingPageX:[l.pageX],rollingPageY:[l.pageY]};let c=this.newGestureEvent(Lr.Start,l.target);c.pageX=l.pageX,c.pageY=l.pageY,this.dispatchEvent(c)}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}onTouchEnd(t,r){let n=Date.now(),o=Object.keys(this.activeTouches).length;for(let l=0,c=r.changedTouches.length;l<c;l++){let h=r.changedTouches.item(l);if(!this.activeTouches.hasOwnProperty(String(h.identifier))){console.warn("move of an UNKNOWN touch",h);continue}let m=this.activeTouches[h.identifier],d=Date.now()-m.initialTimeStamp;if(d<Rt.HOLD_DELAY&&Math.abs(m.initialPageX-Qt(m.rollingPageX))<30&&Math.abs(m.initialPageY-Qt(m.rollingPageY))<30){let v=this.newGestureEvent(Lr.Tap,m.initialTarget);v.pageX=Qt(m.rollingPageX),v.pageY=Qt(m.rollingPageY),this.dispatchEvent(v)}else if(d>=Rt.HOLD_DELAY&&Math.abs(m.initialPageX-Qt(m.rollingPageX))<30&&Math.abs(m.initialPageY-Qt(m.rollingPageY))<30){let v=this.newGestureEvent(Lr.Contextmenu,m.initialTarget);v.pageX=Qt(m.rollingPageX),v.pageY=Qt(m.rollingPageY),this.dispatchEvent(v)}else if(o===1){let v=Qt(m.rollingPageX),_=Qt(m.rollingPageY),x=Qt(m.rollingTimestamps)-m.rollingTimestamps[0],b=v-m.rollingPageX[0],S=_-m.rollingPageY[0],w=[...this.targets].filter(E=>m.initialTarget instanceof Node&&E.contains(m.initialTarget));this.inertia(t,w,n,Math.abs(b)/x,b>0?1:-1,v,Math.abs(S)/x,S>0?1:-1,_)}this.dispatchEvent(this.newGestureEvent(Lr.End,m.initialTarget)),delete this.activeTouches[h.identifier]}this.dispatched&&(r.preventDefault(),r.stopPropagation(),this.dispatched=!1)}newGestureEvent(t,r){let n=document.createEvent("CustomEvent");return n.initEvent(t,!1,!0),n.initialTarget=r,n.tapCount=0,n}dispatchEvent(t){if(t.type===Lr.Tap){let r=new Date().getTime(),n=0;r-this._lastSetTapCountTime>Rt.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=r,t.tapCount=n}else(t.type===Lr.Change||t.type===Lr.Contextmenu)&&(this._lastSetTapCountTime=0);if(t.initialTarget instanceof Node){for(let n of this.ignoreTargets)if(n.contains(t.initialTarget))return;let r=[];for(let n of this.targets)if(n.contains(t.initialTarget)){let o=0,l=t.initialTarget;for(;l&&l!==n;)o++,l=l.parentElement;r.push([o,n])}r.sort((n,o)=>n[0]-o[0]);for(let[n,o]of r)o.dispatchEvent(t),this.dispatched=!0}}inertia(t,r,n,o,l,c,h,m,d){this.handle=ed(t,()=>{let v=Date.now(),_=v-n,x=0,b=0,S=!0;o+=Rt.SCROLL_FRICTION*_,h+=Rt.SCROLL_FRICTION*_,o>0&&(S=!1,x=l*o*_),h>0&&(S=!1,b=m*h*_);let w=this.newGestureEvent(Lr.Change);w.translationX=x,w.translationY=b,r.forEach(E=>E.dispatchEvent(w)),S||this.inertia(t,r,v,o,l,c+x,h,m,d+b)})}onTouchMove(t){let r=Date.now();for(let n=0,o=t.changedTouches.length;n<o;n++){let l=t.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(l.identifier))){console.warn("end of an UNKNOWN touch",l);continue}let c=this.activeTouches[l.identifier],h=this.newGestureEvent(Lr.Change,c.initialTarget);h.translationX=l.pageX-Qt(c.rollingPageX),h.translationY=l.pageY-Qt(c.rollingPageY),h.pageX=l.pageX,h.pageY=l.pageY,this.dispatchEvent(h),c.rollingPageX.length>3&&(c.rollingPageX.shift(),c.rollingPageY.shift(),c.rollingTimestamps.shift()),c.rollingPageX.push(l.pageX),c.rollingPageY.push(l.pageY),c.rollingTimestamps.push(r)}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}};zn.SCROLL_FRICTION=-.005,zn.HOLD_DELAY=700,zn.CLEAR_TAP_COUNT_TIME=400,Xe([A2],zn,"isTouchDevice",1);var F2=zn,td=class extends Re{onclick(e,t){this._register(be(e,mt.CLICK,r=>t(new Ea(Dr(e),r))))}onmousedown(e,t){this._register(be(e,mt.MOUSE_DOWN,r=>t(new Ea(Dr(e),r))))}onmouseover(e,t){this._register(be(e,mt.MOUSE_OVER,r=>t(new Ea(Dr(e),r))))}onmouseleave(e,t){this._register(be(e,mt.MOUSE_LEAVE,r=>t(new Ea(Dr(e),r))))}onkeydown(e,t){this._register(be(e,mt.KEY_DOWN,r=>t(new lg(r))))}onkeyup(e,t){this._register(be(e,mt.KEY_UP,r=>t(new lg(r))))}oninput(e,t){this._register(be(e,mt.INPUT,t))}onblur(e,t){this._register(be(e,mt.BLUR,t))}onfocus(e,t){this._register(be(e,mt.FOCUS,t))}onchange(e,t){this._register(be(e,mt.CHANGE,t))}ignoreGesture(e){return F2.ignoreTarget(e)}},pg=11,z2=class extends td{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.style.position="absolute",this.domNode.style.width=pg+"px",this.domNode.style.height=pg+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new Mv),this._register(dg(this.bgDomNode,mt.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(dg(this.domNode,mt.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new T2),this._pointerdownScheduleRepeatTimer=this._register(new Zh)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,Dr(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}},$2=class lh{constructor(t,r,n,o,l,c,h){this._forceIntegerValues=t,this._scrollStateBrand=void 0,this._forceIntegerValues&&(r=r|0,n=n|0,o=o|0,l=l|0,c=c|0,h=h|0),this.rawScrollLeft=o,this.rawScrollTop=h,r<0&&(r=0),o+r>n&&(o=n-r),o<0&&(o=0),l<0&&(l=0),h+l>c&&(h=c-l),h<0&&(h=0),this.width=r,this.scrollWidth=n,this.scrollLeft=o,this.height=l,this.scrollHeight=c,this.scrollTop=h}equals(t){return this.rawScrollLeft===t.rawScrollLeft&&this.rawScrollTop===t.rawScrollTop&&this.width===t.width&&this.scrollWidth===t.scrollWidth&&this.scrollLeft===t.scrollLeft&&this.height===t.height&&this.scrollHeight===t.scrollHeight&&this.scrollTop===t.scrollTop}withScrollDimensions(t,r){return new lh(this._forceIntegerValues,typeof t.width<"u"?t.width:this.width,typeof t.scrollWidth<"u"?t.scrollWidth:this.scrollWidth,r?this.rawScrollLeft:this.scrollLeft,typeof t.height<"u"?t.height:this.height,typeof t.scrollHeight<"u"?t.scrollHeight:this.scrollHeight,r?this.rawScrollTop:this.scrollTop)}withScrollPosition(t){return new lh(this._forceIntegerValues,this.width,this.scrollWidth,typeof t.scrollLeft<"u"?t.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof t.scrollTop<"u"?t.scrollTop:this.rawScrollTop)}createScrollEvent(t,r){let n=this.width!==t.width,o=this.scrollWidth!==t.scrollWidth,l=this.scrollLeft!==t.scrollLeft,c=this.height!==t.height,h=this.scrollHeight!==t.scrollHeight,m=this.scrollTop!==t.scrollTop;return{inSmoothScrolling:r,oldWidth:t.width,oldScrollWidth:t.scrollWidth,oldScrollLeft:t.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:t.height,oldScrollHeight:t.scrollHeight,oldScrollTop:t.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:o,scrollLeftChanged:l,heightChanged:c,scrollHeightChanged:h,scrollTopChanged:m}}},H2=class extends Re{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new oe),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new $2(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){let r=this._state.withScrollDimensions(e,t);this._setState(r,!!this._smoothScrolling),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){let t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};let r=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===r.scrollLeft&&this._smoothScrolling.to.scrollTop===r.scrollTop)return;let n;t?n=new gg(this._smoothScrolling.from,r,this._smoothScrolling.startTime,this._smoothScrolling.duration):n=this._smoothScrolling.combine(this._state,r,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=n}else{let r=this._state.withScrollPosition(e);this._smoothScrolling=gg.start(this._state,r,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){let r=this._state;r.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(r,t)))}},mg=class{constructor(e,t,r){this.scrollLeft=e,this.scrollTop=t,this.isDone=r}};function ku(e,t){let r=t-e;return function(n){return e+r*K2(n)}}function W2(e,t,r){return function(n){return n<r?e(n/r):t((n-r)/(1-r))}}var gg=class ch{constructor(t,r,n,o){this.from=t,this.to=r,this.duration=o,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(t,r,n){if(Math.abs(t-r)>2.5*n){let o,l;return t<r?(o=t+.75*n,l=r-.75*n):(o=t-.75*n,l=r+.75*n),W2(ku(t,o),ku(l,r),.33)}return ku(t,r)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(t){this.to=t.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(t){let r=(t-this.startTime)/this.duration;if(r<1){let n=this.scrollLeft(r),o=this.scrollTop(r);return new mg(n,o,!1)}return new mg(this.to.scrollLeft,this.to.scrollTop,!0)}combine(t,r,n){return ch.start(t,r,n)}static start(t,r,n){n=n+10;let o=Date.now()-10;return new ch(t,r,o,n)}};function U2(e){return Math.pow(e,3)}function K2(e){return 1-U2(1-e)}var V2=class extends Re{constructor(e,t,r){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=r,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Zh)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode?.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(e?" fade":"")))}},q2=140,Ov=class extends td{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new V2(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new Mv),this._shouldRender=!0,this.domNode=Qn(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(be(this.domNode.domNode,mt.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){let t=this._register(new z2(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,r,n){this.slider=Qn(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof r=="number"&&this.slider.setWidth(r),typeof n=="number"&&this.slider.setHeight(n),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(be(this.slider.domNode,mt.POINTER_DOWN,o=>{o.button===0&&(o.preventDefault(),this._sliderPointerDown(o))})),this.onclick(this.slider.domNode,o=>{o.leftButton&&o.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){let t=this.domNode.domNode.getClientRects()[0].top,r=t+this._scrollbarState.getSliderPosition(),n=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),o=this._sliderPointerPosition(e);r<=o&&o<=n?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,r;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,r=e.offsetY;else{let o=B2(this.domNode.domNode);t=e.pageX-o.left,r=e.pageY-o.top}let n=this._pointerDownRelativePosition(t,r);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(n):this._scrollbarState.getDesiredScrollPositionFromOffset(n)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=this._sliderPointerPosition(e),r=this._sliderOrthogonalPointerPosition(e),n=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>{let l=this._sliderOrthogonalPointerPosition(o),c=Math.abs(l-r);if(Rv&&c>q2){this._setDesiredScrollPositionNow(n.getScrollPosition());return}let h=this._sliderPointerPosition(o)-t;this._setDesiredScrollPositionNow(n.getDesiredScrollPositionFromDelta(h))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){let t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}},Tv=class uh{constructor(t,r,n,o,l,c){this._scrollbarSize=Math.round(r),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(t),this._visibleSize=o,this._scrollSize=l,this._scrollPosition=c,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new uh(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(t){let r=Math.round(t);return this._visibleSize!==r?(this._visibleSize=r,this._refreshComputedValues(),!0):!1}setScrollSize(t){let r=Math.round(t);return this._scrollSize!==r?(this._scrollSize=r,this._refreshComputedValues(),!0):!1}setScrollPosition(t){let r=Math.round(t);return this._scrollPosition!==r?(this._scrollPosition=r,this._refreshComputedValues(),!0):!1}setScrollbarSize(t){this._scrollbarSize=Math.round(t)}setOppositeScrollbarSize(t){this._oppositeScrollbarSize=Math.round(t)}static _computeValues(t,r,n,o,l){let c=Math.max(0,n-t),h=Math.max(0,c-2*r),m=o>0&&o>n;if(!m)return{computedAvailableSize:Math.round(c),computedIsNeeded:m,computedSliderSize:Math.round(h),computedSliderRatio:0,computedSliderPosition:0};let d=Math.round(Math.max(20,Math.floor(n*h/o))),v=(h-d)/(o-n),_=l*v;return{computedAvailableSize:Math.round(c),computedIsNeeded:m,computedSliderSize:Math.round(d),computedSliderRatio:v,computedSliderPosition:Math.round(_)}}_refreshComputedValues(){let t=uh._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=t.computedAvailableSize,this._computedIsNeeded=t.computedIsNeeded,this._computedSliderSize=t.computedSliderSize,this._computedSliderRatio=t.computedSliderRatio,this._computedSliderPosition=t.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(t){if(!this._computedIsNeeded)return 0;let r=t-this._arrowSize-this._computedSliderSize/2;return Math.round(r/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(t){if(!this._computedIsNeeded)return 0;let r=t-this._arrowSize,n=this._scrollPosition;return r<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(t){if(!this._computedIsNeeded)return 0;let r=this._computedSliderPosition+t;return Math.round(r/this._computedSliderRatio)}},Q2=class extends Ov{constructor(e,t,r){let n=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:r,scrollbarState:new Tv(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,n.width,n.scrollWidth,o.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}},Y2=class extends Ov{constructor(e,t,r){let n=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:r,scrollbarState:new Tv(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,n.height,n.scrollHeight,o.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}},G2=500,_g=50,X2=class{constructor(e,t,r){this.timestamp=e,this.deltaX=t,this.deltaY=r,this.score=0}},hh=class{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let t=1,r=0,n=1,o=this._rear;do{let l=o===this._front?t:Math.pow(2,-n);if(t-=l,r+=this._memory[o].score*l,o===this._front)break;o=(this._capacity+o-1)%this._capacity,n++}while(!0);return r<=.5}acceptStandardWheelEvent(t){if(Xh){let r=Dr(t.browserEvent),n=l2(r);this.accept(Date.now(),t.deltaX*n,t.deltaY*n)}else this.accept(Date.now(),t.deltaX,t.deltaY)}accept(t,r,n){let o=null,l=new X2(t,r,n);this._front===-1&&this._rear===-1?(this._memory[0]=l,this._front=0,this._rear=0):(o=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=l),l.score=this._computeScore(l,o)}_computeScore(t,r){if(Math.abs(t.deltaX)>0&&Math.abs(t.deltaY)>0)return 1;let n=.5;if((!this._isAlmostInt(t.deltaX)||!this._isAlmostInt(t.deltaY))&&(n+=.25),r){let o=Math.abs(t.deltaX),l=Math.abs(t.deltaY),c=Math.abs(r.deltaX),h=Math.abs(r.deltaY),m=Math.max(Math.min(o,c),1),d=Math.max(Math.min(l,h),1),v=Math.max(o,c),_=Math.max(l,h);v%m===0&&_%d===0&&(n-=.5)}return Math.min(Math.max(n,0),1)}_isAlmostInt(t){return Math.abs(Math.round(t)-t)<.01}};hh.INSTANCE=new hh;var J2=hh,Z2=class extends td{constructor(e,t,r){super(),this._onScroll=this._register(new oe),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new oe),this.onWillScroll=this._onWillScroll.event,this._options=tk(t),this._scrollable=r,this._register(this._scrollable.onScroll(o=>{this._onWillScroll.fire(o),this._onDidScroll(o),this._onScroll.fire(o)}));let n={onMouseWheel:o=>this._onMouseWheel(o),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new Y2(this._scrollable,this._options,n)),this._horizontalScrollbar=this._register(new Q2(this._scrollable,this._options,n)),this._domNode=document.createElement("div"),this._domNode.className="xterm-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Qn(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Qn(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Qn(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,o=>this._onMouseOver(o)),this.onmouseleave(this._listenOnDomNode,o=>this._onMouseLeave(o)),this._hideTimeout=this._register(new Zh),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=Js(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Mr&&(this._options.className+=" mac"),this._domNode.className="xterm-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(e){this._revealOnScroll=e}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new ug(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=Js(this._mouseWheelToDispose),e)){let t=r=>{this._onMouseWheel(new ug(r))};this._mouseWheelToDispose.push(be(this._listenOnDomNode,mt.MOUSE_WHEEL,t,{passive:!1}))}}_onMouseWheel(e){if(e.browserEvent?.defaultPrevented)return;let t=J2.INSTANCE;t.acceptStandardWheelEvent(e);let r=!1;if(e.deltaY||e.deltaX){let o=e.deltaY*this._options.mouseWheelScrollSensitivity,l=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&l+o===0?l=o=0:Math.abs(o)>=Math.abs(l)?l=0:o=0),this._options.flipAxes&&([o,l]=[l,o]);let c=!Mr&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||c)&&!l&&(l=o,o=0),e.browserEvent&&e.browserEvent.altKey&&(l=l*this._options.fastScrollSensitivity,o=o*this._options.fastScrollSensitivity);let h=this._scrollable.getFutureScrollPosition(),m={};if(o){let d=_g*o,v=h.scrollTop-(d<0?Math.floor(d):Math.ceil(d));this._verticalScrollbar.writeScrollPosition(m,v)}if(l){let d=_g*l,v=h.scrollLeft-(d<0?Math.floor(d):Math.ceil(d));this._horizontalScrollbar.writeScrollPosition(m,v)}m=this._scrollable.validateScrollPosition(m),(h.scrollLeft!==m.scrollLeft||h.scrollTop!==m.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(m):this._scrollable.setScrollPositionNow(m),r=!0)}let n=r;!n&&this._options.alwaysConsumeMouseWheel&&(n=!0),!n&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(n=!0),n&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,r=e.scrollLeft>0,n=r?" left":"",o=t?" top":"",l=r||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${n}`),this._topShadowDomNode.setClassName(`shadow${o}`),this._topLeftShadowDomNode.setClassName(`shadow${l}${o}${n}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),G2)}},ek=class extends Z2{constructor(e,t,r){super(e,t,r)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}};function tk(e){let t={lazyRender:typeof e.lazyRender<"u"?e.lazyRender:!1,className:typeof e.className<"u"?e.className:"",useShadows:typeof e.useShadows<"u"?e.useShadows:!0,handleMouseWheel:typeof e.handleMouseWheel<"u"?e.handleMouseWheel:!0,flipAxes:typeof e.flipAxes<"u"?e.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof e.consumeMouseWheelIfScrollbarIsNeeded<"u"?e.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof e.alwaysConsumeMouseWheel<"u"?e.alwaysConsumeMouseWheel:!1,scrollYToX:typeof e.scrollYToX<"u"?e.scrollYToX:!1,mouseWheelScrollSensitivity:typeof e.mouseWheelScrollSensitivity<"u"?e.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof e.fastScrollSensitivity<"u"?e.fastScrollSensitivity:5,scrollPredominantAxis:typeof e.scrollPredominantAxis<"u"?e.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof e.mouseWheelSmoothScroll<"u"?e.mouseWheelSmoothScroll:!0,arrowSize:typeof e.arrowSize<"u"?e.arrowSize:11,listenOnDomNode:typeof e.listenOnDomNode<"u"?e.listenOnDomNode:null,horizontal:typeof e.horizontal<"u"?e.horizontal:1,horizontalScrollbarSize:typeof e.horizontalScrollbarSize<"u"?e.horizontalScrollbarSize:10,horizontalSliderSize:typeof e.horizontalSliderSize<"u"?e.horizontalSliderSize:0,horizontalHasArrows:typeof e.horizontalHasArrows<"u"?e.horizontalHasArrows:!1,vertical:typeof e.vertical<"u"?e.vertical:1,verticalScrollbarSize:typeof e.verticalScrollbarSize<"u"?e.verticalScrollbarSize:10,verticalHasArrows:typeof e.verticalHasArrows<"u"?e.verticalHasArrows:!1,verticalSliderSize:typeof e.verticalSliderSize<"u"?e.verticalSliderSize:0,scrollByPage:typeof e.scrollByPage<"u"?e.scrollByPage:!1};return t.horizontalSliderSize=typeof e.horizontalSliderSize<"u"?e.horizontalSliderSize:t.horizontalScrollbarSize,t.verticalSliderSize=typeof e.verticalSliderSize<"u"?e.verticalSliderSize:t.verticalScrollbarSize,Mr&&(t.className+=" mac"),t}var dh=class extends Re{constructor(e,t,r,n,o,l,c,h){super(),this._bufferService=r,this._optionsService=c,this._renderService=h,this._onRequestScrollLines=this._register(new oe),this.onRequestScrollLines=this._onRequestScrollLines.event,this._isSyncing=!1,this._isHandlingScroll=!1,this._suppressOnScrollHandler=!1;let m=this._register(new H2({forceIntegerValues:!1,smoothScrollDuration:this._optionsService.rawOptions.smoothScrollDuration,scheduleAtNextAnimationFrame:d=>ed(n.window,d)}));this._register(this._optionsService.onSpecificOptionChange("smoothScrollDuration",()=>{m.setSmoothScrollDuration(this._optionsService.rawOptions.smoothScrollDuration)})),this._scrollableElement=this._register(new ek(t,{vertical:1,horizontal:2,useShadows:!1,mouseWheelSmoothScroll:!0,...this._getChangeOptions()},m)),this._register(this._optionsService.onMultipleOptionChange(["scrollSensitivity","fastScrollSensitivity","overviewRuler"],()=>this._scrollableElement.updateOptions(this._getChangeOptions()))),this._register(o.onProtocolChange(d=>{this._scrollableElement.updateOptions({handleMouseWheel:!(d&16)})})),this._scrollableElement.setScrollDimensions({height:0,scrollHeight:0}),this._register(bt.runAndSubscribe(l.onChangeColors,()=>{this._scrollableElement.getDomNode().style.backgroundColor=l.colors.background.css})),e.appendChild(this._scrollableElement.getDomNode()),this._register(Ue(()=>this._scrollableElement.getDomNode().remove())),this._styleElement=n.mainDocument.createElement("style"),t.appendChild(this._styleElement),this._register(Ue(()=>this._styleElement.remove())),this._register(bt.runAndSubscribe(l.onChangeColors,()=>{this._styleElement.textContent=[".xterm .xterm-scrollable-element > .scrollbar > .slider {",`  background: ${l.colors.scrollbarSliderBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider:hover {",`  background: ${l.colors.scrollbarSliderHoverBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider.active {",`  background: ${l.colors.scrollbarSliderActiveBackground.css};`,"}"].join(`
`)})),this._register(this._bufferService.onResize(()=>this.queueSync())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._latestYDisp=void 0,this.queueSync()})),this._register(this._bufferService.onScroll(()=>this._sync())),this._register(this._scrollableElement.onScroll(d=>this._handleScroll(d)))}scrollLines(e){let t=this._scrollableElement.getScrollPosition();this._scrollableElement.setScrollPosition({reuseAnimation:!0,scrollTop:t.scrollTop+e*this._renderService.dimensions.css.cell.height})}scrollToLine(e,t){t&&(this._latestYDisp=e),this._scrollableElement.setScrollPosition({reuseAnimation:!t,scrollTop:e*this._renderService.dimensions.css.cell.height})}_getChangeOptions(){return{mouseWheelScrollSensitivity:this._optionsService.rawOptions.scrollSensitivity,fastScrollSensitivity:this._optionsService.rawOptions.fastScrollSensitivity,verticalScrollbarSize:this._optionsService.rawOptions.overviewRuler?.width||14}}queueSync(e){e!==void 0&&(this._latestYDisp=e),this._queuedAnimationFrame===void 0&&(this._queuedAnimationFrame=this._renderService.addRefreshCallback(()=>{this._queuedAnimationFrame=void 0,this._sync(this._latestYDisp)}))}_sync(e=this._bufferService.buffer.ydisp){!this._renderService||this._isSyncing||(this._isSyncing=!0,this._suppressOnScrollHandler=!0,this._scrollableElement.setScrollDimensions({height:this._renderService.dimensions.css.canvas.height,scrollHeight:this._renderService.dimensions.css.cell.height*this._bufferService.buffer.lines.length}),this._suppressOnScrollHandler=!1,e!==this._latestYDisp&&this._scrollableElement.setScrollPosition({scrollTop:e*this._renderService.dimensions.css.cell.height}),this._isSyncing=!1)}_handleScroll(e){if(!this._renderService||this._isHandlingScroll||this._suppressOnScrollHandler)return;this._isHandlingScroll=!0;let t=Math.round(e.scrollTop/this._renderService.dimensions.css.cell.height),r=t-this._bufferService.buffer.ydisp;r!==0&&(this._latestYDisp=t,this._onRequestScrollLines.fire(r)),this._isHandlingScroll=!1}};dh=Xe([ce(2,Tt),ce(3,Yr),ce(4,mv),ce(5,Hi),ce(6,Bt),ce(7,Gr)],dh);var fh=class extends Re{constructor(e,t,r,n,o){super(),this._screenElement=e,this._bufferService=t,this._coreBrowserService=r,this._decorationService=n,this._renderService=o,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this._register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this._register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this._register(this._decorationService.onDecorationRemoved(l=>this._removeDecoration(l))),this._register(Ue(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let e of this._decorationService.decorations)this._renderDecoration(e);this._dimensionsChanged=!1}_renderDecoration(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)}_createElement(e){let t=this._coreBrowserService.mainDocument.createElement("div");t.classList.add("xterm-decoration"),t.classList.toggle("xterm-decoration-top-layer",e?.options?.layer==="top"),t.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,t.style.height=`${(e.options.height||1)*this._renderService.dimensions.css.cell.height}px`,t.style.top=`${(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height}px`,t.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let r=e.options.x??0;return r&&r>this._bufferService.cols&&(t.style.display="none"),this._refreshXPosition(e,t),t}_refreshStyle(e){let t=e.marker.line-this._bufferService.buffers.active.ydisp;if(t<0||t>=this._bufferService.rows)e.element&&(e.element.style.display="none",e.onRenderEmitter.fire(e.element));else{let r=this._decorationElements.get(e);r||(r=this._createElement(e),e.element=r,this._decorationElements.set(e,r),this._container.appendChild(r),e.onDispose(()=>{this._decorationElements.delete(e),r.remove()})),r.style.display=this._altBufferIsActive?"none":"block",this._altBufferIsActive||(r.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,r.style.height=`${(e.options.height||1)*this._renderService.dimensions.css.cell.height}px`,r.style.top=`${t*this._renderService.dimensions.css.cell.height}px`,r.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`),e.onRenderEmitter.fire(r)}}_refreshXPosition(e,t=e.element){if(!t)return;let r=e.options.x??0;(e.options.anchor||"left")==="right"?t.style.right=r?`${r*this._renderService.dimensions.css.cell.width}px`:"":t.style.left=r?`${r*this._renderService.dimensions.css.cell.width}px`:""}_removeDecoration(e){this._decorationElements.get(e)?.remove(),this._decorationElements.delete(e),e.dispose()}};fh=Xe([ce(1,Tt),ce(2,Yr),ce(3,ao),ce(4,Gr)],fh);var rk=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(e){if(e.options.overviewRulerOptions){for(let t of this._zones)if(t.color===e.options.overviewRulerOptions.color&&t.position===e.options.overviewRulerOptions.position){if(this._lineIntersectsZone(t,e.marker.line))return;if(this._lineAdjacentToZone(t,e.marker.line,e.options.overviewRulerOptions.position)){this._addLineToZone(t,e.marker.line);return}}if(this._zonePoolIndex<this._zonePool.length){this._zonePool[this._zonePoolIndex].color=e.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=e.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=e.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=e.marker.line,this._zones.push(this._zonePool[this._zonePoolIndex++]);return}this._zones.push({color:e.options.overviewRulerOptions.color,position:e.options.overviewRulerOptions.position,startBufferLine:e.marker.line,endBufferLine:e.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(e){this._linePadding=e}_lineIntersectsZone(e,t){return t>=e.startBufferLine&&t<=e.endBufferLine}_lineAdjacentToZone(e,t,r){return t>=e.startBufferLine-this._linePadding[r||"full"]&&t<=e.endBufferLine+this._linePadding[r||"full"]}_addLineToZone(e,t){e.startBufferLine=Math.min(e.startBufferLine,t),e.endBufferLine=Math.max(e.endBufferLine,t)}},Pr={full:0,left:0,center:0,right:0},vs={full:0,left:0,center:0,right:0},Mn={full:0,left:0,center:0,right:0},Ga=class extends Re{constructor(e,t,r,n,o,l,c,h){super(),this._viewportElement=e,this._screenElement=t,this._bufferService=r,this._decorationService=n,this._renderService=o,this._optionsService=l,this._themeService=c,this._coreBrowserService=h,this._colorZoneStore=new rk,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement),this._register(Ue(()=>this._canvas?.remove()));let m=this._canvas.getContext("2d");if(m)this._ctx=m;else throw new Error("Ctx cannot be null");this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this._register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0))),this._register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this._register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})),this._register(this._renderService.onRender(()=>{(!this._containerHeight||this._containerHeight!==this._screenElement.clientHeight)&&(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._register(this._optionsService.onSpecificOptionChange("overviewRuler",()=>this._queueRefresh(!0))),this._register(this._themeService.onChangeColors(()=>this._queueRefresh())),this._queueRefresh(!0)}get _width(){return this._optionsService.options.overviewRuler?.width||0}_refreshDrawConstants(){let e=Math.floor((this._canvas.width-1)/3),t=Math.ceil((this._canvas.width-1)/3);vs.full=this._canvas.width,vs.left=e,vs.center=t,vs.right=e,this._refreshDrawHeightConstants(),Mn.full=1,Mn.left=1,Mn.center=1+vs.left,Mn.right=1+vs.left+vs.center}_refreshDrawHeightConstants(){Pr.full=Math.round(2*this._coreBrowserService.dpr);let e=this._canvas.height/this._bufferService.buffer.lines.length,t=Math.round(Math.max(Math.min(e,12),6)*this._coreBrowserService.dpr);Pr.left=t,Pr.center=t,Pr.right=t}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Pr.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Pr.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Pr.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Pr.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let t of this._decorationService.decorations)this._colorZoneStore.addDecoration(t);this._ctx.lineWidth=1,this._renderRulerOutline();let e=this._colorZoneStore.zones;for(let t of e)t.position!=="full"&&this._renderColorZone(t);for(let t of e)t.position==="full"&&this._renderColorZone(t);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderRulerOutline(){this._ctx.fillStyle=this._themeService.colors.overviewRulerBorder.css,this._ctx.fillRect(0,0,1,this._canvas.height),this._optionsService.rawOptions.overviewRuler.showTopBorder&&this._ctx.fillRect(1,0,this._canvas.width-1,1),this._optionsService.rawOptions.overviewRuler.showBottomBorder&&this._ctx.fillRect(1,this._canvas.height-1,this._canvas.width-1,this._canvas.height)}_renderColorZone(e){this._ctx.fillStyle=e.color,this._ctx.fillRect(Mn[e.position||"full"],Math.round((this._canvas.height-1)*(e.startBufferLine/this._bufferService.buffers.active.lines.length)-Pr[e.position||"full"]/2),vs[e.position||"full"],Math.round((this._canvas.height-1)*((e.endBufferLine-e.startBufferLine)/this._bufferService.buffers.active.lines.length)+Pr[e.position||"full"]))}_queueRefresh(e,t){this._shouldUpdateDimensions=e||this._shouldUpdateDimensions,this._shouldUpdateAnchor=t||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};Ga=Xe([ce(2,Tt),ce(3,ao),ce(4,Gr),ce(5,Bt),ce(6,Hi),ce(7,Yr)],Ga);var J;(e=>(e.NUL="\0",e.SOH="",e.STX="",e.ETX="",e.EOT="",e.ENQ="",e.ACK="",e.BEL="\x07",e.BS="\b",e.HT="	",e.LF=`
`,e.VT="\v",e.FF="\f",e.CR="\r",e.SO="",e.SI="",e.DLE="",e.DC1="",e.DC2="",e.DC3="",e.DC4="",e.NAK="",e.SYN="",e.ETB="",e.CAN="",e.EM="",e.SUB="",e.ESC="\x1B",e.FS="",e.GS="",e.RS="",e.US="",e.SP=" ",e.DEL=""))(J||={});var Aa;(e=>(e.PAD="",e.HOP="",e.BPH="",e.NBH="",e.IND="",e.NEL="",e.SSA="",e.ESA="",e.HTS="",e.HTJ="",e.VTS="",e.PLD="",e.PLU="",e.RI="",e.SS2="",e.SS3="",e.DCS="",e.PU1="",e.PU2="",e.STS="",e.CCH="",e.MW="",e.SPA="",e.EPA="",e.SOS="",e.SGCI="",e.SCI="",e.CSI="",e.ST="",e.OSC="",e.PM="",e.APC=""))(Aa||={});var Bv;(e=>e.ST=`${J.ESC}\\`)(Bv||={});var ph=class{constructor(e,t,r,n,o,l){this._textarea=e,this._compositionView=t,this._bufferService=r,this._optionsService=n,this._coreService=o,this._renderService=l,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(e){this._compositionView.textContent=e.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(e){if(this._isComposing||this._isSendingComposition){if(e.keyCode===20||e.keyCode===229||e.keyCode===16||e.keyCode===17||e.keyCode===18)return!1;this._finalizeComposition(!1)}return e.keyCode===229?(this._handleAnyTextareaChanges(),!1):!0}_finalizeComposition(e){if(this._compositionView.classList.remove("active"),this._isComposing=!1,e){let t={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){this._isSendingComposition=!1;let r;t.start+=this._dataAlreadySent.length,this._isComposing?r=this._textarea.value.substring(t.start,this._compositionPosition.start):r=this._textarea.value.substring(t.start),r.length>0&&this._coreService.triggerDataEvent(r,!0)}},0)}else{this._isSendingComposition=!1;let t=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(t,!0)}}_handleAnyTextareaChanges(){let e=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let t=this._textarea.value,r=t.replace(e,"");this._dataAlreadySent=r,t.length>e.length?this._coreService.triggerDataEvent(r,!0):t.length<e.length?this._coreService.triggerDataEvent(`${J.DEL}`,!0):t.length===e.length&&t!==e&&this._coreService.triggerDataEvent(t,!0)}},0)}updateCompositionElements(e){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let t=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),r=this._renderService.dimensions.css.cell.height,n=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,o=t*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=o+"px",this._compositionView.style.top=n+"px",this._compositionView.style.height=r+"px",this._compositionView.style.lineHeight=r+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let l=this._compositionView.getBoundingClientRect();this._textarea.style.left=o+"px",this._textarea.style.top=n+"px",this._textarea.style.width=Math.max(l.width,1)+"px",this._textarea.style.height=Math.max(l.height,1)+"px",this._textarea.style.lineHeight=l.height+"px"}e||setTimeout(()=>this.updateCompositionElements(!0),0)}}};ph=Xe([ce(2,Tt),ce(3,Bt),ce(4,ti),ce(5,Gr)],ph);var gt=0,_t=0,vt=0,Ge=0,vg={css:"#00000000",rgba:0},it;(e=>{function t(o,l,c,h){return h!==void 0?`#${Fs(o)}${Fs(l)}${Fs(c)}${Fs(h)}`:`#${Fs(o)}${Fs(l)}${Fs(c)}`}e.toCss=t;function r(o,l,c,h=255){return(o<<24|l<<16|c<<8|h)>>>0}e.toRgba=r;function n(o,l,c,h){return{css:e.toCss(o,l,c,h),rgba:e.toRgba(o,l,c,h)}}e.toColor=n})(it||={});var $e;(e=>{function t(m,d){if(Ge=(d.rgba&255)/255,Ge===1)return{css:d.css,rgba:d.rgba};let v=d.rgba>>24&255,_=d.rgba>>16&255,x=d.rgba>>8&255,b=m.rgba>>24&255,S=m.rgba>>16&255,w=m.rgba>>8&255;gt=b+Math.round((v-b)*Ge),_t=S+Math.round((_-S)*Ge),vt=w+Math.round((x-w)*Ge);let E=it.toCss(gt,_t,vt),M=it.toRgba(gt,_t,vt);return{css:E,rgba:M}}e.blend=t;function r(m){return(m.rgba&255)===255}e.isOpaque=r;function n(m,d,v){let _=Fa.ensureContrastRatio(m.rgba,d.rgba,v);if(_)return it.toColor(_>>24&255,_>>16&255,_>>8&255)}e.ensureContrastRatio=n;function o(m){let d=(m.rgba|255)>>>0;return[gt,_t,vt]=Fa.toChannels(d),{css:it.toCss(gt,_t,vt),rgba:d}}e.opaque=o;function l(m,d){return Ge=Math.round(d*255),[gt,_t,vt]=Fa.toChannels(m.rgba),{css:it.toCss(gt,_t,vt,Ge),rgba:it.toRgba(gt,_t,vt,Ge)}}e.opacity=l;function c(m,d){return Ge=m.rgba&255,l(m,Ge*d/255)}e.multiplyOpacity=c;function h(m){return[m.rgba>>24&255,m.rgba>>16&255,m.rgba>>8&255]}e.toColorRGB=h})($e||={});var Qe;(e=>{let t,r;try{let o=document.createElement("canvas");o.width=1,o.height=1;let l=o.getContext("2d",{willReadFrequently:!0});l&&(t=l,t.globalCompositeOperation="copy",r=t.createLinearGradient(0,0,1,1))}catch{}function n(o){if(o.match(/#[\da-f]{3,8}/i))switch(o.length){case 4:return gt=parseInt(o.slice(1,2).repeat(2),16),_t=parseInt(o.slice(2,3).repeat(2),16),vt=parseInt(o.slice(3,4).repeat(2),16),it.toColor(gt,_t,vt);case 5:return gt=parseInt(o.slice(1,2).repeat(2),16),_t=parseInt(o.slice(2,3).repeat(2),16),vt=parseInt(o.slice(3,4).repeat(2),16),Ge=parseInt(o.slice(4,5).repeat(2),16),it.toColor(gt,_t,vt,Ge);case 7:return{css:o,rgba:(parseInt(o.slice(1),16)<<8|255)>>>0};case 9:return{css:o,rgba:parseInt(o.slice(1),16)>>>0}}let l=o.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(l)return gt=parseInt(l[1]),_t=parseInt(l[2]),vt=parseInt(l[3]),Ge=Math.round((l[5]===void 0?1:parseFloat(l[5]))*255),it.toColor(gt,_t,vt,Ge);if(!t||!r)throw new Error("css.toColor: Unsupported css format");if(t.fillStyle=r,t.fillStyle=o,typeof t.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(t.fillRect(0,0,1,1),[gt,_t,vt,Ge]=t.getImageData(0,0,1,1).data,Ge!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:it.toRgba(gt,_t,vt,Ge),css:o}}e.toColor=n})(Qe||={});var Dt;(e=>{function t(n){return r(n>>16&255,n>>8&255,n&255)}e.relativeLuminance=t;function r(n,o,l){let c=n/255,h=o/255,m=l/255,d=c<=.03928?c/12.92:Math.pow((c+.055)/1.055,2.4),v=h<=.03928?h/12.92:Math.pow((h+.055)/1.055,2.4),_=m<=.03928?m/12.92:Math.pow((m+.055)/1.055,2.4);return d*.2126+v*.7152+_*.0722}e.relativeLuminance2=r})(Dt||={});var Fa;(e=>{function t(c,h){if(Ge=(h&255)/255,Ge===1)return h;let m=h>>24&255,d=h>>16&255,v=h>>8&255,_=c>>24&255,x=c>>16&255,b=c>>8&255;return gt=_+Math.round((m-_)*Ge),_t=x+Math.round((d-x)*Ge),vt=b+Math.round((v-b)*Ge),it.toRgba(gt,_t,vt)}e.blend=t;function r(c,h,m){let d=Dt.relativeLuminance(c>>8),v=Dt.relativeLuminance(h>>8);if(Wr(d,v)<m){if(v<d){let b=n(c,h,m),S=Wr(d,Dt.relativeLuminance(b>>8));if(S<m){let w=o(c,h,m),E=Wr(d,Dt.relativeLuminance(w>>8));return S>E?b:w}return b}let _=o(c,h,m),x=Wr(d,Dt.relativeLuminance(_>>8));if(x<m){let b=n(c,h,m),S=Wr(d,Dt.relativeLuminance(b>>8));return x>S?_:b}return _}}e.ensureContrastRatio=r;function n(c,h,m){let d=c>>24&255,v=c>>16&255,_=c>>8&255,x=h>>24&255,b=h>>16&255,S=h>>8&255,w=Wr(Dt.relativeLuminance2(x,b,S),Dt.relativeLuminance2(d,v,_));for(;w<m&&(x>0||b>0||S>0);)x-=Math.max(0,Math.ceil(x*.1)),b-=Math.max(0,Math.ceil(b*.1)),S-=Math.max(0,Math.ceil(S*.1)),w=Wr(Dt.relativeLuminance2(x,b,S),Dt.relativeLuminance2(d,v,_));return(x<<24|b<<16|S<<8|255)>>>0}e.reduceLuminance=n;function o(c,h,m){let d=c>>24&255,v=c>>16&255,_=c>>8&255,x=h>>24&255,b=h>>16&255,S=h>>8&255,w=Wr(Dt.relativeLuminance2(x,b,S),Dt.relativeLuminance2(d,v,_));for(;w<m&&(x<255||b<255||S<255);)x=Math.min(255,x+Math.ceil((255-x)*.1)),b=Math.min(255,b+Math.ceil((255-b)*.1)),S=Math.min(255,S+Math.ceil((255-S)*.1)),w=Wr(Dt.relativeLuminance2(x,b,S),Dt.relativeLuminance2(d,v,_));return(x<<24|b<<16|S<<8|255)>>>0}e.increaseLuminance=o;function l(c){return[c>>24&255,c>>16&255,c>>8&255,c&255]}e.toChannels=l})(Fa||={});function Fs(e){let t=e.toString(16);return t.length<2?"0"+t:t}function Wr(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}var sk=class extends oo{constructor(e,t,r){super(),this.content=0,this.combinedData="",this.fg=e.fg,this.bg=e.bg,this.combinedData=t,this._width=r}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},Xa=class{constructor(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new dr}register(e){let t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id}deregister(e){for(let t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1}getJoinedCharacters(e){if(this._characterJoiners.length===0)return[];let t=this._bufferService.buffer.lines.get(e);if(!t||t.length===0)return[];let r=[],n=t.translateToString(!0),o=0,l=0,c=0,h=t.getFg(0),m=t.getBg(0);for(let d=0;d<t.getTrimmedLength();d++)if(t.loadCell(d,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==h||this._workCell.bg!==m){if(d-o>1){let v=this._getJoinedRanges(n,c,l,t,o);for(let _=0;_<v.length;_++)r.push(v[_])}o=d,c=l,h=this._workCell.fg,m=this._workCell.bg}l+=this._workCell.getChars().length||Ss.length}if(this._bufferService.cols-o>1){let d=this._getJoinedRanges(n,c,l,t,o);for(let v=0;v<d.length;v++)r.push(d[v])}return r}_getJoinedRanges(e,t,r,n,o){let l=e.substring(t,r),c=[];try{c=this._characterJoiners[0].handler(l)}catch(h){console.error(h)}for(let h=1;h<this._characterJoiners.length;h++)try{let m=this._characterJoiners[h].handler(l);for(let d=0;d<m.length;d++)Xa._mergeRanges(c,m[d])}catch(m){console.error(m)}return this._stringRangesToCellRanges(c,n,o),c}_stringRangesToCellRanges(e,t,r){let n=0,o=!1,l=0,c=e[n];if(c){for(let h=r;h<this._bufferService.cols;h++){let m=t.getWidth(h),d=t.getString(h).length||Ss.length;if(m!==0){if(!o&&c[0]<=l&&(c[0]=h,o=!0),c[1]<=l){if(c[1]=h,c=e[++n],!c)break;c[0]<=l?(c[0]=h,o=!0):o=!1}l+=d}}c&&(c[1]=this._bufferService.cols)}}static _mergeRanges(e,t){let r=!1;for(let n=0;n<e.length;n++){let o=e[n];if(r){if(t[1]<=o[0])return e[n-1][1]=t[1],e;if(t[1]<=o[1])return e[n-1][1]=Math.max(t[1],o[1]),e.splice(n,1),e;e.splice(n,1),n--}else{if(t[1]<=o[0])return e.splice(n,0,t),e;if(t[1]<=o[1])return o[0]=Math.min(t[0],o[0]),e;t[0]<o[1]&&(o[0]=Math.min(t[0],o[0]),r=!0);continue}}return r?e[e.length-1][1]=t[1]:e.push(t),e}};Xa=Xe([ce(0,Tt)],Xa);function ik(e){return 57508<=e&&e<=57558}function nk(e){return 9472<=e&&e<=9631}function ok(e){return ik(e)||nk(e)}function ak(){return{css:{canvas:Na(),cell:Na()},device:{canvas:Na(),cell:Na(),char:{width:0,height:0,left:0,top:0}}}}function Na(){return{width:0,height:0}}var mh=class{constructor(e,t,r,n,o,l,c){this._document=e,this._characterJoinerService=t,this._optionsService=r,this._coreBrowserService=n,this._coreService=o,this._decorationService=l,this._themeService=c,this._workCell=new dr,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(e,t,r){this._selectionStart=e,this._selectionEnd=t,this._columnSelectMode=r}createRow(e,t,r,n,o,l,c,h,m,d,v){let _=[],x=this._characterJoinerService.getJoinedCharacters(t),b=this._themeService.colors,S=e.getNoBgTrimmedLength();r&&S<l+1&&(S=l+1);let w,E=0,M="",P=0,j=0,A=0,U=0,V=!1,Z=0,le=!1,te=0,T=0,W=[],K=d!==-1&&v!==-1;for(let F=0;F<S;F++){e.loadCell(F,this._workCell);let Y=this._workCell.getWidth();if(Y===0)continue;let O=!1,B=F>=T,G=F,D=this._workCell;if(x.length>0&&F===x[0][0]&&B){let Ne=x.shift(),er=this._isCellInSelection(Ne[0],t);for(P=Ne[0]+1;P<Ne[1];P++)B&&=er===this._isCellInSelection(P,t);B&&=!r||l<Ne[0]||l>=Ne[1],B?(O=!0,D=new sk(this._workCell,e.translateToString(!0,Ne[0],Ne[1]),Ne[1]-Ne[0]),G=Ne[1]-1,Y=D.getWidth()):T=Ne[1]}let Q=this._isCellInSelection(F,t),X=r&&F===l,k=K&&F>=d&&F<=v,I=!1;this._decorationService.forEachDecorationAtCell(F,t,void 0,Ne=>{I=!0});let q=D.getChars()||Ss;if(q===" "&&(D.isUnderline()||D.isOverline())&&(q=""),te=Y*h-m.get(q,D.isBold(),D.isItalic()),!w)w=this._document.createElement("span");else if(E&&(Q&&le||!Q&&!le&&D.bg===j)&&(Q&&le&&b.selectionForeground||D.fg===A)&&D.extended.ext===U&&k===V&&te===Z&&!X&&!O&&!I&&B){D.isInvisible()?M+=Ss:M+=q,E++;continue}else E&&(w.textContent=M),w=this._document.createElement("span"),E=0,M="";if(j=D.bg,A=D.fg,U=D.extended.ext,V=k,Z=te,le=Q,O&&l>=F&&l<=G&&(l=F),!this._coreService.isCursorHidden&&X&&this._coreService.isCursorInitialized){if(W.push("xterm-cursor"),this._coreBrowserService.isFocused)c&&W.push("xterm-cursor-blink"),W.push(n==="bar"?"xterm-cursor-bar":n==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(o)switch(o){case"outline":W.push("xterm-cursor-outline");break;case"block":W.push("xterm-cursor-block");break;case"bar":W.push("xterm-cursor-bar");break;case"underline":W.push("xterm-cursor-underline");break}}if(D.isBold()&&W.push("xterm-bold"),D.isItalic()&&W.push("xterm-italic"),D.isDim()&&W.push("xterm-dim"),D.isInvisible()?M=Ss:M=D.getChars()||Ss,D.isUnderline()&&(W.push(`xterm-underline-${D.extended.underlineStyle}`),M===" "&&(M=""),!D.isUnderlineColorDefault()))if(D.isUnderlineColorRGB())w.style.textDecorationColor=`rgb(${oo.toColorRGB(D.getUnderlineColor()).join(",")})`;else{let Ne=D.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&D.isBold()&&Ne<8&&(Ne+=8),w.style.textDecorationColor=b.ansi[Ne].css}D.isOverline()&&(W.push("xterm-overline"),M===" "&&(M="")),D.isStrikethrough()&&W.push("xterm-strikethrough"),k&&(w.style.textDecoration="underline");let ie=D.getFgColor(),xe=D.getFgColorMode(),Se=D.getBgColor(),je=D.getBgColorMode(),ae=!!D.isInverse();if(ae){let Ne=ie;ie=Se,Se=Ne;let er=xe;xe=je,je=er}let fe,Ce,Te=!1;this._decorationService.forEachDecorationAtCell(F,t,void 0,Ne=>{Ne.options.layer!=="top"&&Te||(Ne.backgroundColorRGB&&(je=50331648,Se=Ne.backgroundColorRGB.rgba>>8&16777215,fe=Ne.backgroundColorRGB),Ne.foregroundColorRGB&&(xe=50331648,ie=Ne.foregroundColorRGB.rgba>>8&16777215,Ce=Ne.foregroundColorRGB),Te=Ne.options.layer==="top")}),!Te&&Q&&(fe=this._coreBrowserService.isFocused?b.selectionBackgroundOpaque:b.selectionInactiveBackgroundOpaque,Se=fe.rgba>>8&16777215,je=50331648,Te=!0,b.selectionForeground&&(xe=50331648,ie=b.selectionForeground.rgba>>8&16777215,Ce=b.selectionForeground)),Te&&W.push("xterm-decoration-top");let Ee;switch(je){case 16777216:case 33554432:Ee=b.ansi[Se],W.push(`xterm-bg-${Se}`);break;case 50331648:Ee=it.toColor(Se>>16,Se>>8&255,Se&255),this._addStyle(w,`background-color:#${yg((Se>>>0).toString(16),"0",6)}`);break;case 0:default:ae?(Ee=b.foreground,W.push("xterm-bg-257")):Ee=b.background}switch(fe||D.isDim()&&(fe=$e.multiplyOpacity(Ee,.5)),xe){case 16777216:case 33554432:D.isBold()&&ie<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ie+=8),this._applyMinimumContrast(w,Ee,b.ansi[ie],D,fe,void 0)||W.push(`xterm-fg-${ie}`);break;case 50331648:let Ne=it.toColor(ie>>16&255,ie>>8&255,ie&255);this._applyMinimumContrast(w,Ee,Ne,D,fe,Ce)||this._addStyle(w,`color:#${yg(ie.toString(16),"0",6)}`);break;case 0:default:this._applyMinimumContrast(w,Ee,b.foreground,D,fe,Ce)||ae&&W.push("xterm-fg-257")}W.length&&(w.className=W.join(" "),W.length=0),!X&&!O&&!I&&B?E++:w.textContent=M,te!==this.defaultSpacing&&(w.style.letterSpacing=`${te}px`),_.push(w),F=G}return w&&E&&(w.textContent=M),_}_applyMinimumContrast(e,t,r,n,o,l){if(this._optionsService.rawOptions.minimumContrastRatio===1||ok(n.getCode()))return!1;let c=this._getContrastCache(n),h;if(!o&&!l&&(h=c.getColor(t.rgba,r.rgba)),h===void 0){let m=this._optionsService.rawOptions.minimumContrastRatio/(n.isDim()?2:1);h=$e.ensureContrastRatio(o||t,l||r,m),c.setColor((o||t).rgba,(l||r).rgba,h??null)}return h?(this._addStyle(e,`color:${h.css}`),!0):!1}_getContrastCache(e){return e.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(e,t){e.setAttribute("style",`${e.getAttribute("style")||""}${t};`)}_isCellInSelection(e,t){let r=this._selectionStart,n=this._selectionEnd;return!r||!n?!1:this._columnSelectMode?r[0]<=n[0]?e>=r[0]&&t>=r[1]&&e<n[0]&&t<=n[1]:e<r[0]&&t>=r[1]&&e>=n[0]&&t<=n[1]:t>r[1]&&t<n[1]||r[1]===n[1]&&t===r[1]&&e>=r[0]&&e<n[0]||r[1]<n[1]&&t===n[1]&&e<n[0]||r[1]<n[1]&&t===r[1]&&e>=r[0]}};mh=Xe([ce(1,vv),ce(2,Bt),ce(3,Yr),ce(4,ti),ce(5,ao),ce(6,Hi)],mh);function yg(e,t,r){for(;e.length<r;)e=t+e;return e}var lk=class{constructor(e,t){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=e.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let r=e.createElement("span");r.classList.add("xterm-char-measure-element");let n=e.createElement("span");n.classList.add("xterm-char-measure-element"),n.style.fontWeight="bold";let o=e.createElement("span");o.classList.add("xterm-char-measure-element"),o.style.fontStyle="italic";let l=e.createElement("span");l.classList.add("xterm-char-measure-element"),l.style.fontWeight="bold",l.style.fontStyle="italic",this._measureElements=[r,n,o,l],this._container.appendChild(r),this._container.appendChild(n),this._container.appendChild(o),this._container.appendChild(l),t.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(e,t,r,n){e===this._font&&t===this._fontSize&&r===this._weight&&n===this._weightBold||(this._font=e,this._fontSize=t,this._weight=r,this._weightBold=n,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${r}`,this._measureElements[1].style.fontWeight=`${n}`,this._measureElements[2].style.fontWeight=`${r}`,this._measureElements[3].style.fontWeight=`${n}`,this.clear())}get(e,t,r){let n=0;if(!t&&!r&&e.length===1&&(n=e.charCodeAt(0))<256){if(this._flat[n]!==-9999)return this._flat[n];let c=this._measure(e,0);return c>0&&(this._flat[n]=c),c}let o=e;t&&(o+="B"),r&&(o+="I");let l=this._holey.get(o);if(l===void 0){let c=0;t&&(c|=1),r&&(c|=2),l=this._measure(e,c),l>0&&this._holey.set(o,l)}return l}_measure(e,t){let r=this._measureElements[t];return r.textContent=e.repeat(32),r.offsetWidth/32}},ck=class{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(e,t,r,n=!1){if(this.selectionStart=t,this.selectionEnd=r,!t||!r||t[0]===r[0]&&t[1]===r[1]){this.clear();return}let o=e.buffers.active.ydisp,l=t[1]-o,c=r[1]-o,h=Math.max(l,0),m=Math.min(c,e.rows-1);if(h>=e.rows||m<0){this.clear();return}this.hasSelection=!0,this.columnSelectMode=n,this.viewportStartRow=l,this.viewportEndRow=c,this.viewportCappedStartRow=h,this.viewportCappedEndRow=m,this.startCol=t[0],this.endCol=r[0]}isCellSelected(e,t,r){return this.hasSelection?(r-=e.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?t>=this.startCol&&r>=this.viewportCappedStartRow&&t<this.endCol&&r<=this.viewportCappedEndRow:t<this.startCol&&r>=this.viewportCappedStartRow&&t>=this.endCol&&r<=this.viewportCappedEndRow:r>this.viewportStartRow&&r<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&r===this.viewportStartRow&&t>=this.startCol&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&r===this.viewportEndRow&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&r===this.viewportStartRow&&t>=this.startCol):!1}};function uk(){return new ck}var Eu="xterm-dom-renderer-owner-",ar="xterm-rows",Pa="xterm-fg-",xg="xterm-bg-",On="xterm-focus",Ra="xterm-selection",hk=1,gh=class extends Re{constructor(e,t,r,n,o,l,c,h,m,d,v,_,x,b){super(),this._terminal=e,this._document=t,this._element=r,this._screenElement=n,this._viewportElement=o,this._helperContainer=l,this._linkifier2=c,this._charSizeService=m,this._optionsService=d,this._bufferService=v,this._coreService=_,this._coreBrowserService=x,this._themeService=b,this._terminalClass=hk++,this._rowElements=[],this._selectionRenderModel=uk(),this.onRequestRedraw=this._register(new oe).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(ar),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(Ra),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=ak(),this._updateDimensions(),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._themeService.onChangeColors(S=>this._injectCss(S))),this._injectCss(this._themeService.colors),this._rowFactory=h.createInstance(mh,document),this._element.classList.add(Eu+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this._register(this._linkifier2.onShowLinkUnderline(S=>this._handleLinkHover(S))),this._register(this._linkifier2.onHideLinkUnderline(S=>this._handleLinkLeave(S))),this._register(Ue(()=>{this._element.classList.remove(Eu+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new lk(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let e=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*e,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*e),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/e),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/e),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let r of this._rowElements)r.style.width=`${this.dimensions.css.canvas.width}px`,r.style.height=`${this.dimensions.css.cell.height}px`,r.style.lineHeight=`${this.dimensions.css.cell.height}px`,r.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let t=`${this._terminalSelector} .${ar} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=t,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(e){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let t=`${this._terminalSelector} .${ar} { pointer-events: none; color: ${e.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;t+=`${this._terminalSelector} .${ar} .xterm-dim { color: ${$e.multiplyOpacity(e.foreground,.5).css};}`,t+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let r=`blink_underline_${this._terminalClass}`,n=`blink_bar_${this._terminalClass}`,o=`blink_block_${this._terminalClass}`;t+=`@keyframes ${r} { 50% {  border-bottom-style: hidden; }}`,t+=`@keyframes ${n} { 50% {  box-shadow: none; }}`,t+=`@keyframes ${o} { 0% {  background-color: ${e.cursor.css};  color: ${e.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${e.cursor.css}; }}`,t+=`${this._terminalSelector} .${ar}.${On} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${r} 1s step-end infinite;}${this._terminalSelector} .${ar}.${On} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${n} 1s step-end infinite;}${this._terminalSelector} .${ar}.${On} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${o} 1s step-end infinite;}${this._terminalSelector} .${ar} .xterm-cursor.xterm-cursor-block { background-color: ${e.cursor.css}; color: ${e.cursorAccent.css};}${this._terminalSelector} .${ar} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${e.cursor.css} !important; color: ${e.cursorAccent.css} !important;}${this._terminalSelector} .${ar} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${e.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${ar} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${e.cursor.css} inset;}${this._terminalSelector} .${ar} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${e.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,t+=`${this._terminalSelector} .${Ra} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${Ra} div { position: absolute; background-color: ${e.selectionBackgroundOpaque.css};}${this._terminalSelector} .${Ra} div { position: absolute; background-color: ${e.selectionInactiveBackgroundOpaque.css};}`;for(let[l,c]of e.ansi.entries())t+=`${this._terminalSelector} .${Pa}${l} { color: ${c.css}; }${this._terminalSelector} .${Pa}${l}.xterm-dim { color: ${$e.multiplyOpacity(c,.5).css}; }${this._terminalSelector} .${xg}${l} { background-color: ${c.css}; }`;t+=`${this._terminalSelector} .${Pa}257 { color: ${$e.opaque(e.background).css}; }${this._terminalSelector} .${Pa}257.xterm-dim { color: ${$e.multiplyOpacity($e.opaque(e.background),.5).css}; }${this._terminalSelector} .${xg}257 { background-color: ${e.foreground.css}; }`,this._themeStyleElement.textContent=t}_setDefaultSpacing(){let e=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${e}px`,this._rowFactory.defaultSpacing=e}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(e,t){for(let r=this._rowElements.length;r<=t;r++){let n=this._document.createElement("div");this._rowContainer.appendChild(n),this._rowElements.push(n)}for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(e,t){this._refreshRowElements(e,t),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(On),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(On),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(e,t,r){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(e,t,r),this.renderRows(0,this._bufferService.rows-1),!e||!t||(this._selectionRenderModel.update(this._terminal,e,t,r),!this._selectionRenderModel.hasSelection))return;let n=this._selectionRenderModel.viewportStartRow,o=this._selectionRenderModel.viewportEndRow,l=this._selectionRenderModel.viewportCappedStartRow,c=this._selectionRenderModel.viewportCappedEndRow,h=this._document.createDocumentFragment();if(r){let m=e[0]>t[0];h.appendChild(this._createSelectionElement(l,m?t[0]:e[0],m?e[0]:t[0],c-l+1))}else{let m=n===l?e[0]:0,d=l===o?t[0]:this._bufferService.cols;h.appendChild(this._createSelectionElement(l,m,d));let v=c-l-1;if(h.appendChild(this._createSelectionElement(l+1,0,this._bufferService.cols,v)),l!==c){let _=o===c?t[0]:this._bufferService.cols;h.appendChild(this._createSelectionElement(c,0,_))}}this._selectionContainer.appendChild(h)}_createSelectionElement(e,t,r,n=1){let o=this._document.createElement("div"),l=t*this.dimensions.css.cell.width,c=this.dimensions.css.cell.width*(r-t);return l+c>this.dimensions.css.canvas.width&&(c=this.dimensions.css.canvas.width-l),o.style.height=`${n*this.dimensions.css.cell.height}px`,o.style.top=`${e*this.dimensions.css.cell.height}px`,o.style.left=`${l}px`,o.style.width=`${c}px`,o}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let e of this._rowElements)e.replaceChildren()}renderRows(e,t){let r=this._bufferService.buffer,n=r.ybase+r.y,o=Math.min(r.x,this._bufferService.cols-1),l=this._coreService.decPrivateModes.cursorBlink??this._optionsService.rawOptions.cursorBlink,c=this._coreService.decPrivateModes.cursorStyle??this._optionsService.rawOptions.cursorStyle,h=this._optionsService.rawOptions.cursorInactiveStyle;for(let m=e;m<=t;m++){let d=m+r.ydisp,v=this._rowElements[m],_=r.lines.get(d);if(!v||!_)break;v.replaceChildren(...this._rowFactory.createRow(_,d,d===n,c,h,o,l,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${Eu}${this._terminalClass}`}_handleLinkHover(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)}_handleLinkLeave(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)}_setCellUnderline(e,t,r,n,o,l){r<0&&(e=0),n<0&&(t=0);let c=this._bufferService.rows-1;r=Math.max(Math.min(r,c),0),n=Math.max(Math.min(n,c),0),o=Math.min(o,this._bufferService.cols);let h=this._bufferService.buffer,m=h.ybase+h.y,d=Math.min(h.x,o-1),v=this._optionsService.rawOptions.cursorBlink,_=this._optionsService.rawOptions.cursorStyle,x=this._optionsService.rawOptions.cursorInactiveStyle;for(let b=r;b<=n;++b){let S=b+h.ydisp,w=this._rowElements[b],E=h.lines.get(S);if(!w||!E)break;w.replaceChildren(...this._rowFactory.createRow(E,S,S===m,_,x,d,v,this.dimensions.css.cell.width,this._widthCache,l?b===r?e:0:-1,l?(b===n?t:o)-1:-1))}}};gh=Xe([ce(7,Qh),ce(8,ul),ce(9,Bt),ce(10,Tt),ce(11,ti),ce(12,Yr),ce(13,Hi)],gh);var _h=class extends Re{constructor(e,t,r){super(),this._optionsService=r,this.width=0,this.height=0,this._onCharSizeChange=this._register(new oe),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this._register(new fk(this._optionsService))}catch{this._measureStrategy=this._register(new dk(e,t,this._optionsService))}this._register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){let e=this._measureStrategy.measure();(e.width!==this.width||e.height!==this.height)&&(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};_h=Xe([ce(2,Bt)],_h);var Iv=class extends Re{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(e,t){e!==void 0&&e>0&&t!==void 0&&t>0&&(this._result.width=e,this._result.height=t)}},dk=class extends Iv{constructor(e,t,r){super(),this._document=e,this._parentElement=t,this._optionsService=r,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}},fk=class extends Iv{constructor(e){super(),this._optionsService=e,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let t=this._ctx.measureText("W");if(!("width"in t&&"fontBoundingBoxAscent"in t&&"fontBoundingBoxDescent"in t))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let e=this._ctx.measureText("W");return this._validateAndSet(e.width,e.fontBoundingBoxAscent+e.fontBoundingBoxDescent),this._result}},pk=class extends Re{constructor(e,t,r){super(),this._textarea=e,this._window=t,this.mainDocument=r,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=this._register(new mk(this._window)),this._onDprChange=this._register(new oe),this.onDprChange=this._onDprChange.event,this._onWindowChange=this._register(new oe),this.onWindowChange=this._onWindowChange.event,this._register(this.onWindowChange(n=>this._screenDprMonitor.setWindow(n))),this._register(bt.forward(this._screenDprMonitor.onDprChange,this._onDprChange)),this._register(be(this._textarea,"focus",()=>this._isFocused=!0)),this._register(be(this._textarea,"blur",()=>this._isFocused=!1))}get window(){return this._window}set window(e){this._window!==e&&(this._window=e,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}},mk=class extends Re{constructor(e){super(),this._parentWindow=e,this._windowResizeListener=this._register(new Bi),this._onDprChange=this._register(new oe),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this._register(Ue(()=>this.clearListener()))}setWindow(e){this._parentWindow=e,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=be(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){!this._resolutionMediaMatchList||!this._outerListener||(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}},gk=class extends Re{constructor(){super(),this.linkProviders=[],this._register(Ue(()=>this.linkProviders.length=0))}registerLinkProvider(e){return this.linkProviders.push(e),{dispose:()=>{let t=this.linkProviders.indexOf(e);t!==-1&&this.linkProviders.splice(t,1)}}}};function rd(e,t,r){let n=r.getBoundingClientRect(),o=e.getComputedStyle(r),l=parseInt(o.getPropertyValue("padding-left")),c=parseInt(o.getPropertyValue("padding-top"));return[t.clientX-n.left-l,t.clientY-n.top-c]}function _k(e,t,r,n,o,l,c,h,m){if(!l)return;let d=rd(e,t,r);if(d)return d[0]=Math.ceil((d[0]+(m?c/2:0))/c),d[1]=Math.ceil(d[1]/h),d[0]=Math.min(Math.max(d[0],1),n+(m?1:0)),d[1]=Math.min(Math.max(d[1],1),o),d}var vh=class{constructor(e,t){this._renderService=e,this._charSizeService=t}getCoords(e,t,r,n,o){return _k(window,e,t,r,n,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,o)}getMouseReportCoords(e,t){let r=rd(window,e,t);if(this._charSizeService.hasValidSize)return r[0]=Math.min(Math.max(r[0],0),this._renderService.dimensions.css.canvas.width-1),r[1]=Math.min(Math.max(r[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(r[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(r[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(r[0]),y:Math.floor(r[1])}}};vh=Xe([ce(0,Gr),ce(1,ul)],vh);var vk=class{constructor(t,r){this._renderCallback=t,this._coreBrowserService=r,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(t){return this._refreshCallbacks.push(t),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(t,r,n){this._rowCount=n,t=t!==void 0?t:0,r=r!==void 0?r:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,t):t,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,r):r,!this._animationFrame&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0){this._runRefreshCallbacks();return}let t=Math.max(this._rowStart,0),r=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(t,r),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let t of this._refreshCallbacks)t(0);this._refreshCallbacks=[]}},Av={};PC(Av,{getSafariVersion:()=>xk,isChromeOS:()=>Hv,isFirefox:()=>Fv,isIpad:()=>Sk,isIphone:()=>wk,isLegacyEdge:()=>yk,isLinux:()=>sd,isMac:()=>Ja,isNode:()=>hl,isSafari:()=>zv,isWindows:()=>$v});var hl=typeof process<"u"&&"title"in process,lo=hl?"node":navigator.userAgent,co=hl?"node":navigator.platform,Fv=lo.includes("Firefox"),yk=lo.includes("Edge"),zv=/^((?!chrome|android).)*safari/i.test(lo);function xk(){if(!zv)return 0;let e=lo.match(/Version\/(\d+)/);return e===null||e.length<2?0:parseInt(e[1])}var Ja=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(co),Sk=co==="iPad",wk=co==="iPhone",$v=["Windows","Win16","Win32","WinCE"].includes(co),sd=co.indexOf("Linux")>=0,Hv=/\bCrOS\b/.test(lo),Wv=class{constructor(){this._tasks=[],this._i=0}enqueue(e){this._tasks.push(e),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(e){this._idleCallback=void 0;let t=0,r=0,n=e.timeRemaining(),o=0;for(;this._i<this._tasks.length;){if(t=performance.now(),this._tasks[this._i]()||this._i++,t=Math.max(1,performance.now()-t),r=Math.max(t,r),o=e.timeRemaining(),r*1.5>o){n-t<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-t))}ms`),this._start();return}n=o}this.clear()}},bk=class extends Wv{_requestCallback(e){return setTimeout(()=>e(this._createDeadline(16)))}_cancelCallback(e){clearTimeout(e)}_createDeadline(e){let t=performance.now()+e;return{timeRemaining:()=>Math.max(0,t-performance.now())}}},Ck=class extends Wv{_requestCallback(e){return requestIdleCallback(e)}_cancelCallback(e){cancelIdleCallback(e)}},Za=!hl&&"requestIdleCallback"in window?Ck:bk,kk=class{constructor(){this._queue=new Za}set(e){this._queue.clear(),this._queue.enqueue(e)}flush(){this._queue.flush()}},yh=class extends Re{constructor(e,t,r,n,o,l,c,h,m){super(),this._rowCount=e,this._optionsService=r,this._charSizeService=n,this._coreService=o,this._coreBrowserService=h,this._renderer=this._register(new Bi),this._pausedResizeTask=new kk,this._observerDisposable=this._register(new Bi),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this._register(new oe),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this._register(new oe),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this._register(new oe),this.onRender=this._onRender.event,this._onRefreshRequest=this._register(new oe),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new vk((d,v)=>this._renderRows(d,v),this._coreBrowserService),this._register(this._renderDebouncer),this._syncOutputHandler=new Ek(this._coreBrowserService,this._coreService,()=>this._fullRefresh()),this._register(Ue(()=>this._syncOutputHandler.dispose())),this._register(this._coreBrowserService.onDprChange(()=>this.handleDevicePixelRatioChange())),this._register(c.onResize(()=>this._fullRefresh())),this._register(c.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this._register(l.onDecorationRegistered(()=>this._fullRefresh())),this._register(l.onDecorationRemoved(()=>this._fullRefresh())),this._register(this._optionsService.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(c.cols,c.rows),this._fullRefresh()})),this._register(this._optionsService.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(c.buffer.y,c.buffer.y,!0))),this._register(m.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(this._coreBrowserService.window,t),this._register(this._coreBrowserService.onWindowChange(d=>this._registerIntersectionObserver(d,t)))}get dimensions(){return this._renderer.value.dimensions}_registerIntersectionObserver(e,t){if("IntersectionObserver"in e){let r=new e.IntersectionObserver(n=>this._handleIntersectionChange(n[n.length-1]),{threshold:0});r.observe(t),this._observerDisposable.value=Ue(()=>r.disconnect())}}_handleIntersectionChange(e){this._isPaused=e.isIntersecting===void 0?e.intersectionRatio===0:!e.isIntersecting,!this._isPaused&&!this._charSizeService.hasValidSize&&this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(e,t,r=!1){if(this._isPaused){this._needsFullRefresh=!0;return}if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(e,t);return}let n=this._syncOutputHandler.flush();n&&(e=Math.min(e,n.start),t=Math.max(t,n.end)),r||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,t,this._rowCount)}_renderRows(e,t){if(this._renderer.value){if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(e,t);return}e=Math.min(e,this._rowCount-1),t=Math.min(t,this._rowCount-1),this._renderer.value.renderRows(e,t),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:t}),this._onRender.fire({start:e,end:t}),this._isNextRenderRedrawOnly=!0}}resize(e,t){this._rowCount=t,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(e){this._renderer.value=e,this._renderer.value&&(this._renderer.value.onRequestRedraw(t=>this.refreshRows(t.start,t.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(e){return this._renderDebouncer.addRefreshCallback(e)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(e,t){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(e,t)):this._renderer.value.handleResize(e,t),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(e,t,r){this._selectionState.start=e,this._selectionState.end=t,this._selectionState.columnSelectMode=r,this._renderer.value?.handleSelectionChanged(e,t,r)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};yh=Xe([ce(2,Bt),ce(3,ul),ce(4,ti),ce(5,ao),ce(6,Tt),ce(7,Yr),ce(8,Hi)],yh);var Ek=class{constructor(e,t,r){this._coreBrowserService=e,this._coreService=t,this._onTimeout=r,this._start=0,this._end=0,this._isBuffering=!1}bufferRows(e,t){this._isBuffering?(this._start=Math.min(this._start,e),this._end=Math.max(this._end,t)):(this._start=e,this._end=t,this._isBuffering=!0),this._timeout===void 0&&(this._timeout=this._coreBrowserService.window.setTimeout(()=>{this._timeout=void 0,this._coreService.decPrivateModes.synchronizedOutput=!1,this._onTimeout()},1e3))}flush(){if(this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0),!this._isBuffering)return;let e={start:this._start,end:this._end};return this._isBuffering=!1,e}dispose(){this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0)}};function Nk(e,t,r,n){let o=r.buffer.x,l=r.buffer.y;if(!r.buffer.hasScrollback)return Lk(o,l,e,t,r,n)+dl(l,t,r,n)+jk(o,l,e,t,r,n);let c;if(l===t)return c=o>e?"D":"C",to(Math.abs(o-e),eo(c,n));c=l>t?"D":"C";let h=Math.abs(l-t),m=Rk(l>t?e:o,r)+(h-1)*r.cols+1+Pk(l>t?o:e);return to(m,eo(c,n))}function Pk(e,t){return e-1}function Rk(e,t){return t.cols-e}function Lk(e,t,r,n,o,l){return dl(t,n,o,l).length===0?"":to(Kv(e,t,e,t-Zs(t,o),!1,o).length,eo("D",l))}function dl(e,t,r,n){let o=e-Zs(e,r),l=t-Zs(t,r),c=Math.abs(o-l)-Dk(e,t,r);return to(c,eo(Uv(e,t),n))}function jk(e,t,r,n,o,l){let c;dl(t,n,o,l).length>0?c=n-Zs(n,o):c=t;let h=n,m=Mk(e,t,r,n,o,l);return to(Kv(e,c,r,h,m==="C",o).length,eo(m,l))}function Dk(e,t,r){let n=0,o=e-Zs(e,r),l=t-Zs(t,r);for(let c=0;c<Math.abs(o-l);c++){let h=Uv(e,t)==="A"?-1:1;r.buffer.lines.get(o+h*c)?.isWrapped&&n++}return n}function Zs(e,t){let r=0,n=t.buffer.lines.get(e),o=n?.isWrapped;for(;o&&e>=0&&e<t.rows;)r++,n=t.buffer.lines.get(--e),o=n?.isWrapped;return r}function Mk(e,t,r,n,o,l){let c;return dl(r,n,o,l).length>0?c=n-Zs(n,o):c=t,e<r&&c<=n||e>=r&&c<n?"C":"D"}function Uv(e,t){return e>t?"A":"B"}function Kv(e,t,r,n,o,l){let c=e,h=t,m="";for(;(c!==r||h!==n)&&h>=0&&h<l.buffer.lines.length;)c+=o?1:-1,o&&c>l.cols-1?(m+=l.buffer.translateBufferLineToString(h,!1,e,c),c=0,e=0,h++):!o&&c<0&&(m+=l.buffer.translateBufferLineToString(h,!1,0,e+1),c=l.cols-1,e=c,h--);return m+l.buffer.translateBufferLineToString(h,!1,e,c)}function eo(e,t){let r=t?"O":"[";return J.ESC+r+e}function to(e,t){e=Math.floor(e);let r="";for(let n=0;n<e;n++)r+=t;return r}var Ok=class{constructor(e){this._bufferService=e,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:!this.selectionEnd||!this.selectionStart?this.selectionStart:this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?e%this._bufferService.cols===0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)-1]:[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[e,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[Math.max(e,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let e=this.selectionStart,t=this.selectionEnd;return!e||!t?!1:e[1]>t[1]||e[1]===t[1]&&e[0]>t[0]}handleTrim(e){return this.selectionStart&&(this.selectionStart[1]-=e),this.selectionEnd&&(this.selectionEnd[1]-=e),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}};function Sg(e,t){if(e.start.y>e.end.y)throw new Error(`Buffer range end (${e.end.x}, ${e.end.y}) cannot be before start (${e.start.x}, ${e.start.y})`);return t*(e.end.y-e.start.y)+(e.end.x-e.start.x+1)}var Nu=50,Tk=15,Bk=50,Ik=500,Ak="",Fk=new RegExp(Ak,"g"),xh=class extends Re{constructor(e,t,r,n,o,l,c,h,m){super(),this._element=e,this._screenElement=t,this._linkifier=r,this._bufferService=n,this._coreService=o,this._mouseService=l,this._optionsService=c,this._renderService=h,this._coreBrowserService=m,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new dr,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this._register(new oe),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this._register(new oe),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this._register(new oe),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this._register(new oe),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=d=>this._handleMouseMove(d),this._mouseUpListener=d=>this._handleMouseUp(d),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(d=>this._handleTrim(d)),this._register(this._bufferService.buffers.onBufferActivate(d=>this._handleBufferActivate(d))),this.enable(),this._model=new Ok(this._bufferService),this._activeSelectionMode=0,this._register(Ue(()=>{this._removeMouseDownListeners()})),this._register(this._bufferService.onResize(d=>{d.rowsChanged&&this.clearSelection()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;return!e||!t?!1:e[0]!==t[0]||e[1]!==t[1]}get selectionText(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;if(!e||!t)return"";let r=this._bufferService.buffer,n=[];if(this._activeSelectionMode===3){if(e[0]===t[0])return"";let o=e[0]<t[0]?e[0]:t[0],l=e[0]<t[0]?t[0]:e[0];for(let c=e[1];c<=t[1];c++){let h=r.translateBufferLineToString(c,!0,o,l);n.push(h)}}else{let o=e[1]===t[1]?t[0]:void 0;n.push(r.translateBufferLineToString(e[1],!0,e[0],o));for(let l=e[1]+1;l<=t[1]-1;l++){let c=r.lines.get(l),h=r.translateBufferLineToString(l,!0);c?.isWrapped?n[n.length-1]+=h:n.push(h)}if(e[1]!==t[1]){let l=r.lines.get(t[1]),c=r.translateBufferLineToString(t[1],!0,0,t[0]);l&&l.isWrapped?n[n.length-1]+=c:n.push(c)}}return n.map(o=>o.replace(Fk," ")).join($v?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(e){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),sd&&e&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(e){let t=this._getMouseBufferCoords(e),r=this._model.finalSelectionStart,n=this._model.finalSelectionEnd;return!r||!n||!t?!1:this._areCoordsInSelection(t,r,n)}isCellInSelection(e,t){let r=this._model.finalSelectionStart,n=this._model.finalSelectionEnd;return!r||!n?!1:this._areCoordsInSelection([e,t],r,n)}_areCoordsInSelection(e,t,r){return e[1]>t[1]&&e[1]<r[1]||t[1]===r[1]&&e[1]===t[1]&&e[0]>=t[0]&&e[0]<r[0]||t[1]<r[1]&&e[1]===r[1]&&e[0]<r[0]||t[1]<r[1]&&e[1]===t[1]&&e[0]>=t[0]}_selectWordAtCursor(e,t){let r=this._linkifier.currentLink?.link?.range;if(r)return this._model.selectionStart=[r.start.x-1,r.start.y-1],this._model.selectionStartLength=Sg(r,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let n=this._getMouseBufferCoords(e);return n?(this._selectWordAt(n,t),this._model.selectionEnd=void 0,!0):!1}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(e,t){this._model.clearSelection(),e=Math.max(e,0),t=Math.min(t,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._bufferService.cols,t],this.refresh(),this._onSelectionChange.fire()}_handleTrim(e){this._model.handleTrim(e)&&this.refresh()}_getMouseBufferCoords(e){let t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(t)return t[0]--,t[1]--,t[1]+=this._bufferService.buffer.ydisp,t}_getMouseEventScrollAmount(e){let t=rd(this._coreBrowserService.window,e,this._screenElement)[1],r=this._renderService.dimensions.css.canvas.height;return t>=0&&t<=r?0:(t>r&&(t-=r),t=Math.min(Math.max(t,-Nu),Nu),t/=Nu,t/Math.abs(t)+Math.round(t*(Tk-1)))}shouldForceSelection(e){return Ja?e.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:e.shiftKey}handleMouseDown(e){if(this._mouseDownTimeStamp=e.timeStamp,!(e.button===2&&this.hasSelection)&&e.button===0){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._handleIncrementalClick(e):e.detail===1?this._handleSingleClick(e):e.detail===2?this._handleDoubleClick(e):e.detail===3&&this._handleTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),Bk)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))}_handleSingleClick(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?3:0,this._model.selectionStart=this._getMouseBufferCoords(e),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let t=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);t&&t.length!==this._model.selectionStart[0]&&t.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(e){this._selectWordAtCursor(e,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(e){let t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=2,this._selectLineAt(t[1]))}shouldColumnSelect(e){return e.altKey&&!(Ja&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(e){if(e.stopImmediatePropagation(),!this._model.selectionStart)return;let t=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),!this._model.selectionEnd){this.refresh(!0);return}this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let r=this._bufferService.buffer;if(this._model.selectionEnd[1]<r.lines.length){let n=r.lines.get(this._model.selectionEnd[1]);n&&n.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}(!t||t[0]!==this._model.selectionEnd[0]||t[1]!==this._model.selectionEnd[1])&&this.refresh(!0)}_dragScroll(){if(!(!this._model.selectionEnd||!this._model.selectionStart)&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let e=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(e.ydisp+this._bufferService.rows,e.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=e.ydisp),this.refresh()}}_handleMouseUp(e){let t=e.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&t<Ik&&e.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let r=this._mouseService.getCoords(e,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(r&&r[0]!==void 0&&r[1]!==void 0){let n=Nk(r[0]-1,r[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(n,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd,r=!!e&&!!t&&(e[0]!==t[0]||e[1]!==t[1]);if(!r){this._oldHasSelection&&this._fireOnSelectionChange(e,t,r);return}!e||!t||(!this._oldSelectionStart||!this._oldSelectionEnd||e[0]!==this._oldSelectionStart[0]||e[1]!==this._oldSelectionStart[1]||t[0]!==this._oldSelectionEnd[0]||t[1]!==this._oldSelectionEnd[1])&&this._fireOnSelectionChange(e,t,r)}_fireOnSelectionChange(e,t,r){this._oldSelectionStart=e,this._oldSelectionEnd=t,this._oldHasSelection=r,this._onSelectionChange.fire()}_handleBufferActivate(e){this.clearSelection(),this._trimListener.dispose(),this._trimListener=e.activeBuffer.lines.onTrim(t=>this._handleTrim(t))}_convertViewportColToCharacterIndex(e,t){let r=t;for(let n=0;t>=n;n++){let o=e.loadCell(n,this._workCell).getChars().length;this._workCell.getWidth()===0?r--:o>1&&t!==n&&(r+=o-1)}return r}setSelection(e,t,r){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,t],this._model.selectionStartLength=r,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(e){this._isClickInSelection(e)||(this._selectWordAtCursor(e,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(e,t,r=!0,n=!0){if(e[0]>=this._bufferService.cols)return;let o=this._bufferService.buffer,l=o.lines.get(e[1]);if(!l)return;let c=o.translateBufferLineToString(e[1],!1),h=this._convertViewportColToCharacterIndex(l,e[0]),m=h,d=e[0]-h,v=0,_=0,x=0,b=0;if(c.charAt(h)===" "){for(;h>0&&c.charAt(h-1)===" ";)h--;for(;m<c.length&&c.charAt(m+1)===" ";)m++}else{let E=e[0],M=e[0];l.getWidth(E)===0&&(v++,E--),l.getWidth(M)===2&&(_++,M++);let P=l.getString(M).length;for(P>1&&(b+=P-1,m+=P-1);E>0&&h>0&&!this._isCharWordSeparator(l.loadCell(E-1,this._workCell));){l.loadCell(E-1,this._workCell);let j=this._workCell.getChars().length;this._workCell.getWidth()===0?(v++,E--):j>1&&(x+=j-1,h-=j-1),h--,E--}for(;M<l.length&&m+1<c.length&&!this._isCharWordSeparator(l.loadCell(M+1,this._workCell));){l.loadCell(M+1,this._workCell);let j=this._workCell.getChars().length;this._workCell.getWidth()===2?(_++,M++):j>1&&(b+=j-1,m+=j-1),m++,M++}}m++;let S=h+d-v+x,w=Math.min(this._bufferService.cols,m-h+v+_-x-b);if(!(!t&&c.slice(h,m).trim()==="")){if(r&&S===0&&l.getCodePoint(0)!==32){let E=o.lines.get(e[1]-1);if(E&&l.isWrapped&&E.getCodePoint(this._bufferService.cols-1)!==32){let M=this._getWordAt([this._bufferService.cols-1,e[1]-1],!1,!0,!1);if(M){let P=this._bufferService.cols-M.start;S-=P,w+=P}}}if(n&&S+w===this._bufferService.cols&&l.getCodePoint(this._bufferService.cols-1)!==32){let E=o.lines.get(e[1]+1);if(E?.isWrapped&&E.getCodePoint(0)!==32){let M=this._getWordAt([0,e[1]+1],!1,!1,!0);M&&(w+=M.length)}}return{start:S,length:w}}}_selectWordAt(e,t){let r=this._getWordAt(e,t);if(r){for(;r.start<0;)r.start+=this._bufferService.cols,e[1]--;this._model.selectionStart=[r.start,e[1]],this._model.selectionStartLength=r.length}}_selectToWordAt(e){let t=this._getWordAt(e,!0);if(t){let r=e[1];for(;t.start<0;)t.start+=this._bufferService.cols,r--;if(!this._model.areSelectionValuesReversed())for(;t.start+t.length>this._bufferService.cols;)t.length-=this._bufferService.cols,r++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?t.start:t.start+t.length,r]}}_isCharWordSeparator(e){return e.getWidth()===0?!1:this._optionsService.rawOptions.wordSeparator.indexOf(e.getChars())>=0}_selectLineAt(e){let t=this._bufferService.buffer.getWrappedRangeForLine(e),r={start:{x:0,y:t.first},end:{x:this._bufferService.cols-1,y:t.last}};this._model.selectionStart=[0,t.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=Sg(r,this._bufferService.cols)}};xh=Xe([ce(3,Tt),ce(4,ti),ce(5,Yh),ce(6,Bt),ce(7,Gr),ce(8,Yr)],xh);var wg=class{constructor(){this._data={}}set(e,t,r){this._data[e]||(this._data[e]={}),this._data[e][t]=r}get(e,t){return this._data[e]?this._data[e][t]:void 0}clear(){this._data={}}},bg=class{constructor(){this._color=new wg,this._css=new wg}setCss(e,t,r){this._css.set(e,t,r)}getCss(e,t){return this._css.get(e,t)}setColor(e,t,r){this._color.set(e,t,r)}getColor(e,t){return this._color.get(e,t)}clear(){this._color.clear(),this._css.clear()}},at=Object.freeze((()=>{let e=[Qe.toColor("#2e3436"),Qe.toColor("#cc0000"),Qe.toColor("#4e9a06"),Qe.toColor("#c4a000"),Qe.toColor("#3465a4"),Qe.toColor("#75507b"),Qe.toColor("#06989a"),Qe.toColor("#d3d7cf"),Qe.toColor("#555753"),Qe.toColor("#ef2929"),Qe.toColor("#8ae234"),Qe.toColor("#fce94f"),Qe.toColor("#729fcf"),Qe.toColor("#ad7fa8"),Qe.toColor("#34e2e2"),Qe.toColor("#eeeeec")],t=[0,95,135,175,215,255];for(let r=0;r<216;r++){let n=t[r/36%6|0],o=t[r/6%6|0],l=t[r%6];e.push({css:it.toCss(n,o,l),rgba:it.toRgba(n,o,l)})}for(let r=0;r<24;r++){let n=8+r*10;e.push({css:it.toCss(n,n,n),rgba:it.toRgba(n,n,n)})}return e})()),zs=Qe.toColor("#ffffff"),$n=Qe.toColor("#000000"),Cg=Qe.toColor("#ffffff"),kg=$n,Tn={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117},zk=zs,Sh=class extends Re{constructor(e){super(),this._optionsService=e,this._contrastCache=new bg,this._halfContrastCache=new bg,this._onChangeColors=this._register(new oe),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:zs,background:$n,cursor:Cg,cursorAccent:kg,selectionForeground:void 0,selectionBackgroundTransparent:Tn,selectionBackgroundOpaque:$e.blend($n,Tn),selectionInactiveBackgroundTransparent:Tn,selectionInactiveBackgroundOpaque:$e.blend($n,Tn),scrollbarSliderBackground:$e.opacity(zs,.2),scrollbarSliderHoverBackground:$e.opacity(zs,.4),scrollbarSliderActiveBackground:$e.opacity(zs,.5),overviewRulerBorder:zs,ansi:at.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this._register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this._register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(e={}){let t=this._colors;if(t.foreground=Ie(e.foreground,zs),t.background=Ie(e.background,$n),t.cursor=$e.blend(t.background,Ie(e.cursor,Cg)),t.cursorAccent=$e.blend(t.background,Ie(e.cursorAccent,kg)),t.selectionBackgroundTransparent=Ie(e.selectionBackground,Tn),t.selectionBackgroundOpaque=$e.blend(t.background,t.selectionBackgroundTransparent),t.selectionInactiveBackgroundTransparent=Ie(e.selectionInactiveBackground,t.selectionBackgroundTransparent),t.selectionInactiveBackgroundOpaque=$e.blend(t.background,t.selectionInactiveBackgroundTransparent),t.selectionForeground=e.selectionForeground?Ie(e.selectionForeground,vg):void 0,t.selectionForeground===vg&&(t.selectionForeground=void 0),$e.isOpaque(t.selectionBackgroundTransparent)&&(t.selectionBackgroundTransparent=$e.opacity(t.selectionBackgroundTransparent,.3)),$e.isOpaque(t.selectionInactiveBackgroundTransparent)&&(t.selectionInactiveBackgroundTransparent=$e.opacity(t.selectionInactiveBackgroundTransparent,.3)),t.scrollbarSliderBackground=Ie(e.scrollbarSliderBackground,$e.opacity(t.foreground,.2)),t.scrollbarSliderHoverBackground=Ie(e.scrollbarSliderHoverBackground,$e.opacity(t.foreground,.4)),t.scrollbarSliderActiveBackground=Ie(e.scrollbarSliderActiveBackground,$e.opacity(t.foreground,.5)),t.overviewRulerBorder=Ie(e.overviewRulerBorder,zk),t.ansi=at.slice(),t.ansi[0]=Ie(e.black,at[0]),t.ansi[1]=Ie(e.red,at[1]),t.ansi[2]=Ie(e.green,at[2]),t.ansi[3]=Ie(e.yellow,at[3]),t.ansi[4]=Ie(e.blue,at[4]),t.ansi[5]=Ie(e.magenta,at[5]),t.ansi[6]=Ie(e.cyan,at[6]),t.ansi[7]=Ie(e.white,at[7]),t.ansi[8]=Ie(e.brightBlack,at[8]),t.ansi[9]=Ie(e.brightRed,at[9]),t.ansi[10]=Ie(e.brightGreen,at[10]),t.ansi[11]=Ie(e.brightYellow,at[11]),t.ansi[12]=Ie(e.brightBlue,at[12]),t.ansi[13]=Ie(e.brightMagenta,at[13]),t.ansi[14]=Ie(e.brightCyan,at[14]),t.ansi[15]=Ie(e.brightWhite,at[15]),e.extendedAnsi){let r=Math.min(t.ansi.length-16,e.extendedAnsi.length);for(let n=0;n<r;n++)t.ansi[n+16]=Ie(e.extendedAnsi[n],at[n+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(e){this._restoreColor(e),this._onChangeColors.fire(this.colors)}_restoreColor(e){if(e===void 0){for(let t=0;t<this._restoreColors.ansi.length;++t)this._colors.ansi[t]=this._restoreColors.ansi[t];return}switch(e){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[e]=this._restoreColors.ansi[e]}}modifyColors(e){e(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};Sh=Xe([ce(0,Bt)],Sh);function Ie(e,t){if(e!==void 0)try{return Qe.toColor(e)}catch{}return t}var $k=class{constructor(...e){this._entries=new Map;for(let[t,r]of e)this.set(t,r)}set(e,t){let r=this._entries.get(e);return this._entries.set(e,t),r}forEach(e){for(let[t,r]of this._entries.entries())e(t,r)}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}},Hk=class{constructor(){this._services=new $k,this._services.set(Qh,this)}setService(e,t){this._services.set(e,t)}getService(e){return this._services.get(e)}createInstance(e,...t){let r=TC(e).sort((l,c)=>l.index-c.index),n=[];for(let l of r){let c=this._services.get(l.id);if(!c)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${l.id._id}.`);n.push(c)}let o=r.length>0?r[0].index:t.length;if(t.length!==o)throw new Error(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);return new e(...t,...n)}},Wk={trace:0,debug:1,info:2,warn:3,error:4,off:5},Uk="xterm.js: ",wh=class extends Re{constructor(e){super(),this._optionsService=e,this._logLevel=5,this._updateLogLevel(),this._register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}get logLevel(){return this._logLevel}_updateLogLevel(){this._logLevel=Wk[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(e){for(let t=0;t<e.length;t++)typeof e[t]=="function"&&(e[t]=e[t]())}_log(e,t,r){this._evalLazyOptionalParams(r),e.call(console,(this._optionsService.options.logger?"":Uk)+t,...r)}trace(e,...t){this._logLevel<=0&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,e,t)}debug(e,...t){this._logLevel<=1&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,e,t)}info(e,...t){this._logLevel<=2&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,e,t)}warn(e,...t){this._logLevel<=3&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,e,t)}error(e,...t){this._logLevel<=4&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,e,t)}};wh=Xe([ce(0,Bt)],wh);var Eg=class extends Re{constructor(e){super(),this._maxLength=e,this.onDeleteEmitter=this._register(new oe),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this._register(new oe),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this._register(new oe),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(e){if(this._maxLength===e)return;let t=new Array(e);for(let r=0;r<Math.min(e,this.length);r++)t[r]=this._array[this._getCyclicIndex(r)];this._array=t,this._maxLength=e,this._startIndex=0}get length(){return this._length}set length(e){if(e>this._length)for(let t=this._length;t<e;t++)this._array[t]=void 0;this._length=e}get(e){return this._array[this._getCyclicIndex(e)]}set(e,t){this._array[this._getCyclicIndex(e)]=t}push(e){this._array[this._getCyclicIndex(this._length)]=e,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(e,t,...r){if(t){for(let n=e;n<this._length-t;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+t)];this._length-=t,this.onDeleteEmitter.fire({index:e,amount:t})}for(let n=this._length-1;n>=e;n--)this._array[this._getCyclicIndex(n+r.length)]=this._array[this._getCyclicIndex(n)];for(let n=0;n<r.length;n++)this._array[this._getCyclicIndex(e+n)]=r[n];if(r.length&&this.onInsertEmitter.fire({index:e,amount:r.length}),this._length+r.length>this._maxLength){let n=this._length+r.length-this._maxLength;this._startIndex+=n,this._length=this._maxLength,this.onTrimEmitter.fire(n)}else this._length+=r.length}trimStart(e){e>this._length&&(e=this._length),this._startIndex+=e,this._length-=e,this.onTrimEmitter.fire(e)}shiftElements(e,t,r){if(!(t<=0)){if(e<0||e>=this._length)throw new Error("start argument out of range");if(e+r<0)throw new Error("Cannot shift elements in list beyond index 0");if(r>0){for(let o=t-1;o>=0;o--)this.set(e+o+r,this.get(e+o));let n=e+t+r-this._length;if(n>0)for(this._length+=n;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let n=0;n<t;n++)this.set(e+n+r,this.get(e+n))}}_getCyclicIndex(e){return(this._startIndex+e)%this._maxLength}},Pe=3,st=Object.freeze(new oo),La=0,Pu=2,Hn=class Vv{constructor(t,r,n=!1){this.isWrapped=n,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(t*Pe);let o=r||dr.fromCharData([0,hv,1,0]);for(let l=0;l<t;++l)this.setCell(l,o);this.length=t}get(t){let r=this._data[t*Pe+0],n=r&2097151;return[this._data[t*Pe+1],r&2097152?this._combined[t]:n?xs(n):"",r>>22,r&2097152?this._combined[t].charCodeAt(this._combined[t].length-1):n]}set(t,r){this._data[t*Pe+1]=r[0],r[1].length>1?(this._combined[t]=r[1],this._data[t*Pe+0]=t|2097152|r[2]<<22):this._data[t*Pe+0]=r[1].charCodeAt(0)|r[2]<<22}getWidth(t){return this._data[t*Pe+0]>>22}hasWidth(t){return this._data[t*Pe+0]&12582912}getFg(t){return this._data[t*Pe+1]}getBg(t){return this._data[t*Pe+2]}hasContent(t){return this._data[t*Pe+0]&4194303}getCodePoint(t){let r=this._data[t*Pe+0];return r&2097152?this._combined[t].charCodeAt(this._combined[t].length-1):r&2097151}isCombined(t){return this._data[t*Pe+0]&2097152}getString(t){let r=this._data[t*Pe+0];return r&2097152?this._combined[t]:r&2097151?xs(r&2097151):""}isProtected(t){return this._data[t*Pe+2]&536870912}loadCell(t,r){return La=t*Pe,r.content=this._data[La+0],r.fg=this._data[La+1],r.bg=this._data[La+2],r.content&2097152&&(r.combinedData=this._combined[t]),r.bg&268435456&&(r.extended=this._extendedAttrs[t]),r}setCell(t,r){r.content&2097152&&(this._combined[t]=r.combinedData),r.bg&268435456&&(this._extendedAttrs[t]=r.extended),this._data[t*Pe+0]=r.content,this._data[t*Pe+1]=r.fg,this._data[t*Pe+2]=r.bg}setCellFromCodepoint(t,r,n,o){o.bg&268435456&&(this._extendedAttrs[t]=o.extended),this._data[t*Pe+0]=r|n<<22,this._data[t*Pe+1]=o.fg,this._data[t*Pe+2]=o.bg}addCodepointToCell(t,r,n){let o=this._data[t*Pe+0];o&2097152?this._combined[t]+=xs(r):o&2097151?(this._combined[t]=xs(o&2097151)+xs(r),o&=-2097152,o|=2097152):o=r|1<<22,n&&(o&=-12582913,o|=n<<22),this._data[t*Pe+0]=o}insertCells(t,r,n){if(t%=this.length,t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,n),r<this.length-t){let o=new dr;for(let l=this.length-t-r-1;l>=0;--l)this.setCell(t+r+l,this.loadCell(t+l,o));for(let l=0;l<r;++l)this.setCell(t+l,n)}else for(let o=t;o<this.length;++o)this.setCell(o,n);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,n)}deleteCells(t,r,n){if(t%=this.length,r<this.length-t){let o=new dr;for(let l=0;l<this.length-t-r;++l)this.setCell(t+l,this.loadCell(t+r+l,o));for(let l=this.length-r;l<this.length;++l)this.setCell(l,n)}else for(let o=t;o<this.length;++o)this.setCell(o,n);t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,n),this.getWidth(t)===0&&!this.hasContent(t)&&this.setCellFromCodepoint(t,0,1,n)}replaceCells(t,r,n,o=!1){if(o){for(t&&this.getWidth(t-1)===2&&!this.isProtected(t-1)&&this.setCellFromCodepoint(t-1,0,1,n),r<this.length&&this.getWidth(r-1)===2&&!this.isProtected(r)&&this.setCellFromCodepoint(r,0,1,n);t<r&&t<this.length;)this.isProtected(t)||this.setCell(t,n),t++;return}for(t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,n),r<this.length&&this.getWidth(r-1)===2&&this.setCellFromCodepoint(r,0,1,n);t<r&&t<this.length;)this.setCell(t++,n)}resize(t,r){if(t===this.length)return this._data.length*4*Pu<this._data.buffer.byteLength;let n=t*Pe;if(t>this.length){if(this._data.buffer.byteLength>=n*4)this._data=new Uint32Array(this._data.buffer,0,n);else{let o=new Uint32Array(n);o.set(this._data),this._data=o}for(let o=this.length;o<t;++o)this.setCell(o,r)}else{this._data=this._data.subarray(0,n);let o=Object.keys(this._combined);for(let c=0;c<o.length;c++){let h=parseInt(o[c],10);h>=t&&delete this._combined[h]}let l=Object.keys(this._extendedAttrs);for(let c=0;c<l.length;c++){let h=parseInt(l[c],10);h>=t&&delete this._extendedAttrs[h]}}return this.length=t,n*4*Pu<this._data.buffer.byteLength}cleanupMemory(){if(this._data.length*4*Pu<this._data.buffer.byteLength){let t=new Uint32Array(this._data.length);return t.set(this._data),this._data=t,1}return 0}fill(t,r=!1){if(r){for(let n=0;n<this.length;++n)this.isProtected(n)||this.setCell(n,t);return}this._combined={},this._extendedAttrs={};for(let n=0;n<this.length;++n)this.setCell(n,t)}copyFrom(t){this.length!==t.length?this._data=new Uint32Array(t._data):this._data.set(t._data),this.length=t.length,this._combined={};for(let r in t._combined)this._combined[r]=t._combined[r];this._extendedAttrs={};for(let r in t._extendedAttrs)this._extendedAttrs[r]=t._extendedAttrs[r];this.isWrapped=t.isWrapped}clone(){let t=new Vv(0);t._data=new Uint32Array(this._data),t.length=this.length;for(let r in this._combined)t._combined[r]=this._combined[r];for(let r in this._extendedAttrs)t._extendedAttrs[r]=this._extendedAttrs[r];return t.isWrapped=this.isWrapped,t}getTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(this._data[t*Pe+0]&4194303)return t+(this._data[t*Pe+0]>>22);return 0}getNoBgTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(this._data[t*Pe+0]&4194303||this._data[t*Pe+2]&50331648)return t+(this._data[t*Pe+0]>>22);return 0}copyCellsFrom(t,r,n,o,l){let c=t._data;if(l)for(let m=o-1;m>=0;m--){for(let d=0;d<Pe;d++)this._data[(n+m)*Pe+d]=c[(r+m)*Pe+d];c[(r+m)*Pe+2]&268435456&&(this._extendedAttrs[n+m]=t._extendedAttrs[r+m])}else for(let m=0;m<o;m++){for(let d=0;d<Pe;d++)this._data[(n+m)*Pe+d]=c[(r+m)*Pe+d];c[(r+m)*Pe+2]&268435456&&(this._extendedAttrs[n+m]=t._extendedAttrs[r+m])}let h=Object.keys(t._combined);for(let m=0;m<h.length;m++){let d=parseInt(h[m],10);d>=r&&(this._combined[d-r+n]=t._combined[d])}}translateToString(t,r,n,o){r=r??0,n=n??this.length,t&&(n=Math.min(n,this.getTrimmedLength())),o&&(o.length=0);let l="";for(;r<n;){let c=this._data[r*Pe+0],h=c&2097151,m=c&2097152?this._combined[r]:h?xs(h):Ss;if(l+=m,o)for(let d=0;d<m.length;++d)o.push(r);r+=c>>22||1}return o&&o.push(r),l}};function Kk(e,t,r,n,o,l){let c=[];for(let h=0;h<e.length-1;h++){let m=h,d=e.get(++m);if(!d.isWrapped)continue;let v=[e.get(h)];for(;m<e.length&&d.isWrapped;)v.push(d),d=e.get(++m);if(!l&&n>=h&&n<m){h+=v.length-1;continue}let _=0,x=ro(v,_,t),b=1,S=0;for(;b<v.length;){let E=ro(v,b,t),M=E-S,P=r-x,j=Math.min(M,P);v[_].copyCellsFrom(v[b],S,x,j,!1),x+=j,x===r&&(_++,x=0),S+=j,S===E&&(b++,S=0),x===0&&_!==0&&v[_-1].getWidth(r-1)===2&&(v[_].copyCellsFrom(v[_-1],r-1,x++,1,!1),v[_-1].setCell(r-1,o))}v[_].replaceCells(x,r,o);let w=0;for(let E=v.length-1;E>0&&(E>_||v[E].getTrimmedLength()===0);E--)w++;w>0&&(c.push(h+v.length-w),c.push(w)),h+=v.length-1}return c}function Vk(e,t){let r=[],n=0,o=t[n],l=0;for(let c=0;c<e.length;c++)if(o===c){let h=t[++n];e.onDeleteEmitter.fire({index:c-l,amount:h}),c+=h-1,l+=h,o=t[++n]}else r.push(c);return{layout:r,countRemoved:l}}function qk(e,t){let r=[];for(let n=0;n<t.length;n++)r.push(e.get(t[n]));for(let n=0;n<r.length;n++)e.set(n,r[n]);e.length=t.length}function Qk(e,t,r){let n=[],o=e.map((m,d)=>ro(e,d,t)).reduce((m,d)=>m+d),l=0,c=0,h=0;for(;h<o;){if(o-h<r){n.push(o-h);break}l+=r;let m=ro(e,c,t);l>m&&(l-=m,c++);let d=e[c].getWidth(l-1)===2;d&&l--;let v=d?r-1:r;n.push(v),h+=v}return n}function ro(e,t,r){if(t===e.length-1)return e[t].getTrimmedLength();let n=!e[t].hasContent(r-1)&&e[t].getWidth(r-1)===1,o=e[t+1].getWidth(0)===2;return n&&o?r-1:r}var qv=class Qv{constructor(t){this.line=t,this.isDisposed=!1,this._disposables=[],this._id=Qv._nextId++,this._onDispose=this.register(new oe),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),Js(this._disposables),this._disposables.length=0)}register(t){return this._disposables.push(t),t}};qv._nextId=1;var Yk=qv,ut={},$s=ut.B;ut[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""};ut.A={"#":""};ut.B=void 0;ut[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""};ut.C=ut[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};ut.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};ut.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};ut.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};ut.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""};ut.E=ut[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};ut.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""};ut.H=ut[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};ut["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""};var Ng=4294967295,Pg=class{constructor(e,t,r){this._hasScrollback=e,this._optionsService=t,this._bufferService=r,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=st.clone(),this.savedCharset=$s,this.markers=[],this._nullCell=dr.fromCharData([0,hv,1,0]),this._whitespaceCell=dr.fromCharData([0,Ss,1,32]),this._isClearing=!1,this._memoryCleanupQueue=new Za,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new Eg(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new Ya),this._nullCell}getWhitespaceCell(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new Ya),this._whitespaceCell}getBlankLine(e,t){return new Hn(this._bufferService.cols,this.getNullCell(e),t)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows}_getCorrectBufferLength(e){if(!this._hasScrollback)return e;let t=e+this._optionsService.rawOptions.scrollback;return t>Ng?Ng:t}fillViewportRows(e){if(this.lines.length===0){e===void 0&&(e=st);let t=this._rows;for(;t--;)this.lines.push(this.getBlankLine(e))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new Eg(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(e,t){let r=this.getNullCell(st),n=0,o=this._getCorrectBufferLength(t);if(o>this.lines.maxLength&&(this.lines.maxLength=o),this.lines.length>0){if(this._cols<e)for(let c=0;c<this.lines.length;c++)n+=+this.lines.get(c).resize(e,r);let l=0;if(this._rows<t)for(let c=this._rows;c<t;c++)this.lines.length<t+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new Hn(e,r)):this.ybase>0&&this.lines.length<=this.ybase+this.y+l+1?(this.ybase--,l++,this.ydisp>0&&this.ydisp--):this.lines.push(new Hn(e,r)));else for(let c=this._rows;c>t;c--)this.lines.length>t+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(o<this.lines.maxLength){let c=this.lines.length-o;c>0&&(this.lines.trimStart(c),this.ybase=Math.max(this.ybase-c,0),this.ydisp=Math.max(this.ydisp-c,0),this.savedY=Math.max(this.savedY-c,0)),this.lines.maxLength=o}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,t-1),l&&(this.y+=l),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=t-1,this._isReflowEnabled&&(this._reflow(e,t),this._cols>e))for(let l=0;l<this.lines.length;l++)n+=+this.lines.get(l).resize(e,r);this._cols=e,this._rows=t,this._memoryCleanupQueue.clear(),n>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let e=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,e=!1);let t=0;for(;this._memoryCleanupPosition<this.lines.length;)if(t+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),t>100)return!0;return e}get _isReflowEnabled(){let e=this._optionsService.rawOptions.windowsPty;return e&&e.buildNumber?this._hasScrollback&&e.backend==="conpty"&&e.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(e,t){this._cols!==e&&(e>this._cols?this._reflowLarger(e,t):this._reflowSmaller(e,t))}_reflowLarger(e,t){let r=this._optionsService.rawOptions.reflowCursorLine,n=Kk(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(st),r);if(n.length>0){let o=Vk(this.lines,n);qk(this.lines,o.layout),this._reflowLargerAdjustViewport(e,t,o.countRemoved)}}_reflowLargerAdjustViewport(e,t,r){let n=this.getNullCell(st),o=r;for(;o-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<t&&this.lines.push(new Hn(e,n))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-r,0)}_reflowSmaller(e,t){let r=this._optionsService.rawOptions.reflowCursorLine,n=this.getNullCell(st),o=[],l=0;for(let c=this.lines.length-1;c>=0;c--){let h=this.lines.get(c);if(!h||!h.isWrapped&&h.getTrimmedLength()<=e)continue;let m=[h];for(;h.isWrapped&&c>0;)h=this.lines.get(--c),m.unshift(h);if(!r){let j=this.ybase+this.y;if(j>=c&&j<c+m.length)continue}let d=m[m.length-1].getTrimmedLength(),v=Qk(m,this._cols,e),_=v.length-m.length,x;this.ybase===0&&this.y!==this.lines.length-1?x=Math.max(0,this.y-this.lines.maxLength+_):x=Math.max(0,this.lines.length-this.lines.maxLength+_);let b=[];for(let j=0;j<_;j++){let A=this.getBlankLine(st,!0);b.push(A)}b.length>0&&(o.push({start:c+m.length+l,newLines:b}),l+=b.length),m.push(...b);let S=v.length-1,w=v[S];w===0&&(S--,w=v[S]);let E=m.length-_-1,M=d;for(;E>=0;){let j=Math.min(M,w);if(m[S]===void 0)break;if(m[S].copyCellsFrom(m[E],M-j,w-j,j,!0),w-=j,w===0&&(S--,w=v[S]),M-=j,M===0){E--;let A=Math.max(E,0);M=ro(m,A,this._cols)}}for(let j=0;j<m.length;j++)v[j]<e&&m[j].setCell(v[j],n);let P=_-x;for(;P-- >0;)this.ybase===0?this.y<t-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+l)-t&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+_,this.ybase+t-1)}if(o.length>0){let c=[],h=[];for(let w=0;w<this.lines.length;w++)h.push(this.lines.get(w));let m=this.lines.length,d=m-1,v=0,_=o[v];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+l);let x=0;for(let w=Math.min(this.lines.maxLength-1,m+l-1);w>=0;w--)if(_&&_.start>d+x){for(let E=_.newLines.length-1;E>=0;E--)this.lines.set(w--,_.newLines[E]);w++,c.push({index:d+1,amount:_.newLines.length}),x+=_.newLines.length,_=o[++v]}else this.lines.set(w,h[d--]);let b=0;for(let w=c.length-1;w>=0;w--)c[w].index+=b,this.lines.onInsertEmitter.fire(c[w]),b+=c[w].amount;let S=Math.max(0,m+l-this.lines.maxLength);S>0&&this.lines.onTrimEmitter.fire(S)}}translateBufferLineToString(e,t,r=0,n){let o=this.lines.get(e);return o?o.translateToString(t,r,n):""}getWrappedRangeForLine(e){let t=e,r=e;for(;t>0&&this.lines.get(t).isWrapped;)t--;for(;r+1<this.lines.length&&this.lines.get(r+1).isWrapped;)r++;return{first:t,last:r}}setupTabStops(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0}prevStop(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e}nextStop(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e}clearMarkers(e){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].line===e&&(this.markers[t].dispose(),this.markers.splice(t--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].dispose();this.markers.length=0,this._isClearing=!1}addMarker(e){let t=new Yk(e);return this.markers.push(t),t.register(this.lines.onTrim(r=>{t.line-=r,t.line<0&&t.dispose()})),t.register(this.lines.onInsert(r=>{t.line>=r.index&&(t.line+=r.amount)})),t.register(this.lines.onDelete(r=>{t.line>=r.index&&t.line<r.index+r.amount&&t.dispose(),t.line>r.index&&(t.line-=r.amount)})),t.register(t.onDispose(()=>this._removeMarker(t))),t}_removeMarker(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)}},Gk=class extends Re{constructor(e,t){super(),this._optionsService=e,this._bufferService=t,this._onBufferActivate=this._register(new oe),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this._register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this._register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new Pg(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new Pg(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(e,t){this._normal.resize(e,t),this._alt.resize(e,t),this.setupTabStops(e)}setupTabStops(e){this._normal.setupTabStops(e),this._alt.setupTabStops(e)}},Yv=2,Gv=1,bh=class extends Re{constructor(e){super(),this.isUserScrolling=!1,this._onResize=this._register(new oe),this.onResize=this._onResize.event,this._onScroll=this._register(new oe),this.onScroll=this._onScroll.event,this.cols=Math.max(e.rawOptions.cols||0,Yv),this.rows=Math.max(e.rawOptions.rows||0,Gv),this.buffers=this._register(new Gk(e,this)),this._register(this.buffers.onBufferActivate(t=>{this._onScroll.fire(t.activeBuffer.ydisp)}))}get buffer(){return this.buffers.active}resize(e,t){let r=this.cols!==e,n=this.rows!==t;this.cols=e,this.rows=t,this.buffers.resize(e,t),this._onResize.fire({cols:e,rows:t,colsChanged:r,rowsChanged:n})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(e,t=!1){let r=this.buffer,n;n=this._cachedBlankLine,(!n||n.length!==this.cols||n.getFg(0)!==e.fg||n.getBg(0)!==e.bg)&&(n=r.getBlankLine(e,t),this._cachedBlankLine=n),n.isWrapped=t;let o=r.ybase+r.scrollTop,l=r.ybase+r.scrollBottom;if(r.scrollTop===0){let c=r.lines.isFull;l===r.lines.length-1?c?r.lines.recycle().copyFrom(n):r.lines.push(n.clone()):r.lines.splice(l+1,0,n.clone()),c?this.isUserScrolling&&(r.ydisp=Math.max(r.ydisp-1,0)):(r.ybase++,this.isUserScrolling||r.ydisp++)}else{let c=l-o+1;r.lines.shiftElements(o+1,c-1,-1),r.lines.set(l,n.clone())}this.isUserScrolling||(r.ydisp=r.ybase),this._onScroll.fire(r.ydisp)}scrollLines(e,t){let r=this.buffer;if(e<0){if(r.ydisp===0)return;this.isUserScrolling=!0}else e+r.ydisp>=r.ybase&&(this.isUserScrolling=!1);let n=r.ydisp;r.ydisp=Math.max(Math.min(r.ydisp+e,r.ybase),0),n!==r.ydisp&&(t||this._onScroll.fire(r.ydisp))}};bh=Xe([ce(0,Bt)],bh);var Ri={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnEraseInDisplay:!1,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},reflowCursorLine:!1,rescaleOverlappingGlyphs:!1,rightClickSelectsWord:Ja,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRuler:{}},Xk=["normal","bold","100","200","300","400","500","600","700","800","900"],Jk=class extends Re{constructor(e){super(),this._onOptionChange=this._register(new oe),this.onOptionChange=this._onOptionChange.event;let t={...Ri};for(let r in e)if(r in t)try{let n=e[r];t[r]=this._sanitizeAndValidateOption(r,n)}catch(n){console.error(n)}this.rawOptions=t,this.options={...t},this._setupOptions(),this._register(Ue(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(e,t){return this.onOptionChange(r=>{r===e&&t(this.rawOptions[e])})}onMultipleOptionChange(e,t){return this.onOptionChange(r=>{e.indexOf(r)!==-1&&t()})}_setupOptions(){let e=r=>{if(!(r in Ri))throw new Error(`No option with key "${r}"`);return this.rawOptions[r]},t=(r,n)=>{if(!(r in Ri))throw new Error(`No option with key "${r}"`);n=this._sanitizeAndValidateOption(r,n),this.rawOptions[r]!==n&&(this.rawOptions[r]=n,this._onOptionChange.fire(r))};for(let r in this.rawOptions){let n={get:e.bind(this,r),set:t.bind(this,r)};Object.defineProperty(this.options,r,n)}}_sanitizeAndValidateOption(e,t){switch(e){case"cursorStyle":if(t||(t=Ri[e]),!Zk(t))throw new Error(`"${t}" is not a valid value for ${e}`);break;case"wordSeparator":t||(t=Ri[e]);break;case"fontWeight":case"fontWeightBold":if(typeof t=="number"&&1<=t&&t<=1e3)break;t=Xk.includes(t)?t:Ri[e];break;case"cursorWidth":t=Math.floor(t);case"lineHeight":case"tabStopWidth":if(t<1)throw new Error(`${e} cannot be less than 1, value: ${t}`);break;case"minimumContrastRatio":t=Math.max(1,Math.min(21,Math.round(t*10)/10));break;case"scrollback":if(t=Math.min(t,4294967295),t<0)throw new Error(`${e} cannot be less than 0, value: ${t}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(t<=0)throw new Error(`${e} cannot be less than or equal to 0, value: ${t}`);break;case"rows":case"cols":if(!t&&t!==0)throw new Error(`${e} must be numeric, value: ${t}`);break;case"windowsPty":t=t??{};break}return t}};function Zk(e){return e==="block"||e==="underline"||e==="bar"}function Wn(e,t=5){if(typeof e!="object")return e;let r=Array.isArray(e)?[]:{};for(let n in e)r[n]=t<=1?e[n]:e[n]&&Wn(e[n],t-1);return r}var Rg=Object.freeze({insertMode:!1}),Lg=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,cursorBlink:void 0,cursorStyle:void 0,origin:!1,reverseWraparound:!1,sendFocus:!1,synchronizedOutput:!1,wraparound:!0}),Ch=class extends Re{constructor(e,t,r){super(),this._bufferService=e,this._logService=t,this._optionsService=r,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this._register(new oe),this.onData=this._onData.event,this._onUserInput=this._register(new oe),this.onUserInput=this._onUserInput.event,this._onBinary=this._register(new oe),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this._register(new oe),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=Wn(Rg),this.decPrivateModes=Wn(Lg)}reset(){this.modes=Wn(Rg),this.decPrivateModes=Wn(Lg)}triggerDataEvent(e,t=!1){if(this._optionsService.rawOptions.disableStdin)return;let r=this._bufferService.buffer;t&&this._optionsService.rawOptions.scrollOnUserInput&&r.ybase!==r.ydisp&&this._onRequestScrollToBottom.fire(),t&&this._onUserInput.fire(),this._logService.debug(`sending data "${e}"`),this._logService.trace("sending data (codes)",()=>e.split("").map(n=>n.charCodeAt(0))),this._onData.fire(e)}triggerBinaryEvent(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${e}"`),this._logService.trace("sending binary (codes)",()=>e.split("").map(t=>t.charCodeAt(0))),this._onBinary.fire(e))}};Ch=Xe([ce(0,Tt),ce(1,gv),ce(2,Bt)],Ch);var jg={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:e=>e.button===4||e.action!==1?!1:(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)},VT200:{events:19,restrict:e=>e.action!==32},DRAG:{events:23,restrict:e=>!(e.action===32&&e.button===3)},ANY:{events:31,restrict:e=>!0}};function Ru(e,t){let r=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return e.button===4?(r|=64,r|=e.action):(r|=e.button&3,e.button&4&&(r|=64),e.button&8&&(r|=128),e.action===32?r|=32:e.action===0&&!t&&(r|=3)),r}var Lu=String.fromCharCode,Dg={DEFAULT:e=>{let t=[Ru(e,!1)+32,e.col+32,e.row+32];return t[0]>255||t[1]>255||t[2]>255?"":`\x1B[M${Lu(t[0])}${Lu(t[1])}${Lu(t[2])}`},SGR:e=>{let t=e.action===0&&e.button!==4?"m":"M";return`\x1B[<${Ru(e,!0)};${e.col};${e.row}${t}`},SGR_PIXELS:e=>{let t=e.action===0&&e.button!==4?"m":"M";return`\x1B[<${Ru(e,!0)};${e.x};${e.y}${t}`}},kh=class extends Re{constructor(e,t,r){super(),this._bufferService=e,this._coreService=t,this._optionsService=r,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._wheelPartialScroll=0,this._onProtocolChange=this._register(new oe),this.onProtocolChange=this._onProtocolChange.event;for(let n of Object.keys(jg))this.addProtocol(n,jg[n]);for(let n of Object.keys(Dg))this.addEncoding(n,Dg[n]);this.reset()}addProtocol(e,t){this._protocols[e]=t}addEncoding(e,t){this._encodings[e]=t}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(e){if(!this._protocols[e])throw new Error(`unknown protocol "${e}"`);this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(e){if(!this._encodings[e])throw new Error(`unknown encoding "${e}"`);this._activeEncoding=e}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null,this._wheelPartialScroll=0}consumeWheelEvent(e,t,r){if(e.deltaY===0||e.shiftKey||t===void 0||r===void 0)return 0;let n=t/r,o=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(o/=n+0,Math.abs(e.deltaY)<50&&(o*=.3),this._wheelPartialScroll+=o,o=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._bufferService.rows),o}_applyScrollModifier(e,t){return t.altKey||t.ctrlKey||t.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity}triggerMouseEvent(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows||e.button===4&&e.action===32||e.button===3&&e.action!==32||e.button!==4&&(e.action===2||e.action===3)||(e.col++,e.row++,e.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,e,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(e))return!1;let t=this._encodings[this._activeEncoding](e);return t&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=e,!0}explainEvents(e){return{down:!!(e&1),up:!!(e&2),drag:!!(e&4),move:!!(e&8),wheel:!!(e&16)}}_equalEvents(e,t,r){if(r){if(e.x!==t.x||e.y!==t.y)return!1}else if(e.col!==t.col||e.row!==t.row)return!1;return!(e.button!==t.button||e.action!==t.action||e.ctrl!==t.ctrl||e.alt!==t.alt||e.shift!==t.shift)}};kh=Xe([ce(0,Tt),ce(1,ti),ce(2,Bt)],kh);var ju=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],eE=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],lt;function tE(e,t){let r=0,n=t.length-1,o;if(e<t[0][0]||e>t[n][1])return!1;for(;n>=r;)if(o=r+n>>1,e>t[o][1])r=o+1;else if(e<t[o][0])n=o-1;else return!0;return!1}var rE=class{constructor(){if(this.version="6",!lt){lt=new Uint8Array(65536),lt.fill(1),lt[0]=0,lt.fill(0,1,32),lt.fill(0,127,160),lt.fill(2,4352,4448),lt[9001]=2,lt[9002]=2,lt.fill(2,11904,42192),lt[12351]=1,lt.fill(2,44032,55204),lt.fill(2,63744,64256),lt.fill(2,65040,65050),lt.fill(2,65072,65136),lt.fill(2,65280,65377),lt.fill(2,65504,65511);for(let e=0;e<ju.length;++e)lt.fill(0,ju[e][0],ju[e][1]+1)}}wcwidth(e){return e<32?0:e<127?1:e<65536?lt[e]:tE(e,eE)?0:e>=131072&&e<=196605||e>=196608&&e<=262141?2:1}charProperties(e,t){let r=this.wcwidth(e),n=r===0&&t!==0;if(n){let o=Ws.extractWidth(t);o===0?n=!1:o>r&&(r=o)}return Ws.createPropertyValue(0,r,n)}},Ws=class za{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new oe,this.onChange=this._onChange.event;let t=new rE;this.register(t),this._active=t.version,this._activeProvider=t}static extractShouldJoin(t){return(t&1)!==0}static extractWidth(t){return t>>1&3}static extractCharKind(t){return t>>3}static createPropertyValue(t,r,n=!1){return(t&16777215)<<3|(r&3)<<1|(n?1:0)}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(t){if(!this._providers[t])throw new Error(`unknown Unicode version "${t}"`);this._active=t,this._activeProvider=this._providers[t],this._onChange.fire(t)}register(t){this._providers[t.version]=t}wcwidth(t){return this._activeProvider.wcwidth(t)}getStringCellWidth(t){let r=0,n=0,o=t.length;for(let l=0;l<o;++l){let c=t.charCodeAt(l);if(55296<=c&&c<=56319){if(++l>=o)return r+this.wcwidth(c);let d=t.charCodeAt(l);56320<=d&&d<=57343?c=(c-55296)*1024+d-56320+65536:r+=this.wcwidth(d)}let h=this.charProperties(c,n),m=za.extractWidth(h);za.extractShouldJoin(h)&&(m-=za.extractWidth(n)),r+=m,n=h}return r}charProperties(t,r){return this._activeProvider.charProperties(t,r)}},sE=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(e){this.glevel=e,this.charset=this._charsets[e]}setgCharset(e,t){this._charsets[e]=t,this.glevel===e&&(this.charset=t)}};function Mg(e){let t=e.buffer.lines.get(e.buffer.ybase+e.buffer.y-1)?.get(e.cols-1),r=e.buffer.lines.get(e.buffer.ybase+e.buffer.y);r&&t&&(r.isWrapped=t[3]!==0&&t[3]!==32)}var Bn=2147483647,iE=256,Xv=class Eh{constructor(t=32,r=32){if(this.maxLength=t,this.maxSubParamsLength=r,r>iE)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(t),this.length=0,this._subParams=new Int32Array(r),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(t),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(t){let r=new Eh;if(!t.length)return r;for(let n=Array.isArray(t[0])?1:0;n<t.length;++n){let o=t[n];if(Array.isArray(o))for(let l=0;l<o.length;++l)r.addSubParam(o[l]);else r.addParam(o)}return r}clone(){let t=new Eh(this.maxLength,this.maxSubParamsLength);return t.params.set(this.params),t.length=this.length,t._subParams.set(this._subParams),t._subParamsLength=this._subParamsLength,t._subParamsIdx.set(this._subParamsIdx),t._rejectDigits=this._rejectDigits,t._rejectSubDigits=this._rejectSubDigits,t._digitIsSub=this._digitIsSub,t}toArray(){let t=[];for(let r=0;r<this.length;++r){t.push(this.params[r]);let n=this._subParamsIdx[r]>>8,o=this._subParamsIdx[r]&255;o-n>0&&t.push(Array.prototype.slice.call(this._subParams,n,o))}return t}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(t){if(this._digitIsSub=!1,this.length>=this.maxLength){this._rejectDigits=!0;return}if(t<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=t>Bn?Bn:t}addSubParam(t){if(this._digitIsSub=!0,!!this.length){if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength){this._rejectSubDigits=!0;return}if(t<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=t>Bn?Bn:t,this._subParamsIdx[this.length-1]++}}hasSubParams(t){return(this._subParamsIdx[t]&255)-(this._subParamsIdx[t]>>8)>0}getSubParams(t){let r=this._subParamsIdx[t]>>8,n=this._subParamsIdx[t]&255;return n-r>0?this._subParams.subarray(r,n):null}getSubParamsAll(){let t={};for(let r=0;r<this.length;++r){let n=this._subParamsIdx[r]>>8,o=this._subParamsIdx[r]&255;o-n>0&&(t[r]=this._subParams.slice(n,o))}return t}addDigit(t){let r;if(this._rejectDigits||!(r=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let n=this._digitIsSub?this._subParams:this.params,o=n[r-1];n[r-1]=~o?Math.min(o*10+t,Bn):t}},In=[],nE=class{constructor(){this._state=0,this._active=In,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(e,t){this._handlers[e]===void 0&&(this._handlers[e]=[]);let r=this._handlers[e];return r.push(t),{dispose:()=>{let n=r.indexOf(t);n!==-1&&r.splice(n,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=In}reset(){if(this._state===2)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].end(!1);this._stack.paused=!1,this._active=In,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||In,!this._active.length)this._handlerFb(this._id,"START");else for(let e=this._active.length-1;e>=0;e--)this._active[e].start()}_put(e,t,r){if(!this._active.length)this._handlerFb(this._id,"PUT",cl(e,t,r));else for(let n=this._active.length-1;n>=0;n--)this._active[n].put(e,t,r)}start(){this.reset(),this._state=1}put(e,t,r){if(this._state!==3){if(this._state===1)for(;t<r;){let n=e[t++];if(n===59){this._state=2,this._start();break}if(n<48||57<n){this._state=3;return}this._id===-1&&(this._id=0),this._id=this._id*10+n-48}this._state===2&&r-t>0&&this._put(e,t,r)}}end(e,t=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),!this._active.length)this._handlerFb(this._id,"END",e);else{let r=!1,n=this._active.length-1,o=!1;if(this._stack.paused&&(n=this._stack.loopPosition-1,r=t,o=this._stack.fallThrough,this._stack.paused=!1),!o&&r===!1){for(;n>=0&&(r=this._active[n].end(e),r!==!0);n--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!1,r;n--}for(;n>=0;n--)if(r=this._active[n].end(!1),r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!0,r}this._active=In,this._id=-1,this._state=0}}},Yt=class{constructor(e){this._handler=e,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(e,t,r){this._hitLimit||(this._data+=cl(e,t,r),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}end(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data),t instanceof Promise))return t.then(r=>(this._data="",this._hitLimit=!1,r));return this._data="",this._hitLimit=!1,t}},An=[],oE=class{constructor(){this._handlers=Object.create(null),this._active=An,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=An}registerHandler(e,t){this._handlers[e]===void 0&&(this._handlers[e]=[]);let r=this._handlers[e];return r.push(t),{dispose:()=>{let n=r.indexOf(t);n!==-1&&r.splice(n,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}reset(){if(this._active.length)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].unhook(!1);this._stack.paused=!1,this._active=An,this._ident=0}hook(e,t){if(this.reset(),this._ident=e,this._active=this._handlers[e]||An,!this._active.length)this._handlerFb(this._ident,"HOOK",t);else for(let r=this._active.length-1;r>=0;r--)this._active[r].hook(t)}put(e,t,r){if(!this._active.length)this._handlerFb(this._ident,"PUT",cl(e,t,r));else for(let n=this._active.length-1;n>=0;n--)this._active[n].put(e,t,r)}unhook(e,t=!0){if(!this._active.length)this._handlerFb(this._ident,"UNHOOK",e);else{let r=!1,n=this._active.length-1,o=!1;if(this._stack.paused&&(n=this._stack.loopPosition-1,r=t,o=this._stack.fallThrough,this._stack.paused=!1),!o&&r===!1){for(;n>=0&&(r=this._active[n].unhook(e),r!==!0);n--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!1,r;n--}for(;n>=0;n--)if(r=this._active[n].unhook(!1),r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!0,r}this._active=An,this._ident=0}},Un=new Xv;Un.addParam(0);var Og=class{constructor(e){this._handler=e,this._data="",this._params=Un,this._hitLimit=!1}hook(e){this._params=e.length>1||e.params[0]?e.clone():Un,this._data="",this._hitLimit=!1}put(e,t,r){this._hitLimit||(this._data+=cl(e,t,r),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}unhook(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data,this._params),t instanceof Promise))return t.then(r=>(this._params=Un,this._data="",this._hitLimit=!1,r));return this._params=Un,this._data="",this._hitLimit=!1,t}},aE=class{constructor(e){this.table=new Uint8Array(e)}setDefault(e,t){this.table.fill(e<<4|t)}add(e,t,r,n){this.table[t<<8|e]=r<<4|n}addMany(e,t,r,n){for(let o=0;o<e.length;o++)this.table[t<<8|e[o]]=r<<4|n}},ur=160,lE=(function(){let e=new aE(4095),t=Array.apply(null,Array(256)).map((h,m)=>m),r=(h,m)=>t.slice(h,m),n=r(32,127),o=r(0,24);o.push(25),o.push.apply(o,r(28,32));let l=r(0,14),c;e.setDefault(1,0),e.addMany(n,0,2,0);for(c in l)e.addMany([24,26,153,154],c,3,0),e.addMany(r(128,144),c,3,0),e.addMany(r(144,152),c,3,0),e.add(156,c,0,0),e.add(27,c,11,1),e.add(157,c,4,8),e.addMany([152,158,159],c,0,7),e.add(155,c,11,3),e.add(144,c,11,9);return e.addMany(o,0,3,0),e.addMany(o,1,3,1),e.add(127,1,0,1),e.addMany(o,8,0,8),e.addMany(o,3,3,3),e.add(127,3,0,3),e.addMany(o,4,3,4),e.add(127,4,0,4),e.addMany(o,6,3,6),e.addMany(o,5,3,5),e.add(127,5,0,5),e.addMany(o,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(n,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(r(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(n,7,0,7),e.addMany(o,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(r(64,127),3,7,0),e.addMany(r(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(r(48,60),4,8,4),e.addMany(r(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(r(32,64),6,0,6),e.add(127,6,0,6),e.addMany(r(64,127),6,0,0),e.addMany(r(32,48),3,9,5),e.addMany(r(32,48),5,9,5),e.addMany(r(48,64),5,0,6),e.addMany(r(64,127),5,7,0),e.addMany(r(32,48),4,9,5),e.addMany(r(32,48),1,9,2),e.addMany(r(32,48),2,9,2),e.addMany(r(48,127),2,10,0),e.addMany(r(48,80),1,10,0),e.addMany(r(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(r(96,127),1,10,0),e.add(80,1,11,9),e.addMany(o,9,0,9),e.add(127,9,0,9),e.addMany(r(28,32),9,0,9),e.addMany(r(32,48),9,9,12),e.addMany(r(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(o,11,0,11),e.addMany(r(32,128),11,0,11),e.addMany(r(28,32),11,0,11),e.addMany(o,10,0,10),e.add(127,10,0,10),e.addMany(r(28,32),10,0,10),e.addMany(r(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(r(32,48),10,9,12),e.addMany(o,12,0,12),e.add(127,12,0,12),e.addMany(r(28,32),12,0,12),e.addMany(r(32,48),12,9,12),e.addMany(r(48,64),12,0,11),e.addMany(r(64,127),12,12,13),e.addMany(r(64,127),10,12,13),e.addMany(r(64,127),9,12,13),e.addMany(o,13,13,13),e.addMany(n,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(ur,0,2,0),e.add(ur,8,5,8),e.add(ur,6,0,6),e.add(ur,11,0,11),e.add(ur,13,13,13),e})(),cE=class extends Re{constructor(e=lE){super(),this._transitions=e,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new Xv,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(t,r,n)=>{},this._executeHandlerFb=t=>{},this._csiHandlerFb=(t,r)=>{},this._escHandlerFb=t=>{},this._errorHandlerFb=t=>t,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this._register(Ue(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this._register(new nE),this._dcsParser=this._register(new oE),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(e,t=[64,126]){let r=0;if(e.prefix){if(e.prefix.length>1)throw new Error("only one byte as prefix supported");if(r=e.prefix.charCodeAt(0),r&&60>r||r>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(e.intermediates){if(e.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let o=0;o<e.intermediates.length;++o){let l=e.intermediates.charCodeAt(o);if(32>l||l>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");r<<=8,r|=l}}if(e.final.length!==1)throw new Error("final must be a single byte");let n=e.final.charCodeAt(0);if(t[0]>n||n>t[1])throw new Error(`final must be in range ${t[0]} .. ${t[1]}`);return r<<=8,r|=n,r}identToString(e){let t=[];for(;e;)t.push(String.fromCharCode(e&255)),e>>=8;return t.reverse().join("")}setPrintHandler(e){this._printHandler=e}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(e,t){let r=this._identifier(e,[48,126]);this._escHandlers[r]===void 0&&(this._escHandlers[r]=[]);let n=this._escHandlers[r];return n.push(t),{dispose:()=>{let o=n.indexOf(t);o!==-1&&n.splice(o,1)}}}clearEscHandler(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]}setEscHandlerFallback(e){this._escHandlerFb=e}setExecuteHandler(e,t){this._executeHandlers[e.charCodeAt(0)]=t}clearExecuteHandler(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]}setExecuteHandlerFallback(e){this._executeHandlerFb=e}registerCsiHandler(e,t){let r=this._identifier(e);this._csiHandlers[r]===void 0&&(this._csiHandlers[r]=[]);let n=this._csiHandlers[r];return n.push(t),{dispose:()=>{let o=n.indexOf(t);o!==-1&&n.splice(o,1)}}}clearCsiHandler(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]}setCsiHandlerFallback(e){this._csiHandlerFb=e}registerDcsHandler(e,t){return this._dcsParser.registerHandler(this._identifier(e),t)}clearDcsHandler(e){this._dcsParser.clearHandler(this._identifier(e))}setDcsHandlerFallback(e){this._dcsParser.setHandlerFallback(e)}registerOscHandler(e,t){return this._oscParser.registerHandler(e,t)}clearOscHandler(e){this._oscParser.clearHandler(e)}setOscHandlerFallback(e){this._oscParser.setHandlerFallback(e)}setErrorHandler(e){this._errorHandler=e}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(e,t,r,n,o){this._parseStack.state=e,this._parseStack.handlers=t,this._parseStack.handlerPos=r,this._parseStack.transition=n,this._parseStack.chunkPos=o}parse(e,t,r){let n=0,o=0,l=0,c;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,l=this._parseStack.chunkPos+1;else{if(r===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let h=this._parseStack.handlers,m=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(r===!1&&m>-1){for(;m>=0&&(c=h[m](this._params),c!==!0);m--)if(c instanceof Promise)return this._parseStack.handlerPos=m,c}this._parseStack.handlers=[];break;case 4:if(r===!1&&m>-1){for(;m>=0&&(c=h[m](),c!==!0);m--)if(c instanceof Promise)return this._parseStack.handlerPos=m,c}this._parseStack.handlers=[];break;case 6:if(n=e[this._parseStack.chunkPos],c=this._dcsParser.unhook(n!==24&&n!==26,r),c)return c;n===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(n=e[this._parseStack.chunkPos],c=this._oscParser.end(n!==24&&n!==26,r),c)return c;n===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break}this._parseStack.state=0,l=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=this._parseStack.transition&15}for(let h=l;h<t;++h){switch(n=e[h],o=this._transitions.table[this.currentState<<8|(n<160?n:ur)],o>>4){case 2:for(let x=h+1;;++x){if(x>=t||(n=e[x])<32||n>126&&n<ur){this._printHandler(e,h,x),h=x-1;break}if(++x>=t||(n=e[x])<32||n>126&&n<ur){this._printHandler(e,h,x),h=x-1;break}if(++x>=t||(n=e[x])<32||n>126&&n<ur){this._printHandler(e,h,x),h=x-1;break}if(++x>=t||(n=e[x])<32||n>126&&n<ur){this._printHandler(e,h,x),h=x-1;break}}break;case 3:this._executeHandlers[n]?this._executeHandlers[n]():this._executeHandlerFb(n),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:h,code:n,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let m=this._csiHandlers[this._collect<<8|n],d=m?m.length-1:-1;for(;d>=0&&(c=m[d](this._params),c!==!0);d--)if(c instanceof Promise)return this._preserveStack(3,m,d,o,h),c;d<0&&this._csiHandlerFb(this._collect<<8|n,this._params),this.precedingJoinState=0;break;case 8:do switch(n){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(n-48)}while(++h<t&&(n=e[h])>47&&n<60);h--;break;case 9:this._collect<<=8,this._collect|=n;break;case 10:let v=this._escHandlers[this._collect<<8|n],_=v?v.length-1:-1;for(;_>=0&&(c=v[_](),c!==!0);_--)if(c instanceof Promise)return this._preserveStack(4,v,_,o,h),c;_<0&&this._escHandlerFb(this._collect<<8|n),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|n,this._params);break;case 13:for(let x=h+1;;++x)if(x>=t||(n=e[x])===24||n===26||n===27||n>127&&n<ur){this._dcsParser.put(e,h,x),h=x-1;break}break;case 14:if(c=this._dcsParser.unhook(n!==24&&n!==26),c)return this._preserveStack(6,[],0,o,h),c;n===27&&(o|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let x=h+1;;x++)if(x>=t||(n=e[x])<32||n>127&&n<ur){this._oscParser.put(e,h,x),h=x-1;break}break;case 6:if(c=this._oscParser.end(n!==24&&n!==26),c)return this._preserveStack(5,[],0,o,h),c;n===27&&(o|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break}this.currentState=o&15}}},uE=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,hE=/^[\da-f]+$/;function Tg(e){if(!e)return;let t=e.toLowerCase();if(t.indexOf("rgb:")===0){t=t.slice(4);let r=uE.exec(t);if(r){let n=r[1]?15:r[4]?255:r[7]?4095:65535;return[Math.round(parseInt(r[1]||r[4]||r[7]||r[10],16)/n*255),Math.round(parseInt(r[2]||r[5]||r[8]||r[11],16)/n*255),Math.round(parseInt(r[3]||r[6]||r[9]||r[12],16)/n*255)]}}else if(t.indexOf("#")===0&&(t=t.slice(1),hE.exec(t)&&[3,6,9,12].includes(t.length))){let r=t.length/3,n=[0,0,0];for(let o=0;o<3;++o){let l=parseInt(t.slice(r*o,r*o+r),16);n[o]=r===1?l<<4:r===2?l:r===3?l>>4:l>>8}return n}}function Du(e,t){let r=e.toString(16),n=r.length<2?"0"+r:r;switch(t){case 4:return r[0];case 8:return n;case 12:return(n+n).slice(0,3);default:return n+n}}function dE(e,t=16){let[r,n,o]=e;return`rgb:${Du(r,t)}/${Du(n,t)}/${Du(o,t)}`}var fE={"(":0,")":1,"*":2,"+":3,"-":1,".":2},ys=131072,Bg=10;function Ig(e,t){if(e>24)return t.setWinLines||!1;switch(e){case 1:return!!t.restoreWin;case 2:return!!t.minimizeWin;case 3:return!!t.setWinPosition;case 4:return!!t.setWinSizePixels;case 5:return!!t.raiseWin;case 6:return!!t.lowerWin;case 7:return!!t.refreshWin;case 8:return!!t.setWinSizeChars;case 9:return!!t.maximizeWin;case 10:return!!t.fullscreenWin;case 11:return!!t.getWinState;case 13:return!!t.getWinPosition;case 14:return!!t.getWinSizePixels;case 15:return!!t.getScreenSizePixels;case 16:return!!t.getCellSizePixels;case 18:return!!t.getWinSizeChars;case 19:return!!t.getScreenSizeChars;case 20:return!!t.getIconTitle;case 21:return!!t.getWinTitle;case 22:return!!t.pushTitle;case 23:return!!t.popTitle;case 24:return!!t.setWinLines}return!1}var Ag=5e3,Fg=0,pE=class extends Re{constructor(e,t,r,n,o,l,c,h,m=new cE){super(),this._bufferService=e,this._charsetService=t,this._coreService=r,this._logService=n,this._optionsService=o,this._oscLinkService=l,this._coreMouseService=c,this._unicodeService=h,this._parser=m,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new MC,this._utf8Decoder=new OC,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=st.clone(),this._eraseAttrDataInternal=st.clone(),this._onRequestBell=this._register(new oe),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this._register(new oe),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this._register(new oe),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this._register(new oe),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this._register(new oe),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this._register(new oe),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this._register(new oe),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this._register(new oe),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this._register(new oe),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this._register(new oe),this.onLineFeed=this._onLineFeed.event,this._onScroll=this._register(new oe),this.onScroll=this._onScroll.event,this._onTitleChange=this._register(new oe),this.onTitleChange=this._onTitleChange.event,this._onColor=this._register(new oe),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this._register(this._parser),this._dirtyRowTracker=new Nh(this._bufferService),this._activeBuffer=this._bufferService.buffer,this._register(this._bufferService.buffers.onBufferActivate(d=>this._activeBuffer=d.activeBuffer)),this._parser.setCsiHandlerFallback((d,v)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(d),params:v.toArray()})}),this._parser.setEscHandlerFallback(d=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(d)})}),this._parser.setExecuteHandlerFallback(d=>{this._logService.debug("Unknown EXECUTE code: ",{code:d})}),this._parser.setOscHandlerFallback((d,v,_)=>{this._logService.debug("Unknown OSC code: ",{identifier:d,action:v,data:_})}),this._parser.setDcsHandlerFallback((d,v,_)=>{v==="HOOK"&&(_=_.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(d),action:v,payload:_})}),this._parser.setPrintHandler((d,v,_)=>this.print(d,v,_)),this._parser.registerCsiHandler({final:"@"},d=>this.insertChars(d)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},d=>this.scrollLeft(d)),this._parser.registerCsiHandler({final:"A"},d=>this.cursorUp(d)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},d=>this.scrollRight(d)),this._parser.registerCsiHandler({final:"B"},d=>this.cursorDown(d)),this._parser.registerCsiHandler({final:"C"},d=>this.cursorForward(d)),this._parser.registerCsiHandler({final:"D"},d=>this.cursorBackward(d)),this._parser.registerCsiHandler({final:"E"},d=>this.cursorNextLine(d)),this._parser.registerCsiHandler({final:"F"},d=>this.cursorPrecedingLine(d)),this._parser.registerCsiHandler({final:"G"},d=>this.cursorCharAbsolute(d)),this._parser.registerCsiHandler({final:"H"},d=>this.cursorPosition(d)),this._parser.registerCsiHandler({final:"I"},d=>this.cursorForwardTab(d)),this._parser.registerCsiHandler({final:"J"},d=>this.eraseInDisplay(d,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},d=>this.eraseInDisplay(d,!0)),this._parser.registerCsiHandler({final:"K"},d=>this.eraseInLine(d,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},d=>this.eraseInLine(d,!0)),this._parser.registerCsiHandler({final:"L"},d=>this.insertLines(d)),this._parser.registerCsiHandler({final:"M"},d=>this.deleteLines(d)),this._parser.registerCsiHandler({final:"P"},d=>this.deleteChars(d)),this._parser.registerCsiHandler({final:"S"},d=>this.scrollUp(d)),this._parser.registerCsiHandler({final:"T"},d=>this.scrollDown(d)),this._parser.registerCsiHandler({final:"X"},d=>this.eraseChars(d)),this._parser.registerCsiHandler({final:"Z"},d=>this.cursorBackwardTab(d)),this._parser.registerCsiHandler({final:"`"},d=>this.charPosAbsolute(d)),this._parser.registerCsiHandler({final:"a"},d=>this.hPositionRelative(d)),this._parser.registerCsiHandler({final:"b"},d=>this.repeatPrecedingCharacter(d)),this._parser.registerCsiHandler({final:"c"},d=>this.sendDeviceAttributesPrimary(d)),this._parser.registerCsiHandler({prefix:">",final:"c"},d=>this.sendDeviceAttributesSecondary(d)),this._parser.registerCsiHandler({final:"d"},d=>this.linePosAbsolute(d)),this._parser.registerCsiHandler({final:"e"},d=>this.vPositionRelative(d)),this._parser.registerCsiHandler({final:"f"},d=>this.hVPosition(d)),this._parser.registerCsiHandler({final:"g"},d=>this.tabClear(d)),this._parser.registerCsiHandler({final:"h"},d=>this.setMode(d)),this._parser.registerCsiHandler({prefix:"?",final:"h"},d=>this.setModePrivate(d)),this._parser.registerCsiHandler({final:"l"},d=>this.resetMode(d)),this._parser.registerCsiHandler({prefix:"?",final:"l"},d=>this.resetModePrivate(d)),this._parser.registerCsiHandler({final:"m"},d=>this.charAttributes(d)),this._parser.registerCsiHandler({final:"n"},d=>this.deviceStatus(d)),this._parser.registerCsiHandler({prefix:"?",final:"n"},d=>this.deviceStatusPrivate(d)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},d=>this.softReset(d)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},d=>this.setCursorStyle(d)),this._parser.registerCsiHandler({final:"r"},d=>this.setScrollRegion(d)),this._parser.registerCsiHandler({final:"s"},d=>this.saveCursor(d)),this._parser.registerCsiHandler({final:"t"},d=>this.windowOptions(d)),this._parser.registerCsiHandler({final:"u"},d=>this.restoreCursor(d)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},d=>this.insertColumns(d)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},d=>this.deleteColumns(d)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},d=>this.selectProtected(d)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},d=>this.requestMode(d,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},d=>this.requestMode(d,!1)),this._parser.setExecuteHandler(J.BEL,()=>this.bell()),this._parser.setExecuteHandler(J.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(J.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(J.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(J.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(J.BS,()=>this.backspace()),this._parser.setExecuteHandler(J.HT,()=>this.tab()),this._parser.setExecuteHandler(J.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(J.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(Aa.IND,()=>this.index()),this._parser.setExecuteHandler(Aa.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(Aa.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new Yt(d=>(this.setTitle(d),this.setIconName(d),!0))),this._parser.registerOscHandler(1,new Yt(d=>this.setIconName(d))),this._parser.registerOscHandler(2,new Yt(d=>this.setTitle(d))),this._parser.registerOscHandler(4,new Yt(d=>this.setOrReportIndexedColor(d))),this._parser.registerOscHandler(8,new Yt(d=>this.setHyperlink(d))),this._parser.registerOscHandler(10,new Yt(d=>this.setOrReportFgColor(d))),this._parser.registerOscHandler(11,new Yt(d=>this.setOrReportBgColor(d))),this._parser.registerOscHandler(12,new Yt(d=>this.setOrReportCursorColor(d))),this._parser.registerOscHandler(104,new Yt(d=>this.restoreIndexedColor(d))),this._parser.registerOscHandler(110,new Yt(d=>this.restoreFgColor(d))),this._parser.registerOscHandler(111,new Yt(d=>this.restoreBgColor(d))),this._parser.registerOscHandler(112,new Yt(d=>this.restoreCursorColor(d))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let d in ut)this._parser.registerEscHandler({intermediates:"(",final:d},()=>this.selectCharset("("+d)),this._parser.registerEscHandler({intermediates:")",final:d},()=>this.selectCharset(")"+d)),this._parser.registerEscHandler({intermediates:"*",final:d},()=>this.selectCharset("*"+d)),this._parser.registerEscHandler({intermediates:"+",final:d},()=>this.selectCharset("+"+d)),this._parser.registerEscHandler({intermediates:"-",final:d},()=>this.selectCharset("-"+d)),this._parser.registerEscHandler({intermediates:".",final:d},()=>this.selectCharset("."+d)),this._parser.registerEscHandler({intermediates:"/",final:d},()=>this.selectCharset("/"+d));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(d=>(this._logService.error("Parsing error: ",d),d)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new Og((d,v)=>this.requestStatusString(d,v)))}getAttrData(){return this._curAttrData}_preserveStack(e,t,r,n){this._parseStack.paused=!0,this._parseStack.cursorStartX=e,this._parseStack.cursorStartY=t,this._parseStack.decodedLength=r,this._parseStack.position=n}_logSlowResolvingAsync(e){this._logService.logLevel<=3&&Promise.race([e,new Promise((t,r)=>setTimeout(()=>r("#SLOW_TIMEOUT"),Ag))]).catch(t=>{if(t!=="#SLOW_TIMEOUT")throw t;console.warn(`async parser handler taking longer than ${Ag} ms`)})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(e,t){let r,n=this._activeBuffer.x,o=this._activeBuffer.y,l=0,c=this._parseStack.paused;if(c){if(r=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,t))return this._logSlowResolvingAsync(r),r;n=this._parseStack.cursorStartX,o=this._parseStack.cursorStartY,this._parseStack.paused=!1,e.length>ys&&(l=this._parseStack.position+ys)}if(this._logService.logLevel<=1&&this._logService.debug(`parsing data ${typeof e=="string"?` "${e}"`:` "${Array.prototype.map.call(e,d=>String.fromCharCode(d)).join("")}"`}`),this._logService.logLevel===0&&this._logService.trace("parsing data (codes)",typeof e=="string"?e.split("").map(d=>d.charCodeAt(0)):e),this._parseBuffer.length<e.length&&this._parseBuffer.length<ys&&(this._parseBuffer=new Uint32Array(Math.min(e.length,ys))),c||this._dirtyRowTracker.clearRange(),e.length>ys)for(let d=l;d<e.length;d+=ys){let v=d+ys<e.length?d+ys:e.length,_=typeof e=="string"?this._stringDecoder.decode(e.substring(d,v),this._parseBuffer):this._utf8Decoder.decode(e.subarray(d,v),this._parseBuffer);if(r=this._parser.parse(this._parseBuffer,_))return this._preserveStack(n,o,_,d),this._logSlowResolvingAsync(r),r}else if(!c){let d=typeof e=="string"?this._stringDecoder.decode(e,this._parseBuffer):this._utf8Decoder.decode(e,this._parseBuffer);if(r=this._parser.parse(this._parseBuffer,d))return this._preserveStack(n,o,d,0),this._logSlowResolvingAsync(r),r}(this._activeBuffer.x!==n||this._activeBuffer.y!==o)&&this._onCursorMove.fire();let h=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),m=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);m<this._bufferService.rows&&this._onRequestRefreshRows.fire({start:Math.min(m,this._bufferService.rows-1),end:Math.min(h,this._bufferService.rows-1)})}print(e,t,r){let n,o,l=this._charsetService.charset,c=this._optionsService.rawOptions.screenReaderMode,h=this._bufferService.cols,m=this._coreService.decPrivateModes.wraparound,d=this._coreService.modes.insertMode,v=this._curAttrData,_=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&r-t>0&&_.getWidth(this._activeBuffer.x-1)===2&&_.setCellFromCodepoint(this._activeBuffer.x-1,0,1,v);let x=this._parser.precedingJoinState;for(let b=t;b<r;++b){if(n=e[b],n<127&&l){let M=l[String.fromCharCode(n)];M&&(n=M.charCodeAt(0))}let S=this._unicodeService.charProperties(n,x);o=Ws.extractWidth(S);let w=Ws.extractShouldJoin(S),E=w?Ws.extractWidth(x):0;if(x=S,c&&this._onA11yChar.fire(xs(n)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+o-E>h){if(m){let M=_,P=this._activeBuffer.x-E;for(this._activeBuffer.x=E,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),_=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),E>0&&_ instanceof Hn&&_.copyCellsFrom(M,P,0,E,!1);P<h;)M.setCellFromCodepoint(P++,0,1,v)}else if(this._activeBuffer.x=h-1,o===2)continue}if(w&&this._activeBuffer.x){let M=_.getWidth(this._activeBuffer.x-1)?1:2;_.addCodepointToCell(this._activeBuffer.x-M,n,o);for(let P=o-E;--P>=0;)_.setCellFromCodepoint(this._activeBuffer.x++,0,0,v);continue}if(d&&(_.insertCells(this._activeBuffer.x,o-E,this._activeBuffer.getNullCell(v)),_.getWidth(h-1)===2&&_.setCellFromCodepoint(h-1,0,1,v)),_.setCellFromCodepoint(this._activeBuffer.x++,n,o,v),o>0)for(;--o;)_.setCellFromCodepoint(this._activeBuffer.x++,0,0,v)}this._parser.precedingJoinState=x,this._activeBuffer.x<h&&r-t>0&&_.getWidth(this._activeBuffer.x)===0&&!_.hasContent(this._activeBuffer.x)&&_.setCellFromCodepoint(this._activeBuffer.x,0,1,v),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(e,t){return e.final==="t"&&!e.prefix&&!e.intermediates?this._parser.registerCsiHandler(e,r=>Ig(r.params[0],this._optionsService.rawOptions.windowOptions)?t(r):!0):this._parser.registerCsiHandler(e,t)}registerDcsHandler(e,t){return this._parser.registerDcsHandler(e,new Og(t))}registerEscHandler(e,t){return this._parser.registerEscHandler(e,t)}registerOscHandler(e,t){return this._parser.registerOscHandler(e,new Yt(t))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);e.hasWidth(this._activeBuffer.x)&&!e.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let e=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-e),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(e=this._bufferService.cols-1){this._activeBuffer.x=Math.min(e,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(e,t){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=e,this._activeBuffer.y=this._activeBuffer.scrollTop+t):(this._activeBuffer.x=e,this._activeBuffer.y=t),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(e,t){this._restrictCursor(),this._setCursor(this._activeBuffer.x+e,this._activeBuffer.y+t)}cursorUp(e){let t=this._activeBuffer.y-this._activeBuffer.scrollTop;return t>=0?this._moveCursor(0,-Math.min(t,e.params[0]||1)):this._moveCursor(0,-(e.params[0]||1)),!0}cursorDown(e){let t=this._activeBuffer.scrollBottom-this._activeBuffer.y;return t>=0?this._moveCursor(0,Math.min(t,e.params[0]||1)):this._moveCursor(0,e.params[0]||1),!0}cursorForward(e){return this._moveCursor(e.params[0]||1,0),!0}cursorBackward(e){return this._moveCursor(-(e.params[0]||1),0),!0}cursorNextLine(e){return this.cursorDown(e),this._activeBuffer.x=0,!0}cursorPrecedingLine(e){return this.cursorUp(e),this._activeBuffer.x=0,!0}cursorCharAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(e){return this._setCursor(e.length>=2?(e.params[1]||1)-1:0,(e.params[0]||1)-1),!0}charPosAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(e){return this._moveCursor(e.params[0]||1,0),!0}linePosAbsolute(e){return this._setCursor(this._activeBuffer.x,(e.params[0]||1)-1),!0}vPositionRelative(e){return this._moveCursor(0,e.params[0]||1),!0}hVPosition(e){return this.cursorPosition(e),!0}tabClear(e){let t=e.params[0];return t===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:t===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(e){let t=e.params[0];return t===1&&(this._curAttrData.bg|=536870912),(t===2||t===0)&&(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(e,t,r,n=!1,o=!1){let l=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);l.replaceCells(t,r,this._activeBuffer.getNullCell(this._eraseAttrData()),o),n&&(l.isWrapped=!1)}_resetBufferLine(e,t=!1){let r=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);r&&(r.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),t),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+e),r.isWrapped=!1)}eraseInDisplay(e,t=!1){this._restrictCursor(this._bufferService.cols);let r;switch(e.params[0]){case 0:for(r=this._activeBuffer.y,this._dirtyRowTracker.markDirty(r),this._eraseInBufferLine(r++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,t);r<this._bufferService.rows;r++)this._resetBufferLine(r,t);this._dirtyRowTracker.markDirty(r);break;case 1:for(r=this._activeBuffer.y,this._dirtyRowTracker.markDirty(r),this._eraseInBufferLine(r,0,this._activeBuffer.x+1,!0,t),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(r+1).isWrapped=!1);r--;)this._resetBufferLine(r,t);this._dirtyRowTracker.markDirty(0);break;case 2:if(this._optionsService.rawOptions.scrollOnEraseInDisplay){for(r=this._bufferService.rows,this._dirtyRowTracker.markRangeDirty(0,r-1);r--&&!this._activeBuffer.lines.get(this._activeBuffer.ybase+r)?.getTrimmedLength(););for(;r>=0;r--)this._bufferService.scroll(this._eraseAttrData())}else{for(r=this._bufferService.rows,this._dirtyRowTracker.markDirty(r-1);r--;)this._resetBufferLine(r,t);this._dirtyRowTracker.markDirty(0)}break;case 3:let n=this._activeBuffer.lines.length-this._bufferService.rows;n>0&&(this._activeBuffer.lines.trimStart(n),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-n,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-n,0),this._onScroll.fire(0));break}return!0}eraseInLine(e,t=!1){switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,t);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,t);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,t);break}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let r=this._activeBuffer.ybase+this._activeBuffer.y,n=this._bufferService.rows-1-this._activeBuffer.scrollBottom,o=this._bufferService.rows-1+this._activeBuffer.ybase-n+1;for(;t--;)this._activeBuffer.lines.splice(o-1,1),this._activeBuffer.lines.splice(r,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let r=this._activeBuffer.ybase+this._activeBuffer.y,n;for(n=this._bufferService.rows-1-this._activeBuffer.scrollBottom,n=this._bufferService.rows-1+this._activeBuffer.ybase-n;t--;)this._activeBuffer.lines.splice(r,1),this._activeBuffer.lines.splice(n,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.insertCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.deleteCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(st));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);n.deleteCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData())),n.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);n.insertCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData())),n.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);n.insertCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData())),n.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);n.deleteCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData())),n.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(e.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(e){let t=this._parser.precedingJoinState;if(!t)return!0;let r=e.params[0]||1,n=Ws.extractWidth(t),o=this._activeBuffer.x-n,l=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(o),c=new Uint32Array(l.length*r),h=0;for(let d=0;d<l.length;){let v=l.codePointAt(d)||0;c[h++]=v,d+=v>65535?2:1}let m=h;for(let d=1;d<r;++d)c.copyWithin(m,0,h),m+=h;return this.print(c,0,m),!0}sendDeviceAttributesPrimary(e){return e.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(J.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(J.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(e){return e.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(J.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(J.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(e.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(J.ESC+"[>83;40003;0c")),!0}_is(e){return(this._optionsService.rawOptions.termName+"").indexOf(e)===0}setMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0;break}return!0}setModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,$s),this._charsetService.setgCharset(1,$s),this._charsetService.setgCharset(2,$s),this._charsetService.setgCharset(3,$s);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!0;break}return!0}resetMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1;break}return!0}resetModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),e.params[t]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!1,this._onRequestRefreshRows.fire(void 0);break}return!0}requestMode(e,t){let r;(w=>(w[w.NOT_RECOGNIZED=0]="NOT_RECOGNIZED",w[w.SET=1]="SET",w[w.RESET=2]="RESET",w[w.PERMANENTLY_SET=3]="PERMANENTLY_SET",w[w.PERMANENTLY_RESET=4]="PERMANENTLY_RESET"))(r||={});let n=this._coreService.decPrivateModes,{activeProtocol:o,activeEncoding:l}=this._coreMouseService,c=this._coreService,{buffers:h,cols:m}=this._bufferService,{active:d,alt:v}=h,_=this._optionsService.rawOptions,x=(w,E)=>(c.triggerDataEvent(`${J.ESC}[${t?"":"?"}${w};${E}$y`),!0),b=w=>w?1:2,S=e.params[0];return t?S===2?x(S,4):S===4?x(S,b(c.modes.insertMode)):S===12?x(S,3):S===20?x(S,b(_.convertEol)):x(S,0):S===1?x(S,b(n.applicationCursorKeys)):S===3?x(S,_.windowOptions.setWinLines?m===80?2:m===132?1:0:0):S===6?x(S,b(n.origin)):S===7?x(S,b(n.wraparound)):S===8?x(S,3):S===9?x(S,b(o==="X10")):S===12?x(S,b(_.cursorBlink)):S===25?x(S,b(!c.isCursorHidden)):S===45?x(S,b(n.reverseWraparound)):S===66?x(S,b(n.applicationKeypad)):S===67?x(S,4):S===1e3?x(S,b(o==="VT200")):S===1002?x(S,b(o==="DRAG")):S===1003?x(S,b(o==="ANY")):S===1004?x(S,b(n.sendFocus)):S===1005?x(S,4):S===1006?x(S,b(l==="SGR")):S===1015?x(S,4):S===1016?x(S,b(l==="SGR_PIXELS")):S===1048?x(S,1):S===47||S===1047||S===1049?x(S,b(d===v)):S===2004?x(S,b(n.bracketedPasteMode)):S===2026?x(S,b(n.synchronizedOutput)):x(S,0)}_updateAttrColor(e,t,r,n,o){return t===2?(e|=50331648,e&=-16777216,e|=oo.fromColorRGB([r,n,o])):t===5&&(e&=-50331904,e|=33554432|r&255),e}_extractColor(e,t,r){let n=[0,0,-1,0,0,0],o=0,l=0;do{if(n[l+o]=e.params[t+l],e.hasSubParams(t+l)){let c=e.getSubParams(t+l),h=0;do n[1]===5&&(o=1),n[l+h+1+o]=c[h];while(++h<c.length&&h+l+1+o<n.length);break}if(n[1]===5&&l+o>=2||n[1]===2&&l+o>=5)break;n[1]&&(o=1)}while(++l+t<e.length&&l+o<n.length);for(let c=2;c<n.length;++c)n[c]===-1&&(n[c]=0);switch(n[0]){case 38:r.fg=this._updateAttrColor(r.fg,n[1],n[3],n[4],n[5]);break;case 48:r.bg=this._updateAttrColor(r.bg,n[1],n[3],n[4],n[5]);break;case 58:r.extended=r.extended.clone(),r.extended.underlineColor=this._updateAttrColor(r.extended.underlineColor,n[1],n[3],n[4],n[5])}return l}_processUnderline(e,t){t.extended=t.extended.clone(),(!~e||e>5)&&(e=1),t.extended.underlineStyle=e,t.fg|=268435456,e===0&&(t.fg&=-268435457),t.updateExtended()}_processSGR0(e){e.fg=st.fg,e.bg=st.bg,e.extended=e.extended.clone(),e.extended.underlineStyle=0,e.extended.underlineColor&=-67108864,e.updateExtended()}charAttributes(e){if(e.length===1&&e.params[0]===0)return this._processSGR0(this._curAttrData),!0;let t=e.length,r,n=this._curAttrData;for(let o=0;o<t;o++)r=e.params[o],r>=30&&r<=37?(n.fg&=-50331904,n.fg|=16777216|r-30):r>=40&&r<=47?(n.bg&=-50331904,n.bg|=16777216|r-40):r>=90&&r<=97?(n.fg&=-50331904,n.fg|=16777216|r-90|8):r>=100&&r<=107?(n.bg&=-50331904,n.bg|=16777216|r-100|8):r===0?this._processSGR0(n):r===1?n.fg|=134217728:r===3?n.bg|=67108864:r===4?(n.fg|=268435456,this._processUnderline(e.hasSubParams(o)?e.getSubParams(o)[0]:1,n)):r===5?n.fg|=536870912:r===7?n.fg|=67108864:r===8?n.fg|=1073741824:r===9?n.fg|=2147483648:r===2?n.bg|=134217728:r===21?this._processUnderline(2,n):r===22?(n.fg&=-134217729,n.bg&=-134217729):r===23?n.bg&=-67108865:r===24?(n.fg&=-268435457,this._processUnderline(0,n)):r===25?n.fg&=-536870913:r===27?n.fg&=-67108865:r===28?n.fg&=-1073741825:r===29?n.fg&=2147483647:r===39?(n.fg&=-67108864,n.fg|=st.fg&16777215):r===49?(n.bg&=-67108864,n.bg|=st.bg&16777215):r===38||r===48||r===58?o+=this._extractColor(e,o,n):r===53?n.bg|=1073741824:r===55?n.bg&=-1073741825:r===59?(n.extended=n.extended.clone(),n.extended.underlineColor=-1,n.updateExtended()):r===100?(n.fg&=-67108864,n.fg|=st.fg&16777215,n.bg&=-67108864,n.bg|=st.bg&16777215):this._logService.debug("Unknown SGR attribute: %d.",r);return!0}deviceStatus(e){switch(e.params[0]){case 5:this._coreService.triggerDataEvent(`${J.ESC}[0n`);break;case 6:let t=this._activeBuffer.y+1,r=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${J.ESC}[${t};${r}R`);break}return!0}deviceStatusPrivate(e){switch(e.params[0]){case 6:let t=this._activeBuffer.y+1,r=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${J.ESC}[?${t};${r}R`);break}return!0}softReset(e){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=st.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(e){let t=e.length===0?1:e.params[0];if(t===0)this._coreService.decPrivateModes.cursorStyle=void 0,this._coreService.decPrivateModes.cursorBlink=void 0;else{switch(t){case 1:case 2:this._coreService.decPrivateModes.cursorStyle="block";break;case 3:case 4:this._coreService.decPrivateModes.cursorStyle="underline";break;case 5:case 6:this._coreService.decPrivateModes.cursorStyle="bar";break}let r=t%2===1;this._coreService.decPrivateModes.cursorBlink=r}return!0}setScrollRegion(e){let t=e.params[0]||1,r;return(e.length<2||(r=e.params[1])>this._bufferService.rows||r===0)&&(r=this._bufferService.rows),r>t&&(this._activeBuffer.scrollTop=t-1,this._activeBuffer.scrollBottom=r-1,this._setCursor(0,0)),!0}windowOptions(e){if(!Ig(e.params[0],this._optionsService.rawOptions.windowOptions))return!0;let t=e.length>1?e.params[1]:0;switch(e.params[0]){case 14:t!==2&&this._onRequestWindowsOptionsReport.fire(0);break;case 16:this._onRequestWindowsOptionsReport.fire(1);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${J.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:(t===0||t===2)&&(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>Bg&&this._windowTitleStack.shift()),(t===0||t===1)&&(this._iconNameStack.push(this._iconName),this._iconNameStack.length>Bg&&this._iconNameStack.shift());break;case 23:(t===0||t===2)&&this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),(t===0||t===1)&&this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop());break}return!0}saveCursor(e){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(e){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(e){return this._windowTitle=e,this._onTitleChange.fire(e),!0}setIconName(e){return this._iconName=e,!0}setOrReportIndexedColor(e){let t=[],r=e.split(";");for(;r.length>1;){let n=r.shift(),o=r.shift();if(/^\d+$/.exec(n)){let l=parseInt(n);if(zg(l))if(o==="?")t.push({type:0,index:l});else{let c=Tg(o);c&&t.push({type:1,index:l,color:c})}}}return t.length&&this._onColor.fire(t),!0}setHyperlink(e){let t=e.indexOf(";");if(t===-1)return!0;let r=e.slice(0,t).trim(),n=e.slice(t+1);return n?this._createHyperlink(r,n):r.trim()?!1:this._finishHyperlink()}_createHyperlink(e,t){this._getCurrentLinkId()&&this._finishHyperlink();let r=e.split(":"),n,o=r.findIndex(l=>l.startsWith("id="));return o!==-1&&(n=r[o].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:n,uri:t}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(e,t){let r=e.split(";");for(let n=0;n<r.length&&!(t>=this._specialColors.length);++n,++t)if(r[n]==="?")this._onColor.fire([{type:0,index:this._specialColors[t]}]);else{let o=Tg(r[n]);o&&this._onColor.fire([{type:1,index:this._specialColors[t],color:o}])}return!0}setOrReportFgColor(e){return this._setOrReportSpecialColor(e,0)}setOrReportBgColor(e){return this._setOrReportSpecialColor(e,1)}setOrReportCursorColor(e){return this._setOrReportSpecialColor(e,2)}restoreIndexedColor(e){if(!e)return this._onColor.fire([{type:2}]),!0;let t=[],r=e.split(";");for(let n=0;n<r.length;++n)if(/^\d+$/.exec(r[n])){let o=parseInt(r[n]);zg(o)&&t.push({type:2,index:o})}return t.length&&this._onColor.fire(t),!0}restoreFgColor(e){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(e){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(e){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,$s),!0}selectCharset(e){return e.length!==2?(this.selectDefaultCharset(),!0):(e[0]==="/"||this._charsetService.setgCharset(fE[e[0]],ut[e[1]]||$s),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let e=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,e,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=st.clone(),this._eraseAttrDataInternal=st.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=this._curAttrData.bg&67108863,this._eraseAttrDataInternal}setgLevel(e){return this._charsetService.setgLevel(e),!0}screenAlignmentPattern(){let e=new dr;e.content=1<<22|69,e.fg=this._curAttrData.fg,e.bg=this._curAttrData.bg,this._setCursor(0,0);for(let t=0;t<this._bufferService.rows;++t){let r=this._activeBuffer.ybase+this._activeBuffer.y+t,n=this._activeBuffer.lines.get(r);n&&(n.fill(e),n.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(e,t){let r=c=>(this._coreService.triggerDataEvent(`${J.ESC}${c}${J.ESC}\\`),!0),n=this._bufferService.buffer,o=this._optionsService.rawOptions;return r(e==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:e==='"p'?'P1$r61;1"p':e==="r"?`P1$r${n.scrollTop+1};${n.scrollBottom+1}r`:e==="m"?"P1$r0m":e===" q"?`P1$r${{block:2,underline:4,bar:6}[o.cursorStyle]-(o.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(e,t){this._dirtyRowTracker.markRangeDirty(e,t)}},Nh=class{constructor(e){this._bufferService=e,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(e){e<this.start?this.start=e:e>this.end&&(this.end=e)}markRangeDirty(e,t){e>t&&(Fg=e,e=t,t=Fg),e<this.start&&(this.start=e),t>this.end&&(this.end=t)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};Nh=Xe([ce(0,Tt)],Nh);function zg(e){return 0<=e&&e<256}var mE=5e7,$g=12,gE=50,_E=class extends Re{constructor(e){super(),this._action=e,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this._register(new oe),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(e,t){if(t!==void 0&&this._syncCalls>t){this._syncCalls=0;return}if(this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;this._isSyncWriting=!0;let r;for(;r=this._writeBuffer.shift();){this._action(r);let n=this._callbacks.shift();n&&n()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(e,t){if(this._pendingData>mE)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput){this._didUserInput=!1,this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t),this._innerWrite();return}setTimeout(()=>this._innerWrite())}this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t)}_innerWrite(e=0,t=!0){let r=e||performance.now();for(;this._writeBuffer.length>this._bufferOffset;){let n=this._writeBuffer[this._bufferOffset],o=this._action(n,t);if(o){let c=h=>performance.now()-r>=$g?setTimeout(()=>this._innerWrite(0,h)):this._innerWrite(r,h);o.catch(h=>(queueMicrotask(()=>{throw h}),Promise.resolve(!1))).then(c);return}let l=this._callbacks[this._bufferOffset];if(l&&l(),this._bufferOffset++,this._pendingData-=n.length,performance.now()-r>=$g)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>gE&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}},Ph=class{constructor(e){this._bufferService=e,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(e){let t=this._bufferService.buffer;if(e.id===void 0){let h=t.addMarker(t.ybase+t.y),m={data:e,id:this._nextId++,lines:[h]};return h.onDispose(()=>this._removeMarkerFromLink(m,h)),this._dataByLinkId.set(m.id,m),m.id}let r=e,n=this._getEntryIdKey(r),o=this._entriesWithId.get(n);if(o)return this.addLineToLink(o.id,t.ybase+t.y),o.id;let l=t.addMarker(t.ybase+t.y),c={id:this._nextId++,key:this._getEntryIdKey(r),data:r,lines:[l]};return l.onDispose(()=>this._removeMarkerFromLink(c,l)),this._entriesWithId.set(c.key,c),this._dataByLinkId.set(c.id,c),c.id}addLineToLink(e,t){let r=this._dataByLinkId.get(e);if(r&&r.lines.every(n=>n.line!==t)){let n=this._bufferService.buffer.addMarker(t);r.lines.push(n),n.onDispose(()=>this._removeMarkerFromLink(r,n))}}getLinkData(e){return this._dataByLinkId.get(e)?.data}_getEntryIdKey(e){return`${e.id};;${e.uri}`}_removeMarkerFromLink(e,t){let r=e.lines.indexOf(t);r!==-1&&(e.lines.splice(r,1),e.lines.length===0&&(e.data.id!==void 0&&this._entriesWithId.delete(e.key),this._dataByLinkId.delete(e.id)))}};Ph=Xe([ce(0,Tt)],Ph);var Hg=!1,vE=class extends Re{constructor(e){super(),this._windowsWrappingHeuristics=this._register(new Bi),this._onBinary=this._register(new oe),this.onBinary=this._onBinary.event,this._onData=this._register(new oe),this.onData=this._onData.event,this._onLineFeed=this._register(new oe),this.onLineFeed=this._onLineFeed.event,this._onResize=this._register(new oe),this.onResize=this._onResize.event,this._onWriteParsed=this._register(new oe),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this._register(new oe),this._instantiationService=new Hk,this.optionsService=this._register(new Jk(e)),this._instantiationService.setService(Bt,this.optionsService),this._bufferService=this._register(this._instantiationService.createInstance(bh)),this._instantiationService.setService(Tt,this._bufferService),this._logService=this._register(this._instantiationService.createInstance(wh)),this._instantiationService.setService(gv,this._logService),this.coreService=this._register(this._instantiationService.createInstance(Ch)),this._instantiationService.setService(ti,this.coreService),this.coreMouseService=this._register(this._instantiationService.createInstance(kh)),this._instantiationService.setService(mv,this.coreMouseService),this.unicodeService=this._register(this._instantiationService.createInstance(Ws)),this._instantiationService.setService(AC,this.unicodeService),this._charsetService=this._instantiationService.createInstance(sE),this._instantiationService.setService(IC,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(Ph),this._instantiationService.setService(_v,this._oscLinkService),this._inputHandler=this._register(new pE(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this._register(bt.forward(this._inputHandler.onLineFeed,this._onLineFeed)),this._register(this._inputHandler),this._register(bt.forward(this._bufferService.onResize,this._onResize)),this._register(bt.forward(this.coreService.onData,this._onData)),this._register(bt.forward(this.coreService.onBinary,this._onBinary)),this._register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom(!0))),this._register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this._register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this._register(this._bufferService.onScroll(()=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this._register(new _E((t,r)=>this._inputHandler.parse(t,r))),this._register(bt.forward(this._writeBuffer.onWriteParsed,this._onWriteParsed))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this._register(new oe),this._onScroll.event(e=>{this._onScrollApi?.fire(e.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(e){for(let t in e)this.optionsService.options[t]=e[t]}write(e,t){this._writeBuffer.write(e,t)}writeSync(e,t){this._logService.logLevel<=3&&!Hg&&(this._logService.warn("writeSync is unreliable and will be removed soon."),Hg=!0),this._writeBuffer.writeSync(e,t)}input(e,t=!0){this.coreService.triggerDataEvent(e,t)}resize(e,t){isNaN(e)||isNaN(t)||(e=Math.max(e,Yv),t=Math.max(t,Gv),this._bufferService.resize(e,t))}scroll(e,t=!1){this._bufferService.scroll(e,t)}scrollLines(e,t){this._bufferService.scrollLines(e,t)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(e){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){let t=e-this._bufferService.buffer.ydisp;t!==0&&this.scrollLines(t)}registerEscHandler(e,t){return this._inputHandler.registerEscHandler(e,t)}registerDcsHandler(e,t){return this._inputHandler.registerDcsHandler(e,t)}registerCsiHandler(e,t){return this._inputHandler.registerCsiHandler(e,t)}registerOscHandler(e,t){return this._inputHandler.registerOscHandler(e,t)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let e=!1,t=this.optionsService.rawOptions.windowsPty;t&&t.buildNumber!==void 0&&t.buildNumber!==void 0?e=t.backend==="conpty"&&t.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(e=!0),e?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let e=[];e.push(this.onLineFeed(Mg.bind(null,this._bufferService))),e.push(this.registerCsiHandler({final:"H"},()=>(Mg(this._bufferService),!1))),this._windowsWrappingHeuristics.value=Ue(()=>{for(let t of e)t.dispose()})}}},yE={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};function xE(e,t,r,n){let o={type:0,cancel:!1,key:void 0},l=(e.shiftKey?1:0)|(e.altKey?2:0)|(e.ctrlKey?4:0)|(e.metaKey?8:0);switch(e.keyCode){case 0:e.key==="UIKeyInputUpArrow"?t?o.key=J.ESC+"OA":o.key=J.ESC+"[A":e.key==="UIKeyInputLeftArrow"?t?o.key=J.ESC+"OD":o.key=J.ESC+"[D":e.key==="UIKeyInputRightArrow"?t?o.key=J.ESC+"OC":o.key=J.ESC+"[C":e.key==="UIKeyInputDownArrow"&&(t?o.key=J.ESC+"OB":o.key=J.ESC+"[B");break;case 8:o.key=e.ctrlKey?"\b":J.DEL,e.altKey&&(o.key=J.ESC+o.key);break;case 9:if(e.shiftKey){o.key=J.ESC+"[Z";break}o.key=J.HT,o.cancel=!0;break;case 13:o.key=e.altKey?J.ESC+J.CR:J.CR,o.cancel=!0;break;case 27:o.key=J.ESC,e.altKey&&(o.key=J.ESC+J.ESC),o.cancel=!0;break;case 37:if(e.metaKey)break;l?o.key=J.ESC+"[1;"+(l+1)+"D":t?o.key=J.ESC+"OD":o.key=J.ESC+"[D";break;case 39:if(e.metaKey)break;l?o.key=J.ESC+"[1;"+(l+1)+"C":t?o.key=J.ESC+"OC":o.key=J.ESC+"[C";break;case 38:if(e.metaKey)break;l?o.key=J.ESC+"[1;"+(l+1)+"A":t?o.key=J.ESC+"OA":o.key=J.ESC+"[A";break;case 40:if(e.metaKey)break;l?o.key=J.ESC+"[1;"+(l+1)+"B":t?o.key=J.ESC+"OB":o.key=J.ESC+"[B";break;case 45:!e.shiftKey&&!e.ctrlKey&&(o.key=J.ESC+"[2~");break;case 46:l?o.key=J.ESC+"[3;"+(l+1)+"~":o.key=J.ESC+"[3~";break;case 36:l?o.key=J.ESC+"[1;"+(l+1)+"H":t?o.key=J.ESC+"OH":o.key=J.ESC+"[H";break;case 35:l?o.key=J.ESC+"[1;"+(l+1)+"F":t?o.key=J.ESC+"OF":o.key=J.ESC+"[F";break;case 33:e.shiftKey?o.type=2:e.ctrlKey?o.key=J.ESC+"[5;"+(l+1)+"~":o.key=J.ESC+"[5~";break;case 34:e.shiftKey?o.type=3:e.ctrlKey?o.key=J.ESC+"[6;"+(l+1)+"~":o.key=J.ESC+"[6~";break;case 112:l?o.key=J.ESC+"[1;"+(l+1)+"P":o.key=J.ESC+"OP";break;case 113:l?o.key=J.ESC+"[1;"+(l+1)+"Q":o.key=J.ESC+"OQ";break;case 114:l?o.key=J.ESC+"[1;"+(l+1)+"R":o.key=J.ESC+"OR";break;case 115:l?o.key=J.ESC+"[1;"+(l+1)+"S":o.key=J.ESC+"OS";break;case 116:l?o.key=J.ESC+"[15;"+(l+1)+"~":o.key=J.ESC+"[15~";break;case 117:l?o.key=J.ESC+"[17;"+(l+1)+"~":o.key=J.ESC+"[17~";break;case 118:l?o.key=J.ESC+"[18;"+(l+1)+"~":o.key=J.ESC+"[18~";break;case 119:l?o.key=J.ESC+"[19;"+(l+1)+"~":o.key=J.ESC+"[19~";break;case 120:l?o.key=J.ESC+"[20;"+(l+1)+"~":o.key=J.ESC+"[20~";break;case 121:l?o.key=J.ESC+"[21;"+(l+1)+"~":o.key=J.ESC+"[21~";break;case 122:l?o.key=J.ESC+"[23;"+(l+1)+"~":o.key=J.ESC+"[23~";break;case 123:l?o.key=J.ESC+"[24;"+(l+1)+"~":o.key=J.ESC+"[24~";break;default:if(e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey)e.keyCode>=65&&e.keyCode<=90?o.key=String.fromCharCode(e.keyCode-64):e.keyCode===32?o.key=J.NUL:e.keyCode>=51&&e.keyCode<=55?o.key=String.fromCharCode(e.keyCode-51+27):e.keyCode===56?o.key=J.DEL:e.keyCode===219?o.key=J.ESC:e.keyCode===220?o.key=J.FS:e.keyCode===221&&(o.key=J.GS);else if((!r||n)&&e.altKey&&!e.metaKey){let c=yE[e.keyCode]?.[e.shiftKey?1:0];if(c)o.key=J.ESC+c;else if(e.keyCode>=65&&e.keyCode<=90){let h=e.ctrlKey?e.keyCode-64:e.keyCode+32,m=String.fromCharCode(h);e.shiftKey&&(m=m.toUpperCase()),o.key=J.ESC+m}else if(e.keyCode===32)o.key=J.ESC+(e.ctrlKey?J.NUL:" ");else if(e.key==="Dead"&&e.code.startsWith("Key")){let h=e.code.slice(3,4);e.shiftKey||(h=h.toLowerCase()),o.key=J.ESC+h,o.cancel=!0}}else r&&!e.altKey&&!e.ctrlKey&&!e.shiftKey&&e.metaKey?e.keyCode===65&&(o.type=1):e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.keyCode>=48&&e.key.length===1?o.key=e.key:e.key&&e.ctrlKey&&(e.key==="_"&&(o.key=J.US),e.key==="@"&&(o.key=J.NUL));break}return o}var et=0,SE=class{constructor(e){this._getKey=e,this._array=[],this._insertedValues=[],this._flushInsertedTask=new Za,this._isFlushingInserted=!1,this._deletedIndices=[],this._flushDeletedTask=new Za,this._isFlushingDeleted=!1}clear(){this._array.length=0,this._insertedValues.length=0,this._flushInsertedTask.clear(),this._isFlushingInserted=!1,this._deletedIndices.length=0,this._flushDeletedTask.clear(),this._isFlushingDeleted=!1}insert(e){this._flushCleanupDeleted(),this._insertedValues.length===0&&this._flushInsertedTask.enqueue(()=>this._flushInserted()),this._insertedValues.push(e)}_flushInserted(){let e=this._insertedValues.sort((o,l)=>this._getKey(o)-this._getKey(l)),t=0,r=0,n=new Array(this._array.length+this._insertedValues.length);for(let o=0;o<n.length;o++)r>=this._array.length||this._getKey(e[t])<=this._getKey(this._array[r])?(n[o]=e[t],t++):n[o]=this._array[r++];this._array=n,this._insertedValues.length=0}_flushCleanupInserted(){!this._isFlushingInserted&&this._insertedValues.length>0&&this._flushInsertedTask.flush()}delete(e){if(this._flushCleanupInserted(),this._array.length===0)return!1;let t=this._getKey(e);if(t===void 0||(et=this._search(t),et===-1)||this._getKey(this._array[et])!==t)return!1;do if(this._array[et]===e)return this._deletedIndices.length===0&&this._flushDeletedTask.enqueue(()=>this._flushDeleted()),this._deletedIndices.push(et),!0;while(++et<this._array.length&&this._getKey(this._array[et])===t);return!1}_flushDeleted(){this._isFlushingDeleted=!0;let e=this._deletedIndices.sort((o,l)=>o-l),t=0,r=new Array(this._array.length-e.length),n=0;for(let o=0;o<this._array.length;o++)e[t]===o?t++:r[n++]=this._array[o];this._array=r,this._deletedIndices.length=0,this._isFlushingDeleted=!1}_flushCleanupDeleted(){!this._isFlushingDeleted&&this._deletedIndices.length>0&&this._flushDeletedTask.flush()}*getKeyIterator(e){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(et=this._search(e),!(et<0||et>=this._array.length)&&this._getKey(this._array[et])===e))do yield this._array[et];while(++et<this._array.length&&this._getKey(this._array[et])===e)}forEachByKey(e,t){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(et=this._search(e),!(et<0||et>=this._array.length)&&this._getKey(this._array[et])===e))do t(this._array[et]);while(++et<this._array.length&&this._getKey(this._array[et])===e)}values(){return this._flushCleanupInserted(),this._flushCleanupDeleted(),[...this._array].values()}_search(e){let t=0,r=this._array.length-1;for(;r>=t;){let n=t+r>>1,o=this._getKey(this._array[n]);if(o>e)r=n-1;else if(o<e)t=n+1;else{for(;n>0&&this._getKey(this._array[n-1])===e;)n--;return n}}return t}},Mu=0,Wg=0,wE=class extends Re{constructor(){super(),this._decorations=new SE(e=>e?.marker.line),this._onDecorationRegistered=this._register(new oe),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this._register(new oe),this.onDecorationRemoved=this._onDecorationRemoved.event,this._register(Ue(()=>this.reset()))}get decorations(){return this._decorations.values()}registerDecoration(e){if(e.marker.isDisposed)return;let t=new bE(e);if(t){let r=t.marker.onDispose(()=>t.dispose()),n=t.onDispose(()=>{n.dispose(),t&&(this._decorations.delete(t)&&this._onDecorationRemoved.fire(t),r.dispose())});this._decorations.insert(t),this._onDecorationRegistered.fire(t)}return t}reset(){for(let e of this._decorations.values())e.dispose();this._decorations.clear()}*getDecorationsAtCell(e,t,r){let n=0,o=0;for(let l of this._decorations.getKeyIterator(t))n=l.options.x??0,o=n+(l.options.width??1),e>=n&&e<o&&(!r||(l.options.layer??"bottom")===r)&&(yield l)}forEachDecorationAtCell(e,t,r,n){this._decorations.forEachByKey(t,o=>{Mu=o.options.x??0,Wg=Mu+(o.options.width??1),e>=Mu&&e<Wg&&(!r||(o.options.layer??"bottom")===r)&&n(o)})}},bE=class extends Cs{constructor(e){super(),this.options=e,this.onRenderEmitter=this.add(new oe),this.onRender=this.onRenderEmitter.event,this._onDispose=this.add(new oe),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=e.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=Qe.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=Qe.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}},CE=1e3,kE=class{constructor(e,t=CE){this._renderCallback=e,this._debounceThresholdMS=t,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(e,t,r){this._rowCount=r,e=e!==void 0?e:0,t=t!==void 0?t:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,e):e,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,t):t;let n=performance.now();if(n-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=n,this._innerRefresh();else if(!this._additionalRefreshRequested){let o=n-this._lastRefreshMs,l=this._debounceThresholdMS-o;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=performance.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},l)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t)}},Ug=20,el=class extends Re{constructor(e,t,r,n){super(),this._terminal=e,this._coreBrowserService=r,this._renderService=n,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="";let o=this._coreBrowserService.mainDocument;this._accessibilityContainer=o.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=o.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let l=0;l<this._terminal.rows;l++)this._rowElements[l]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[l]);if(this._topBoundaryFocusListener=l=>this._handleBoundaryFocus(l,0),this._bottomBoundaryFocusListener=l=>this._handleBoundaryFocus(l,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=o.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this._register(new kE(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this._register(this._terminal.onResize(l=>this._handleResize(l.rows))),this._register(this._terminal.onRender(l=>this._refreshRows(l.start,l.end))),this._register(this._terminal.onScroll(()=>this._refreshRows())),this._register(this._terminal.onA11yChar(l=>this._handleChar(l))),this._register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this._register(this._terminal.onA11yTab(l=>this._handleTab(l))),this._register(this._terminal.onKey(l=>this._handleKey(l.key))),this._register(this._terminal.onBlur(()=>this._clearLiveRegion())),this._register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._register(be(o,"selectionchange",()=>this._handleSelectionChange())),this._register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRowsDimensions(),this._refreshRows(),this._register(Ue(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(e){for(let t=0;t<e;t++)this._handleChar(" ")}_handleChar(e){this._liveRegionLineCount<Ug+1&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,e===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===Ug+1&&(this._liveRegion.textContent+=Qu.get())))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(e){this._clearLiveRegion(),/\p{Control}/u.test(e)||this._charsToConsume.push(e)}_refreshRows(e,t){this._liveRegionDebouncer.refresh(e,t,this._terminal.rows)}_renderRows(e,t){let r=this._terminal.buffer,n=r.lines.length.toString();for(let o=e;o<=t;o++){let l=r.lines.get(r.ydisp+o),c=[],h=l?.translateToString(!0,void 0,void 0,c)||"",m=(r.ydisp+o+1).toString(),d=this._rowElements[o];d&&(h.length===0?(d.textContent="",this._rowColumns.set(d,[0,1])):(d.textContent=h,this._rowColumns.set(d,c)),d.setAttribute("aria-posinset",m),d.setAttribute("aria-setsize",n),this._alignRowWidth(d))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(e,t){let r=e.target,n=this._rowElements[t===0?1:this._rowElements.length-2],o=r.getAttribute("aria-posinset"),l=t===0?"1":`${this._terminal.buffer.lines.length}`;if(o===l||e.relatedTarget!==n)return;let c,h;if(t===0?(c=r,h=this._rowElements.pop(),this._rowContainer.removeChild(h)):(c=this._rowElements.shift(),h=r,this._rowContainer.removeChild(c)),c.removeEventListener("focus",this._topBoundaryFocusListener),h.removeEventListener("focus",this._bottomBoundaryFocusListener),t===0){let m=this._createAccessibilityTreeNode();this._rowElements.unshift(m),this._rowContainer.insertAdjacentElement("afterbegin",m)}else{let m=this._createAccessibilityTreeNode();this._rowElements.push(m),this._rowContainer.appendChild(m)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(t===0?-1:1),this._rowElements[t===0?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;let e=this._coreBrowserService.mainDocument.getSelection();if(!e)return;if(e.isCollapsed){this._rowContainer.contains(e.anchorNode)&&this._terminal.clearSelection();return}if(!e.anchorNode||!e.focusNode){console.error("anchorNode and/or focusNode are null");return}let t={node:e.anchorNode,offset:e.anchorOffset},r={node:e.focusNode,offset:e.focusOffset};if((t.node.compareDocumentPosition(r.node)&Node.DOCUMENT_POSITION_PRECEDING||t.node===r.node&&t.offset>r.offset)&&([t,r]=[r,t]),t.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(t={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(t.node))return;let n=this._rowElements.slice(-1)[0];if(r.node.compareDocumentPosition(n)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(r={node:n,offset:n.textContent?.length??0}),!this._rowContainer.contains(r.node))return;let o=({node:h,offset:m})=>{let d=h instanceof Text?h.parentNode:h,v=parseInt(d?.getAttribute("aria-posinset"),10)-1;if(isNaN(v))return console.warn("row is invalid. Race condition?"),null;let _=this._rowColumns.get(d);if(!_)return console.warn("columns is null. Race condition?"),null;let x=m<_.length?_[m]:_.slice(-1)[0]+1;return x>=this._terminal.cols&&(++v,x=0),{row:v,column:x}},l=o(t),c=o(r);if(!(!l||!c)){if(l.row>c.row||l.row===c.row&&l.column>=c.column)throw new Error("invalid range");this._terminal.select(l.column,l.row,(c.row-l.row)*this._terminal.cols-l.column+c.column)}}_handleResize(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let t=this._rowContainer.children.length;t<this._terminal.rows;t++)this._rowElements[t]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[t]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let e=this._coreBrowserService.mainDocument.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){Object.assign(this._accessibilityContainer.style,{width:`${this._renderService.dimensions.css.canvas.width}px`,fontSize:`${this._terminal.options.fontSize}px`}),this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e]),this._alignRowWidth(this._rowElements[e])}}_refreshRowDimensions(e){e.style.height=`${this._renderService.dimensions.css.cell.height}px`}_alignRowWidth(e){e.style.transform="";let t=e.getBoundingClientRect().width,r=this._rowColumns.get(e)?.slice(-1)?.[0];if(!r)return;let n=r*this._renderService.dimensions.css.cell.width;e.style.transform=`scaleX(${n/t})`}};el=Xe([ce(1,Qh),ce(2,Yr),ce(3,Gr)],el);var Rh=class extends Re{constructor(e,t,r,n,o){super(),this._element=e,this._mouseService=t,this._renderService=r,this._bufferService=n,this._linkProviderService=o,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this._register(new oe),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this._register(new oe),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this._register(Ue(()=>{Js(this._linkCacheDisposables),this._linkCacheDisposables.length=0,this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this._register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this._register(be(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this._register(be(this._element,"mousemove",this._handleMouseMove.bind(this))),this._register(be(this._element,"mousedown",this._handleMouseDown.bind(this))),this._register(be(this._element,"mouseup",this._handleMouseUp.bind(this)))}get currentLink(){return this._currentLink}_handleMouseMove(e){this._lastMouseEvent=e;let t=this._positionFromMouseEvent(e,this._element,this._mouseService);if(!t)return;this._isMouseOut=!1;let r=e.composedPath();for(let n=0;n<r.length;n++){let o=r[n];if(o.classList.contains("xterm"))break;if(o.classList.contains("xterm-hover"))return}(!this._lastBufferCell||t.x!==this._lastBufferCell.x||t.y!==this._lastBufferCell.y)&&(this._handleHover(t),this._lastBufferCell=t)}_handleHover(e){if(this._activeLine!==e.y||this._wasResized){this._clearCurrentLink(),this._askForLink(e,!1),this._wasResized=!1;return}this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))}_askForLink(e,t){(!this._activeProviderReplies||!t)&&(this._activeProviderReplies?.forEach(n=>{n?.forEach(o=>{o.link.dispose&&o.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);let r=!1;for(let[n,o]of this._linkProviderService.linkProviders.entries())t?this._activeProviderReplies?.get(n)&&(r=this._checkLinkProviderResult(n,e,r)):o.provideLinks(e.y,l=>{if(this._isMouseOut)return;let c=l?.map(h=>({link:h}));this._activeProviderReplies?.set(n,c),r=this._checkLinkProviderResult(n,e,r),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(e.y,this._activeProviderReplies)})}_removeIntersectingLinks(e,t){let r=new Set;for(let n=0;n<t.size;n++){let o=t.get(n);if(o)for(let l=0;l<o.length;l++){let c=o[l],h=c.link.range.start.y<e?0:c.link.range.start.x,m=c.link.range.end.y>e?this._bufferService.cols:c.link.range.end.x;for(let d=h;d<=m;d++){if(r.has(d)){o.splice(l--,1);break}r.add(d)}}}}_checkLinkProviderResult(e,t,r){if(!this._activeProviderReplies)return r;let n=this._activeProviderReplies.get(e),o=!1;for(let l=0;l<e;l++)(!this._activeProviderReplies.has(l)||this._activeProviderReplies.get(l))&&(o=!0);if(!o&&n){let l=n.find(c=>this._linkAtPosition(c.link,t));l&&(r=!0,this._handleNewLink(l))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!r)for(let l=0;l<this._activeProviderReplies.size;l++){let c=this._activeProviderReplies.get(l)?.find(h=>this._linkAtPosition(h.link,t));if(c){r=!0,this._handleNewLink(c);break}}return r}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(e){if(!this._currentLink)return;let t=this._positionFromMouseEvent(e,this._element,this._mouseService);t&&this._mouseDownLink&&EE(this._mouseDownLink.link,this._currentLink.link)&&this._linkAtPosition(this._currentLink.link,t)&&this._currentLink.link.activate(e,this._currentLink.link.text)}_clearCurrentLink(e,t){!this._currentLink||!this._lastMouseEvent||(!e||!t||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=t)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,Js(this._linkCacheDisposables),this._linkCacheDisposables.length=0)}_handleNewLink(e){if(!this._lastMouseEvent)return;let t=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);t&&this._linkAtPosition(e.link,t)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0?!0:e.link.decorations.underline,pointerCursor:e.link.decorations===void 0?!0:e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:r=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==r&&(this._currentLink.state.decorations.pointerCursor=r,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",r))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:r=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==r&&(this._currentLink.state.decorations.underline=r,this._currentLink.state.isHovered&&this._fireUnderlineEvent(e.link,r))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(r=>{if(!this._currentLink)return;let n=r.start===0?0:r.start+1+this._bufferService.buffer.ydisp,o=this._bufferService.buffer.ydisp+1+r.end;if(this._currentLink.link.range.start.y>=n&&this._currentLink.link.range.end.y<=o&&(this._clearCurrentLink(n,o),this._lastMouseEvent)){let l=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);l&&this._askForLink(l,!1)}})))}_linkHover(e,t,r){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),t.hover&&t.hover(r,t.text)}_fireUnderlineEvent(e,t){let r=e.range,n=this._bufferService.buffer.ydisp,o=this._createLinkUnderlineEvent(r.start.x-1,r.start.y-n-1,r.end.x,r.end.y-n-1,void 0);(t?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(o)}_linkLeave(e,t,r){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),t.leave&&t.leave(r,t.text)}_linkAtPosition(e,t){let r=e.range.start.y*this._bufferService.cols+e.range.start.x,n=e.range.end.y*this._bufferService.cols+e.range.end.x,o=t.y*this._bufferService.cols+t.x;return r<=o&&o<=n}_positionFromMouseEvent(e,t,r){let n=r.getCoords(e,t,this._bufferService.cols,this._bufferService.rows);if(n)return{x:n[0],y:n[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(e,t,r,n,o){return{x1:e,y1:t,x2:r,y2:n,cols:this._bufferService.cols,fg:o}}};Rh=Xe([ce(1,Yh),ce(2,Gr),ce(3,Tt),ce(4,yv)],Rh);function EE(e,t){return e.text===t.text&&e.range.start.x===t.range.start.x&&e.range.start.y===t.range.start.y&&e.range.end.x===t.range.end.x&&e.range.end.y===t.range.end.y}var NE=class extends vE{constructor(e={}){super(e),this._linkifier=this._register(new Bi),this.browser=Av,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this._register(new Bi),this._onCursorMove=this._register(new oe),this.onCursorMove=this._onCursorMove.event,this._onKey=this._register(new oe),this.onKey=this._onKey.event,this._onRender=this._register(new oe),this.onRender=this._onRender.event,this._onSelectionChange=this._register(new oe),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this._register(new oe),this.onTitleChange=this._onTitleChange.event,this._onBell=this._register(new oe),this.onBell=this._onBell.event,this._onFocus=this._register(new oe),this._onBlur=this._register(new oe),this._onA11yCharEmitter=this._register(new oe),this._onA11yTabEmitter=this._register(new oe),this._onWillOpen=this._register(new oe),this._setup(),this._decorationService=this._instantiationService.createInstance(wE),this._instantiationService.setService(ao,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(gk),this._instantiationService.setService(yv,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(Gu)),this._register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this._register(this._inputHandler.onRequestRefreshRows(t=>this.refresh(t?.start??0,t?.end??this.rows-1))),this._register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this._register(this._inputHandler.onRequestReset(()=>this.reset())),this._register(this._inputHandler.onRequestWindowsOptionsReport(t=>this._reportWindowsOptions(t))),this._register(this._inputHandler.onColor(t=>this._handleColorEvent(t))),this._register(bt.forward(this._inputHandler.onCursorMove,this._onCursorMove)),this._register(bt.forward(this._inputHandler.onTitleChange,this._onTitleChange)),this._register(bt.forward(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this._register(bt.forward(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this._register(this._bufferService.onResize(t=>this._afterResize(t.cols,t.rows))),this._register(Ue(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}get linkifier(){return this._linkifier.value}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(e){if(this._themeService)for(let t of e){let r,n="";switch(t.index){case 256:r="foreground",n="10";break;case 257:r="background",n="11";break;case 258:r="cursor",n="12";break;default:r="ansi",n="4;"+t.index}switch(t.type){case 0:let o=$e.toColorRGB(r==="ansi"?this._themeService.colors.ansi[t.index]:this._themeService.colors[r]);this.coreService.triggerDataEvent(`${J.ESC}]${n};${dE(o)}${Bv.ST}`);break;case 1:if(r==="ansi")this._themeService.modifyColors(l=>l.ansi[t.index]=it.toColor(...t.color));else{let l=r;this._themeService.modifyColors(c=>c[l]=it.toColor(...t.color))}break;case 2:this._themeService.restoreColor(t.index);break}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(e){e?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(el,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(e){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(J.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(J.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let e=this.buffer.ybase+this.buffer.y,t=this.buffer.lines.get(e);if(!t)return;let r=Math.min(this.buffer.x,this.cols-1),n=this._renderService.dimensions.css.cell.height,o=t.getWidth(r),l=this._renderService.dimensions.css.cell.width*o,c=this.buffer.y*this._renderService.dimensions.css.cell.height,h=r*this._renderService.dimensions.css.cell.width;this.textarea.style.left=h+"px",this.textarea.style.top=c+"px",this.textarea.style.width=l+"px",this.textarea.style.height=n+"px",this.textarea.style.lineHeight=n+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this._register(be(this.element,"copy",t=>{this.hasSelection()&&jC(t,this._selectionService)}));let e=t=>DC(t,this.textarea,this.coreService,this.optionsService);this._register(be(this.textarea,"paste",e)),this._register(be(this.element,"paste",e)),Fv?this._register(be(this.element,"mousedown",t=>{t.button===2&&eg(t,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this._register(be(this.element,"contextmenu",t=>{eg(t,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),sd&&this._register(be(this.element,"auxclick",t=>{t.button===1&&uv(t,this.textarea,this.screenElement)}))}_bindKeys(){this._register(be(this.textarea,"keyup",e=>this._keyUp(e),!0)),this._register(be(this.textarea,"keydown",e=>this._keyDown(e),!0)),this._register(be(this.textarea,"keypress",e=>this._keyPress(e),!0)),this._register(be(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this._register(be(this.textarea,"compositionupdate",e=>this._compositionHelper.compositionupdate(e))),this._register(be(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this._register(be(this.textarea,"input",e=>this._inputEvent(e),!0)),this._register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(e){if(!e)throw new Error("Terminal requires a parent element.");if(e.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService){this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView);return}this._document=e.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),e.appendChild(this.element);let t=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),t.appendChild(this._viewportElement),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._register(be(this.screenElement,"mousemove",o=>this.updateCursorStyle(o))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),t.appendChild(this.screenElement);let r=this.textarea=this._document.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",qu.get()),Hv||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._register(this.optionsService.onSpecificOptionChange("disableStdin",()=>r.readOnly=this.optionsService.rawOptions.disableStdin)),this.textarea.readOnly=this.optionsService.rawOptions.disableStdin,this._coreBrowserService=this._register(this._instantiationService.createInstance(pk,this.textarea,e.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(Yr,this._coreBrowserService),this._register(be(this.textarea,"focus",o=>this._handleTextAreaFocus(o))),this._register(be(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(_h,this._document,this._helperContainer),this._instantiationService.setService(ul,this._charSizeService),this._themeService=this._instantiationService.createInstance(Sh),this._instantiationService.setService(Hi,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(Xa),this._instantiationService.setService(vv,this._characterJoinerService),this._renderService=this._register(this._instantiationService.createInstance(yh,this.rows,this.screenElement)),this._instantiationService.setService(Gr,this._renderService),this._register(this._renderService.onRenderedViewportChange(o=>this._onRender.fire(o))),this.onResize(o=>this._renderService.resize(o.cols,o.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(ph,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(vh),this._instantiationService.setService(Yh,this._mouseService);let n=this._linkifier.value=this._register(this._instantiationService.createInstance(Rh,this.screenElement));this.element.appendChild(t);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this._register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this._register(this.onBlur(()=>this._renderService.handleBlur())),this._register(this.onFocus(()=>this._renderService.handleFocus())),this._viewport=this._register(this._instantiationService.createInstance(dh,this.element,this.screenElement)),this._register(this._viewport.onRequestScrollLines(o=>{super.scrollLines(o,!1),this.refresh(0,this.rows-1)})),this._selectionService=this._register(this._instantiationService.createInstance(xh,this.element,this.screenElement,n)),this._instantiationService.setService(zC,this._selectionService),this._register(this._selectionService.onRequestScrollLines(o=>this.scrollLines(o.amount,o.suppressScrollEvent))),this._register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this._register(this._selectionService.onRequestRedraw(o=>this._renderService.handleSelectionChanged(o.start,o.end,o.columnSelectMode))),this._register(this._selectionService.onLinuxMouseSelection(o=>{this.textarea.value=o,this.textarea.focus(),this.textarea.select()})),this._register(bt.any(this._onScroll.event,this._inputHandler.onScroll)(()=>{this._selectionService.refresh(),this._viewport?.queueSync()})),this._register(this._instantiationService.createInstance(fh,this.screenElement)),this._register(be(this.element,"mousedown",o=>this._selectionService.handleMouseDown(o))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(el,this)),this._register(this.optionsService.onSpecificOptionChange("screenReaderMode",o=>this._handleScreenReaderModeOptionChange(o))),this.options.overviewRuler.width&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(Ga,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRuler",o=>{!this._overviewRulerRenderer&&o&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(Ga,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(gh,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let e=this,t=this.element;function r(l){let c=e._mouseService.getMouseReportCoords(l,e.screenElement);if(!c)return!1;let h,m;switch(l.overrideType||l.type){case"mousemove":m=32,l.buttons===void 0?(h=3,l.button!==void 0&&(h=l.button<3?l.button:3)):h=l.buttons&1?0:l.buttons&4?1:l.buttons&2?2:3;break;case"mouseup":m=0,h=l.button<3?l.button:3;break;case"mousedown":m=1,h=l.button<3?l.button:3;break;case"wheel":if(e._customWheelEventHandler&&e._customWheelEventHandler(l)===!1)return!1;let d=l.deltaY;if(d===0||e.coreMouseService.consumeWheelEvent(l,e._renderService?.dimensions?.device?.cell?.height,e._coreBrowserService?.dpr)===0)return!1;m=d<0?0:1,h=4;break;default:return!1}return m===void 0||h===void 0||h>4?!1:e.coreMouseService.triggerMouseEvent({col:c.col,row:c.row,x:c.x,y:c.y,button:h,action:m,ctrl:l.ctrlKey,alt:l.altKey,shift:l.shiftKey})}let n={mouseup:null,wheel:null,mousedrag:null,mousemove:null},o={mouseup:l=>(r(l),l.buttons||(this._document.removeEventListener("mouseup",n.mouseup),n.mousedrag&&this._document.removeEventListener("mousemove",n.mousedrag)),this.cancel(l)),wheel:l=>(r(l),this.cancel(l,!0)),mousedrag:l=>{l.buttons&&r(l)},mousemove:l=>{l.buttons||r(l)}};this._register(this.coreMouseService.onProtocolChange(l=>{l?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(l)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),l&8?n.mousemove||(t.addEventListener("mousemove",o.mousemove),n.mousemove=o.mousemove):(t.removeEventListener("mousemove",n.mousemove),n.mousemove=null),l&16?n.wheel||(t.addEventListener("wheel",o.wheel,{passive:!1}),n.wheel=o.wheel):(t.removeEventListener("wheel",n.wheel),n.wheel=null),l&2?n.mouseup||(n.mouseup=o.mouseup):(this._document.removeEventListener("mouseup",n.mouseup),n.mouseup=null),l&4?n.mousedrag||(n.mousedrag=o.mousedrag):(this._document.removeEventListener("mousemove",n.mousedrag),n.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this._register(be(t,"mousedown",l=>{if(l.preventDefault(),this.focus(),!(!this.coreMouseService.areMouseEventsActive||this._selectionService.shouldForceSelection(l)))return r(l),n.mouseup&&this._document.addEventListener("mouseup",n.mouseup),n.mousedrag&&this._document.addEventListener("mousemove",n.mousedrag),this.cancel(l)})),this._register(be(t,"wheel",l=>{if(!n.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(l)===!1)return!1;if(!this.buffer.hasScrollback){if(l.deltaY===0)return!1;if(e.coreMouseService.consumeWheelEvent(l,e._renderService?.dimensions?.device?.cell?.height,e._coreBrowserService?.dpr)===0)return this.cancel(l,!0);let c=J.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(l.deltaY<0?"A":"B");return this.coreService.triggerDataEvent(c,!0),this.cancel(l,!0)}}},{passive:!1}))}refresh(e,t){this._renderService?.refreshRows(e,t)}updateCursorStyle(e){this._selectionService?.shouldColumnSelect(e)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(e,t){this._viewport?this._viewport.scrollLines(e):super.scrollLines(e,t),this.refresh(0,this.rows-1)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(e){e&&this._viewport?this._viewport.scrollToLine(this.buffer.ybase,!0):this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){let t=e-this._bufferService.buffer.ydisp;t!==0&&this.scrollLines(t)}paste(e){cv(e,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(e){this._customKeyEventHandler=e}attachCustomWheelEventHandler(e){this._customWheelEventHandler=e}registerLinkProvider(e){return this._linkProviderService.registerLinkProvider(e)}registerCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let t=this._characterJoinerService.register(e);return this.refresh(0,this.rows-1),t}deregisterCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(e)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(e){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)}registerDecoration(e){return this._decorationService.registerDecoration(e)}hasSelection(){return this._selectionService?this._selectionService.hasSelection:!1}select(e,t,r){this._selectionService.setSelection(e,t,r)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(!(!this._selectionService||!this._selectionService.hasSelection))return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(e,t){this._selectionService?.selectLines(e,t)}_keyDown(e){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)return!1;let t=this.browser.isMac&&this.options.macOptionIsMeta&&e.altKey;if(!t&&!this._compositionHelper.keydown(e))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(!0),!1;!t&&(e.key==="Dead"||e.key==="AltGraph")&&(this._unprocessedDeadKey=!0);let r=xE(e,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),r.type===3||r.type===2){let n=this.rows-1;return this.scrollLines(r.type===2?-n:n),this.cancel(e,!0)}if(r.type===1&&this.selectAll(),this._isThirdLevelShift(this.browser,e)||(r.cancel&&this.cancel(e,!0),!r.key)||e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.key.length===1&&e.key.charCodeAt(0)>=65&&e.key.charCodeAt(0)<=90)return!0;if(this._unprocessedDeadKey)return this._unprocessedDeadKey=!1,!0;if((r.key===J.ETX||r.key===J.CR)&&(this.textarea.value=""),this._onKey.fire({key:r.key,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(r.key,!0),!this.optionsService.rawOptions.screenReaderMode||e.altKey||e.ctrlKey)return this.cancel(e,!0);this._keyDownHandled=!0}_isThirdLevelShift(e,t){let r=e.isMac&&!this.options.macOptionIsMeta&&t.altKey&&!t.ctrlKey&&!t.metaKey||e.isWindows&&t.altKey&&t.ctrlKey&&!t.metaKey||e.isWindows&&t.getModifierState("AltGraph");return t.type==="keypress"?r:r&&(!t.keyCode||t.keyCode>47)}_keyUp(e){this._keyDownSeen=!1,!(this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)&&(PE(e)||this.focus(),this.updateCursorStyle(e),this._keyPressHandled=!1)}_keyPress(e){let t;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)return!1;if(this.cancel(e),e.charCode)t=e.charCode;else if(e.which===null||e.which===void 0)t=e.keyCode;else if(e.which!==0&&e.charCode!==0)t=e.which;else return!1;return!t||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e)?!1:(t=String.fromCharCode(t),this._onKey.fire({key:t,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(t,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,!0)}_inputEvent(e){if(e.data&&e.inputType==="insertText"&&(!e.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let t=e.data;return this.coreService.triggerDataEvent(t,!0),this.cancel(e),!0}return!1}resize(e,t){if(e===this.cols&&t===this.rows){this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure();return}super.resize(e,t)}_afterResize(e,t){this._charSizeService?.measure()}clear(){if(!(this.buffer.ybase===0&&this.buffer.y===0)){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let e=1;e<this.rows;e++)this.buffer.lines.push(this.buffer.getBlankLine(st));this._onScroll.fire({position:this.buffer.ydisp}),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;let e=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this._customKeyEventHandler=e,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(J.ESC+"[I"):this.coreService.triggerDataEvent(J.ESC+"[O")}_reportWindowsOptions(e){if(this._renderService)switch(e){case 0:let t=this._renderService.dimensions.css.canvas.width.toFixed(0),r=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${J.ESC}[4;${r};${t}t`);break;case 1:let n=this._renderService.dimensions.css.cell.width.toFixed(0),o=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${J.ESC}[6;${o};${n}t`);break}}cancel(e,t){if(!(!this.options.cancelEvents&&!t))return e.preventDefault(),e.stopPropagation(),!1}};function PE(e){return e.keyCode===16||e.keyCode===17||e.keyCode===18}var RE=class{constructor(){this._addons=[]}dispose(){for(let e=this._addons.length-1;e>=0;e--)this._addons[e].instance.dispose()}loadAddon(e,t){let r={instance:t,dispose:t.dispose,isDisposed:!1};this._addons.push(r),t.dispose=()=>this._wrappedAddonDispose(r),t.activate(e)}_wrappedAddonDispose(e){if(e.isDisposed)return;let t=-1;for(let r=0;r<this._addons.length;r++)if(this._addons[r]===e){t=r;break}if(t===-1)throw new Error("Could not dispose an addon that has not been loaded");e.isDisposed=!0,e.dispose.apply(e.instance),this._addons.splice(t,1)}},LE=class{constructor(e){this._line=e}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(e,t){if(!(e<0||e>=this._line.length))return t?(this._line.loadCell(e,t),t):this._line.loadCell(e,new dr)}translateToString(e,t,r){return this._line.translateToString(e,t,r)}},Kg=class{constructor(e,t){this._buffer=e,this.type=t}init(e){return this._buffer=e,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(e){let t=this._buffer.lines.get(e);if(t)return new LE(t)}getNullCell(){return new dr}},jE=class extends Re{constructor(e){super(),this._core=e,this._onBufferChange=this._register(new oe),this.onBufferChange=this._onBufferChange.event,this._normal=new Kg(this._core.buffers.normal,"normal"),this._alternate=new Kg(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}},DE=class{constructor(e){this._core=e}registerCsiHandler(e,t){return this._core.registerCsiHandler(e,r=>t(r.toArray()))}addCsiHandler(e,t){return this.registerCsiHandler(e,t)}registerDcsHandler(e,t){return this._core.registerDcsHandler(e,(r,n)=>t(r,n.toArray()))}addDcsHandler(e,t){return this.registerDcsHandler(e,t)}registerEscHandler(e,t){return this._core.registerEscHandler(e,t)}addEscHandler(e,t){return this.registerEscHandler(e,t)}registerOscHandler(e,t){return this._core.registerOscHandler(e,t)}addOscHandler(e,t){return this.registerOscHandler(e,t)}},ME=class{constructor(e){this._core=e}register(e){this._core.unicodeService.register(e)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(e){this._core.unicodeService.activeVersion=e}},OE=["cols","rows"],Rr=0,TE=class extends Re{constructor(e){super(),this._core=this._register(new NE(e)),this._addonManager=this._register(new RE),this._publicOptions={...this._core.options};let t=n=>this._core.options[n],r=(n,o)=>{this._checkReadonlyOptions(n),this._core.options[n]=o};for(let n in this._core.options){let o={get:t.bind(this,n),set:r.bind(this,n)};Object.defineProperty(this._publicOptions,n,o)}}_checkReadonlyOptions(e){if(OE.includes(e))throw new Error(`Option "${e}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new DE(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new ME(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this._register(new jE(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let e=this._core.coreService.decPrivateModes,t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any";break}return{applicationCursorKeysMode:e.applicationCursorKeys,applicationKeypadMode:e.applicationKeypad,bracketedPasteMode:e.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:e.origin,reverseWraparoundMode:e.reverseWraparound,sendFocusMode:e.sendFocus,synchronizedOutputMode:e.synchronizedOutput,wraparoundMode:e.wraparound}}get options(){return this._publicOptions}set options(e){for(let t in e)this._publicOptions[t]=e[t]}blur(){this._core.blur()}focus(){this._core.focus()}input(e,t=!0){this._core.input(e,t)}resize(e,t){this._verifyIntegers(e,t),this._core.resize(e,t)}open(e){this._core.open(e)}attachCustomKeyEventHandler(e){this._core.attachCustomKeyEventHandler(e)}attachCustomWheelEventHandler(e){this._core.attachCustomWheelEventHandler(e)}registerLinkProvider(e){return this._core.registerLinkProvider(e)}registerCharacterJoiner(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)}deregisterCharacterJoiner(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)}registerMarker(e=0){return this._verifyIntegers(e),this._core.registerMarker(e)}registerDecoration(e){return this._checkProposedApi(),this._verifyPositiveIntegers(e.x??0,e.width??0,e.height??0),this._core.registerDecoration(e)}hasSelection(){return this._core.hasSelection()}select(e,t,r){this._verifyIntegers(e,t,r),this._core.select(e,t,r)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(e,t){this._verifyIntegers(e,t),this._core.selectLines(e,t)}dispose(){super.dispose()}scrollLines(e){this._verifyIntegers(e),this._core.scrollLines(e)}scrollPages(e){this._verifyIntegers(e),this._core.scrollPages(e)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(e){this._verifyIntegers(e),this._core.scrollToLine(e)}clear(){this._core.clear()}write(e,t){this._core.write(e,t)}writeln(e,t){this._core.write(e),this._core.write(`\r
`,t)}paste(e){this._core.paste(e)}refresh(e,t){this._verifyIntegers(e,t),this._core.refresh(e,t)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(e){this._addonManager.loadAddon(this,e)}static get strings(){return{get promptLabel(){return qu.get()},set promptLabel(e){qu.set(e)},get tooMuchOutput(){return Qu.get()},set tooMuchOutput(e){Qu.set(e)}}}_verifyIntegers(...e){for(Rr of e)if(Rr===1/0||isNaN(Rr)||Rr%1!==0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...e){for(Rr of e)if(Rr&&(Rr===1/0||isNaN(Rr)||Rr%1!==0||Rr<0))throw new Error("This API only accepts positive integers")}};/**
 * Copyright (c) 2014-2024 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * @license MIT
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 */var BE=2,IE=1,AE=class{activate(e){this._terminal=e}dispose(){}fit(){let e=this.proposeDimensions();if(!e||!this._terminal||isNaN(e.cols)||isNaN(e.rows))return;let t=this._terminal._core;(this._terminal.rows!==e.rows||this._terminal.cols!==e.cols)&&(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let e=this._terminal._core._renderService.dimensions;if(e.css.cell.width===0||e.css.cell.height===0)return;let t=this._terminal.options.scrollback===0?0:this._terminal.options.overviewRuler?.width||14,r=window.getComputedStyle(this._terminal.element.parentElement),n=parseInt(r.getPropertyValue("height")),o=Math.max(0,parseInt(r.getPropertyValue("width"))),l=window.getComputedStyle(this._terminal.element),c={top:parseInt(l.getPropertyValue("padding-top")),bottom:parseInt(l.getPropertyValue("padding-bottom")),right:parseInt(l.getPropertyValue("padding-right")),left:parseInt(l.getPropertyValue("padding-left"))},h=c.top+c.bottom,m=c.right+c.left,d=n-h,v=o-m-t;return{cols:Math.max(BE,Math.floor(v/e.css.cell.width)),rows:Math.max(IE,Math.floor(d/e.css.cell.height))}}};/**
 * Copyright (c) 2014-2024 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * @license MIT
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 */var FE=class{constructor(e,t,r,n={}){this._terminal=e,this._regex=t,this._handler=r,this._options=n}provideLinks(e,t){let r=$E.computeLink(e,this._regex,this._terminal,this._handler);t(this._addCallbacks(r))}_addCallbacks(e){return e.map(t=>(t.leave=this._options.leave,t.hover=(r,n)=>{if(this._options.hover){let{range:o}=t;this._options.hover(r,n,o)}},t))}};function zE(e){try{let t=new URL(e),r=t.password&&t.username?`${t.protocol}//${t.username}:${t.password}@${t.host}`:t.username?`${t.protocol}//${t.username}@${t.host}`:`${t.protocol}//${t.host}`;return e.toLocaleLowerCase().startsWith(r.toLocaleLowerCase())}catch{return!1}}var $E=class $a{static computeLink(t,r,n,o){let l=new RegExp(r.source,(r.flags||"")+"g"),[c,h]=$a._getWindowedLineStrings(t-1,n),m=c.join(""),d,v=[];for(;d=l.exec(m);){let _=d[0];if(!zE(_))continue;let[x,b]=$a._mapStrIdx(n,h,0,d.index),[S,w]=$a._mapStrIdx(n,x,b,_.length);if(x===-1||b===-1||S===-1||w===-1)continue;let E={start:{x:b+1,y:x+1},end:{x:w,y:S+1}};v.push({range:E,text:_,activate:o})}return v}static _getWindowedLineStrings(t,r){let n,o=t,l=t,c=0,h="",m=[];if(n=r.buffer.active.getLine(t)){let d=n.translateToString(!0);if(n.isWrapped&&d[0]!==" "){for(c=0;(n=r.buffer.active.getLine(--o))&&c<2048&&(h=n.translateToString(!0),c+=h.length,m.push(h),!(!n.isWrapped||h.indexOf(" ")!==-1)););m.reverse()}for(m.push(d),c=0;(n=r.buffer.active.getLine(++l))&&n.isWrapped&&c<2048&&(h=n.translateToString(!0),c+=h.length,m.push(h),h.indexOf(" ")===-1););}return[m,o]}static _mapStrIdx(t,r,n,o){let l=t.buffer.active,c=l.getNullCell(),h=n;for(;o;){let m=l.getLine(r);if(!m)return[-1,-1];for(let d=h;d<m.length;++d){m.getCell(d,c);let v=c.getChars();if(c.getWidth()&&(o-=v.length||1,d===m.length-1&&v==="")){let _=l.getLine(r+1);_&&_.isWrapped&&(_.getCell(0,c),c.getWidth()===2&&(o+=1))}if(o<0)return[r,d]}r++,h=0}return[r,h]}},HE=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function WE(e,t){let r=window.open();if(r){try{r.opener=null}catch{}r.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}var UE=class{constructor(e=WE,t={}){this._handler=e,this._options=t}activate(e){this._terminal=e;let t=this._options,r=t.urlRegex||HE;this._linkProvider=this._terminal.registerLinkProvider(new FE(this._terminal,r,this._handler,t))}dispose(){this._linkProvider?.dispose()}};function KE(){const{t:e}=$i(),[t,r]=C.useState([]),[n,o]=C.useState(null),[l,c]=C.useState(""),[h,m]=C.useState(!1),d=C.useRef(new Map),v=C.useRef(null),{data:_}=yt({queryKey:["shellTabs"],queryFn:T1}),x=hr({mutationFn:({tabs:P,activeTabId:j})=>B1(P,j)});C.useEffect(()=>{if(_&&!h){const P=_.tabs.map(j=>({...j,connected:!1}));r(P),o(_.activeTabId),m(!0),setTimeout(()=>{P.forEach(j=>{S(j.id,j.cwd,j.ptySessionId)})},100)}},[_,h]),C.useEffect(()=>{if(!h)return;const P=setTimeout(()=>{const j=t.map(A=>({id:A.id,title:A.title,cwd:A.cwd,ptySessionId:A.ptySessionId}));x.mutate({tabs:j,activeTabId:n})},500);return()=>clearTimeout(P)},[t,n,h]);const b=C.useCallback(P=>{const j=`tab-${Date.now()}`,A=P||l||"",U={id:j,title:A&&A.split(/[/\\]/).pop()||"Terminal",cwd:A,connected:!1};r(V=>[...V,U]),o(j),setTimeout(()=>S(j,A),0)},[l]),S=C.useCallback((P,j,A)=>{const U=document.getElementById(`terminal-${P}`);if(!U||d.current.has(P))return;const V=new TE({cursorBlink:!0,fontSize:14,fontFamily:'Consolas, "Courier New", monospace',theme:{background:"#1e1e2e",foreground:"#cdd6f4",cursor:"#f5e0dc",cursorAccent:"#1e1e2e",selectionBackground:"#585b70",black:"#45475a",red:"#f38ba8",green:"#a6e3a1",yellow:"#f9e2af",blue:"#89b4fa",magenta:"#f5c2e7",cyan:"#94e2d5",white:"#bac2de",brightBlack:"#585b70",brightRed:"#f38ba8",brightGreen:"#a6e3a1",brightYellow:"#f9e2af",brightBlue:"#89b4fa",brightMagenta:"#f5c2e7",brightCyan:"#94e2d5",brightWhite:"#a6adc8"},allowProposedApi:!0}),Z=new AE;V.loadAddon(Z),V.loadAddon(new UE),V.open(U),Z.fit();const le=window.location.protocol==="https:"?"wss:":"ws:",te=window.location.host;let T=`${le}//${te}/api/terminal?cols=${V.cols}&rows=${V.rows}`;A&&(T+=`&sessionId=${encodeURIComponent(A)}`),j&&(T+=`&cwd=${encodeURIComponent(j)}`);const W=new WebSocket(T);W.onopen=()=>{A||V.writeln(`\x1B[32m Connected to terminal\x1B[0m\r
`),r(K=>K.map(F=>F.id===P?{...F,connected:!0}:F))},W.onmessage=K=>{try{const F=JSON.parse(K.data);switch(F.type){case"output":V.write(F.data),F.replayed&&V.writeln(`\r
\x1B[32m Reconnected (output restored)\x1B[0m\r
`);break;case"session":r(Y=>Y.map(O=>O.id===P?{...O,title:F.cwd.split(/[/\\]/).pop()||F.shell,ptySessionId:F.sessionId}:O)),F.reconnected&&V.writeln("\x1B[32m Session reconnected\x1B[0m");break;case"exit":V.writeln(`\r
\x1B[33m Process exited with code ${F.exitCode}\x1B[0m`),r(Y=>Y.map(O=>O.id===P?{...O,ptySessionId:void 0}:O));break}}catch{V.write(K.data)}},W.onclose=()=>{V.writeln(`\r
\x1B[31m Disconnected from terminal\x1B[0m`),r(K=>K.map(F=>F.id===P?{...F,connected:!1}:F))},W.onerror=()=>{V.writeln(`\r
\x1B[31m Connection error\x1B[0m`)},V.onData(K=>{W.readyState===WebSocket.OPEN&&W.send(JSON.stringify({type:"input",data:K}))}),V.onResize(({cols:K,rows:F})=>{W.readyState===WebSocket.OPEN&&W.send(JSON.stringify({type:"resize",cols:K,rows:F}))}),d.current.set(P,{terminal:V,ws:W,fitAddon:Z}),V.focus()},[]),w=C.useCallback(P=>{const j=d.current.get(P);j&&(j.ws.close(),j.terminal.dispose(),d.current.delete(P)),r(A=>{const U=A.filter(V=>V.id!==P);return n===P&&U.length>0?o(U[U.length-1].id):U.length===0&&o(null),U})},[n]),E=C.useCallback(P=>{const j=t.find(U=>U.id===P),A=d.current.get(P);A&&j&&(A.ws.close(),A.terminal.clear(),d.current.delete(P),setTimeout(()=>S(P,j.cwd,j.ptySessionId),100))},[t,S]);C.useEffect(()=>{const P=()=>{if(n){const j=d.current.get(n);j&&j.fitAddon.fit()}};return window.addEventListener("resize",P),()=>window.removeEventListener("resize",P)},[n]),C.useEffect(()=>{if(n){const P=d.current.get(n);P&&setTimeout(()=>{P.fitAddon.fit(),P.terminal.focus()},0)}},[n]),C.useEffect(()=>{h&&t.length===0&&b()},[h,t.length,b]);const M=t.find(P=>P.id===n);return f.jsxs("div",{className:"h-full flex flex-col",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:e("shell.title")}),f.jsx("p",{className:"text-slate-500",children:e("shell.subtitle")})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ks,{size:18,className:"text-slate-500"}),f.jsx("input",{type:"text",value:l,onChange:P=>c(P.target.value),placeholder:e("shell.workingDirectoryPlaceholder"),className:"w-64 px-3 py-1.5 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),f.jsxs("button",{onClick:()=>b(),className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[f.jsx(Vs,{size:18}),e("shell.newTab")]})]})]}),t.length>0&&f.jsx("div",{className:"flex items-center gap-1 bg-slate-800 rounded-t-lg px-2 pt-2",children:t.map(P=>f.jsxs("div",{onClick:()=>o(P.id),className:`flex items-center gap-2 px-3 py-1.5 rounded-t-lg cursor-pointer transition-colors ${n===P.id?"bg-[#1e1e2e] text-white":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:[f.jsx(Xs,{size:14}),f.jsx("span",{className:"text-sm max-w-32 truncate",children:P.title}),f.jsx("span",{className:`w-2 h-2 rounded-full ${P.connected?"bg-green-500":"bg-red-500"}`,title:P.connected?"Connected":"Disconnected"}),!P.connected&&f.jsx("button",{onClick:j=>{j.stopPropagation(),E(P.id)},className:"p-0.5 hover:bg-slate-600 rounded",title:"Reconnect",children:f.jsx(Ti,{size:12})}),f.jsx("button",{onClick:j=>{j.stopPropagation(),w(P.id)},className:"p-0.5 hover:bg-slate-600 rounded",children:f.jsx(al,{size:14})})]},P.id))}),f.jsx("div",{ref:v,className:"flex-1 bg-[#1e1e2e] rounded-b-lg overflow-hidden",style:{minHeight:"400px"},children:t.length===0?f.jsx("div",{className:"h-full flex items-center justify-center text-slate-500",children:f.jsxs("div",{className:"text-center",children:[f.jsx(Xs,{size:48,className:"mx-auto mb-4 opacity-50"}),f.jsx("p",{children:e("shell.noTerminals")}),f.jsx("button",{onClick:()=>b(),className:"mt-4 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:e("shell.newTab")})]})}):t.map(P=>f.jsx("div",{id:`terminal-${P.id}`,className:`h-full w-full p-2 ${n===P.id?"":"hidden"}`},P.id))}),f.jsxs("p",{className:"mt-4 text-sm text-slate-500",children:[e("shell.tip"),M?.ptySessionId&&f.jsxs("span",{className:"ml-2 text-xs text-slate-400",children:["(Session: ",M.ptySessionId.slice(0,12),"...)"]})]})]})}const{slice:VE,forEach:qE}=[];function QE(e){return qE.call(VE.call(arguments,1),t=>{if(t)for(const r in t)e[r]===void 0&&(e[r]=t[r])}),e}function YE(e){return typeof e!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(r=>r.test(e))}const Vg=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,GE=function(e,t){const n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},o=encodeURIComponent(t);let l=`${e}=${o}`;if(n.maxAge>0){const c=n.maxAge-0;if(Number.isNaN(c))throw new Error("maxAge should be a Number");l+=`; Max-Age=${Math.floor(c)}`}if(n.domain){if(!Vg.test(n.domain))throw new TypeError("option domain is invalid");l+=`; Domain=${n.domain}`}if(n.path){if(!Vg.test(n.path))throw new TypeError("option path is invalid");l+=`; Path=${n.path}`}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");l+=`; Expires=${n.expires.toUTCString()}`}if(n.httpOnly&&(l+="; HttpOnly"),n.secure&&(l+="; Secure"),n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"strict":l+="; SameSite=Strict";break;case"none":l+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(l+="; Partitioned"),l},qg={create(e,t,r,n){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(o.expires=new Date,o.expires.setTime(o.expires.getTime()+r*60*1e3)),n&&(o.domain=n),document.cookie=GE(e,t,o)},read(e){const t=`${e}=`,r=document.cookie.split(";");for(let n=0;n<r.length;n++){let o=r[n];for(;o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(t)===0)return o.substring(t.length,o.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var XE={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return qg.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:r,cookieMinutes:n,cookieDomain:o,cookieOptions:l}=t;r&&typeof document<"u"&&qg.create(r,e,n,o,l)}},JE={name:"querystring",lookup(e){let{lookupQuerystring:t}=e,r;if(typeof window<"u"){let{search:n}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));const l=n.substring(1).split("&");for(let c=0;c<l.length;c++){const h=l[c].indexOf("=");h>0&&l[c].substring(0,h)===t&&(r=l[c].substring(h+1))}}return r}},ZE={name:"hash",lookup(e){let{lookupHash:t,lookupFromHashIndex:r}=e,n;if(typeof window<"u"){const{hash:o}=window.location;if(o&&o.length>2){const l=o.substring(1);if(t){const c=l.split("&");for(let h=0;h<c.length;h++){const m=c[h].indexOf("=");m>0&&c[h].substring(0,m)===t&&(n=c[h].substring(m+1))}}if(n)return n;if(!n&&r>-1){const c=o.match(/\/([a-zA-Z-]*)/g);return Array.isArray(c)?c[typeof r=="number"?r:0]?.replace("/",""):void 0}}}return n}};let Li=null;const Qg=()=>{if(Li!==null)return Li;try{if(Li=typeof window<"u"&&window.localStorage!==null,!Li)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Li=!1}return Li};var eN={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&Qg())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:r}=t;r&&Qg()&&window.localStorage.setItem(r,e)}};let ji=null;const Yg=()=>{if(ji!==null)return ji;try{if(ji=typeof window<"u"&&window.sessionStorage!==null,!ji)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{ji=!1}return ji};var tN={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&Yg())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:r}=t;r&&Yg()&&window.sessionStorage.setItem(r,e)}},rN={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:r,userLanguage:n,language:o}=navigator;if(r)for(let l=0;l<r.length;l++)t.push(r[l]);n&&t.push(n),o&&t.push(o)}return t.length>0?t:void 0}},sN={name:"htmlTag",lookup(e){let{htmlTag:t}=e,r;const n=t||(typeof document<"u"?document.documentElement:null);return n&&typeof n.getAttribute=="function"&&(r=n.getAttribute("lang")),r}},iN={name:"path",lookup(e){let{lookupFromPathIndex:t}=e;if(typeof window>"u")return;const r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(r)?r[typeof t=="number"?t:0]?.replace("/",""):void 0}},nN={name:"subdomain",lookup(e){let{lookupFromSubdomainIndex:t}=e;const r=typeof t=="number"?t+1:1,n=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(n)return n[r]}};let Jv=!1;try{document.cookie,Jv=!0}catch{}const Zv=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Jv||Zv.splice(1,1);const oN=()=>({order:Zv,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e});class e0{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,r)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=QE(r,this.options||{},oN()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=o=>o.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(XE),this.addDetector(JE),this.addDetector(eN),this.addDetector(tN),this.addDetector(rN),this.addDetector(sN),this.addDetector(iN),this.addDetector(nN),this.addDetector(ZE)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,r=[];return t.forEach(n=>{if(this.detectors[n]){let o=this.detectors[n].lookup(this.options);o&&typeof o=="string"&&(o=[o]),o&&(r=r.concat(o))}}),r=r.filter(n=>n!=null&&!YE(n)).map(n=>this.options.convertDetectedLanguage(n)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?r:r.length>0?r[0]:null}cacheUserLanguage(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||r.forEach(n=>{this.detectors[n]&&this.detectors[n].cacheUserLanguage(t,this.options)}))}}e0.type="languageDetector";const aN={loading:"Loading...",error:"Error",save:"Save",cancel:"Cancel",delete:"Delete",create:"Create",edit:"Edit",close:"Close",confirm:"Confirm",back:"Back",clear:"Clear",execute:"Execute",refresh:"Refresh",start:"Start",stop:"Stop",pause:"Pause",resume:"Resume",go:"Go"},lN={projects:"Projects",agents:"Agents",executor:"Executor",shell:"Shell",settings:"Settings"},cN={title:"Projects",subtitle:"Manage AI agent projects",newProject:"New Project",noProjects:"No projects yet. Create one to get started!",untitled:"Untitled Project",noDescription:"No description",name:"Project Name",namePlaceholder:"Enter project name...",goal:"Goal",goalPlaceholder:"Describe what you want to accomplish...",repoPath:"Repository Path",repoPathPlaceholder:"/path/to/your/project",browse:"Browse",runs:"Runs",noRuns:"No runs yet",startRun:"Start Run",specs:"Specifications",specsMeta:"Meta & Constraints",specsOverview:"Overview",specsGlossary:"Glossary",specsRequirements:"Specification",specsInterfaces:"Implementation Status",specsDecisions:"Decisions",specsEmpty:"No specifications yet",specsListHint:"One per line",specsMetaPlaceholder:"Constraints, scope, non-goals...",specsOverviewPlaceholder:"Intent, background, goals, success criteria...",specsGlossaryPlaceholder:"Term: definition",specsRequirementsPlaceholder:"Specification details...",specsInterfacesPlaceholder:"Implementation status, progress, gaps...",specsDecisionsPlaceholder:"- Decision and rationale",status:{planning:"Planning",planned:"Planned",pending:"Pending",running:"Running",verifying:"Verifying",debugging:"Debugging",completed:"Completed",failed:"Failed",needs_input:"Needs Input"},detail:{title:"Project Details",backToProjects:"Back to projects",viewReport:"View Report",hideReport:"Hide Report",finalReport:"Final Report",information:"Information",created:"Created",updated:"Updated",verification:"Verification",verificationPassed:"Verification Passed",verificationFailed:"Verification Failed"},logs:{title:"Logs",noLogs:"No logs yet...",autoScroll:"Auto-scroll"},plan:{title:"Plan",subtitle:"Plan tasks before execution",noPlan:"No plan yet",createPlan:"Create Plan",editPlan:"Edit Plan",approvePlan:"Approve Plan",rejectPlan:"Reject Plan",regeneratePlan:"Regenerate Plan",tasks:"Tasks",addTask:"Add Task",taskName:"Task Name",taskDescription:"Task Description",estimatedEffort:"Estimated Effort",dependencies:"Dependencies",priority:"Priority",high:"High",medium:"Medium",low:"Low",status:{draft:"Draft",pending_approval:"Pending Approval",approved:"Approved",rejected:"Rejected"},aiGenerate:"Generate Plan with AI",generating:"Generating plan..."},execution:{title:"Execution",startExecution:"Start Execution",stopExecution:"Stop Execution",executionHistory:"Execution History"},specsCount:"{{count}} items",specsBulkEdit:"Bulk edit",specsInlineEdit:"Inline edit",specsExpand:"Expand",specsCollapse:"Collapse",specsSpecification:"Specification",specsImplementationStatus:"Implementation Status",specsMarkdownHint:"Markdown supported",specsFiles:"Files",specsAddFile:"Add file",specsAddFolder:"Add folder",specsNoFiles:"No files yet",specsSelectFile:"Select a file to preview",specsFolderSelected:"Folder selected",specsRename:"Rename",specsNamePlaceholder:"Name...",specsFileNamePlaceholder:"new-file.md",specsFolderNamePlaceholder:"new-folder",specsSpecificationPlaceholder:"Specification details, scope, constraints...",specsImplementationStatusPlaceholder:"Implementation status, progress, gaps..."},uN={title:"Terminal",subtitle:"Full-featured terminal emulator",workingDirectory:"Working Directory (optional)",workingDirectoryPlaceholder:"/path/to/directory",commandPlaceholder:"Enter command...",noCommands:"Enter a command below to get started",tip:"Tip: Full terminal support with tab completion, colors, and interactive programs",newTab:"New Tab",noTerminals:"No terminal sessions. Click the button below to start one."},hN={title:"Settings",subtitle:"Configure Supervisor Agent",backendStatus:"Backend Status",status:"Status",version:"Version",apiUsage:"API Usage",premiumRequests:"Premium Requests",copilotNotConfigured:"Copilot API not configured",configuration:"Configuration",defaultRepoPath:"Default Repository Path",apiBaseUrl:"API Base URL",copilotApiUrl:"Copilot API URL",maxDebugIterations:"Max Debug Iterations",saveSettings:"Save Settings",language:"Language",selectLanguage:"Select Language"},dN={title:"Select Folder",pathPlaceholder:"Enter path...",root:"Root",up:"Go up",empty:"No folders found",noSelection:"No selection",selectFolder:"Select a folder",select:"Select",retry:"Go to root"},fN={settings:"Settings",repoPath:"Repository Path",repoPathPlaceholder:"/path/to/your/project",agentModel:"Agent Model",maxIterations:"Max Iterations",welcome:"Welcome to your project",welcomeDescription:"What would you like to accomplish? I can help with fixing bugs, adding features, running tests, and more.",inputPlaceholder:"Type a message...",inputHint:"Press Enter to send, Shift+Enter for new line",thinking:"Thinking...",readyToHelp:"Ready to help. What would you like to do?",suggestions:{runTests:"Run tests",fixBug:"Fix a bug",addFeature:"Add a feature"}},pN={common:aN,nav:lN,projects:cN,shell:uN,settings:hN,fileBrowser:dN,chat:fN},mN={loading:"...",error:"",save:"",cancel:"",delete:"",create:"",edit:"",close:"",confirm:"",back:"",clear:"",execute:"",refresh:"",start:"",stop:"",pause:"",resume:"",go:""},gN={projects:"",agents:"",executor:"",shell:"",settings:""},_N={title:"",subtitle:"AI ",newProject:"",noProjects:"",createFirst:"",untitled:"",noDescription:"",name:"",namePlaceholder:"...",description:"",descriptionPlaceholder:"",goal:"",goalPlaceholder:"...",repoPath:"",repoPathPlaceholder:"/path/to/your/project",browse:"",runs:"",noRuns:"",startRun:"",specs:"",specsMeta:"",specsOverview:"",specsGlossary:"",specsRequirements:"",specsInterfaces:"",specsDecisions:"",specsEmpty:"",specsListHint:"11",specsMetaPlaceholder:"...",specsOverviewPlaceholder:"/...",specsGlossaryPlaceholder:": ",specsRequirementsPlaceholder:"...",specsInterfacesPlaceholder:"...",specsDecisionsPlaceholder:"- ",specsCount:"{{count}} ",specsBulkEdit:"",specsInlineEdit:"",specsExpand:"",specsCollapse:"",requirements:"",acceptanceCriteria:"",notes:"",status:{planning:"",planned:"",pending:"",running:"",verifying:"",debugging:"",completed:"",failed:"",needs_input:""},detail:{title:"",backToProjects:"",viewReport:"",hideReport:"",finalReport:"",information:"",created:"",updated:"",verification:"",verificationPassed:"",verificationFailed:""},logs:{title:"",noLogs:"...",autoScroll:""},plan:{title:"",subtitle:"",noPlan:"",createPlan:"",editPlan:"",approvePlan:"",rejectPlan:"",regeneratePlan:"",tasks:"",addTask:"",taskName:"",taskDescription:"",estimatedEffort:"",dependencies:"",priority:"",high:"",medium:"",low:"",status:{draft:"",pending_approval:"",approved:"",rejected:""},aiGenerate:"AI ",generating:"..."},execution:{title:"",startExecution:"",stopExecution:"",executionHistory:""},specsSpecification:"",specsImplementationStatus:"",specsMarkdownHint:"",specsFiles:"",specsAddFile:"",specsAddFolder:"",specsNoFiles:"",specsSelectFile:"",specsFolderSelected:"",specsRename:"",specsNamePlaceholder:"...",specsFileNamePlaceholder:"new-file.md",specsFolderNamePlaceholder:"new-folder",specsSpecificationPlaceholder:"...",specsImplementationStatusPlaceholder:"..."},vN={title:"",subtitle:"",workingDirectory:"",workingDirectoryPlaceholder:"/path/to/directory",commandPlaceholder:"...",noCommands:"",tip:": ",newTab:"",noTerminals:""},yN={title:"",subtitle:"Supervisor Agent ",backendStatus:"",status:"",version:"",apiUsage:"API ",premiumRequests:"",copilotNotConfigured:"Copilot API ",configuration:"",defaultRepoPath:"",apiBaseUrl:"API  URL",copilotApiUrl:"Copilot API URL",maxDebugIterations:"",saveSettings:"",language:"",selectLanguage:""},xN={title:"",pathPlaceholder:"...",root:"",up:"",empty:"",noSelection:"",selectFolder:"",select:"",retry:""},SN={settings:"",repoPath:"",repoPathPlaceholder:"/path/to/your/project",agentModel:"",maxIterations:"",welcome:"",welcomeDescription:"",inputPlaceholder:"...",inputHint:"Enter Shift+Enter ",thinking:"...",readyToHelp:"",suggestions:{runTests:"",fixBug:"",addFeature:""}},wN={common:mN,nav:gN,projects:_N,shell:vN,settings:yN,fileBrowser:xN,chat:SN},bN={en:{translation:pN},ja:{translation:wN}};Ot.use(e0).use(Yw).init({resources:bN,fallbackLng:"en",supportedLngs:["en","ja"],interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator","htmlTag"],caches:["localStorage"]}});const CN=[{code:"en",name:"English",nativeName:"English"},{code:"ja",name:"Japanese",nativeName:""}];function kN(){const{t:e,i18n:t}=$i(),r=ei(),[n,o]=C.useState(""),[l,c]=C.useState(""),[h,m]=C.useState(!1),[d,v]=C.useState(!1),[_,x]=C.useState(""),[b,S]=C.useState(!1),{data:w,refetch:E}=yt({queryKey:["health"],queryFn:U_}),{data:M,refetch:P}=yt({queryKey:["settings"],queryFn:K_}),{data:j}=yt({queryKey:["copilotStatus"],queryFn:q_,refetchInterval:5e3}),A=hr({mutationFn:V_,onSuccess:()=>{r.invalidateQueries({queryKey:["settings"]}),r.invalidateQueries({queryKey:["copilotStatus"]}),o(""),c(""),x("")}}),U=()=>{const W={};n&&(W.openai_api_key=n),l&&(W.anthropic_api_key=l),Object.keys(W).length>0&&A.mutate(W)},V=()=>{_&&A.mutate({github_token:_})},Z=()=>{A.mutate({openai_api_key:""})},le=()=>{A.mutate({anthropic_api_key:""})},te=()=>{A.mutate({github_token:""})},T=W=>{t.changeLanguage(W)};return f.jsxs("div",{className:"px-4 sm:px-6 py-4 sm:py-6",children:[f.jsxs("div",{className:"mb-4 sm:mb-6",children:[f.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-slate-800",children:e("settings.title")}),f.jsx("p",{className:"text-slate-500 text-sm sm:text-base",children:e("settings.subtitle")})]}),f.jsxs("div",{className:"grid gap-4 sm:gap-6 lg:grid-cols-2",children:[f.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4 sm:p-6 lg:col-span-2",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("h2",{className:"text-base sm:text-lg font-semibold text-slate-800 flex items-center gap-2",children:[f.jsx(S1,{size:20}),"API Keys"]}),f.jsx("button",{onClick:()=>P(),className:"p-2.5 sm:p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 active:bg-slate-200 rounded-lg transition-colors",children:f.jsx(Ti,{size:16})})]}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Configure API keys for AI services. Keys are stored securely and take precedence over environment variables."}),f.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2",children:[f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:["OpenAI API Key",M?.openai_api_key_set&&f.jsxs("span",{className:"ml-2 text-xs text-green-600 font-normal",children:[f.jsx(Oi,{size:12,className:"inline mr-1"}),"Configured (",M.openai_api_key,")"]})]}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:h?"text":"password",value:n,onChange:W=>o(W.target.value),placeholder:M?.openai_api_key_set?"Enter new key to update":"sk-...",className:"w-full px-3 py-3 sm:py-2 pr-20 text-base border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),f.jsx("button",{type:"button",onClick:()=>m(!h),className:"absolute right-10 top-1/2 -translate-y-1/2 p-1 text-slate-400 hover:text-slate-600 active:text-slate-800",children:h?f.jsx(_u,{size:18}):f.jsx(Ma,{size:18})}),M?.openai_api_key_set&&f.jsx("button",{type:"button",onClick:Z,className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-red-400 hover:text-red-600 active:text-red-800 text-xs",children:"Clear"})]})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:["Anthropic API Key",M?.anthropic_api_key_set&&f.jsxs("span",{className:"ml-2 text-xs text-green-600 font-normal",children:[f.jsx(Oi,{size:12,className:"inline mr-1"}),"Configured (",M.anthropic_api_key,")"]})]}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:d?"text":"password",value:l,onChange:W=>c(W.target.value),placeholder:M?.anthropic_api_key_set?"Enter new key to update":"sk-ant-...",className:"w-full px-3 py-3 sm:py-2 pr-20 text-base border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),f.jsx("button",{type:"button",onClick:()=>v(!d),className:"absolute right-10 top-1/2 -translate-y-1/2 p-1 text-slate-400 hover:text-slate-600 active:text-slate-800",children:d?f.jsx(_u,{size:18}):f.jsx(Ma,{size:18})}),M?.anthropic_api_key_set&&f.jsx("button",{type:"button",onClick:le,className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-red-400 hover:text-red-600 active:text-red-800 text-xs",children:"Clear"})]})]})]}),f.jsx("div",{className:"mt-4",children:f.jsxs("button",{onClick:U,disabled:!n&&!l||A.isPending,className:"w-full sm:w-auto px-4 py-3 sm:py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 active:bg-primary-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[A.isPending&&f.jsx(Ct,{size:16,className:"animate-spin"}),"Save API Keys"]})})]}),f.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4 sm:p-6 lg:col-span-2",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("h2",{className:"text-base sm:text-lg font-semibold text-slate-800 flex items-center gap-2",children:[f.jsx(_1,{size:20}),"GitHub Copilot API"]}),M?.github_token_set&&f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx("span",{className:`w-2 h-2 rounded-full ${j?.running&&j?.healthy?"bg-green-500":j?.running?"bg-yellow-500 animate-pulse":"bg-red-500"}`}),f.jsx("span",{className:"text-slate-500",children:j?.running&&j?.healthy?"Running":j?.running?"Starting...":"Not running"})]})]}),j?.error&&M?.github_token_set&&f.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:j.error}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Use GitHub Copilot as an OpenAI-compatible API proxy. Set your GitHub token below and the proxy will start automatically."}),f.jsxs("div",{className:"max-w-md",children:[f.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["GitHub Token",M?.github_token_set&&f.jsxs("span",{className:"ml-2 text-xs text-green-600 font-normal",children:[f.jsx(Oi,{size:12,className:"inline mr-1"}),"Configured (",M.github_token,")"]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("div",{className:"relative flex-1",children:[f.jsx("input",{type:b?"text":"password",value:_,onChange:W=>x(W.target.value),placeholder:M?.github_token_set?"Enter new token to update":"ghp_...",className:"w-full px-3 py-2 pr-10 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),f.jsx("button",{type:"button",onClick:()=>S(!b),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:b?f.jsx(_u,{size:18}):f.jsx(Ma,{size:18})})]}),f.jsxs("button",{onClick:V,disabled:!_||A.isPending,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[A.isPending&&f.jsx(Ct,{size:16,className:"animate-spin"}),"Save"]}),M?.github_token_set&&f.jsx("button",{onClick:te,className:"px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:"Clear"})]}),f.jsxs("p",{className:"text-xs text-slate-400 mt-2",children:["Get your token from"," ",f.jsx("a",{href:"https://github.com/settings/tokens",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:"GitHub Settings  Tokens"})]})]})]}),f.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4 sm:p-6",children:[f.jsxs("h2",{className:"text-base sm:text-lg font-semibold text-slate-800 flex items-center gap-2 mb-4",children:[f.jsx(v1,{size:20}),e("settings.language")]}),f.jsx("div",{className:"space-y-2",children:CN.map(W=>f.jsxs("button",{onClick:()=>T(W.code),className:`w-full text-left px-4 py-3.5 sm:py-3 rounded-lg border transition-colors active:scale-[0.98] ${t.language===W.code?"border-primary-500 bg-primary-50 text-primary-700":"border-slate-200 hover:bg-slate-50 active:bg-slate-100"}`,children:[f.jsx("span",{className:"font-medium",children:W.nativeName}),f.jsxs("span",{className:"text-slate-500 ml-2",children:["(",W.name,")"]})]},W.code))})]}),f.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4 sm:p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("h2",{className:"text-base sm:text-lg font-semibold text-slate-800 flex items-center gap-2",children:[f.jsx(k1,{size:20}),e("settings.backendStatus")]}),f.jsx("button",{onClick:()=>E(),className:"p-2.5 sm:p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 active:bg-slate-200 rounded-lg transition-colors",children:f.jsx(Ti,{size:16})})]}),f.jsxs("dl",{className:"space-y-3",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("dt",{className:"text-slate-500",children:e("settings.status")}),f.jsxs("dd",{className:"flex items-center gap-2",children:[f.jsx("span",{className:`w-2 h-2 rounded-full ${w?.status==="ok"?"bg-green-500":"bg-red-500"}`}),w?.status??"Unknown"]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("dt",{className:"text-slate-500",children:e("settings.version")}),f.jsx("dd",{className:"font-mono text-sm",children:w?.version??"-"})]})]})]}),f.jsx(EN,{})]})]})}function EN(){const{data:e,isLoading:t,refetch:r}=yt({queryKey:["applications"],queryFn:U1,refetchInterval:5e3}),n=async l=>{try{await K1(l)}catch(c){console.error("Failed to focus application:",c)}},o=e?.applications||[];return f.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4 sm:p-6 lg:col-span-2",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("h2",{className:"text-base sm:text-lg font-semibold text-slate-800 flex items-center gap-2",children:[f.jsx(l1,{size:20}),""]}),f.jsx("button",{onClick:()=>r(),className:"p-2.5 sm:p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 active:bg-slate-200 rounded-lg transition-colors",children:f.jsx(Ti,{size:16,className:t?"animate-spin":""})})]}),t&&o.length===0?f.jsx("div",{className:"flex items-center justify-center py-8 text-slate-400",children:f.jsx(Ct,{size:24,className:"animate-spin"})}):o.length===0?f.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:""}):f.jsx("div",{className:"space-y-1 max-h-[300px] overflow-y-auto",children:o.map(l=>f.jsxs("div",{className:"flex items-center justify-between px-3 py-2 hover:bg-slate-50 rounded-lg group",children:[f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"font-medium text-sm text-slate-700 truncate",children:l.title||l.name}),f.jsxs("span",{className:"text-xs text-slate-400",children:["(",l.name,")"]})]}),l.path&&f.jsx("div",{className:"text-xs text-slate-400 truncate",children:l.path})]}),f.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[f.jsxs("span",{className:"text-xs text-slate-400",children:["PID: ",l.pid]}),f.jsx("button",{onClick:()=>n(l.pid),className:"p-1.5 text-slate-400 hover:text-primary-600 hover:bg-primary-50 rounded transition-colors",title:"",children:f.jsx(p1,{size:14})})]})]},l.pid))})]})}function NN(){return f.jsxs(Sm,{children:[f.jsx(Sr,{path:"/projects/:projectId",element:f.jsx(dC,{})}),f.jsx(Sr,{path:"*",element:f.jsx(X1,{children:f.jsxs(Sm,{children:[f.jsx(Sr,{path:"/",element:f.jsx(hu,{to:"/projects",replace:!0})}),f.jsx(Sr,{path:"/projects",element:f.jsx(eb,{})}),f.jsx(Sr,{path:"/agents",element:f.jsx(CC,{})}),f.jsx(Sr,{path:"/executor",element:f.jsx(EC,{})}),f.jsx(Sr,{path:"/runs",element:f.jsx(hu,{to:"/projects",replace:!0})}),f.jsx(Sr,{path:"/runs/:runId",element:f.jsx(hu,{to:"/projects/:runId",replace:!0})}),f.jsx(Sr,{path:"/shell",element:f.jsx(KE,{})}),f.jsx(Sr,{path:"/settings",element:f.jsx(kN,{})})]})})})]})}const PN=new Lx({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}});ox.createRoot(document.getElementById("root")).render(f.jsx(Us.StrictMode,{children:f.jsx(jx,{client:PN,children:f.jsx(cw,{children:f.jsx(NN,{})})})}));
