(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();function Xg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var eu={exports:{}},bn={},tu={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zp;function Qy(){if(Zp)return Le;Zp=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.iterator;function y(P){return P===null||typeof P!="object"?null:(P=_&&P[_]||P["@@iterator"],typeof P=="function"?P:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,x={};function k(P,B,Y){this.props=P,this.context=B,this.refs=x,this.updater=Y||b}k.prototype.isReactComponent={},k.prototype.setState=function(P,B){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,B,"setState")},k.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function D(){}D.prototype=k.prototype;function j(P,B,Y){this.props=P,this.context=B,this.refs=x,this.updater=Y||b}var $=j.prototype=new D;$.constructor=j,w($,k.prototype),$.isPureReactComponent=!0;var F=Array.isArray,H=Object.prototype.hasOwnProperty,J={current:null},Z={key:!0,ref:!0,__self:!0,__source:!0};function le(P,B,Y){var ae,Se={},se=null,pe=null;if(B!=null)for(ae in B.ref!==void 0&&(pe=B.ref),B.key!==void 0&&(se=""+B.key),B)H.call(B,ae)&&!Z.hasOwnProperty(ae)&&(Se[ae]=B[ae]);var ge=arguments.length-2;if(ge===1)Se.children=Y;else if(1<ge){for(var _e=Array(ge),be=0;be<ge;be++)_e[be]=arguments[be+2];Se.children=_e}if(P&&P.defaultProps)for(ae in ge=P.defaultProps,ge)Se[ae]===void 0&&(Se[ae]=ge[ae]);return{$$typeof:e,type:P,key:se,ref:pe,props:Se,_owner:J.current}}function ie(P,B){return{$$typeof:e,type:P.type,key:B,ref:P.ref,props:P.props,_owner:P._owner}}function I(P){return typeof P=="object"&&P!==null&&P.$$typeof===e}function K(P){var B={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(Y){return B[Y]})}var X=/\/+/g;function z(P,B){return typeof P=="object"&&P!==null&&P.key!=null?K(""+P.key):B.toString(36)}function V(P,B,Y,ae,Se){var se=typeof P;(se==="undefined"||se==="boolean")&&(P=null);var pe=!1;if(P===null)pe=!0;else switch(se){case"string":case"number":pe=!0;break;case"object":switch(P.$$typeof){case e:case t:pe=!0}}if(pe)return pe=P,Se=Se(pe),P=ae===""?"."+z(pe,0):ae,F(Se)?(Y="",P!=null&&(Y=P.replace(X,"$&/")+"/"),V(Se,B,Y,"",function(be){return be})):Se!=null&&(I(Se)&&(Se=ie(Se,Y+(!Se.key||pe&&pe.key===Se.key?"":(""+Se.key).replace(X,"$&/")+"/")+P)),B.push(Se)),1;if(pe=0,ae=ae===""?".":ae+":",F(P))for(var ge=0;ge<P.length;ge++){se=P[ge];var _e=ae+z(se,ge);pe+=V(se,B,Y,_e,Se)}else if(_e=y(P),typeof _e=="function")for(P=_e.call(P),ge=0;!(se=P.next()).done;)se=se.value,_e=ae+z(se,ge++),pe+=V(se,B,Y,_e,Se);else if(se==="object")throw B=String(P),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return pe}function W(P,B,Y){if(P==null)return P;var ae=[],Se=0;return V(P,ae,"","",function(se){return B.call(Y,se,Se++)}),ae}function M(P){if(P._status===-1){var B=P._result;B=B(),B.then(function(Y){(P._status===0||P._status===-1)&&(P._status=1,P._result=Y)},function(Y){(P._status===0||P._status===-1)&&(P._status=2,P._result=Y)}),P._status===-1&&(P._status=0,P._result=B)}if(P._status===1)return P._result.default;throw P._result}var U={current:null},L={transition:null},G={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:L,ReactCurrentOwner:J};function q(){throw Error("act(...) is not supported in production builds of React.")}return Le.Children={map:W,forEach:function(P,B,Y){W(P,function(){B.apply(this,arguments)},Y)},count:function(P){var B=0;return W(P,function(){B++}),B},toArray:function(P){return W(P,function(B){return B})||[]},only:function(P){if(!I(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Le.Component=k,Le.Fragment=r,Le.Profiler=o,Le.PureComponent=j,Le.StrictMode=n,Le.Suspense=p,Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,Le.act=q,Le.cloneElement=function(P,B,Y){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var ae=w({},P.props),Se=P.key,se=P.ref,pe=P._owner;if(B!=null){if(B.ref!==void 0&&(se=B.ref,pe=J.current),B.key!==void 0&&(Se=""+B.key),P.type&&P.type.defaultProps)var ge=P.type.defaultProps;for(_e in B)H.call(B,_e)&&!Z.hasOwnProperty(_e)&&(ae[_e]=B[_e]===void 0&&ge!==void 0?ge[_e]:B[_e])}var _e=arguments.length-2;if(_e===1)ae.children=Y;else if(1<_e){ge=Array(_e);for(var be=0;be<_e;be++)ge[be]=arguments[be+2];ae.children=ge}return{$$typeof:e,type:P.type,key:Se,ref:se,props:ae,_owner:pe}},Le.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:l,_context:P},P.Consumer=P},Le.createElement=le,Le.createFactory=function(P){var B=le.bind(null,P);return B.type=P,B},Le.createRef=function(){return{current:null}},Le.forwardRef=function(P){return{$$typeof:h,render:P}},Le.isValidElement=I,Le.lazy=function(P){return{$$typeof:v,_payload:{_status:-1,_result:P},_init:M}},Le.memo=function(P,B){return{$$typeof:d,type:P,compare:B===void 0?null:B}},Le.startTransition=function(P){var B=L.transition;L.transition={};try{P()}finally{L.transition=B}},Le.unstable_act=q,Le.useCallback=function(P,B){return U.current.useCallback(P,B)},Le.useContext=function(P){return U.current.useContext(P)},Le.useDebugValue=function(){},Le.useDeferredValue=function(P){return U.current.useDeferredValue(P)},Le.useEffect=function(P,B){return U.current.useEffect(P,B)},Le.useId=function(){return U.current.useId()},Le.useImperativeHandle=function(P,B,Y){return U.current.useImperativeHandle(P,B,Y)},Le.useInsertionEffect=function(P,B){return U.current.useInsertionEffect(P,B)},Le.useLayoutEffect=function(P,B){return U.current.useLayoutEffect(P,B)},Le.useMemo=function(P,B){return U.current.useMemo(P,B)},Le.useReducer=function(P,B,Y){return U.current.useReducer(P,B,Y)},Le.useRef=function(P){return U.current.useRef(P)},Le.useState=function(P){return U.current.useState(P)},Le.useSyncExternalStore=function(P,B,Y){return U.current.useSyncExternalStore(P,B,Y)},Le.useTransition=function(){return U.current.useTransition()},Le.version="18.3.1",Le}var em;function Za(){return em||(em=1,tu.exports=Qy()),tu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tm;function Yy(){if(tm)return bn;tm=1;var e=Za(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(h,p,d){var v,_={},y=null,b=null;d!==void 0&&(y=""+d),p.key!==void 0&&(y=""+p.key),p.ref!==void 0&&(b=p.ref);for(v in p)n.call(p,v)&&!l.hasOwnProperty(v)&&(_[v]=p[v]);if(h&&h.defaultProps)for(v in p=h.defaultProps,p)_[v]===void 0&&(_[v]=p[v]);return{$$typeof:t,type:h,key:y,ref:b,props:_,_owner:o.current}}return bn.Fragment=r,bn.jsx=c,bn.jsxs=c,bn}var rm;function Gy(){return rm||(rm=1,eu.exports=Yy()),eu.exports}var g=Gy(),C=Za();const $i=Xg(C);var ga={},ru={exports:{}},$t={},iu={exports:{}},su={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var im;function Xy(){return im||(im=1,(function(e){function t(L,G){var q=L.length;L.push(G);e:for(;0<q;){var P=q-1>>>1,B=L[P];if(0<o(B,G))L[P]=G,L[q]=B,q=P;else break e}}function r(L){return L.length===0?null:L[0]}function n(L){if(L.length===0)return null;var G=L[0],q=L.pop();if(q!==G){L[0]=q;e:for(var P=0,B=L.length,Y=B>>>1;P<Y;){var ae=2*(P+1)-1,Se=L[ae],se=ae+1,pe=L[se];if(0>o(Se,q))se<B&&0>o(pe,Se)?(L[P]=pe,L[se]=q,P=se):(L[P]=Se,L[ae]=q,P=ae);else if(se<B&&0>o(pe,q))L[P]=pe,L[se]=q,P=se;else break e}}return G}function o(L,G){var q=L.sortIndex-G.sortIndex;return q!==0?q:L.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();e.unstable_now=function(){return c.now()-h}}var p=[],d=[],v=1,_=null,y=3,b=!1,w=!1,x=!1,k=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(L){for(var G=r(d);G!==null;){if(G.callback===null)n(d);else if(G.startTime<=L)n(d),G.sortIndex=G.expirationTime,t(p,G);else break;G=r(d)}}function F(L){if(x=!1,$(L),!w)if(r(p)!==null)w=!0,M(H);else{var G=r(d);G!==null&&U(F,G.startTime-L)}}function H(L,G){w=!1,x&&(x=!1,D(le),le=-1),b=!0;var q=y;try{for($(G),_=r(p);_!==null&&(!(_.expirationTime>G)||L&&!K());){var P=_.callback;if(typeof P=="function"){_.callback=null,y=_.priorityLevel;var B=P(_.expirationTime<=G);G=e.unstable_now(),typeof B=="function"?_.callback=B:_===r(p)&&n(p),$(G)}else n(p);_=r(p)}if(_!==null)var Y=!0;else{var ae=r(d);ae!==null&&U(F,ae.startTime-G),Y=!1}return Y}finally{_=null,y=q,b=!1}}var J=!1,Z=null,le=-1,ie=5,I=-1;function K(){return!(e.unstable_now()-I<ie)}function X(){if(Z!==null){var L=e.unstable_now();I=L;var G=!0;try{G=Z(!0,L)}finally{G?z():(J=!1,Z=null)}}else J=!1}var z;if(typeof j=="function")z=function(){j(X)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,W=V.port2;V.port1.onmessage=X,z=function(){W.postMessage(null)}}else z=function(){k(X,0)};function M(L){Z=L,J||(J=!0,z())}function U(L,G){le=k(function(){L(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){w||b||(w=!0,M(H))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return r(p)},e.unstable_next=function(L){switch(y){case 1:case 2:case 3:var G=3;break;default:G=y}var q=y;y=G;try{return L()}finally{y=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,G){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var q=y;y=L;try{return G()}finally{y=q}},e.unstable_scheduleCallback=function(L,G,q){var P=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?P+q:P):q=P,L){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=q+B,L={id:v++,callback:G,priorityLevel:L,startTime:q,expirationTime:B,sortIndex:-1},q>P?(L.sortIndex=q,t(d,L),r(p)===null&&L===r(d)&&(x?(D(le),le=-1):x=!0,U(F,q-P))):(L.sortIndex=B,t(p,L),w||b||(w=!0,M(H))),L},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(L){var G=y;return function(){var q=y;y=G;try{return L.apply(this,arguments)}finally{y=q}}}})(su)),su}var sm;function Jy(){return sm||(sm=1,iu.exports=Xy()),iu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nm;function Zy(){if(nm)return $t;nm=1;var e=Za(),t=Jy();function r(i){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+i,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,o={};function l(i,s){c(i,s),c(i+"Capture",s)}function c(i,s){for(o[i]=s,i=0;i<s.length;i++)n.add(s[i])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},_={};function y(i){return p.call(_,i)?!0:p.call(v,i)?!1:d.test(i)?_[i]=!0:(v[i]=!0,!1)}function b(i,s,a,u){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return u?!1:a!==null?!a.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function w(i,s,a,u){if(s===null||typeof s>"u"||b(i,s,a,u))return!0;if(u)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function x(i,s,a,u,f,m,S){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=u,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=i,this.type=s,this.sanitizeURL=m,this.removeEmptyString=S}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){k[i]=new x(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var s=i[0];k[s]=new x(s,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){k[i]=new x(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){k[i]=new x(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){k[i]=new x(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){k[i]=new x(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){k[i]=new x(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){k[i]=new x(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){k[i]=new x(i,5,!1,i.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function j(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var s=i.replace(D,j);k[s]=new x(s,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var s=i.replace(D,j);k[s]=new x(s,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var s=i.replace(D,j);k[s]=new x(s,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){k[i]=new x(i,1,!1,i.toLowerCase(),null,!1,!1)}),k.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){k[i]=new x(i,1,!1,i.toLowerCase(),null,!0,!0)});function $(i,s,a,u){var f=k.hasOwnProperty(s)?k[s]:null;(f!==null?f.type!==0:u||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(w(s,a,f,u)&&(a=null),u||f===null?y(s)&&(a===null?i.removeAttribute(s):i.setAttribute(s,""+a)):f.mustUseProperty?i[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,u=f.attributeNamespace,a===null?i.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,u?i.setAttributeNS(u,s,a):i.setAttribute(s,a))))}var F=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),J=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),le=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),K=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),U=Symbol.for("react.offscreen"),L=Symbol.iterator;function G(i){return i===null||typeof i!="object"?null:(i=L&&i[L]||i["@@iterator"],typeof i=="function"?i:null)}var q=Object.assign,P;function B(i){if(P===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);P=s&&s[1]||""}return`
`+P+i}var Y=!1;function ae(i,s){if(!i||Y)return"";Y=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(A){var u=A}Reflect.construct(i,[],s)}else{try{s.call()}catch(A){u=A}i.call(s.prototype)}else{try{throw Error()}catch(A){u=A}i()}}catch(A){if(A&&u&&typeof A.stack=="string"){for(var f=A.stack.split(`
`),m=u.stack.split(`
`),S=f.length-1,E=m.length-1;1<=S&&0<=E&&f[S]!==m[E];)E--;for(;1<=S&&0<=E;S--,E--)if(f[S]!==m[E]){if(S!==1||E!==1)do if(S--,E--,0>E||f[S]!==m[E]){var R=`
`+f[S].replace(" at new "," at ");return i.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",i.displayName)),R}while(1<=S&&0<=E);break}}}finally{Y=!1,Error.prepareStackTrace=a}return(i=i?i.displayName||i.name:"")?B(i):""}function Se(i){switch(i.tag){case 5:return B(i.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return i=ae(i.type,!1),i;case 11:return i=ae(i.type.render,!1),i;case 1:return i=ae(i.type,!0),i;default:return""}}function se(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Z:return"Fragment";case J:return"Portal";case ie:return"Profiler";case le:return"StrictMode";case z:return"Suspense";case V:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case K:return(i.displayName||"Context")+".Consumer";case I:return(i._context.displayName||"Context")+".Provider";case X:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case W:return s=i.displayName||null,s!==null?s:se(i.type)||"Memo";case M:s=i._payload,i=i._init;try{return se(i(s))}catch{}}return null}function pe(i){var s=i.type;switch(i.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=s.render,i=i.displayName||i.name||"",s.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return se(s);case 8:return s===le?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function ge(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function _e(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function be(i){var s=_e(i)?"checked":"value",a=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),u=""+i[s];if(!i.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,m=a.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return f.call(this)},set:function(S){u=""+S,m.call(this,S)}}),Object.defineProperty(i,s,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(S){u=""+S},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Pt(i){i._valueTracker||(i._valueTracker=be(i))}function wt(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var a=s.getValue(),u="";return i&&(u=_e(i)?i.checked?"true":"false":i.value),i=u,i!==a?(s.setValue(i),!0):!1}function Ee(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function We(i,s){var a=s.checked;return q({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??i._wrapperState.initialChecked})}function it(i,s){var a=s.defaultValue==null?"":s.defaultValue,u=s.checked!=null?s.checked:s.defaultChecked;a=ge(s.value!=null?s.value:a),i._wrapperState={initialChecked:u,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function od(i,s){s=s.checked,s!=null&&$(i,"checked",s,!1)}function ll(i,s){od(i,s);var a=ge(s.value),u=s.type;if(a!=null)u==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+a):i.value!==""+a&&(i.value=""+a);else if(u==="submit"||u==="reset"){i.removeAttribute("value");return}s.hasOwnProperty("value")?cl(i,s.type,a):s.hasOwnProperty("defaultValue")&&cl(i,s.type,ge(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(i.defaultChecked=!!s.defaultChecked)}function ad(i,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var u=s.type;if(!(u!=="submit"&&u!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+i._wrapperState.initialValue,a||s===i.value||(i.value=s),i.defaultValue=s}a=i.name,a!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,a!==""&&(i.name=a)}function cl(i,s,a){(s!=="number"||Ee(i.ownerDocument)!==i)&&(a==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+a&&(i.defaultValue=""+a))}var Is=Array.isArray;function Gi(i,s,a,u){if(i=i.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<i.length;a++)f=s.hasOwnProperty("$"+i[a].value),i[a].selected!==f&&(i[a].selected=f),f&&u&&(i[a].defaultSelected=!0)}else{for(a=""+ge(a),s=null,f=0;f<i.length;f++){if(i[f].value===a){i[f].selected=!0,u&&(i[f].defaultSelected=!0);return}s!==null||i[f].disabled||(s=i[f])}s!==null&&(s.selected=!0)}}function ul(i,s){if(s.dangerouslySetInnerHTML!=null)throw Error(r(91));return q({},s,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function ld(i,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(r(92));if(Is(a)){if(1<a.length)throw Error(r(93));a=a[0]}s=a}s==null&&(s=""),a=s}i._wrapperState={initialValue:ge(a)}}function cd(i,s){var a=ge(s.value),u=ge(s.defaultValue);a!=null&&(a=""+a,a!==i.value&&(i.value=a),s.defaultValue==null&&i.defaultValue!==a&&(i.defaultValue=a)),u!=null&&(i.defaultValue=""+u)}function ud(i){var s=i.textContent;s===i._wrapperState.initialValue&&s!==""&&s!==null&&(i.value=s)}function hd(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hl(i,s){return i==null||i==="http://www.w3.org/1999/xhtml"?hd(s):i==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var ao,dd=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,u,f){MSApp.execUnsafeLocalFunction(function(){return i(s,a,u,f)})}:i})(function(i,s){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=s;else{for(ao=ao||document.createElement("div"),ao.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=ao.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;s.firstChild;)i.appendChild(s.firstChild)}});function As(i,s){if(s){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=s;return}}i.textContent=s}var Fs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jv=["Webkit","ms","Moz","O"];Object.keys(Fs).forEach(function(i){Jv.forEach(function(s){s=s+i.charAt(0).toUpperCase()+i.substring(1),Fs[s]=Fs[i]})});function fd(i,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Fs.hasOwnProperty(i)&&Fs[i]?(""+s).trim():s+"px"}function pd(i,s){i=i.style;for(var a in s)if(s.hasOwnProperty(a)){var u=a.indexOf("--")===0,f=fd(a,s[a],u);a==="float"&&(a="cssFloat"),u?i.setProperty(a,f):i[a]=f}}var Zv=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dl(i,s){if(s){if(Zv[i]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(r(137,i));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(r(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(r(61))}if(s.style!=null&&typeof s.style!="object")throw Error(r(62))}}function fl(i,s){if(i.indexOf("-")===-1)return typeof s.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pl=null;function ml(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var gl=null,Xi=null,Ji=null;function md(i){if(i=ln(i)){if(typeof gl!="function")throw Error(r(280));var s=i.stateNode;s&&(s=Do(s),gl(i.stateNode,i.type,s))}}function gd(i){Xi?Ji?Ji.push(i):Ji=[i]:Xi=i}function _d(){if(Xi){var i=Xi,s=Ji;if(Ji=Xi=null,md(i),s)for(i=0;i<s.length;i++)md(s[i])}}function vd(i,s){return i(s)}function yd(){}var _l=!1;function Sd(i,s,a){if(_l)return i(s,a);_l=!0;try{return vd(i,s,a)}finally{_l=!1,(Xi!==null||Ji!==null)&&(yd(),_d())}}function zs(i,s){var a=i.stateNode;if(a===null)return null;var u=Do(a);if(u===null)return null;a=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var vl=!1;if(h)try{var $s={};Object.defineProperty($s,"passive",{get:function(){vl=!0}}),window.addEventListener("test",$s,$s),window.removeEventListener("test",$s,$s)}catch{vl=!1}function e0(i,s,a,u,f,m,S,E,R){var A=Array.prototype.slice.call(arguments,3);try{s.apply(a,A)}catch(te){this.onError(te)}}var Hs=!1,lo=null,co=!1,yl=null,t0={onError:function(i){Hs=!0,lo=i}};function r0(i,s,a,u,f,m,S,E,R){Hs=!1,lo=null,e0.apply(t0,arguments)}function i0(i,s,a,u,f,m,S,E,R){if(r0.apply(this,arguments),Hs){if(Hs){var A=lo;Hs=!1,lo=null}else throw Error(r(198));co||(co=!0,yl=A)}}function bi(i){var s=i,a=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(a=s.return),i=s.return;while(i)}return s.tag===3?a:null}function wd(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function xd(i){if(bi(i)!==i)throw Error(r(188))}function s0(i){var s=i.alternate;if(!s){if(s=bi(i),s===null)throw Error(r(188));return s!==i?null:i}for(var a=i,u=s;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){a=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return xd(f),i;if(m===u)return xd(f),s;m=m.sibling}throw Error(r(188))}if(a.return!==u.return)a=f,u=m;else{for(var S=!1,E=f.child;E;){if(E===a){S=!0,a=f,u=m;break}if(E===u){S=!0,u=f,a=m;break}E=E.sibling}if(!S){for(E=m.child;E;){if(E===a){S=!0,a=m,u=f;break}if(E===u){S=!0,u=m,a=f;break}E=E.sibling}if(!S)throw Error(r(189))}}if(a.alternate!==u)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?i:s}function bd(i){return i=s0(i),i!==null?Cd(i):null}function Cd(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var s=Cd(i);if(s!==null)return s;i=i.sibling}return null}var kd=t.unstable_scheduleCallback,Ed=t.unstable_cancelCallback,n0=t.unstable_shouldYield,o0=t.unstable_requestPaint,Xe=t.unstable_now,a0=t.unstable_getCurrentPriorityLevel,Sl=t.unstable_ImmediatePriority,Pd=t.unstable_UserBlockingPriority,uo=t.unstable_NormalPriority,l0=t.unstable_LowPriority,Rd=t.unstable_IdlePriority,ho=null,Sr=null;function c0(i){if(Sr&&typeof Sr.onCommitFiberRoot=="function")try{Sr.onCommitFiberRoot(ho,i,void 0,(i.current.flags&128)===128)}catch{}}var dr=Math.clz32?Math.clz32:d0,u0=Math.log,h0=Math.LN2;function d0(i){return i>>>=0,i===0?32:31-(u0(i)/h0|0)|0}var fo=64,po=4194304;function Ws(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function mo(i,s){var a=i.pendingLanes;if(a===0)return 0;var u=0,f=i.suspendedLanes,m=i.pingedLanes,S=a&268435455;if(S!==0){var E=S&~f;E!==0?u=Ws(E):(m&=S,m!==0&&(u=Ws(m)))}else S=a&~f,S!==0?u=Ws(S):m!==0&&(u=Ws(m));if(u===0)return 0;if(s!==0&&s!==u&&(s&f)===0&&(f=u&-u,m=s&-s,f>=m||f===16&&(m&4194240)!==0))return s;if((u&4)!==0&&(u|=a&16),s=i.entangledLanes,s!==0)for(i=i.entanglements,s&=u;0<s;)a=31-dr(s),f=1<<a,u|=i[a],s&=~f;return u}function f0(i,s){switch(i){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function p0(i,s){for(var a=i.suspendedLanes,u=i.pingedLanes,f=i.expirationTimes,m=i.pendingLanes;0<m;){var S=31-dr(m),E=1<<S,R=f[S];R===-1?((E&a)===0||(E&u)!==0)&&(f[S]=f0(E,s)):R<=s&&(i.expiredLanes|=E),m&=~E}}function wl(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Nd(){var i=fo;return fo<<=1,(fo&4194240)===0&&(fo=64),i}function xl(i){for(var s=[],a=0;31>a;a++)s.push(i);return s}function Us(i,s,a){i.pendingLanes|=s,s!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,s=31-dr(s),i[s]=a}function m0(i,s){var a=i.pendingLanes&~s;i.pendingLanes=s,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=s,i.mutableReadLanes&=s,i.entangledLanes&=s,s=i.entanglements;var u=i.eventTimes;for(i=i.expirationTimes;0<a;){var f=31-dr(a),m=1<<f;s[f]=0,u[f]=-1,i[f]=-1,a&=~m}}function bl(i,s){var a=i.entangledLanes|=s;for(i=i.entanglements;a;){var u=31-dr(a),f=1<<u;f&s|i[u]&s&&(i[u]|=s),a&=~f}}var Oe=0;function Ld(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Dd,Cl,Md,Od,jd,kl=!1,go=[],Gr=null,Xr=null,Jr=null,Ks=new Map,Vs=new Map,Zr=[],g0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Td(i,s){switch(i){case"focusin":case"focusout":Gr=null;break;case"dragenter":case"dragleave":Xr=null;break;case"mouseover":case"mouseout":Jr=null;break;case"pointerover":case"pointerout":Ks.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vs.delete(s.pointerId)}}function qs(i,s,a,u,f,m){return i===null||i.nativeEvent!==m?(i={blockedOn:s,domEventName:a,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},s!==null&&(s=ln(s),s!==null&&Cl(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),i)}function _0(i,s,a,u,f){switch(s){case"focusin":return Gr=qs(Gr,i,s,a,u,f),!0;case"dragenter":return Xr=qs(Xr,i,s,a,u,f),!0;case"mouseover":return Jr=qs(Jr,i,s,a,u,f),!0;case"pointerover":var m=f.pointerId;return Ks.set(m,qs(Ks.get(m)||null,i,s,a,u,f)),!0;case"gotpointercapture":return m=f.pointerId,Vs.set(m,qs(Vs.get(m)||null,i,s,a,u,f)),!0}return!1}function Bd(i){var s=Ci(i.target);if(s!==null){var a=bi(s);if(a!==null){if(s=a.tag,s===13){if(s=wd(a),s!==null){i.blockedOn=s,jd(i.priority,function(){Md(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function _o(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var a=Pl(i.domEventName,i.eventSystemFlags,s[0],i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);pl=u,a.target.dispatchEvent(u),pl=null}else return s=ln(a),s!==null&&Cl(s),i.blockedOn=a,!1;s.shift()}return!0}function Id(i,s,a){_o(i)&&a.delete(s)}function v0(){kl=!1,Gr!==null&&_o(Gr)&&(Gr=null),Xr!==null&&_o(Xr)&&(Xr=null),Jr!==null&&_o(Jr)&&(Jr=null),Ks.forEach(Id),Vs.forEach(Id)}function Qs(i,s){i.blockedOn===s&&(i.blockedOn=null,kl||(kl=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,v0)))}function Ys(i){function s(f){return Qs(f,i)}if(0<go.length){Qs(go[0],i);for(var a=1;a<go.length;a++){var u=go[a];u.blockedOn===i&&(u.blockedOn=null)}}for(Gr!==null&&Qs(Gr,i),Xr!==null&&Qs(Xr,i),Jr!==null&&Qs(Jr,i),Ks.forEach(s),Vs.forEach(s),a=0;a<Zr.length;a++)u=Zr[a],u.blockedOn===i&&(u.blockedOn=null);for(;0<Zr.length&&(a=Zr[0],a.blockedOn===null);)Bd(a),a.blockedOn===null&&Zr.shift()}var Zi=F.ReactCurrentBatchConfig,vo=!0;function y0(i,s,a,u){var f=Oe,m=Zi.transition;Zi.transition=null;try{Oe=1,El(i,s,a,u)}finally{Oe=f,Zi.transition=m}}function S0(i,s,a,u){var f=Oe,m=Zi.transition;Zi.transition=null;try{Oe=4,El(i,s,a,u)}finally{Oe=f,Zi.transition=m}}function El(i,s,a,u){if(vo){var f=Pl(i,s,a,u);if(f===null)Ul(i,s,u,yo,a),Td(i,u);else if(_0(f,i,s,a,u))u.stopPropagation();else if(Td(i,u),s&4&&-1<g0.indexOf(i)){for(;f!==null;){var m=ln(f);if(m!==null&&Dd(m),m=Pl(i,s,a,u),m===null&&Ul(i,s,u,yo,a),m===f)break;f=m}f!==null&&u.stopPropagation()}else Ul(i,s,u,null,a)}}var yo=null;function Pl(i,s,a,u){if(yo=null,i=ml(u),i=Ci(i),i!==null)if(s=bi(i),s===null)i=null;else if(a=s.tag,a===13){if(i=wd(s),i!==null)return i;i=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null);return yo=i,null}function Ad(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(a0()){case Sl:return 1;case Pd:return 4;case uo:case l0:return 16;case Rd:return 536870912;default:return 16}default:return 16}}var ei=null,Rl=null,So=null;function Fd(){if(So)return So;var i,s=Rl,a=s.length,u,f="value"in ei?ei.value:ei.textContent,m=f.length;for(i=0;i<a&&s[i]===f[i];i++);var S=a-i;for(u=1;u<=S&&s[a-u]===f[m-u];u++);return So=f.slice(i,1<u?1-u:void 0)}function wo(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function xo(){return!0}function zd(){return!1}function Ut(i){function s(a,u,f,m,S){this._reactName=a,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=S,this.currentTarget=null;for(var E in i)i.hasOwnProperty(E)&&(a=i[E],this[E]=a?a(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?xo:zd,this.isPropagationStopped=zd,this}return q(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=xo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=xo)},persist:function(){},isPersistent:xo}),s}var es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nl=Ut(es),Gs=q({},es,{view:0,detail:0}),w0=Ut(Gs),Ll,Dl,Xs,bo=q({},Gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ol,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Xs&&(Xs&&i.type==="mousemove"?(Ll=i.screenX-Xs.screenX,Dl=i.screenY-Xs.screenY):Dl=Ll=0,Xs=i),Ll)},movementY:function(i){return"movementY"in i?i.movementY:Dl}}),$d=Ut(bo),x0=q({},bo,{dataTransfer:0}),b0=Ut(x0),C0=q({},Gs,{relatedTarget:0}),Ml=Ut(C0),k0=q({},es,{animationName:0,elapsedTime:0,pseudoElement:0}),E0=Ut(k0),P0=q({},es,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),R0=Ut(P0),N0=q({},es,{data:0}),Hd=Ut(N0),L0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},D0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},M0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function O0(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=M0[i])?!!s[i]:!1}function Ol(){return O0}var j0=q({},Gs,{key:function(i){if(i.key){var s=L0[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=wo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?D0[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ol,charCode:function(i){return i.type==="keypress"?wo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?wo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),T0=Ut(j0),B0=q({},bo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wd=Ut(B0),I0=q({},Gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ol}),A0=Ut(I0),F0=q({},es,{propertyName:0,elapsedTime:0,pseudoElement:0}),z0=Ut(F0),$0=q({},bo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),H0=Ut($0),W0=[9,13,27,32],jl=h&&"CompositionEvent"in window,Js=null;h&&"documentMode"in document&&(Js=document.documentMode);var U0=h&&"TextEvent"in window&&!Js,Ud=h&&(!jl||Js&&8<Js&&11>=Js),Kd=" ",Vd=!1;function qd(i,s){switch(i){case"keyup":return W0.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qd(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ts=!1;function K0(i,s){switch(i){case"compositionend":return Qd(s);case"keypress":return s.which!==32?null:(Vd=!0,Kd);case"textInput":return i=s.data,i===Kd&&Vd?null:i;default:return null}}function V0(i,s){if(ts)return i==="compositionend"||!jl&&qd(i,s)?(i=Fd(),So=Rl=ei=null,ts=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ud&&s.locale!=="ko"?null:s.data;default:return null}}var q0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yd(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!q0[i.type]:s==="textarea"}function Gd(i,s,a,u){gd(u),s=Ro(s,"onChange"),0<s.length&&(a=new Nl("onChange","change",null,a,u),i.push({event:a,listeners:s}))}var Zs=null,en=null;function Q0(i){mf(i,0)}function Co(i){var s=os(i);if(wt(s))return i}function Y0(i,s){if(i==="change")return s}var Xd=!1;if(h){var Tl;if(h){var Bl="oninput"in document;if(!Bl){var Jd=document.createElement("div");Jd.setAttribute("oninput","return;"),Bl=typeof Jd.oninput=="function"}Tl=Bl}else Tl=!1;Xd=Tl&&(!document.documentMode||9<document.documentMode)}function Zd(){Zs&&(Zs.detachEvent("onpropertychange",ef),en=Zs=null)}function ef(i){if(i.propertyName==="value"&&Co(en)){var s=[];Gd(s,en,i,ml(i)),Sd(Q0,s)}}function G0(i,s,a){i==="focusin"?(Zd(),Zs=s,en=a,Zs.attachEvent("onpropertychange",ef)):i==="focusout"&&Zd()}function X0(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Co(en)}function J0(i,s){if(i==="click")return Co(s)}function Z0(i,s){if(i==="input"||i==="change")return Co(s)}function ey(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var fr=typeof Object.is=="function"?Object.is:ey;function tn(i,s){if(fr(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var a=Object.keys(i),u=Object.keys(s);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var f=a[u];if(!p.call(s,f)||!fr(i[f],s[f]))return!1}return!0}function tf(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function rf(i,s){var a=tf(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=s&&u>=s)return{node:a,offset:s-i};i=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=tf(a)}}function sf(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?sf(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function nf(){for(var i=window,s=Ee();s instanceof i.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)i=s.contentWindow;else break;s=Ee(i.document)}return s}function Il(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}function ty(i){var s=nf(),a=i.focusedElem,u=i.selectionRange;if(s!==a&&a&&a.ownerDocument&&sf(a.ownerDocument.documentElement,a)){if(u!==null&&Il(a)){if(s=u.start,i=u.end,i===void 0&&(i=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(i,a.value.length);else if(i=(s=a.ownerDocument||document)&&s.defaultView||window,i.getSelection){i=i.getSelection();var f=a.textContent.length,m=Math.min(u.start,f);u=u.end===void 0?m:Math.min(u.end,f),!i.extend&&m>u&&(f=u,u=m,m=f),f=rf(a,m);var S=rf(a,u);f&&S&&(i.rangeCount!==1||i.anchorNode!==f.node||i.anchorOffset!==f.offset||i.focusNode!==S.node||i.focusOffset!==S.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),i.removeAllRanges(),m>u?(i.addRange(s),i.extend(S.node,S.offset)):(s.setEnd(S.node,S.offset),i.addRange(s)))}}for(s=[],i=a;i=i.parentNode;)i.nodeType===1&&s.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)i=s[a],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var ry=h&&"documentMode"in document&&11>=document.documentMode,rs=null,Al=null,rn=null,Fl=!1;function of(i,s,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Fl||rs==null||rs!==Ee(u)||(u=rs,"selectionStart"in u&&Il(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),rn&&tn(rn,u)||(rn=u,u=Ro(Al,"onSelect"),0<u.length&&(s=new Nl("onSelect","select",null,s,a),i.push({event:s,listeners:u}),s.target=rs)))}function ko(i,s){var a={};return a[i.toLowerCase()]=s.toLowerCase(),a["Webkit"+i]="webkit"+s,a["Moz"+i]="moz"+s,a}var is={animationend:ko("Animation","AnimationEnd"),animationiteration:ko("Animation","AnimationIteration"),animationstart:ko("Animation","AnimationStart"),transitionend:ko("Transition","TransitionEnd")},zl={},af={};h&&(af=document.createElement("div").style,"AnimationEvent"in window||(delete is.animationend.animation,delete is.animationiteration.animation,delete is.animationstart.animation),"TransitionEvent"in window||delete is.transitionend.transition);function Eo(i){if(zl[i])return zl[i];if(!is[i])return i;var s=is[i],a;for(a in s)if(s.hasOwnProperty(a)&&a in af)return zl[i]=s[a];return i}var lf=Eo("animationend"),cf=Eo("animationiteration"),uf=Eo("animationstart"),hf=Eo("transitionend"),df=new Map,ff="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ti(i,s){df.set(i,s),l(s,[i])}for(var $l=0;$l<ff.length;$l++){var Hl=ff[$l],iy=Hl.toLowerCase(),sy=Hl[0].toUpperCase()+Hl.slice(1);ti(iy,"on"+sy)}ti(lf,"onAnimationEnd"),ti(cf,"onAnimationIteration"),ti(uf,"onAnimationStart"),ti("dblclick","onDoubleClick"),ti("focusin","onFocus"),ti("focusout","onBlur"),ti(hf,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ny=new Set("cancel close invalid load scroll toggle".split(" ").concat(sn));function pf(i,s,a){var u=i.type||"unknown-event";i.currentTarget=a,i0(u,s,void 0,i),i.currentTarget=null}function mf(i,s){s=(s&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],f=u.event;u=u.listeners;e:{var m=void 0;if(s)for(var S=u.length-1;0<=S;S--){var E=u[S],R=E.instance,A=E.currentTarget;if(E=E.listener,R!==m&&f.isPropagationStopped())break e;pf(f,E,A),m=R}else for(S=0;S<u.length;S++){if(E=u[S],R=E.instance,A=E.currentTarget,E=E.listener,R!==m&&f.isPropagationStopped())break e;pf(f,E,A),m=R}}}if(co)throw i=yl,co=!1,yl=null,i}function Ie(i,s){var a=s[Gl];a===void 0&&(a=s[Gl]=new Set);var u=i+"__bubble";a.has(u)||(gf(s,i,2,!1),a.add(u))}function Wl(i,s,a){var u=0;s&&(u|=4),gf(a,i,u,s)}var Po="_reactListening"+Math.random().toString(36).slice(2);function nn(i){if(!i[Po]){i[Po]=!0,n.forEach(function(a){a!=="selectionchange"&&(ny.has(a)||Wl(a,!1,i),Wl(a,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Po]||(s[Po]=!0,Wl("selectionchange",!1,s))}}function gf(i,s,a,u){switch(Ad(s)){case 1:var f=y0;break;case 4:f=S0;break;default:f=El}a=f.bind(null,s,a,i),f=void 0,!vl||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?i.addEventListener(s,a,{capture:!0,passive:f}):i.addEventListener(s,a,!0):f!==void 0?i.addEventListener(s,a,{passive:f}):i.addEventListener(s,a,!1)}function Ul(i,s,a,u,f){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var E=u.stateNode.containerInfo;if(E===f||E.nodeType===8&&E.parentNode===f)break;if(S===4)for(S=u.return;S!==null;){var R=S.tag;if((R===3||R===4)&&(R=S.stateNode.containerInfo,R===f||R.nodeType===8&&R.parentNode===f))return;S=S.return}for(;E!==null;){if(S=Ci(E),S===null)return;if(R=S.tag,R===5||R===6){u=m=S;continue e}E=E.parentNode}}u=u.return}Sd(function(){var A=m,te=ml(a),re=[];e:{var ee=df.get(i);if(ee!==void 0){var ue=Nl,de=i;switch(i){case"keypress":if(wo(a)===0)break e;case"keydown":case"keyup":ue=T0;break;case"focusin":de="focus",ue=Ml;break;case"focusout":de="blur",ue=Ml;break;case"beforeblur":case"afterblur":ue=Ml;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=$d;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=b0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=A0;break;case lf:case cf:case uf:ue=E0;break;case hf:ue=z0;break;case"scroll":ue=w0;break;case"wheel":ue=H0;break;case"copy":case"cut":case"paste":ue=R0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=Wd}var fe=(s&4)!==0,Je=!fe&&i==="scroll",O=fe?ee!==null?ee+"Capture":null:ee;fe=[];for(var N=A,T;N!==null;){T=N;var ne=T.stateNode;if(T.tag===5&&ne!==null&&(T=ne,O!==null&&(ne=zs(N,O),ne!=null&&fe.push(on(N,ne,T)))),Je)break;N=N.return}0<fe.length&&(ee=new ue(ee,de,null,a,te),re.push({event:ee,listeners:fe}))}}if((s&7)===0){e:{if(ee=i==="mouseover"||i==="pointerover",ue=i==="mouseout"||i==="pointerout",ee&&a!==pl&&(de=a.relatedTarget||a.fromElement)&&(Ci(de)||de[Or]))break e;if((ue||ee)&&(ee=te.window===te?te:(ee=te.ownerDocument)?ee.defaultView||ee.parentWindow:window,ue?(de=a.relatedTarget||a.toElement,ue=A,de=de?Ci(de):null,de!==null&&(Je=bi(de),de!==Je||de.tag!==5&&de.tag!==6)&&(de=null)):(ue=null,de=A),ue!==de)){if(fe=$d,ne="onMouseLeave",O="onMouseEnter",N="mouse",(i==="pointerout"||i==="pointerover")&&(fe=Wd,ne="onPointerLeave",O="onPointerEnter",N="pointer"),Je=ue==null?ee:os(ue),T=de==null?ee:os(de),ee=new fe(ne,N+"leave",ue,a,te),ee.target=Je,ee.relatedTarget=T,ne=null,Ci(te)===A&&(fe=new fe(O,N+"enter",de,a,te),fe.target=T,fe.relatedTarget=Je,ne=fe),Je=ne,ue&&de)t:{for(fe=ue,O=de,N=0,T=fe;T;T=ss(T))N++;for(T=0,ne=O;ne;ne=ss(ne))T++;for(;0<N-T;)fe=ss(fe),N--;for(;0<T-N;)O=ss(O),T--;for(;N--;){if(fe===O||O!==null&&fe===O.alternate)break t;fe=ss(fe),O=ss(O)}fe=null}else fe=null;ue!==null&&_f(re,ee,ue,fe,!1),de!==null&&Je!==null&&_f(re,Je,de,fe,!0)}}e:{if(ee=A?os(A):window,ue=ee.nodeName&&ee.nodeName.toLowerCase(),ue==="select"||ue==="input"&&ee.type==="file")var me=Y0;else if(Yd(ee))if(Xd)me=Z0;else{me=X0;var ve=G0}else(ue=ee.nodeName)&&ue.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(me=J0);if(me&&(me=me(i,A))){Gd(re,me,a,te);break e}ve&&ve(i,ee,A),i==="focusout"&&(ve=ee._wrapperState)&&ve.controlled&&ee.type==="number"&&cl(ee,"number",ee.value)}switch(ve=A?os(A):window,i){case"focusin":(Yd(ve)||ve.contentEditable==="true")&&(rs=ve,Al=A,rn=null);break;case"focusout":rn=Al=rs=null;break;case"mousedown":Fl=!0;break;case"contextmenu":case"mouseup":case"dragend":Fl=!1,of(re,a,te);break;case"selectionchange":if(ry)break;case"keydown":case"keyup":of(re,a,te)}var ye;if(jl)e:{switch(i){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else ts?qd(i,a)&&(we="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(we="onCompositionStart");we&&(Ud&&a.locale!=="ko"&&(ts||we!=="onCompositionStart"?we==="onCompositionEnd"&&ts&&(ye=Fd()):(ei=te,Rl="value"in ei?ei.value:ei.textContent,ts=!0)),ve=Ro(A,we),0<ve.length&&(we=new Hd(we,i,null,a,te),re.push({event:we,listeners:ve}),ye?we.data=ye:(ye=Qd(a),ye!==null&&(we.data=ye)))),(ye=U0?K0(i,a):V0(i,a))&&(A=Ro(A,"onBeforeInput"),0<A.length&&(te=new Hd("onBeforeInput","beforeinput",null,a,te),re.push({event:te,listeners:A}),te.data=ye))}mf(re,s)})}function on(i,s,a){return{instance:i,listener:s,currentTarget:a}}function Ro(i,s){for(var a=s+"Capture",u=[];i!==null;){var f=i,m=f.stateNode;f.tag===5&&m!==null&&(f=m,m=zs(i,a),m!=null&&u.unshift(on(i,m,f)),m=zs(i,s),m!=null&&u.push(on(i,m,f))),i=i.return}return u}function ss(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function _f(i,s,a,u,f){for(var m=s._reactName,S=[];a!==null&&a!==u;){var E=a,R=E.alternate,A=E.stateNode;if(R!==null&&R===u)break;E.tag===5&&A!==null&&(E=A,f?(R=zs(a,m),R!=null&&S.unshift(on(a,R,E))):f||(R=zs(a,m),R!=null&&S.push(on(a,R,E)))),a=a.return}S.length!==0&&i.push({event:s,listeners:S})}var oy=/\r\n?/g,ay=/\u0000|\uFFFD/g;function vf(i){return(typeof i=="string"?i:""+i).replace(oy,`
`).replace(ay,"")}function No(i,s,a){if(s=vf(s),vf(i)!==s&&a)throw Error(r(425))}function Lo(){}var Kl=null,Vl=null;function ql(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ql=typeof setTimeout=="function"?setTimeout:void 0,ly=typeof clearTimeout=="function"?clearTimeout:void 0,yf=typeof Promise=="function"?Promise:void 0,cy=typeof queueMicrotask=="function"?queueMicrotask:typeof yf<"u"?function(i){return yf.resolve(null).then(i).catch(uy)}:Ql;function uy(i){setTimeout(function(){throw i})}function Yl(i,s){var a=s,u=0;do{var f=a.nextSibling;if(i.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(u===0){i.removeChild(f),Ys(s);return}u--}else a!=="$"&&a!=="$?"&&a!=="$!"||u++;a=f}while(a);Ys(s)}function ri(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return i}function Sf(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return i;s--}else a==="/$"&&s++}i=i.previousSibling}return null}var ns=Math.random().toString(36).slice(2),wr="__reactFiber$"+ns,an="__reactProps$"+ns,Or="__reactContainer$"+ns,Gl="__reactEvents$"+ns,hy="__reactListeners$"+ns,dy="__reactHandles$"+ns;function Ci(i){var s=i[wr];if(s)return s;for(var a=i.parentNode;a;){if(s=a[Or]||a[wr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(i=Sf(i);i!==null;){if(a=i[wr])return a;i=Sf(i)}return s}i=a,a=i.parentNode}return null}function ln(i){return i=i[wr]||i[Or],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function os(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(r(33))}function Do(i){return i[an]||null}var Xl=[],as=-1;function ii(i){return{current:i}}function Ae(i){0>as||(i.current=Xl[as],Xl[as]=null,as--)}function Be(i,s){as++,Xl[as]=i.current,i.current=s}var si={},xt=ii(si),Bt=ii(!1),ki=si;function ls(i,s){var a=i.type.contextTypes;if(!a)return si;var u=i.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===s)return u.__reactInternalMemoizedMaskedChildContext;var f={},m;for(m in a)f[m]=s[m];return u&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=s,i.__reactInternalMemoizedMaskedChildContext=f),f}function It(i){return i=i.childContextTypes,i!=null}function Mo(){Ae(Bt),Ae(xt)}function wf(i,s,a){if(xt.current!==si)throw Error(r(168));Be(xt,s),Be(Bt,a)}function xf(i,s,a){var u=i.stateNode;if(s=s.childContextTypes,typeof u.getChildContext!="function")return a;u=u.getChildContext();for(var f in u)if(!(f in s))throw Error(r(108,pe(i)||"Unknown",f));return q({},a,u)}function Oo(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||si,ki=xt.current,Be(xt,i),Be(Bt,Bt.current),!0}function bf(i,s,a){var u=i.stateNode;if(!u)throw Error(r(169));a?(i=xf(i,s,ki),u.__reactInternalMemoizedMergedChildContext=i,Ae(Bt),Ae(xt),Be(xt,i)):Ae(Bt),Be(Bt,a)}var jr=null,jo=!1,Jl=!1;function Cf(i){jr===null?jr=[i]:jr.push(i)}function fy(i){jo=!0,Cf(i)}function ni(){if(!Jl&&jr!==null){Jl=!0;var i=0,s=Oe;try{var a=jr;for(Oe=1;i<a.length;i++){var u=a[i];do u=u(!0);while(u!==null)}jr=null,jo=!1}catch(f){throw jr!==null&&(jr=jr.slice(i+1)),kd(Sl,ni),f}finally{Oe=s,Jl=!1}}return null}var cs=[],us=0,To=null,Bo=0,Zt=[],er=0,Ei=null,Tr=1,Br="";function Pi(i,s){cs[us++]=Bo,cs[us++]=To,To=i,Bo=s}function kf(i,s,a){Zt[er++]=Tr,Zt[er++]=Br,Zt[er++]=Ei,Ei=i;var u=Tr;i=Br;var f=32-dr(u)-1;u&=~(1<<f),a+=1;var m=32-dr(s)+f;if(30<m){var S=f-f%5;m=(u&(1<<S)-1).toString(32),u>>=S,f-=S,Tr=1<<32-dr(s)+f|a<<f|u,Br=m+i}else Tr=1<<m|a<<f|u,Br=i}function Zl(i){i.return!==null&&(Pi(i,1),kf(i,1,0))}function ec(i){for(;i===To;)To=cs[--us],cs[us]=null,Bo=cs[--us],cs[us]=null;for(;i===Ei;)Ei=Zt[--er],Zt[er]=null,Br=Zt[--er],Zt[er]=null,Tr=Zt[--er],Zt[er]=null}var Kt=null,Vt=null,ze=!1,pr=null;function Ef(i,s){var a=sr(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=i,s=i.deletions,s===null?(i.deletions=[a],i.flags|=16):s.push(a)}function Pf(i,s){switch(i.tag){case 5:var a=i.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(i.stateNode=s,Kt=i,Vt=ri(s.firstChild),!0):!1;case 6:return s=i.pendingProps===""||s.nodeType!==3?null:s,s!==null?(i.stateNode=s,Kt=i,Vt=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Ei!==null?{id:Tr,overflow:Br}:null,i.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=sr(18,null,null,0),a.stateNode=s,a.return=i,i.child=a,Kt=i,Vt=null,!0):!1;default:return!1}}function tc(i){return(i.mode&1)!==0&&(i.flags&128)===0}function rc(i){if(ze){var s=Vt;if(s){var a=s;if(!Pf(i,s)){if(tc(i))throw Error(r(418));s=ri(a.nextSibling);var u=Kt;s&&Pf(i,s)?Ef(u,a):(i.flags=i.flags&-4097|2,ze=!1,Kt=i)}}else{if(tc(i))throw Error(r(418));i.flags=i.flags&-4097|2,ze=!1,Kt=i}}}function Rf(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Kt=i}function Io(i){if(i!==Kt)return!1;if(!ze)return Rf(i),ze=!0,!1;var s;if((s=i.tag!==3)&&!(s=i.tag!==5)&&(s=i.type,s=s!=="head"&&s!=="body"&&!ql(i.type,i.memoizedProps)),s&&(s=Vt)){if(tc(i))throw Nf(),Error(r(418));for(;s;)Ef(i,s),s=ri(s.nextSibling)}if(Rf(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"){if(s===0){Vt=ri(i.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}i=i.nextSibling}Vt=null}}else Vt=Kt?ri(i.stateNode.nextSibling):null;return!0}function Nf(){for(var i=Vt;i;)i=ri(i.nextSibling)}function hs(){Vt=Kt=null,ze=!1}function ic(i){pr===null?pr=[i]:pr.push(i)}var py=F.ReactCurrentBatchConfig;function cn(i,s,a){if(i=a.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(r(309));var u=a.stateNode}if(!u)throw Error(r(147,i));var f=u,m=""+i;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===m?s.ref:(s=function(S){var E=f.refs;S===null?delete E[m]:E[m]=S},s._stringRef=m,s)}if(typeof i!="string")throw Error(r(284));if(!a._owner)throw Error(r(290,i))}return i}function Ao(i,s){throw i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i))}function Lf(i){var s=i._init;return s(i._payload)}function Df(i){function s(O,N){if(i){var T=O.deletions;T===null?(O.deletions=[N],O.flags|=16):T.push(N)}}function a(O,N){if(!i)return null;for(;N!==null;)s(O,N),N=N.sibling;return null}function u(O,N){for(O=new Map;N!==null;)N.key!==null?O.set(N.key,N):O.set(N.index,N),N=N.sibling;return O}function f(O,N){return O=fi(O,N),O.index=0,O.sibling=null,O}function m(O,N,T){return O.index=T,i?(T=O.alternate,T!==null?(T=T.index,T<N?(O.flags|=2,N):T):(O.flags|=2,N)):(O.flags|=1048576,N)}function S(O){return i&&O.alternate===null&&(O.flags|=2),O}function E(O,N,T,ne){return N===null||N.tag!==6?(N=Qc(T,O.mode,ne),N.return=O,N):(N=f(N,T),N.return=O,N)}function R(O,N,T,ne){var me=T.type;return me===Z?te(O,N,T.props.children,ne,T.key):N!==null&&(N.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===M&&Lf(me)===N.type)?(ne=f(N,T.props),ne.ref=cn(O,N,T),ne.return=O,ne):(ne=la(T.type,T.key,T.props,null,O.mode,ne),ne.ref=cn(O,N,T),ne.return=O,ne)}function A(O,N,T,ne){return N===null||N.tag!==4||N.stateNode.containerInfo!==T.containerInfo||N.stateNode.implementation!==T.implementation?(N=Yc(T,O.mode,ne),N.return=O,N):(N=f(N,T.children||[]),N.return=O,N)}function te(O,N,T,ne,me){return N===null||N.tag!==7?(N=Ti(T,O.mode,ne,me),N.return=O,N):(N=f(N,T),N.return=O,N)}function re(O,N,T){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Qc(""+N,O.mode,T),N.return=O,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case H:return T=la(N.type,N.key,N.props,null,O.mode,T),T.ref=cn(O,null,N),T.return=O,T;case J:return N=Yc(N,O.mode,T),N.return=O,N;case M:var ne=N._init;return re(O,ne(N._payload),T)}if(Is(N)||G(N))return N=Ti(N,O.mode,T,null),N.return=O,N;Ao(O,N)}return null}function ee(O,N,T,ne){var me=N!==null?N.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return me!==null?null:E(O,N,""+T,ne);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case H:return T.key===me?R(O,N,T,ne):null;case J:return T.key===me?A(O,N,T,ne):null;case M:return me=T._init,ee(O,N,me(T._payload),ne)}if(Is(T)||G(T))return me!==null?null:te(O,N,T,ne,null);Ao(O,T)}return null}function ue(O,N,T,ne,me){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return O=O.get(T)||null,E(N,O,""+ne,me);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case H:return O=O.get(ne.key===null?T:ne.key)||null,R(N,O,ne,me);case J:return O=O.get(ne.key===null?T:ne.key)||null,A(N,O,ne,me);case M:var ve=ne._init;return ue(O,N,T,ve(ne._payload),me)}if(Is(ne)||G(ne))return O=O.get(T)||null,te(N,O,ne,me,null);Ao(N,ne)}return null}function de(O,N,T,ne){for(var me=null,ve=null,ye=N,we=N=0,dt=null;ye!==null&&we<T.length;we++){ye.index>we?(dt=ye,ye=null):dt=ye.sibling;var Me=ee(O,ye,T[we],ne);if(Me===null){ye===null&&(ye=dt);break}i&&ye&&Me.alternate===null&&s(O,ye),N=m(Me,N,we),ve===null?me=Me:ve.sibling=Me,ve=Me,ye=dt}if(we===T.length)return a(O,ye),ze&&Pi(O,we),me;if(ye===null){for(;we<T.length;we++)ye=re(O,T[we],ne),ye!==null&&(N=m(ye,N,we),ve===null?me=ye:ve.sibling=ye,ve=ye);return ze&&Pi(O,we),me}for(ye=u(O,ye);we<T.length;we++)dt=ue(ye,O,we,T[we],ne),dt!==null&&(i&&dt.alternate!==null&&ye.delete(dt.key===null?we:dt.key),N=m(dt,N,we),ve===null?me=dt:ve.sibling=dt,ve=dt);return i&&ye.forEach(function(pi){return s(O,pi)}),ze&&Pi(O,we),me}function fe(O,N,T,ne){var me=G(T);if(typeof me!="function")throw Error(r(150));if(T=me.call(T),T==null)throw Error(r(151));for(var ve=me=null,ye=N,we=N=0,dt=null,Me=T.next();ye!==null&&!Me.done;we++,Me=T.next()){ye.index>we?(dt=ye,ye=null):dt=ye.sibling;var pi=ee(O,ye,Me.value,ne);if(pi===null){ye===null&&(ye=dt);break}i&&ye&&pi.alternate===null&&s(O,ye),N=m(pi,N,we),ve===null?me=pi:ve.sibling=pi,ve=pi,ye=dt}if(Me.done)return a(O,ye),ze&&Pi(O,we),me;if(ye===null){for(;!Me.done;we++,Me=T.next())Me=re(O,Me.value,ne),Me!==null&&(N=m(Me,N,we),ve===null?me=Me:ve.sibling=Me,ve=Me);return ze&&Pi(O,we),me}for(ye=u(O,ye);!Me.done;we++,Me=T.next())Me=ue(ye,O,we,Me.value,ne),Me!==null&&(i&&Me.alternate!==null&&ye.delete(Me.key===null?we:Me.key),N=m(Me,N,we),ve===null?me=Me:ve.sibling=Me,ve=Me);return i&&ye.forEach(function(qy){return s(O,qy)}),ze&&Pi(O,we),me}function Je(O,N,T,ne){if(typeof T=="object"&&T!==null&&T.type===Z&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case H:e:{for(var me=T.key,ve=N;ve!==null;){if(ve.key===me){if(me=T.type,me===Z){if(ve.tag===7){a(O,ve.sibling),N=f(ve,T.props.children),N.return=O,O=N;break e}}else if(ve.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===M&&Lf(me)===ve.type){a(O,ve.sibling),N=f(ve,T.props),N.ref=cn(O,ve,T),N.return=O,O=N;break e}a(O,ve);break}else s(O,ve);ve=ve.sibling}T.type===Z?(N=Ti(T.props.children,O.mode,ne,T.key),N.return=O,O=N):(ne=la(T.type,T.key,T.props,null,O.mode,ne),ne.ref=cn(O,N,T),ne.return=O,O=ne)}return S(O);case J:e:{for(ve=T.key;N!==null;){if(N.key===ve)if(N.tag===4&&N.stateNode.containerInfo===T.containerInfo&&N.stateNode.implementation===T.implementation){a(O,N.sibling),N=f(N,T.children||[]),N.return=O,O=N;break e}else{a(O,N);break}else s(O,N);N=N.sibling}N=Yc(T,O.mode,ne),N.return=O,O=N}return S(O);case M:return ve=T._init,Je(O,N,ve(T._payload),ne)}if(Is(T))return de(O,N,T,ne);if(G(T))return fe(O,N,T,ne);Ao(O,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,N!==null&&N.tag===6?(a(O,N.sibling),N=f(N,T),N.return=O,O=N):(a(O,N),N=Qc(T,O.mode,ne),N.return=O,O=N),S(O)):a(O,N)}return Je}var ds=Df(!0),Mf=Df(!1),Fo=ii(null),zo=null,fs=null,sc=null;function nc(){sc=fs=zo=null}function oc(i){var s=Fo.current;Ae(Fo),i._currentValue=s}function ac(i,s,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===a)break;i=i.return}}function ps(i,s){zo=i,sc=fs=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&s)!==0&&(At=!0),i.firstContext=null)}function tr(i){var s=i._currentValue;if(sc!==i)if(i={context:i,memoizedValue:s,next:null},fs===null){if(zo===null)throw Error(r(308));fs=i,zo.dependencies={lanes:0,firstContext:i}}else fs=fs.next=i;return s}var Ri=null;function lc(i){Ri===null?Ri=[i]:Ri.push(i)}function Of(i,s,a,u){var f=s.interleaved;return f===null?(a.next=a,lc(s)):(a.next=f.next,f.next=a),s.interleaved=a,Ir(i,u)}function Ir(i,s){i.lanes|=s;var a=i.alternate;for(a!==null&&(a.lanes|=s),a=i,i=i.return;i!==null;)i.childLanes|=s,a=i.alternate,a!==null&&(a.childLanes|=s),a=i,i=i.return;return a.tag===3?a.stateNode:null}var oi=!1;function cc(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jf(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Ar(i,s){return{eventTime:i,lane:s,tag:0,payload:null,callback:null,next:null}}function ai(i,s,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(De&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,Ir(i,a)}return f=u.interleaved,f===null?(s.next=s,lc(u)):(s.next=f.next,f.next=s),u.interleaved=s,Ir(i,a)}function $o(i,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var u=s.lanes;u&=i.pendingLanes,a|=u,s.lanes=a,bl(i,a)}}function Tf(i,s){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var S={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?f=m=S:m=m.next=S,a=a.next}while(a!==null);m===null?f=m=s:m=m.next=s}else f=m=s;a={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,effects:u.effects},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=s:i.next=s,a.lastBaseUpdate=s}function Ho(i,s,a,u){var f=i.updateQueue;oi=!1;var m=f.firstBaseUpdate,S=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var R=E,A=R.next;R.next=null,S===null?m=A:S.next=A,S=R;var te=i.alternate;te!==null&&(te=te.updateQueue,E=te.lastBaseUpdate,E!==S&&(E===null?te.firstBaseUpdate=A:E.next=A,te.lastBaseUpdate=R))}if(m!==null){var re=f.baseState;S=0,te=A=R=null,E=m;do{var ee=E.lane,ue=E.eventTime;if((u&ee)===ee){te!==null&&(te=te.next={eventTime:ue,lane:0,tag:E.tag,payload:E.payload,callback:E.callback,next:null});e:{var de=i,fe=E;switch(ee=s,ue=a,fe.tag){case 1:if(de=fe.payload,typeof de=="function"){re=de.call(ue,re,ee);break e}re=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=fe.payload,ee=typeof de=="function"?de.call(ue,re,ee):de,ee==null)break e;re=q({},re,ee);break e;case 2:oi=!0}}E.callback!==null&&E.lane!==0&&(i.flags|=64,ee=f.effects,ee===null?f.effects=[E]:ee.push(E))}else ue={eventTime:ue,lane:ee,tag:E.tag,payload:E.payload,callback:E.callback,next:null},te===null?(A=te=ue,R=re):te=te.next=ue,S|=ee;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;ee=E,E=ee.next,ee.next=null,f.lastBaseUpdate=ee,f.shared.pending=null}}while(!0);if(te===null&&(R=re),f.baseState=R,f.firstBaseUpdate=A,f.lastBaseUpdate=te,s=f.shared.interleaved,s!==null){f=s;do S|=f.lane,f=f.next;while(f!==s)}else m===null&&(f.shared.lanes=0);Di|=S,i.lanes=S,i.memoizedState=re}}function Bf(i,s,a){if(i=s.effects,s.effects=null,i!==null)for(s=0;s<i.length;s++){var u=i[s],f=u.callback;if(f!==null){if(u.callback=null,u=a,typeof f!="function")throw Error(r(191,f));f.call(u)}}}var un={},xr=ii(un),hn=ii(un),dn=ii(un);function Ni(i){if(i===un)throw Error(r(174));return i}function uc(i,s){switch(Be(dn,s),Be(hn,i),Be(xr,un),i=s.nodeType,i){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:hl(null,"");break;default:i=i===8?s.parentNode:s,s=i.namespaceURI||null,i=i.tagName,s=hl(s,i)}Ae(xr),Be(xr,s)}function ms(){Ae(xr),Ae(hn),Ae(dn)}function If(i){Ni(dn.current);var s=Ni(xr.current),a=hl(s,i.type);s!==a&&(Be(hn,i),Be(xr,a))}function hc(i){hn.current===i&&(Ae(xr),Ae(hn))}var Ue=ii(0);function Wo(i){for(var s=i;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var dc=[];function fc(){for(var i=0;i<dc.length;i++)dc[i]._workInProgressVersionPrimary=null;dc.length=0}var Uo=F.ReactCurrentDispatcher,pc=F.ReactCurrentBatchConfig,Li=0,Ke=null,st=null,ut=null,Ko=!1,fn=!1,pn=0,my=0;function bt(){throw Error(r(321))}function mc(i,s){if(s===null)return!1;for(var a=0;a<s.length&&a<i.length;a++)if(!fr(i[a],s[a]))return!1;return!0}function gc(i,s,a,u,f,m){if(Li=m,Ke=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Uo.current=i===null||i.memoizedState===null?yy:Sy,i=a(u,f),fn){m=0;do{if(fn=!1,pn=0,25<=m)throw Error(r(301));m+=1,ut=st=null,s.updateQueue=null,Uo.current=wy,i=a(u,f)}while(fn)}if(Uo.current=Qo,s=st!==null&&st.next!==null,Li=0,ut=st=Ke=null,Ko=!1,s)throw Error(r(300));return i}function _c(){var i=pn!==0;return pn=0,i}function br(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?Ke.memoizedState=ut=i:ut=ut.next=i,ut}function rr(){if(st===null){var i=Ke.alternate;i=i!==null?i.memoizedState:null}else i=st.next;var s=ut===null?Ke.memoizedState:ut.next;if(s!==null)ut=s,st=i;else{if(i===null)throw Error(r(310));st=i,i={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},ut===null?Ke.memoizedState=ut=i:ut=ut.next=i}return ut}function mn(i,s){return typeof s=="function"?s(i):s}function vc(i){var s=rr(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=i;var u=st,f=u.baseQueue,m=a.pending;if(m!==null){if(f!==null){var S=f.next;f.next=m.next,m.next=S}u.baseQueue=f=m,a.pending=null}if(f!==null){m=f.next,u=u.baseState;var E=S=null,R=null,A=m;do{var te=A.lane;if((Li&te)===te)R!==null&&(R=R.next={lane:0,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null}),u=A.hasEagerState?A.eagerState:i(u,A.action);else{var re={lane:te,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null};R===null?(E=R=re,S=u):R=R.next=re,Ke.lanes|=te,Di|=te}A=A.next}while(A!==null&&A!==m);R===null?S=u:R.next=E,fr(u,s.memoizedState)||(At=!0),s.memoizedState=u,s.baseState=S,s.baseQueue=R,a.lastRenderedState=u}if(i=a.interleaved,i!==null){f=i;do m=f.lane,Ke.lanes|=m,Di|=m,f=f.next;while(f!==i)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function yc(i){var s=rr(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=i;var u=a.dispatch,f=a.pending,m=s.memoizedState;if(f!==null){a.pending=null;var S=f=f.next;do m=i(m,S.action),S=S.next;while(S!==f);fr(m,s.memoizedState)||(At=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,u]}function Af(){}function Ff(i,s){var a=Ke,u=rr(),f=s(),m=!fr(u.memoizedState,f);if(m&&(u.memoizedState=f,At=!0),u=u.queue,Sc(Hf.bind(null,a,u,i),[i]),u.getSnapshot!==s||m||ut!==null&&ut.memoizedState.tag&1){if(a.flags|=2048,gn(9,$f.bind(null,a,u,f,s),void 0,null),ht===null)throw Error(r(349));(Li&30)!==0||zf(a,s,f)}return f}function zf(i,s,a){i.flags|=16384,i={getSnapshot:s,value:a},s=Ke.updateQueue,s===null?(s={lastEffect:null,stores:null},Ke.updateQueue=s,s.stores=[i]):(a=s.stores,a===null?s.stores=[i]:a.push(i))}function $f(i,s,a,u){s.value=a,s.getSnapshot=u,Wf(s)&&Uf(i)}function Hf(i,s,a){return a(function(){Wf(s)&&Uf(i)})}function Wf(i){var s=i.getSnapshot;i=i.value;try{var a=s();return!fr(i,a)}catch{return!0}}function Uf(i){var s=Ir(i,1);s!==null&&vr(s,i,1,-1)}function Kf(i){var s=br();return typeof i=="function"&&(i=i()),s.memoizedState=s.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mn,lastRenderedState:i},s.queue=i,i=i.dispatch=vy.bind(null,Ke,i),[s.memoizedState,i]}function gn(i,s,a,u){return i={tag:i,create:s,destroy:a,deps:u,next:null},s=Ke.updateQueue,s===null?(s={lastEffect:null,stores:null},Ke.updateQueue=s,s.lastEffect=i.next=i):(a=s.lastEffect,a===null?s.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,s.lastEffect=i)),i}function Vf(){return rr().memoizedState}function Vo(i,s,a,u){var f=br();Ke.flags|=i,f.memoizedState=gn(1|s,a,void 0,u===void 0?null:u)}function qo(i,s,a,u){var f=rr();u=u===void 0?null:u;var m=void 0;if(st!==null){var S=st.memoizedState;if(m=S.destroy,u!==null&&mc(u,S.deps)){f.memoizedState=gn(s,a,m,u);return}}Ke.flags|=i,f.memoizedState=gn(1|s,a,m,u)}function qf(i,s){return Vo(8390656,8,i,s)}function Sc(i,s){return qo(2048,8,i,s)}function Qf(i,s){return qo(4,2,i,s)}function Yf(i,s){return qo(4,4,i,s)}function Gf(i,s){if(typeof s=="function")return i=i(),s(i),function(){s(null)};if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Xf(i,s,a){return a=a!=null?a.concat([i]):null,qo(4,4,Gf.bind(null,s,i),a)}function wc(){}function Jf(i,s){var a=rr();s=s===void 0?null:s;var u=a.memoizedState;return u!==null&&s!==null&&mc(s,u[1])?u[0]:(a.memoizedState=[i,s],i)}function Zf(i,s){var a=rr();s=s===void 0?null:s;var u=a.memoizedState;return u!==null&&s!==null&&mc(s,u[1])?u[0]:(i=i(),a.memoizedState=[i,s],i)}function ep(i,s,a){return(Li&21)===0?(i.baseState&&(i.baseState=!1,At=!0),i.memoizedState=a):(fr(a,s)||(a=Nd(),Ke.lanes|=a,Di|=a,i.baseState=!0),s)}function gy(i,s){var a=Oe;Oe=a!==0&&4>a?a:4,i(!0);var u=pc.transition;pc.transition={};try{i(!1),s()}finally{Oe=a,pc.transition=u}}function tp(){return rr().memoizedState}function _y(i,s,a){var u=hi(i);if(a={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null},rp(i))ip(s,a);else if(a=Of(i,s,a,u),a!==null){var f=Nt();vr(a,i,u,f),sp(a,s,u)}}function vy(i,s,a){var u=hi(i),f={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null};if(rp(i))ip(s,f);else{var m=i.alternate;if(i.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var S=s.lastRenderedState,E=m(S,a);if(f.hasEagerState=!0,f.eagerState=E,fr(E,S)){var R=s.interleaved;R===null?(f.next=f,lc(s)):(f.next=R.next,R.next=f),s.interleaved=f;return}}catch{}finally{}a=Of(i,s,f,u),a!==null&&(f=Nt(),vr(a,i,u,f),sp(a,s,u))}}function rp(i){var s=i.alternate;return i===Ke||s!==null&&s===Ke}function ip(i,s){fn=Ko=!0;var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}function sp(i,s,a){if((a&4194240)!==0){var u=s.lanes;u&=i.pendingLanes,a|=u,s.lanes=a,bl(i,a)}}var Qo={readContext:tr,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},yy={readContext:tr,useCallback:function(i,s){return br().memoizedState=[i,s===void 0?null:s],i},useContext:tr,useEffect:qf,useImperativeHandle:function(i,s,a){return a=a!=null?a.concat([i]):null,Vo(4194308,4,Gf.bind(null,s,i),a)},useLayoutEffect:function(i,s){return Vo(4194308,4,i,s)},useInsertionEffect:function(i,s){return Vo(4,2,i,s)},useMemo:function(i,s){var a=br();return s=s===void 0?null:s,i=i(),a.memoizedState=[i,s],i},useReducer:function(i,s,a){var u=br();return s=a!==void 0?a(s):s,u.memoizedState=u.baseState=s,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:s},u.queue=i,i=i.dispatch=_y.bind(null,Ke,i),[u.memoizedState,i]},useRef:function(i){var s=br();return i={current:i},s.memoizedState=i},useState:Kf,useDebugValue:wc,useDeferredValue:function(i){return br().memoizedState=i},useTransition:function(){var i=Kf(!1),s=i[0];return i=gy.bind(null,i[1]),br().memoizedState=i,[s,i]},useMutableSource:function(){},useSyncExternalStore:function(i,s,a){var u=Ke,f=br();if(ze){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),ht===null)throw Error(r(349));(Li&30)!==0||zf(u,s,a)}f.memoizedState=a;var m={value:a,getSnapshot:s};return f.queue=m,qf(Hf.bind(null,u,m,i),[i]),u.flags|=2048,gn(9,$f.bind(null,u,m,a,s),void 0,null),a},useId:function(){var i=br(),s=ht.identifierPrefix;if(ze){var a=Br,u=Tr;a=(u&~(1<<32-dr(u)-1)).toString(32)+a,s=":"+s+"R"+a,a=pn++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=my++,s=":"+s+"r"+a.toString(32)+":";return i.memoizedState=s},unstable_isNewReconciler:!1},Sy={readContext:tr,useCallback:Jf,useContext:tr,useEffect:Sc,useImperativeHandle:Xf,useInsertionEffect:Qf,useLayoutEffect:Yf,useMemo:Zf,useReducer:vc,useRef:Vf,useState:function(){return vc(mn)},useDebugValue:wc,useDeferredValue:function(i){var s=rr();return ep(s,st.memoizedState,i)},useTransition:function(){var i=vc(mn)[0],s=rr().memoizedState;return[i,s]},useMutableSource:Af,useSyncExternalStore:Ff,useId:tp,unstable_isNewReconciler:!1},wy={readContext:tr,useCallback:Jf,useContext:tr,useEffect:Sc,useImperativeHandle:Xf,useInsertionEffect:Qf,useLayoutEffect:Yf,useMemo:Zf,useReducer:yc,useRef:Vf,useState:function(){return yc(mn)},useDebugValue:wc,useDeferredValue:function(i){var s=rr();return st===null?s.memoizedState=i:ep(s,st.memoizedState,i)},useTransition:function(){var i=yc(mn)[0],s=rr().memoizedState;return[i,s]},useMutableSource:Af,useSyncExternalStore:Ff,useId:tp,unstable_isNewReconciler:!1};function mr(i,s){if(i&&i.defaultProps){s=q({},s),i=i.defaultProps;for(var a in i)s[a]===void 0&&(s[a]=i[a]);return s}return s}function xc(i,s,a,u){s=i.memoizedState,a=a(u,s),a=a==null?s:q({},s,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var Yo={isMounted:function(i){return(i=i._reactInternals)?bi(i)===i:!1},enqueueSetState:function(i,s,a){i=i._reactInternals;var u=Nt(),f=hi(i),m=Ar(u,f);m.payload=s,a!=null&&(m.callback=a),s=ai(i,m,f),s!==null&&(vr(s,i,f,u),$o(s,i,f))},enqueueReplaceState:function(i,s,a){i=i._reactInternals;var u=Nt(),f=hi(i),m=Ar(u,f);m.tag=1,m.payload=s,a!=null&&(m.callback=a),s=ai(i,m,f),s!==null&&(vr(s,i,f,u),$o(s,i,f))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var a=Nt(),u=hi(i),f=Ar(a,u);f.tag=2,s!=null&&(f.callback=s),s=ai(i,f,u),s!==null&&(vr(s,i,u,a),$o(s,i,u))}};function np(i,s,a,u,f,m,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,m,S):s.prototype&&s.prototype.isPureReactComponent?!tn(a,u)||!tn(f,m):!0}function op(i,s,a){var u=!1,f=si,m=s.contextType;return typeof m=="object"&&m!==null?m=tr(m):(f=It(s)?ki:xt.current,u=s.contextTypes,m=(u=u!=null)?ls(i,f):si),s=new s(a,m),i.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Yo,i.stateNode=s,s._reactInternals=i,u&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=f,i.__reactInternalMemoizedMaskedChildContext=m),s}function ap(i,s,a,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,u),s.state!==i&&Yo.enqueueReplaceState(s,s.state,null)}function bc(i,s,a,u){var f=i.stateNode;f.props=a,f.state=i.memoizedState,f.refs={},cc(i);var m=s.contextType;typeof m=="object"&&m!==null?f.context=tr(m):(m=It(s)?ki:xt.current,f.context=ls(i,m)),f.state=i.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(xc(i,s,m,a),f.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Yo.enqueueReplaceState(f,f.state,null),Ho(i,a,f,u),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308)}function gs(i,s){try{var a="",u=s;do a+=Se(u),u=u.return;while(u);var f=a}catch(m){f=`
Error generating stack: `+m.message+`
`+m.stack}return{value:i,source:s,stack:f,digest:null}}function Cc(i,s,a){return{value:i,source:null,stack:a??null,digest:s??null}}function kc(i,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var xy=typeof WeakMap=="function"?WeakMap:Map;function lp(i,s,a){a=Ar(-1,a),a.tag=3,a.payload={element:null};var u=s.value;return a.callback=function(){ra||(ra=!0,zc=u),kc(i,s)},a}function cp(i,s,a){a=Ar(-1,a),a.tag=3;var u=i.type.getDerivedStateFromError;if(typeof u=="function"){var f=s.value;a.payload=function(){return u(f)},a.callback=function(){kc(i,s)}}var m=i.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){kc(i,s),typeof u!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var S=s.stack;this.componentDidCatch(s.value,{componentStack:S!==null?S:""})}),a}function up(i,s,a){var u=i.pingCache;if(u===null){u=i.pingCache=new xy;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(a)||(f.add(a),i=By.bind(null,i,s,a),s.then(i,i))}function hp(i){do{var s;if((s=i.tag===13)&&(s=i.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return i;i=i.return}while(i!==null);return null}function dp(i,s,a,u,f){return(i.mode&1)===0?(i===s?i.flags|=65536:(i.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Ar(-1,1),s.tag=2,ai(a,s,1))),a.lanes|=1),i):(i.flags|=65536,i.lanes=f,i)}var by=F.ReactCurrentOwner,At=!1;function Rt(i,s,a,u){s.child=i===null?Mf(s,null,a,u):ds(s,i.child,a,u)}function fp(i,s,a,u,f){a=a.render;var m=s.ref;return ps(s,f),u=gc(i,s,a,u,m,f),a=_c(),i!==null&&!At?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~f,Fr(i,s,f)):(ze&&a&&Zl(s),s.flags|=1,Rt(i,s,u,f),s.child)}function pp(i,s,a,u,f){if(i===null){var m=a.type;return typeof m=="function"&&!qc(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=m,mp(i,s,m,u,f)):(i=la(a.type,null,u,s,s.mode,f),i.ref=s.ref,i.return=s,s.child=i)}if(m=i.child,(i.lanes&f)===0){var S=m.memoizedProps;if(a=a.compare,a=a!==null?a:tn,a(S,u)&&i.ref===s.ref)return Fr(i,s,f)}return s.flags|=1,i=fi(m,u),i.ref=s.ref,i.return=s,s.child=i}function mp(i,s,a,u,f){if(i!==null){var m=i.memoizedProps;if(tn(m,u)&&i.ref===s.ref)if(At=!1,s.pendingProps=u=m,(i.lanes&f)!==0)(i.flags&131072)!==0&&(At=!0);else return s.lanes=i.lanes,Fr(i,s,f)}return Ec(i,s,a,u,f)}function gp(i,s,a){var u=s.pendingProps,f=u.children,m=i!==null?i.memoizedState:null;if(u.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(vs,qt),qt|=a;else{if((a&1073741824)===0)return i=m!==null?m.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:i,cachePool:null,transitions:null},s.updateQueue=null,Be(vs,qt),qt|=i,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=m!==null?m.baseLanes:a,Be(vs,qt),qt|=u}else m!==null?(u=m.baseLanes|a,s.memoizedState=null):u=a,Be(vs,qt),qt|=u;return Rt(i,s,f,a),s.child}function _p(i,s){var a=s.ref;(i===null&&a!==null||i!==null&&i.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Ec(i,s,a,u,f){var m=It(a)?ki:xt.current;return m=ls(s,m),ps(s,f),a=gc(i,s,a,u,m,f),u=_c(),i!==null&&!At?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~f,Fr(i,s,f)):(ze&&u&&Zl(s),s.flags|=1,Rt(i,s,a,f),s.child)}function vp(i,s,a,u,f){if(It(a)){var m=!0;Oo(s)}else m=!1;if(ps(s,f),s.stateNode===null)Xo(i,s),op(s,a,u),bc(s,a,u,f),u=!0;else if(i===null){var S=s.stateNode,E=s.memoizedProps;S.props=E;var R=S.context,A=a.contextType;typeof A=="object"&&A!==null?A=tr(A):(A=It(a)?ki:xt.current,A=ls(s,A));var te=a.getDerivedStateFromProps,re=typeof te=="function"||typeof S.getSnapshotBeforeUpdate=="function";re||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(E!==u||R!==A)&&ap(s,S,u,A),oi=!1;var ee=s.memoizedState;S.state=ee,Ho(s,u,S,f),R=s.memoizedState,E!==u||ee!==R||Bt.current||oi?(typeof te=="function"&&(xc(s,a,te,u),R=s.memoizedState),(E=oi||np(s,a,E,u,ee,R,A))?(re||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(s.flags|=4194308)):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=R),S.props=u,S.state=R,S.context=A,u=E):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{S=s.stateNode,jf(i,s),E=s.memoizedProps,A=s.type===s.elementType?E:mr(s.type,E),S.props=A,re=s.pendingProps,ee=S.context,R=a.contextType,typeof R=="object"&&R!==null?R=tr(R):(R=It(a)?ki:xt.current,R=ls(s,R));var ue=a.getDerivedStateFromProps;(te=typeof ue=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(E!==re||ee!==R)&&ap(s,S,u,R),oi=!1,ee=s.memoizedState,S.state=ee,Ho(s,u,S,f);var de=s.memoizedState;E!==re||ee!==de||Bt.current||oi?(typeof ue=="function"&&(xc(s,a,ue,u),de=s.memoizedState),(A=oi||np(s,a,A,u,ee,de,R)||!1)?(te||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(u,de,R),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(u,de,R)),typeof S.componentDidUpdate=="function"&&(s.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof S.componentDidUpdate!="function"||E===i.memoizedProps&&ee===i.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&ee===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=de),S.props=u,S.state=de,S.context=R,u=A):(typeof S.componentDidUpdate!="function"||E===i.memoizedProps&&ee===i.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&ee===i.memoizedState||(s.flags|=1024),u=!1)}return Pc(i,s,a,u,m,f)}function Pc(i,s,a,u,f,m){_p(i,s);var S=(s.flags&128)!==0;if(!u&&!S)return f&&bf(s,a,!1),Fr(i,s,m);u=s.stateNode,by.current=s;var E=S&&typeof a.getDerivedStateFromError!="function"?null:u.render();return s.flags|=1,i!==null&&S?(s.child=ds(s,i.child,null,m),s.child=ds(s,null,E,m)):Rt(i,s,E,m),s.memoizedState=u.state,f&&bf(s,a,!0),s.child}function yp(i){var s=i.stateNode;s.pendingContext?wf(i,s.pendingContext,s.pendingContext!==s.context):s.context&&wf(i,s.context,!1),uc(i,s.containerInfo)}function Sp(i,s,a,u,f){return hs(),ic(f),s.flags|=256,Rt(i,s,a,u),s.child}var Rc={dehydrated:null,treeContext:null,retryLane:0};function Nc(i){return{baseLanes:i,cachePool:null,transitions:null}}function wp(i,s,a){var u=s.pendingProps,f=Ue.current,m=!1,S=(s.flags&128)!==0,E;if((E=S)||(E=i!==null&&i.memoizedState===null?!1:(f&2)!==0),E?(m=!0,s.flags&=-129):(i===null||i.memoizedState!==null)&&(f|=1),Be(Ue,f&1),i===null)return rc(s),i=s.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((s.mode&1)===0?s.lanes=1:i.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(S=u.children,i=u.fallback,m?(u=s.mode,m=s.child,S={mode:"hidden",children:S},(u&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=S):m=ca(S,u,0,null),i=Ti(i,u,a,null),m.return=s,i.return=s,m.sibling=i,s.child=m,s.child.memoizedState=Nc(a),s.memoizedState=Rc,i):Lc(s,S));if(f=i.memoizedState,f!==null&&(E=f.dehydrated,E!==null))return Cy(i,s,S,u,E,f,a);if(m){m=u.fallback,S=s.mode,f=i.child,E=f.sibling;var R={mode:"hidden",children:u.children};return(S&1)===0&&s.child!==f?(u=s.child,u.childLanes=0,u.pendingProps=R,s.deletions=null):(u=fi(f,R),u.subtreeFlags=f.subtreeFlags&14680064),E!==null?m=fi(E,m):(m=Ti(m,S,a,null),m.flags|=2),m.return=s,u.return=s,u.sibling=m,s.child=u,u=m,m=s.child,S=i.child.memoizedState,S=S===null?Nc(a):{baseLanes:S.baseLanes|a,cachePool:null,transitions:S.transitions},m.memoizedState=S,m.childLanes=i.childLanes&~a,s.memoizedState=Rc,u}return m=i.child,i=m.sibling,u=fi(m,{mode:"visible",children:u.children}),(s.mode&1)===0&&(u.lanes=a),u.return=s,u.sibling=null,i!==null&&(a=s.deletions,a===null?(s.deletions=[i],s.flags|=16):a.push(i)),s.child=u,s.memoizedState=null,u}function Lc(i,s){return s=ca({mode:"visible",children:s},i.mode,0,null),s.return=i,i.child=s}function Go(i,s,a,u){return u!==null&&ic(u),ds(s,i.child,null,a),i=Lc(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function Cy(i,s,a,u,f,m,S){if(a)return s.flags&256?(s.flags&=-257,u=Cc(Error(r(422))),Go(i,s,S,u)):s.memoizedState!==null?(s.child=i.child,s.flags|=128,null):(m=u.fallback,f=s.mode,u=ca({mode:"visible",children:u.children},f,0,null),m=Ti(m,f,S,null),m.flags|=2,u.return=s,m.return=s,u.sibling=m,s.child=u,(s.mode&1)!==0&&ds(s,i.child,null,S),s.child.memoizedState=Nc(S),s.memoizedState=Rc,m);if((s.mode&1)===0)return Go(i,s,S,null);if(f.data==="$!"){if(u=f.nextSibling&&f.nextSibling.dataset,u)var E=u.dgst;return u=E,m=Error(r(419)),u=Cc(m,u,void 0),Go(i,s,S,u)}if(E=(S&i.childLanes)!==0,At||E){if(u=ht,u!==null){switch(S&-S){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(u.suspendedLanes|S))!==0?0:f,f!==0&&f!==m.retryLane&&(m.retryLane=f,Ir(i,f),vr(u,i,f,-1))}return Vc(),u=Cc(Error(r(421))),Go(i,s,S,u)}return f.data==="$?"?(s.flags|=128,s.child=i.child,s=Iy.bind(null,i),f._reactRetry=s,null):(i=m.treeContext,Vt=ri(f.nextSibling),Kt=s,ze=!0,pr=null,i!==null&&(Zt[er++]=Tr,Zt[er++]=Br,Zt[er++]=Ei,Tr=i.id,Br=i.overflow,Ei=s),s=Lc(s,u.children),s.flags|=4096,s)}function xp(i,s,a){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),ac(i.return,s,a)}function Dc(i,s,a,u,f){var m=i.memoizedState;m===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:f}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=a,m.tailMode=f)}function bp(i,s,a){var u=s.pendingProps,f=u.revealOrder,m=u.tail;if(Rt(i,s,u.children,a),u=Ue.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&xp(i,a,s);else if(i.tag===19)xp(i,a,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}if(Be(Ue,u),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)i=a.alternate,i!==null&&Wo(i)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Dc(s,!1,f,a,m);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(i=f.alternate,i!==null&&Wo(i)===null){s.child=f;break}i=f.sibling,f.sibling=a,a=f,f=i}Dc(s,!0,a,null,m);break;case"together":Dc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Xo(i,s){(s.mode&1)===0&&i!==null&&(i.alternate=null,s.alternate=null,s.flags|=2)}function Fr(i,s,a){if(i!==null&&(s.dependencies=i.dependencies),Di|=s.lanes,(a&s.childLanes)===0)return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,a=fi(i,i.pendingProps),s.child=a,a.return=s;i.sibling!==null;)i=i.sibling,a=a.sibling=fi(i,i.pendingProps),a.return=s;a.sibling=null}return s.child}function ky(i,s,a){switch(s.tag){case 3:yp(s),hs();break;case 5:If(s);break;case 1:It(s.type)&&Oo(s);break;case 4:uc(s,s.stateNode.containerInfo);break;case 10:var u=s.type._context,f=s.memoizedProps.value;Be(Fo,u._currentValue),u._currentValue=f;break;case 13:if(u=s.memoizedState,u!==null)return u.dehydrated!==null?(Be(Ue,Ue.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?wp(i,s,a):(Be(Ue,Ue.current&1),i=Fr(i,s,a),i!==null?i.sibling:null);Be(Ue,Ue.current&1);break;case 19:if(u=(a&s.childLanes)!==0,(i.flags&128)!==0){if(u)return bp(i,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Be(Ue,Ue.current),u)break;return null;case 22:case 23:return s.lanes=0,gp(i,s,a)}return Fr(i,s,a)}var Cp,Mc,kp,Ep;Cp=function(i,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)i.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Mc=function(){},kp=function(i,s,a,u){var f=i.memoizedProps;if(f!==u){i=s.stateNode,Ni(xr.current);var m=null;switch(a){case"input":f=We(i,f),u=We(i,u),m=[];break;case"select":f=q({},f,{value:void 0}),u=q({},u,{value:void 0}),m=[];break;case"textarea":f=ul(i,f),u=ul(i,u),m=[];break;default:typeof f.onClick!="function"&&typeof u.onClick=="function"&&(i.onclick=Lo)}dl(a,u);var S;a=null;for(A in f)if(!u.hasOwnProperty(A)&&f.hasOwnProperty(A)&&f[A]!=null)if(A==="style"){var E=f[A];for(S in E)E.hasOwnProperty(S)&&(a||(a={}),a[S]="")}else A!=="dangerouslySetInnerHTML"&&A!=="children"&&A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(o.hasOwnProperty(A)?m||(m=[]):(m=m||[]).push(A,null));for(A in u){var R=u[A];if(E=f?.[A],u.hasOwnProperty(A)&&R!==E&&(R!=null||E!=null))if(A==="style")if(E){for(S in E)!E.hasOwnProperty(S)||R&&R.hasOwnProperty(S)||(a||(a={}),a[S]="");for(S in R)R.hasOwnProperty(S)&&E[S]!==R[S]&&(a||(a={}),a[S]=R[S])}else a||(m||(m=[]),m.push(A,a)),a=R;else A==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,E=E?E.__html:void 0,R!=null&&E!==R&&(m=m||[]).push(A,R)):A==="children"?typeof R!="string"&&typeof R!="number"||(m=m||[]).push(A,""+R):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&(o.hasOwnProperty(A)?(R!=null&&A==="onScroll"&&Ie("scroll",i),m||E===R||(m=[])):(m=m||[]).push(A,R))}a&&(m=m||[]).push("style",a);var A=m;(s.updateQueue=A)&&(s.flags|=4)}},Ep=function(i,s,a,u){a!==u&&(s.flags|=4)};function _n(i,s){if(!ze)switch(i.tailMode){case"hidden":s=i.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function Ct(i){var s=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(s)for(var f=i.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags&14680064,u|=f.flags&14680064,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=u,i.childLanes=a,s}function Ey(i,s,a){var u=s.pendingProps;switch(ec(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(s),null;case 1:return It(s.type)&&Mo(),Ct(s),null;case 3:return u=s.stateNode,ms(),Ae(Bt),Ae(xt),fc(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(Io(s)?s.flags|=4:i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,pr!==null&&(Wc(pr),pr=null))),Mc(i,s),Ct(s),null;case 5:hc(s);var f=Ni(dn.current);if(a=s.type,i!==null&&s.stateNode!=null)kp(i,s,a,u,f),i.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!u){if(s.stateNode===null)throw Error(r(166));return Ct(s),null}if(i=Ni(xr.current),Io(s)){u=s.stateNode,a=s.type;var m=s.memoizedProps;switch(u[wr]=s,u[an]=m,i=(s.mode&1)!==0,a){case"dialog":Ie("cancel",u),Ie("close",u);break;case"iframe":case"object":case"embed":Ie("load",u);break;case"video":case"audio":for(f=0;f<sn.length;f++)Ie(sn[f],u);break;case"source":Ie("error",u);break;case"img":case"image":case"link":Ie("error",u),Ie("load",u);break;case"details":Ie("toggle",u);break;case"input":it(u,m),Ie("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!m.multiple},Ie("invalid",u);break;case"textarea":ld(u,m),Ie("invalid",u)}dl(a,m),f=null;for(var S in m)if(m.hasOwnProperty(S)){var E=m[S];S==="children"?typeof E=="string"?u.textContent!==E&&(m.suppressHydrationWarning!==!0&&No(u.textContent,E,i),f=["children",E]):typeof E=="number"&&u.textContent!==""+E&&(m.suppressHydrationWarning!==!0&&No(u.textContent,E,i),f=["children",""+E]):o.hasOwnProperty(S)&&E!=null&&S==="onScroll"&&Ie("scroll",u)}switch(a){case"input":Pt(u),ad(u,m,!0);break;case"textarea":Pt(u),ud(u);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(u.onclick=Lo)}u=f,s.updateQueue=u,u!==null&&(s.flags|=4)}else{S=f.nodeType===9?f:f.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=hd(a)),i==="http://www.w3.org/1999/xhtml"?a==="script"?(i=S.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof u.is=="string"?i=S.createElement(a,{is:u.is}):(i=S.createElement(a),a==="select"&&(S=i,u.multiple?S.multiple=!0:u.size&&(S.size=u.size))):i=S.createElementNS(i,a),i[wr]=s,i[an]=u,Cp(i,s,!1,!1),s.stateNode=i;e:{switch(S=fl(a,u),a){case"dialog":Ie("cancel",i),Ie("close",i),f=u;break;case"iframe":case"object":case"embed":Ie("load",i),f=u;break;case"video":case"audio":for(f=0;f<sn.length;f++)Ie(sn[f],i);f=u;break;case"source":Ie("error",i),f=u;break;case"img":case"image":case"link":Ie("error",i),Ie("load",i),f=u;break;case"details":Ie("toggle",i),f=u;break;case"input":it(i,u),f=We(i,u),Ie("invalid",i);break;case"option":f=u;break;case"select":i._wrapperState={wasMultiple:!!u.multiple},f=q({},u,{value:void 0}),Ie("invalid",i);break;case"textarea":ld(i,u),f=ul(i,u),Ie("invalid",i);break;default:f=u}dl(a,f),E=f;for(m in E)if(E.hasOwnProperty(m)){var R=E[m];m==="style"?pd(i,R):m==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&dd(i,R)):m==="children"?typeof R=="string"?(a!=="textarea"||R!=="")&&As(i,R):typeof R=="number"&&As(i,""+R):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?R!=null&&m==="onScroll"&&Ie("scroll",i):R!=null&&$(i,m,R,S))}switch(a){case"input":Pt(i),ad(i,u,!1);break;case"textarea":Pt(i),ud(i);break;case"option":u.value!=null&&i.setAttribute("value",""+ge(u.value));break;case"select":i.multiple=!!u.multiple,m=u.value,m!=null?Gi(i,!!u.multiple,m,!1):u.defaultValue!=null&&Gi(i,!!u.multiple,u.defaultValue,!0);break;default:typeof f.onClick=="function"&&(i.onclick=Lo)}switch(a){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ct(s),null;case 6:if(i&&s.stateNode!=null)Ep(i,s,i.memoizedProps,u);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(a=Ni(dn.current),Ni(xr.current),Io(s)){if(u=s.stateNode,a=s.memoizedProps,u[wr]=s,(m=u.nodeValue!==a)&&(i=Kt,i!==null))switch(i.tag){case 3:No(u.nodeValue,a,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&No(u.nodeValue,a,(i.mode&1)!==0)}m&&(s.flags|=4)}else u=(a.nodeType===9?a:a.ownerDocument).createTextNode(u),u[wr]=s,s.stateNode=u}return Ct(s),null;case 13:if(Ae(Ue),u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ze&&Vt!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Nf(),hs(),s.flags|=98560,m=!1;else if(m=Io(s),u!==null&&u.dehydrated!==null){if(i===null){if(!m)throw Error(r(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[wr]=s}else hs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ct(s),m=!1}else pr!==null&&(Wc(pr),pr=null),m=!0;if(!m)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(u=u!==null,u!==(i!==null&&i.memoizedState!==null)&&u&&(s.child.flags|=8192,(s.mode&1)!==0&&(i===null||(Ue.current&1)!==0?nt===0&&(nt=3):Vc())),s.updateQueue!==null&&(s.flags|=4),Ct(s),null);case 4:return ms(),Mc(i,s),i===null&&nn(s.stateNode.containerInfo),Ct(s),null;case 10:return oc(s.type._context),Ct(s),null;case 17:return It(s.type)&&Mo(),Ct(s),null;case 19:if(Ae(Ue),m=s.memoizedState,m===null)return Ct(s),null;if(u=(s.flags&128)!==0,S=m.rendering,S===null)if(u)_n(m,!1);else{if(nt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(S=Wo(i),S!==null){for(s.flags|=128,_n(m,!1),u=S.updateQueue,u!==null&&(s.updateQueue=u,s.flags|=4),s.subtreeFlags=0,u=a,a=s.child;a!==null;)m=a,i=u,m.flags&=14680066,S=m.alternate,S===null?(m.childLanes=0,m.lanes=i,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=S.childLanes,m.lanes=S.lanes,m.child=S.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=S.memoizedProps,m.memoizedState=S.memoizedState,m.updateQueue=S.updateQueue,m.type=S.type,i=S.dependencies,m.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),a=a.sibling;return Be(Ue,Ue.current&1|2),s.child}i=i.sibling}m.tail!==null&&Xe()>ys&&(s.flags|=128,u=!0,_n(m,!1),s.lanes=4194304)}else{if(!u)if(i=Wo(S),i!==null){if(s.flags|=128,u=!0,a=i.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),_n(m,!0),m.tail===null&&m.tailMode==="hidden"&&!S.alternate&&!ze)return Ct(s),null}else 2*Xe()-m.renderingStartTime>ys&&a!==1073741824&&(s.flags|=128,u=!0,_n(m,!1),s.lanes=4194304);m.isBackwards?(S.sibling=s.child,s.child=S):(a=m.last,a!==null?a.sibling=S:s.child=S,m.last=S)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=Xe(),s.sibling=null,a=Ue.current,Be(Ue,u?a&1|2:a&1),s):(Ct(s),null);case 22:case 23:return Kc(),u=s.memoizedState!==null,i!==null&&i.memoizedState!==null!==u&&(s.flags|=8192),u&&(s.mode&1)!==0?(qt&1073741824)!==0&&(Ct(s),s.subtreeFlags&6&&(s.flags|=8192)):Ct(s),null;case 24:return null;case 25:return null}throw Error(r(156,s.tag))}function Py(i,s){switch(ec(s),s.tag){case 1:return It(s.type)&&Mo(),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return ms(),Ae(Bt),Ae(xt),fc(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 5:return hc(s),null;case 13:if(Ae(Ue),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));hs()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return Ae(Ue),null;case 4:return ms(),null;case 10:return oc(s.type._context),null;case 22:case 23:return Kc(),null;case 24:return null;default:return null}}var Jo=!1,kt=!1,Ry=typeof WeakSet=="function"?WeakSet:Set,he=null;function _s(i,s){var a=i.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(u){Qe(i,s,u)}else a.current=null}function Oc(i,s,a){try{a()}catch(u){Qe(i,s,u)}}var Pp=!1;function Ny(i,s){if(Kl=vo,i=nf(),Il(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var S=0,E=-1,R=-1,A=0,te=0,re=i,ee=null;t:for(;;){for(var ue;re!==a||f!==0&&re.nodeType!==3||(E=S+f),re!==m||u!==0&&re.nodeType!==3||(R=S+u),re.nodeType===3&&(S+=re.nodeValue.length),(ue=re.firstChild)!==null;)ee=re,re=ue;for(;;){if(re===i)break t;if(ee===a&&++A===f&&(E=S),ee===m&&++te===u&&(R=S),(ue=re.nextSibling)!==null)break;re=ee,ee=re.parentNode}re=ue}a=E===-1||R===-1?null:{start:E,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(Vl={focusedElem:i,selectionRange:a},vo=!1,he=s;he!==null;)if(s=he,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,he=i;else for(;he!==null;){s=he;try{var de=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var fe=de.memoizedProps,Je=de.memoizedState,O=s.stateNode,N=O.getSnapshotBeforeUpdate(s.elementType===s.type?fe:mr(s.type,fe),Je);O.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var T=s.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ne){Qe(s,s.return,ne)}if(i=s.sibling,i!==null){i.return=s.return,he=i;break}he=s.return}return de=Pp,Pp=!1,de}function vn(i,s,a){var u=s.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var f=u=u.next;do{if((f.tag&i)===i){var m=f.destroy;f.destroy=void 0,m!==void 0&&Oc(s,a,m)}f=f.next}while(f!==u)}}function Zo(i,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&i)===i){var u=a.create;a.destroy=u()}a=a.next}while(a!==s)}}function jc(i){var s=i.ref;if(s!==null){var a=i.stateNode;switch(i.tag){case 5:i=a;break;default:i=a}typeof s=="function"?s(i):s.current=i}}function Rp(i){var s=i.alternate;s!==null&&(i.alternate=null,Rp(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&(delete s[wr],delete s[an],delete s[Gl],delete s[hy],delete s[dy])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Np(i){return i.tag===5||i.tag===3||i.tag===4}function Lp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Np(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Tc(i,s,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(i,s):a.insertBefore(i,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(i,a)):(s=a,s.appendChild(i)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Lo));else if(u!==4&&(i=i.child,i!==null))for(Tc(i,s,a),i=i.sibling;i!==null;)Tc(i,s,a),i=i.sibling}function Bc(i,s,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?a.insertBefore(i,s):a.appendChild(i);else if(u!==4&&(i=i.child,i!==null))for(Bc(i,s,a),i=i.sibling;i!==null;)Bc(i,s,a),i=i.sibling}var vt=null,gr=!1;function li(i,s,a){for(a=a.child;a!==null;)Dp(i,s,a),a=a.sibling}function Dp(i,s,a){if(Sr&&typeof Sr.onCommitFiberUnmount=="function")try{Sr.onCommitFiberUnmount(ho,a)}catch{}switch(a.tag){case 5:kt||_s(a,s);case 6:var u=vt,f=gr;vt=null,li(i,s,a),vt=u,gr=f,vt!==null&&(gr?(i=vt,a=a.stateNode,i.nodeType===8?i.parentNode.removeChild(a):i.removeChild(a)):vt.removeChild(a.stateNode));break;case 18:vt!==null&&(gr?(i=vt,a=a.stateNode,i.nodeType===8?Yl(i.parentNode,a):i.nodeType===1&&Yl(i,a),Ys(i)):Yl(vt,a.stateNode));break;case 4:u=vt,f=gr,vt=a.stateNode.containerInfo,gr=!0,li(i,s,a),vt=u,gr=f;break;case 0:case 11:case 14:case 15:if(!kt&&(u=a.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){f=u=u.next;do{var m=f,S=m.destroy;m=m.tag,S!==void 0&&((m&2)!==0||(m&4)!==0)&&Oc(a,s,S),f=f.next}while(f!==u)}li(i,s,a);break;case 1:if(!kt&&(_s(a,s),u=a.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=a.memoizedProps,u.state=a.memoizedState,u.componentWillUnmount()}catch(E){Qe(a,s,E)}li(i,s,a);break;case 21:li(i,s,a);break;case 22:a.mode&1?(kt=(u=kt)||a.memoizedState!==null,li(i,s,a),kt=u):li(i,s,a);break;default:li(i,s,a)}}function Mp(i){var s=i.updateQueue;if(s!==null){i.updateQueue=null;var a=i.stateNode;a===null&&(a=i.stateNode=new Ry),s.forEach(function(u){var f=Ay.bind(null,i,u);a.has(u)||(a.add(u),u.then(f,f))})}}function _r(i,s){var a=s.deletions;if(a!==null)for(var u=0;u<a.length;u++){var f=a[u];try{var m=i,S=s,E=S;e:for(;E!==null;){switch(E.tag){case 5:vt=E.stateNode,gr=!1;break e;case 3:vt=E.stateNode.containerInfo,gr=!0;break e;case 4:vt=E.stateNode.containerInfo,gr=!0;break e}E=E.return}if(vt===null)throw Error(r(160));Dp(m,S,f),vt=null,gr=!1;var R=f.alternate;R!==null&&(R.return=null),f.return=null}catch(A){Qe(f,s,A)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Op(s,i),s=s.sibling}function Op(i,s){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(_r(s,i),Cr(i),u&4){try{vn(3,i,i.return),Zo(3,i)}catch(fe){Qe(i,i.return,fe)}try{vn(5,i,i.return)}catch(fe){Qe(i,i.return,fe)}}break;case 1:_r(s,i),Cr(i),u&512&&a!==null&&_s(a,a.return);break;case 5:if(_r(s,i),Cr(i),u&512&&a!==null&&_s(a,a.return),i.flags&32){var f=i.stateNode;try{As(f,"")}catch(fe){Qe(i,i.return,fe)}}if(u&4&&(f=i.stateNode,f!=null)){var m=i.memoizedProps,S=a!==null?a.memoizedProps:m,E=i.type,R=i.updateQueue;if(i.updateQueue=null,R!==null)try{E==="input"&&m.type==="radio"&&m.name!=null&&od(f,m),fl(E,S);var A=fl(E,m);for(S=0;S<R.length;S+=2){var te=R[S],re=R[S+1];te==="style"?pd(f,re):te==="dangerouslySetInnerHTML"?dd(f,re):te==="children"?As(f,re):$(f,te,re,A)}switch(E){case"input":ll(f,m);break;case"textarea":cd(f,m);break;case"select":var ee=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!m.multiple;var ue=m.value;ue!=null?Gi(f,!!m.multiple,ue,!1):ee!==!!m.multiple&&(m.defaultValue!=null?Gi(f,!!m.multiple,m.defaultValue,!0):Gi(f,!!m.multiple,m.multiple?[]:"",!1))}f[an]=m}catch(fe){Qe(i,i.return,fe)}}break;case 6:if(_r(s,i),Cr(i),u&4){if(i.stateNode===null)throw Error(r(162));f=i.stateNode,m=i.memoizedProps;try{f.nodeValue=m}catch(fe){Qe(i,i.return,fe)}}break;case 3:if(_r(s,i),Cr(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Ys(s.containerInfo)}catch(fe){Qe(i,i.return,fe)}break;case 4:_r(s,i),Cr(i);break;case 13:_r(s,i),Cr(i),f=i.child,f.flags&8192&&(m=f.memoizedState!==null,f.stateNode.isHidden=m,!m||f.alternate!==null&&f.alternate.memoizedState!==null||(Fc=Xe())),u&4&&Mp(i);break;case 22:if(te=a!==null&&a.memoizedState!==null,i.mode&1?(kt=(A=kt)||te,_r(s,i),kt=A):_r(s,i),Cr(i),u&8192){if(A=i.memoizedState!==null,(i.stateNode.isHidden=A)&&!te&&(i.mode&1)!==0)for(he=i,te=i.child;te!==null;){for(re=he=te;he!==null;){switch(ee=he,ue=ee.child,ee.tag){case 0:case 11:case 14:case 15:vn(4,ee,ee.return);break;case 1:_s(ee,ee.return);var de=ee.stateNode;if(typeof de.componentWillUnmount=="function"){u=ee,a=ee.return;try{s=u,de.props=s.memoizedProps,de.state=s.memoizedState,de.componentWillUnmount()}catch(fe){Qe(u,a,fe)}}break;case 5:_s(ee,ee.return);break;case 22:if(ee.memoizedState!==null){Bp(re);continue}}ue!==null?(ue.return=ee,he=ue):Bp(re)}te=te.sibling}e:for(te=null,re=i;;){if(re.tag===5){if(te===null){te=re;try{f=re.stateNode,A?(m=f.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(E=re.stateNode,R=re.memoizedProps.style,S=R!=null&&R.hasOwnProperty("display")?R.display:null,E.style.display=fd("display",S))}catch(fe){Qe(i,i.return,fe)}}}else if(re.tag===6){if(te===null)try{re.stateNode.nodeValue=A?"":re.memoizedProps}catch(fe){Qe(i,i.return,fe)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===i)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===i)break e;for(;re.sibling===null;){if(re.return===null||re.return===i)break e;te===re&&(te=null),re=re.return}te===re&&(te=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:_r(s,i),Cr(i),u&4&&Mp(i);break;case 21:break;default:_r(s,i),Cr(i)}}function Cr(i){var s=i.flags;if(s&2){try{e:{for(var a=i.return;a!==null;){if(Np(a)){var u=a;break e}a=a.return}throw Error(r(160))}switch(u.tag){case 5:var f=u.stateNode;u.flags&32&&(As(f,""),u.flags&=-33);var m=Lp(i);Bc(i,m,f);break;case 3:case 4:var S=u.stateNode.containerInfo,E=Lp(i);Tc(i,E,S);break;default:throw Error(r(161))}}catch(R){Qe(i,i.return,R)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Ly(i,s,a){he=i,jp(i)}function jp(i,s,a){for(var u=(i.mode&1)!==0;he!==null;){var f=he,m=f.child;if(f.tag===22&&u){var S=f.memoizedState!==null||Jo;if(!S){var E=f.alternate,R=E!==null&&E.memoizedState!==null||kt;E=Jo;var A=kt;if(Jo=S,(kt=R)&&!A)for(he=f;he!==null;)S=he,R=S.child,S.tag===22&&S.memoizedState!==null?Ip(f):R!==null?(R.return=S,he=R):Ip(f);for(;m!==null;)he=m,jp(m),m=m.sibling;he=f,Jo=E,kt=A}Tp(i)}else(f.subtreeFlags&8772)!==0&&m!==null?(m.return=f,he=m):Tp(i)}}function Tp(i){for(;he!==null;){var s=he;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:kt||Zo(5,s);break;case 1:var u=s.stateNode;if(s.flags&4&&!kt)if(a===null)u.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:mr(s.type,a.memoizedProps);u.componentDidUpdate(f,a.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var m=s.updateQueue;m!==null&&Bf(s,m,u);break;case 3:var S=s.updateQueue;if(S!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Bf(s,S,a)}break;case 5:var E=s.stateNode;if(a===null&&s.flags&4){a=E;var R=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&a.focus();break;case"img":R.src&&(a.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var A=s.alternate;if(A!==null){var te=A.memoizedState;if(te!==null){var re=te.dehydrated;re!==null&&Ys(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}kt||s.flags&512&&jc(s)}catch(ee){Qe(s,s.return,ee)}}if(s===i){he=null;break}if(a=s.sibling,a!==null){a.return=s.return,he=a;break}he=s.return}}function Bp(i){for(;he!==null;){var s=he;if(s===i){he=null;break}var a=s.sibling;if(a!==null){a.return=s.return,he=a;break}he=s.return}}function Ip(i){for(;he!==null;){var s=he;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Zo(4,s)}catch(R){Qe(s,a,R)}break;case 1:var u=s.stateNode;if(typeof u.componentDidMount=="function"){var f=s.return;try{u.componentDidMount()}catch(R){Qe(s,f,R)}}var m=s.return;try{jc(s)}catch(R){Qe(s,m,R)}break;case 5:var S=s.return;try{jc(s)}catch(R){Qe(s,S,R)}}}catch(R){Qe(s,s.return,R)}if(s===i){he=null;break}var E=s.sibling;if(E!==null){E.return=s.return,he=E;break}he=s.return}}var Dy=Math.ceil,ea=F.ReactCurrentDispatcher,Ic=F.ReactCurrentOwner,ir=F.ReactCurrentBatchConfig,De=0,ht=null,et=null,yt=0,qt=0,vs=ii(0),nt=0,yn=null,Di=0,ta=0,Ac=0,Sn=null,Ft=null,Fc=0,ys=1/0,zr=null,ra=!1,zc=null,ci=null,ia=!1,ui=null,sa=0,wn=0,$c=null,na=-1,oa=0;function Nt(){return(De&6)!==0?Xe():na!==-1?na:na=Xe()}function hi(i){return(i.mode&1)===0?1:(De&2)!==0&&yt!==0?yt&-yt:py.transition!==null?(oa===0&&(oa=Nd()),oa):(i=Oe,i!==0||(i=window.event,i=i===void 0?16:Ad(i.type)),i)}function vr(i,s,a,u){if(50<wn)throw wn=0,$c=null,Error(r(185));Us(i,a,u),((De&2)===0||i!==ht)&&(i===ht&&((De&2)===0&&(ta|=a),nt===4&&di(i,yt)),zt(i,u),a===1&&De===0&&(s.mode&1)===0&&(ys=Xe()+500,jo&&ni()))}function zt(i,s){var a=i.callbackNode;p0(i,s);var u=mo(i,i===ht?yt:0);if(u===0)a!==null&&Ed(a),i.callbackNode=null,i.callbackPriority=0;else if(s=u&-u,i.callbackPriority!==s){if(a!=null&&Ed(a),s===1)i.tag===0?fy(Fp.bind(null,i)):Cf(Fp.bind(null,i)),cy(function(){(De&6)===0&&ni()}),a=null;else{switch(Ld(u)){case 1:a=Sl;break;case 4:a=Pd;break;case 16:a=uo;break;case 536870912:a=Rd;break;default:a=uo}a=qp(a,Ap.bind(null,i))}i.callbackPriority=s,i.callbackNode=a}}function Ap(i,s){if(na=-1,oa=0,(De&6)!==0)throw Error(r(327));var a=i.callbackNode;if(Ss()&&i.callbackNode!==a)return null;var u=mo(i,i===ht?yt:0);if(u===0)return null;if((u&30)!==0||(u&i.expiredLanes)!==0||s)s=aa(i,u);else{s=u;var f=De;De|=2;var m=$p();(ht!==i||yt!==s)&&(zr=null,ys=Xe()+500,Oi(i,s));do try{jy();break}catch(E){zp(i,E)}while(!0);nc(),ea.current=m,De=f,et!==null?s=0:(ht=null,yt=0,s=nt)}if(s!==0){if(s===2&&(f=wl(i),f!==0&&(u=f,s=Hc(i,f))),s===1)throw a=yn,Oi(i,0),di(i,u),zt(i,Xe()),a;if(s===6)di(i,u);else{if(f=i.current.alternate,(u&30)===0&&!My(f)&&(s=aa(i,u),s===2&&(m=wl(i),m!==0&&(u=m,s=Hc(i,m))),s===1))throw a=yn,Oi(i,0),di(i,u),zt(i,Xe()),a;switch(i.finishedWork=f,i.finishedLanes=u,s){case 0:case 1:throw Error(r(345));case 2:ji(i,Ft,zr);break;case 3:if(di(i,u),(u&130023424)===u&&(s=Fc+500-Xe(),10<s)){if(mo(i,0)!==0)break;if(f=i.suspendedLanes,(f&u)!==u){Nt(),i.pingedLanes|=i.suspendedLanes&f;break}i.timeoutHandle=Ql(ji.bind(null,i,Ft,zr),s);break}ji(i,Ft,zr);break;case 4:if(di(i,u),(u&4194240)===u)break;for(s=i.eventTimes,f=-1;0<u;){var S=31-dr(u);m=1<<S,S=s[S],S>f&&(f=S),u&=~m}if(u=f,u=Xe()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Dy(u/1960))-u,10<u){i.timeoutHandle=Ql(ji.bind(null,i,Ft,zr),u);break}ji(i,Ft,zr);break;case 5:ji(i,Ft,zr);break;default:throw Error(r(329))}}}return zt(i,Xe()),i.callbackNode===a?Ap.bind(null,i):null}function Hc(i,s){var a=Sn;return i.current.memoizedState.isDehydrated&&(Oi(i,s).flags|=256),i=aa(i,s),i!==2&&(s=Ft,Ft=a,s!==null&&Wc(s)),i}function Wc(i){Ft===null?Ft=i:Ft.push.apply(Ft,i)}function My(i){for(var s=i;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var u=0;u<a.length;u++){var f=a[u],m=f.getSnapshot;f=f.value;try{if(!fr(m(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function di(i,s){for(s&=~Ac,s&=~ta,i.suspendedLanes|=s,i.pingedLanes&=~s,i=i.expirationTimes;0<s;){var a=31-dr(s),u=1<<a;i[a]=-1,s&=~u}}function Fp(i){if((De&6)!==0)throw Error(r(327));Ss();var s=mo(i,0);if((s&1)===0)return zt(i,Xe()),null;var a=aa(i,s);if(i.tag!==0&&a===2){var u=wl(i);u!==0&&(s=u,a=Hc(i,u))}if(a===1)throw a=yn,Oi(i,0),di(i,s),zt(i,Xe()),a;if(a===6)throw Error(r(345));return i.finishedWork=i.current.alternate,i.finishedLanes=s,ji(i,Ft,zr),zt(i,Xe()),null}function Uc(i,s){var a=De;De|=1;try{return i(s)}finally{De=a,De===0&&(ys=Xe()+500,jo&&ni())}}function Mi(i){ui!==null&&ui.tag===0&&(De&6)===0&&Ss();var s=De;De|=1;var a=ir.transition,u=Oe;try{if(ir.transition=null,Oe=1,i)return i()}finally{Oe=u,ir.transition=a,De=s,(De&6)===0&&ni()}}function Kc(){qt=vs.current,Ae(vs)}function Oi(i,s){i.finishedWork=null,i.finishedLanes=0;var a=i.timeoutHandle;if(a!==-1&&(i.timeoutHandle=-1,ly(a)),et!==null)for(a=et.return;a!==null;){var u=a;switch(ec(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Mo();break;case 3:ms(),Ae(Bt),Ae(xt),fc();break;case 5:hc(u);break;case 4:ms();break;case 13:Ae(Ue);break;case 19:Ae(Ue);break;case 10:oc(u.type._context);break;case 22:case 23:Kc()}a=a.return}if(ht=i,et=i=fi(i.current,null),yt=qt=s,nt=0,yn=null,Ac=ta=Di=0,Ft=Sn=null,Ri!==null){for(s=0;s<Ri.length;s++)if(a=Ri[s],u=a.interleaved,u!==null){a.interleaved=null;var f=u.next,m=a.pending;if(m!==null){var S=m.next;m.next=f,u.next=S}a.pending=u}Ri=null}return i}function zp(i,s){do{var a=et;try{if(nc(),Uo.current=Qo,Ko){for(var u=Ke.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}Ko=!1}if(Li=0,ut=st=Ke=null,fn=!1,pn=0,Ic.current=null,a===null||a.return===null){nt=1,yn=s,et=null;break}e:{var m=i,S=a.return,E=a,R=s;if(s=yt,E.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var A=R,te=E,re=te.tag;if((te.mode&1)===0&&(re===0||re===11||re===15)){var ee=te.alternate;ee?(te.updateQueue=ee.updateQueue,te.memoizedState=ee.memoizedState,te.lanes=ee.lanes):(te.updateQueue=null,te.memoizedState=null)}var ue=hp(S);if(ue!==null){ue.flags&=-257,dp(ue,S,E,m,s),ue.mode&1&&up(m,A,s),s=ue,R=A;var de=s.updateQueue;if(de===null){var fe=new Set;fe.add(R),s.updateQueue=fe}else de.add(R);break e}else{if((s&1)===0){up(m,A,s),Vc();break e}R=Error(r(426))}}else if(ze&&E.mode&1){var Je=hp(S);if(Je!==null){(Je.flags&65536)===0&&(Je.flags|=256),dp(Je,S,E,m,s),ic(gs(R,E));break e}}m=R=gs(R,E),nt!==4&&(nt=2),Sn===null?Sn=[m]:Sn.push(m),m=S;do{switch(m.tag){case 3:m.flags|=65536,s&=-s,m.lanes|=s;var O=lp(m,R,s);Tf(m,O);break e;case 1:E=R;var N=m.type,T=m.stateNode;if((m.flags&128)===0&&(typeof N.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ci===null||!ci.has(T)))){m.flags|=65536,s&=-s,m.lanes|=s;var ne=cp(m,E,s);Tf(m,ne);break e}}m=m.return}while(m!==null)}Wp(a)}catch(me){s=me,et===a&&a!==null&&(et=a=a.return);continue}break}while(!0)}function $p(){var i=ea.current;return ea.current=Qo,i===null?Qo:i}function Vc(){(nt===0||nt===3||nt===2)&&(nt=4),ht===null||(Di&268435455)===0&&(ta&268435455)===0||di(ht,yt)}function aa(i,s){var a=De;De|=2;var u=$p();(ht!==i||yt!==s)&&(zr=null,Oi(i,s));do try{Oy();break}catch(f){zp(i,f)}while(!0);if(nc(),De=a,ea.current=u,et!==null)throw Error(r(261));return ht=null,yt=0,nt}function Oy(){for(;et!==null;)Hp(et)}function jy(){for(;et!==null&&!n0();)Hp(et)}function Hp(i){var s=Vp(i.alternate,i,qt);i.memoizedProps=i.pendingProps,s===null?Wp(i):et=s,Ic.current=null}function Wp(i){var s=i;do{var a=s.alternate;if(i=s.return,(s.flags&32768)===0){if(a=Ey(a,s,qt),a!==null){et=a;return}}else{if(a=Py(a,s),a!==null){a.flags&=32767,et=a;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{nt=6,et=null;return}}if(s=s.sibling,s!==null){et=s;return}et=s=i}while(s!==null);nt===0&&(nt=5)}function ji(i,s,a){var u=Oe,f=ir.transition;try{ir.transition=null,Oe=1,Ty(i,s,a,u)}finally{ir.transition=f,Oe=u}return null}function Ty(i,s,a,u){do Ss();while(ui!==null);if((De&6)!==0)throw Error(r(327));a=i.finishedWork;var f=i.finishedLanes;if(a===null)return null;if(i.finishedWork=null,i.finishedLanes=0,a===i.current)throw Error(r(177));i.callbackNode=null,i.callbackPriority=0;var m=a.lanes|a.childLanes;if(m0(i,m),i===ht&&(et=ht=null,yt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||ia||(ia=!0,qp(uo,function(){return Ss(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=ir.transition,ir.transition=null;var S=Oe;Oe=1;var E=De;De|=4,Ic.current=null,Ny(i,a),Op(a,i),ty(Vl),vo=!!Kl,Vl=Kl=null,i.current=a,Ly(a),o0(),De=E,Oe=S,ir.transition=m}else i.current=a;if(ia&&(ia=!1,ui=i,sa=f),m=i.pendingLanes,m===0&&(ci=null),c0(a.stateNode),zt(i,Xe()),s!==null)for(u=i.onRecoverableError,a=0;a<s.length;a++)f=s[a],u(f.value,{componentStack:f.stack,digest:f.digest});if(ra)throw ra=!1,i=zc,zc=null,i;return(sa&1)!==0&&i.tag!==0&&Ss(),m=i.pendingLanes,(m&1)!==0?i===$c?wn++:(wn=0,$c=i):wn=0,ni(),null}function Ss(){if(ui!==null){var i=Ld(sa),s=ir.transition,a=Oe;try{if(ir.transition=null,Oe=16>i?16:i,ui===null)var u=!1;else{if(i=ui,ui=null,sa=0,(De&6)!==0)throw Error(r(331));var f=De;for(De|=4,he=i.current;he!==null;){var m=he,S=m.child;if((he.flags&16)!==0){var E=m.deletions;if(E!==null){for(var R=0;R<E.length;R++){var A=E[R];for(he=A;he!==null;){var te=he;switch(te.tag){case 0:case 11:case 15:vn(8,te,m)}var re=te.child;if(re!==null)re.return=te,he=re;else for(;he!==null;){te=he;var ee=te.sibling,ue=te.return;if(Rp(te),te===A){he=null;break}if(ee!==null){ee.return=ue,he=ee;break}he=ue}}}var de=m.alternate;if(de!==null){var fe=de.child;if(fe!==null){de.child=null;do{var Je=fe.sibling;fe.sibling=null,fe=Je}while(fe!==null)}}he=m}}if((m.subtreeFlags&2064)!==0&&S!==null)S.return=m,he=S;else e:for(;he!==null;){if(m=he,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:vn(9,m,m.return)}var O=m.sibling;if(O!==null){O.return=m.return,he=O;break e}he=m.return}}var N=i.current;for(he=N;he!==null;){S=he;var T=S.child;if((S.subtreeFlags&2064)!==0&&T!==null)T.return=S,he=T;else e:for(S=N;he!==null;){if(E=he,(E.flags&2048)!==0)try{switch(E.tag){case 0:case 11:case 15:Zo(9,E)}}catch(me){Qe(E,E.return,me)}if(E===S){he=null;break e}var ne=E.sibling;if(ne!==null){ne.return=E.return,he=ne;break e}he=E.return}}if(De=f,ni(),Sr&&typeof Sr.onPostCommitFiberRoot=="function")try{Sr.onPostCommitFiberRoot(ho,i)}catch{}u=!0}return u}finally{Oe=a,ir.transition=s}}return!1}function Up(i,s,a){s=gs(a,s),s=lp(i,s,1),i=ai(i,s,1),s=Nt(),i!==null&&(Us(i,1,s),zt(i,s))}function Qe(i,s,a){if(i.tag===3)Up(i,i,a);else for(;s!==null;){if(s.tag===3){Up(s,i,a);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ci===null||!ci.has(u))){i=gs(a,i),i=cp(s,i,1),s=ai(s,i,1),i=Nt(),s!==null&&(Us(s,1,i),zt(s,i));break}}s=s.return}}function By(i,s,a){var u=i.pingCache;u!==null&&u.delete(s),s=Nt(),i.pingedLanes|=i.suspendedLanes&a,ht===i&&(yt&a)===a&&(nt===4||nt===3&&(yt&130023424)===yt&&500>Xe()-Fc?Oi(i,0):Ac|=a),zt(i,s)}function Kp(i,s){s===0&&((i.mode&1)===0?s=1:(s=po,po<<=1,(po&130023424)===0&&(po=4194304)));var a=Nt();i=Ir(i,s),i!==null&&(Us(i,s,a),zt(i,a))}function Iy(i){var s=i.memoizedState,a=0;s!==null&&(a=s.retryLane),Kp(i,a)}function Ay(i,s){var a=0;switch(i.tag){case 13:var u=i.stateNode,f=i.memoizedState;f!==null&&(a=f.retryLane);break;case 19:u=i.stateNode;break;default:throw Error(r(314))}u!==null&&u.delete(s),Kp(i,a)}var Vp;Vp=function(i,s,a){if(i!==null)if(i.memoizedProps!==s.pendingProps||Bt.current)At=!0;else{if((i.lanes&a)===0&&(s.flags&128)===0)return At=!1,ky(i,s,a);At=(i.flags&131072)!==0}else At=!1,ze&&(s.flags&1048576)!==0&&kf(s,Bo,s.index);switch(s.lanes=0,s.tag){case 2:var u=s.type;Xo(i,s),i=s.pendingProps;var f=ls(s,xt.current);ps(s,a),f=gc(null,s,u,i,f,a);var m=_c();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,It(u)?(m=!0,Oo(s)):m=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,cc(s),f.updater=Yo,s.stateNode=f,f._reactInternals=s,bc(s,u,i,a),s=Pc(null,s,u,!0,m,a)):(s.tag=0,ze&&m&&Zl(s),Rt(null,s,f,a),s=s.child),s;case 16:u=s.elementType;e:{switch(Xo(i,s),i=s.pendingProps,f=u._init,u=f(u._payload),s.type=u,f=s.tag=zy(u),i=mr(u,i),f){case 0:s=Ec(null,s,u,i,a);break e;case 1:s=vp(null,s,u,i,a);break e;case 11:s=fp(null,s,u,i,a);break e;case 14:s=pp(null,s,u,mr(u.type,i),a);break e}throw Error(r(306,u,""))}return s;case 0:return u=s.type,f=s.pendingProps,f=s.elementType===u?f:mr(u,f),Ec(i,s,u,f,a);case 1:return u=s.type,f=s.pendingProps,f=s.elementType===u?f:mr(u,f),vp(i,s,u,f,a);case 3:e:{if(yp(s),i===null)throw Error(r(387));u=s.pendingProps,m=s.memoizedState,f=m.element,jf(i,s),Ho(s,u,null,a);var S=s.memoizedState;if(u=S.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){f=gs(Error(r(423)),s),s=Sp(i,s,u,a,f);break e}else if(u!==f){f=gs(Error(r(424)),s),s=Sp(i,s,u,a,f);break e}else for(Vt=ri(s.stateNode.containerInfo.firstChild),Kt=s,ze=!0,pr=null,a=Mf(s,null,u,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(hs(),u===f){s=Fr(i,s,a);break e}Rt(i,s,u,a)}s=s.child}return s;case 5:return If(s),i===null&&rc(s),u=s.type,f=s.pendingProps,m=i!==null?i.memoizedProps:null,S=f.children,ql(u,f)?S=null:m!==null&&ql(u,m)&&(s.flags|=32),_p(i,s),Rt(i,s,S,a),s.child;case 6:return i===null&&rc(s),null;case 13:return wp(i,s,a);case 4:return uc(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=ds(s,null,u,a):Rt(i,s,u,a),s.child;case 11:return u=s.type,f=s.pendingProps,f=s.elementType===u?f:mr(u,f),fp(i,s,u,f,a);case 7:return Rt(i,s,s.pendingProps,a),s.child;case 8:return Rt(i,s,s.pendingProps.children,a),s.child;case 12:return Rt(i,s,s.pendingProps.children,a),s.child;case 10:e:{if(u=s.type._context,f=s.pendingProps,m=s.memoizedProps,S=f.value,Be(Fo,u._currentValue),u._currentValue=S,m!==null)if(fr(m.value,S)){if(m.children===f.children&&!Bt.current){s=Fr(i,s,a);break e}}else for(m=s.child,m!==null&&(m.return=s);m!==null;){var E=m.dependencies;if(E!==null){S=m.child;for(var R=E.firstContext;R!==null;){if(R.context===u){if(m.tag===1){R=Ar(-1,a&-a),R.tag=2;var A=m.updateQueue;if(A!==null){A=A.shared;var te=A.pending;te===null?R.next=R:(R.next=te.next,te.next=R),A.pending=R}}m.lanes|=a,R=m.alternate,R!==null&&(R.lanes|=a),ac(m.return,a,s),E.lanes|=a;break}R=R.next}}else if(m.tag===10)S=m.type===s.type?null:m.child;else if(m.tag===18){if(S=m.return,S===null)throw Error(r(341));S.lanes|=a,E=S.alternate,E!==null&&(E.lanes|=a),ac(S,a,s),S=m.sibling}else S=m.child;if(S!==null)S.return=m;else for(S=m;S!==null;){if(S===s){S=null;break}if(m=S.sibling,m!==null){m.return=S.return,S=m;break}S=S.return}m=S}Rt(i,s,f.children,a),s=s.child}return s;case 9:return f=s.type,u=s.pendingProps.children,ps(s,a),f=tr(f),u=u(f),s.flags|=1,Rt(i,s,u,a),s.child;case 14:return u=s.type,f=mr(u,s.pendingProps),f=mr(u.type,f),pp(i,s,u,f,a);case 15:return mp(i,s,s.type,s.pendingProps,a);case 17:return u=s.type,f=s.pendingProps,f=s.elementType===u?f:mr(u,f),Xo(i,s),s.tag=1,It(u)?(i=!0,Oo(s)):i=!1,ps(s,a),op(s,u,f),bc(s,u,f,a),Pc(null,s,u,!0,i,a);case 19:return bp(i,s,a);case 22:return gp(i,s,a)}throw Error(r(156,s.tag))};function qp(i,s){return kd(i,s)}function Fy(i,s,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(i,s,a,u){return new Fy(i,s,a,u)}function qc(i){return i=i.prototype,!(!i||!i.isReactComponent)}function zy(i){if(typeof i=="function")return qc(i)?1:0;if(i!=null){if(i=i.$$typeof,i===X)return 11;if(i===W)return 14}return 2}function fi(i,s){var a=i.alternate;return a===null?(a=sr(i.tag,s,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=s,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&14680064,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,s=i.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a}function la(i,s,a,u,f,m){var S=2;if(u=i,typeof i=="function")qc(i)&&(S=1);else if(typeof i=="string")S=5;else e:switch(i){case Z:return Ti(a.children,f,m,s);case le:S=8,f|=8;break;case ie:return i=sr(12,a,s,f|2),i.elementType=ie,i.lanes=m,i;case z:return i=sr(13,a,s,f),i.elementType=z,i.lanes=m,i;case V:return i=sr(19,a,s,f),i.elementType=V,i.lanes=m,i;case U:return ca(a,f,m,s);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case I:S=10;break e;case K:S=9;break e;case X:S=11;break e;case W:S=14;break e;case M:S=16,u=null;break e}throw Error(r(130,i==null?i:typeof i,""))}return s=sr(S,a,s,f),s.elementType=i,s.type=u,s.lanes=m,s}function Ti(i,s,a,u){return i=sr(7,i,u,s),i.lanes=a,i}function ca(i,s,a,u){return i=sr(22,i,u,s),i.elementType=U,i.lanes=a,i.stateNode={isHidden:!1},i}function Qc(i,s,a){return i=sr(6,i,null,s),i.lanes=a,i}function Yc(i,s,a){return s=sr(4,i.children!==null?i.children:[],i.key,s),s.lanes=a,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}function $y(i,s,a,u,f){this.tag=s,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xl(0),this.expirationTimes=xl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xl(0),this.identifierPrefix=u,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Gc(i,s,a,u,f,m,S,E,R){return i=new $y(i,s,a,E,R),s===1?(s=1,m===!0&&(s|=8)):s=0,m=sr(3,null,null,s),i.current=m,m.stateNode=i,m.memoizedState={element:u,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},cc(m),i}function Hy(i,s,a){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J,key:u==null?null:""+u,children:i,containerInfo:s,implementation:a}}function Qp(i){if(!i)return si;i=i._reactInternals;e:{if(bi(i)!==i||i.tag!==1)throw Error(r(170));var s=i;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(It(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(r(171))}if(i.tag===1){var a=i.type;if(It(a))return xf(i,a,s)}return s}function Yp(i,s,a,u,f,m,S,E,R){return i=Gc(a,u,!0,i,f,m,S,E,R),i.context=Qp(null),a=i.current,u=Nt(),f=hi(a),m=Ar(u,f),m.callback=s??null,ai(a,m,f),i.current.lanes=f,Us(i,f,u),zt(i,u),i}function ua(i,s,a,u){var f=s.current,m=Nt(),S=hi(f);return a=Qp(a),s.context===null?s.context=a:s.pendingContext=a,s=Ar(m,S),s.payload={element:i},u=u===void 0?null:u,u!==null&&(s.callback=u),i=ai(f,s,S),i!==null&&(vr(i,f,S,m),$o(i,f,S)),S}function ha(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Gp(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<s?a:s}}function Xc(i,s){Gp(i,s),(i=i.alternate)&&Gp(i,s)}function Wy(){return null}var Xp=typeof reportError=="function"?reportError:function(i){console.error(i)};function Jc(i){this._internalRoot=i}da.prototype.render=Jc.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));ua(i,s,null,null)},da.prototype.unmount=Jc.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;Mi(function(){ua(null,i,null,null)}),s[Or]=null}};function da(i){this._internalRoot=i}da.prototype.unstable_scheduleHydration=function(i){if(i){var s=Od();i={blockedOn:null,target:i,priority:s};for(var a=0;a<Zr.length&&s!==0&&s<Zr[a].priority;a++);Zr.splice(a,0,i),a===0&&Bd(i)}};function Zc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function fa(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Jp(){}function Uy(i,s,a,u,f){if(f){if(typeof u=="function"){var m=u;u=function(){var A=ha(S);m.call(A)}}var S=Yp(s,u,i,0,null,!1,!1,"",Jp);return i._reactRootContainer=S,i[Or]=S.current,nn(i.nodeType===8?i.parentNode:i),Mi(),S}for(;f=i.lastChild;)i.removeChild(f);if(typeof u=="function"){var E=u;u=function(){var A=ha(R);E.call(A)}}var R=Gc(i,0,!1,null,null,!1,!1,"",Jp);return i._reactRootContainer=R,i[Or]=R.current,nn(i.nodeType===8?i.parentNode:i),Mi(function(){ua(s,R,a,u)}),R}function pa(i,s,a,u,f){var m=a._reactRootContainer;if(m){var S=m;if(typeof f=="function"){var E=f;f=function(){var R=ha(S);E.call(R)}}ua(s,S,i,f)}else S=Uy(a,s,i,f,u);return ha(S)}Dd=function(i){switch(i.tag){case 3:var s=i.stateNode;if(s.current.memoizedState.isDehydrated){var a=Ws(s.pendingLanes);a!==0&&(bl(s,a|1),zt(s,Xe()),(De&6)===0&&(ys=Xe()+500,ni()))}break;case 13:Mi(function(){var u=Ir(i,1);if(u!==null){var f=Nt();vr(u,i,1,f)}}),Xc(i,1)}},Cl=function(i){if(i.tag===13){var s=Ir(i,134217728);if(s!==null){var a=Nt();vr(s,i,134217728,a)}Xc(i,134217728)}},Md=function(i){if(i.tag===13){var s=hi(i),a=Ir(i,s);if(a!==null){var u=Nt();vr(a,i,s,u)}Xc(i,s)}},Od=function(){return Oe},jd=function(i,s){var a=Oe;try{return Oe=i,s()}finally{Oe=a}},gl=function(i,s,a){switch(s){case"input":if(ll(i,a),s=a.name,a.type==="radio"&&s!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var u=a[s];if(u!==i&&u.form===i.form){var f=Do(u);if(!f)throw Error(r(90));wt(u),ll(u,f)}}}break;case"textarea":cd(i,a);break;case"select":s=a.value,s!=null&&Gi(i,!!a.multiple,s,!1)}},vd=Uc,yd=Mi;var Ky={usingClientEntryPoint:!1,Events:[ln,os,Do,gd,_d,Uc]},xn={findFiberByHostInstance:Ci,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vy={bundleType:xn.bundleType,version:xn.version,rendererPackageName:xn.rendererPackageName,rendererConfig:xn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=bd(i),i===null?null:i.stateNode},findFiberByHostInstance:xn.findFiberByHostInstance||Wy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ma=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ma.isDisabled&&ma.supportsFiber)try{ho=ma.inject(Vy),Sr=ma}catch{}}return $t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ky,$t.createPortal=function(i,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zc(s))throw Error(r(200));return Hy(i,s,null,a)},$t.createRoot=function(i,s){if(!Zc(i))throw Error(r(299));var a=!1,u="",f=Xp;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Gc(i,1,!1,null,null,a,!1,u,f),i[Or]=s.current,nn(i.nodeType===8?i.parentNode:i),new Jc(s)},$t.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=bd(s),i=i===null?null:i.stateNode,i},$t.flushSync=function(i){return Mi(i)},$t.hydrate=function(i,s,a){if(!fa(s))throw Error(r(200));return pa(null,i,s,!0,a)},$t.hydrateRoot=function(i,s,a){if(!Zc(i))throw Error(r(405));var u=a!=null&&a.hydratedSources||null,f=!1,m="",S=Xp;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(S=a.onRecoverableError)),s=Yp(s,null,i,1,a??null,f,!1,m,S),i[Or]=s.current,nn(i),u)for(i=0;i<u.length;i++)a=u[i],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new da(s)},$t.render=function(i,s,a){if(!fa(s))throw Error(r(200));return pa(null,i,s,!1,a)},$t.unmountComponentAtNode=function(i){if(!fa(i))throw Error(r(40));return i._reactRootContainer?(Mi(function(){pa(null,null,i,!1,function(){i._reactRootContainer=null,i[Or]=null})}),!0):!1},$t.unstable_batchedUpdates=Uc,$t.unstable_renderSubtreeIntoContainer=function(i,s,a,u){if(!fa(a))throw Error(r(200));if(i==null||i._reactInternals===void 0)throw Error(r(38));return pa(i,s,a,!1,u)},$t.version="18.3.1-next-f1338f8080-20240426",$t}var om;function eS(){if(om)return ru.exports;om=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ru.exports=Zy(),ru.exports}var am;function tS(){if(am)return ga;am=1;var e=eS();return ga.createRoot=e.createRoot,ga.hydrateRoot=e.hydrateRoot,ga}var rS=tS();const iS=Xg(rS);var Ds=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},sS={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},nS=class{#e=sS;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},Fi=new nS;function oS(e){setTimeout(e,0)}var Wi=typeof window>"u"||"Deno"in globalThis;function Dt(){}function aS(e,t){return typeof e=="function"?e(t):e}function Ou(e){return typeof e=="number"&&e>=0&&e!==1/0}function Jg(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Si(e,t){return typeof e=="function"?e(t):e}function ar(e,t){return typeof e=="function"?e(t):e}function lm(e,t){const{type:r="all",exact:n,fetchStatus:o,predicate:l,queryKey:c,stale:h}=e;if(c){if(n){if(t.queryHash!==Nh(c,t.options))return!1}else if(!Wn(t.queryKey,c))return!1}if(r!=="all"){const p=t.isActive();if(r==="active"&&!p||r==="inactive"&&p)return!1}return!(typeof h=="boolean"&&t.isStale()!==h||o&&o!==t.state.fetchStatus||l&&!l(t))}function cm(e,t){const{exact:r,status:n,predicate:o,mutationKey:l}=e;if(l){if(!t.options.mutationKey)return!1;if(r){if(Ui(t.options.mutationKey)!==Ui(l))return!1}else if(!Wn(t.options.mutationKey,l))return!1}return!(n&&t.state.status!==n||o&&!o(t))}function Nh(e,t){return(t?.queryKeyHashFn||Ui)(e)}function Ui(e){return JSON.stringify(e,(t,r)=>ju(r)?Object.keys(r).sort().reduce((n,o)=>(n[o]=r[o],n),{}):r)}function Wn(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Wn(e[r],t[r])):!1}var lS=Object.prototype.hasOwnProperty;function Zg(e,t){if(e===t)return e;const r=um(e)&&um(t);if(!r&&!(ju(e)&&ju(t)))return t;const o=(r?e:Object.keys(e)).length,l=r?t:Object.keys(t),c=l.length,h=r?new Array(c):{};let p=0;for(let d=0;d<c;d++){const v=r?d:l[d],_=e[v],y=t[v];if(_===y){h[v]=_,(r?d<o:lS.call(e,v))&&p++;continue}if(_===null||y===null||typeof _!="object"||typeof y!="object"){h[v]=y;continue}const b=Zg(_,y);h[v]=b,b===_&&p++}return o===c&&p===o?e:h}function Fa(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function um(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function ju(e){if(!hm(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!hm(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function hm(e){return Object.prototype.toString.call(e)==="[object Object]"}function cS(e){return new Promise(t=>{Fi.setTimeout(t,e)})}function Tu(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Zg(e,t):t}function uS(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function hS(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var Lh=Symbol();function e_(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===Lh?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Dh(e,t){return typeof e=="function"?e(...t):!!e}function dS(e,t,r){let n=!1,o;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(o??=t(),n||(n=!0,o.aborted?r():o.addEventListener("abort",r,{once:!0})),o)}),e}var fS=class extends Ds{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!Wi&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Mh=new fS;function Bu(){let e,t;const r=new Promise((o,l)=>{e=o,t=l});r.status="pending",r.catch(()=>{});function n(o){Object.assign(r,o),delete r.resolve,delete r.reject}return r.resolve=o=>{n({status:"fulfilled",value:o}),e(o)},r.reject=o=>{n({status:"rejected",reason:o}),t(o)},r}var pS=oS;function mS(){let e=[],t=0,r=h=>{h()},n=h=>{h()},o=pS;const l=h=>{t?e.push(h):o(()=>{r(h)})},c=()=>{const h=e;e=[],h.length&&o(()=>{n(()=>{h.forEach(p=>{r(p)})})})};return{batch:h=>{let p;t++;try{p=h()}finally{t--,t||c()}return p},batchCalls:h=>(...p)=>{l(()=>{h(...p)})},schedule:l,setNotifyFunction:h=>{r=h},setBatchNotifyFunction:h=>{n=h},setScheduler:h=>{o=h}}}var lt=mS(),gS=class extends Ds{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!Wi&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},za=new gS;function _S(e){return Math.min(1e3*2**e,3e4)}function t_(e){return(e??"online")==="online"?za.isOnline():!0}var Iu=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function r_(e){let t=!1,r=0,n;const o=Bu(),l=()=>o.status!=="pending",c=x=>{if(!l()){const k=new Iu(x);y(k),e.onCancel?.(k)}},h=()=>{t=!0},p=()=>{t=!1},d=()=>Mh.isFocused()&&(e.networkMode==="always"||za.isOnline())&&e.canRun(),v=()=>t_(e.networkMode)&&e.canRun(),_=x=>{l()||(n?.(),o.resolve(x))},y=x=>{l()||(n?.(),o.reject(x))},b=()=>new Promise(x=>{n=k=>{(l()||d())&&x(k)},e.onPause?.()}).then(()=>{n=void 0,l()||e.onContinue?.()}),w=()=>{if(l())return;let x;const k=r===0?e.initialPromise:void 0;try{x=k??e.fn()}catch(D){x=Promise.reject(D)}Promise.resolve(x).then(_).catch(D=>{if(l())return;const j=e.retry??(Wi?0:3),$=e.retryDelay??_S,F=typeof $=="function"?$(r,D):$,H=j===!0||typeof j=="number"&&r<j||typeof j=="function"&&j(r,D);if(t||!H){y(D);return}r++,e.onFail?.(r,D),cS(F).then(()=>d()?void 0:b()).then(()=>{t?y(D):w()})})};return{promise:o,status:()=>o.status,cancel:c,continue:()=>(n?.(),o),cancelRetry:h,continueRetry:p,canStart:v,start:()=>(v()?w():b().then(w),o)}}var i_=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ou(this.gcTime)&&(this.#e=Fi.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Wi?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Fi.clearTimeout(this.#e),this.#e=void 0)}},vS=class extends i_{#e;#t;#r;#s;#i;#o;#a;constructor(e){super(),this.#a=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.client,this.#r=this.#s.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=fm(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(e){if(this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=fm(this.options);t.data!==void 0&&(this.setState(dm(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=Tu(this.state.data,e,this.options);return this.#n({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#n({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#i?.promise;return this.#i?.cancel(e),t?t.then(Dt).catch(Dt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>ar(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Lh||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Si(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Jg(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#i&&(this.#a?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#n({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#i?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(p=>p.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,n=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(this.#a=!0,r.signal)})},o=()=>{const h=e_(this.options,t),d=(()=>{const v={client:this.#s,queryKey:this.queryKey,meta:this.meta};return n(v),v})();return this.#a=!1,this.options.persister?this.options.persister(h,d,this):h(d)},c=(()=>{const h={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:o};return n(h),h})();this.options.behavior?.onFetch(c,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==c.fetchOptions?.meta)&&this.#n({type:"fetch",meta:c.fetchOptions?.meta}),this.#i=r_({initialPromise:t?.initialPromise,fn:c.fetchFn,onCancel:h=>{h instanceof Iu&&h.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(h,p)=>{this.#n({type:"failed",failureCount:h,error:p})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0});try{const h=await this.#i.start();if(h===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(h),this.#r.config.onSuccess?.(h,this),this.#r.config.onSettled?.(h,this.state.error,this),h}catch(h){if(h instanceof Iu){if(h.silent)return this.#i.promise;if(h.revert){if(this.state.data===void 0)throw h;return this.state.data}}throw this.#n({type:"error",error:h}),this.#r.config.onError?.(h,this),this.#r.config.onSettled?.(this.state.data,h,this),h}finally{this.scheduleGc()}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...s_(r.data,this.options),fetchMeta:e.meta??null};case"success":const n={...r,...dm(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?n:void 0,n;case"error":const o=e.error;return{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),lt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function s_(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:t_(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function dm(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function fm(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var yS=class extends Ds{constructor(e,t){super(),this.options=t,this.#e=e,this.#n=null,this.#a=Bu(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#s=void 0;#i;#o;#a;#n;#m;#d;#f;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),pm(this.#t,this.options)?this.#h():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Au(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Au(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#S(),this.#w(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ar(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#x(),this.#t.setOptions(this.options),t._defaulted&&!Fa(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const n=this.hasListeners();n&&mm(this.#t,r,this.options,t)&&this.#h(),this.updateResult(),n&&(this.#t!==r||ar(this.options.enabled,this.#t)!==ar(t.enabled,this.#t)||Si(this.options.staleTime,this.#t)!==Si(t.staleTime,this.#t))&&this.#g();const o=this.#_();n&&(this.#t!==r||ar(this.options.enabled,this.#t)!==ar(t.enabled,this.#t)||o!==this.#l)&&this.#v(o)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return wS(this,r)&&(this.#s=r,this.#o=this.options,this.#i=this.#t.state),r}getCurrentResult(){return this.#s}trackResult(e,t){return new Proxy(e,{get:(r,n)=>(this.trackProp(n),t?.(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,n))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#h({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#h(e){this.#x();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Dt)),t}#g(){this.#S();const e=Si(this.options.staleTime,this.#t);if(Wi||this.#s.isStale||!Ou(e))return;const r=Jg(this.#s.dataUpdatedAt,e)+1;this.#c=Fi.setTimeout(()=>{this.#s.isStale||this.updateResult()},r)}#_(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(e){this.#w(),this.#l=e,!(Wi||ar(this.options.enabled,this.#t)===!1||!Ou(this.#l)||this.#l===0)&&(this.#u=Fi.setInterval(()=>{(this.options.refetchIntervalInBackground||Mh.isFocused())&&this.#h()},this.#l))}#y(){this.#g(),this.#v(this.#_())}#S(){this.#c&&(Fi.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#u&&(Fi.clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const r=this.#t,n=this.options,o=this.#s,l=this.#i,c=this.#o,p=e!==r?e.state:this.#r,{state:d}=e;let v={...d},_=!1,y;if(t._optimisticResults){const le=this.hasListeners(),ie=!le&&pm(e,t),I=le&&mm(e,r,t,n);(ie||I)&&(v={...v,...s_(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(v.fetchStatus="idle")}let{error:b,errorUpdatedAt:w,status:x}=v;y=v.data;let k=!1;if(t.placeholderData!==void 0&&y===void 0&&x==="pending"){let le;o?.isPlaceholderData&&t.placeholderData===c?.placeholderData?(le=o.data,k=!0):le=typeof t.placeholderData=="function"?t.placeholderData(this.#f?.state.data,this.#f):t.placeholderData,le!==void 0&&(x="success",y=Tu(o?.data,le,t),_=!0)}if(t.select&&y!==void 0&&!k)if(o&&y===l?.data&&t.select===this.#m)y=this.#d;else try{this.#m=t.select,y=t.select(y),y=Tu(o?.data,y,t),this.#d=y,this.#n=null}catch(le){this.#n=le}this.#n&&(b=this.#n,y=this.#d,w=Date.now(),x="error");const D=v.fetchStatus==="fetching",j=x==="pending",$=x==="error",F=j&&D,H=y!==void 0,Z={status:x,fetchStatus:v.fetchStatus,isPending:j,isSuccess:x==="success",isError:$,isInitialLoading:F,isLoading:F,data:y,dataUpdatedAt:v.dataUpdatedAt,error:b,errorUpdatedAt:w,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>p.dataUpdateCount||v.errorUpdateCount>p.errorUpdateCount,isFetching:D,isRefetching:D&&!j,isLoadingError:$&&!H,isPaused:v.fetchStatus==="paused",isPlaceholderData:_,isRefetchError:$&&H,isStale:Oh(e,t),refetch:this.refetch,promise:this.#a,isEnabled:ar(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const le=K=>{Z.status==="error"?K.reject(Z.error):Z.data!==void 0&&K.resolve(Z.data)},ie=()=>{const K=this.#a=Z.promise=Bu();le(K)},I=this.#a;switch(I.status){case"pending":e.queryHash===r.queryHash&&le(I);break;case"fulfilled":(Z.status==="error"||Z.data!==I.value)&&ie();break;case"rejected":(Z.status!=="error"||Z.error!==I.reason)&&ie();break}}return Z}updateResult(){const e=this.#s,t=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#o=this.options,this.#i.data!==void 0&&(this.#f=this.#t),Fa(t,e))return;this.#s=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,o=typeof n=="function"?n():n;if(o==="all"||!o&&!this.#p.size)return!0;const l=new Set(o??this.#p);return this.options.throwOnError&&l.add("error"),Object.keys(this.#s).some(c=>{const h=c;return this.#s[h]!==e[h]&&l.has(h)})};this.#b({listeners:r()})}#x(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#b(e){lt.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function SS(e,t){return ar(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function pm(e,t){return SS(e,t)||e.state.data!==void 0&&Au(e,t,t.refetchOnMount)}function Au(e,t,r){if(ar(t.enabled,e)!==!1&&Si(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&Oh(e,t)}return!1}function mm(e,t,r,n){return(e!==t||ar(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Oh(e,r)}function Oh(e,t){return ar(t.enabled,e)!==!1&&e.isStaleByTime(Si(t.staleTime,e))}function wS(e,t){return!Fa(e.getCurrentResult(),t)}function gm(e){return{onFetch:(t,r)=>{const n=t.options,o=t.fetchOptions?.meta?.fetchMore?.direction,l=t.state.data?.pages||[],c=t.state.data?.pageParams||[];let h={pages:[],pageParams:[]},p=0;const d=async()=>{let v=!1;const _=w=>{dS(w,()=>t.signal,()=>v=!0)},y=e_(t.options,t.fetchOptions),b=async(w,x,k)=>{if(v)return Promise.reject();if(x==null&&w.pages.length)return Promise.resolve(w);const j=(()=>{const J={client:t.client,queryKey:t.queryKey,pageParam:x,direction:k?"backward":"forward",meta:t.options.meta};return _(J),J})(),$=await y(j),{maxPages:F}=t.options,H=k?hS:uS;return{pages:H(w.pages,$,F),pageParams:H(w.pageParams,x,F)}};if(o&&l.length){const w=o==="backward",x=w?xS:_m,k={pages:l,pageParams:c},D=x(n,k);h=await b(k,D,w)}else{const w=e??l.length;do{const x=p===0?c[0]??n.initialPageParam:_m(n,h);if(p>0&&x==null)break;h=await b(h,x),p++}while(p<w)}return h};t.options.persister?t.fetchFn=()=>t.options.persister?.(d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=d}}}function _m(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function xS(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var bS=class extends i_{#e;#t;#r;#s;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||n_(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#i({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=r_({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(l,c)=>{this.#i({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#i({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const n=this.state.status==="pending",o=!this.#s.canStart();try{if(n)t();else{this.#i({type:"pending",variables:e,isPaused:o}),await this.#r.config.onMutate?.(e,this,r);const c=await this.options.onMutate?.(e,r);c!==this.state.context&&this.#i({type:"pending",context:c,variables:e,isPaused:o})}const l=await this.#s.start();return await this.#r.config.onSuccess?.(l,e,this.state.context,this,r),await this.options.onSuccess?.(l,e,this.state.context,r),await this.#r.config.onSettled?.(l,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(l,null,e,this.state.context,r),this.#i({type:"success",data:l}),l}catch(l){try{await this.#r.config.onError?.(l,e,this.state.context,this,r)}catch(c){Promise.reject(c)}try{await this.options.onError?.(l,e,this.state.context,r)}catch(c){Promise.reject(c)}try{await this.#r.config.onSettled?.(void 0,l,this.state.variables,this.state.context,this,r)}catch(c){Promise.reject(c)}try{await this.options.onSettled?.(void 0,l,e,this.state.context,r)}catch(c){Promise.reject(c)}throw this.#i({type:"error",error:l}),l}finally{this.#r.runNext(this)}}#i(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),lt.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function n_(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var CS=class extends Ds{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,r){const n=new bS({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){this.#e.add(e);const t=_a(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=_a(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const n=r.indexOf(e);n!==-1&&r.splice(n,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=_a(e);if(typeof t=="string"){const n=this.#t.get(t)?.find(o=>o.state.status==="pending");return!n||n===e}else return!0}runNext(e){const t=_a(e);return typeof t=="string"?this.#t.get(t)?.find(n=>n!==e&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){lt.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>cm(t,r))}findAll(e={}){return this.getAll().filter(t=>cm(e,t))}notify(e){lt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return lt.batch(()=>Promise.all(e.map(t=>t.continue().catch(Dt))))}};function _a(e){return e.options.scope?.id}var kS=class extends Ds{#e;#t=void 0;#r;#s;constructor(t,r){super(),this.#e=t,this.setOptions(r),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#e.defaultMutationOptions(t),Fa(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&Ui(r.mutationKey)!==Ui(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#i(),this.#o(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#i(),this.#o()}mutate(t,r){return this.#s=r,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#i(){const t=this.#r?.state??n_();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#o(t){lt.batch(()=>{if(this.#s&&this.hasListeners()){const r=this.#t.variables,n=this.#t.context,o={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#s.onSuccess?.(t.data,r,n,o)}catch(l){Promise.reject(l)}try{this.#s.onSettled?.(t.data,null,r,n,o)}catch(l){Promise.reject(l)}}else if(t?.type==="error"){try{this.#s.onError?.(t.error,r,n,o)}catch(l){Promise.reject(l)}try{this.#s.onSettled?.(void 0,t.error,r,n,o)}catch(l){Promise.reject(l)}}}this.listeners.forEach(r=>{r(this.#t)})})}},ES=class extends Ds{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const n=t.queryKey,o=t.queryHash??Nh(n,t);let l=this.get(o);return l||(l=new vS({client:e,queryKey:n,queryHash:o,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(l)),l}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){lt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>lm(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>lm(e,r)):t}notify(e){lt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){lt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){lt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},PS=class{#e;#t;#r;#s;#i;#o;#a;#n;constructor(e={}){this.#e=e.queryCache||new ES,this.#t=e.mutationCache||new CS,this.#r=e.defaultOptions||{},this.#s=new Map,this.#i=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=Mh.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#n=za.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#n?.(),this.#n=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Si(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),l=this.#e.get(n.queryHash)?.state.data,c=aS(t,l);if(c!==void 0)return this.#e.build(this,n).setData(c,{...r,manual:!0})}setQueriesData(e,t,r){return lt.batch(()=>this.#e.findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;lt.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return lt.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=lt.batch(()=>this.#e.findAll(e).map(o=>o.cancel(r)));return Promise.all(n).then(Dt).catch(Dt)}invalidateQueries(e,t={}){return lt.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=lt.batch(()=>this.#e.findAll(e).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let l=o.fetch(void 0,r);return r.throwOnError||(l=l.catch(Dt)),o.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(n).then(Dt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(Si(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Dt).catch(Dt)}fetchInfiniteQuery(e){return e.behavior=gm(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Dt).catch(Dt)}ensureInfiniteQueryData(e){return e.behavior=gm(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return za.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#s.set(Ui(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#s.values()],r={};return t.forEach(n=>{Wn(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){this.#i.set(Ui(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#i.values()],r={};return t.forEach(n=>{Wn(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Nh(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Lh&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},o_=C.createContext(void 0),Qi=e=>{const t=C.useContext(o_);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},RS=({client:e,children:t})=>(C.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),g.jsx(o_.Provider,{value:e,children:t})),a_=C.createContext(!1),NS=()=>C.useContext(a_);a_.Provider;function LS(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var DS=C.createContext(LS()),MS=()=>C.useContext(DS),OS=(e,t,r)=>{const n=r?.state.error&&typeof e.throwOnError=="function"?Dh(e.throwOnError,[r.state.error,r]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||n)&&(t.isReset()||(e.retryOnMount=!1))},jS=e=>{C.useEffect(()=>{e.clearReset()},[e])},TS=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:o})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(o&&e.data===void 0||Dh(r,[e.error,n])),BS=e=>{if(e.suspense){const r=o=>o==="static"?o:Math.max(o??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...o)=>r(n(...o)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},IS=(e,t)=>e.isLoading&&e.isFetching&&!t,AS=(e,t)=>e?.suspense&&t.isPending,vm=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function FS(e,t,r){const n=NS(),o=MS(),l=Qi(),c=l.defaultQueryOptions(e);l.getDefaultOptions().queries?._experimental_beforeQuery?.(c);const h=l.getQueryCache().get(c.queryHash);c._optimisticResults=n?"isRestoring":"optimistic",BS(c),OS(c,o,h),jS(o);const p=!l.getQueryCache().get(c.queryHash),[d]=C.useState(()=>new t(l,c)),v=d.getOptimisticResult(c),_=!n&&e.subscribed!==!1;if(C.useSyncExternalStore(C.useCallback(y=>{const b=_?d.subscribe(lt.batchCalls(y)):Dt;return d.updateResult(),b},[d,_]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),C.useEffect(()=>{d.setOptions(c)},[c,d]),AS(c,v))throw vm(c,d,o);if(TS({result:v,errorResetBoundary:o,throwOnError:c.throwOnError,query:h,suspense:c.suspense}))throw v.error;return l.getDefaultOptions().queries?._experimental_afterQuery?.(c,v),c.experimental_prefetchInRender&&!Wi&&IS(v,n)&&(p?vm(c,d,o):h?.promise)?.catch(Dt).finally(()=>{d.updateResult()}),c.notifyOnChangeProps?v:d.trackResult(v)}function Mt(e,t){return FS(e,yS)}function Ur(e,t){const r=Qi(),[n]=C.useState(()=>new kS(r,e));C.useEffect(()=>{n.setOptions(e)},[n,e]);const o=C.useSyncExternalStore(C.useCallback(c=>n.subscribe(lt.batchCalls(c)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),l=C.useCallback((c,h)=>{n.mutate(c,h).catch(Dt)},[n]);if(o.error&&Dh(n.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:l,mutateAsync:o.mutate}}/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ym="popstate";function zS(e={}){function t(n,o){let{pathname:l,search:c,hash:h}=n.location;return Fu("",{pathname:l,search:c,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(n,o){return typeof o=="string"?o:Un(o)}return HS(t,r,null,e)}function $e(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function hr(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $S(){return Math.random().toString(36).substring(2,10)}function Sm(e,t){return{usr:e.state,key:e.key,idx:t}}function Fu(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ms(t):t,state:r,key:t&&t.key||n||$S()}}function Un({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ms(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function HS(e,t,r,n={}){let{window:o=document.defaultView,v5Compat:l=!1}=n,c=o.history,h="POP",p=null,d=v();d==null&&(d=0,c.replaceState({...c.state,idx:d},""));function v(){return(c.state||{idx:null}).idx}function _(){h="POP";let k=v(),D=k==null?null:k-d;d=k,p&&p({action:h,location:x.location,delta:D})}function y(k,D){h="PUSH";let j=Fu(x.location,k,D);d=v()+1;let $=Sm(j,d),F=x.createHref(j);try{c.pushState($,"",F)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;o.location.assign(F)}l&&p&&p({action:h,location:x.location,delta:1})}function b(k,D){h="REPLACE";let j=Fu(x.location,k,D);d=v();let $=Sm(j,d),F=x.createHref(j);c.replaceState($,"",F),l&&p&&p({action:h,location:x.location,delta:0})}function w(k){return WS(k)}let x={get action(){return h},get location(){return e(o,c)},listen(k){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(ym,_),p=k,()=>{o.removeEventListener(ym,_),p=null}},createHref(k){return t(o,k)},createURL:w,encodeLocation(k){let D=w(k);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:y,replace:b,go(k){return c.go(k)}};return x}function WS(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),$e(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Un(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function l_(e,t,r="/"){return US(e,t,r,!1)}function US(e,t,r,n){let o=typeof t=="string"?Ms(t):t,l=Vr(o.pathname||"/",r);if(l==null)return null;let c=c_(e);KS(c);let h=null;for(let p=0;h==null&&p<c.length;++p){let d=rw(l);h=ew(c[p],d,n)}return h}function c_(e,t=[],r=[],n="",o=!1){let l=(c,h,p=o,d)=>{let v={relativePath:d===void 0?c.path||"":d,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(n)&&p)return;$e(v.relativePath.startsWith(n),`Absolute route path "${v.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(n.length)}let _=Kr([n,v.relativePath]),y=r.concat(v);c.children&&c.children.length>0&&($e(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),c_(c.children,t,y,_,p)),!(c.path==null&&!c.index)&&t.push({path:_,score:JS(_,c.index),routesMeta:y})};return e.forEach((c,h)=>{if(c.path===""||!c.path?.includes("?"))l(c,h);else for(let p of u_(c.path))l(c,h,!0,p)}),t}function u_(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,o=r.endsWith("?"),l=r.replace(/\?$/,"");if(n.length===0)return o?[l,""]:[l];let c=u_(n.join("/")),h=[];return h.push(...c.map(p=>p===""?l:[l,p].join("/"))),o&&h.push(...c),h.map(p=>e.startsWith("/")&&p===""?"/":p)}function KS(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:ZS(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var VS=/^:[\w-]+$/,qS=3,QS=2,YS=1,GS=10,XS=-2,wm=e=>e==="*";function JS(e,t){let r=e.split("/"),n=r.length;return r.some(wm)&&(n+=XS),t&&(n+=QS),r.filter(o=>!wm(o)).reduce((o,l)=>o+(VS.test(l)?qS:l===""?YS:GS),n)}function ZS(e,t){return e.length===t.length&&e.slice(0,-1).every((n,o)=>n===t[o])?e[e.length-1]-t[t.length-1]:0}function ew(e,t,r=!1){let{routesMeta:n}=e,o={},l="/",c=[];for(let h=0;h<n.length;++h){let p=n[h],d=h===n.length-1,v=l==="/"?t:t.slice(l.length)||"/",_=$a({path:p.relativePath,caseSensitive:p.caseSensitive,end:d},v),y=p.route;if(!_&&d&&r&&!n[n.length-1].route.index&&(_=$a({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!_)return null;Object.assign(o,_.params),c.push({params:o,pathname:Kr([l,_.pathname]),pathnameBase:ow(Kr([l,_.pathnameBase])),route:y}),_.pathnameBase!=="/"&&(l=Kr([l,_.pathnameBase]))}return c}function $a(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=tw(e.path,e.caseSensitive,e.end),o=t.match(r);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:n.reduce((d,{paramName:v,isOptional:_},y)=>{if(v==="*"){let w=h[y]||"";c=l.slice(0,l.length-w.length).replace(/(.)\/+$/,"$1")}const b=h[y];return _&&!b?d[v]=void 0:d[v]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:c,pattern:e}}function tw(e,t=!1,r=!0){hr(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,p)=>(n.push({paramName:h,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),n]}function rw(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return hr(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Vr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var h_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,iw=e=>h_.test(e);function sw(e,t="/"){let{pathname:r,search:n="",hash:o=""}=typeof e=="string"?Ms(e):e,l;if(r)if(iw(r))l=r;else{if(r.includes("//")){let c=r;r=r.replace(/\/\/+/g,"/"),hr(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${r}`)}r.startsWith("/")?l=xm(r.substring(1),"/"):l=xm(r,t)}else l=t;return{pathname:l,search:aw(n),hash:lw(o)}}function xm(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function nu(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function nw(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function jh(e){let t=nw(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function Th(e,t,r,n=!1){let o;typeof e=="string"?o=Ms(e):(o={...e},$e(!o.pathname||!o.pathname.includes("?"),nu("?","pathname","search",o)),$e(!o.pathname||!o.pathname.includes("#"),nu("#","pathname","hash",o)),$e(!o.search||!o.search.includes("#"),nu("#","search","hash",o)));let l=e===""||o.pathname==="",c=l?"/":o.pathname,h;if(c==null)h=r;else{let _=t.length-1;if(!n&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),_-=1;o.pathname=y.join("/")}h=_>=0?t[_]:"/"}let p=sw(o,h),d=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&r.endsWith("/");return!p.pathname.endsWith("/")&&(d||v)&&(p.pathname+="/"),p}var Kr=e=>e.join("/").replace(/\/\/+/g,"/"),ow=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),aw=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,lw=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,cw=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function uw(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function hw(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var d_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function f_(e,t){let r=e;if(typeof r!="string"||!h_.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let n=r,o=!1;if(d_)try{let l=new URL(window.location.href),c=r.startsWith("//")?new URL(l.protocol+r):new URL(r),h=Vr(c.pathname,t);c.origin===l.origin&&h!=null?r=h+c.search+c.hash:o=!0}catch{hr(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:o,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var p_=["POST","PUT","PATCH","DELETE"];new Set(p_);var dw=["GET",...p_];new Set(dw);var Os=C.createContext(null);Os.displayName="DataRouter";var el=C.createContext(null);el.displayName="DataRouterState";var fw=C.createContext(!1),m_=C.createContext({isTransitioning:!1});m_.displayName="ViewTransition";var pw=C.createContext(new Map);pw.displayName="Fetchers";var mw=C.createContext(null);mw.displayName="Await";var Jt=C.createContext(null);Jt.displayName="Navigation";var Zn=C.createContext(null);Zn.displayName="Location";var yr=C.createContext({outlet:null,matches:[],isDataRoute:!1});yr.displayName="Route";var Bh=C.createContext(null);Bh.displayName="RouteError";var g_="REACT_ROUTER_ERROR",gw="REDIRECT",_w="ROUTE_ERROR_RESPONSE";function vw(e){if(e.startsWith(`${g_}:${gw}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function yw(e){if(e.startsWith(`${g_}:${_w}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new cw(t.status,t.statusText,t.data)}catch{}}function Sw(e,{relative:t}={}){$e(js(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=C.useContext(Jt),{hash:o,pathname:l,search:c}=eo(e,{relative:t}),h=l;return r!=="/"&&(h=l==="/"?r:Kr([r,l])),n.createHref({pathname:h,search:c,hash:o})}function js(){return C.useContext(Zn)!=null}function qr(){return $e(js(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(Zn).location}var __="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function v_(e){C.useContext(Jt).static||C.useLayoutEffect(e)}function Ih(){let{isDataRoute:e}=C.useContext(yr);return e?jw():ww()}function ww(){$e(js(),"useNavigate() may be used only in the context of a <Router> component.");let e=C.useContext(Os),{basename:t,navigator:r}=C.useContext(Jt),{matches:n}=C.useContext(yr),{pathname:o}=qr(),l=JSON.stringify(jh(n)),c=C.useRef(!1);return v_(()=>{c.current=!0}),C.useCallback((p,d={})=>{if(hr(c.current,__),!c.current)return;if(typeof p=="number"){r.go(p);return}let v=Th(p,JSON.parse(l),o,d.relative==="path");e==null&&t!=="/"&&(v.pathname=v.pathname==="/"?t:Kr([t,v.pathname])),(d.replace?r.replace:r.push)(v,d.state,d)},[t,r,l,o,e])}C.createContext(null);function xw(){let{matches:e}=C.useContext(yr),t=e[e.length-1];return t?t.params:{}}function eo(e,{relative:t}={}){let{matches:r}=C.useContext(yr),{pathname:n}=qr(),o=JSON.stringify(jh(r));return C.useMemo(()=>Th(e,JSON.parse(o),n,t==="path"),[e,o,n,t])}function bw(e,t){return y_(e,t)}function y_(e,t,r,n,o){$e(js(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=C.useContext(Jt),{matches:c}=C.useContext(yr),h=c[c.length-1],p=h?h.params:{},d=h?h.pathname:"/",v=h?h.pathnameBase:"/",_=h&&h.route;{let j=_&&_.path||"";w_(d,!_||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let y=qr(),b;if(t){let j=typeof t=="string"?Ms(t):t;$e(v==="/"||j.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${j.pathname}" was given in the \`location\` prop.`),b=j}else b=y;let w=b.pathname||"/",x=w;if(v!=="/"){let j=v.replace(/^\//,"").split("/");x="/"+w.replace(/^\//,"").split("/").slice(j.length).join("/")}let k=l_(e,{pathname:x});hr(_||k!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),hr(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=Rw(k&&k.map(j=>Object.assign({},j,{params:Object.assign({},p,j.params),pathname:Kr([v,l.encodeLocation?l.encodeLocation(j.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?v:Kr([v,l.encodeLocation?l.encodeLocation(j.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathnameBase])})),c,r,n,o);return t&&D?C.createElement(Zn.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},D):D}function Cw(){let e=Ow(),t=uw(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:n},l={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:l},"ErrorBoundary")," or"," ",C.createElement("code",{style:l},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},t),r?C.createElement("pre",{style:o},r):null,c)}var kw=C.createElement(Cw,null),S_=class extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const r=yw(e.digest);r&&(e=r)}let t=e!==void 0?C.createElement(yr.Provider,{value:this.props.routeContext},C.createElement(Bh.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?C.createElement(Ew,{error:e},t):t}};S_.contextType=fw;var ou=new WeakMap;function Ew({children:e,error:t}){let{basename:r}=C.useContext(Jt);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let n=vw(t.digest);if(n){let o=ou.get(t);if(o)throw o;let l=f_(n.location,r);if(d_&&!ou.get(t))if(l.isExternal||n.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:n.replace}));throw ou.set(t,c),c}return C.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return e}function Pw({routeContext:e,match:t,children:r}){let n=C.useContext(Os);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),C.createElement(yr.Provider,{value:e},r)}function Rw(e,t=[],r=null,n=null,o=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,c=r?.errors;if(c!=null){let v=l.findIndex(_=>_.route.id&&c?.[_.route.id]!==void 0);$e(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,v+1))}let h=!1,p=-1;if(r)for(let v=0;v<l.length;v++){let _=l[v];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(p=v),_.route.id){let{loaderData:y,errors:b}=r,w=_.route.loader&&!y.hasOwnProperty(_.route.id)&&(!b||b[_.route.id]===void 0);if(_.route.lazy||w){h=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let d=r&&n?(v,_)=>{n(v,{location:r.location,params:r.matches?.[0]?.params??{},unstable_pattern:hw(r.matches),errorInfo:_})}:void 0;return l.reduceRight((v,_,y)=>{let b,w=!1,x=null,k=null;r&&(b=c&&_.route.id?c[_.route.id]:void 0,x=_.route.errorElement||kw,h&&(p<0&&y===0?(w_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,k=null):p===y&&(w=!0,k=_.route.hydrateFallbackElement||null)));let D=t.concat(l.slice(0,y+1)),j=()=>{let $;return b?$=x:w?$=k:_.route.Component?$=C.createElement(_.route.Component,null):_.route.element?$=_.route.element:$=v,C.createElement(Pw,{match:_,routeContext:{outlet:v,matches:D,isDataRoute:r!=null},children:$})};return r&&(_.route.ErrorBoundary||_.route.errorElement||y===0)?C.createElement(S_,{location:r.location,revalidation:r.revalidation,component:x,error:b,children:j(),routeContext:{outlet:null,matches:D,isDataRoute:!0},onError:d}):j()},null)}function Ah(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Nw(e){let t=C.useContext(Os);return $e(t,Ah(e)),t}function Lw(e){let t=C.useContext(el);return $e(t,Ah(e)),t}function Dw(e){let t=C.useContext(yr);return $e(t,Ah(e)),t}function Fh(e){let t=Dw(e),r=t.matches[t.matches.length-1];return $e(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function Mw(){return Fh("useRouteId")}function Ow(){let e=C.useContext(Bh),t=Lw("useRouteError"),r=Fh("useRouteError");return e!==void 0?e:t.errors?.[r]}function jw(){let{router:e}=Nw("useNavigate"),t=Fh("useNavigate"),r=C.useRef(!1);return v_(()=>{r.current=!0}),C.useCallback(async(o,l={})=>{hr(r.current,__),r.current&&(typeof o=="number"?await e.navigate(o):await e.navigate(o,{fromRouteId:t,...l}))},[e,t])}var bm={};function w_(e,t,r){!t&&!bm[e]&&(bm[e]=!0,hr(!1,r))}C.memo(Tw);function Tw({routes:e,future:t,state:r,onError:n}){return y_(e,void 0,r,n,t)}function au({to:e,replace:t,state:r,relative:n}){$e(js(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=C.useContext(Jt);hr(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=C.useContext(yr),{pathname:c}=qr(),h=Ih(),p=Th(e,jh(l),c,n==="path"),d=JSON.stringify(p);return C.useEffect(()=>{h(JSON.parse(d),{replace:t,state:r,relative:n})},[h,d,n,t,r]),null}function Pr(e){$e(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Bw({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:o,static:l=!1,unstable_useTransitions:c}){$e(!js(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=e.replace(/^\/*/,"/"),p=C.useMemo(()=>({basename:h,navigator:o,static:l,unstable_useTransitions:c,future:{}}),[h,o,l,c]);typeof r=="string"&&(r=Ms(r));let{pathname:d="/",search:v="",hash:_="",state:y=null,key:b="default"}=r,w=C.useMemo(()=>{let x=Vr(d,h);return x==null?null:{location:{pathname:x,search:v,hash:_,state:y,key:b},navigationType:n}},[h,d,v,_,y,b,n]);return hr(w!=null,`<Router basename="${h}"> is not able to match the URL "${d}${v}${_}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:C.createElement(Jt.Provider,{value:p},C.createElement(Zn.Provider,{children:t,value:w}))}function Cm({children:e,location:t}){return bw(zu(e),t)}function zu(e,t=[]){let r=[];return C.Children.forEach(e,(n,o)=>{if(!C.isValidElement(n))return;let l=[...t,o];if(n.type===C.Fragment){r.push.apply(r,zu(n.props.children,l));return}$e(n.type===Pr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),$e(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=zu(n.props.children,l)),r.push(c)}),r}var Ra="get",Na="application/x-www-form-urlencoded";function tl(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function Iw(e){return tl(e)&&e.tagName.toLowerCase()==="button"}function Aw(e){return tl(e)&&e.tagName.toLowerCase()==="form"}function Fw(e){return tl(e)&&e.tagName.toLowerCase()==="input"}function zw(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function $w(e,t){return e.button===0&&(!t||t==="_self")&&!zw(e)}var va=null;function Hw(){if(va===null)try{new FormData(document.createElement("form"),0),va=!1}catch{va=!0}return va}var Ww=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function lu(e){return e!=null&&!Ww.has(e)?(hr(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Na}"`),null):e}function Uw(e,t){let r,n,o,l,c;if(Aw(e)){let h=e.getAttribute("action");n=h?Vr(h,t):null,r=e.getAttribute("method")||Ra,o=lu(e.getAttribute("enctype"))||Na,l=new FormData(e)}else if(Iw(e)||Fw(e)&&(e.type==="submit"||e.type==="image")){let h=e.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=e.getAttribute("formaction")||h.getAttribute("action");if(n=p?Vr(p,t):null,r=e.getAttribute("formmethod")||h.getAttribute("method")||Ra,o=lu(e.getAttribute("formenctype"))||lu(h.getAttribute("enctype"))||Na,l=new FormData(h,e),!Hw()){let{name:d,type:v,value:_}=e;if(v==="image"){let y=d?`${d}.`:"";l.append(`${y}x`,"0"),l.append(`${y}y`,"0")}else d&&l.append(d,_)}}else{if(tl(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Ra,n=null,o=Na,c=e}return l&&o==="text/plain"&&(c=l,l=void 0),{action:n,method:r.toLowerCase(),encType:o,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function zh(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Kw(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Vr(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function Vw(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function qw(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Qw(e,t,r){let n=await Promise.all(e.map(async o=>{let l=t.routes[o.route.id];if(l){let c=await Vw(l,r);return c.links?c.links():[]}return[]}));return Jw(n.flat(1).filter(qw).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function km(e,t,r,n,o,l){let c=(p,d)=>r[d]?p.route.id!==r[d].route.id:!0,h=(p,d)=>r[d].pathname!==p.pathname||r[d].route.path?.endsWith("*")&&r[d].params["*"]!==p.params["*"];return l==="assets"?t.filter((p,d)=>c(p,d)||h(p,d)):l==="data"?t.filter((p,d)=>{let v=n.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(c(p,d)||h(p,d))return!0;if(p.route.shouldRevalidate){let _=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function Yw(e,t,{includeHydrateFallback:r}={}){return Gw(e.map(n=>{let o=t.routes[n.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),r&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function Gw(e){return[...new Set(e)]}function Xw(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function Jw(e,t){let r=new Set;return new Set(t),e.reduce((n,o)=>{let l=JSON.stringify(Xw(o));return r.has(l)||(r.add(l),n.push({key:l,link:o})),n},[])}function x_(){let e=C.useContext(Os);return zh(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Zw(){let e=C.useContext(el);return zh(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var $h=C.createContext(void 0);$h.displayName="FrameworkContext";function b_(){let e=C.useContext($h);return zh(e,"You must render this element inside a <HydratedRouter> element"),e}function e1(e,t){let r=C.useContext($h),[n,o]=C.useState(!1),[l,c]=C.useState(!1),{onFocus:h,onBlur:p,onMouseEnter:d,onMouseLeave:v,onTouchStart:_}=t,y=C.useRef(null);C.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let x=D=>{D.forEach(j=>{c(j.isIntersecting)})},k=new IntersectionObserver(x,{threshold:.5});return y.current&&k.observe(y.current),()=>{k.disconnect()}}},[e]),C.useEffect(()=>{if(n){let x=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(x)}}},[n]);let b=()=>{o(!0)},w=()=>{o(!1),c(!1)};return r?e!=="intent"?[l,y,{}]:[l,y,{onFocus:Cn(h,b),onBlur:Cn(p,w),onMouseEnter:Cn(d,b),onMouseLeave:Cn(v,w),onTouchStart:Cn(_,b)}]:[!1,y,{}]}function Cn(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function t1({page:e,...t}){let{router:r}=x_(),n=C.useMemo(()=>l_(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?C.createElement(i1,{page:e,matches:n,...t}):null}function r1(e){let{manifest:t,routeModules:r}=b_(),[n,o]=C.useState([]);return C.useEffect(()=>{let l=!1;return Qw(e,t,r).then(c=>{l||o(c)}),()=>{l=!0}},[e,t,r]),n}function i1({page:e,matches:t,...r}){let n=qr(),{manifest:o,routeModules:l}=b_(),{basename:c}=x_(),{loaderData:h,matches:p}=Zw(),d=C.useMemo(()=>km(e,t,p,o,n,"data"),[e,t,p,o,n]),v=C.useMemo(()=>km(e,t,p,o,n,"assets"),[e,t,p,o,n]),_=C.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let w=new Set,x=!1;if(t.forEach(D=>{let j=o.routes[D.route.id];!j||!j.hasLoader||(!d.some($=>$.route.id===D.route.id)&&D.route.id in h&&l[D.route.id]?.shouldRevalidate||j.hasClientLoader?x=!0:w.add(D.route.id))}),w.size===0)return[];let k=Kw(e,c,"data");return x&&w.size>0&&k.searchParams.set("_routes",t.filter(D=>w.has(D.route.id)).map(D=>D.route.id).join(",")),[k.pathname+k.search]},[c,h,n,o,d,t,e,l]),y=C.useMemo(()=>Yw(v,o),[v,o]),b=r1(v);return C.createElement(C.Fragment,null,_.map(w=>C.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...r})),y.map(w=>C.createElement("link",{key:w,rel:"modulepreload",href:w,...r})),b.map(({key:w,link:x})=>C.createElement("link",{key:w,nonce:r.nonce,...x})))}function s1(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var n1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{n1&&(window.__reactRouterVersion="7.11.0")}catch{}function o1({basename:e,children:t,unstable_useTransitions:r,window:n}){let o=C.useRef();o.current==null&&(o.current=zS({window:n,v5Compat:!0}));let l=o.current,[c,h]=C.useState({action:l.action,location:l.location}),p=C.useCallback(d=>{r===!1?h(d):C.startTransition(()=>h(d))},[r]);return C.useLayoutEffect(()=>l.listen(p),[l,p]),C.createElement(Bw,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:r})}var C_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kn=C.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:o,reloadDocument:l,replace:c,state:h,target:p,to:d,preventScrollReset:v,viewTransition:_,unstable_defaultShouldRevalidate:y,...b},w){let{basename:x,unstable_useTransitions:k}=C.useContext(Jt),D=typeof d=="string"&&C_.test(d),j=f_(d,x);d=j.to;let $=Sw(d,{relative:o}),[F,H,J]=e1(n,b),Z=u1(d,{replace:c,state:h,target:p,preventScrollReset:v,relative:o,viewTransition:_,unstable_defaultShouldRevalidate:y,unstable_useTransitions:k});function le(I){t&&t(I),I.defaultPrevented||Z(I)}let ie=C.createElement("a",{...b,...J,href:j.absoluteURL||$,onClick:j.isExternal||l?t:le,ref:s1(w,H),target:p,"data-discover":!D&&r==="render"?"true":void 0});return F&&!D?C.createElement(C.Fragment,null,ie,C.createElement(t1,{page:$})):ie});Kn.displayName="Link";var a1=C.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:o=!1,style:l,to:c,viewTransition:h,children:p,...d},v){let _=eo(c,{relative:d.relative}),y=qr(),b=C.useContext(el),{navigator:w,basename:x}=C.useContext(Jt),k=b!=null&&m1(_)&&h===!0,D=w.encodeLocation?w.encodeLocation(_).pathname:_.pathname,j=y.pathname,$=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;r||(j=j.toLowerCase(),$=$?$.toLowerCase():null,D=D.toLowerCase()),$&&x&&($=Vr($,x)||$);const F=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let H=j===D||!o&&j.startsWith(D)&&j.charAt(F)==="/",J=$!=null&&($===D||!o&&$.startsWith(D)&&$.charAt(D.length)==="/"),Z={isActive:H,isPending:J,isTransitioning:k},le=H?t:void 0,ie;typeof n=="function"?ie=n(Z):ie=[n,H?"active":null,J?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let I=typeof l=="function"?l(Z):l;return C.createElement(Kn,{...d,"aria-current":le,className:ie,ref:v,style:I,to:c,viewTransition:h},typeof p=="function"?p(Z):p)});a1.displayName="NavLink";var l1=C.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:o,state:l,method:c=Ra,action:h,onSubmit:p,relative:d,preventScrollReset:v,viewTransition:_,unstable_defaultShouldRevalidate:y,...b},w)=>{let{unstable_useTransitions:x}=C.useContext(Jt),k=f1(),D=p1(h,{relative:d}),j=c.toLowerCase()==="get"?"get":"post",$=typeof h=="string"&&C_.test(h),F=H=>{if(p&&p(H),H.defaultPrevented)return;H.preventDefault();let J=H.nativeEvent.submitter,Z=J?.getAttribute("formmethod")||c,le=()=>k(J||H.currentTarget,{fetcherKey:t,method:Z,navigate:r,replace:o,state:l,relative:d,preventScrollReset:v,viewTransition:_,unstable_defaultShouldRevalidate:y});x&&r!==!1?C.startTransition(()=>le()):le()};return C.createElement("form",{ref:w,method:j,action:D,onSubmit:n?p:F,...b,"data-discover":!$&&e==="render"?"true":void 0})});l1.displayName="Form";function c1(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function k_(e){let t=C.useContext(Os);return $e(t,c1(e)),t}function u1(e,{target:t,replace:r,state:n,preventScrollReset:o,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:h,unstable_useTransitions:p}={}){let d=Ih(),v=qr(),_=eo(e,{relative:l});return C.useCallback(y=>{if($w(y,t)){y.preventDefault();let b=r!==void 0?r:Un(v)===Un(_),w=()=>d(e,{replace:b,state:n,preventScrollReset:o,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:h});p?C.startTransition(()=>w()):w()}},[v,d,_,r,n,t,e,o,l,c,h,p])}var h1=0,d1=()=>`__${String(++h1)}__`;function f1(){let{router:e}=k_("useSubmit"),{basename:t}=C.useContext(Jt),r=Mw(),n=e.fetch,o=e.navigate;return C.useCallback(async(l,c={})=>{let{action:h,method:p,encType:d,formData:v,body:_}=Uw(l,t);if(c.navigate===!1){let y=c.fetcherKey||d1();await n(y,r,c.action||h,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:_,formMethod:c.method||p,formEncType:c.encType||d,flushSync:c.flushSync})}else await o(c.action||h,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:_,formMethod:c.method||p,formEncType:c.encType||d,replace:c.replace,state:c.state,fromRouteId:r,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,o,t,r])}function p1(e,{relative:t}={}){let{basename:r}=C.useContext(Jt),n=C.useContext(yr);$e(n,"useFormAction must be used inside a RouteContext");let[o]=n.matches.slice(-1),l={...eo(e||".",{relative:t})},c=qr();if(e==null){l.search=c.search;let h=new URLSearchParams(l.search),p=h.getAll("index");if(p.some(v=>v==="")){h.delete("index"),p.filter(_=>_).forEach(_=>h.append("index",_));let v=h.toString();l.search=v?`?${v}`:""}}return(!e||e===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(l.pathname=l.pathname==="/"?r:Kr([r,l.pathname])),Un(l)}function m1(e,{relative:t}={}){let r=C.useContext(m_);$e(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=k_("useViewTransitionState"),o=eo(e,{relative:t});if(!r.isTransitioning)return!1;let l=Vr(r.currentLocation.pathname,n)||r.currentLocation.pathname,c=Vr(r.nextLocation.pathname,n)||r.nextLocation.pathname;return $a(o.pathname,c)!=null||$a(o.pathname,l)!=null}const Ce=e=>typeof e=="string",kn=()=>{let e,t;const r=new Promise((n,o)=>{e=n,t=o});return r.resolve=e,r.reject=t,r},Em=e=>e==null?"":""+e,g1=(e,t,r)=>{e.forEach(n=>{t[n]&&(r[n]=t[n])})},_1=/###/g,Pm=e=>e&&e.indexOf("###")>-1?e.replace(_1,"."):e,Rm=e=>!e||Ce(e),An=(e,t,r)=>{const n=Ce(t)?t.split("."):t;let o=0;for(;o<n.length-1;){if(Rm(e))return{};const l=Pm(n[o]);!e[l]&&r&&(e[l]=new r),Object.prototype.hasOwnProperty.call(e,l)?e=e[l]:e={},++o}return Rm(e)?{}:{obj:e,k:Pm(n[o])}},Nm=(e,t,r)=>{const{obj:n,k:o}=An(e,t,Object);if(n!==void 0||t.length===1){n[o]=r;return}let l=t[t.length-1],c=t.slice(0,t.length-1),h=An(e,c,Object);for(;h.obj===void 0&&c.length;)l=`${c[c.length-1]}.${l}`,c=c.slice(0,c.length-1),h=An(e,c,Object),h?.obj&&typeof h.obj[`${h.k}.${l}`]<"u"&&(h.obj=void 0);h.obj[`${h.k}.${l}`]=r},v1=(e,t,r,n)=>{const{obj:o,k:l}=An(e,t,Object);o[l]=o[l]||[],o[l].push(r)},Ha=(e,t)=>{const{obj:r,k:n}=An(e,t);if(r&&Object.prototype.hasOwnProperty.call(r,n))return r[n]},y1=(e,t,r)=>{const n=Ha(e,r);return n!==void 0?n:Ha(t,r)},E_=(e,t,r)=>{for(const n in t)n!=="__proto__"&&n!=="constructor"&&(n in e?Ce(e[n])||e[n]instanceof String||Ce(t[n])||t[n]instanceof String?r&&(e[n]=t[n]):E_(e[n],t[n],r):e[n]=t[n]);return e},ws=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var S1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const w1=e=>Ce(e)?e.replace(/[&<>"'\/]/g,t=>S1[t]):e;class x1{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const r=this.regExpMap.get(t);if(r!==void 0)return r;const n=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,n),this.regExpQueue.push(t),n}}const b1=[" ",",","?","!",";"],C1=new x1(20),k1=(e,t,r)=>{t=t||"",r=r||"";const n=b1.filter(c=>t.indexOf(c)<0&&r.indexOf(c)<0);if(n.length===0)return!0;const o=C1.getRegExp(`(${n.map(c=>c==="?"?"\\?":c).join("|")})`);let l=!o.test(e);if(!l){const c=e.indexOf(r);c>0&&!o.test(e.substring(0,c))&&(l=!0)}return l},$u=(e,t,r=".")=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const n=t.split(r);let o=e;for(let l=0;l<n.length;){if(!o||typeof o!="object")return;let c,h="";for(let p=l;p<n.length;++p)if(p!==l&&(h+=r),h+=n[p],c=o[h],c!==void 0){if(["string","number","boolean"].indexOf(typeof c)>-1&&p<n.length-1)continue;l+=p-l+1;break}o=c}return o},Vn=e=>e?.replace("_","-"),E1={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};class Wa{constructor(t,r={}){this.init(t,r)}init(t,r={}){this.prefix=r.prefix||"i18next:",this.logger=t||E1,this.options=r,this.debug=r.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,r,n,o){return o&&!this.debug?null:(Ce(t[0])&&(t[0]=`${n}${this.prefix} ${t[0]}`),this.logger[r](t))}create(t){return new Wa(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Wa(this.logger,t)}}var Nr=new Wa;class rl{constructor(){this.observers={}}on(t,r){return t.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const o=this.observers[n].get(r)||0;this.observers[n].set(r,o+1)}),this}off(t,r){if(this.observers[t]){if(!r){delete this.observers[t];return}this.observers[t].delete(r)}}emit(t,...r){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([o,l])=>{for(let c=0;c<l;c++)o(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([o,l])=>{for(let c=0;c<l;c++)o.apply(o,[t,...r])})}}class Lm extends rl{constructor(t,r={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const r=this.options.ns.indexOf(t);r>-1&&this.options.ns.splice(r,1)}getResource(t,r,n,o={}){const l=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,c=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure;let h;t.indexOf(".")>-1?h=t.split("."):(h=[t,r],n&&(Array.isArray(n)?h.push(...n):Ce(n)&&l?h.push(...n.split(l)):h.push(n)));const p=Ha(this.data,h);return!p&&!r&&!n&&t.indexOf(".")>-1&&(t=h[0],r=h[1],n=h.slice(2).join(".")),p||!c||!Ce(n)?p:$u(this.data?.[t]?.[r],n,l)}addResource(t,r,n,o,l={silent:!1}){const c=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator;let h=[t,r];n&&(h=h.concat(c?n.split(c):n)),t.indexOf(".")>-1&&(h=t.split("."),o=r,r=h[1]),this.addNamespaces(r),Nm(this.data,h,o),l.silent||this.emit("added",t,r,n,o)}addResources(t,r,n,o={silent:!1}){for(const l in n)(Ce(n[l])||Array.isArray(n[l]))&&this.addResource(t,r,l,n[l],{silent:!0});o.silent||this.emit("added",t,r,n)}addResourceBundle(t,r,n,o,l,c={silent:!1,skipCopy:!1}){let h=[t,r];t.indexOf(".")>-1&&(h=t.split("."),o=n,n=r,r=h[1]),this.addNamespaces(r);let p=Ha(this.data,h)||{};c.skipCopy||(n=JSON.parse(JSON.stringify(n))),o?E_(p,n,l):p={...p,...n},Nm(this.data,h,p),c.silent||this.emit("added",t,r,n)}removeResourceBundle(t,r){this.hasResourceBundle(t,r)&&delete this.data[t][r],this.removeNamespaces(r),this.emit("removed",t,r)}hasResourceBundle(t,r){return this.getResource(t,r)!==void 0}getResourceBundle(t,r){return r||(r=this.options.defaultNS),this.getResource(t,r)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const r=this.getDataByLanguage(t);return!!(r&&Object.keys(r)||[]).find(o=>r[o]&&Object.keys(r[o]).length>0)}toJSON(){return this.data}}var P_={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,r,n,o){return e.forEach(l=>{t=this.processors[l]?.process(t,r,n,o)??t}),t}};const R_=Symbol("i18next/PATH_KEY");function P1(){const e=[],t=Object.create(null);let r;return t.get=(n,o)=>(r?.revoke?.(),o===R_?e:(e.push(o),r=Proxy.revocable(n,t),r.proxy)),Proxy.revocable(Object.create(null),t).proxy}function Hu(e,t){const{[R_]:r}=e(P1());return r.join(t?.keySeparator??".")}const Dm={},cu=e=>!Ce(e)&&typeof e!="boolean"&&typeof e!="number";class Ua extends rl{constructor(t,r={}){super(),g1(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Nr.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,r={interpolation:{}}){const n={...r};if(t==null)return!1;const o=this.resolve(t,n);if(o?.res===void 0)return!1;const l=cu(o.res);return!(n.returnObjects===!1&&l)}extractFromKey(t,r){let n=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let l=r.ns||this.options.defaultNS||[];const c=n&&t.indexOf(n)>-1,h=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!k1(t,n,o);if(c&&!h){const p=t.match(this.interpolator.nestingRegexp);if(p&&p.length>0)return{key:t,namespaces:Ce(l)?[l]:l};const d=t.split(n);(n!==o||n===o&&this.options.ns.indexOf(d[0])>-1)&&(l=d.shift()),t=d.join(o)}return{key:t,namespaces:Ce(l)?[l]:l}}translate(t,r,n){let o=typeof r=="object"?{...r}:r;if(typeof o!="object"&&this.options.overloadTranslationOptionHandler&&(o=this.options.overloadTranslationOptionHandler(arguments)),typeof o=="object"&&(o={...o}),o||(o={}),t==null)return"";typeof t=="function"&&(t=Hu(t,{...this.options,...o})),Array.isArray(t)||(t=[String(t)]);const l=o.returnDetails!==void 0?o.returnDetails:this.options.returnDetails,c=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,{key:h,namespaces:p}=this.extractFromKey(t[t.length-1],o),d=p[p.length-1];let v=o.nsSeparator!==void 0?o.nsSeparator:this.options.nsSeparator;v===void 0&&(v=":");const _=o.lng||this.language,y=o.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(_?.toLowerCase()==="cimode")return y?l?{res:`${d}${v}${h}`,usedKey:h,exactUsedKey:h,usedLng:_,usedNS:d,usedParams:this.getUsedParamsDetails(o)}:`${d}${v}${h}`:l?{res:h,usedKey:h,exactUsedKey:h,usedLng:_,usedNS:d,usedParams:this.getUsedParamsDetails(o)}:h;const b=this.resolve(t,o);let w=b?.res;const x=b?.usedKey||h,k=b?.exactUsedKey||h,D=["[object Number]","[object Function]","[object RegExp]"],j=o.joinArrays!==void 0?o.joinArrays:this.options.joinArrays,$=!this.i18nFormat||this.i18nFormat.handleAsObject,F=o.count!==void 0&&!Ce(o.count),H=Ua.hasDefaultValue(o),J=F?this.pluralResolver.getSuffix(_,o.count,o):"",Z=o.ordinal&&F?this.pluralResolver.getSuffix(_,o.count,{ordinal:!1}):"",le=F&&!o.ordinal&&o.count===0,ie=le&&o[`defaultValue${this.options.pluralSeparator}zero`]||o[`defaultValue${J}`]||o[`defaultValue${Z}`]||o.defaultValue;let I=w;$&&!w&&H&&(I=ie);const K=cu(I),X=Object.prototype.toString.apply(I);if($&&I&&K&&D.indexOf(X)<0&&!(Ce(j)&&Array.isArray(I))){if(!o.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const z=this.options.returnedObjectHandler?this.options.returnedObjectHandler(x,I,{...o,ns:p}):`key '${h} (${this.language})' returned an object instead of string.`;return l?(b.res=z,b.usedParams=this.getUsedParamsDetails(o),b):z}if(c){const z=Array.isArray(I),V=z?[]:{},W=z?k:x;for(const M in I)if(Object.prototype.hasOwnProperty.call(I,M)){const U=`${W}${c}${M}`;H&&!w?V[M]=this.translate(U,{...o,defaultValue:cu(ie)?ie[M]:void 0,joinArrays:!1,ns:p}):V[M]=this.translate(U,{...o,joinArrays:!1,ns:p}),V[M]===U&&(V[M]=I[M])}w=V}}else if($&&Ce(j)&&Array.isArray(w))w=w.join(j),w&&(w=this.extendTranslation(w,t,o,n));else{let z=!1,V=!1;!this.isValidLookup(w)&&H&&(z=!0,w=ie),this.isValidLookup(w)||(V=!0,w=h);const M=(o.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&V?void 0:w,U=H&&ie!==w&&this.options.updateMissing;if(V||z||U){if(this.logger.log(U?"updateKey":"missingKey",_,d,h,U?ie:w),c){const P=this.resolve(h,{...o,keySeparator:!1});P&&P.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let L=[];const G=this.languageUtils.getFallbackCodes(this.options.fallbackLng,o.lng||this.language);if(this.options.saveMissingTo==="fallback"&&G&&G[0])for(let P=0;P<G.length;P++)L.push(G[P]);else this.options.saveMissingTo==="all"?L=this.languageUtils.toResolveHierarchy(o.lng||this.language):L.push(o.lng||this.language);const q=(P,B,Y)=>{const ae=H&&Y!==w?Y:M;this.options.missingKeyHandler?this.options.missingKeyHandler(P,d,B,ae,U,o):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(P,d,B,ae,U,o),this.emit("missingKey",P,d,B,w)};this.options.saveMissing&&(this.options.saveMissingPlurals&&F?L.forEach(P=>{const B=this.pluralResolver.getSuffixes(P,o);le&&o[`defaultValue${this.options.pluralSeparator}zero`]&&B.indexOf(`${this.options.pluralSeparator}zero`)<0&&B.push(`${this.options.pluralSeparator}zero`),B.forEach(Y=>{q([P],h+Y,o[`defaultValue${Y}`]||ie)})}):q(L,h,ie))}w=this.extendTranslation(w,t,o,b,n),V&&w===h&&this.options.appendNamespaceToMissingKey&&(w=`${d}${v}${h}`),(V||z)&&this.options.parseMissingKeyHandler&&(w=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}${v}${h}`:h,z?w:void 0,o))}return l?(b.res=w,b.usedParams=this.getUsedParamsDetails(o),b):w}extendTranslation(t,r,n,o,l){if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const p=Ce(t)&&(n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(p){const _=t.match(this.interpolator.nestingRegexp);d=_&&_.length}let v=n.replace&&!Ce(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(v={...this.options.interpolation.defaultVariables,...v}),t=this.interpolator.interpolate(t,v,n.lng||this.language||o.usedLng,n),p){const _=t.match(this.interpolator.nestingRegexp),y=_&&_.length;d<y&&(n.nest=!1)}!n.lng&&o&&o.res&&(n.lng=this.language||o.usedLng),n.nest!==!1&&(t=this.interpolator.nest(t,(..._)=>l?.[0]===_[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${_[0]} in key: ${r[0]}`),null):this.translate(..._,r),n)),n.interpolation&&this.interpolator.reset()}const c=n.postProcess||this.options.postProcess,h=Ce(c)?[c]:c;return t!=null&&h?.length&&n.applyPostProcessor!==!1&&(t=P_.handle(h,t,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),t}resolve(t,r={}){let n,o,l,c,h;return Ce(t)&&(t=[t]),t.forEach(p=>{if(this.isValidLookup(n))return;const d=this.extractFromKey(p,r),v=d.key;o=v;let _=d.namespaces;this.options.fallbackNS&&(_=_.concat(this.options.fallbackNS));const y=r.count!==void 0&&!Ce(r.count),b=y&&!r.ordinal&&r.count===0,w=r.context!==void 0&&(Ce(r.context)||typeof r.context=="number")&&r.context!=="",x=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);_.forEach(k=>{this.isValidLookup(n)||(h=k,!Dm[`${x[0]}-${k}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(h)&&(Dm[`${x[0]}-${k}`]=!0,this.logger.warn(`key "${o}" for languages "${x.join(", ")}" won't get resolved as namespace "${h}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),x.forEach(D=>{if(this.isValidLookup(n))return;c=D;const j=[v];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(j,v,D,k,r);else{let F;y&&(F=this.pluralResolver.getSuffix(D,r.count,r));const H=`${this.options.pluralSeparator}zero`,J=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(y&&(r.ordinal&&F.indexOf(J)===0&&j.push(v+F.replace(J,this.options.pluralSeparator)),j.push(v+F),b&&j.push(v+H)),w){const Z=`${v}${this.options.contextSeparator||"_"}${r.context}`;j.push(Z),y&&(r.ordinal&&F.indexOf(J)===0&&j.push(Z+F.replace(J,this.options.pluralSeparator)),j.push(Z+F),b&&j.push(Z+H))}}let $;for(;$=j.pop();)this.isValidLookup(n)||(l=$,n=this.getResource(D,k,$,r))}))})}),{res:n,usedKey:o,exactUsedKey:l,usedLng:c,usedNS:h}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,r,n,o={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,r,n,o):this.resourceStore.getResource(t,r,n,o)}getUsedParamsDetails(t={}){const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=t.replace&&!Ce(t.replace);let o=n?t.replace:t;if(n&&typeof t.count<"u"&&(o.count=t.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!n){o={...o};for(const l of r)delete o[l]}return o}static hasDefaultValue(t){const r="defaultValue";for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r===n.substring(0,r.length)&&t[n]!==void 0)return!0;return!1}}class Mm{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Nr.create("languageUtils")}getScriptPartFromCode(t){if(t=Vn(t),!t||t.indexOf("-")<0)return null;const r=t.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(t){if(t=Vn(t),!t||t.indexOf("-")<0)return t;const r=t.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(t){if(Ce(t)&&t.indexOf("-")>-1){let r;try{r=Intl.getCanonicalLocales(t)[0]}catch{}return r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let r;return t.forEach(n=>{if(r)return;const o=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(o))&&(r=o)}),!r&&this.options.supportedLngs&&t.forEach(n=>{if(r)return;const o=this.getScriptPartFromCode(n);if(this.isSupportedCode(o))return r=o;const l=this.getLanguagePartFromCode(n);if(this.isSupportedCode(l))return r=l;r=this.options.supportedLngs.find(c=>{if(c===l)return c;if(!(c.indexOf("-")<0&&l.indexOf("-")<0)&&(c.indexOf("-")>0&&l.indexOf("-")<0&&c.substring(0,c.indexOf("-"))===l||c.indexOf(l)===0&&l.length>1))return c})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(t,r){if(!t)return[];if(typeof t=="function"&&(t=t(r)),Ce(t)&&(t=[t]),Array.isArray(t))return t;if(!r)return t.default||[];let n=t[r];return n||(n=t[this.getScriptPartFromCode(r)]),n||(n=t[this.formatLanguageCode(r)]),n||(n=t[this.getLanguagePartFromCode(r)]),n||(n=t.default),n||[]}toResolveHierarchy(t,r){const n=this.getFallbackCodes((r===!1?[]:r)||this.options.fallbackLng||[],t),o=[],l=c=>{c&&(this.isSupportedCode(c)?o.push(c):this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`))};return Ce(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&l(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&l(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&l(this.getLanguagePartFromCode(t))):Ce(t)&&l(this.formatLanguageCode(t)),n.forEach(c=>{o.indexOf(c)<0&&l(this.formatLanguageCode(c))}),o}}const Om={zero:0,one:1,two:2,few:3,many:4,other:5},jm={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class R1{constructor(t,r={}){this.languageUtils=t,this.options=r,this.logger=Nr.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,r){this.rules[t]=r}clearCache(){this.pluralRulesCache={}}getRule(t,r={}){const n=Vn(t==="dev"?"en":t),o=r.ordinal?"ordinal":"cardinal",l=JSON.stringify({cleanedCode:n,type:o});if(l in this.pluralRulesCache)return this.pluralRulesCache[l];let c;try{c=new Intl.PluralRules(n,{type:o})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),jm;if(!t.match(/-|_/))return jm;const p=this.languageUtils.getLanguagePartFromCode(t);c=this.getRule(p,r)}return this.pluralRulesCache[l]=c,c}needsPlural(t,r={}){let n=this.getRule(t,r);return n||(n=this.getRule("dev",r)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,r,n={}){return this.getSuffixes(t,n).map(o=>`${r}${o}`)}getSuffixes(t,r={}){let n=this.getRule(t,r);return n||(n=this.getRule("dev",r)),n?n.resolvedOptions().pluralCategories.sort((o,l)=>Om[o]-Om[l]).map(o=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${o}`):[]}getSuffix(t,r,n={}){const o=this.getRule(t,n);return o?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${o.select(r)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",r,n))}}const Tm=(e,t,r,n=".",o=!0)=>{let l=y1(e,t,r);return!l&&o&&Ce(r)&&(l=$u(e,r,n),l===void 0&&(l=$u(t,r,n))),l},uu=e=>e.replace(/\$/g,"$$$$");class Bm{constructor(t={}){this.logger=Nr.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(r=>r),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:r,escapeValue:n,useRawValueToEscape:o,prefix:l,prefixEscaped:c,suffix:h,suffixEscaped:p,formatSeparator:d,unescapeSuffix:v,unescapePrefix:_,nestingPrefix:y,nestingPrefixEscaped:b,nestingSuffix:w,nestingSuffixEscaped:x,nestingOptionsSeparator:k,maxReplaces:D,alwaysFormat:j}=t.interpolation;this.escape=r!==void 0?r:w1,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=o!==void 0?o:!1,this.prefix=l?ws(l):c||"{{",this.suffix=h?ws(h):p||"}}",this.formatSeparator=d||",",this.unescapePrefix=v?"":_||"-",this.unescapeSuffix=this.unescapePrefix?"":v||"",this.nestingPrefix=y?ws(y):b||ws("$t("),this.nestingSuffix=w?ws(w):x||ws(")"),this.nestingOptionsSeparator=k||",",this.maxReplaces=D||1e3,this.alwaysFormat=j!==void 0?j:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(r,n)=>r?.source===n?(r.lastIndex=0,r):new RegExp(n,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,r,n,o){let l,c,h;const p=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=b=>{if(b.indexOf(this.formatSeparator)<0){const D=Tm(r,p,b,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(D,void 0,n,{...o,...r,interpolationkey:b}):D}const w=b.split(this.formatSeparator),x=w.shift().trim(),k=w.join(this.formatSeparator).trim();return this.format(Tm(r,p,x,this.options.keySeparator,this.options.ignoreJSONStructure),k,n,{...o,...r,interpolationkey:x})};this.resetRegExp();const v=o?.missingInterpolationHandler||this.options.missingInterpolationHandler,_=o?.interpolation?.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:b=>uu(b)},{regex:this.regexp,safeValue:b=>this.escapeValue?uu(this.escape(b)):uu(b)}].forEach(b=>{for(h=0;l=b.regex.exec(t);){const w=l[1].trim();if(c=d(w),c===void 0)if(typeof v=="function"){const k=v(t,l,o);c=Ce(k)?k:""}else if(o&&Object.prototype.hasOwnProperty.call(o,w))c="";else if(_){c=l[0];continue}else this.logger.warn(`missed to pass in variable ${w} for interpolating ${t}`),c="";else!Ce(c)&&!this.useRawValueToEscape&&(c=Em(c));const x=b.safeValue(c);if(t=t.replace(l[0],x),_?(b.regex.lastIndex+=c.length,b.regex.lastIndex-=l[0].length):b.regex.lastIndex=0,h++,h>=this.maxReplaces)break}}),t}nest(t,r,n={}){let o,l,c;const h=(p,d)=>{const v=this.nestingOptionsSeparator;if(p.indexOf(v)<0)return p;const _=p.split(new RegExp(`${v}[ ]*{`));let y=`{${_[1]}`;p=_[0],y=this.interpolate(y,c);const b=y.match(/'/g),w=y.match(/"/g);((b?.length??0)%2===0&&!w||w.length%2!==0)&&(y=y.replace(/'/g,'"'));try{c=JSON.parse(y),d&&(c={...d,...c})}catch(x){return this.logger.warn(`failed parsing options string in nesting for key ${p}`,x),`${p}${v}${y}`}return c.defaultValue&&c.defaultValue.indexOf(this.prefix)>-1&&delete c.defaultValue,p};for(;o=this.nestingRegexp.exec(t);){let p=[];c={...n},c=c.replace&&!Ce(c.replace)?c.replace:c,c.applyPostProcessor=!1,delete c.defaultValue;const d=/{.*}/.test(o[1])?o[1].lastIndexOf("}")+1:o[1].indexOf(this.formatSeparator);if(d!==-1&&(p=o[1].slice(d).split(this.formatSeparator).map(v=>v.trim()).filter(Boolean),o[1]=o[1].slice(0,d)),l=r(h.call(this,o[1].trim(),c),c),l&&o[0]===t&&!Ce(l))return l;Ce(l)||(l=Em(l)),l||(this.logger.warn(`missed to resolve ${o[1]} for nesting ${t}`),l=""),p.length&&(l=p.reduce((v,_)=>this.format(v,_,n.lng,{...n,interpolationkey:o[1].trim()}),l.trim())),t=t.replace(o[0],l),this.regexp.lastIndex=0}return t}}const N1=e=>{let t=e.toLowerCase().trim();const r={};if(e.indexOf("(")>-1){const n=e.split("(");t=n[0].toLowerCase().trim();const o=n[1].substring(0,n[1].length-1);t==="currency"&&o.indexOf(":")<0?r.currency||(r.currency=o.trim()):t==="relativetime"&&o.indexOf(":")<0?r.range||(r.range=o.trim()):o.split(";").forEach(c=>{if(c){const[h,...p]=c.split(":"),d=p.join(":").trim().replace(/^'+|'+$/g,""),v=h.trim();r[v]||(r[v]=d),d==="false"&&(r[v]=!1),d==="true"&&(r[v]=!0),isNaN(d)||(r[v]=parseInt(d,10))}})}return{formatName:t,formatOptions:r}},Im=e=>{const t={};return(r,n,o)=>{let l=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(l={...l,[o.interpolationkey]:void 0});const c=n+JSON.stringify(l);let h=t[c];return h||(h=e(Vn(n),o),t[c]=h),h(r)}},L1=e=>(t,r,n)=>e(Vn(r),n)(t);class D1{constructor(t={}){this.logger=Nr.create("formatter"),this.options=t,this.init(t)}init(t,r={interpolation:{}}){this.formatSeparator=r.interpolation.formatSeparator||",";const n=r.cacheInBuiltFormats?Im:L1;this.formats={number:n((o,l)=>{const c=new Intl.NumberFormat(o,{...l});return h=>c.format(h)}),currency:n((o,l)=>{const c=new Intl.NumberFormat(o,{...l,style:"currency"});return h=>c.format(h)}),datetime:n((o,l)=>{const c=new Intl.DateTimeFormat(o,{...l});return h=>c.format(h)}),relativetime:n((o,l)=>{const c=new Intl.RelativeTimeFormat(o,{...l});return h=>c.format(h,l.range||"day")}),list:n((o,l)=>{const c=new Intl.ListFormat(o,{...l});return h=>c.format(h)})}}add(t,r){this.formats[t.toLowerCase().trim()]=r}addCached(t,r){this.formats[t.toLowerCase().trim()]=Im(r)}format(t,r,n,o={}){const l=r.split(this.formatSeparator);if(l.length>1&&l[0].indexOf("(")>1&&l[0].indexOf(")")<0&&l.find(h=>h.indexOf(")")>-1)){const h=l.findIndex(p=>p.indexOf(")")>-1);l[0]=[l[0],...l.splice(1,h)].join(this.formatSeparator)}return l.reduce((h,p)=>{const{formatName:d,formatOptions:v}=N1(p);if(this.formats[d]){let _=h;try{const y=o?.formatParams?.[o.interpolationkey]||{},b=y.locale||y.lng||o.locale||o.lng||n;_=this.formats[d](h,b,{...v,...o,...y})}catch(y){this.logger.warn(y)}return _}else this.logger.warn(`there was no format function for ${d}`);return h},t)}}const M1=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class O1 extends rl{constructor(t,r,n,o={}){super(),this.backend=t,this.store=r,this.services=n,this.languageUtils=n.languageUtils,this.options=o,this.logger=Nr.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,o.backend,o)}queueLoad(t,r,n,o){const l={},c={},h={},p={};return t.forEach(d=>{let v=!0;r.forEach(_=>{const y=`${d}|${_}`;!n.reload&&this.store.hasResourceBundle(d,_)?this.state[y]=2:this.state[y]<0||(this.state[y]===1?c[y]===void 0&&(c[y]=!0):(this.state[y]=1,v=!1,c[y]===void 0&&(c[y]=!0),l[y]===void 0&&(l[y]=!0),p[_]===void 0&&(p[_]=!0)))}),v||(h[d]=!0)}),(Object.keys(l).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(l),pending:Object.keys(c),toLoadLanguages:Object.keys(h),toLoadNamespaces:Object.keys(p)}}loaded(t,r,n){const o=t.split("|"),l=o[0],c=o[1];r&&this.emit("failedLoading",l,c,r),!r&&n&&this.store.addResourceBundle(l,c,n,void 0,void 0,{skipCopy:!0}),this.state[t]=r?-1:2,r&&n&&(this.state[t]=0);const h={};this.queue.forEach(p=>{v1(p.loaded,[l],c),M1(p,t),r&&p.errors.push(r),p.pendingCount===0&&!p.done&&(Object.keys(p.loaded).forEach(d=>{h[d]||(h[d]={});const v=p.loaded[d];v.length&&v.forEach(_=>{h[d][_]===void 0&&(h[d][_]=!0)})}),p.done=!0,p.errors.length?p.callback(p.errors):p.callback())}),this.emit("loaded",h),this.queue=this.queue.filter(p=>!p.done)}read(t,r,n,o=0,l=this.retryTimeout,c){if(!t.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:r,fcName:n,tried:o,wait:l,callback:c});return}this.readingCalls++;const h=(d,v)=>{if(this.readingCalls--,this.waitingReads.length>0){const _=this.waitingReads.shift();this.read(_.lng,_.ns,_.fcName,_.tried,_.wait,_.callback)}if(d&&v&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,t,r,n,o+1,l*2,c)},l);return}c(d,v)},p=this.backend[n].bind(this.backend);if(p.length===2){try{const d=p(t,r);d&&typeof d.then=="function"?d.then(v=>h(null,v)).catch(h):h(null,d)}catch(d){h(d)}return}return p(t,r,h)}prepareLoading(t,r,n={},o){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();Ce(t)&&(t=this.languageUtils.toResolveHierarchy(t)),Ce(r)&&(r=[r]);const l=this.queueLoad(t,r,n,o);if(!l.toLoad.length)return l.pending.length||o(),null;l.toLoad.forEach(c=>{this.loadOne(c)})}load(t,r,n){this.prepareLoading(t,r,{},n)}reload(t,r,n){this.prepareLoading(t,r,{reload:!0},n)}loadOne(t,r=""){const n=t.split("|"),o=n[0],l=n[1];this.read(o,l,"read",void 0,void 0,(c,h)=>{c&&this.logger.warn(`${r}loading namespace ${l} for language ${o} failed`,c),!c&&h&&this.logger.log(`${r}loaded namespace ${l} for language ${o}`,h),this.loaded(t,c,h)})}saveMissing(t,r,n,o,l,c={},h=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${n}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend?.create){const p={...c,isUpdate:l},d=this.backend.create.bind(this.backend);if(d.length<6)try{let v;d.length===5?v=d(t,r,n,o,p):v=d(t,r,n,o),v&&typeof v.then=="function"?v.then(_=>h(null,_)).catch(h):h(null,v)}catch(v){h(v)}else d(t,r,n,o,h,p)}!t||!t[0]||this.store.addResource(t[0],r,n,o)}}}const Am=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),Ce(e[1])&&(t.defaultValue=e[1]),Ce(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const r=e[3]||e[2];Object.keys(r).forEach(n=>{t[n]=r[n]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Fm=e=>(Ce(e.ns)&&(e.ns=[e.ns]),Ce(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),Ce(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e),ya=()=>{},j1=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(r=>{typeof e[r]=="function"&&(e[r]=e[r].bind(e))})};class Fn extends rl{constructor(t={},r){if(super(),this.options=Fm(t),this.services={},this.logger=Nr,this.modules={external:[]},j1(this),r&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,r),this;setTimeout(()=>{this.init(t,r)},0)}}init(t={},r){this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),t.defaultNS==null&&t.ns&&(Ce(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const n=Am();this.options={...n,...this.options,...Fm(t)},this.options.interpolation={...n.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=n.overloadTranslationOptionHandler);const o=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?Nr.init(o(this.modules.logger),this.options):Nr.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=D1;const v=new Mm(this.options);this.store=new Lm(this.options.resources,this.options);const _=this.services;_.logger=Nr,_.resourceStore=this.store,_.languageUtils=v,_.pluralResolver=new R1(v,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),d&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(_.formatter=o(d),_.formatter.init&&_.formatter.init(_,this.options),this.options.interpolation.format=_.formatter.format.bind(_.formatter)),_.interpolator=new Bm(this.options),_.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},_.backendConnector=new O1(o(this.modules.backend),_.resourceStore,_,this.options),_.backendConnector.on("*",(b,...w)=>{this.emit(b,...w)}),this.modules.languageDetector&&(_.languageDetector=o(this.modules.languageDetector),_.languageDetector.init&&_.languageDetector.init(_,this.options.detection,this.options)),this.modules.i18nFormat&&(_.i18nFormat=o(this.modules.i18nFormat),_.i18nFormat.init&&_.i18nFormat.init(this)),this.translator=new Ua(this.services,this.options),this.translator.on("*",(b,...w)=>{this.emit(b,...w)}),this.modules.external.forEach(b=>{b.init&&b.init(this)})}if(this.format=this.options.interpolation.format,r||(r=ya),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=(...v)=>this.store[d](...v)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=(...v)=>(this.store[d](...v),this)});const h=kn(),p=()=>{const d=(v,_)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),h.resolve(_),r(v,_)};if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initAsync?p():setTimeout(p,0),h}loadResources(t,r=ya){let n=r;const o=Ce(t)?t:this.language;if(typeof t=="function"&&(n=t),!this.options.resources||this.options.partialBundledLanguages){if(o?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const l=[],c=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(d=>{d!=="cimode"&&l.indexOf(d)<0&&l.push(d)})};o?c(o):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(p=>c(p)),this.options.preload?.forEach?.(h=>c(h)),this.services.backendConnector.load(l,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(h)})}else n(null)}reloadResources(t,r,n){const o=kn();return typeof t=="function"&&(n=t,t=void 0),typeof r=="function"&&(n=r,r=void 0),t||(t=this.languages),r||(r=this.options.ns),n||(n=ya),this.services.backendConnector.reload(t,r,l=>{o.resolve(),n(l)}),o}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&P_.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let r=0;r<this.languages.length;r++){const n=this.languages[r];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,r){this.isLanguageChangingTo=t;const n=kn();this.emit("languageChanging",t);const o=h=>{this.language=h,this.languages=this.services.languageUtils.toResolveHierarchy(h),this.resolvedLanguage=void 0,this.setResolvedLanguage(h)},l=(h,p)=>{p?this.isLanguageChangingTo===t&&(o(p),this.translator.changeLanguage(p),this.isLanguageChangingTo=void 0,this.emit("languageChanged",p),this.logger.log("languageChanged",p)):this.isLanguageChangingTo=void 0,n.resolve((...d)=>this.t(...d)),r&&r(h,(...d)=>this.t(...d))},c=h=>{!t&&!h&&this.services.languageDetector&&(h=[]);const p=Ce(h)?h:h&&h[0],d=this.store.hasLanguageSomeTranslations(p)?p:this.services.languageUtils.getBestMatchFromCodes(Ce(h)?[h]:h);d&&(this.language||o(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector?.cacheUserLanguage?.(d)),this.loadResources(d,v=>{l(v,d)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(t),n}getFixedT(t,r,n){const o=(l,c,...h)=>{let p;typeof c!="object"?p=this.options.overloadTranslationOptionHandler([l,c].concat(h)):p={...c},p.lng=p.lng||o.lng,p.lngs=p.lngs||o.lngs,p.ns=p.ns||o.ns,p.keyPrefix!==""&&(p.keyPrefix=p.keyPrefix||n||o.keyPrefix);const d=this.options.keySeparator||".";let v;return p.keyPrefix&&Array.isArray(l)?v=l.map(_=>(typeof _=="function"&&(_=Hu(_,{...this.options,...c})),`${p.keyPrefix}${d}${_}`)):(typeof l=="function"&&(l=Hu(l,{...this.options,...c})),v=p.keyPrefix?`${p.keyPrefix}${d}${l}`:l),this.t(v,p)};return Ce(t)?o.lng=t:o.lngs=t,o.ns=r,o.keyPrefix=n,o}t(...t){return this.translator?.translate(...t)}exists(...t){return this.translator?.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,r={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=r.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,l=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const c=(h,p)=>{const d=this.services.backendConnector.state[`${h}|${p}`];return d===-1||d===0||d===2};if(r.precheck){const h=r.precheck(this,c);if(h!==void 0)return h}return!!(this.hasResourceBundle(n,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(n,t)&&(!o||c(l,t)))}loadNamespaces(t,r){const n=kn();return this.options.ns?(Ce(t)&&(t=[t]),t.forEach(o=>{this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}),this.loadResources(o=>{n.resolve(),r&&r(o)}),n):(r&&r(),Promise.resolve())}loadLanguages(t,r){const n=kn();Ce(t)&&(t=[t]);const o=this.options.preload||[],l=t.filter(c=>o.indexOf(c)<0&&this.services.languageUtils.isSupportedCode(c));return l.length?(this.options.preload=o.concat(l),this.loadResources(c=>{n.resolve(),r&&r(c)}),n):(r&&r(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";try{const o=new Intl.Locale(t);if(o&&o.getTextInfo){const l=o.getTextInfo();if(l&&l.direction)return l.direction}}catch{}const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services?.languageUtils||new Mm(Am());return t.toLowerCase().indexOf("-latn")>1?"ltr":r.indexOf(n.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},r){const n=new Fn(t,r);return n.createInstance=Fn.createInstance,n}cloneInstance(t={},r=ya){const n=t.forkResourceStore;n&&delete t.forkResourceStore;const o={...this.options,...t,isClone:!0},l=new Fn(o);if((t.debug!==void 0||t.prefix!==void 0)&&(l.logger=l.logger.clone(t)),["store","services","language"].forEach(h=>{l[h]=this[h]}),l.services={...this.services},l.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},n){const h=Object.keys(this.store.data).reduce((p,d)=>(p[d]={...this.store.data[d]},p[d]=Object.keys(p[d]).reduce((v,_)=>(v[_]={...p[d][_]},v),p[d]),p),{});l.store=new Lm(h,o),l.services.resourceStore=l.store}return t.interpolation&&(l.services.interpolator=new Bm(o)),l.translator=new Ua(l.services,o),l.translator.on("*",(h,...p)=>{l.emit(h,...p)}),l.init(o,r),l.translator.options=o,l.translator.backendConnector.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ot=Fn.createInstance();Ot.createInstance;Ot.dir;Ot.init;Ot.loadResources;Ot.reloadResources;Ot.use;Ot.changeLanguage;Ot.getFixedT;Ot.t;Ot.exists;Ot.setDefaultNamespace;Ot.hasLoadedNamespace;Ot.loadNamespaces;Ot.loadLanguages;const T1=(e,t,r,n)=>{const o=[r,{code:t,...n||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(o,"warn","react-i18next::",!0);Ki(o[0])&&(o[0]=`react-i18next:: ${o[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...o):console?.warn&&console.warn(...o)},zm={},N_=(e,t,r,n)=>{Ki(r)&&zm[r]||(Ki(r)&&(zm[r]=new Date),T1(e,t,r,n))},L_=(e,t)=>()=>{if(e.isInitialized)t();else{const r=()=>{setTimeout(()=>{e.off("initialized",r)},0),t()};e.on("initialized",r)}},Wu=(e,t,r)=>{e.loadNamespaces(t,L_(e,r))},$m=(e,t,r,n)=>{if(Ki(r)&&(r=[r]),e.options.preload&&e.options.preload.indexOf(t)>-1)return Wu(e,r,n);r.forEach(o=>{e.options.ns.indexOf(o)<0&&e.options.ns.push(o)}),e.loadLanguages(t,L_(e,n))},B1=(e,t,r={})=>!t.languages||!t.languages.length?(N_(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:r.lng,precheck:(n,o)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!o(n.isLanguageChangingTo,e))return!1}}),Ki=e=>typeof e=="string",I1=e=>typeof e=="object"&&e!==null,A1=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,F1={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},z1=e=>F1[e],$1=e=>e.replace(A1,z1);let Uu={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:$1,transDefaultProps:void 0};const H1=(e={})=>{Uu={...Uu,...e}},W1=()=>Uu;let D_;const U1=e=>{D_=e},K1=()=>D_,V1={type:"3rdParty",init(e){H1(e.options.react),U1(e)}},q1=C.createContext();class Q1{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var hu={exports:{}},du={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hm;function Y1(){if(Hm)return du;Hm=1;var e=Za();function t(_,y){return _===y&&(_!==0||1/_===1/y)||_!==_&&y!==y}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,o=e.useEffect,l=e.useLayoutEffect,c=e.useDebugValue;function h(_,y){var b=y(),w=n({inst:{value:b,getSnapshot:y}}),x=w[0].inst,k=w[1];return l(function(){x.value=b,x.getSnapshot=y,p(x)&&k({inst:x})},[_,b,y]),o(function(){return p(x)&&k({inst:x}),_(function(){p(x)&&k({inst:x})})},[_]),c(b),b}function p(_){var y=_.getSnapshot;_=_.value;try{var b=y();return!r(_,b)}catch{return!0}}function d(_,y){return y()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:h;return du.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:v,du}var Wm;function G1(){return Wm||(Wm=1,hu.exports=Y1()),hu.exports}var X1=G1();const J1=(e,t)=>Ki(t)?t:I1(t)&&Ki(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,Z1={t:J1,ready:!1},ex=()=>()=>{},to=(e,t={})=>{const{i18n:r}=t,{i18n:n,defaultNS:o}=C.useContext(q1)||{},l=r||n||K1();l&&!l.reportNamespaces&&(l.reportNamespaces=new Q1),l||N_(l,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const c=C.useMemo(()=>({...W1(),...l?.options?.react,...t}),[l,t]),{useSuspense:h,keyPrefix:p}=c,d=o||l?.options?.defaultNS,v=Ki(d)?[d]:d||["translation"],_=C.useMemo(()=>v,v);l?.reportNamespaces?.addUsedNamespaces?.(_);const y=C.useRef(0),b=C.useCallback(ie=>{if(!l)return ex;const{bindI18n:I,bindI18nStore:K}=c,X=()=>{y.current+=1,ie()};return I&&l.on(I,X),K&&l.store.on(K,X),()=>{I&&I.split(" ").forEach(z=>l.off(z,X)),K&&K.split(" ").forEach(z=>l.store.off(z,X))}},[l,c]),w=C.useRef(),x=C.useCallback(()=>{if(!l)return Z1;const ie=!!(l.isInitialized||l.initializedStoreOnce)&&_.every(W=>B1(W,l,c)),I=t.lng||l.language,K=y.current,X=w.current;if(X&&X.ready===ie&&X.lng===I&&X.keyPrefix===p&&X.revision===K)return X;const V={t:l.getFixedT(I,c.nsMode==="fallback"?_:_[0],p),ready:ie,lng:I,keyPrefix:p,revision:K};return w.current=V,V},[l,_,p,c,t.lng]),[k,D]=C.useState(0),{t:j,ready:$}=X1.useSyncExternalStore(b,x,x);C.useEffect(()=>{if(l&&!$&&!h){const ie=()=>D(I=>I+1);t.lng?$m(l,t.lng,_,ie):Wu(l,_,ie)}},[l,t.lng,_,$,h,k]);const F=l||{},H=C.useRef(null),J=C.useRef(),Z=ie=>{const I=Object.getOwnPropertyDescriptors(ie);I.__original&&delete I.__original;const K=Object.create(Object.getPrototypeOf(ie),I);if(!Object.prototype.hasOwnProperty.call(K,"__original"))try{Object.defineProperty(K,"__original",{value:ie,writable:!1,enumerable:!1,configurable:!1})}catch{}return K},le=C.useMemo(()=>{const ie=F,I=ie?.language;let K=ie;ie&&(H.current&&H.current.__original===ie?J.current!==I?(K=Z(ie),H.current=K,J.current=I):K=H.current:(K=Z(ie),H.current=K,J.current=I));const X=[j,K,$];return X.t=j,X.i18n=K,X.ready=$,X},[j,F,$,F.resolvedLanguage,F.language,F.languages]);if(l&&h&&!$)throw new Promise(ie=>{const I=()=>ie();t.lng?$m(l,t.lng,_,I):Wu(l,_,I)});return le};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),M_=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=C.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:o="",children:l,iconNode:c,...h},p)=>C.createElement("svg",{ref:p,...rx,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:M_("lucide",o),...h},[...c.map(([d,v])=>C.createElement(d,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=(e,t)=>{const r=C.forwardRef(({className:n,...o},l)=>C.createElement(ix,{ref:l,iconNode:t,className:M_(`lucide-${tx(e)}`,n),...o}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=ke("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=ke("AppWindow",[["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}],["path",{d:"M10 4v4",key:"pp8u80"}],["path",{d:"M2 8h20",key:"d11cs7"}],["path",{d:"M6 4v4",key:"1svtjw"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=ke("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=ke("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=ke("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=ke("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=ke("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=ke("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=ke("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=ke("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=ke("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=ke("Columns2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=ke("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=ke("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=ke("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=ke("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=ke("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=ke("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=ke("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=ke("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=ke("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=ke("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=ke("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=ke("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=ke("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=ke("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=ke("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=ke("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=ke("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=ke("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=ke("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=ke("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=ke("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=ke("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=ke("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=ke("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=ke("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=ke("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_=ke("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=ke("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=ke("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Te="";async function A_(){const e=await fetch(`${Te}/api/runs`);if(!e.ok)throw new Error("Failed to fetch runs");return e.json()}async function Ku(e){const t=await fetch(`${Te}/api/runs/${e}`);if(!t.ok)throw new Error("Failed to fetch run");return t.json()}async function F_(e,t){const r=typeof e=="string"?{goal:e,repoPath:t}:e,n=await fetch(`${Te}/api/runs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({goal:r.goal,repo_path:r.repoPath,project_id:r.projectId,mode:r.mode||"implementation"})});if(!n.ok)throw new Error("Failed to create run");return n.json()}async function z_(){const e=await fetch(`${Te}/api/projects`);if(!e.ok)throw new Error("Failed to fetch projects");return e.json()}async function xx(e){const t=await fetch(`${Te}/api/projects/${e}`);if(!t.ok)throw new Error("Failed to fetch project");return t.json()}async function bx(e){const t=await fetch(`${Te}/api/projects`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create project");return t.json()}async function Cx(e){if(!(await fetch(`${Te}/api/projects/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete project")}async function Da(e,t){const r=new URL(`${Te}/api/logs/${e}`,window.location.origin),n=await fetch(r.toString());if(!n.ok)throw new Error("Failed to fetch logs");return n.json()}async function kx(){const e=await fetch(`${Te}/api/sessions/orphaned`);if(!e.ok)throw new Error("Failed to fetch orphaned sessions");return e.json()}async function Ex(e){if(!(await fetch(`${Te}/api/sessions/orphaned/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete orphaned session")}async function Px(){const e=await fetch(`${Te}/api/sessions/parallel`);if(!e.ok)throw new Error("Failed to fetch parallel sessions");return e.json()}async function Rx(e){if(!(await fetch(`${Te}/api/sessions/parallel`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessions:e})})).ok)throw new Error("Failed to save parallel sessions")}async function $_(){const e=await fetch(`${Te}/health`);if(!e.ok)throw new Error("Failed to fetch health");return e.json()}function Nx(e,t,r){const n=new URL(`${Te}/api/events`,window.location.origin);e&&n.searchParams.set("run_id",e);const o=new EventSource(n.toString());let l=!1;return o.onmessage=c=>{if(!l)try{const h=JSON.parse(c.data);h.type!=="connected"&&t(h)}catch(h){console.error("Failed to parse SSE message:",h)}},o.onerror=c=>{console.error("SSE error:",c),l||(l=!0,o.close())},()=>{l||(l=!0,o.close())}}async function H_(){const e=await fetch(`${Te}/api/settings`);if(!e.ok)throw new Error("Failed to fetch settings");return e.json()}async function W_(e){const t=await fetch(`${Te}/api/settings`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update settings");return t.json()}async function U_(){const e=await fetch(`${Te}/api/copilot/status`);if(!e.ok)throw new Error("Failed to fetch copilot status");return e.json()}async function Lx(){const e=await fetch(`${Te}/api/copilot/models`);if(!e.ok)throw new Error("Failed to fetch copilot models");return e.json()}async function Dx(e,t,r=!1){const n=await fetch(`${Te}/api/files/list`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,cwd:t,recursive:r})});if(!n.ok)throw new Error("Failed to list files");return n.json()}async function Mx(e,t){const r=await fetch(`${Te}/api/files/read`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,cwd:t})});if(!r.ok)throw new Error("Failed to read file");return r.json()}async function Um(e,t,r){const n=await fetch(`${Te}/api/files/write`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,content:t,cwd:r})});if(!n.ok)throw new Error("Failed to write file");return n.json()}async function Ox(e,t){const r=await fetch(`${Te}/api/files/mkdir`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,cwd:t})});if(!r.ok)throw new Error("Failed to create directory");return r.json()}async function jx(e,t){const r=await fetch(`${Te}/api/files/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,cwd:t})});if(!r.ok)throw new Error("Failed to delete file");return r.json()}async function Tx(){const e=await fetch(`${Te}/api/desktop/applications`);if(!e.ok)throw new Error("Failed to fetch applications");return e.json()}async function Bx(e){const t=await fetch(`${Te}/api/desktop/applications/${e}/focus`,{method:"POST"});if(!t.ok)throw new Error("Failed to focus application");return t.json()}async function Ix(e,t){const r=await fetch(`${Te}/api/runs/${e}/message`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t})});if(!r.ok){const n=await r.json().catch(()=>({error:{message:"Unknown error"}}));throw new Error(n.error?.message||"Failed to send message")}return r.json()}async function K_(e){const t=await fetch(`${Te}/api/runs/${e}/conversation`);if(t.status===404)return null;if(!t.ok)throw new Error("Failed to fetch conversation");return t.json()}function V_(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=V_(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Pe(){for(var e,t,r=0,n="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=V_(e))&&(n&&(n+=" "),n+=t);return n}const Km=[{path:"/projects",labelKey:"nav.projects",icon:Uh},{path:"/agents",labelKey:"nav.agents",icon:Ka},{path:"/shell",labelKey:"nav.shell",icon:Qn},{path:"/settings",labelKey:"nav.settings",icon:yx}];function Ax({children:e}){const{t}=to(),r=qr(),{data:n}=Mt({queryKey:["health"],queryFn:$_,refetchInterval:3e4});return g.jsxs("div",{className:"min-h-screen bg-slate-50",children:[g.jsxs("aside",{className:"hidden lg:block fixed top-0 left-0 h-full w-64 bg-white border-r border-slate-200 z-40",children:[g.jsxs("div",{className:"h-14 flex items-center px-4 border-b border-slate-200",children:[g.jsx(sx,{className:"text-primary-600",size:24}),g.jsx("h1",{className:"ml-2 font-bold text-slate-800",children:"Tako Agent"})]}),g.jsx("nav",{className:"p-4 space-y-1",children:Km.map(({path:o,labelKey:l,icon:c})=>g.jsxs(Kn,{to:o,className:Pe("flex items-center gap-3 px-3 py-2 rounded-lg transition-colors",r.pathname.startsWith(o)?"bg-primary-50 text-primary-700":"text-slate-600 hover:bg-slate-100"),children:[g.jsx(c,{size:18}),g.jsx("span",{children:t(l)})]},o))}),g.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-slate-200",children:g.jsxs("div",{className:"text-xs text-slate-500 space-y-1",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:Pe("w-2 h-2 rounded-full",n?.status==="ok"?"bg-green-500":"bg-red-500")}),g.jsxs("span",{children:["Backend: ",n?.status??"disconnected"]})]}),g.jsxs("div",{className:"text-slate-400",children:["v",n?.version??"?"]})]})})]}),g.jsx("main",{className:"lg:ml-64 pb-16 lg:pb-0 min-h-screen",children:e}),g.jsx("nav",{className:"lg:hidden fixed bottom-0 left-0 right-0 h-14 bg-white border-t border-slate-200 z-50 flex items-center justify-around px-4 safe-area-pb",children:Km.map(({path:o,icon:l})=>{const c=r.pathname.startsWith(o);return g.jsx(Kn,{to:o,className:Pe("flex items-center justify-center p-3 rounded-full transition-colors",c?"text-primary-600 bg-primary-50":"text-slate-400 active:bg-slate-100"),children:g.jsx(l,{size:24,strokeWidth:c?2.5:2})},o)})})]})}const Fx="modulepreload",zx=function(e){return"/"+e},Vm={},$x=function(t,r,n){let o=Promise.resolve();if(r&&r.length>0){let c=function(d){return Promise.all(d.map(v=>Promise.resolve(v).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),p=h?.nonce||h?.getAttribute("nonce");o=c(r.map(d=>{if(d=zx(d),d in Vm)return;Vm[d]=!0;const v=d.endsWith(".css"),_=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${_}`))return;const y=document.createElement("link");if(y.rel=v?"stylesheet":Fx,v||(y.as="script"),y.crossOrigin="",y.href=d,p&&y.setAttribute("nonce",p),document.head.appendChild(y),v)return new Promise((b,w)=>{y.addEventListener("load",b),y.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${d}`)))})}))}function l(c){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c}return o.then(c=>{for(const h of c||[])h.status==="rejected"&&l(h.reason);return t().catch(l)})},Yh=typeof window<"u"&&"__TAURI__"in window;let mu=null;async function Hx(){if(Yh&&!mu)try{mu=await $x(()=>import("./index-ZqTJLjwd.js"),[])}catch{console.warn("Failed to load Tauri dialog plugin")}return mu}async function Wx(){if(!Yh)return null;const e=await Hx();if(!e)return null;try{return await e.open({directory:!0,multiple:!1,title:"Select Project Folder"})}catch(t){return console.error("Failed to open folder dialog:",t),null}}function Ux({project:e,onDelete:t}){const{t:r}=to();return g.jsx(Kn,{to:`/projects/${e.project_id}`,className:"block bg-white rounded-xl border border-slate-200 p-4 sm:p-5 hover:shadow-lg hover:border-primary-300 active:bg-slate-50 transition-all group",children:g.jsxs("div",{className:"flex items-start justify-between gap-2 sm:gap-3",children:[g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.jsx(Uh,{size:20,className:"text-primary-500 flex-shrink-0"}),g.jsx("h3",{className:"font-semibold text-slate-800 truncate text-base sm:text-lg",children:e.name})]}),e.description&&g.jsx("p",{className:"text-sm text-slate-500 line-clamp-2 mb-3",children:e.description}),g.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4 text-xs text-slate-400",children:[g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx(hx,{size:12}),g.jsx("span",{className:"truncate max-w-[150px] sm:max-w-[200px]",title:e.repo_path,children:e.repo_path.split(/[/\\]/).pop()})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx(ax,{size:12}),g.jsx("span",{children:new Date(e.created_at).toLocaleDateString()})]})]})]}),g.jsx("button",{onClick:n=>{n.preventDefault(),n.stopPropagation(),t()},className:"p-2.5 sm:p-2 text-slate-400 sm:text-slate-300 hover:text-red-500 hover:bg-red-50 active:bg-red-100 rounded-lg transition-colors sm:opacity-0 sm:group-hover:opacity-100",title:r("common.delete"),children:g.jsx(qh,{size:18,className:"sm:w-4 sm:h-4"})})]})})}function Kx(){const{t:e}=to(),t=Qi(),[r,n]=C.useState(!1),[o,l]=C.useState(""),[c,h]=C.useState(""),[p,d]=C.useState(""),{data:v,isLoading:_,error:y}=Mt({queryKey:["projects"],queryFn:z_,refetchInterval:1e4}),b=Ur({mutationFn:({name:k,description:D,repo_path:j})=>bx({name:k,description:D,repo_path:j}),onSuccess:()=>{t.invalidateQueries({queryKey:["projects"]}),n(!1),l(""),h(""),d("")}}),w=Ur({mutationFn:Cx,onSuccess:()=>{t.invalidateQueries({queryKey:["projects"]})}}),x=async()=>{const k=await Wx();if(k&&(d(k),!o)){const D=k.split(/[/\\]/).pop()||"";l(D)}};return g.jsxs("div",{className:"mx-auto max-w-4xl px-4 sm:px-6 py-4 sm:py-6",children:[g.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6 sm:mb-8",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-slate-800",children:e("projects.title")}),g.jsx("p",{className:"text-slate-500 mt-1 text-sm sm:text-base",children:e("projects.subtitle")})]}),g.jsxs("button",{onClick:()=>n(!0),className:"flex items-center justify-center gap-2 px-4 py-3 sm:py-2.5 bg-primary-600 text-white rounded-xl hover:bg-primary-700 active:bg-primary-800 transition-colors shadow-sm w-full sm:w-auto",children:[g.jsx(Rs,{size:18}),e("projects.newProject")]})]}),r&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-end sm:items-center justify-center z-50 p-0 sm:p-4",children:g.jsxs("div",{className:"bg-white rounded-t-2xl sm:rounded-2xl shadow-xl w-full sm:max-w-md p-5 sm:p-6 max-h-[90vh] overflow-y-auto",children:[g.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-4",children:e("projects.newProject")}),g.jsxs("form",{onSubmit:k=>{k.preventDefault(),o.trim()&&p.trim()&&b.mutate({name:o.trim(),description:c.trim()||void 0,repo_path:p.trim()})},children:[g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:e("projects.name")}),g.jsx("input",{type:"text",value:o,onChange:k=>l(k.target.value),placeholder:e("projects.namePlaceholder"),className:"w-full px-4 py-3 text-base border border-slate-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500",autoFocus:!0,required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:e("projects.description")}),g.jsx("textarea",{value:c,onChange:k=>h(k.target.value),placeholder:e("projects.descriptionPlaceholder"),className:"w-full px-4 py-3 text-base border border-slate-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 resize-none",rows:2})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[g.jsx(Ns,{size:14,className:"inline mr-1.5"}),e("projects.repoPath")]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"text",value:p,onChange:k=>d(k.target.value),placeholder:e("projects.repoPathPlaceholder"),className:"flex-1 px-4 py-3 text-base border border-slate-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0}),Yh&&g.jsx("button",{type:"button",onClick:x,className:"px-4 py-3 bg-slate-100 text-slate-700 rounded-xl hover:bg-slate-200 active:bg-slate-300 transition-colors",title:e("projects.browse"),children:g.jsx(Ns,{size:18})})]})]})]}),g.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-3 mt-6",children:[g.jsx("button",{type:"button",onClick:()=>{n(!1),l(""),h(""),d("")},className:"px-4 py-3 sm:py-2.5 text-slate-600 hover:bg-slate-100 active:bg-slate-200 rounded-xl transition-colors",children:e("common.cancel")}),g.jsxs("button",{type:"submit",disabled:b.isPending||!o.trim()||!p.trim(),className:"flex items-center justify-center gap-2 px-5 py-3 sm:py-2.5 bg-primary-600 text-white rounded-xl hover:bg-primary-700 active:bg-primary-800 disabled:opacity-50 transition-colors",children:[b.isPending&&g.jsx(Wt,{size:18,className:"animate-spin"}),e("common.create")]})]})]})]})}),_?g.jsx("div",{className:"flex items-center justify-center py-16",children:g.jsx(Wt,{size:32,className:"animate-spin text-primary-600"})}):y?g.jsxs("div",{className:"text-center py-16 text-red-600",children:[e("common.error"),": ",y.message]}):v?.projects.length===0?g.jsxs("div",{className:"text-center py-16",children:[g.jsx(Uh,{size:48,className:"mx-auto text-slate-300 mb-4"}),g.jsx("p",{className:"text-slate-500 mb-2",children:e("projects.noProjects")}),g.jsx("p",{className:"text-sm text-slate-400",children:e("projects.createFirst")})]}):g.jsx("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2",children:v?.projects.map(k=>g.jsx(Ux,{project:k,onDelete:()=>w.mutate(k.project_id)},k.project_id))})]})}function qm(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Vx(e){if(Array.isArray(e))return e}function qx(e,t,r){return(t=eb(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qx(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,l,c,h=[],p=!0,d=!1;try{if(l=(r=r.call(e)).next,t!==0)for(;!(p=(n=l.call(r)).done)&&(h.push(n.value),h.length!==t);p=!0);}catch(v){d=!0,o=v}finally{try{if(!p&&r.return!=null&&(c=r.return(),Object(c)!==c))return}finally{if(d)throw o}}return h}}function Yx(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Ym(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qm(Object(r),!0).forEach(function(n){qx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gx(e,t){if(e==null)return{};var r,n,o=Xx(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Xx(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Jx(e,t){return Vx(e)||Qx(e,t)||tb(e,t)||Yx()}function Zx(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eb(e){var t=Zx(e,"string");return typeof t=="symbol"?t:t+""}function tb(e,t){if(e){if(typeof e=="string")return qm(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qm(e,t):void 0}}function rb(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Xm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gm(Object(r),!0).forEach(function(n){rb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ib(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return t.reduceRight(function(o,l){return l(o)},n)}}function Mn(e){return function t(){for(var r=this,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return o.length>=e.length?e.apply(this,o):function(){for(var c=arguments.length,h=new Array(c),p=0;p<c;p++)h[p]=arguments[p];return t.apply(r,[].concat(o,h))}}}function Va(e){return{}.toString.call(e).includes("Object")}function sb(e){return!Object.keys(e).length}function Yn(e){return typeof e=="function"}function nb(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ob(e,t){return Va(t)||wi("changeType"),Object.keys(t).some(function(r){return!nb(e,r)})&&wi("changeField"),t}function ab(e){Yn(e)||wi("selectorType")}function lb(e){Yn(e)||Va(e)||wi("handlerType"),Va(e)&&Object.values(e).some(function(t){return!Yn(t)})&&wi("handlersType")}function cb(e){e||wi("initialIsRequired"),Va(e)||wi("initialType"),sb(e)&&wi("initialContent")}function ub(e,t){throw new Error(e[t]||e.default)}var hb={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},wi=Mn(ub)(hb),Sa={changes:ob,selector:ab,handler:lb,initial:cb};function db(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Sa.initial(e),Sa.handler(t);var r={current:e},n=Mn(mb)(r,t),o=Mn(pb)(r),l=Mn(Sa.changes)(e),c=Mn(fb)(r);function h(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(v){return v};return Sa.selector(d),d(r.current)}function p(d){ib(n,o,l,c)(d)}return[h,p]}function fb(e,t){return Yn(t)?t(e.current):t}function pb(e,t){return e.current=Xm(Xm({},e.current),t),t}function mb(e,t,r){return Yn(t)?t(e.current):Object.keys(r).forEach(function(n){var o;return(o=t[n])===null||o===void 0?void 0:o.call(t,e.current[n])}),r}var gb={create:db},_b={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function vb(e){return function t(){for(var r=this,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return o.length>=e.length?e.apply(this,o):function(){for(var c=arguments.length,h=new Array(c),p=0;p<c;p++)h[p]=arguments[p];return t.apply(r,[].concat(o,h))}}}function yb(e){return{}.toString.call(e).includes("Object")}function Sb(e){return e||Jm("configIsRequired"),yb(e)||Jm("configType"),e.urls?(wb(),{paths:{vs:e.urls.monacoBase}}):e}function wb(){console.warn(q_.deprecation)}function xb(e,t){throw new Error(e[t]||e.default)}var q_={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Jm=vb(xb)(q_),bb={config:Sb},Cb=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(o){return r.reduceRight(function(l,c){return c(l)},o)}};function Q_(e,t){return Object.keys(t).forEach(function(r){t[r]instanceof Object&&e[r]&&Object.assign(t[r],Q_(e[r],t[r]))}),Ym(Ym({},e),t)}var kb={type:"cancelation",msg:"operation is manually canceled"};function gu(e){var t=!1,r=new Promise(function(n,o){e.then(function(l){return t?o(kb):n(l)}),e.catch(o)});return r.cancel=function(){return t=!0},r}var Eb=["monaco"],Pb=gb.create({config:_b,isInitialized:!1,resolve:null,reject:null,monaco:null}),Y_=Jx(Pb,2),ro=Y_[0],il=Y_[1];function Rb(e){var t=bb.config(e),r=t.monaco,n=Gx(t,Eb);il(function(o){return{config:Q_(o.config,n),monaco:r}})}function Nb(){var e=ro(function(t){var r=t.monaco,n=t.isInitialized,o=t.resolve;return{monaco:r,isInitialized:n,resolve:o}});if(!e.isInitialized){if(il({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),gu(_u);if(window.monaco&&window.monaco.editor)return G_(window.monaco),e.resolve(window.monaco),gu(_u);Cb(Lb,Mb)(Ob)}return gu(_u)}function Lb(e){return document.body.appendChild(e)}function Db(e){var t=document.createElement("script");return e&&(t.src=e),t}function Mb(e){var t=ro(function(n){var o=n.config,l=n.reject;return{config:o,reject:l}}),r=Db("".concat(t.config.paths.vs,"/loader.js"));return r.onload=function(){return e()},r.onerror=t.reject,r}function Ob(){var e=ro(function(r){var n=r.config,o=r.resolve,l=r.reject;return{config:n,resolve:o,reject:l}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(r){var n=r.m||r;G_(n),e.resolve(n)},function(r){e.reject(r)})}function G_(e){ro().monaco||il({monaco:e})}function jb(){return ro(function(e){var t=e.monaco;return t})}var _u=new Promise(function(e,t){return il({resolve:e,reject:t})}),X_={config:Rb,init:Nb,__getMonacoInstance:jb},Tb={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},vu=Tb,Bb={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Ib=Bb;function Ab({children:e}){return $i.createElement("div",{style:Ib.container},e)}var Fb=Ab,zb=Fb;function $b({width:e,height:t,isEditorReady:r,loading:n,_ref:o,className:l,wrapperProps:c}){return $i.createElement("section",{style:{...vu.wrapper,width:e,height:t},...c},!r&&$i.createElement(zb,null,n),$i.createElement("div",{ref:o,style:{...vu.fullWidth,...!r&&vu.hide},className:l}))}var Hb=$b,J_=C.memo(Hb);function Wb(e){C.useEffect(e,[])}var Z_=Wb;function Ub(e,t,r=!0){let n=C.useRef(!0);C.useEffect(n.current||!r?()=>{n.current=!1}:e,t)}var Xt=Ub;function $n(){}function Es(e,t,r,n){return Kb(e,n)||Vb(e,t,r,n)}function Kb(e,t){return e.editor.getModel(ev(e,t))}function Vb(e,t,r,n){return e.editor.createModel(t,r,n?ev(e,n):void 0)}function ev(e,t){return e.Uri.parse(t)}function qb({original:e,modified:t,language:r,originalLanguage:n,modifiedLanguage:o,originalModelPath:l,modifiedModelPath:c,keepCurrentOriginalModel:h=!1,keepCurrentModifiedModel:p=!1,theme:d="light",loading:v="Loading...",options:_={},height:y="100%",width:b="100%",className:w,wrapperProps:x={},beforeMount:k=$n,onMount:D=$n}){let[j,$]=C.useState(!1),[F,H]=C.useState(!0),J=C.useRef(null),Z=C.useRef(null),le=C.useRef(null),ie=C.useRef(D),I=C.useRef(k),K=C.useRef(!1);Z_(()=>{let W=X_.init();return W.then(M=>(Z.current=M)&&H(!1)).catch(M=>M?.type!=="cancelation"&&console.error("Monaco initialization: error:",M)),()=>J.current?V():W.cancel()}),Xt(()=>{if(J.current&&Z.current){let W=J.current.getOriginalEditor(),M=Es(Z.current,e||"",n||r||"text",l||"");M!==W.getModel()&&W.setModel(M)}},[l],j),Xt(()=>{if(J.current&&Z.current){let W=J.current.getModifiedEditor(),M=Es(Z.current,t||"",o||r||"text",c||"");M!==W.getModel()&&W.setModel(M)}},[c],j),Xt(()=>{let W=J.current.getModifiedEditor();W.getOption(Z.current.editor.EditorOption.readOnly)?W.setValue(t||""):t!==W.getValue()&&(W.executeEdits("",[{range:W.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),W.pushUndoStop())},[t],j),Xt(()=>{J.current?.getModel()?.original.setValue(e||"")},[e],j),Xt(()=>{let{original:W,modified:M}=J.current.getModel();Z.current.editor.setModelLanguage(W,n||r||"text"),Z.current.editor.setModelLanguage(M,o||r||"text")},[r,n,o],j),Xt(()=>{Z.current?.editor.setTheme(d)},[d],j),Xt(()=>{J.current?.updateOptions(_)},[_],j);let X=C.useCallback(()=>{if(!Z.current)return;I.current(Z.current);let W=Es(Z.current,e||"",n||r||"text",l||""),M=Es(Z.current,t||"",o||r||"text",c||"");J.current?.setModel({original:W,modified:M})},[r,t,o,e,n,l,c]),z=C.useCallback(()=>{!K.current&&le.current&&(J.current=Z.current.editor.createDiffEditor(le.current,{automaticLayout:!0,..._}),X(),Z.current?.editor.setTheme(d),$(!0),K.current=!0)},[_,d,X]);C.useEffect(()=>{j&&ie.current(J.current,Z.current)},[j]),C.useEffect(()=>{!F&&!j&&z()},[F,j,z]);function V(){let W=J.current?.getModel();h||W?.original?.dispose(),p||W?.modified?.dispose(),J.current?.dispose()}return $i.createElement(J_,{width:b,height:y,isEditorReady:j,loading:v,_ref:le,className:w,wrapperProps:x})}var Qb=qb;C.memo(Qb);function Yb(e){let t=C.useRef();return C.useEffect(()=>{t.current=e},[e]),t.current}var Gb=Yb,wa=new Map;function Xb({defaultValue:e,defaultLanguage:t,defaultPath:r,value:n,language:o,path:l,theme:c="light",line:h,loading:p="Loading...",options:d={},overrideServices:v={},saveViewState:_=!0,keepCurrentModel:y=!1,width:b="100%",height:w="100%",className:x,wrapperProps:k={},beforeMount:D=$n,onMount:j=$n,onChange:$,onValidate:F=$n}){let[H,J]=C.useState(!1),[Z,le]=C.useState(!0),ie=C.useRef(null),I=C.useRef(null),K=C.useRef(null),X=C.useRef(j),z=C.useRef(D),V=C.useRef(),W=C.useRef(n),M=Gb(l),U=C.useRef(!1),L=C.useRef(!1);Z_(()=>{let P=X_.init();return P.then(B=>(ie.current=B)&&le(!1)).catch(B=>B?.type!=="cancelation"&&console.error("Monaco initialization: error:",B)),()=>I.current?q():P.cancel()}),Xt(()=>{let P=Es(ie.current,e||n||"",t||o||"",l||r||"");P!==I.current?.getModel()&&(_&&wa.set(M,I.current?.saveViewState()),I.current?.setModel(P),_&&I.current?.restoreViewState(wa.get(l)))},[l],H),Xt(()=>{I.current?.updateOptions(d)},[d],H),Xt(()=>{!I.current||n===void 0||(I.current.getOption(ie.current.editor.EditorOption.readOnly)?I.current.setValue(n):n!==I.current.getValue()&&(L.current=!0,I.current.executeEdits("",[{range:I.current.getModel().getFullModelRange(),text:n,forceMoveMarkers:!0}]),I.current.pushUndoStop(),L.current=!1))},[n],H),Xt(()=>{let P=I.current?.getModel();P&&o&&ie.current?.editor.setModelLanguage(P,o)},[o],H),Xt(()=>{h!==void 0&&I.current?.revealLine(h)},[h],H),Xt(()=>{ie.current?.editor.setTheme(c)},[c],H);let G=C.useCallback(()=>{if(!(!K.current||!ie.current)&&!U.current){z.current(ie.current);let P=l||r,B=Es(ie.current,n||e||"",t||o||"",P||"");I.current=ie.current?.editor.create(K.current,{model:B,automaticLayout:!0,...d},v),_&&I.current.restoreViewState(wa.get(P)),ie.current.editor.setTheme(c),h!==void 0&&I.current.revealLine(h),J(!0),U.current=!0}},[e,t,r,n,o,l,d,v,_,c,h]);C.useEffect(()=>{H&&X.current(I.current,ie.current)},[H]),C.useEffect(()=>{!Z&&!H&&G()},[Z,H,G]),W.current=n,C.useEffect(()=>{H&&$&&(V.current?.dispose(),V.current=I.current?.onDidChangeModelContent(P=>{L.current||$(I.current.getValue(),P)}))},[H,$]),C.useEffect(()=>{if(H){let P=ie.current.editor.onDidChangeMarkers(B=>{let Y=I.current.getModel()?.uri;if(Y&&B.find(ae=>ae.path===Y.path)){let ae=ie.current.editor.getModelMarkers({resource:Y});F?.(ae)}});return()=>{P?.dispose()}}return()=>{}},[H,F]);function q(){V.current?.dispose(),y?_&&wa.set(l,I.current.saveViewState()):I.current.getModel()?.dispose(),I.current.dispose()}return $i.createElement(J_,{width:b,height:w,isEditorReady:H,loading:p,_ref:K,className:x,wrapperProps:k})}var Jb=Xb,Zb=C.memo(Jb),eC=Zb;function tC(e){const t=e.split(".").pop()?.toLowerCase()||"";return{ts:"typescript",tsx:"typescript",js:"javascript",jsx:"javascript",json:"json",md:"markdown",html:"html",css:"css",scss:"scss",less:"less",py:"python",rb:"ruby",go:"go",rs:"rust",java:"java",c:"c",cpp:"cpp",h:"c",hpp:"cpp",sh:"shell",bash:"shell",zsh:"shell",yml:"yaml",yaml:"yaml",xml:"xml",sql:"sql",graphql:"graphql",vue:"vue",svelte:"svelte",dockerfile:"dockerfile",makefile:"makefile",gitignore:"plaintext",env:"plaintext"}[t]||"plaintext"}function tv(e){if(e.isDirectory)return g.jsx(zn,{size:14,className:"text-amber-500 shrink-0"});const t=e.name.split(".").pop()?.toLowerCase()||"",r={ts:"text-blue-500",tsx:"text-blue-500",js:"text-yellow-500",jsx:"text-yellow-500",json:"text-yellow-600",md:"text-slate-500",html:"text-orange-500",css:"text-blue-400",py:"text-green-500",go:"text-cyan-500",rs:"text-orange-600"};return g.jsx(T_,{size:14,className:Pe("shrink-0",r[t]||"text-slate-400")})}function rv({nodes:e,onSelect:t,onToggle:r,selectedPath:n,onRefresh:o,onNewFile:l,onNewFolder:c,onDelete:h,level:p=0}){return g.jsx("div",{className:"text-sm",children:e.map(d=>g.jsxs("div",{children:[g.jsxs("div",{className:Pe("flex items-center gap-1 px-2 py-1 cursor-pointer hover:bg-slate-100 group",n===d.entry.path&&"bg-primary-50 text-primary-700"),style:{paddingLeft:`${p*12+8}px`},onClick:()=>{d.entry.isDirectory?r(d.entry):t(d.entry)},children:[d.entry.isDirectory&&g.jsx("span",{className:"w-4 h-4 flex items-center justify-center shrink-0",children:d.isLoading?g.jsx(Wt,{size:12,className:"animate-spin text-slate-400"}):d.isExpanded?g.jsx(cr,{size:12,className:"text-slate-400"}):g.jsx(Wh,{size:12,className:"text-slate-400"})}),!d.entry.isDirectory&&g.jsx("span",{className:"w-4 shrink-0"}),tv(d.entry),g.jsx("span",{className:"truncate flex-1 text-slate-700",children:d.entry.name}),g.jsxs("div",{className:"hidden group-hover:flex items-center gap-0.5 shrink-0",children:[d.entry.isDirectory&&g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:v=>{v.stopPropagation(),l(d.entry.path)},className:"p-0.5 hover:bg-slate-200 rounded text-slate-500",title:"New File",children:g.jsx(B_,{size:12})}),g.jsx("button",{onClick:v=>{v.stopPropagation(),c(d.entry.path)},className:"p-0.5 hover:bg-slate-200 rounded text-slate-500",title:"New Folder",children:g.jsx(zn,{size:12})}),g.jsx("button",{onClick:v=>{v.stopPropagation(),o(d.entry.path)},className:"p-0.5 hover:bg-slate-200 rounded text-slate-500",title:"Refresh",children:g.jsx(qn,{size:12})})]}),g.jsx("button",{onClick:v=>{v.stopPropagation(),h(d.entry)},className:"p-0.5 hover:bg-red-100 text-red-500 rounded",title:"Delete",children:g.jsx(qh,{size:12})})]})]}),d.entry.isDirectory&&d.isExpanded&&d.children&&g.jsx(rv,{nodes:d.children,onSelect:t,onToggle:r,selectedPath:n,onRefresh:o,onNewFile:l,onNewFolder:c,onDelete:h,level:p+1})]},d.entry.path))})}function rC({files:e,activeFile:t,onSelect:r,onClose:n}){return g.jsx("div",{className:"flex bg-slate-100 border-b border-slate-200 overflow-x-auto",children:e.map(o=>g.jsxs("div",{className:Pe("flex items-center gap-2 px-3 py-2 cursor-pointer min-w-0 max-w-[200px] group border-b-2",t===o.path?"bg-white text-slate-800 border-b-primary-500":"bg-slate-50 text-slate-500 hover:bg-slate-100 border-b-transparent"),onClick:()=>r(o.path),children:[tv({name:o.name,isDirectory:!1}),g.jsx("span",{className:"truncate text-sm",children:o.name}),o.isDirty&&g.jsx("span",{className:"w-2 h-2 rounded-full bg-primary-500 shrink-0",title:"Unsaved changes"}),g.jsx("button",{onClick:l=>{l.stopPropagation(),n(o.path)},className:"p-0.5 hover:bg-slate-200 rounded opacity-0 group-hover:opacity-100 transition-opacity shrink-0",children:g.jsx(Qh,{size:12})})]},o.path))})}function iC(){const{projectId:e}=xw(),t=Ih(),[r,n]=C.useState([]),[o,l]=C.useState(null),[c,h]=C.useState([]),[p,d]=C.useState(null),[v]=C.useState(240),[_,y]=C.useState(null),[b,w]=C.useState(""),x=C.useRef(null),{data:k,isLoading:D,error:j}=Mt({queryKey:["project",e],queryFn:()=>xx(e),enabled:!!e}),$=C.useCallback(async(M,U)=>{try{return[...(await Dx(M,U)).entries].sort((q,P)=>q.isDirectory!==P.isDirectory?q.isDirectory?-1:1:q.name.localeCompare(P.name)).map(q=>({entry:q,isExpanded:!1,children:q.isDirectory?[]:void 0}))}catch(L){return console.error("Failed to load directory:",L),[]}},[]);C.useEffect(()=>{k?.repo_path&&$(".",k.repo_path).then(n)},[k?.repo_path,$]);const F=C.useCallback(async M=>{if(!k?.repo_path)return;n(G=>{const q=P=>P.map(B=>B.entry.path===M.path?B.isExpanded?{...B,isExpanded:!1}:B.children?.length?{...B,isExpanded:!0}:{...B,isLoading:!0}:B.children?{...B,children:q(B.children)}:B);return q(G)});const U=(G,q)=>{for(const P of G){if(P.entry.path===q)return P;if(P.children){const B=U(P.children,q);if(B)return B}}return null},L=U(r,M.path);if(!L?.isExpanded&&!L?.children?.length){const G=await $(M.path,k.repo_path);n(q=>{const P=B=>B.map(Y=>Y.entry.path===M.path?{...Y,isExpanded:!0,isLoading:!1,children:G}:Y.children?{...Y,children:P(Y.children)}:Y);return P(q)})}},[k?.repo_path,r,$]),H=C.useCallback(async M=>{if(!k?.repo_path||M.isDirectory)return;if(c.find(L=>L.path===M.path)){d(M.path),l(M.path);return}try{const L=await Mx(M.path,k.repo_path),G={path:M.path,name:M.name,content:L.content,originalContent:L.content,language:tC(M.path),isDirty:!1};h(q=>[...q,G]),d(M.path),l(M.path)}catch(L){console.error("Failed to open file:",L)}},[k?.repo_path,c]),J=C.useCallback(M=>{if(!(c.find(L=>L.path===M)?.isDirty&&!confirm("You have unsaved changes. Close anyway?"))&&(h(L=>L.filter(G=>G.path!==M)),p===M)){const L=c.filter(G=>G.path!==M);d(L.length>0?L[L.length-1].path:null)}},[c,p]),Z=C.useCallback(M=>{!p||M===void 0||h(U=>U.map(L=>L.path===p?{...L,content:M,isDirty:M!==L.originalContent}:L))},[p]),le=Ur({mutationFn:async({path:M,content:U})=>{if(!k?.repo_path)throw new Error("No repo path");return Um(M,U,k.repo_path)},onSuccess:(M,U)=>{h(L=>L.map(G=>G.path===U.path?{...G,originalContent:U.content,isDirty:!1}:G))}}),ie=C.useCallback(()=>{const M=c.find(U=>U.path===p);!M||!M.isDirty||le.mutate({path:M.path,content:M.content})},[c,p,le]);C.useEffect(()=>{const M=U=>{(U.ctrlKey||U.metaKey)&&U.key==="s"&&(U.preventDefault(),ie())};return window.addEventListener("keydown",M),()=>window.removeEventListener("keydown",M)},[ie]);const I=C.useCallback(async M=>{if(!k?.repo_path)return;const U=await $(M,k.repo_path);n(L=>{const G=q=>q.map(P=>P.entry.path===M?{...P,children:U,isExpanded:!0}:P.children?{...P,children:G(P.children)}:P);return M==="."?U:G(L)})},[k?.repo_path,$]),K=C.useCallback(async()=>{if(!_||!b.trim()||!k?.repo_path)return;const M=_.parentPath==="."?b:`${_.parentPath}/${b}`;try{_.type==="folder"?await Ox(M,k.repo_path):await Um(M,"",k.repo_path),await I(_.parentPath),y(null),w("")}catch(U){console.error("Failed to create item:",U)}},[_,b,k?.repo_path,I]),X=Ur({mutationFn:async M=>{if(!k?.repo_path)throw new Error("No repo path");return jx(M.path,k.repo_path)},onSuccess:(M,U)=>{c.some(G=>G.path===U.path)&&J(U.path);const L=U.path.includes("/")?U.path.substring(0,U.path.lastIndexOf("/")):".";I(L)}}),z=C.useCallback(M=>{confirm(`Delete "${M.name}"?`)&&X.mutate(M)},[X]);C.useEffect(()=>{_&&x.current&&x.current.focus()},[_]);const V=C.useCallback(()=>{c.some(U=>U.isDirty)&&!confirm("You have unsaved changes. Leave anyway?")||t("/projects")},[c,t]),W=c.find(M=>M.path===p);return D?g.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:g.jsx(Wt,{className:"animate-spin text-primary-600",size:32})}):j||!k?g.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-50",children:[g.jsx(j_,{className:"text-red-400 mb-4",size:48}),g.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Project not found"}),g.jsx("button",{onClick:()=>t("/projects"),className:"text-primary-600 hover:underline text-sm",children:"Go back"})]}):g.jsxs("div",{className:"h-screen flex flex-col bg-slate-50",children:[g.jsxs("header",{className:"h-14 bg-white border-b border-slate-200 flex items-center px-4 shrink-0",children:[g.jsxs("button",{onClick:V,className:"flex items-center gap-2 px-3 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:[g.jsx(Hh,{size:18}),g.jsx("span",{className:"text-sm font-medium",children:"Back"})]}),g.jsx("div",{className:"mx-4 h-6 w-px bg-slate-200"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("h1",{className:"text-sm font-semibold text-slate-800 truncate",children:k.name}),g.jsx("p",{className:"text-xs text-slate-400 font-mono truncate",children:k.repo_path})]}),W?.isDirty&&g.jsxs("button",{onClick:ie,disabled:le.isPending,className:"flex items-center gap-1.5 px-3 py-1.5 bg-primary-600 hover:bg-primary-700 text-white text-sm font-medium rounded-lg transition-colors disabled:opacity-50",children:[le.isPending?g.jsx(Wt,{size:14,className:"animate-spin"}):null,"Save"]})]}),g.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[g.jsxs("aside",{className:"bg-white border-r border-slate-200 flex flex-col shrink-0",style:{width:v},children:[g.jsxs("div",{className:"h-10 px-4 flex items-center justify-between text-xs font-semibold text-slate-500 uppercase tracking-wider border-b border-slate-100",children:[g.jsx("span",{children:"Explorer"}),g.jsxs("div",{className:"flex items-center gap-0.5",children:[g.jsx("button",{onClick:()=>y({type:"file",parentPath:"."}),className:"p-1 hover:bg-slate-100 rounded text-slate-500",title:"New File",children:g.jsx(Rs,{size:14})}),g.jsx("button",{onClick:()=>y({type:"folder",parentPath:"."}),className:"p-1 hover:bg-slate-100 rounded text-slate-500",title:"New Folder",children:g.jsx(zn,{size:14})}),g.jsx("button",{onClick:()=>I("."),className:"p-1 hover:bg-slate-100 rounded text-slate-500",title:"Refresh",children:g.jsx(qn,{size:14})})]})]}),g.jsxs("div",{className:"flex-1 overflow-y-auto",children:[_?.parentPath==="."&&g.jsxs("div",{className:"px-2 py-1 flex items-center gap-1",style:{paddingLeft:"8px"},children:[_.type==="folder"?g.jsx(zn,{size:14,className:"text-amber-500 shrink-0"}):g.jsx(T_,{size:14,className:"text-slate-400 shrink-0"}),g.jsx("input",{ref:x,type:"text",value:b,onChange:M=>w(M.target.value),onKeyDown:M=>{M.key==="Enter"&&K(),M.key==="Escape"&&(y(null),w(""))},onBlur:()=>{b.trim()?K():y(null)},className:"flex-1 bg-white border border-primary-500 rounded px-2 py-1 text-sm text-slate-700 outline-none focus:ring-1 focus:ring-primary-500",placeholder:_.type==="folder"?"folder name":"file name"})]}),g.jsx(rv,{nodes:r,onSelect:H,onToggle:F,selectedPath:o,onRefresh:I,onNewFile:M=>y({type:"file",parentPath:M}),onNewFolder:M=>y({type:"folder",parentPath:M}),onDelete:z}),r.length===0&&g.jsxs("div",{className:"text-center py-8 text-slate-400",children:[g.jsx(zn,{size:32,className:"mx-auto mb-2 opacity-50"}),g.jsx("p",{className:"text-xs",children:"No files found"})]})]})]}),g.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden bg-white",children:[c.length>0&&g.jsx(rC,{files:c,activeFile:p,onSelect:d,onClose:J}),g.jsx("div",{className:"flex-1 overflow-hidden",children:W?g.jsx(eC,{height:"100%",language:W.language,value:W.content,onChange:Z,theme:"vs",options:{fontSize:14,fontFamily:"'Cascadia Code', 'Fira Code', Consolas, 'Courier New', monospace",minimap:{enabled:!0},scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,wordWrap:"off",lineNumbers:"on",renderLineHighlight:"all",smoothScrolling:!0,cursorBlinking:"smooth",cursorSmoothCaretAnimation:"on",padding:{top:8,bottom:8}}}):g.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[g.jsx(B_,{size:64,className:"mb-4 opacity-30"}),g.jsx("p",{className:"text-sm",children:"Select a file to start editing"})]})})]})]}),g.jsxs("div",{className:"h-6 bg-primary-600 flex items-center px-4 text-white text-xs shrink-0",children:[g.jsx("span",{children:W?.language||"Plain Text"}),g.jsx("div",{className:"flex-1"}),W?.isDirty&&g.jsx("span",{className:"mr-4",children:"Modified"}),g.jsx("span",{className:"opacity-75",children:"Ctrl+S to save"})]})]})}function sC({name:e,className:t}){const r=t||"w-4 h-4",n=e.toLowerCase();return n.includes("read")||n.includes("glob")||n.includes("grep")?g.jsx(La,{className:r}):n.includes("write")||n.includes("edit")?g.jsx(gx,{className:r}):n.includes("bash")||n.includes("shell")?g.jsx(Qn,{className:r}):n.includes("search")?g.jsx(_x,{className:r}):g.jsx(wx,{className:r})}function nC({message:e}){return g.jsxs("div",{className:"flex gap-3 px-4 py-4",children:[g.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center shrink-0",children:g.jsx(I_,{size:16,className:"text-blue-600"})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"You"}),g.jsx("div",{className:"text-slate-800 whitespace-pre-wrap",children:e.content})]})]})}function oC({message:e}){const t=e.isThinking||e.type==="thinking",r=e.executor==="codex"?"text-green-600":"text-purple-600",n=e.executor==="codex"?"bg-green-100":"bg-purple-100",o=e.executor==="codex"?"Codex":"Claude";return g.jsxs("div",{className:"flex gap-3 px-4 py-4 bg-slate-50",children:[g.jsx("div",{className:Pe("w-8 h-8 rounded-full flex items-center justify-center shrink-0",n),children:t?g.jsx(ox,{size:16,className:r}):g.jsx(Ka,{size:16,className:r})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[g.jsx("span",{className:"text-xs text-slate-400",children:o}),t&&g.jsxs("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:[g.jsx(Wt,{size:10,className:"animate-spin"}),"Thinking..."]})]}),g.jsx("div",{className:Pe("whitespace-pre-wrap",t?"text-slate-500 italic":"text-slate-800"),children:e.content||(t?"Processing...":"")})]})]})}function aC({message:e}){const[t,r]=C.useState(!1),n=e.toolName||"Unknown Tool",o=e.toolInput?JSON.stringify(e.toolInput,null,2):"",l=e.toolInput?Object.entries(e.toolInput).slice(0,2).map(([c,h])=>`${c}: ${typeof h=="string"?h.slice(0,30):JSON.stringify(h).slice(0,30)}`).join(", "):"";return g.jsx("div",{className:"px-4 py-2 ml-11",children:g.jsxs("div",{className:"border border-amber-200 bg-amber-50 rounded-lg overflow-hidden",children:[g.jsxs("button",{onClick:()=>r(!t),className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-amber-100 transition-colors",children:[g.jsx(sC,{name:n,className:"w-4 h-4 text-amber-600"}),g.jsx("span",{className:"font-medium text-sm text-amber-800",children:n}),g.jsx("span",{className:"text-xs text-amber-600 truncate flex-1 text-left font-mono",children:l&&l.length>50?l.slice(0,50)+"...":l}),t?g.jsx(cr,{size:14,className:"text-amber-600"}):g.jsx(Wh,{size:14,className:"text-amber-600"})]}),t&&o&&g.jsx("div",{className:"px-3 pb-3 border-t border-amber-200",children:g.jsx("pre",{className:"mt-2 bg-white rounded p-2 text-xs font-mono text-slate-700 overflow-x-auto max-h-48 overflow-y-auto",children:o})})]})})}function lC({message:e}){const[t,r]=C.useState(!1),n=e.isError,o=e.content||e.toolOutput||"",l=o.length>80?o.slice(0,80)+"...":o;return g.jsx("div",{className:"px-4 py-2 ml-11",children:g.jsxs("div",{className:Pe("border rounded-lg overflow-hidden",n?"border-red-200 bg-red-50":"border-green-200 bg-green-50"),children:[g.jsxs("button",{onClick:()=>r(!t),className:Pe("w-full flex items-center gap-2 px-3 py-2 transition-colors",n?"hover:bg-red-100":"hover:bg-green-100"),children:[n?g.jsx(j_,{size:14,className:"text-red-500 shrink-0"}):g.jsx(O_,{size:14,className:"text-green-500 shrink-0"}),g.jsx("span",{className:Pe("font-medium text-sm",n?"text-red-700":"text-green-700"),children:n?"Error":"Result"}),g.jsx("span",{className:"text-xs text-slate-600 truncate flex-1 text-left",children:l}),o.length>80&&(t?g.jsx(cr,{size:14,className:"text-slate-400"}):g.jsx(Wh,{size:14,className:"text-slate-400"}))]}),t&&g.jsx("div",{className:Pe("px-3 pb-3 border-t",n?"border-red-200":"border-green-200"),children:g.jsx("pre",{className:"mt-2 bg-white rounded p-2 text-xs font-mono text-slate-700 overflow-x-auto max-h-64 overflow-y-auto whitespace-pre-wrap",children:o})})]})})}function cC({message:e}){const t=e.executor==="codex"?"text-green-600":"text-purple-600",r=e.executor==="codex"?"bg-green-50":"bg-purple-50",n=e.executor==="codex"?"border-green-200":"border-purple-200";return g.jsxs("div",{className:"flex gap-3 px-4 py-4",children:[g.jsx("div",{className:Pe("w-8 h-8 rounded-full flex items-center justify-center shrink-0",e.executor==="codex"?"bg-green-100":"bg-purple-100"),children:g.jsx(O_,{size:16,className:t})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:"text-xs text-slate-400 mb-2",children:"Task Completed"}),g.jsx("div",{className:Pe("rounded-lg border p-3",r,n),children:g.jsx("div",{className:"text-slate-800 whitespace-pre-wrap",children:e.content})})]})]})}function uC({message:e}){const t=e.content.includes("Codex")||e.content.includes(""),r=e.content.includes("Claude")||e.content.includes("");return g.jsx("div",{className:"px-4 py-2",children:g.jsxs("div",{className:Pe("flex items-center justify-center gap-2 text-xs",t?"text-green-600":r?"text-purple-600":"text-slate-400"),children:[g.jsx("div",{className:Pe("h-px flex-1",t?"bg-green-200":r?"bg-purple-200":"bg-slate-200")}),g.jsx(cx,{size:12}),g.jsx("span",{children:e.content}),g.jsx("div",{className:Pe("h-px flex-1",t?"bg-green-200":r?"bg-purple-200":"bg-slate-200")})]})})}function yu({message:e}){const t=e.type==="user",r=e.status==="error"||e.isError;return g.jsx("div",{className:Pe("px-2 py-1.5 text-xs rounded",t?"bg-blue-50 text-blue-800":r?"bg-red-50 text-red-700":"bg-slate-50 text-slate-700"),children:g.jsxs("div",{className:"flex items-start gap-1.5",children:[t?g.jsx(I_,{size:12,className:"text-blue-500 shrink-0 mt-0.5"}):e.executor==="codex"?g.jsx(Ka,{size:12,className:"text-green-500 shrink-0 mt-0.5"}):g.jsx(Ka,{size:12,className:"text-purple-500 shrink-0 mt-0.5"}),g.jsx("span",{className:"break-words",children:e.content})]})})}function iv({message:e,compact:t}){if(t)return g.jsx(yu,{message:e});if(e.type==="agent")return g.jsx(yu,{message:e,compact:!0});switch(e.type){case"user":return g.jsx(nC,{message:e});case"assistant":case"thinking":return g.jsx(oC,{message:e});case"tool_use":return g.jsx(aC,{message:e});case"tool_result":return g.jsx(lC,{message:e});case"result":return g.jsx(cC,{message:e});case"system":return g.jsx(uC,{message:e});default:return g.jsx(yu,{message:e})}}function sv({session:e,projects:t,onUpdate:r,onClose:n,onBack:o,showViewToggle:l=!0,availableModels:c,selectedModel:h,onModelChange:p,executorMode:d,onExecutorModeChange:v}){const _=Qi(),y=C.useRef(null),[b,w]=C.useState(!1),[x,k]=C.useState(!1),[D,j]=C.useState(!1),[$,F]=C.useState("chat"),H=t.find(I=>I.project_id===e.projectId);C.useEffect(()=>{e.status==="running"&&y.current?.scrollIntoView({behavior:"smooth"})},[e.messages.length,e.logs.length,e.status]),C.useEffect(()=>!e.runId||e.status!=="running"?void 0:Nx(e.runId,K=>{r({logs:[...e.logs,K]});const X=K.metadata,z=K.source==="claude"||K.source==="codex"?K.source:void 0;if(K.level==="info"||K.level==="warn"||K.level==="error"){const V={id:`${K.timestamp}-${Math.random()}`,type:"agent",content:K.message,timestamp:K.timestamp,status:K.level==="error"?"error":"success",executor:z,metadata:X};r({messages:[...e.messages,V]})}K.message.includes(" Run completed")||K.message.includes("Run completed successfully")?r({status:"completed"}):(K.message.includes(" Run failed")||K.message.includes("Run failed"))&&r({status:"failed"})}),[e.runId,e.status,e.id]),C.useEffect(()=>{if(!e.runId||e.messages.length>0)return;(async()=>{try{const K=await Ku(e.runId);if(K.status==="running"||K.status==="pending"){r({status:"running"});const{logs:X}=await Da(e.runId),z=X.filter(V=>V.level==="info"||V.level==="warn"||V.level==="error").map(V=>({id:`${V.timestamp}-${Math.random()}`,type:"agent",content:V.message,timestamp:V.timestamp,status:V.level==="error"?"error":"success"}));r({messages:z,logs:X})}else K.status==="completed"?r({status:"completed"}):K.status==="failed"&&r({status:"failed"})}catch{r({runId:null,status:"idle"})}})()},[e.runId]);const J=Ur({mutationFn:I=>F_(I),onSuccess:I=>{r({runId:I.run_id,status:"running",messages:[...e.messages,{id:`user-${Date.now()}`,type:"user",content:e.input,timestamp:new Date().toISOString()}],input:""}),_.invalidateQueries({queryKey:["runs"]})}}),Z=()=>{!e.input.trim()||!e.projectId||!H||J.mutate({goal:e.input,repoPath:H.repo_path,projectId:e.projectId})},le=I=>{I.key==="Enter"&&!I.shiftKey&&(I.preventDefault(),Z())},ie=()=>{r({status:"idle"})};return g.jsxs("div",{className:Pe("flex flex-col h-full bg-white",n&&"border-r border-slate-200 w-[320px] min-w-[280px] max-w-[400px] flex-shrink-0"),children:[g.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-slate-200 bg-slate-50",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[o&&g.jsx("button",{onClick:o,className:"p-1.5 text-slate-500 hover:text-slate-700 hover:bg-slate-100 rounded-lg transition-colors",children:g.jsx(Hh,{size:20})}),g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:()=>w(!b),disabled:e.status==="running",className:"flex items-center gap-2 px-3 py-1.5 text-sm text-slate-700 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50",children:[g.jsx(Ns,{size:16}),g.jsx("span",{className:"truncate max-w-[200px]",children:H?.name||"Select Project"}),g.jsx(cr,{size:14})]}),b&&g.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 min-w-[250px] max-h-[300px] overflow-y-auto z-50",children:t.map(I=>g.jsxs("button",{onClick:()=>{r({projectId:I.project_id}),w(!1)},className:Pe("w-full text-left px-3 py-2 text-sm hover:bg-slate-50",I.project_id===e.projectId&&"bg-primary-50 text-primary-600"),children:[g.jsx("div",{className:"font-medium truncate",children:I.name}),g.jsx("div",{className:"text-xs text-slate-400 truncate",children:I.repo_path})]},I.project_id))})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[e.status==="running"&&g.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium bg-yellow-100 text-yellow-700 rounded-full",children:[g.jsx(Wt,{size:10,className:"animate-spin"}),""]}),e.status==="completed"&&g.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-green-100 text-green-700 rounded-full",children:""}),e.status==="failed"&&g.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-red-100 text-red-700 rounded-full",children:""}),n&&g.jsx("button",{onClick:n,className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:g.jsx(Qh,{size:18})})]})]}),l&&g.jsxs("div",{className:"flex border-b border-slate-200",children:[g.jsxs("button",{onClick:()=>F("chat"),className:Pe("flex-1 px-4 py-2 text-sm font-medium transition-colors",$==="chat"?"text-primary-600 border-b-2 border-primary-600":"text-slate-500 hover:text-slate-700"),children:[g.jsx(Kh,{size:14,className:"inline mr-2"}),"Chat"]}),g.jsxs("button",{onClick:()=>F("logs"),className:Pe("flex-1 px-4 py-2 text-sm font-medium transition-colors",$==="logs"?"text-primary-600 border-b-2 border-primary-600":"text-slate-500 hover:text-slate-700"),children:[g.jsx(Qn,{size:14,className:"inline mr-2"}),"Logs"]})]}),g.jsx("div",{className:"flex-1 overflow-y-auto",children:$==="chat"?g.jsxs("div",{className:"max-w-3xl mx-auto p-4 space-y-3",children:[e.messages.length===0?g.jsx("div",{className:"text-center text-slate-400 text-sm py-16",children:e.projectId?"":""}):e.messages.map(I=>g.jsx(iv,{message:I},I.id)),g.jsx("div",{ref:y})]}):g.jsxs("div",{className:"font-mono text-xs",children:[e.logs.length===0?g.jsx("div",{className:"text-center text-slate-400 text-sm py-16",children:""}):e.logs.map((I,K)=>g.jsxs("div",{className:Pe("px-4 py-1.5 border-b border-slate-100",I.level==="error"&&"bg-red-50",I.level==="warn"&&"bg-amber-50"),children:[g.jsx("span",{className:"text-slate-400",children:new Date(I.timestamp).toLocaleTimeString()}),g.jsxs("span",{className:Pe("ml-2",I.level==="error"&&"text-red-600",I.level==="warn"&&"text-amber-600",I.level==="info"&&"text-primary-600",I.level==="debug"&&"text-slate-400"),children:["[",I.source,"]"]}),g.jsx("span",{className:"ml-2 text-slate-700",children:I.message})]},`${I.timestamp}-${K}`)),g.jsx("div",{ref:y})]})}),g.jsx("div",{className:"border-t border-slate-200 p-4 bg-white",children:g.jsxs("div",{className:"max-w-3xl mx-auto",children:[(c||d)&&g.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[c&&h&&p&&g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:()=>k(!x),disabled:e.status==="running",className:"flex items-center gap-1 px-2 py-1 text-xs text-slate-500 hover:bg-slate-100 rounded transition-colors disabled:opacity-50",children:[g.jsx("span",{children:h}),g.jsx(cr,{size:12})]}),x&&c.length>0&&g.jsx("div",{className:"absolute bottom-full left-0 mb-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 min-w-[150px] max-h-[200px] overflow-y-auto z-50",children:c.map(I=>g.jsx("button",{onClick:()=>{p(I),k(!1)},className:Pe("w-full text-left px-3 py-1.5 text-xs hover:bg-slate-50",I===h&&"bg-primary-50 text-primary-600"),children:I},I))})]}),d&&v&&g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:()=>j(!D),className:Pe("flex items-center gap-1.5 px-2 py-1 text-xs rounded transition-colors",d==="codex_only"&&"bg-green-100 text-green-700",d==="claude_only"&&"bg-purple-100 text-purple-700",d==="agent"&&"bg-slate-100 text-slate-500 hover:bg-slate-200"),children:[g.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:d==="codex_only"?"#22c55e":d==="claude_only"?"#a855f7":"#94a3b8"}}),g.jsx("span",{children:d==="codex_only"?"Codex":d==="claude_only"?"Claude":"Agent"}),g.jsx(cr,{size:12})]}),D&&g.jsx("div",{className:"absolute bottom-full left-0 mb-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 min-w-[140px] z-50",children:[{value:"agent",label:"Agent",color:"#94a3b8"},{value:"codex_only",label:"Codex",color:"#22c55e"},{value:"claude_only",label:"Claude",color:"#a855f7"}].map(I=>g.jsxs("button",{onClick:()=>{v(I.value),j(!1)},className:Pe("w-full text-left px-3 py-1.5 text-xs hover:bg-slate-50 flex items-center gap-2",I.value===d&&"bg-primary-50"),children:[g.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:I.color}}),I.label]},I.value))})]})]}),g.jsxs("div",{className:"relative",children:[g.jsx("textarea",{value:e.input,onChange:I=>r({input:I.target.value}),onKeyDown:le,placeholder:e.projectId?"...":"",disabled:!e.projectId||e.status==="running",className:"w-full resize-none border border-slate-200 rounded-lg px-4 py-3 pr-14 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 min-h-[80px] disabled:bg-slate-50",rows:3}),g.jsx("div",{className:"absolute right-2 bottom-2",children:e.status==="running"?g.jsx("button",{onClick:ie,className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:g.jsx(Sx,{size:16})}):g.jsx("button",{onClick:Z,disabled:!e.input.trim()||!e.projectId,className:Pe("p-2 rounded-lg transition-colors",e.input.trim()&&e.projectId?"bg-primary-500 text-white hover:bg-primary-600":"bg-slate-100 text-slate-400"),children:g.jsx(Vh,{size:16})})})]})]})})]})}function hC({session:e,projects:t,onUpdate:r,onBack:n}){const o=C.useRef(null),[l,c]=C.useState(!1),[h,p]=C.useState(!1),d=t.find(y=>y.project_id===e.projectId);C.useEffect(()=>{o.current?.scrollIntoView({behavior:"smooth"})},[e.messages.length]),C.useEffect(()=>{if(!e.runId)return;(async()=>{try{const b=await K_(e.runId);if(b){const w=b.messages.map(x=>({id:`${x.timestamp}-${Math.random()}`,type:x.role==="user"?"user":"agent",content:x.content,timestamp:x.timestamp,status:"success"}));r({messages:w})}}catch(b){console.error("Failed to load conversation:",b)}})()},[e.runId]);const v=async()=>{if(!e.input.trim()||!e.runId)return;const y={id:`user-${Date.now()}`,type:"user",content:e.input,timestamp:new Date().toISOString()};r({messages:[...e.messages,y],input:""}),p(!0);try{const b=await Ix(e.runId,e.input),w={id:`assistant-${Date.now()}`,type:"agent",content:b.message,timestamp:new Date().toISOString(),status:"success"};r({messages:[...e.messages,y,w],status:b.completed?"completed":e.status})}catch(b){const w={id:`error-${Date.now()}`,type:"agent",content:b instanceof Error?b.message:"",timestamp:new Date().toISOString(),status:"error"};r({messages:[...e.messages,y,w],status:"failed"})}finally{p(!1)}},_=y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),v())};return g.jsxs("div",{className:"flex flex-col h-full bg-white",children:[g.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-slate-200 bg-purple-50",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[n&&g.jsx("button",{onClick:n,className:"p-1.5 text-slate-500 hover:text-slate-700 hover:bg-slate-100 rounded-lg transition-colors",children:g.jsx(Hh,{size:20})}),g.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-purple-100 text-purple-700 rounded-full",children:""}),g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:()=>c(!l),disabled:e.status==="running",className:"flex items-center gap-2 px-3 py-1.5 text-sm text-slate-700 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50",children:[g.jsx(Ns,{size:16}),g.jsx("span",{className:"truncate max-w-[200px]",children:d?.name||"Select Project"}),g.jsx(cr,{size:14})]}),l&&g.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 min-w-[250px] max-h-[300px] overflow-y-auto z-50",children:t.map(y=>g.jsxs("button",{onClick:()=>{r({projectId:y.project_id}),c(!1)},className:Pe("w-full text-left px-3 py-2 text-sm hover:bg-slate-50",y.project_id===e.projectId&&"bg-primary-50 text-primary-600"),children:[g.jsx("div",{className:"font-medium truncate",children:y.name}),g.jsx("div",{className:"text-xs text-slate-400 truncate",children:y.repo_path})]},y.project_id))})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[h&&g.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium bg-yellow-100 text-yellow-700 rounded-full",children:[g.jsx(Wt,{size:10,className:"animate-spin"}),""]}),e.status==="completed"&&g.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-green-100 text-green-700 rounded-full",children:""})]})]}),g.jsx("div",{className:"flex-1 overflow-y-auto",children:g.jsxs("div",{className:"max-w-3xl mx-auto p-4 space-y-3",children:[e.messages.length===0?g.jsx("div",{className:"text-center text-slate-400 text-sm py-16",children:e.runId?"":""}):e.messages.map(y=>g.jsx(iv,{message:y},y.id)),g.jsx("div",{ref:o})]})}),g.jsx("div",{className:"border-t border-slate-200 p-4 bg-white",children:g.jsx("div",{className:"max-w-3xl mx-auto",children:g.jsxs("div",{className:"relative",children:[g.jsx("textarea",{value:e.input,onChange:y=>r({input:y.target.value}),onKeyDown:_,placeholder:e.runId?"...":"",disabled:!e.runId||h,className:"w-full resize-none border border-slate-200 rounded-lg px-4 py-3 pr-14 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 min-h-[80px] disabled:bg-slate-50",rows:3}),g.jsx("div",{className:"absolute right-2 bottom-2",children:g.jsx("button",{onClick:v,disabled:!e.input.trim()||!e.runId||h,className:Pe("p-2 rounded-lg transition-colors",e.input.trim()&&e.runId&&!h?"bg-purple-500 text-white hover:bg-purple-600":"bg-slate-100 text-slate-400"),children:h?g.jsx(Wt,{size:16,className:"animate-spin"}):g.jsx(Vh,{size:16})})})]})})})]})}function dC({sessions:e,projects:t,onUpdateSession:r,onAddSession:n,onAddFromHistory:o,onRemoveSession:l,onSwitchToTimeline:c,defaultModel:h,availableModels:p,defaultExecutorMode:d}){const[v,_]=C.useState(!1),y=C.useRef(null),{data:b}=Mt({queryKey:["runs"],queryFn:A_}),w=b?.runs||[];return C.useEffect(()=>{const x=y.current;if(!x)return;const k=D=>{Math.abs(D.deltaY)>Math.abs(D.deltaX)&&x.scrollWidth>x.clientWidth&&(D.preventDefault(),x.scrollLeft+=D.deltaY)};return x.addEventListener("wheel",k,{passive:!1}),()=>x.removeEventListener("wheel",k)},[]),g.jsxs("div",{className:"flex flex-col h-full bg-slate-100",children:[g.jsxs("div",{className:"flex items-center justify-between p-2 bg-white border-b border-slate-200",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("h1",{className:"text-sm font-semibold text-slate-700",children:"Parallel Agents"}),g.jsxs("span",{className:"text-xs text-slate-400",children:["(",e.length,")"]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{onClick:n,className:"flex items-center gap-1 px-2 py-1 text-xs text-primary-600 hover:bg-primary-50 rounded transition-colors",children:[g.jsx(Rs,{size:14}),""]}),g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:()=>_(!v),className:"flex items-center gap-1 px-2 py-1 text-xs text-slate-600 hover:bg-slate-100 rounded transition-colors",children:[g.jsx(Kh,{size:14}),"",g.jsx(cr,{size:12})]}),v&&g.jsx("div",{className:"absolute top-full right-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 w-[300px] max-h-[400px] overflow-y-auto z-50",children:w.length===0?g.jsx("div",{className:"px-3 py-4 text-center text-slate-400 text-xs",children:""}):w.slice(0,20).map(x=>{const k=t.find(D=>D.project_id===x.project_id);return g.jsxs("button",{onClick:()=>{o(x.run_id,x.project_id,x.user_goal),_(!1)},className:"w-full text-left px-3 py-2 hover:bg-slate-50 border-b border-slate-50 last:border-0",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[g.jsx("span",{className:"text-xs font-medium text-slate-700 truncate",children:k?.name||"Unknown"}),g.jsx("span",{className:Pe("px-1.5 py-0.5 text-[10px] rounded-full",x.status==="completed"&&"bg-green-100 text-green-700",x.status==="failed"&&"bg-red-100 text-red-700",x.status==="running"&&"bg-yellow-100 text-yellow-700",x.status==="interrupted"&&"bg-orange-100 text-orange-700"),children:x.status})]}),g.jsx("p",{className:"text-xs text-slate-500 line-clamp-1",children:x.user_goal}),g.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(x.created_at).toLocaleString()})]},x.run_id)})})]}),g.jsxs("button",{onClick:c,className:"flex items-center gap-1 px-2 py-1 text-xs text-slate-500 hover:bg-slate-100 rounded transition-colors",children:[g.jsx(mx,{size:14}),""]})]})]}),g.jsxs("div",{ref:y,className:"flex-1 flex overflow-x-auto",children:[e.length===0?g.jsx("div",{className:"flex-1 flex items-center justify-center",children:g.jsxs("button",{onClick:n,className:"flex flex-col items-center gap-2 p-6 text-slate-400 hover:text-slate-600 hover:bg-white rounded-lg border-2 border-dashed border-slate-300 hover:border-slate-400 transition-colors",children:[g.jsx(Rs,{size:24}),g.jsx("span",{className:"text-sm",children:""})]})}):e.map(x=>g.jsx(sv,{session:x,projects:t,onUpdate:k=>r(x.id,k),onClose:()=>l(x.id),availableModels:p,selectedModel:x.selectedModel||h,onModelChange:k=>r(x.id,{selectedModel:k}),executorMode:x.executorMode||d,onExecutorModeChange:k=>r(x.id,{executorMode:k})},x.id)),e.length>0&&g.jsx("button",{onClick:n,className:"flex items-center justify-center min-w-[100px] text-slate-400 hover:text-slate-600 hover:bg-white rounded-lg border-2 border-dashed border-slate-300 hover:border-slate-400 transition-colors",children:g.jsx(Rs,{size:20})})]})]})}function fC({projects:e,onStartNew:t,onStartSpec:r,onOpenRun:n,onOpenOrphaned:o,onSwitchToParallel:l,selectedModel:c,availableModels:h,onModelChange:p,executorMode:d,onExecutorModeChange:v,maxContextTokens:_,onMaxContextTokensChange:y}){const b=Qi(),[w,x]=C.useState(""),[k,D]=C.useState(null),[j,$]=C.useState("implementation"),[F,H]=C.useState(!1),[J,Z]=C.useState(!1),[le,ie]=C.useState(!1),[I,K]=C.useState(!1),X=[{value:5e4,label:"50K"},{value:1e5,label:"100K"},{value:15e4,label:"150K"},{value:2e5,label:"200K"}],{data:z,isLoading:V}=Mt({queryKey:["runs"],queryFn:A_,refetchInterval:5e3}),W=z?.runs||[],{data:M}=Mt({queryKey:["orphanedSessions"],queryFn:kx,refetchInterval:1e4}),U=M?.sessions||[],L=async(Y,ae)=>{ae.stopPropagation(),await Ex(Y),b.invalidateQueries({queryKey:["orphanedSessions"]})},G=e.find(Y=>Y.project_id===k),q=()=>{if(k)if(j==="spec")r(k),x("");else{if(!w.trim())return;t(k,w),x("")}},P=Y=>{Y.key==="Enter"&&!Y.shiftKey&&(Y.preventDefault(),q())},B=Y=>{switch(Y){case"running":return g.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium bg-yellow-100 text-yellow-700 rounded-full",children:[g.jsx(Wt,{size:10,className:"animate-spin"}),""]});case"completed":return g.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-green-100 text-green-700 rounded-full",children:""});case"failed":return g.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-red-100 text-red-700 rounded-full",children:""});case"interrupted":return g.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-orange-100 text-orange-700 rounded-full",children:""});default:return g.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-slate-100 text-slate-500 rounded-full",children:""})}};return g.jsxs("div",{className:"flex-1 flex flex-col bg-slate-50",children:[g.jsx("div",{className:"p-4 bg-white border-b border-slate-200",children:g.jsxs("div",{className:"max-w-2xl mx-auto space-y-3",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("h1",{className:"text-lg font-semibold text-slate-800",children:"Agents"}),g.jsxs("div",{className:"flex items-center bg-slate-100 rounded-lg p-0.5",children:[g.jsx("button",{onClick:()=>$("spec"),className:Pe("px-3 py-1 text-xs font-medium rounded-md transition-colors",j==="spec"?"bg-purple-500 text-white":"text-slate-600 hover:text-slate-800"),children:""}),g.jsx("button",{onClick:()=>$("implementation"),className:Pe("px-3 py-1 text-xs font-medium rounded-md transition-colors",j==="implementation"?"bg-primary-500 text-white":"text-slate-600 hover:text-slate-800"),children:""})]})]}),g.jsxs("button",{onClick:l,className:"flex items-center gap-1 px-2 py-1 text-xs text-slate-500 hover:bg-slate-100 rounded transition-colors",children:[g.jsx(lx,{size:14}),""]})]}),g.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[g.jsxs("div",{className:"relative flex-1",children:[g.jsxs("button",{onClick:()=>H(!F),className:"flex items-center gap-2 px-3 py-2.5 text-sm text-slate-700 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors w-full border border-slate-200",children:[g.jsx(Ns,{size:16}),g.jsx("span",{className:"truncate flex-1 text-left",children:G?.name||""}),g.jsx(cr,{size:16})]}),F&&g.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 w-full max-h-[250px] overflow-y-auto z-50",children:e.map(Y=>g.jsxs("button",{onClick:()=>{D(Y.project_id),H(!1)},className:Pe("w-full text-left px-3 py-2 text-sm hover:bg-slate-50",Y.project_id===k&&"bg-primary-50 text-primary-600"),children:[g.jsx("div",{className:"font-medium truncate",children:Y.name}),g.jsx("div",{className:"text-xs text-slate-400 truncate",children:Y.repo_path})]},Y.project_id))})]}),g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:()=>Z(!J),className:"flex items-center gap-1 px-3 py-2.5 text-xs text-slate-500 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors border border-slate-200",children:[g.jsx("span",{children:c}),g.jsx(cr,{size:14})]}),J&&h.length>0&&g.jsx("div",{className:"absolute top-full right-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 min-w-[150px] max-h-[200px] overflow-y-auto z-50",children:h.map(Y=>g.jsx("button",{onClick:()=>{p(Y),Z(!1)},className:Pe("w-full text-left px-3 py-1.5 text-xs hover:bg-slate-50",Y===c&&"bg-primary-50 text-primary-600"),children:Y},Y))})]})]}),g.jsxs("div",{className:"relative",children:[j==="spec"?g.jsxs("div",{className:"border border-purple-200 rounded-lg px-4 py-4 bg-purple-50",children:[g.jsx("p",{className:"text-sm text-purple-700 mb-2",children:"AI"}),g.jsx("p",{className:"text-xs text-purple-600",children:""})]}):g.jsx("textarea",{value:w,onChange:Y=>x(Y.target.value),onKeyDown:P,placeholder:k?"...":"",disabled:!k,className:"w-full resize-none border border-slate-200 rounded-lg px-4 py-3 pb-12 pr-14 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 min-h-[100px] disabled:bg-slate-50 disabled:text-slate-400",rows:3}),j==="implementation"&&g.jsxs("div",{className:"absolute left-2 right-2 bottom-2 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:()=>ie(!le),className:Pe("flex items-center gap-1.5 px-2 py-1 text-xs rounded-md transition-colors",d==="codex_only"&&"bg-green-100 text-green-700",d==="claude_only"&&"bg-purple-100 text-purple-700",d==="agent"&&"bg-slate-100 text-slate-500 hover:bg-slate-200"),children:[g.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:d==="codex_only"?"#22c55e":d==="claude_only"?"#a855f7":"#94a3b8"}}),g.jsx("span",{children:d==="codex_only"?"Codex":d==="claude_only"?"Claude":"Agent"}),g.jsx(cr,{size:12})]}),le&&g.jsx("div",{className:"absolute bottom-full left-0 mb-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 min-w-[140px] z-50",children:[{value:"agent",label:"Agent",color:"#94a3b8"},{value:"codex_only",label:"Codex",color:"#22c55e"},{value:"claude_only",label:"Claude",color:"#a855f7"}].map(Y=>g.jsxs("button",{onClick:()=>{v(Y.value),ie(!1)},className:Pe("w-full text-left px-3 py-1.5 text-xs hover:bg-slate-50 flex items-center gap-2",Y.value===d&&"bg-primary-50"),children:[g.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:Y.color}}),Y.label]},Y.value))})]}),g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:()=>K(!I),className:"flex items-center gap-1 px-2 py-1 text-xs text-slate-500 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:[g.jsxs("span",{children:[Math.round(_/1e3),"K tokens"]}),g.jsx(cr,{size:12})]}),I&&g.jsx("div",{className:"absolute bottom-full left-0 mb-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 min-w-[100px] z-50",children:X.map(Y=>g.jsxs("button",{onClick:()=>{y(Y.value),K(!1)},className:Pe("w-full text-left px-3 py-1.5 text-xs hover:bg-slate-50",Y.value===_&&"bg-primary-50 text-primary-600"),children:[Y.label," tokens"]},Y.value))})]})]}),g.jsx("button",{onClick:q,disabled:!w.trim()||!k,className:Pe("p-2 rounded-lg transition-colors",w.trim()&&k?"bg-primary-500 text-white hover:bg-primary-600":"bg-slate-100 text-slate-400"),children:g.jsx(Vh,{size:18})})]}),j==="spec"&&g.jsx("div",{className:"mt-3 flex justify-end",children:g.jsxs("button",{onClick:q,disabled:!k,className:Pe("px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2",k?"bg-purple-500 text-white hover:bg-purple-600":"bg-slate-100 text-slate-400"),children:[g.jsx(Kh,{size:16}),""]})})]})]})}),g.jsx("div",{className:"flex-1 overflow-y-auto",children:g.jsxs("div",{className:"max-w-2xl mx-auto py-4 px-2",children:[U.length>0&&g.jsxs("div",{className:"mb-6",children:[g.jsx("h3",{className:"px-3 text-xs font-semibold text-orange-600 uppercase tracking-wider mb-2",children:""}),g.jsx("div",{className:"bg-white rounded-lg border border-orange-200 divide-y divide-orange-100",children:U.map(Y=>g.jsx("div",{onClick:()=>o(Y.run_id,Y.first_message),className:"px-4 py-3 hover:bg-orange-50 cursor-pointer",children:g.jsxs("div",{className:"flex items-start justify-between gap-3",children:[g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[B("interrupted"),g.jsxs("span",{className:"text-xs text-slate-400",children:[Y.log_count," "]})]}),g.jsx("p",{className:"text-sm text-slate-600 line-clamp-2",children:Y.first_message||"()"}),g.jsx("p",{className:"text-xs text-slate-400 mt-1",children:new Date(Y.last_log).toLocaleString()})]}),g.jsx("button",{onClick:ae=>L(Y.run_id,ae),className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg",children:g.jsx(qh,{size:16})})]})},Y.run_id))})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"px-3 text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2",children:""}),V?g.jsxs("div",{className:"text-center text-slate-400 text-sm py-12 bg-white rounded-lg border border-slate-200",children:[g.jsx(Wt,{size:20,className:"animate-spin mx-auto mb-2"}),"..."]}):W.length===0?g.jsx("div",{className:"text-center text-slate-400 text-sm py-12 bg-white rounded-lg border border-slate-200",children:""}):g.jsx("div",{className:"bg-white rounded-lg border border-slate-200 divide-y divide-slate-100",children:(()=>{const Y=new Map(e.map(ae=>[ae.project_id,ae]));return W.map(ae=>{const Se=ae.project_id?Y.get(ae.project_id):void 0;return g.jsx("div",{onClick:()=>n(ae.run_id,ae.project_id,ae.user_goal,ae.mode||"implementation"),className:"px-4 py-3 hover:bg-slate-50 cursor-pointer",children:g.jsx("div",{className:"flex items-start justify-between gap-3",children:g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[g.jsx("span",{className:"font-medium text-slate-700 truncate",children:Se?.name||"Unknown Project"}),ae.mode==="spec"&&g.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium bg-purple-100 text-purple-700 rounded-full",children:""}),B(ae.status)]}),g.jsx("p",{className:"text-sm text-slate-600 line-clamp-2",children:ae.user_goal||(ae.mode==="spec"?"()":"(no goal)")}),g.jsx("p",{className:"text-xs text-slate-400 mt-1",children:new Date(ae.created_at).toLocaleString()})]})})},ae.run_id)})})()})]})]})})]})}function pC(){const[e,t]=C.useState(()=>typeof window<"u"&&window.innerWidth<768);return C.useEffect(()=>{const r=()=>t(window.innerWidth<768);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),e}function mC(){const e=pC(),[t,r]=C.useState(!1),[n,o]=C.useState("timeline"),[l,c]=C.useState(null),[h,p]=C.useState([]),[d,v]=C.useState(!1),[_,y]=C.useState("gpt-5.2"),[b,w]=C.useState("agent"),[x,k]=C.useState(15e4),{data:D}=Mt({queryKey:["projects"],queryFn:z_}),j=D?.projects||[],{data:$}=Mt({queryKey:["parallelSessions"],queryFn:Px,staleTime:1/0}),F=Ur({mutationFn:Rx});C.useEffect(()=>{t||(o(e?"timeline":"columns"),r(!0))},[e,t]),C.useEffect(()=>{if($?.sessions&&!d){const se=$.sessions.map(pe=>({id:pe.id,projectId:pe.projectId,runId:pe.runId,mode:"implementation",status:pe.status,input:pe.input,messages:[],logs:[],selectedModel:pe.selectedModel,executorMode:pe.executorMode}));p(se),v(!0)}},[$,d]),C.useEffect(()=>{if(!d)return;const se=setTimeout(()=>{const pe=h.map(ge=>({id:ge.id,projectId:ge.projectId,runId:ge.runId,status:ge.status,input:ge.input,selectedModel:ge.selectedModel,executorMode:ge.executorMode}));F.mutate(pe)},500);return()=>clearTimeout(se)},[h,d]);const{data:H}=Mt({queryKey:["copilotStatus"],queryFn:U_,refetchInterval:1e4}),{data:J}=Mt({queryKey:["copilotModels"],queryFn:Lx,enabled:H?.running&&H?.healthy,staleTime:6e4}),{data:Z}=Mt({queryKey:["settings"],queryFn:H_}),le=Ur({mutationFn:W_}),ie=(J?.models??[]).map(se=>se.id);C.useEffect(()=>{Z?.dag_model&&y(Z.dag_model)},[Z?.dag_model]),C.useEffect(()=>{Z?.executor_mode&&w(Z.executor_mode)},[Z?.executor_mode]),C.useEffect(()=>{Z?.max_context_tokens&&k(Z.max_context_tokens)},[Z?.max_context_tokens]);const I=se=>{y(se),le.mutate({dag_model:se})},K=se=>{w(se),le.mutate({executor_mode:se})},X=se=>{k(se),le.mutate({max_context_tokens:se})},z=Qi(),V=Ur({mutationFn:se=>F_(se)}),W=(se,pe)=>{const ge=j.find(be=>be.project_id===se);if(!ge)return;const _e={id:`session-${Date.now()}`,projectId:se,runId:null,mode:"implementation",status:"idle",input:"",messages:[],logs:[]};V.mutate({goal:pe,repoPath:ge.repo_path,projectId:se,mode:"implementation"},{onSuccess:be=>{c({..._e,runId:be.run_id,status:"running",messages:[{id:`user-${Date.now()}`,type:"user",content:pe,timestamp:new Date().toISOString()}]}),o("single"),z.invalidateQueries({queryKey:["runs"]})}})},M=se=>{const pe=j.find(_e=>_e.project_id===se);if(!pe)return;const ge={id:`session-${Date.now()}`,projectId:se,runId:null,mode:"spec",status:"idle",input:"",messages:[],logs:[]};V.mutate({goal:"",repoPath:pe.repo_path,projectId:se,mode:"spec"},{onSuccess:_e=>{c({...ge,runId:_e.run_id,status:"running"}),o("single"),z.invalidateQueries({queryKey:["runs"]})}})},U=async(se,pe,ge,_e="implementation")=>{try{const be=await Ku(se),Pt=be.mode||_e,wt=be.status==="running"||be.status==="pending"?"running":be.status==="completed"?"completed":be.status==="failed"?"failed":be.status==="interrupted"?"interrupted":"idle";if(Pt==="spec"){const We=(await K_(se))?.messages.map(it=>({id:`${it.timestamp}-${Math.random()}`,type:it.role==="user"?"user":"agent",content:it.content,timestamp:it.timestamp,status:"success"}))||[];c({id:`session-${Date.now()}`,projectId:pe||null,runId:se,mode:"spec",status:wt,input:"",messages:We,logs:[]})}else{const{logs:Ee}=await Da(se),We=[{id:`user-${Date.now()}`,type:"user",content:ge,timestamp:be.created_at},...Ee.filter(it=>it.level==="info"||it.level==="warn"||it.level==="error").map(it=>({id:`${it.timestamp}-${Math.random()}`,type:"agent",content:it.message,timestamp:it.timestamp,status:it.level==="error"?"error":"success",executor:it.source==="claude"||it.source==="codex"?it.source:void 0}))];c({id:`session-${Date.now()}`,projectId:pe||null,runId:se,mode:"implementation",status:wt,input:"",messages:We,logs:Ee})}o("single")}catch(be){console.error("Failed to open run:",be)}},L=async(se,pe)=>{try{const{logs:ge}=await Da(se),_e=ge.filter(be=>be.level==="info"||be.level==="warn"||be.level==="error").map(be=>({id:`${be.timestamp}-${Math.random()}`,type:"agent",content:be.message,timestamp:be.timestamp,status:be.level==="error"?"error":"success",executor:be.source==="claude"||be.source==="codex"?be.source:void 0}));c({id:`session-${Date.now()}`,projectId:null,runId:null,mode:"implementation",status:"interrupted",input:"",messages:_e,logs:ge}),o("single")}catch(ge){console.error("Failed to open orphaned session:",ge)}},G=se=>{l&&c({...l,...se})},q=()=>{const se={id:`session-${Date.now()}`,projectId:null,runId:null,mode:"implementation",status:"idle",input:"",messages:[],logs:[]};p([...h,se])},P=se=>{p(h.filter(pe=>pe.id!==se))},B=(se,pe)=>{p(h.map(ge=>ge.id===se?{...ge,...pe}:ge))},Y=async(se,pe,ge)=>{try{const _e=await Ku(se),be=_e.status==="running"||_e.status==="pending"?"running":_e.status==="completed"?"completed":_e.status==="failed"?"failed":_e.status==="interrupted"?"interrupted":"idle",{logs:Pt}=await Da(se),wt=[{id:`user-${Date.now()}`,type:"user",content:ge,timestamp:_e.created_at},...Pt.filter(We=>We.level==="info"||We.level==="warn"||We.level==="error").map(We=>({id:`${We.timestamp}-${Math.random()}`,type:"agent",content:We.message,timestamp:We.timestamp,status:We.level==="error"?"error":"success",executor:We.source==="claude"||We.source==="codex"?We.source:void 0}))],Ee={id:`session-${Date.now()}`,projectId:pe||null,runId:se,mode:_e.mode||"implementation",status:be,input:"",messages:wt,logs:Pt};p([...h,Ee])}catch(_e){console.error("Failed to load run for parallel:",_e)}},ae=()=>{o("columns"),h.length===0&&q()},Se=()=>{o("timeline"),c(null)};return g.jsx("div",{className:"h-[calc(100vh-64px)] lg:h-screen flex flex-col",children:n==="single"&&l?l.mode==="spec"?g.jsx(hC,{session:l,projects:j,onUpdate:G,onBack:()=>{c(null),o("timeline")}}):g.jsx(sv,{session:l,projects:j,onUpdate:G,onBack:()=>{c(null),o("timeline")},availableModels:ie,selectedModel:_,onModelChange:I,executorMode:b,onExecutorModeChange:K}):n==="columns"?g.jsx(dC,{sessions:h,projects:j,onUpdateSession:B,onAddSession:q,onAddFromHistory:Y,onRemoveSession:P,onSwitchToTimeline:Se,defaultModel:_,availableModels:ie,defaultExecutorMode:b}):g.jsx(fC,{projects:j,onStartNew:W,onStartSpec:M,onOpenRun:U,onOpenOrphaned:L,onSwitchToParallel:ae,selectedModel:_,availableModels:ie,onModelChange:I,executorMode:b,onExecutorModeChange:K,maxContextTokens:x,onMaxContextTokensChange:X})})}/**
 * Copyright (c) 2014-2024 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * @license MIT
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 */var nv=Object.defineProperty,gC=Object.getOwnPropertyDescriptor,_C=(e,t)=>{for(var r in t)nv(e,r,{get:t[r],enumerable:!0})},Ge=(e,t,r,n)=>{for(var o=n>1?void 0:n?gC(t,r):t,l=e.length-1,c;l>=0;l--)(c=e[l])&&(o=(n?c(t,r,o):c(o))||o);return n&&o&&nv(t,r,o),o},ce=(e,t)=>(r,n)=>t(r,n,e),Zm="Terminal input",Vu={get:()=>Zm,set:e=>Zm=e},eg="Too much output to announce, navigate to rows manually to read",qu={get:()=>eg,set:e=>eg=e};function vC(e){return e.replace(/\r?\n/g,"\r")}function yC(e,t){return t?"\x1B[200~"+e+"\x1B[201~":e}function SC(e,t){e.clipboardData&&e.clipboardData.setData("text/plain",t.selectionText),e.preventDefault()}function wC(e,t,r,n){if(e.stopPropagation(),e.clipboardData){let o=e.clipboardData.getData("text/plain");ov(o,t,r,n)}}function ov(e,t,r,n){e=vC(e),e=yC(e,r.decPrivateModes.bracketedPasteMode&&n.rawOptions.ignoreBracketedPasteMode!==!0),r.triggerDataEvent(e,!0),t.value=""}function av(e,t,r){let n=r.getBoundingClientRect(),o=e.clientX-n.left-10,l=e.clientY-n.top-10;t.style.width="20px",t.style.height="20px",t.style.left=`${o}px`,t.style.top=`${l}px`,t.style.zIndex="1000",t.focus()}function tg(e,t,r,n,o){av(e,t,r),o&&n.rightClickSelect(e),t.value=n.selectionText,t.select()}function vi(e){return e>65535?(e-=65536,String.fromCharCode((e>>10)+55296)+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)}function sl(e,t=0,r=e.length){let n="";for(let o=t;o<r;++o){let l=e[o];l>65535?(l-=65536,n+=String.fromCharCode((l>>10)+55296)+String.fromCharCode(l%1024+56320)):n+=String.fromCharCode(l)}return n}var xC=class{constructor(){this._interim=0}clear(){this._interim=0}decode(e,t){let r=e.length;if(!r)return 0;let n=0,o=0;if(this._interim){let l=e.charCodeAt(o++);56320<=l&&l<=57343?t[n++]=(this._interim-55296)*1024+l-56320+65536:(t[n++]=this._interim,t[n++]=l),this._interim=0}for(let l=o;l<r;++l){let c=e.charCodeAt(l);if(55296<=c&&c<=56319){if(++l>=r)return this._interim=c,n;let h=e.charCodeAt(l);56320<=h&&h<=57343?t[n++]=(c-55296)*1024+h-56320+65536:(t[n++]=c,t[n++]=h);continue}c!==65279&&(t[n++]=c)}return n}},bC=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(e,t){let r=e.length;if(!r)return 0;let n=0,o,l,c,h,p=0,d=0;if(this.interim[0]){let y=!1,b=this.interim[0];b&=(b&224)===192?31:(b&240)===224?15:7;let w=0,x;for(;(x=this.interim[++w]&63)&&w<4;)b<<=6,b|=x;let k=(this.interim[0]&224)===192?2:(this.interim[0]&240)===224?3:4,D=k-w;for(;d<D;){if(d>=r)return 0;if(x=e[d++],(x&192)!==128){d--,y=!0;break}else this.interim[w++]=x,b<<=6,b|=x&63}y||(k===2?b<128?d--:t[n++]=b:k===3?b<2048||b>=55296&&b<=57343||b===65279||(t[n++]=b):b<65536||b>1114111||(t[n++]=b)),this.interim.fill(0)}let v=r-4,_=d;for(;_<r;){for(;_<v&&!((o=e[_])&128)&&!((l=e[_+1])&128)&&!((c=e[_+2])&128)&&!((h=e[_+3])&128);)t[n++]=o,t[n++]=l,t[n++]=c,t[n++]=h,_+=4;if(o=e[_++],o<128)t[n++]=o;else if((o&224)===192){if(_>=r)return this.interim[0]=o,n;if(l=e[_++],(l&192)!==128){_--;continue}if(p=(o&31)<<6|l&63,p<128){_--;continue}t[n++]=p}else if((o&240)===224){if(_>=r)return this.interim[0]=o,n;if(l=e[_++],(l&192)!==128){_--;continue}if(_>=r)return this.interim[0]=o,this.interim[1]=l,n;if(c=e[_++],(c&192)!==128){_--;continue}if(p=(o&15)<<12|(l&63)<<6|c&63,p<2048||p>=55296&&p<=57343||p===65279)continue;t[n++]=p}else if((o&248)===240){if(_>=r)return this.interim[0]=o,n;if(l=e[_++],(l&192)!==128){_--;continue}if(_>=r)return this.interim[0]=o,this.interim[1]=l,n;if(c=e[_++],(c&192)!==128){_--;continue}if(_>=r)return this.interim[0]=o,this.interim[1]=l,this.interim[2]=c,n;if(h=e[_++],(h&192)!==128){_--;continue}if(p=(o&7)<<18|(l&63)<<12|(c&63)<<6|h&63,p<65536||p>1114111)continue;t[n++]=p}}return n}},lv="",yi=" ",io=class cv{constructor(){this.fg=0,this.bg=0,this.extended=new qa}static toColorRGB(t){return[t>>>16&255,t>>>8&255,t&255]}static fromColorRGB(t){return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255}clone(){let t=new cv;return t.fg=this.fg,t.bg=this.bg,t.extended=this.extended.clone(),t}isInverse(){return this.fg&67108864}isBold(){return this.fg&134217728}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:this.fg&268435456}isBlink(){return this.fg&536870912}isInvisible(){return this.fg&1073741824}isItalic(){return this.bg&67108864}isDim(){return this.bg&134217728}isStrikethrough(){return this.fg&2147483648}isProtected(){return this.bg&536870912}isOverline(){return this.bg&1073741824}getFgColorMode(){return this.fg&50331648}getBgColorMode(){return this.bg&50331648}isFgRGB(){return(this.fg&50331648)===50331648}isBgRGB(){return(this.bg&50331648)===50331648}isFgPalette(){return(this.fg&50331648)===16777216||(this.fg&50331648)===33554432}isBgPalette(){return(this.bg&50331648)===16777216||(this.bg&50331648)===33554432}isFgDefault(){return(this.fg&50331648)===0}isBgDefault(){return(this.bg&50331648)===0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(this.fg&50331648){case 16777216:case 33554432:return this.fg&255;case 50331648:return this.fg&16777215;default:return-1}}getBgColor(){switch(this.bg&50331648){case 16777216:case 33554432:return this.bg&255;case 50331648:return this.bg&16777215;default:return-1}}hasExtendedAttrs(){return this.bg&268435456}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(this.bg&268435456&&~this.extended.underlineColor)switch(this.extended.underlineColor&50331648){case 16777216:case 33554432:return this.extended.underlineColor&255;case 50331648:return this.extended.underlineColor&16777215;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return this.bg&268435456&&~this.extended.underlineColor?this.extended.underlineColor&50331648:this.getFgColorMode()}isUnderlineColorRGB(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===50331648:this.isFgRGB()}isUnderlineColorPalette(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===16777216||(this.extended.underlineColor&50331648)===33554432:this.isFgPalette()}isUnderlineColorDefault(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===0:this.isFgDefault()}getUnderlineStyle(){return this.fg&268435456?this.bg&268435456?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}},qa=class uv{constructor(t=0,r=0){this._ext=0,this._urlId=0,this._ext=t,this._urlId=r}get ext(){return this._urlId?this._ext&-469762049|this.underlineStyle<<26:this._ext}set ext(t){this._ext=t}get underlineStyle(){return this._urlId?5:(this._ext&469762048)>>26}set underlineStyle(t){this._ext&=-469762049,this._ext|=t<<26&469762048}get underlineColor(){return this._ext&67108863}set underlineColor(t){this._ext&=-67108864,this._ext|=t&67108863}get urlId(){return this._urlId}set urlId(t){this._urlId=t}get underlineVariantOffset(){let t=(this._ext&3758096384)>>29;return t<0?t^4294967288:t}set underlineVariantOffset(t){this._ext&=536870911,this._ext|=t<<29&3758096384}clone(){return new uv(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}},ur=class hv extends io{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new qa,this.combinedData=""}static fromCharData(t){let r=new hv;return r.setFromCharData(t),r}isCombined(){return this.content&2097152}getWidth(){return this.content>>22}getChars(){return this.content&2097152?this.combinedData:this.content&2097151?vi(this.content&2097151):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):this.content&2097151}setFromCharData(t){this.fg=t[0],this.bg=0;let r=!1;if(t[1].length>2)r=!0;else if(t[1].length===2){let n=t[1].charCodeAt(0);if(55296<=n&&n<=56319){let o=t[1].charCodeAt(1);56320<=o&&o<=57343?this.content=(n-55296)*1024+o-56320+65536|t[2]<<22:r=!0}else r=!0}else this.content=t[1].charCodeAt(0)|t[2]<<22;r&&(this.combinedData=t[1],this.content=2097152|t[2]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},rg="di$target",Qu="di$dependencies",Su=new Map;function CC(e){return e[Qu]||[]}function _t(e){if(Su.has(e))return Su.get(e);let t=function(r,n,o){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");kC(t,r,o)};return t._id=e,Su.set(e,t),t}function kC(e,t,r){t[rg]===t?t[Qu].push({id:e,index:r}):(t[Qu]=[{id:e,index:r}],t[rg]=t)}var jt=_t("BufferService"),dv=_t("CoreMouseService"),Yi=_t("CoreService"),EC=_t("CharsetService"),Gh=_t("InstantiationService"),fv=_t("LogService"),Tt=_t("OptionsService"),pv=_t("OscLinkService"),PC=_t("UnicodeService"),so=_t("DecorationService"),Yu=class{constructor(e,t,r){this._bufferService=e,this._optionsService=t,this._oscLinkService=r}provideLinks(e,t){let r=this._bufferService.buffer.lines.get(e-1);if(!r){t(void 0);return}let n=[],o=this._optionsService.rawOptions.linkHandler,l=new ur,c=r.getTrimmedLength(),h=-1,p=-1,d=!1;for(let v=0;v<c;v++)if(!(p===-1&&!r.hasContent(v))){if(r.loadCell(v,l),l.hasExtendedAttrs()&&l.extended.urlId)if(p===-1){p=v,h=l.extended.urlId;continue}else d=l.extended.urlId!==h;else p!==-1&&(d=!0);if(d||p!==-1&&v===c-1){let _=this._oscLinkService.getLinkData(h)?.uri;if(_){let y={start:{x:p+1,y:e},end:{x:v+(!d&&v===c-1?1:0),y:e}},b=!1;if(!o?.allowNonHttpProtocols)try{let w=new URL(_);["http:","https:"].includes(w.protocol)||(b=!0)}catch{b=!0}b||n.push({text:_,range:y,activate:(w,x)=>o?o.activate(w,x,y):RC(w,x),hover:(w,x)=>o?.hover?.(w,x,y),leave:(w,x)=>o?.leave?.(w,x,y)})}d=!1,l.hasExtendedAttrs()&&l.extended.urlId?(p=v,h=l.extended.urlId):(p=-1,h=-1)}}t(n)}};Yu=Ge([ce(0,jt),ce(1,Tt),ce(2,pv)],Yu);function RC(e,t){if(confirm(`Do you want to navigate to ${t}?

WARNING: This link could potentially be dangerous`)){let r=window.open();if(r){try{r.opener=null}catch{}r.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}}var nl=_t("CharSizeService"),Qr=_t("CoreBrowserService"),Xh=_t("MouseService"),Yr=_t("RenderService"),NC=_t("SelectionService"),mv=_t("CharacterJoinerService"),Ts=_t("ThemeService"),gv=_t("LinkProviderService"),LC=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?ig.isErrorNoTelemetry(e)?new ig(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},DC=new LC;function Ma(e){MC(e)||DC.onUnexpectedError(e)}var Gu="Canceled";function MC(e){return e instanceof OC?!0:e instanceof Error&&e.name===Gu&&e.message===Gu}var OC=class extends Error{constructor(){super(Gu),this.name=this.message}};function jC(e){return new Error(`Illegal argument: ${e}`)}var ig=class Xu extends Error{constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof Xu)return t;let r=new Xu;return r.message=t.message,r.stack=t.stack,r}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}},Ju=class _v extends Error{constructor(t){super(t||"An unexpected bug occurred."),Object.setPrototypeOf(this,_v.prototype)}};function Qt(e,t=0){return e[e.length-(1+t)]}var TC;(e=>{function t(l){return l<0}e.isLessThan=t;function r(l){return l<=0}e.isLessThanOrEqual=r;function n(l){return l>0}e.isGreaterThan=n;function o(l){return l===0}e.isNeitherLessOrGreaterThan=o,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(TC||={});function BC(e,t){let r=this,n=!1,o;return function(){return n||(n=!0,t||(o=e.apply(r,arguments))),o}}var vv;(e=>{function t(F){return F&&typeof F=="object"&&typeof F[Symbol.iterator]=="function"}e.is=t;let r=Object.freeze([]);function n(){return r}e.empty=n;function*o(F){yield F}e.single=o;function l(F){return t(F)?F:o(F)}e.wrap=l;function c(F){return F||r}e.from=c;function*h(F){for(let H=F.length-1;H>=0;H--)yield F[H]}e.reverse=h;function p(F){return!F||F[Symbol.iterator]().next().done===!0}e.isEmpty=p;function d(F){return F[Symbol.iterator]().next().value}e.first=d;function v(F,H){let J=0;for(let Z of F)if(H(Z,J++))return!0;return!1}e.some=v;function _(F,H){for(let J of F)if(H(J))return J}e.find=_;function*y(F,H){for(let J of F)H(J)&&(yield J)}e.filter=y;function*b(F,H){let J=0;for(let Z of F)yield H(Z,J++)}e.map=b;function*w(F,H){let J=0;for(let Z of F)yield*H(Z,J++)}e.flatMap=w;function*x(...F){for(let H of F)yield*H}e.concat=x;function k(F,H,J){let Z=J;for(let le of F)Z=H(Z,le);return Z}e.reduce=k;function*D(F,H,J=F.length){for(H<0&&(H+=F.length),J<0?J+=F.length:J>F.length&&(J=F.length);H<J;H++)yield F[H]}e.slice=D;function j(F,H=Number.POSITIVE_INFINITY){let J=[];if(H===0)return[J,F];let Z=F[Symbol.iterator]();for(let le=0;le<H;le++){let ie=Z.next();if(ie.done)return[J,e.empty()];J.push(ie.value)}return[J,{[Symbol.iterator](){return Z}}]}e.consume=j;async function $(F){let H=[];for await(let J of F)H.push(J);return Promise.resolve(H)}e.asyncToArray=$})(vv||={});function Vi(e){if(vv.is(e)){let t=[];for(let r of e)if(r)try{r.dispose()}catch(n){t.push(n)}if(t.length===1)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function IC(...e){return He(()=>Vi(e))}function He(e){return{dispose:BC(()=>{e()})}}var yv=class Sv{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{Vi(this._toDispose)}finally{this._toDispose.clear()}}add(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?Sv.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(t),t}delete(t){if(t){if(t===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(t),t.dispose()}}deleteAndLeak(t){t&&this._toDispose.has(t)&&(this._toDispose.delete(t),void 0)}};yv.DISABLE_DISPOSED_WARNING=!1;var xi=yv,Ne=class{constructor(){this._store=new xi,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};Ne.None=Object.freeze({dispose(){}});var Ls=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){this._isDisposed||e===this._value||(this._value?.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}clearAndLeak(){let e=this._value;return this._value=void 0,e}},Wr=typeof window=="object"?window:globalThis,Zu=class eh{constructor(t){this.element=t,this.next=eh.Undefined,this.prev=eh.Undefined}};Zu.Undefined=new Zu(void 0);var Ve=Zu,sg=class{constructor(){this._first=Ve.Undefined,this._last=Ve.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Ve.Undefined}clear(){let e=this._first;for(;e!==Ve.Undefined;){let t=e.next;e.prev=Ve.Undefined,e.next=Ve.Undefined,e=t}this._first=Ve.Undefined,this._last=Ve.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){let r=new Ve(e);if(this._first===Ve.Undefined)this._first=r,this._last=r;else if(t){let o=this._last;this._last=r,r.prev=o,o.next=r}else{let o=this._first;this._first=r,r.next=o,o.prev=r}this._size+=1;let n=!1;return()=>{n||(n=!0,this._remove(r))}}shift(){if(this._first!==Ve.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Ve.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Ve.Undefined&&e.next!==Ve.Undefined){let t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Ve.Undefined&&e.next===Ve.Undefined?(this._first=Ve.Undefined,this._last=Ve.Undefined):e.next===Ve.Undefined?(this._last=this._last.prev,this._last.next=Ve.Undefined):e.prev===Ve.Undefined&&(this._first=this._first.next,this._first.prev=Ve.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Ve.Undefined;)yield e.element,e=e.next}},AC=globalThis.performance&&typeof globalThis.performance.now=="function",FC=class wv{static create(t){return new wv(t)}constructor(t){this._now=AC&&t===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}},St;(e=>{e.None=()=>Ne.None;function t(X,z){return _(X,()=>{},0,void 0,!0,void 0,z)}e.defer=t;function r(X){return(z,V=null,W)=>{let M=!1,U;return U=X(L=>{if(!M)return U?U.dispose():M=!0,z.call(V,L)},null,W),M&&U.dispose(),U}}e.once=r;function n(X,z,V){return d((W,M=null,U)=>X(L=>W.call(M,z(L)),null,U),V)}e.map=n;function o(X,z,V){return d((W,M=null,U)=>X(L=>{z(L),W.call(M,L)},null,U),V)}e.forEach=o;function l(X,z,V){return d((W,M=null,U)=>X(L=>z(L)&&W.call(M,L),null,U),V)}e.filter=l;function c(X){return X}e.signal=c;function h(...X){return(z,V=null,W)=>{let M=IC(...X.map(U=>U(L=>z.call(V,L))));return v(M,W)}}e.any=h;function p(X,z,V,W){let M=V;return n(X,U=>(M=z(M,U),M),W)}e.reduce=p;function d(X,z){let V,W={onWillAddFirstListener(){V=X(M.fire,M)},onDidRemoveLastListener(){V?.dispose()}},M=new oe(W);return z?.add(M),M.event}function v(X,z){return z instanceof Array?z.push(X):z&&z.add(X),X}function _(X,z,V=100,W=!1,M=!1,U,L){let G,q,P,B=0,Y,ae={leakWarningThreshold:U,onWillAddFirstListener(){G=X(se=>{B++,q=z(q,se),W&&!P&&(Se.fire(q),q=void 0),Y=()=>{let pe=q;q=void 0,P=void 0,(!W||B>1)&&Se.fire(pe),B=0},typeof V=="number"?(clearTimeout(P),P=setTimeout(Y,V)):P===void 0&&(P=0,queueMicrotask(Y))})},onWillRemoveListener(){M&&B>0&&Y?.()},onDidRemoveLastListener(){Y=void 0,G.dispose()}},Se=new oe(ae);return L?.add(Se),Se.event}e.debounce=_;function y(X,z=0,V){return e.debounce(X,(W,M)=>W?(W.push(M),W):[M],z,void 0,!0,void 0,V)}e.accumulate=y;function b(X,z=(W,M)=>W===M,V){let W=!0,M;return l(X,U=>{let L=W||!z(U,M);return W=!1,M=U,L},V)}e.latch=b;function w(X,z,V){return[e.filter(X,z,V),e.filter(X,W=>!z(W),V)]}e.split=w;function x(X,z=!1,V=[],W){let M=V.slice(),U=X(q=>{M?M.push(q):G.fire(q)});W&&W.add(U);let L=()=>{M?.forEach(q=>G.fire(q)),M=null},G=new oe({onWillAddFirstListener(){U||(U=X(q=>G.fire(q)),W&&W.add(U))},onDidAddFirstListener(){M&&(z?setTimeout(L):L())},onDidRemoveLastListener(){U&&U.dispose(),U=null}});return W&&W.add(G),G.event}e.buffer=x;function k(X,z){return(V,W,M)=>{let U=z(new j);return X(function(L){let G=U.evaluate(L);G!==D&&V.call(W,G)},void 0,M)}}e.chain=k;let D=Symbol("HaltChainable");class j{constructor(){this.steps=[]}map(z){return this.steps.push(z),this}forEach(z){return this.steps.push(V=>(z(V),V)),this}filter(z){return this.steps.push(V=>z(V)?V:D),this}reduce(z,V){let W=V;return this.steps.push(M=>(W=z(W,M),W)),this}latch(z=(V,W)=>V===W){let V=!0,W;return this.steps.push(M=>{let U=V||!z(M,W);return V=!1,W=M,U?M:D}),this}evaluate(z){for(let V of this.steps)if(z=V(z),z===D)break;return z}}function $(X,z,V=W=>W){let W=(...G)=>L.fire(V(...G)),M=()=>X.on(z,W),U=()=>X.removeListener(z,W),L=new oe({onWillAddFirstListener:M,onDidRemoveLastListener:U});return L.event}e.fromNodeEventEmitter=$;function F(X,z,V=W=>W){let W=(...G)=>L.fire(V(...G)),M=()=>X.addEventListener(z,W),U=()=>X.removeEventListener(z,W),L=new oe({onWillAddFirstListener:M,onDidRemoveLastListener:U});return L.event}e.fromDOMEventEmitter=F;function H(X){return new Promise(z=>r(X)(z))}e.toPromise=H;function J(X){let z=new oe;return X.then(V=>{z.fire(V)},()=>{z.fire(void 0)}).finally(()=>{z.dispose()}),z.event}e.fromPromise=J;function Z(X,z){return X(V=>z.fire(V))}e.forward=Z;function le(X,z,V){return z(V),X(W=>z(W))}e.runAndSubscribe=le;class ie{constructor(z,V){this._observable=z,this._counter=0,this._hasChanged=!1;let W={onWillAddFirstListener:()=>{z.addObserver(this)},onDidRemoveLastListener:()=>{z.removeObserver(this)}};this.emitter=new oe(W),V&&V.add(this.emitter)}beginUpdate(z){this._counter++}handlePossibleChange(z){}handleChange(z,V){this._hasChanged=!0}endUpdate(z){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function I(X,z){return new ie(X,z).emitter.event}e.fromObservable=I;function K(X){return(z,V,W)=>{let M=0,U=!1,L={beginUpdate(){M++},endUpdate(){M--,M===0&&(X.reportChanges(),U&&(U=!1,z.call(V)))},handlePossibleChange(){},handleChange(){U=!0}};X.addObserver(L),X.reportChanges();let G={dispose(){X.removeObserver(L)}};return W instanceof xi?W.add(G):Array.isArray(W)&&W.push(G),G}}e.fromObservableLight=K})(St||={});var th=class rh{constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${t}_${rh._idPool++}`,rh.all.add(this)}start(t){this._stopWatch=new FC,this.listenerCount=t}stop(){if(this._stopWatch){let t=this._stopWatch.elapsed();this.durations.push(t),this.elapsedOverall+=t,this.invocationCount+=1,this._stopWatch=void 0}}};th.all=new Set,th._idPool=0;var zC=th,$C=-1,xv=class bv{constructor(t,r,n=(bv._idPool++).toString(16).padStart(3,"0")){this._errorHandler=t,this.threshold=r,this.name=n,this._warnCountdown=0}dispose(){this._stacks?.clear()}check(t,r){let n=this.threshold;if(n<=0||r<n)return;this._stacks||(this._stacks=new Map);let o=this._stacks.get(t.value)||0;if(this._stacks.set(t.value,o+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let[l,c]=this.getMostFrequentStack(),h=`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${c}):`;console.warn(h),console.warn(l);let p=new UC(h,l);this._errorHandler(p)}return()=>{let l=this._stacks.get(t.value)||0;this._stacks.set(t.value,l-1)}}getMostFrequentStack(){if(!this._stacks)return;let t,r=0;for(let[n,o]of this._stacks)(!t||r<o)&&(t=[n,o],r=o);return t}};xv._idPool=1;var HC=xv,WC=class Cv{constructor(t){this.value=t}static create(){let t=new Error;return new Cv(t.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},UC=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},KC=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},VC=0,wu=class{constructor(e){this.value=e,this.id=VC++}},qC=2,QC,oe=class{constructor(t){this._size=0,this._options=t,this._leakageMon=this._options?.leakWarningThreshold?new HC(t?.onListenerError??Ma,this._options?.leakWarningThreshold??$C):void 0,this._perfMon=this._options?._profName?new zC(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){this._disposed||(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose())}get event(){return this._event??=(t,r,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let h=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(h);let p=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],d=new KC(`${h}. HINT: Stack shows most frequent listener (${p[1]}-times)`,p[0]);return(this._options?.onListenerError||Ma)(d),Ne.None}if(this._disposed)return Ne.None;r&&(t=t.bind(r));let o=new wu(t),l;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(o.stack=WC.create(),l=this._leakageMon.check(o.stack,this._size+1)),this._listeners?this._listeners instanceof wu?(this._deliveryQueue??=new YC,this._listeners=[this._listeners,o]):this._listeners.push(o):(this._options?.onWillAddFirstListener?.(this),this._listeners=o,this._options?.onDidAddFirstListener?.(this)),this._size++;let c=He(()=>{l?.(),this._removeListener(o)});return n instanceof xi?n.add(c):Array.isArray(n)&&n.push(c),c},this._event}_removeListener(t){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let r=this._listeners,n=r.indexOf(t);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,r[n]=void 0;let o=this._deliveryQueue.current===this;if(this._size*qC<=r.length){let l=0;for(let c=0;c<r.length;c++)r[c]?r[l++]=r[c]:o&&(this._deliveryQueue.end--,l<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=l}}_deliver(t,r){if(!t)return;let n=this._options?.onListenerError||Ma;if(!n){t.value(r);return}try{t.value(r)}catch(o){n(o)}}_deliverQueue(t){let r=t.current._listeners;for(;t.i<t.end;)this._deliver(r[t.i++],t.value);t.reset()}fire(t){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof wu)this._deliver(this._listeners,t);else{let r=this._deliveryQueue;r.enqueue(this,t,this._listeners.length),this._deliverQueue(r)}this._perfMon?.stop()}hasListeners(){return this._size>0}},YC=class{constructor(){this.i=-1,this.end=0}enqueue(e,t,r){this.i=0,this.end=r,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},ih=class{constructor(){this.mapWindowIdToZoomLevel=new Map,this._onDidChangeZoomLevel=new oe,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this.mapWindowIdToZoomFactor=new Map,this._onDidChangeFullscreen=new oe,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event,this.mapWindowIdToFullScreen=new Map}getZoomLevel(t){return this.mapWindowIdToZoomLevel.get(this.getWindowId(t))??0}setZoomLevel(t,r){if(this.getZoomLevel(r)===t)return;let n=this.getWindowId(r);this.mapWindowIdToZoomLevel.set(n,t),this._onDidChangeZoomLevel.fire(n)}getZoomFactor(t){return this.mapWindowIdToZoomFactor.get(this.getWindowId(t))??1}setZoomFactor(t,r){this.mapWindowIdToZoomFactor.set(this.getWindowId(r),t)}setFullscreen(t,r){if(this.isFullscreen(r)===t)return;let n=this.getWindowId(r);this.mapWindowIdToFullScreen.set(n,t),this._onDidChangeFullscreen.fire(n)}isFullscreen(t){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(t))}getWindowId(t){return t.vscodeWindowId}};ih.INSTANCE=new ih;var Jh=ih;function GC(e,t,r){typeof t=="string"&&(t=e.matchMedia(t)),t.addEventListener("change",r)}Jh.INSTANCE.onDidChangeZoomLevel;function XC(e){return Jh.INSTANCE.getZoomFactor(e)}Jh.INSTANCE.onDidChangeFullscreen;var Bs=typeof navigator=="object"?navigator.userAgent:"",sh=Bs.indexOf("Firefox")>=0,JC=Bs.indexOf("AppleWebKit")>=0,Zh=Bs.indexOf("Chrome")>=0,ZC=!Zh&&Bs.indexOf("Safari")>=0;Bs.indexOf("Electron/")>=0;Bs.indexOf("Android")>=0;var xu=!1;if(typeof Wr.matchMedia=="function"){let e=Wr.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),t=Wr.matchMedia("(display-mode: fullscreen)");xu=e.matches,GC(Wr,e,({matches:r})=>{xu&&t.matches||(xu=r)})}var Ps="en",nh=!1,oh=!1,Oa=!1,kv=!1,xa,ja=Ps,ng=Ps,ek,Hr,Hi=globalThis,Gt;typeof Hi.vscode<"u"&&typeof Hi.vscode.process<"u"?Gt=Hi.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Gt=process);var tk=typeof Gt?.versions?.electron=="string",rk=tk&&Gt?.type==="renderer";if(typeof Gt=="object"){nh=Gt.platform==="win32",oh=Gt.platform==="darwin",Oa=Gt.platform==="linux",Oa&&Gt.env.SNAP&&Gt.env.SNAP_REVISION,Gt.env.CI||Gt.env.BUILD_ARTIFACTSTAGINGDIRECTORY,xa=Ps,ja=Ps;let e=Gt.env.VSCODE_NLS_CONFIG;if(e)try{let t=JSON.parse(e);xa=t.userLocale,ng=t.osLocale,ja=t.resolvedLanguage||Ps,ek=t.languagePack?.translationsConfigFile}catch{}kv=!0}else typeof navigator=="object"&&!rk?(Hr=navigator.userAgent,nh=Hr.indexOf("Windows")>=0,oh=Hr.indexOf("Macintosh")>=0,(Hr.indexOf("Macintosh")>=0||Hr.indexOf("iPad")>=0||Hr.indexOf("iPhone")>=0)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Oa=Hr.indexOf("Linux")>=0,Hr?.indexOf("Mobi")>=0,ja=globalThis._VSCODE_NLS_LANGUAGE||Ps,xa=navigator.language.toLowerCase(),ng=xa):console.error("Unable to resolve platform.");var Ev=nh,Dr=oh,ik=Oa,og=kv,Mr=Hr,mi=ja,sk;(e=>{function t(){return mi}e.value=t;function r(){return mi.length===2?mi==="en":mi.length>=3?mi[0]==="e"&&mi[1]==="n"&&mi[2]==="-":!1}e.isDefaultVariant=r;function n(){return mi==="en"}e.isDefault=n})(sk||={});var nk=typeof Hi.postMessage=="function"&&!Hi.importScripts;(()=>{if(nk){let e=[];Hi.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,o=e.length;n<o;n++){let l=e[n];if(l.id===r.data.vscodeScheduleAsyncWork){e.splice(n,1),l.callback();return}}});let t=0;return r=>{let n=++t;e.push({id:n,callback:r}),Hi.postMessage({vscodeScheduleAsyncWork:n},"*")}}return e=>setTimeout(e)})();var ok=!!(Mr&&Mr.indexOf("Chrome")>=0);Mr&&Mr.indexOf("Firefox")>=0;!ok&&Mr&&Mr.indexOf("Safari")>=0;Mr&&Mr.indexOf("Edg/")>=0;Mr&&Mr.indexOf("Android")>=0;var xs=typeof navigator=="object"?navigator:{};og||document.queryCommandSupported&&document.queryCommandSupported("copy")||xs&&xs.clipboard&&xs.clipboard.writeText,og||xs&&xs.clipboard&&xs.clipboard.readText;var ed=class{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}},bu=new ed,ag=new ed,lg=new ed,ak=new Array(230),Pv;(e=>{function t(h){return bu.keyCodeToStr(h)}e.toString=t;function r(h){return bu.strToKeyCode(h)}e.fromString=r;function n(h){return ag.keyCodeToStr(h)}e.toUserSettingsUS=n;function o(h){return lg.keyCodeToStr(h)}e.toUserSettingsGeneral=o;function l(h){return ag.strToKeyCode(h)||lg.strToKeyCode(h)}e.fromUserSettings=l;function c(h){if(h>=98&&h<=113)return null;switch(h){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return bu.keyCodeToStr(h)}e.toElectronAccelerator=c})(Pv||={});var lk=class Rv{constructor(t,r,n,o,l){this.ctrlKey=t,this.shiftKey=r,this.altKey=n,this.metaKey=o,this.keyCode=l}equals(t){return t instanceof Rv&&this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode}getHashCode(){let t=this.ctrlKey?"1":"0",r=this.shiftKey?"1":"0",n=this.altKey?"1":"0",o=this.metaKey?"1":"0";return`K${t}${r}${n}${o}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new ck([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},ck=class{constructor(e){if(e.length===0)throw jC("chords");this.chords=e}getHashCode(){let e="";for(let t=0,r=this.chords.length;t<r;t++)t!==0&&(e+=";"),e+=this.chords[t].getHashCode();return e}equals(e){if(e===null||this.chords.length!==e.chords.length)return!1;for(let t=0;t<this.chords.length;t++)if(!this.chords[t].equals(e.chords[t]))return!1;return!0}};function uk(e){if(e.charCode){let r=String.fromCharCode(e.charCode).toUpperCase();return Pv.fromString(r)}let t=e.keyCode;if(t===3)return 7;if(sh)switch(t){case 59:return 85;case 60:if(ik)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(Dr)return 57;break}else if(JC&&(Dr&&t===93||!Dr&&t===92))return 57;return ak[t]||0}var hk=Dr?256:2048,dk=512,fk=1024,pk=Dr?2048:256,cg=class{constructor(e){this._standardKeyboardEventBrand=!0;let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=t.getModifierState?.("AltGraph"),this.keyCode=uk(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=hk),this.altKey&&(t|=dk),this.shiftKey&&(t|=fk),this.metaKey&&(t|=pk),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new lk(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}},ug=new WeakMap;function mk(e){if(!e.parent||e.parent===e)return null;try{let t=e.location,r=e.parent.location;if(t.origin!=="null"&&r.origin!=="null"&&t.origin!==r.origin)return null}catch{return null}return e.parent}var gk=class{static getSameOriginWindowChain(e){let t=ug.get(e);if(!t){t=[],ug.set(e,t);let r=e,n;do n=mk(r),n?t.push({window:new WeakRef(r),iframeElement:r.frameElement||null}):t.push({window:new WeakRef(r),iframeElement:null}),r=n;while(r)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let r=0,n=0,o=this.getSameOriginWindowChain(e);for(let l of o){let c=l.window.deref();if(r+=c?.scrollY??0,n+=c?.scrollX??0,c===t||!l.iframeElement)break;let h=l.iframeElement.getBoundingClientRect();r+=h.top,n+=h.left}return{top:r,left:n}}},ba=class{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let r=gk.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=r.left,this.posy-=r.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}},hg=class{constructor(e,t=0,r=0){this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=r,this.deltaX=t;let n=!1;if(Zh){let o=navigator.userAgent.match(/Chrome\/(\d+)/);n=(o?parseInt(o[1]):123)<=122}if(e){let o=e,l=e,c=e.view?.devicePixelRatio||1;if(typeof o.wheelDeltaY<"u")n?this.deltaY=o.wheelDeltaY/(120*c):this.deltaY=o.wheelDeltaY/120;else if(typeof l.VERTICAL_AXIS<"u"&&l.axis===l.VERTICAL_AXIS)this.deltaY=-l.detail/3;else if(e.type==="wheel"){let h=e;h.deltaMode===h.DOM_DELTA_LINE?sh&&!Dr?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof o.wheelDeltaX<"u")ZC&&Ev?this.deltaX=-(o.wheelDeltaX/120):n?this.deltaX=o.wheelDeltaX/(120*c):this.deltaX=o.wheelDeltaX/120;else if(typeof l.HORIZONTAL_AXIS<"u"&&l.axis===l.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){let h=e;h.deltaMode===h.DOM_DELTA_LINE?sh&&!Dr?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(n?this.deltaY=e.wheelDelta/(120*c):this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}},Nv=Object.freeze(function(e,t){let r=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(r)}}}),_k;(e=>{function t(r){return r===e.None||r===e.Cancelled||r instanceof vk?!0:!r||typeof r!="object"?!1:typeof r.isCancellationRequested=="boolean"&&typeof r.onCancellationRequested=="function"}e.isCancellationToken=t,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:St.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Nv})})(_k||={});var vk=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Nv:(this._emitter||(this._emitter=new oe),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},td=class{constructor(e,t){this._isDisposed=!1,this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new Ju("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new Ju("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}},yk=class{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(e,t,r=globalThis){if(this.isDisposed)throw new Ju("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let n=r.setInterval(()=>{e()},t);this.disposable=He(()=>{r.clearInterval(n),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},Sk;(e=>{async function t(n){let o,l=await Promise.all(n.map(c=>c.then(h=>h,h=>{o||(o=h)})));if(typeof o<"u")throw o;return l}e.settled=t;function r(n){return new Promise(async(o,l)=>{try{await n(o,l)}catch(c){l(c)}})}e.withAsyncBody=r})(Sk||={});var dg=class or{static fromArray(t){return new or(r=>{r.emitMany(t)})}static fromPromise(t){return new or(async r=>{r.emitMany(await t)})}static fromPromises(t){return new or(async r=>{await Promise.all(t.map(async n=>r.emitOne(await n)))})}static merge(t){return new or(async r=>{await Promise.all(t.map(async n=>{for await(let o of n)r.emitOne(o)}))})}constructor(t,r){this._state=0,this._results=[],this._error=null,this._onReturn=r,this._onStateChanged=new oe,queueMicrotask(async()=>{let n={emitOne:o=>this.emitOne(o),emitMany:o=>this.emitMany(o),reject:o=>this.reject(o)};try{await Promise.resolve(t(n)),this.resolve()}catch(o){this.reject(o)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(t<this._results.length)return{done:!1,value:this._results[t++]};if(this._state===1)return{done:!0,value:void 0};await St.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(t,r){return new or(async n=>{for await(let o of t)n.emitOne(r(o))})}map(t){return or.map(this,t)}static filter(t,r){return new or(async n=>{for await(let o of t)r(o)&&n.emitOne(o)})}filter(t){return or.filter(this,t)}static coalesce(t){return or.filter(t,r=>!!r)}coalesce(){return or.coalesce(this)}static async toPromise(t){let r=[];for await(let n of t)r.push(n);return r}toPromise(){return or.toPromise(this)}emitOne(t){this._state===0&&(this._results.push(t),this._onStateChanged.fire())}emitMany(t){this._state===0&&(this._results=this._results.concat(t),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(t){this._state===0&&(this._state=2,this._error=t,this._onStateChanged.fire())}};dg.EMPTY=dg.fromArray([]);var{getWindow:Lr,getWindowId:wk,onDidRegisterWindow:xk}=(function(){let e=new Map,t={window:Wr,disposables:new xi};e.set(Wr.vscodeWindowId,t);let r=new oe,n=new oe,o=new oe;function l(c,h){return(typeof c=="number"?e.get(c):void 0)??(h?t:void 0)}return{onDidRegisterWindow:r.event,onWillUnregisterWindow:o.event,onDidUnregisterWindow:n.event,registerWindow(c){if(e.has(c.vscodeWindowId))return Ne.None;let h=new xi,p={window:c,disposables:h.add(new xi)};return e.set(c.vscodeWindowId,p),h.add(He(()=>{e.delete(c.vscodeWindowId),n.fire(c)})),h.add(xe(c,ft.BEFORE_UNLOAD,()=>{o.fire(c)})),r.fire(p),h},getWindows(){return e.values()},getWindowsCount(){return e.size},getWindowId(c){return c.vscodeWindowId},hasWindow(c){return e.has(c)},getWindowById:l,getWindow(c){let h=c;if(h?.ownerDocument?.defaultView)return h.ownerDocument.defaultView.window;let p=c;return p?.view?p.view.window:Wr},getDocument(c){return Lr(c).document}}})(),bk=class{constructor(e,t,r,n){this._node=e,this._type=t,this._handler=r,this._options=n||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function xe(e,t,r,n){return new bk(e,t,r,n)}var fg=function(e,t,r,n){return xe(e,t,r,n)},rd,Ck=class extends yk{constructor(e){super(),this.defaultTarget=e&&Lr(e)}cancelAndSet(e,t,r){return super.cancelAndSet(e,t,r??this.defaultTarget)}},pg=class{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Ma(e)}}static sort(e,t){return t.priority-e.priority}};(function(){let e=new Map,t=new Map,r=new Map,n=new Map,o=l=>{r.set(l,!1);let c=e.get(l)??[];for(t.set(l,c),e.set(l,[]),n.set(l,!0);c.length>0;)c.sort(pg.sort),c.shift().execute();n.set(l,!1)};rd=(l,c,h=0)=>{let p=wk(l),d=new pg(c,h),v=e.get(p);return v||(v=[],e.set(p,v)),v.push(d),r.get(p)||(r.set(p,!0),l.requestAnimationFrame(()=>o(p))),d}})();function kk(e){let t=e.getBoundingClientRect(),r=Lr(e);return{left:t.left+r.scrollX,top:t.top+r.scrollY,width:t.width,height:t.height}}var ft={CLICK:"click",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",KEY_DOWN:"keydown",KEY_UP:"keyup",BEFORE_UNLOAD:"beforeunload",CHANGE:"change",FOCUS:"focus",BLUR:"blur",INPUT:"input"},Ek=class{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingTop="",this._paddingLeft="",this._paddingBottom="",this._paddingRight="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){let t=Ht(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){let t=Ht(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){let t=Ht(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){let t=Ht(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){let t=Ht(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){let t=Ht(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){let t=Ht(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingTop(e){let t=Ht(e);this._paddingTop!==t&&(this._paddingTop=t,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(e){let t=Ht(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(e){let t=Ht(e);this._paddingBottom!==t&&(this._paddingBottom=t,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(e){let t=Ht(e);this._paddingRight!==t&&(this._paddingRight=t,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){let t=Ht(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){let t=Ht(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){let t=Ht(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}};function Ht(e){return typeof e=="number"?`${e}px`:e}function Hn(e){return new Ek(e)}var Lv=class{constructor(){this._hooks=new xi,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let r=this._onStopCallback;this._onStopCallback=null,e&&r&&r(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,r,n,o){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=n,this._onStopCallback=o;let l=e;try{e.setPointerCapture(t),this._hooks.add(He(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{l=Lr(e)}this._hooks.add(xe(l,ft.POINTER_MOVE,c=>{if(c.buttons!==r){this.stopMonitoring(!0);return}c.preventDefault(),this._pointerMoveCallback(c)})),this._hooks.add(xe(l,ft.POINTER_UP,c=>this.stopMonitoring(!0)))}};function Pk(e,t,r){let n=null,o=null;if(typeof r.value=="function"?(n="value",o=r.value,o.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof r.get=="function"&&(n="get",o=r.get),!o)throw new Error("not supported");let l=`$memoize$${t}`;r[n]=function(...c){return this.hasOwnProperty(l)||Object.defineProperty(this,l,{configurable:!1,enumerable:!1,writable:!1,value:o.apply(this,c)}),this[l]}}var Rr;(e=>(e.Tap="-xterm-gesturetap",e.Change="-xterm-gesturechange",e.Start="-xterm-gesturestart",e.End="-xterm-gesturesend",e.Contextmenu="-xterm-gesturecontextmenu"))(Rr||={});var On=class Et extends Ne{constructor(){super(),this.dispatched=!1,this.targets=new sg,this.ignoreTargets=new sg,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(St.runAndSubscribe(xk,({window:t,disposables:r})=>{r.add(xe(t.document,"touchstart",n=>this.onTouchStart(n),{passive:!1})),r.add(xe(t.document,"touchend",n=>this.onTouchEnd(t,n))),r.add(xe(t.document,"touchmove",n=>this.onTouchMove(n),{passive:!1}))},{window:Wr,disposables:this._store}))}static addTarget(t){if(!Et.isTouchDevice())return Ne.None;Et.INSTANCE||(Et.INSTANCE=new Et);let r=Et.INSTANCE.targets.push(t);return He(r)}static ignoreTarget(t){if(!Et.isTouchDevice())return Ne.None;Et.INSTANCE||(Et.INSTANCE=new Et);let r=Et.INSTANCE.ignoreTargets.push(t);return He(r)}static isTouchDevice(){return"ontouchstart"in Wr||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(t){let r=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,o=t.targetTouches.length;n<o;n++){let l=t.targetTouches.item(n);this.activeTouches[l.identifier]={id:l.identifier,initialTarget:l.target,initialTimeStamp:r,initialPageX:l.pageX,initialPageY:l.pageY,rollingTimestamps:[r],rollingPageX:[l.pageX],rollingPageY:[l.pageY]};let c=this.newGestureEvent(Rr.Start,l.target);c.pageX=l.pageX,c.pageY=l.pageY,this.dispatchEvent(c)}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}onTouchEnd(t,r){let n=Date.now(),o=Object.keys(this.activeTouches).length;for(let l=0,c=r.changedTouches.length;l<c;l++){let h=r.changedTouches.item(l);if(!this.activeTouches.hasOwnProperty(String(h.identifier))){console.warn("move of an UNKNOWN touch",h);continue}let p=this.activeTouches[h.identifier],d=Date.now()-p.initialTimeStamp;if(d<Et.HOLD_DELAY&&Math.abs(p.initialPageX-Qt(p.rollingPageX))<30&&Math.abs(p.initialPageY-Qt(p.rollingPageY))<30){let v=this.newGestureEvent(Rr.Tap,p.initialTarget);v.pageX=Qt(p.rollingPageX),v.pageY=Qt(p.rollingPageY),this.dispatchEvent(v)}else if(d>=Et.HOLD_DELAY&&Math.abs(p.initialPageX-Qt(p.rollingPageX))<30&&Math.abs(p.initialPageY-Qt(p.rollingPageY))<30){let v=this.newGestureEvent(Rr.Contextmenu,p.initialTarget);v.pageX=Qt(p.rollingPageX),v.pageY=Qt(p.rollingPageY),this.dispatchEvent(v)}else if(o===1){let v=Qt(p.rollingPageX),_=Qt(p.rollingPageY),y=Qt(p.rollingTimestamps)-p.rollingTimestamps[0],b=v-p.rollingPageX[0],w=_-p.rollingPageY[0],x=[...this.targets].filter(k=>p.initialTarget instanceof Node&&k.contains(p.initialTarget));this.inertia(t,x,n,Math.abs(b)/y,b>0?1:-1,v,Math.abs(w)/y,w>0?1:-1,_)}this.dispatchEvent(this.newGestureEvent(Rr.End,p.initialTarget)),delete this.activeTouches[h.identifier]}this.dispatched&&(r.preventDefault(),r.stopPropagation(),this.dispatched=!1)}newGestureEvent(t,r){let n=document.createEvent("CustomEvent");return n.initEvent(t,!1,!0),n.initialTarget=r,n.tapCount=0,n}dispatchEvent(t){if(t.type===Rr.Tap){let r=new Date().getTime(),n=0;r-this._lastSetTapCountTime>Et.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=r,t.tapCount=n}else(t.type===Rr.Change||t.type===Rr.Contextmenu)&&(this._lastSetTapCountTime=0);if(t.initialTarget instanceof Node){for(let n of this.ignoreTargets)if(n.contains(t.initialTarget))return;let r=[];for(let n of this.targets)if(n.contains(t.initialTarget)){let o=0,l=t.initialTarget;for(;l&&l!==n;)o++,l=l.parentElement;r.push([o,n])}r.sort((n,o)=>n[0]-o[0]);for(let[n,o]of r)o.dispatchEvent(t),this.dispatched=!0}}inertia(t,r,n,o,l,c,h,p,d){this.handle=rd(t,()=>{let v=Date.now(),_=v-n,y=0,b=0,w=!0;o+=Et.SCROLL_FRICTION*_,h+=Et.SCROLL_FRICTION*_,o>0&&(w=!1,y=l*o*_),h>0&&(w=!1,b=p*h*_);let x=this.newGestureEvent(Rr.Change);x.translationX=y,x.translationY=b,r.forEach(k=>k.dispatchEvent(x)),w||this.inertia(t,r,v,o,l,c+y,h,p,d+b)})}onTouchMove(t){let r=Date.now();for(let n=0,o=t.changedTouches.length;n<o;n++){let l=t.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(l.identifier))){console.warn("end of an UNKNOWN touch",l);continue}let c=this.activeTouches[l.identifier],h=this.newGestureEvent(Rr.Change,c.initialTarget);h.translationX=l.pageX-Qt(c.rollingPageX),h.translationY=l.pageY-Qt(c.rollingPageY),h.pageX=l.pageX,h.pageY=l.pageY,this.dispatchEvent(h),c.rollingPageX.length>3&&(c.rollingPageX.shift(),c.rollingPageY.shift(),c.rollingTimestamps.shift()),c.rollingPageX.push(l.pageX),c.rollingPageY.push(l.pageY),c.rollingTimestamps.push(r)}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}};On.SCROLL_FRICTION=-.005,On.HOLD_DELAY=700,On.CLEAR_TAP_COUNT_TIME=400,Ge([Pk],On,"isTouchDevice",1);var Rk=On,id=class extends Ne{onclick(e,t){this._register(xe(e,ft.CLICK,r=>t(new ba(Lr(e),r))))}onmousedown(e,t){this._register(xe(e,ft.MOUSE_DOWN,r=>t(new ba(Lr(e),r))))}onmouseover(e,t){this._register(xe(e,ft.MOUSE_OVER,r=>t(new ba(Lr(e),r))))}onmouseleave(e,t){this._register(xe(e,ft.MOUSE_LEAVE,r=>t(new ba(Lr(e),r))))}onkeydown(e,t){this._register(xe(e,ft.KEY_DOWN,r=>t(new cg(r))))}onkeyup(e,t){this._register(xe(e,ft.KEY_UP,r=>t(new cg(r))))}oninput(e,t){this._register(xe(e,ft.INPUT,t))}onblur(e,t){this._register(xe(e,ft.BLUR,t))}onfocus(e,t){this._register(xe(e,ft.FOCUS,t))}onchange(e,t){this._register(xe(e,ft.CHANGE,t))}ignoreGesture(e){return Rk.ignoreTarget(e)}},mg=11,Nk=class extends id{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.style.position="absolute",this.domNode.style.width=mg+"px",this.domNode.style.height=mg+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new Lv),this._register(fg(this.bgDomNode,ft.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(fg(this.domNode,ft.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new Ck),this._pointerdownScheduleRepeatTimer=this._register(new td)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,Lr(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}},Lk=class ah{constructor(t,r,n,o,l,c,h){this._forceIntegerValues=t,this._scrollStateBrand=void 0,this._forceIntegerValues&&(r=r|0,n=n|0,o=o|0,l=l|0,c=c|0,h=h|0),this.rawScrollLeft=o,this.rawScrollTop=h,r<0&&(r=0),o+r>n&&(o=n-r),o<0&&(o=0),l<0&&(l=0),h+l>c&&(h=c-l),h<0&&(h=0),this.width=r,this.scrollWidth=n,this.scrollLeft=o,this.height=l,this.scrollHeight=c,this.scrollTop=h}equals(t){return this.rawScrollLeft===t.rawScrollLeft&&this.rawScrollTop===t.rawScrollTop&&this.width===t.width&&this.scrollWidth===t.scrollWidth&&this.scrollLeft===t.scrollLeft&&this.height===t.height&&this.scrollHeight===t.scrollHeight&&this.scrollTop===t.scrollTop}withScrollDimensions(t,r){return new ah(this._forceIntegerValues,typeof t.width<"u"?t.width:this.width,typeof t.scrollWidth<"u"?t.scrollWidth:this.scrollWidth,r?this.rawScrollLeft:this.scrollLeft,typeof t.height<"u"?t.height:this.height,typeof t.scrollHeight<"u"?t.scrollHeight:this.scrollHeight,r?this.rawScrollTop:this.scrollTop)}withScrollPosition(t){return new ah(this._forceIntegerValues,this.width,this.scrollWidth,typeof t.scrollLeft<"u"?t.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof t.scrollTop<"u"?t.scrollTop:this.rawScrollTop)}createScrollEvent(t,r){let n=this.width!==t.width,o=this.scrollWidth!==t.scrollWidth,l=this.scrollLeft!==t.scrollLeft,c=this.height!==t.height,h=this.scrollHeight!==t.scrollHeight,p=this.scrollTop!==t.scrollTop;return{inSmoothScrolling:r,oldWidth:t.width,oldScrollWidth:t.scrollWidth,oldScrollLeft:t.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:t.height,oldScrollHeight:t.scrollHeight,oldScrollTop:t.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:o,scrollLeftChanged:l,heightChanged:c,scrollHeightChanged:h,scrollTopChanged:p}}},Dk=class extends Ne{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new oe),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new Lk(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){let r=this._state.withScrollDimensions(e,t);this._setState(r,!!this._smoothScrolling),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){let t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};let r=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===r.scrollLeft&&this._smoothScrolling.to.scrollTop===r.scrollTop)return;let n;t?n=new _g(this._smoothScrolling.from,r,this._smoothScrolling.startTime,this._smoothScrolling.duration):n=this._smoothScrolling.combine(this._state,r,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=n}else{let r=this._state.withScrollPosition(e);this._smoothScrolling=_g.start(this._state,r,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){let r=this._state;r.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(r,t)))}},gg=class{constructor(e,t,r){this.scrollLeft=e,this.scrollTop=t,this.isDone=r}};function Cu(e,t){let r=t-e;return function(n){return e+r*jk(n)}}function Mk(e,t,r){return function(n){return n<r?e(n/r):t((n-r)/(1-r))}}var _g=class lh{constructor(t,r,n,o){this.from=t,this.to=r,this.duration=o,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(t,r,n){if(Math.abs(t-r)>2.5*n){let o,l;return t<r?(o=t+.75*n,l=r-.75*n):(o=t-.75*n,l=r+.75*n),Mk(Cu(t,o),Cu(l,r),.33)}return Cu(t,r)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(t){this.to=t.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(t){let r=(t-this.startTime)/this.duration;if(r<1){let n=this.scrollLeft(r),o=this.scrollTop(r);return new gg(n,o,!1)}return new gg(this.to.scrollLeft,this.to.scrollTop,!0)}combine(t,r,n){return lh.start(t,r,n)}static start(t,r,n){n=n+10;let o=Date.now()-10;return new lh(t,r,o,n)}};function Ok(e){return Math.pow(e,3)}function jk(e){return 1-Ok(1-e)}var Tk=class extends Ne{constructor(e,t,r){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=r,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new td)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode?.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(e?" fade":"")))}},Bk=140,Dv=class extends id{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new Tk(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new Lv),this._shouldRender=!0,this.domNode=Hn(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(xe(this.domNode.domNode,ft.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){let t=this._register(new Nk(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,r,n){this.slider=Hn(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof r=="number"&&this.slider.setWidth(r),typeof n=="number"&&this.slider.setHeight(n),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(xe(this.slider.domNode,ft.POINTER_DOWN,o=>{o.button===0&&(o.preventDefault(),this._sliderPointerDown(o))})),this.onclick(this.slider.domNode,o=>{o.leftButton&&o.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){let t=this.domNode.domNode.getClientRects()[0].top,r=t+this._scrollbarState.getSliderPosition(),n=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),o=this._sliderPointerPosition(e);r<=o&&o<=n?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,r;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,r=e.offsetY;else{let o=kk(this.domNode.domNode);t=e.pageX-o.left,r=e.pageY-o.top}let n=this._pointerDownRelativePosition(t,r);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(n):this._scrollbarState.getDesiredScrollPositionFromOffset(n)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=this._sliderPointerPosition(e),r=this._sliderOrthogonalPointerPosition(e),n=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>{let l=this._sliderOrthogonalPointerPosition(o),c=Math.abs(l-r);if(Ev&&c>Bk){this._setDesiredScrollPositionNow(n.getScrollPosition());return}let h=this._sliderPointerPosition(o)-t;this._setDesiredScrollPositionNow(n.getDesiredScrollPositionFromDelta(h))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){let t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}},Mv=class ch{constructor(t,r,n,o,l,c){this._scrollbarSize=Math.round(r),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(t),this._visibleSize=o,this._scrollSize=l,this._scrollPosition=c,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new ch(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(t){let r=Math.round(t);return this._visibleSize!==r?(this._visibleSize=r,this._refreshComputedValues(),!0):!1}setScrollSize(t){let r=Math.round(t);return this._scrollSize!==r?(this._scrollSize=r,this._refreshComputedValues(),!0):!1}setScrollPosition(t){let r=Math.round(t);return this._scrollPosition!==r?(this._scrollPosition=r,this._refreshComputedValues(),!0):!1}setScrollbarSize(t){this._scrollbarSize=Math.round(t)}setOppositeScrollbarSize(t){this._oppositeScrollbarSize=Math.round(t)}static _computeValues(t,r,n,o,l){let c=Math.max(0,n-t),h=Math.max(0,c-2*r),p=o>0&&o>n;if(!p)return{computedAvailableSize:Math.round(c),computedIsNeeded:p,computedSliderSize:Math.round(h),computedSliderRatio:0,computedSliderPosition:0};let d=Math.round(Math.max(20,Math.floor(n*h/o))),v=(h-d)/(o-n),_=l*v;return{computedAvailableSize:Math.round(c),computedIsNeeded:p,computedSliderSize:Math.round(d),computedSliderRatio:v,computedSliderPosition:Math.round(_)}}_refreshComputedValues(){let t=ch._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=t.computedAvailableSize,this._computedIsNeeded=t.computedIsNeeded,this._computedSliderSize=t.computedSliderSize,this._computedSliderRatio=t.computedSliderRatio,this._computedSliderPosition=t.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(t){if(!this._computedIsNeeded)return 0;let r=t-this._arrowSize-this._computedSliderSize/2;return Math.round(r/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(t){if(!this._computedIsNeeded)return 0;let r=t-this._arrowSize,n=this._scrollPosition;return r<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(t){if(!this._computedIsNeeded)return 0;let r=this._computedSliderPosition+t;return Math.round(r/this._computedSliderRatio)}},Ik=class extends Dv{constructor(e,t,r){let n=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:r,scrollbarState:new Mv(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,n.width,n.scrollWidth,o.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}},Ak=class extends Dv{constructor(e,t,r){let n=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:r,scrollbarState:new Mv(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,n.height,n.scrollHeight,o.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}},Fk=500,vg=50,zk=class{constructor(e,t,r){this.timestamp=e,this.deltaX=t,this.deltaY=r,this.score=0}},uh=class{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let t=1,r=0,n=1,o=this._rear;do{let l=o===this._front?t:Math.pow(2,-n);if(t-=l,r+=this._memory[o].score*l,o===this._front)break;o=(this._capacity+o-1)%this._capacity,n++}while(!0);return r<=.5}acceptStandardWheelEvent(t){if(Zh){let r=Lr(t.browserEvent),n=XC(r);this.accept(Date.now(),t.deltaX*n,t.deltaY*n)}else this.accept(Date.now(),t.deltaX,t.deltaY)}accept(t,r,n){let o=null,l=new zk(t,r,n);this._front===-1&&this._rear===-1?(this._memory[0]=l,this._front=0,this._rear=0):(o=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=l),l.score=this._computeScore(l,o)}_computeScore(t,r){if(Math.abs(t.deltaX)>0&&Math.abs(t.deltaY)>0)return 1;let n=.5;if((!this._isAlmostInt(t.deltaX)||!this._isAlmostInt(t.deltaY))&&(n+=.25),r){let o=Math.abs(t.deltaX),l=Math.abs(t.deltaY),c=Math.abs(r.deltaX),h=Math.abs(r.deltaY),p=Math.max(Math.min(o,c),1),d=Math.max(Math.min(l,h),1),v=Math.max(o,c),_=Math.max(l,h);v%p===0&&_%d===0&&(n-=.5)}return Math.min(Math.max(n,0),1)}_isAlmostInt(t){return Math.abs(Math.round(t)-t)<.01}};uh.INSTANCE=new uh;var $k=uh,Hk=class extends id{constructor(e,t,r){super(),this._onScroll=this._register(new oe),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new oe),this.onWillScroll=this._onWillScroll.event,this._options=Uk(t),this._scrollable=r,this._register(this._scrollable.onScroll(o=>{this._onWillScroll.fire(o),this._onDidScroll(o),this._onScroll.fire(o)}));let n={onMouseWheel:o=>this._onMouseWheel(o),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new Ak(this._scrollable,this._options,n)),this._horizontalScrollbar=this._register(new Ik(this._scrollable,this._options,n)),this._domNode=document.createElement("div"),this._domNode.className="xterm-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Hn(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Hn(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Hn(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,o=>this._onMouseOver(o)),this.onmouseleave(this._listenOnDomNode,o=>this._onMouseLeave(o)),this._hideTimeout=this._register(new td),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=Vi(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Dr&&(this._options.className+=" mac"),this._domNode.className="xterm-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(e){this._revealOnScroll=e}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new hg(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=Vi(this._mouseWheelToDispose),e)){let t=r=>{this._onMouseWheel(new hg(r))};this._mouseWheelToDispose.push(xe(this._listenOnDomNode,ft.MOUSE_WHEEL,t,{passive:!1}))}}_onMouseWheel(e){if(e.browserEvent?.defaultPrevented)return;let t=$k.INSTANCE;t.acceptStandardWheelEvent(e);let r=!1;if(e.deltaY||e.deltaX){let o=e.deltaY*this._options.mouseWheelScrollSensitivity,l=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&l+o===0?l=o=0:Math.abs(o)>=Math.abs(l)?l=0:o=0),this._options.flipAxes&&([o,l]=[l,o]);let c=!Dr&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||c)&&!l&&(l=o,o=0),e.browserEvent&&e.browserEvent.altKey&&(l=l*this._options.fastScrollSensitivity,o=o*this._options.fastScrollSensitivity);let h=this._scrollable.getFutureScrollPosition(),p={};if(o){let d=vg*o,v=h.scrollTop-(d<0?Math.floor(d):Math.ceil(d));this._verticalScrollbar.writeScrollPosition(p,v)}if(l){let d=vg*l,v=h.scrollLeft-(d<0?Math.floor(d):Math.ceil(d));this._horizontalScrollbar.writeScrollPosition(p,v)}p=this._scrollable.validateScrollPosition(p),(h.scrollLeft!==p.scrollLeft||h.scrollTop!==p.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(p):this._scrollable.setScrollPositionNow(p),r=!0)}let n=r;!n&&this._options.alwaysConsumeMouseWheel&&(n=!0),!n&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(n=!0),n&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,r=e.scrollLeft>0,n=r?" left":"",o=t?" top":"",l=r||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${n}`),this._topShadowDomNode.setClassName(`shadow${o}`),this._topLeftShadowDomNode.setClassName(`shadow${l}${o}${n}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),Fk)}},Wk=class extends Hk{constructor(e,t,r){super(e,t,r)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}};function Uk(e){let t={lazyRender:typeof e.lazyRender<"u"?e.lazyRender:!1,className:typeof e.className<"u"?e.className:"",useShadows:typeof e.useShadows<"u"?e.useShadows:!0,handleMouseWheel:typeof e.handleMouseWheel<"u"?e.handleMouseWheel:!0,flipAxes:typeof e.flipAxes<"u"?e.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof e.consumeMouseWheelIfScrollbarIsNeeded<"u"?e.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof e.alwaysConsumeMouseWheel<"u"?e.alwaysConsumeMouseWheel:!1,scrollYToX:typeof e.scrollYToX<"u"?e.scrollYToX:!1,mouseWheelScrollSensitivity:typeof e.mouseWheelScrollSensitivity<"u"?e.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof e.fastScrollSensitivity<"u"?e.fastScrollSensitivity:5,scrollPredominantAxis:typeof e.scrollPredominantAxis<"u"?e.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof e.mouseWheelSmoothScroll<"u"?e.mouseWheelSmoothScroll:!0,arrowSize:typeof e.arrowSize<"u"?e.arrowSize:11,listenOnDomNode:typeof e.listenOnDomNode<"u"?e.listenOnDomNode:null,horizontal:typeof e.horizontal<"u"?e.horizontal:1,horizontalScrollbarSize:typeof e.horizontalScrollbarSize<"u"?e.horizontalScrollbarSize:10,horizontalSliderSize:typeof e.horizontalSliderSize<"u"?e.horizontalSliderSize:0,horizontalHasArrows:typeof e.horizontalHasArrows<"u"?e.horizontalHasArrows:!1,vertical:typeof e.vertical<"u"?e.vertical:1,verticalScrollbarSize:typeof e.verticalScrollbarSize<"u"?e.verticalScrollbarSize:10,verticalHasArrows:typeof e.verticalHasArrows<"u"?e.verticalHasArrows:!1,verticalSliderSize:typeof e.verticalSliderSize<"u"?e.verticalSliderSize:0,scrollByPage:typeof e.scrollByPage<"u"?e.scrollByPage:!1};return t.horizontalSliderSize=typeof e.horizontalSliderSize<"u"?e.horizontalSliderSize:t.horizontalScrollbarSize,t.verticalSliderSize=typeof e.verticalSliderSize<"u"?e.verticalSliderSize:t.verticalScrollbarSize,Dr&&(t.className+=" mac"),t}var hh=class extends Ne{constructor(e,t,r,n,o,l,c,h){super(),this._bufferService=r,this._optionsService=c,this._renderService=h,this._onRequestScrollLines=this._register(new oe),this.onRequestScrollLines=this._onRequestScrollLines.event,this._isSyncing=!1,this._isHandlingScroll=!1,this._suppressOnScrollHandler=!1;let p=this._register(new Dk({forceIntegerValues:!1,smoothScrollDuration:this._optionsService.rawOptions.smoothScrollDuration,scheduleAtNextAnimationFrame:d=>rd(n.window,d)}));this._register(this._optionsService.onSpecificOptionChange("smoothScrollDuration",()=>{p.setSmoothScrollDuration(this._optionsService.rawOptions.smoothScrollDuration)})),this._scrollableElement=this._register(new Wk(t,{vertical:1,horizontal:2,useShadows:!1,mouseWheelSmoothScroll:!0,...this._getChangeOptions()},p)),this._register(this._optionsService.onMultipleOptionChange(["scrollSensitivity","fastScrollSensitivity","overviewRuler"],()=>this._scrollableElement.updateOptions(this._getChangeOptions()))),this._register(o.onProtocolChange(d=>{this._scrollableElement.updateOptions({handleMouseWheel:!(d&16)})})),this._scrollableElement.setScrollDimensions({height:0,scrollHeight:0}),this._register(St.runAndSubscribe(l.onChangeColors,()=>{this._scrollableElement.getDomNode().style.backgroundColor=l.colors.background.css})),e.appendChild(this._scrollableElement.getDomNode()),this._register(He(()=>this._scrollableElement.getDomNode().remove())),this._styleElement=n.mainDocument.createElement("style"),t.appendChild(this._styleElement),this._register(He(()=>this._styleElement.remove())),this._register(St.runAndSubscribe(l.onChangeColors,()=>{this._styleElement.textContent=[".xterm .xterm-scrollable-element > .scrollbar > .slider {",`  background: ${l.colors.scrollbarSliderBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider:hover {",`  background: ${l.colors.scrollbarSliderHoverBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider.active {",`  background: ${l.colors.scrollbarSliderActiveBackground.css};`,"}"].join(`
`)})),this._register(this._bufferService.onResize(()=>this.queueSync())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._latestYDisp=void 0,this.queueSync()})),this._register(this._bufferService.onScroll(()=>this._sync())),this._register(this._scrollableElement.onScroll(d=>this._handleScroll(d)))}scrollLines(e){let t=this._scrollableElement.getScrollPosition();this._scrollableElement.setScrollPosition({reuseAnimation:!0,scrollTop:t.scrollTop+e*this._renderService.dimensions.css.cell.height})}scrollToLine(e,t){t&&(this._latestYDisp=e),this._scrollableElement.setScrollPosition({reuseAnimation:!t,scrollTop:e*this._renderService.dimensions.css.cell.height})}_getChangeOptions(){return{mouseWheelScrollSensitivity:this._optionsService.rawOptions.scrollSensitivity,fastScrollSensitivity:this._optionsService.rawOptions.fastScrollSensitivity,verticalScrollbarSize:this._optionsService.rawOptions.overviewRuler?.width||14}}queueSync(e){e!==void 0&&(this._latestYDisp=e),this._queuedAnimationFrame===void 0&&(this._queuedAnimationFrame=this._renderService.addRefreshCallback(()=>{this._queuedAnimationFrame=void 0,this._sync(this._latestYDisp)}))}_sync(e=this._bufferService.buffer.ydisp){!this._renderService||this._isSyncing||(this._isSyncing=!0,this._suppressOnScrollHandler=!0,this._scrollableElement.setScrollDimensions({height:this._renderService.dimensions.css.canvas.height,scrollHeight:this._renderService.dimensions.css.cell.height*this._bufferService.buffer.lines.length}),this._suppressOnScrollHandler=!1,e!==this._latestYDisp&&this._scrollableElement.setScrollPosition({scrollTop:e*this._renderService.dimensions.css.cell.height}),this._isSyncing=!1)}_handleScroll(e){if(!this._renderService||this._isHandlingScroll||this._suppressOnScrollHandler)return;this._isHandlingScroll=!0;let t=Math.round(e.scrollTop/this._renderService.dimensions.css.cell.height),r=t-this._bufferService.buffer.ydisp;r!==0&&(this._latestYDisp=t,this._onRequestScrollLines.fire(r)),this._isHandlingScroll=!1}};hh=Ge([ce(2,jt),ce(3,Qr),ce(4,dv),ce(5,Ts),ce(6,Tt),ce(7,Yr)],hh);var dh=class extends Ne{constructor(e,t,r,n,o){super(),this._screenElement=e,this._bufferService=t,this._coreBrowserService=r,this._decorationService=n,this._renderService=o,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this._register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this._register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this._register(this._decorationService.onDecorationRemoved(l=>this._removeDecoration(l))),this._register(He(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let e of this._decorationService.decorations)this._renderDecoration(e);this._dimensionsChanged=!1}_renderDecoration(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)}_createElement(e){let t=this._coreBrowserService.mainDocument.createElement("div");t.classList.add("xterm-decoration"),t.classList.toggle("xterm-decoration-top-layer",e?.options?.layer==="top"),t.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,t.style.height=`${(e.options.height||1)*this._renderService.dimensions.css.cell.height}px`,t.style.top=`${(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height}px`,t.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let r=e.options.x??0;return r&&r>this._bufferService.cols&&(t.style.display="none"),this._refreshXPosition(e,t),t}_refreshStyle(e){let t=e.marker.line-this._bufferService.buffers.active.ydisp;if(t<0||t>=this._bufferService.rows)e.element&&(e.element.style.display="none",e.onRenderEmitter.fire(e.element));else{let r=this._decorationElements.get(e);r||(r=this._createElement(e),e.element=r,this._decorationElements.set(e,r),this._container.appendChild(r),e.onDispose(()=>{this._decorationElements.delete(e),r.remove()})),r.style.display=this._altBufferIsActive?"none":"block",this._altBufferIsActive||(r.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,r.style.height=`${(e.options.height||1)*this._renderService.dimensions.css.cell.height}px`,r.style.top=`${t*this._renderService.dimensions.css.cell.height}px`,r.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`),e.onRenderEmitter.fire(r)}}_refreshXPosition(e,t=e.element){if(!t)return;let r=e.options.x??0;(e.options.anchor||"left")==="right"?t.style.right=r?`${r*this._renderService.dimensions.css.cell.width}px`:"":t.style.left=r?`${r*this._renderService.dimensions.css.cell.width}px`:""}_removeDecoration(e){this._decorationElements.get(e)?.remove(),this._decorationElements.delete(e),e.dispose()}};dh=Ge([ce(1,jt),ce(2,Qr),ce(3,so),ce(4,Yr)],dh);var Kk=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(e){if(e.options.overviewRulerOptions){for(let t of this._zones)if(t.color===e.options.overviewRulerOptions.color&&t.position===e.options.overviewRulerOptions.position){if(this._lineIntersectsZone(t,e.marker.line))return;if(this._lineAdjacentToZone(t,e.marker.line,e.options.overviewRulerOptions.position)){this._addLineToZone(t,e.marker.line);return}}if(this._zonePoolIndex<this._zonePool.length){this._zonePool[this._zonePoolIndex].color=e.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=e.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=e.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=e.marker.line,this._zones.push(this._zonePool[this._zonePoolIndex++]);return}this._zones.push({color:e.options.overviewRulerOptions.color,position:e.options.overviewRulerOptions.position,startBufferLine:e.marker.line,endBufferLine:e.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(e){this._linePadding=e}_lineIntersectsZone(e,t){return t>=e.startBufferLine&&t<=e.endBufferLine}_lineAdjacentToZone(e,t,r){return t>=e.startBufferLine-this._linePadding[r||"full"]&&t<=e.endBufferLine+this._linePadding[r||"full"]}_addLineToZone(e,t){e.startBufferLine=Math.min(e.startBufferLine,t),e.endBufferLine=Math.max(e.endBufferLine,t)}},kr={full:0,left:0,center:0,right:0},gi={full:0,left:0,center:0,right:0},En={full:0,left:0,center:0,right:0},Qa=class extends Ne{constructor(e,t,r,n,o,l,c,h){super(),this._viewportElement=e,this._screenElement=t,this._bufferService=r,this._decorationService=n,this._renderService=o,this._optionsService=l,this._themeService=c,this._coreBrowserService=h,this._colorZoneStore=new Kk,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement),this._register(He(()=>this._canvas?.remove()));let p=this._canvas.getContext("2d");if(p)this._ctx=p;else throw new Error("Ctx cannot be null");this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this._register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0))),this._register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this._register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})),this._register(this._renderService.onRender(()=>{(!this._containerHeight||this._containerHeight!==this._screenElement.clientHeight)&&(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._register(this._optionsService.onSpecificOptionChange("overviewRuler",()=>this._queueRefresh(!0))),this._register(this._themeService.onChangeColors(()=>this._queueRefresh())),this._queueRefresh(!0)}get _width(){return this._optionsService.options.overviewRuler?.width||0}_refreshDrawConstants(){let e=Math.floor((this._canvas.width-1)/3),t=Math.ceil((this._canvas.width-1)/3);gi.full=this._canvas.width,gi.left=e,gi.center=t,gi.right=e,this._refreshDrawHeightConstants(),En.full=1,En.left=1,En.center=1+gi.left,En.right=1+gi.left+gi.center}_refreshDrawHeightConstants(){kr.full=Math.round(2*this._coreBrowserService.dpr);let e=this._canvas.height/this._bufferService.buffer.lines.length,t=Math.round(Math.max(Math.min(e,12),6)*this._coreBrowserService.dpr);kr.left=t,kr.center=t,kr.right=t}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*kr.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*kr.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*kr.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*kr.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let t of this._decorationService.decorations)this._colorZoneStore.addDecoration(t);this._ctx.lineWidth=1,this._renderRulerOutline();let e=this._colorZoneStore.zones;for(let t of e)t.position!=="full"&&this._renderColorZone(t);for(let t of e)t.position==="full"&&this._renderColorZone(t);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderRulerOutline(){this._ctx.fillStyle=this._themeService.colors.overviewRulerBorder.css,this._ctx.fillRect(0,0,1,this._canvas.height),this._optionsService.rawOptions.overviewRuler.showTopBorder&&this._ctx.fillRect(1,0,this._canvas.width-1,1),this._optionsService.rawOptions.overviewRuler.showBottomBorder&&this._ctx.fillRect(1,this._canvas.height-1,this._canvas.width-1,this._canvas.height)}_renderColorZone(e){this._ctx.fillStyle=e.color,this._ctx.fillRect(En[e.position||"full"],Math.round((this._canvas.height-1)*(e.startBufferLine/this._bufferService.buffers.active.lines.length)-kr[e.position||"full"]/2),gi[e.position||"full"],Math.round((this._canvas.height-1)*((e.endBufferLine-e.startBufferLine)/this._bufferService.buffers.active.lines.length)+kr[e.position||"full"]))}_queueRefresh(e,t){this._shouldUpdateDimensions=e||this._shouldUpdateDimensions,this._shouldUpdateAnchor=t||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};Qa=Ge([ce(2,jt),ce(3,so),ce(4,Yr),ce(5,Tt),ce(6,Ts),ce(7,Qr)],Qa);var Q;(e=>(e.NUL="\0",e.SOH="",e.STX="",e.ETX="",e.EOT="",e.ENQ="",e.ACK="",e.BEL="\x07",e.BS="\b",e.HT="	",e.LF=`
`,e.VT="\v",e.FF="\f",e.CR="\r",e.SO="",e.SI="",e.DLE="",e.DC1="",e.DC2="",e.DC3="",e.DC4="",e.NAK="",e.SYN="",e.ETB="",e.CAN="",e.EM="",e.SUB="",e.ESC="\x1B",e.FS="",e.GS="",e.RS="",e.US="",e.SP=" ",e.DEL=""))(Q||={});var Ta;(e=>(e.PAD="",e.HOP="",e.BPH="",e.NBH="",e.IND="",e.NEL="",e.SSA="",e.ESA="",e.HTS="",e.HTJ="",e.VTS="",e.PLD="",e.PLU="",e.RI="",e.SS2="",e.SS3="",e.DCS="",e.PU1="",e.PU2="",e.STS="",e.CCH="",e.MW="",e.SPA="",e.EPA="",e.SOS="",e.SGCI="",e.SCI="",e.CSI="",e.ST="",e.OSC="",e.PM="",e.APC=""))(Ta||={});var Ov;(e=>e.ST=`${Q.ESC}\\`)(Ov||={});var fh=class{constructor(e,t,r,n,o,l){this._textarea=e,this._compositionView=t,this._bufferService=r,this._optionsService=n,this._coreService=o,this._renderService=l,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(e){this._compositionView.textContent=e.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(e){if(this._isComposing||this._isSendingComposition){if(e.keyCode===20||e.keyCode===229||e.keyCode===16||e.keyCode===17||e.keyCode===18)return!1;this._finalizeComposition(!1)}return e.keyCode===229?(this._handleAnyTextareaChanges(),!1):!0}_finalizeComposition(e){if(this._compositionView.classList.remove("active"),this._isComposing=!1,e){let t={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){this._isSendingComposition=!1;let r;t.start+=this._dataAlreadySent.length,this._isComposing?r=this._textarea.value.substring(t.start,this._compositionPosition.start):r=this._textarea.value.substring(t.start),r.length>0&&this._coreService.triggerDataEvent(r,!0)}},0)}else{this._isSendingComposition=!1;let t=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(t,!0)}}_handleAnyTextareaChanges(){let e=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let t=this._textarea.value,r=t.replace(e,"");this._dataAlreadySent=r,t.length>e.length?this._coreService.triggerDataEvent(r,!0):t.length<e.length?this._coreService.triggerDataEvent(`${Q.DEL}`,!0):t.length===e.length&&t!==e&&this._coreService.triggerDataEvent(t,!0)}},0)}updateCompositionElements(e){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let t=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),r=this._renderService.dimensions.css.cell.height,n=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,o=t*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=o+"px",this._compositionView.style.top=n+"px",this._compositionView.style.height=r+"px",this._compositionView.style.lineHeight=r+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let l=this._compositionView.getBoundingClientRect();this._textarea.style.left=o+"px",this._textarea.style.top=n+"px",this._textarea.style.width=Math.max(l.width,1)+"px",this._textarea.style.height=Math.max(l.height,1)+"px",this._textarea.style.lineHeight=l.height+"px"}e||setTimeout(()=>this.updateCompositionElements(!0),0)}}};fh=Ge([ce(2,jt),ce(3,Tt),ce(4,Yi),ce(5,Yr)],fh);var pt=0,mt=0,gt=0,Ye=0,yg={css:"#00000000",rgba:0},rt;(e=>{function t(o,l,c,h){return h!==void 0?`#${Bi(o)}${Bi(l)}${Bi(c)}${Bi(h)}`:`#${Bi(o)}${Bi(l)}${Bi(c)}`}e.toCss=t;function r(o,l,c,h=255){return(o<<24|l<<16|c<<8|h)>>>0}e.toRgba=r;function n(o,l,c,h){return{css:e.toCss(o,l,c,h),rgba:e.toRgba(o,l,c,h)}}e.toColor=n})(rt||={});var Fe;(e=>{function t(p,d){if(Ye=(d.rgba&255)/255,Ye===1)return{css:d.css,rgba:d.rgba};let v=d.rgba>>24&255,_=d.rgba>>16&255,y=d.rgba>>8&255,b=p.rgba>>24&255,w=p.rgba>>16&255,x=p.rgba>>8&255;pt=b+Math.round((v-b)*Ye),mt=w+Math.round((_-w)*Ye),gt=x+Math.round((y-x)*Ye);let k=rt.toCss(pt,mt,gt),D=rt.toRgba(pt,mt,gt);return{css:k,rgba:D}}e.blend=t;function r(p){return(p.rgba&255)===255}e.isOpaque=r;function n(p,d,v){let _=Ba.ensureContrastRatio(p.rgba,d.rgba,v);if(_)return rt.toColor(_>>24&255,_>>16&255,_>>8&255)}e.ensureContrastRatio=n;function o(p){let d=(p.rgba|255)>>>0;return[pt,mt,gt]=Ba.toChannels(d),{css:rt.toCss(pt,mt,gt),rgba:d}}e.opaque=o;function l(p,d){return Ye=Math.round(d*255),[pt,mt,gt]=Ba.toChannels(p.rgba),{css:rt.toCss(pt,mt,gt,Ye),rgba:rt.toRgba(pt,mt,gt,Ye)}}e.opacity=l;function c(p,d){return Ye=p.rgba&255,l(p,Ye*d/255)}e.multiplyOpacity=c;function h(p){return[p.rgba>>24&255,p.rgba>>16&255,p.rgba>>8&255]}e.toColorRGB=h})(Fe||={});var qe;(e=>{let t,r;try{let o=document.createElement("canvas");o.width=1,o.height=1;let l=o.getContext("2d",{willReadFrequently:!0});l&&(t=l,t.globalCompositeOperation="copy",r=t.createLinearGradient(0,0,1,1))}catch{}function n(o){if(o.match(/#[\da-f]{3,8}/i))switch(o.length){case 4:return pt=parseInt(o.slice(1,2).repeat(2),16),mt=parseInt(o.slice(2,3).repeat(2),16),gt=parseInt(o.slice(3,4).repeat(2),16),rt.toColor(pt,mt,gt);case 5:return pt=parseInt(o.slice(1,2).repeat(2),16),mt=parseInt(o.slice(2,3).repeat(2),16),gt=parseInt(o.slice(3,4).repeat(2),16),Ye=parseInt(o.slice(4,5).repeat(2),16),rt.toColor(pt,mt,gt,Ye);case 7:return{css:o,rgba:(parseInt(o.slice(1),16)<<8|255)>>>0};case 9:return{css:o,rgba:parseInt(o.slice(1),16)>>>0}}let l=o.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(l)return pt=parseInt(l[1]),mt=parseInt(l[2]),gt=parseInt(l[3]),Ye=Math.round((l[5]===void 0?1:parseFloat(l[5]))*255),rt.toColor(pt,mt,gt,Ye);if(!t||!r)throw new Error("css.toColor: Unsupported css format");if(t.fillStyle=r,t.fillStyle=o,typeof t.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(t.fillRect(0,0,1,1),[pt,mt,gt,Ye]=t.getImageData(0,0,1,1).data,Ye!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:rt.toRgba(pt,mt,gt,Ye),css:o}}e.toColor=n})(qe||={});var Lt;(e=>{function t(n){return r(n>>16&255,n>>8&255,n&255)}e.relativeLuminance=t;function r(n,o,l){let c=n/255,h=o/255,p=l/255,d=c<=.03928?c/12.92:Math.pow((c+.055)/1.055,2.4),v=h<=.03928?h/12.92:Math.pow((h+.055)/1.055,2.4),_=p<=.03928?p/12.92:Math.pow((p+.055)/1.055,2.4);return d*.2126+v*.7152+_*.0722}e.relativeLuminance2=r})(Lt||={});var Ba;(e=>{function t(c,h){if(Ye=(h&255)/255,Ye===1)return h;let p=h>>24&255,d=h>>16&255,v=h>>8&255,_=c>>24&255,y=c>>16&255,b=c>>8&255;return pt=_+Math.round((p-_)*Ye),mt=y+Math.round((d-y)*Ye),gt=b+Math.round((v-b)*Ye),rt.toRgba(pt,mt,gt)}e.blend=t;function r(c,h,p){let d=Lt.relativeLuminance(c>>8),v=Lt.relativeLuminance(h>>8);if($r(d,v)<p){if(v<d){let b=n(c,h,p),w=$r(d,Lt.relativeLuminance(b>>8));if(w<p){let x=o(c,h,p),k=$r(d,Lt.relativeLuminance(x>>8));return w>k?b:x}return b}let _=o(c,h,p),y=$r(d,Lt.relativeLuminance(_>>8));if(y<p){let b=n(c,h,p),w=$r(d,Lt.relativeLuminance(b>>8));return y>w?_:b}return _}}e.ensureContrastRatio=r;function n(c,h,p){let d=c>>24&255,v=c>>16&255,_=c>>8&255,y=h>>24&255,b=h>>16&255,w=h>>8&255,x=$r(Lt.relativeLuminance2(y,b,w),Lt.relativeLuminance2(d,v,_));for(;x<p&&(y>0||b>0||w>0);)y-=Math.max(0,Math.ceil(y*.1)),b-=Math.max(0,Math.ceil(b*.1)),w-=Math.max(0,Math.ceil(w*.1)),x=$r(Lt.relativeLuminance2(y,b,w),Lt.relativeLuminance2(d,v,_));return(y<<24|b<<16|w<<8|255)>>>0}e.reduceLuminance=n;function o(c,h,p){let d=c>>24&255,v=c>>16&255,_=c>>8&255,y=h>>24&255,b=h>>16&255,w=h>>8&255,x=$r(Lt.relativeLuminance2(y,b,w),Lt.relativeLuminance2(d,v,_));for(;x<p&&(y<255||b<255||w<255);)y=Math.min(255,y+Math.ceil((255-y)*.1)),b=Math.min(255,b+Math.ceil((255-b)*.1)),w=Math.min(255,w+Math.ceil((255-w)*.1)),x=$r(Lt.relativeLuminance2(y,b,w),Lt.relativeLuminance2(d,v,_));return(y<<24|b<<16|w<<8|255)>>>0}e.increaseLuminance=o;function l(c){return[c>>24&255,c>>16&255,c>>8&255,c&255]}e.toChannels=l})(Ba||={});function Bi(e){let t=e.toString(16);return t.length<2?"0"+t:t}function $r(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}var Vk=class extends io{constructor(e,t,r){super(),this.content=0,this.combinedData="",this.fg=e.fg,this.bg=e.bg,this.combinedData=t,this._width=r}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},Ya=class{constructor(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new ur}register(e){let t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id}deregister(e){for(let t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1}getJoinedCharacters(e){if(this._characterJoiners.length===0)return[];let t=this._bufferService.buffer.lines.get(e);if(!t||t.length===0)return[];let r=[],n=t.translateToString(!0),o=0,l=0,c=0,h=t.getFg(0),p=t.getBg(0);for(let d=0;d<t.getTrimmedLength();d++)if(t.loadCell(d,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==h||this._workCell.bg!==p){if(d-o>1){let v=this._getJoinedRanges(n,c,l,t,o);for(let _=0;_<v.length;_++)r.push(v[_])}o=d,c=l,h=this._workCell.fg,p=this._workCell.bg}l+=this._workCell.getChars().length||yi.length}if(this._bufferService.cols-o>1){let d=this._getJoinedRanges(n,c,l,t,o);for(let v=0;v<d.length;v++)r.push(d[v])}return r}_getJoinedRanges(e,t,r,n,o){let l=e.substring(t,r),c=[];try{c=this._characterJoiners[0].handler(l)}catch(h){console.error(h)}for(let h=1;h<this._characterJoiners.length;h++)try{let p=this._characterJoiners[h].handler(l);for(let d=0;d<p.length;d++)Ya._mergeRanges(c,p[d])}catch(p){console.error(p)}return this._stringRangesToCellRanges(c,n,o),c}_stringRangesToCellRanges(e,t,r){let n=0,o=!1,l=0,c=e[n];if(c){for(let h=r;h<this._bufferService.cols;h++){let p=t.getWidth(h),d=t.getString(h).length||yi.length;if(p!==0){if(!o&&c[0]<=l&&(c[0]=h,o=!0),c[1]<=l){if(c[1]=h,c=e[++n],!c)break;c[0]<=l?(c[0]=h,o=!0):o=!1}l+=d}}c&&(c[1]=this._bufferService.cols)}}static _mergeRanges(e,t){let r=!1;for(let n=0;n<e.length;n++){let o=e[n];if(r){if(t[1]<=o[0])return e[n-1][1]=t[1],e;if(t[1]<=o[1])return e[n-1][1]=Math.max(t[1],o[1]),e.splice(n,1),e;e.splice(n,1),n--}else{if(t[1]<=o[0])return e.splice(n,0,t),e;if(t[1]<=o[1])return o[0]=Math.min(t[0],o[0]),e;t[0]<o[1]&&(o[0]=Math.min(t[0],o[0]),r=!0);continue}}return r?e[e.length-1][1]=t[1]:e.push(t),e}};Ya=Ge([ce(0,jt)],Ya);function qk(e){return 57508<=e&&e<=57558}function Qk(e){return 9472<=e&&e<=9631}function Yk(e){return qk(e)||Qk(e)}function Gk(){return{css:{canvas:Ca(),cell:Ca()},device:{canvas:Ca(),cell:Ca(),char:{width:0,height:0,left:0,top:0}}}}function Ca(){return{width:0,height:0}}var ph=class{constructor(e,t,r,n,o,l,c){this._document=e,this._characterJoinerService=t,this._optionsService=r,this._coreBrowserService=n,this._coreService=o,this._decorationService=l,this._themeService=c,this._workCell=new ur,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(e,t,r){this._selectionStart=e,this._selectionEnd=t,this._columnSelectMode=r}createRow(e,t,r,n,o,l,c,h,p,d,v){let _=[],y=this._characterJoinerService.getJoinedCharacters(t),b=this._themeService.colors,w=e.getNoBgTrimmedLength();r&&w<l+1&&(w=l+1);let x,k=0,D="",j=0,$=0,F=0,H=0,J=!1,Z=0,le=!1,ie=0,I=0,K=[],X=d!==-1&&v!==-1;for(let z=0;z<w;z++){e.loadCell(z,this._workCell);let V=this._workCell.getWidth();if(V===0)continue;let W=!1,M=z>=I,U=z,L=this._workCell;if(y.length>0&&z===y[0][0]&&M){let Ee=y.shift(),We=this._isCellInSelection(Ee[0],t);for(j=Ee[0]+1;j<Ee[1];j++)M&&=We===this._isCellInSelection(j,t);M&&=!r||l<Ee[0]||l>=Ee[1],M?(W=!0,L=new Vk(this._workCell,e.translateToString(!0,Ee[0],Ee[1]),Ee[1]-Ee[0]),U=Ee[1]-1,V=L.getWidth()):I=Ee[1]}let G=this._isCellInSelection(z,t),q=r&&z===l,P=X&&z>=d&&z<=v,B=!1;this._decorationService.forEachDecorationAtCell(z,t,void 0,Ee=>{B=!0});let Y=L.getChars()||yi;if(Y===" "&&(L.isUnderline()||L.isOverline())&&(Y=""),ie=V*h-p.get(Y,L.isBold(),L.isItalic()),!x)x=this._document.createElement("span");else if(k&&(G&&le||!G&&!le&&L.bg===$)&&(G&&le&&b.selectionForeground||L.fg===F)&&L.extended.ext===H&&P===J&&ie===Z&&!q&&!W&&!B&&M){L.isInvisible()?D+=yi:D+=Y,k++;continue}else k&&(x.textContent=D),x=this._document.createElement("span"),k=0,D="";if($=L.bg,F=L.fg,H=L.extended.ext,J=P,Z=ie,le=G,W&&l>=z&&l<=U&&(l=z),!this._coreService.isCursorHidden&&q&&this._coreService.isCursorInitialized){if(K.push("xterm-cursor"),this._coreBrowserService.isFocused)c&&K.push("xterm-cursor-blink"),K.push(n==="bar"?"xterm-cursor-bar":n==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(o)switch(o){case"outline":K.push("xterm-cursor-outline");break;case"block":K.push("xterm-cursor-block");break;case"bar":K.push("xterm-cursor-bar");break;case"underline":K.push("xterm-cursor-underline");break}}if(L.isBold()&&K.push("xterm-bold"),L.isItalic()&&K.push("xterm-italic"),L.isDim()&&K.push("xterm-dim"),L.isInvisible()?D=yi:D=L.getChars()||yi,L.isUnderline()&&(K.push(`xterm-underline-${L.extended.underlineStyle}`),D===" "&&(D=""),!L.isUnderlineColorDefault()))if(L.isUnderlineColorRGB())x.style.textDecorationColor=`rgb(${io.toColorRGB(L.getUnderlineColor()).join(",")})`;else{let Ee=L.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&L.isBold()&&Ee<8&&(Ee+=8),x.style.textDecorationColor=b.ansi[Ee].css}L.isOverline()&&(K.push("xterm-overline"),D===" "&&(D="")),L.isStrikethrough()&&K.push("xterm-strikethrough"),P&&(x.style.textDecoration="underline");let ae=L.getFgColor(),Se=L.getFgColorMode(),se=L.getBgColor(),pe=L.getBgColorMode(),ge=!!L.isInverse();if(ge){let Ee=ae;ae=se,se=Ee;let We=Se;Se=pe,pe=We}let _e,be,Pt=!1;this._decorationService.forEachDecorationAtCell(z,t,void 0,Ee=>{Ee.options.layer!=="top"&&Pt||(Ee.backgroundColorRGB&&(pe=50331648,se=Ee.backgroundColorRGB.rgba>>8&16777215,_e=Ee.backgroundColorRGB),Ee.foregroundColorRGB&&(Se=50331648,ae=Ee.foregroundColorRGB.rgba>>8&16777215,be=Ee.foregroundColorRGB),Pt=Ee.options.layer==="top")}),!Pt&&G&&(_e=this._coreBrowserService.isFocused?b.selectionBackgroundOpaque:b.selectionInactiveBackgroundOpaque,se=_e.rgba>>8&16777215,pe=50331648,Pt=!0,b.selectionForeground&&(Se=50331648,ae=b.selectionForeground.rgba>>8&16777215,be=b.selectionForeground)),Pt&&K.push("xterm-decoration-top");let wt;switch(pe){case 16777216:case 33554432:wt=b.ansi[se],K.push(`xterm-bg-${se}`);break;case 50331648:wt=rt.toColor(se>>16,se>>8&255,se&255),this._addStyle(x,`background-color:#${Sg((se>>>0).toString(16),"0",6)}`);break;case 0:default:ge?(wt=b.foreground,K.push("xterm-bg-257")):wt=b.background}switch(_e||L.isDim()&&(_e=Fe.multiplyOpacity(wt,.5)),Se){case 16777216:case 33554432:L.isBold()&&ae<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ae+=8),this._applyMinimumContrast(x,wt,b.ansi[ae],L,_e,void 0)||K.push(`xterm-fg-${ae}`);break;case 50331648:let Ee=rt.toColor(ae>>16&255,ae>>8&255,ae&255);this._applyMinimumContrast(x,wt,Ee,L,_e,be)||this._addStyle(x,`color:#${Sg(ae.toString(16),"0",6)}`);break;case 0:default:this._applyMinimumContrast(x,wt,b.foreground,L,_e,be)||ge&&K.push("xterm-fg-257")}K.length&&(x.className=K.join(" "),K.length=0),!q&&!W&&!B&&M?k++:x.textContent=D,ie!==this.defaultSpacing&&(x.style.letterSpacing=`${ie}px`),_.push(x),z=U}return x&&k&&(x.textContent=D),_}_applyMinimumContrast(e,t,r,n,o,l){if(this._optionsService.rawOptions.minimumContrastRatio===1||Yk(n.getCode()))return!1;let c=this._getContrastCache(n),h;if(!o&&!l&&(h=c.getColor(t.rgba,r.rgba)),h===void 0){let p=this._optionsService.rawOptions.minimumContrastRatio/(n.isDim()?2:1);h=Fe.ensureContrastRatio(o||t,l||r,p),c.setColor((o||t).rgba,(l||r).rgba,h??null)}return h?(this._addStyle(e,`color:${h.css}`),!0):!1}_getContrastCache(e){return e.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(e,t){e.setAttribute("style",`${e.getAttribute("style")||""}${t};`)}_isCellInSelection(e,t){let r=this._selectionStart,n=this._selectionEnd;return!r||!n?!1:this._columnSelectMode?r[0]<=n[0]?e>=r[0]&&t>=r[1]&&e<n[0]&&t<=n[1]:e<r[0]&&t>=r[1]&&e>=n[0]&&t<=n[1]:t>r[1]&&t<n[1]||r[1]===n[1]&&t===r[1]&&e>=r[0]&&e<n[0]||r[1]<n[1]&&t===n[1]&&e<n[0]||r[1]<n[1]&&t===r[1]&&e>=r[0]}};ph=Ge([ce(1,mv),ce(2,Tt),ce(3,Qr),ce(4,Yi),ce(5,so),ce(6,Ts)],ph);function Sg(e,t,r){for(;e.length<r;)e=t+e;return e}var Xk=class{constructor(e,t){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=e.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let r=e.createElement("span");r.classList.add("xterm-char-measure-element");let n=e.createElement("span");n.classList.add("xterm-char-measure-element"),n.style.fontWeight="bold";let o=e.createElement("span");o.classList.add("xterm-char-measure-element"),o.style.fontStyle="italic";let l=e.createElement("span");l.classList.add("xterm-char-measure-element"),l.style.fontWeight="bold",l.style.fontStyle="italic",this._measureElements=[r,n,o,l],this._container.appendChild(r),this._container.appendChild(n),this._container.appendChild(o),this._container.appendChild(l),t.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(e,t,r,n){e===this._font&&t===this._fontSize&&r===this._weight&&n===this._weightBold||(this._font=e,this._fontSize=t,this._weight=r,this._weightBold=n,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${r}`,this._measureElements[1].style.fontWeight=`${n}`,this._measureElements[2].style.fontWeight=`${r}`,this._measureElements[3].style.fontWeight=`${n}`,this.clear())}get(e,t,r){let n=0;if(!t&&!r&&e.length===1&&(n=e.charCodeAt(0))<256){if(this._flat[n]!==-9999)return this._flat[n];let c=this._measure(e,0);return c>0&&(this._flat[n]=c),c}let o=e;t&&(o+="B"),r&&(o+="I");let l=this._holey.get(o);if(l===void 0){let c=0;t&&(c|=1),r&&(c|=2),l=this._measure(e,c),l>0&&this._holey.set(o,l)}return l}_measure(e,t){let r=this._measureElements[t];return r.textContent=e.repeat(32),r.offsetWidth/32}},Jk=class{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(e,t,r,n=!1){if(this.selectionStart=t,this.selectionEnd=r,!t||!r||t[0]===r[0]&&t[1]===r[1]){this.clear();return}let o=e.buffers.active.ydisp,l=t[1]-o,c=r[1]-o,h=Math.max(l,0),p=Math.min(c,e.rows-1);if(h>=e.rows||p<0){this.clear();return}this.hasSelection=!0,this.columnSelectMode=n,this.viewportStartRow=l,this.viewportEndRow=c,this.viewportCappedStartRow=h,this.viewportCappedEndRow=p,this.startCol=t[0],this.endCol=r[0]}isCellSelected(e,t,r){return this.hasSelection?(r-=e.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?t>=this.startCol&&r>=this.viewportCappedStartRow&&t<this.endCol&&r<=this.viewportCappedEndRow:t<this.startCol&&r>=this.viewportCappedStartRow&&t>=this.endCol&&r<=this.viewportCappedEndRow:r>this.viewportStartRow&&r<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&r===this.viewportStartRow&&t>=this.startCol&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&r===this.viewportEndRow&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&r===this.viewportStartRow&&t>=this.startCol):!1}};function Zk(){return new Jk}var ku="xterm-dom-renderer-owner-",nr="xterm-rows",ka="xterm-fg-",wg="xterm-bg-",Pn="xterm-focus",Ea="xterm-selection",e2=1,mh=class extends Ne{constructor(e,t,r,n,o,l,c,h,p,d,v,_,y,b){super(),this._terminal=e,this._document=t,this._element=r,this._screenElement=n,this._viewportElement=o,this._helperContainer=l,this._linkifier2=c,this._charSizeService=p,this._optionsService=d,this._bufferService=v,this._coreService=_,this._coreBrowserService=y,this._themeService=b,this._terminalClass=e2++,this._rowElements=[],this._selectionRenderModel=Zk(),this.onRequestRedraw=this._register(new oe).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(nr),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(Ea),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=Gk(),this._updateDimensions(),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._themeService.onChangeColors(w=>this._injectCss(w))),this._injectCss(this._themeService.colors),this._rowFactory=h.createInstance(ph,document),this._element.classList.add(ku+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this._register(this._linkifier2.onShowLinkUnderline(w=>this._handleLinkHover(w))),this._register(this._linkifier2.onHideLinkUnderline(w=>this._handleLinkLeave(w))),this._register(He(()=>{this._element.classList.remove(ku+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new Xk(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let e=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*e,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*e),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/e),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/e),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let r of this._rowElements)r.style.width=`${this.dimensions.css.canvas.width}px`,r.style.height=`${this.dimensions.css.cell.height}px`,r.style.lineHeight=`${this.dimensions.css.cell.height}px`,r.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let t=`${this._terminalSelector} .${nr} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=t,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(e){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let t=`${this._terminalSelector} .${nr} { pointer-events: none; color: ${e.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;t+=`${this._terminalSelector} .${nr} .xterm-dim { color: ${Fe.multiplyOpacity(e.foreground,.5).css};}`,t+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let r=`blink_underline_${this._terminalClass}`,n=`blink_bar_${this._terminalClass}`,o=`blink_block_${this._terminalClass}`;t+=`@keyframes ${r} { 50% {  border-bottom-style: hidden; }}`,t+=`@keyframes ${n} { 50% {  box-shadow: none; }}`,t+=`@keyframes ${o} { 0% {  background-color: ${e.cursor.css};  color: ${e.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${e.cursor.css}; }}`,t+=`${this._terminalSelector} .${nr}.${Pn} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${r} 1s step-end infinite;}${this._terminalSelector} .${nr}.${Pn} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${n} 1s step-end infinite;}${this._terminalSelector} .${nr}.${Pn} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${o} 1s step-end infinite;}${this._terminalSelector} .${nr} .xterm-cursor.xterm-cursor-block { background-color: ${e.cursor.css}; color: ${e.cursorAccent.css};}${this._terminalSelector} .${nr} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${e.cursor.css} !important; color: ${e.cursorAccent.css} !important;}${this._terminalSelector} .${nr} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${e.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${nr} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${e.cursor.css} inset;}${this._terminalSelector} .${nr} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${e.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,t+=`${this._terminalSelector} .${Ea} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${Ea} div { position: absolute; background-color: ${e.selectionBackgroundOpaque.css};}${this._terminalSelector} .${Ea} div { position: absolute; background-color: ${e.selectionInactiveBackgroundOpaque.css};}`;for(let[l,c]of e.ansi.entries())t+=`${this._terminalSelector} .${ka}${l} { color: ${c.css}; }${this._terminalSelector} .${ka}${l}.xterm-dim { color: ${Fe.multiplyOpacity(c,.5).css}; }${this._terminalSelector} .${wg}${l} { background-color: ${c.css}; }`;t+=`${this._terminalSelector} .${ka}257 { color: ${Fe.opaque(e.background).css}; }${this._terminalSelector} .${ka}257.xterm-dim { color: ${Fe.multiplyOpacity(Fe.opaque(e.background),.5).css}; }${this._terminalSelector} .${wg}257 { background-color: ${e.foreground.css}; }`,this._themeStyleElement.textContent=t}_setDefaultSpacing(){let e=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${e}px`,this._rowFactory.defaultSpacing=e}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(e,t){for(let r=this._rowElements.length;r<=t;r++){let n=this._document.createElement("div");this._rowContainer.appendChild(n),this._rowElements.push(n)}for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(e,t){this._refreshRowElements(e,t),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(Pn),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(Pn),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(e,t,r){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(e,t,r),this.renderRows(0,this._bufferService.rows-1),!e||!t||(this._selectionRenderModel.update(this._terminal,e,t,r),!this._selectionRenderModel.hasSelection))return;let n=this._selectionRenderModel.viewportStartRow,o=this._selectionRenderModel.viewportEndRow,l=this._selectionRenderModel.viewportCappedStartRow,c=this._selectionRenderModel.viewportCappedEndRow,h=this._document.createDocumentFragment();if(r){let p=e[0]>t[0];h.appendChild(this._createSelectionElement(l,p?t[0]:e[0],p?e[0]:t[0],c-l+1))}else{let p=n===l?e[0]:0,d=l===o?t[0]:this._bufferService.cols;h.appendChild(this._createSelectionElement(l,p,d));let v=c-l-1;if(h.appendChild(this._createSelectionElement(l+1,0,this._bufferService.cols,v)),l!==c){let _=o===c?t[0]:this._bufferService.cols;h.appendChild(this._createSelectionElement(c,0,_))}}this._selectionContainer.appendChild(h)}_createSelectionElement(e,t,r,n=1){let o=this._document.createElement("div"),l=t*this.dimensions.css.cell.width,c=this.dimensions.css.cell.width*(r-t);return l+c>this.dimensions.css.canvas.width&&(c=this.dimensions.css.canvas.width-l),o.style.height=`${n*this.dimensions.css.cell.height}px`,o.style.top=`${e*this.dimensions.css.cell.height}px`,o.style.left=`${l}px`,o.style.width=`${c}px`,o}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let e of this._rowElements)e.replaceChildren()}renderRows(e,t){let r=this._bufferService.buffer,n=r.ybase+r.y,o=Math.min(r.x,this._bufferService.cols-1),l=this._coreService.decPrivateModes.cursorBlink??this._optionsService.rawOptions.cursorBlink,c=this._coreService.decPrivateModes.cursorStyle??this._optionsService.rawOptions.cursorStyle,h=this._optionsService.rawOptions.cursorInactiveStyle;for(let p=e;p<=t;p++){let d=p+r.ydisp,v=this._rowElements[p],_=r.lines.get(d);if(!v||!_)break;v.replaceChildren(...this._rowFactory.createRow(_,d,d===n,c,h,o,l,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${ku}${this._terminalClass}`}_handleLinkHover(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)}_handleLinkLeave(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)}_setCellUnderline(e,t,r,n,o,l){r<0&&(e=0),n<0&&(t=0);let c=this._bufferService.rows-1;r=Math.max(Math.min(r,c),0),n=Math.max(Math.min(n,c),0),o=Math.min(o,this._bufferService.cols);let h=this._bufferService.buffer,p=h.ybase+h.y,d=Math.min(h.x,o-1),v=this._optionsService.rawOptions.cursorBlink,_=this._optionsService.rawOptions.cursorStyle,y=this._optionsService.rawOptions.cursorInactiveStyle;for(let b=r;b<=n;++b){let w=b+h.ydisp,x=this._rowElements[b],k=h.lines.get(w);if(!x||!k)break;x.replaceChildren(...this._rowFactory.createRow(k,w,w===p,_,y,d,v,this.dimensions.css.cell.width,this._widthCache,l?b===r?e:0:-1,l?(b===n?t:o)-1:-1))}}};mh=Ge([ce(7,Gh),ce(8,nl),ce(9,Tt),ce(10,jt),ce(11,Yi),ce(12,Qr),ce(13,Ts)],mh);var gh=class extends Ne{constructor(e,t,r){super(),this._optionsService=r,this.width=0,this.height=0,this._onCharSizeChange=this._register(new oe),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this._register(new r2(this._optionsService))}catch{this._measureStrategy=this._register(new t2(e,t,this._optionsService))}this._register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){let e=this._measureStrategy.measure();(e.width!==this.width||e.height!==this.height)&&(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};gh=Ge([ce(2,Tt)],gh);var jv=class extends Ne{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(e,t){e!==void 0&&e>0&&t!==void 0&&t>0&&(this._result.width=e,this._result.height=t)}},t2=class extends jv{constructor(e,t,r){super(),this._document=e,this._parentElement=t,this._optionsService=r,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}},r2=class extends jv{constructor(e){super(),this._optionsService=e,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let t=this._ctx.measureText("W");if(!("width"in t&&"fontBoundingBoxAscent"in t&&"fontBoundingBoxDescent"in t))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let e=this._ctx.measureText("W");return this._validateAndSet(e.width,e.fontBoundingBoxAscent+e.fontBoundingBoxDescent),this._result}},i2=class extends Ne{constructor(e,t,r){super(),this._textarea=e,this._window=t,this.mainDocument=r,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=this._register(new s2(this._window)),this._onDprChange=this._register(new oe),this.onDprChange=this._onDprChange.event,this._onWindowChange=this._register(new oe),this.onWindowChange=this._onWindowChange.event,this._register(this.onWindowChange(n=>this._screenDprMonitor.setWindow(n))),this._register(St.forward(this._screenDprMonitor.onDprChange,this._onDprChange)),this._register(xe(this._textarea,"focus",()=>this._isFocused=!0)),this._register(xe(this._textarea,"blur",()=>this._isFocused=!1))}get window(){return this._window}set window(e){this._window!==e&&(this._window=e,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}},s2=class extends Ne{constructor(e){super(),this._parentWindow=e,this._windowResizeListener=this._register(new Ls),this._onDprChange=this._register(new oe),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this._register(He(()=>this.clearListener()))}setWindow(e){this._parentWindow=e,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=xe(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){!this._resolutionMediaMatchList||!this._outerListener||(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}},n2=class extends Ne{constructor(){super(),this.linkProviders=[],this._register(He(()=>this.linkProviders.length=0))}registerLinkProvider(e){return this.linkProviders.push(e),{dispose:()=>{let t=this.linkProviders.indexOf(e);t!==-1&&this.linkProviders.splice(t,1)}}}};function sd(e,t,r){let n=r.getBoundingClientRect(),o=e.getComputedStyle(r),l=parseInt(o.getPropertyValue("padding-left")),c=parseInt(o.getPropertyValue("padding-top"));return[t.clientX-n.left-l,t.clientY-n.top-c]}function o2(e,t,r,n,o,l,c,h,p){if(!l)return;let d=sd(e,t,r);if(d)return d[0]=Math.ceil((d[0]+(p?c/2:0))/c),d[1]=Math.ceil(d[1]/h),d[0]=Math.min(Math.max(d[0],1),n+(p?1:0)),d[1]=Math.min(Math.max(d[1],1),o),d}var _h=class{constructor(e,t){this._renderService=e,this._charSizeService=t}getCoords(e,t,r,n,o){return o2(window,e,t,r,n,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,o)}getMouseReportCoords(e,t){let r=sd(window,e,t);if(this._charSizeService.hasValidSize)return r[0]=Math.min(Math.max(r[0],0),this._renderService.dimensions.css.canvas.width-1),r[1]=Math.min(Math.max(r[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(r[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(r[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(r[0]),y:Math.floor(r[1])}}};_h=Ge([ce(0,Yr),ce(1,nl)],_h);var a2=class{constructor(t,r){this._renderCallback=t,this._coreBrowserService=r,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(t){return this._refreshCallbacks.push(t),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(t,r,n){this._rowCount=n,t=t!==void 0?t:0,r=r!==void 0?r:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,t):t,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,r):r,!this._animationFrame&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0){this._runRefreshCallbacks();return}let t=Math.max(this._rowStart,0),r=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(t,r),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let t of this._refreshCallbacks)t(0);this._refreshCallbacks=[]}},Tv={};_C(Tv,{getSafariVersion:()=>c2,isChromeOS:()=>Fv,isFirefox:()=>Bv,isIpad:()=>u2,isIphone:()=>h2,isLegacyEdge:()=>l2,isLinux:()=>nd,isMac:()=>Ga,isNode:()=>ol,isSafari:()=>Iv,isWindows:()=>Av});var ol=typeof process<"u"&&"title"in process,no=ol?"node":navigator.userAgent,oo=ol?"node":navigator.platform,Bv=no.includes("Firefox"),l2=no.includes("Edge"),Iv=/^((?!chrome|android).)*safari/i.test(no);function c2(){if(!Iv)return 0;let e=no.match(/Version\/(\d+)/);return e===null||e.length<2?0:parseInt(e[1])}var Ga=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(oo),u2=oo==="iPad",h2=oo==="iPhone",Av=["Windows","Win16","Win32","WinCE"].includes(oo),nd=oo.indexOf("Linux")>=0,Fv=/\bCrOS\b/.test(no),zv=class{constructor(){this._tasks=[],this._i=0}enqueue(e){this._tasks.push(e),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(e){this._idleCallback=void 0;let t=0,r=0,n=e.timeRemaining(),o=0;for(;this._i<this._tasks.length;){if(t=performance.now(),this._tasks[this._i]()||this._i++,t=Math.max(1,performance.now()-t),r=Math.max(t,r),o=e.timeRemaining(),r*1.5>o){n-t<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-t))}ms`),this._start();return}n=o}this.clear()}},d2=class extends zv{_requestCallback(e){return setTimeout(()=>e(this._createDeadline(16)))}_cancelCallback(e){clearTimeout(e)}_createDeadline(e){let t=performance.now()+e;return{timeRemaining:()=>Math.max(0,t-performance.now())}}},f2=class extends zv{_requestCallback(e){return requestIdleCallback(e)}_cancelCallback(e){cancelIdleCallback(e)}},Xa=!ol&&"requestIdleCallback"in window?f2:d2,p2=class{constructor(){this._queue=new Xa}set(e){this._queue.clear(),this._queue.enqueue(e)}flush(){this._queue.flush()}},vh=class extends Ne{constructor(e,t,r,n,o,l,c,h,p){super(),this._rowCount=e,this._optionsService=r,this._charSizeService=n,this._coreService=o,this._coreBrowserService=h,this._renderer=this._register(new Ls),this._pausedResizeTask=new p2,this._observerDisposable=this._register(new Ls),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this._register(new oe),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this._register(new oe),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this._register(new oe),this.onRender=this._onRender.event,this._onRefreshRequest=this._register(new oe),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new a2((d,v)=>this._renderRows(d,v),this._coreBrowserService),this._register(this._renderDebouncer),this._syncOutputHandler=new m2(this._coreBrowserService,this._coreService,()=>this._fullRefresh()),this._register(He(()=>this._syncOutputHandler.dispose())),this._register(this._coreBrowserService.onDprChange(()=>this.handleDevicePixelRatioChange())),this._register(c.onResize(()=>this._fullRefresh())),this._register(c.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this._register(l.onDecorationRegistered(()=>this._fullRefresh())),this._register(l.onDecorationRemoved(()=>this._fullRefresh())),this._register(this._optionsService.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(c.cols,c.rows),this._fullRefresh()})),this._register(this._optionsService.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(c.buffer.y,c.buffer.y,!0))),this._register(p.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(this._coreBrowserService.window,t),this._register(this._coreBrowserService.onWindowChange(d=>this._registerIntersectionObserver(d,t)))}get dimensions(){return this._renderer.value.dimensions}_registerIntersectionObserver(e,t){if("IntersectionObserver"in e){let r=new e.IntersectionObserver(n=>this._handleIntersectionChange(n[n.length-1]),{threshold:0});r.observe(t),this._observerDisposable.value=He(()=>r.disconnect())}}_handleIntersectionChange(e){this._isPaused=e.isIntersecting===void 0?e.intersectionRatio===0:!e.isIntersecting,!this._isPaused&&!this._charSizeService.hasValidSize&&this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(e,t,r=!1){if(this._isPaused){this._needsFullRefresh=!0;return}if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(e,t);return}let n=this._syncOutputHandler.flush();n&&(e=Math.min(e,n.start),t=Math.max(t,n.end)),r||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,t,this._rowCount)}_renderRows(e,t){if(this._renderer.value){if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(e,t);return}e=Math.min(e,this._rowCount-1),t=Math.min(t,this._rowCount-1),this._renderer.value.renderRows(e,t),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:t}),this._onRender.fire({start:e,end:t}),this._isNextRenderRedrawOnly=!0}}resize(e,t){this._rowCount=t,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(e){this._renderer.value=e,this._renderer.value&&(this._renderer.value.onRequestRedraw(t=>this.refreshRows(t.start,t.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(e){return this._renderDebouncer.addRefreshCallback(e)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(e,t){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(e,t)):this._renderer.value.handleResize(e,t),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(e,t,r){this._selectionState.start=e,this._selectionState.end=t,this._selectionState.columnSelectMode=r,this._renderer.value?.handleSelectionChanged(e,t,r)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};vh=Ge([ce(2,Tt),ce(3,nl),ce(4,Yi),ce(5,so),ce(6,jt),ce(7,Qr),ce(8,Ts)],vh);var m2=class{constructor(e,t,r){this._coreBrowserService=e,this._coreService=t,this._onTimeout=r,this._start=0,this._end=0,this._isBuffering=!1}bufferRows(e,t){this._isBuffering?(this._start=Math.min(this._start,e),this._end=Math.max(this._end,t)):(this._start=e,this._end=t,this._isBuffering=!0),this._timeout===void 0&&(this._timeout=this._coreBrowserService.window.setTimeout(()=>{this._timeout=void 0,this._coreService.decPrivateModes.synchronizedOutput=!1,this._onTimeout()},1e3))}flush(){if(this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0),!this._isBuffering)return;let e={start:this._start,end:this._end};return this._isBuffering=!1,e}dispose(){this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0)}};function g2(e,t,r,n){let o=r.buffer.x,l=r.buffer.y;if(!r.buffer.hasScrollback)return y2(o,l,e,t,r,n)+al(l,t,r,n)+S2(o,l,e,t,r,n);let c;if(l===t)return c=o>e?"D":"C",Xn(Math.abs(o-e),Gn(c,n));c=l>t?"D":"C";let h=Math.abs(l-t),p=v2(l>t?e:o,r)+(h-1)*r.cols+1+_2(l>t?o:e);return Xn(p,Gn(c,n))}function _2(e,t){return e-1}function v2(e,t){return t.cols-e}function y2(e,t,r,n,o,l){return al(t,n,o,l).length===0?"":Xn(Hv(e,t,e,t-qi(t,o),!1,o).length,Gn("D",l))}function al(e,t,r,n){let o=e-qi(e,r),l=t-qi(t,r),c=Math.abs(o-l)-w2(e,t,r);return Xn(c,Gn($v(e,t),n))}function S2(e,t,r,n,o,l){let c;al(t,n,o,l).length>0?c=n-qi(n,o):c=t;let h=n,p=x2(e,t,r,n,o,l);return Xn(Hv(e,c,r,h,p==="C",o).length,Gn(p,l))}function w2(e,t,r){let n=0,o=e-qi(e,r),l=t-qi(t,r);for(let c=0;c<Math.abs(o-l);c++){let h=$v(e,t)==="A"?-1:1;r.buffer.lines.get(o+h*c)?.isWrapped&&n++}return n}function qi(e,t){let r=0,n=t.buffer.lines.get(e),o=n?.isWrapped;for(;o&&e>=0&&e<t.rows;)r++,n=t.buffer.lines.get(--e),o=n?.isWrapped;return r}function x2(e,t,r,n,o,l){let c;return al(r,n,o,l).length>0?c=n-qi(n,o):c=t,e<r&&c<=n||e>=r&&c<n?"C":"D"}function $v(e,t){return e>t?"A":"B"}function Hv(e,t,r,n,o,l){let c=e,h=t,p="";for(;(c!==r||h!==n)&&h>=0&&h<l.buffer.lines.length;)c+=o?1:-1,o&&c>l.cols-1?(p+=l.buffer.translateBufferLineToString(h,!1,e,c),c=0,e=0,h++):!o&&c<0&&(p+=l.buffer.translateBufferLineToString(h,!1,0,e+1),c=l.cols-1,e=c,h--);return p+l.buffer.translateBufferLineToString(h,!1,e,c)}function Gn(e,t){let r=t?"O":"[";return Q.ESC+r+e}function Xn(e,t){e=Math.floor(e);let r="";for(let n=0;n<e;n++)r+=t;return r}var b2=class{constructor(e){this._bufferService=e,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:!this.selectionEnd||!this.selectionStart?this.selectionStart:this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?e%this._bufferService.cols===0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)-1]:[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[e,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[Math.max(e,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let e=this.selectionStart,t=this.selectionEnd;return!e||!t?!1:e[1]>t[1]||e[1]===t[1]&&e[0]>t[0]}handleTrim(e){return this.selectionStart&&(this.selectionStart[1]-=e),this.selectionEnd&&(this.selectionEnd[1]-=e),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}};function xg(e,t){if(e.start.y>e.end.y)throw new Error(`Buffer range end (${e.end.x}, ${e.end.y}) cannot be before start (${e.start.x}, ${e.start.y})`);return t*(e.end.y-e.start.y)+(e.end.x-e.start.x+1)}var Eu=50,C2=15,k2=50,E2=500,P2="",R2=new RegExp(P2,"g"),yh=class extends Ne{constructor(e,t,r,n,o,l,c,h,p){super(),this._element=e,this._screenElement=t,this._linkifier=r,this._bufferService=n,this._coreService=o,this._mouseService=l,this._optionsService=c,this._renderService=h,this._coreBrowserService=p,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new ur,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this._register(new oe),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this._register(new oe),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this._register(new oe),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this._register(new oe),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=d=>this._handleMouseMove(d),this._mouseUpListener=d=>this._handleMouseUp(d),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(d=>this._handleTrim(d)),this._register(this._bufferService.buffers.onBufferActivate(d=>this._handleBufferActivate(d))),this.enable(),this._model=new b2(this._bufferService),this._activeSelectionMode=0,this._register(He(()=>{this._removeMouseDownListeners()})),this._register(this._bufferService.onResize(d=>{d.rowsChanged&&this.clearSelection()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;return!e||!t?!1:e[0]!==t[0]||e[1]!==t[1]}get selectionText(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;if(!e||!t)return"";let r=this._bufferService.buffer,n=[];if(this._activeSelectionMode===3){if(e[0]===t[0])return"";let o=e[0]<t[0]?e[0]:t[0],l=e[0]<t[0]?t[0]:e[0];for(let c=e[1];c<=t[1];c++){let h=r.translateBufferLineToString(c,!0,o,l);n.push(h)}}else{let o=e[1]===t[1]?t[0]:void 0;n.push(r.translateBufferLineToString(e[1],!0,e[0],o));for(let l=e[1]+1;l<=t[1]-1;l++){let c=r.lines.get(l),h=r.translateBufferLineToString(l,!0);c?.isWrapped?n[n.length-1]+=h:n.push(h)}if(e[1]!==t[1]){let l=r.lines.get(t[1]),c=r.translateBufferLineToString(t[1],!0,0,t[0]);l&&l.isWrapped?n[n.length-1]+=c:n.push(c)}}return n.map(o=>o.replace(R2," ")).join(Av?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(e){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),nd&&e&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(e){let t=this._getMouseBufferCoords(e),r=this._model.finalSelectionStart,n=this._model.finalSelectionEnd;return!r||!n||!t?!1:this._areCoordsInSelection(t,r,n)}isCellInSelection(e,t){let r=this._model.finalSelectionStart,n=this._model.finalSelectionEnd;return!r||!n?!1:this._areCoordsInSelection([e,t],r,n)}_areCoordsInSelection(e,t,r){return e[1]>t[1]&&e[1]<r[1]||t[1]===r[1]&&e[1]===t[1]&&e[0]>=t[0]&&e[0]<r[0]||t[1]<r[1]&&e[1]===r[1]&&e[0]<r[0]||t[1]<r[1]&&e[1]===t[1]&&e[0]>=t[0]}_selectWordAtCursor(e,t){let r=this._linkifier.currentLink?.link?.range;if(r)return this._model.selectionStart=[r.start.x-1,r.start.y-1],this._model.selectionStartLength=xg(r,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let n=this._getMouseBufferCoords(e);return n?(this._selectWordAt(n,t),this._model.selectionEnd=void 0,!0):!1}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(e,t){this._model.clearSelection(),e=Math.max(e,0),t=Math.min(t,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._bufferService.cols,t],this.refresh(),this._onSelectionChange.fire()}_handleTrim(e){this._model.handleTrim(e)&&this.refresh()}_getMouseBufferCoords(e){let t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(t)return t[0]--,t[1]--,t[1]+=this._bufferService.buffer.ydisp,t}_getMouseEventScrollAmount(e){let t=sd(this._coreBrowserService.window,e,this._screenElement)[1],r=this._renderService.dimensions.css.canvas.height;return t>=0&&t<=r?0:(t>r&&(t-=r),t=Math.min(Math.max(t,-Eu),Eu),t/=Eu,t/Math.abs(t)+Math.round(t*(C2-1)))}shouldForceSelection(e){return Ga?e.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:e.shiftKey}handleMouseDown(e){if(this._mouseDownTimeStamp=e.timeStamp,!(e.button===2&&this.hasSelection)&&e.button===0){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._handleIncrementalClick(e):e.detail===1?this._handleSingleClick(e):e.detail===2?this._handleDoubleClick(e):e.detail===3&&this._handleTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),k2)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))}_handleSingleClick(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?3:0,this._model.selectionStart=this._getMouseBufferCoords(e),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let t=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);t&&t.length!==this._model.selectionStart[0]&&t.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(e){this._selectWordAtCursor(e,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(e){let t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=2,this._selectLineAt(t[1]))}shouldColumnSelect(e){return e.altKey&&!(Ga&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(e){if(e.stopImmediatePropagation(),!this._model.selectionStart)return;let t=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),!this._model.selectionEnd){this.refresh(!0);return}this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let r=this._bufferService.buffer;if(this._model.selectionEnd[1]<r.lines.length){let n=r.lines.get(this._model.selectionEnd[1]);n&&n.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}(!t||t[0]!==this._model.selectionEnd[0]||t[1]!==this._model.selectionEnd[1])&&this.refresh(!0)}_dragScroll(){if(!(!this._model.selectionEnd||!this._model.selectionStart)&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let e=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(e.ydisp+this._bufferService.rows,e.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=e.ydisp),this.refresh()}}_handleMouseUp(e){let t=e.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&t<E2&&e.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let r=this._mouseService.getCoords(e,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(r&&r[0]!==void 0&&r[1]!==void 0){let n=g2(r[0]-1,r[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(n,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd,r=!!e&&!!t&&(e[0]!==t[0]||e[1]!==t[1]);if(!r){this._oldHasSelection&&this._fireOnSelectionChange(e,t,r);return}!e||!t||(!this._oldSelectionStart||!this._oldSelectionEnd||e[0]!==this._oldSelectionStart[0]||e[1]!==this._oldSelectionStart[1]||t[0]!==this._oldSelectionEnd[0]||t[1]!==this._oldSelectionEnd[1])&&this._fireOnSelectionChange(e,t,r)}_fireOnSelectionChange(e,t,r){this._oldSelectionStart=e,this._oldSelectionEnd=t,this._oldHasSelection=r,this._onSelectionChange.fire()}_handleBufferActivate(e){this.clearSelection(),this._trimListener.dispose(),this._trimListener=e.activeBuffer.lines.onTrim(t=>this._handleTrim(t))}_convertViewportColToCharacterIndex(e,t){let r=t;for(let n=0;t>=n;n++){let o=e.loadCell(n,this._workCell).getChars().length;this._workCell.getWidth()===0?r--:o>1&&t!==n&&(r+=o-1)}return r}setSelection(e,t,r){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,t],this._model.selectionStartLength=r,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(e){this._isClickInSelection(e)||(this._selectWordAtCursor(e,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(e,t,r=!0,n=!0){if(e[0]>=this._bufferService.cols)return;let o=this._bufferService.buffer,l=o.lines.get(e[1]);if(!l)return;let c=o.translateBufferLineToString(e[1],!1),h=this._convertViewportColToCharacterIndex(l,e[0]),p=h,d=e[0]-h,v=0,_=0,y=0,b=0;if(c.charAt(h)===" "){for(;h>0&&c.charAt(h-1)===" ";)h--;for(;p<c.length&&c.charAt(p+1)===" ";)p++}else{let k=e[0],D=e[0];l.getWidth(k)===0&&(v++,k--),l.getWidth(D)===2&&(_++,D++);let j=l.getString(D).length;for(j>1&&(b+=j-1,p+=j-1);k>0&&h>0&&!this._isCharWordSeparator(l.loadCell(k-1,this._workCell));){l.loadCell(k-1,this._workCell);let $=this._workCell.getChars().length;this._workCell.getWidth()===0?(v++,k--):$>1&&(y+=$-1,h-=$-1),h--,k--}for(;D<l.length&&p+1<c.length&&!this._isCharWordSeparator(l.loadCell(D+1,this._workCell));){l.loadCell(D+1,this._workCell);let $=this._workCell.getChars().length;this._workCell.getWidth()===2?(_++,D++):$>1&&(b+=$-1,p+=$-1),p++,D++}}p++;let w=h+d-v+y,x=Math.min(this._bufferService.cols,p-h+v+_-y-b);if(!(!t&&c.slice(h,p).trim()==="")){if(r&&w===0&&l.getCodePoint(0)!==32){let k=o.lines.get(e[1]-1);if(k&&l.isWrapped&&k.getCodePoint(this._bufferService.cols-1)!==32){let D=this._getWordAt([this._bufferService.cols-1,e[1]-1],!1,!0,!1);if(D){let j=this._bufferService.cols-D.start;w-=j,x+=j}}}if(n&&w+x===this._bufferService.cols&&l.getCodePoint(this._bufferService.cols-1)!==32){let k=o.lines.get(e[1]+1);if(k?.isWrapped&&k.getCodePoint(0)!==32){let D=this._getWordAt([0,e[1]+1],!1,!1,!0);D&&(x+=D.length)}}return{start:w,length:x}}}_selectWordAt(e,t){let r=this._getWordAt(e,t);if(r){for(;r.start<0;)r.start+=this._bufferService.cols,e[1]--;this._model.selectionStart=[r.start,e[1]],this._model.selectionStartLength=r.length}}_selectToWordAt(e){let t=this._getWordAt(e,!0);if(t){let r=e[1];for(;t.start<0;)t.start+=this._bufferService.cols,r--;if(!this._model.areSelectionValuesReversed())for(;t.start+t.length>this._bufferService.cols;)t.length-=this._bufferService.cols,r++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?t.start:t.start+t.length,r]}}_isCharWordSeparator(e){return e.getWidth()===0?!1:this._optionsService.rawOptions.wordSeparator.indexOf(e.getChars())>=0}_selectLineAt(e){let t=this._bufferService.buffer.getWrappedRangeForLine(e),r={start:{x:0,y:t.first},end:{x:this._bufferService.cols-1,y:t.last}};this._model.selectionStart=[0,t.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=xg(r,this._bufferService.cols)}};yh=Ge([ce(3,jt),ce(4,Yi),ce(5,Xh),ce(6,Tt),ce(7,Yr),ce(8,Qr)],yh);var bg=class{constructor(){this._data={}}set(e,t,r){this._data[e]||(this._data[e]={}),this._data[e][t]=r}get(e,t){return this._data[e]?this._data[e][t]:void 0}clear(){this._data={}}},Cg=class{constructor(){this._color=new bg,this._css=new bg}setCss(e,t,r){this._css.set(e,t,r)}getCss(e,t){return this._css.get(e,t)}setColor(e,t,r){this._color.set(e,t,r)}getColor(e,t){return this._color.get(e,t)}clear(){this._color.clear(),this._css.clear()}},ot=Object.freeze((()=>{let e=[qe.toColor("#2e3436"),qe.toColor("#cc0000"),qe.toColor("#4e9a06"),qe.toColor("#c4a000"),qe.toColor("#3465a4"),qe.toColor("#75507b"),qe.toColor("#06989a"),qe.toColor("#d3d7cf"),qe.toColor("#555753"),qe.toColor("#ef2929"),qe.toColor("#8ae234"),qe.toColor("#fce94f"),qe.toColor("#729fcf"),qe.toColor("#ad7fa8"),qe.toColor("#34e2e2"),qe.toColor("#eeeeec")],t=[0,95,135,175,215,255];for(let r=0;r<216;r++){let n=t[r/36%6|0],o=t[r/6%6|0],l=t[r%6];e.push({css:rt.toCss(n,o,l),rgba:rt.toRgba(n,o,l)})}for(let r=0;r<24;r++){let n=8+r*10;e.push({css:rt.toCss(n,n,n),rgba:rt.toRgba(n,n,n)})}return e})()),Ii=qe.toColor("#ffffff"),jn=qe.toColor("#000000"),kg=qe.toColor("#ffffff"),Eg=jn,Rn={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117},N2=Ii,Sh=class extends Ne{constructor(e){super(),this._optionsService=e,this._contrastCache=new Cg,this._halfContrastCache=new Cg,this._onChangeColors=this._register(new oe),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:Ii,background:jn,cursor:kg,cursorAccent:Eg,selectionForeground:void 0,selectionBackgroundTransparent:Rn,selectionBackgroundOpaque:Fe.blend(jn,Rn),selectionInactiveBackgroundTransparent:Rn,selectionInactiveBackgroundOpaque:Fe.blend(jn,Rn),scrollbarSliderBackground:Fe.opacity(Ii,.2),scrollbarSliderHoverBackground:Fe.opacity(Ii,.4),scrollbarSliderActiveBackground:Fe.opacity(Ii,.5),overviewRulerBorder:Ii,ansi:ot.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this._register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this._register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(e={}){let t=this._colors;if(t.foreground=je(e.foreground,Ii),t.background=je(e.background,jn),t.cursor=Fe.blend(t.background,je(e.cursor,kg)),t.cursorAccent=Fe.blend(t.background,je(e.cursorAccent,Eg)),t.selectionBackgroundTransparent=je(e.selectionBackground,Rn),t.selectionBackgroundOpaque=Fe.blend(t.background,t.selectionBackgroundTransparent),t.selectionInactiveBackgroundTransparent=je(e.selectionInactiveBackground,t.selectionBackgroundTransparent),t.selectionInactiveBackgroundOpaque=Fe.blend(t.background,t.selectionInactiveBackgroundTransparent),t.selectionForeground=e.selectionForeground?je(e.selectionForeground,yg):void 0,t.selectionForeground===yg&&(t.selectionForeground=void 0),Fe.isOpaque(t.selectionBackgroundTransparent)&&(t.selectionBackgroundTransparent=Fe.opacity(t.selectionBackgroundTransparent,.3)),Fe.isOpaque(t.selectionInactiveBackgroundTransparent)&&(t.selectionInactiveBackgroundTransparent=Fe.opacity(t.selectionInactiveBackgroundTransparent,.3)),t.scrollbarSliderBackground=je(e.scrollbarSliderBackground,Fe.opacity(t.foreground,.2)),t.scrollbarSliderHoverBackground=je(e.scrollbarSliderHoverBackground,Fe.opacity(t.foreground,.4)),t.scrollbarSliderActiveBackground=je(e.scrollbarSliderActiveBackground,Fe.opacity(t.foreground,.5)),t.overviewRulerBorder=je(e.overviewRulerBorder,N2),t.ansi=ot.slice(),t.ansi[0]=je(e.black,ot[0]),t.ansi[1]=je(e.red,ot[1]),t.ansi[2]=je(e.green,ot[2]),t.ansi[3]=je(e.yellow,ot[3]),t.ansi[4]=je(e.blue,ot[4]),t.ansi[5]=je(e.magenta,ot[5]),t.ansi[6]=je(e.cyan,ot[6]),t.ansi[7]=je(e.white,ot[7]),t.ansi[8]=je(e.brightBlack,ot[8]),t.ansi[9]=je(e.brightRed,ot[9]),t.ansi[10]=je(e.brightGreen,ot[10]),t.ansi[11]=je(e.brightYellow,ot[11]),t.ansi[12]=je(e.brightBlue,ot[12]),t.ansi[13]=je(e.brightMagenta,ot[13]),t.ansi[14]=je(e.brightCyan,ot[14]),t.ansi[15]=je(e.brightWhite,ot[15]),e.extendedAnsi){let r=Math.min(t.ansi.length-16,e.extendedAnsi.length);for(let n=0;n<r;n++)t.ansi[n+16]=je(e.extendedAnsi[n],ot[n+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(e){this._restoreColor(e),this._onChangeColors.fire(this.colors)}_restoreColor(e){if(e===void 0){for(let t=0;t<this._restoreColors.ansi.length;++t)this._colors.ansi[t]=this._restoreColors.ansi[t];return}switch(e){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[e]=this._restoreColors.ansi[e]}}modifyColors(e){e(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};Sh=Ge([ce(0,Tt)],Sh);function je(e,t){if(e!==void 0)try{return qe.toColor(e)}catch{}return t}var L2=class{constructor(...e){this._entries=new Map;for(let[t,r]of e)this.set(t,r)}set(e,t){let r=this._entries.get(e);return this._entries.set(e,t),r}forEach(e){for(let[t,r]of this._entries.entries())e(t,r)}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}},D2=class{constructor(){this._services=new L2,this._services.set(Gh,this)}setService(e,t){this._services.set(e,t)}getService(e){return this._services.get(e)}createInstance(e,...t){let r=CC(e).sort((l,c)=>l.index-c.index),n=[];for(let l of r){let c=this._services.get(l.id);if(!c)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${l.id._id}.`);n.push(c)}let o=r.length>0?r[0].index:t.length;if(t.length!==o)throw new Error(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);return new e(...t,...n)}},M2={trace:0,debug:1,info:2,warn:3,error:4,off:5},O2="xterm.js: ",wh=class extends Ne{constructor(e){super(),this._optionsService=e,this._logLevel=5,this._updateLogLevel(),this._register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}get logLevel(){return this._logLevel}_updateLogLevel(){this._logLevel=M2[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(e){for(let t=0;t<e.length;t++)typeof e[t]=="function"&&(e[t]=e[t]())}_log(e,t,r){this._evalLazyOptionalParams(r),e.call(console,(this._optionsService.options.logger?"":O2)+t,...r)}trace(e,...t){this._logLevel<=0&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,e,t)}debug(e,...t){this._logLevel<=1&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,e,t)}info(e,...t){this._logLevel<=2&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,e,t)}warn(e,...t){this._logLevel<=3&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,e,t)}error(e,...t){this._logLevel<=4&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,e,t)}};wh=Ge([ce(0,Tt)],wh);var Pg=class extends Ne{constructor(e){super(),this._maxLength=e,this.onDeleteEmitter=this._register(new oe),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this._register(new oe),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this._register(new oe),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(e){if(this._maxLength===e)return;let t=new Array(e);for(let r=0;r<Math.min(e,this.length);r++)t[r]=this._array[this._getCyclicIndex(r)];this._array=t,this._maxLength=e,this._startIndex=0}get length(){return this._length}set length(e){if(e>this._length)for(let t=this._length;t<e;t++)this._array[t]=void 0;this._length=e}get(e){return this._array[this._getCyclicIndex(e)]}set(e,t){this._array[this._getCyclicIndex(e)]=t}push(e){this._array[this._getCyclicIndex(this._length)]=e,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(e,t,...r){if(t){for(let n=e;n<this._length-t;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+t)];this._length-=t,this.onDeleteEmitter.fire({index:e,amount:t})}for(let n=this._length-1;n>=e;n--)this._array[this._getCyclicIndex(n+r.length)]=this._array[this._getCyclicIndex(n)];for(let n=0;n<r.length;n++)this._array[this._getCyclicIndex(e+n)]=r[n];if(r.length&&this.onInsertEmitter.fire({index:e,amount:r.length}),this._length+r.length>this._maxLength){let n=this._length+r.length-this._maxLength;this._startIndex+=n,this._length=this._maxLength,this.onTrimEmitter.fire(n)}else this._length+=r.length}trimStart(e){e>this._length&&(e=this._length),this._startIndex+=e,this._length-=e,this.onTrimEmitter.fire(e)}shiftElements(e,t,r){if(!(t<=0)){if(e<0||e>=this._length)throw new Error("start argument out of range");if(e+r<0)throw new Error("Cannot shift elements in list beyond index 0");if(r>0){for(let o=t-1;o>=0;o--)this.set(e+o+r,this.get(e+o));let n=e+t+r-this._length;if(n>0)for(this._length+=n;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let n=0;n<t;n++)this.set(e+n+r,this.get(e+n))}}_getCyclicIndex(e){return(this._startIndex+e)%this._maxLength}},Re=3,tt=Object.freeze(new io),Pa=0,Pu=2,Tn=class Wv{constructor(t,r,n=!1){this.isWrapped=n,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(t*Re);let o=r||ur.fromCharData([0,lv,1,0]);for(let l=0;l<t;++l)this.setCell(l,o);this.length=t}get(t){let r=this._data[t*Re+0],n=r&2097151;return[this._data[t*Re+1],r&2097152?this._combined[t]:n?vi(n):"",r>>22,r&2097152?this._combined[t].charCodeAt(this._combined[t].length-1):n]}set(t,r){this._data[t*Re+1]=r[0],r[1].length>1?(this._combined[t]=r[1],this._data[t*Re+0]=t|2097152|r[2]<<22):this._data[t*Re+0]=r[1].charCodeAt(0)|r[2]<<22}getWidth(t){return this._data[t*Re+0]>>22}hasWidth(t){return this._data[t*Re+0]&12582912}getFg(t){return this._data[t*Re+1]}getBg(t){return this._data[t*Re+2]}hasContent(t){return this._data[t*Re+0]&4194303}getCodePoint(t){let r=this._data[t*Re+0];return r&2097152?this._combined[t].charCodeAt(this._combined[t].length-1):r&2097151}isCombined(t){return this._data[t*Re+0]&2097152}getString(t){let r=this._data[t*Re+0];return r&2097152?this._combined[t]:r&2097151?vi(r&2097151):""}isProtected(t){return this._data[t*Re+2]&536870912}loadCell(t,r){return Pa=t*Re,r.content=this._data[Pa+0],r.fg=this._data[Pa+1],r.bg=this._data[Pa+2],r.content&2097152&&(r.combinedData=this._combined[t]),r.bg&268435456&&(r.extended=this._extendedAttrs[t]),r}setCell(t,r){r.content&2097152&&(this._combined[t]=r.combinedData),r.bg&268435456&&(this._extendedAttrs[t]=r.extended),this._data[t*Re+0]=r.content,this._data[t*Re+1]=r.fg,this._data[t*Re+2]=r.bg}setCellFromCodepoint(t,r,n,o){o.bg&268435456&&(this._extendedAttrs[t]=o.extended),this._data[t*Re+0]=r|n<<22,this._data[t*Re+1]=o.fg,this._data[t*Re+2]=o.bg}addCodepointToCell(t,r,n){let o=this._data[t*Re+0];o&2097152?this._combined[t]+=vi(r):o&2097151?(this._combined[t]=vi(o&2097151)+vi(r),o&=-2097152,o|=2097152):o=r|1<<22,n&&(o&=-12582913,o|=n<<22),this._data[t*Re+0]=o}insertCells(t,r,n){if(t%=this.length,t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,n),r<this.length-t){let o=new ur;for(let l=this.length-t-r-1;l>=0;--l)this.setCell(t+r+l,this.loadCell(t+l,o));for(let l=0;l<r;++l)this.setCell(t+l,n)}else for(let o=t;o<this.length;++o)this.setCell(o,n);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,n)}deleteCells(t,r,n){if(t%=this.length,r<this.length-t){let o=new ur;for(let l=0;l<this.length-t-r;++l)this.setCell(t+l,this.loadCell(t+r+l,o));for(let l=this.length-r;l<this.length;++l)this.setCell(l,n)}else for(let o=t;o<this.length;++o)this.setCell(o,n);t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,n),this.getWidth(t)===0&&!this.hasContent(t)&&this.setCellFromCodepoint(t,0,1,n)}replaceCells(t,r,n,o=!1){if(o){for(t&&this.getWidth(t-1)===2&&!this.isProtected(t-1)&&this.setCellFromCodepoint(t-1,0,1,n),r<this.length&&this.getWidth(r-1)===2&&!this.isProtected(r)&&this.setCellFromCodepoint(r,0,1,n);t<r&&t<this.length;)this.isProtected(t)||this.setCell(t,n),t++;return}for(t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,n),r<this.length&&this.getWidth(r-1)===2&&this.setCellFromCodepoint(r,0,1,n);t<r&&t<this.length;)this.setCell(t++,n)}resize(t,r){if(t===this.length)return this._data.length*4*Pu<this._data.buffer.byteLength;let n=t*Re;if(t>this.length){if(this._data.buffer.byteLength>=n*4)this._data=new Uint32Array(this._data.buffer,0,n);else{let o=new Uint32Array(n);o.set(this._data),this._data=o}for(let o=this.length;o<t;++o)this.setCell(o,r)}else{this._data=this._data.subarray(0,n);let o=Object.keys(this._combined);for(let c=0;c<o.length;c++){let h=parseInt(o[c],10);h>=t&&delete this._combined[h]}let l=Object.keys(this._extendedAttrs);for(let c=0;c<l.length;c++){let h=parseInt(l[c],10);h>=t&&delete this._extendedAttrs[h]}}return this.length=t,n*4*Pu<this._data.buffer.byteLength}cleanupMemory(){if(this._data.length*4*Pu<this._data.buffer.byteLength){let t=new Uint32Array(this._data.length);return t.set(this._data),this._data=t,1}return 0}fill(t,r=!1){if(r){for(let n=0;n<this.length;++n)this.isProtected(n)||this.setCell(n,t);return}this._combined={},this._extendedAttrs={};for(let n=0;n<this.length;++n)this.setCell(n,t)}copyFrom(t){this.length!==t.length?this._data=new Uint32Array(t._data):this._data.set(t._data),this.length=t.length,this._combined={};for(let r in t._combined)this._combined[r]=t._combined[r];this._extendedAttrs={};for(let r in t._extendedAttrs)this._extendedAttrs[r]=t._extendedAttrs[r];this.isWrapped=t.isWrapped}clone(){let t=new Wv(0);t._data=new Uint32Array(this._data),t.length=this.length;for(let r in this._combined)t._combined[r]=this._combined[r];for(let r in this._extendedAttrs)t._extendedAttrs[r]=this._extendedAttrs[r];return t.isWrapped=this.isWrapped,t}getTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(this._data[t*Re+0]&4194303)return t+(this._data[t*Re+0]>>22);return 0}getNoBgTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(this._data[t*Re+0]&4194303||this._data[t*Re+2]&50331648)return t+(this._data[t*Re+0]>>22);return 0}copyCellsFrom(t,r,n,o,l){let c=t._data;if(l)for(let p=o-1;p>=0;p--){for(let d=0;d<Re;d++)this._data[(n+p)*Re+d]=c[(r+p)*Re+d];c[(r+p)*Re+2]&268435456&&(this._extendedAttrs[n+p]=t._extendedAttrs[r+p])}else for(let p=0;p<o;p++){for(let d=0;d<Re;d++)this._data[(n+p)*Re+d]=c[(r+p)*Re+d];c[(r+p)*Re+2]&268435456&&(this._extendedAttrs[n+p]=t._extendedAttrs[r+p])}let h=Object.keys(t._combined);for(let p=0;p<h.length;p++){let d=parseInt(h[p],10);d>=r&&(this._combined[d-r+n]=t._combined[d])}}translateToString(t,r,n,o){r=r??0,n=n??this.length,t&&(n=Math.min(n,this.getTrimmedLength())),o&&(o.length=0);let l="";for(;r<n;){let c=this._data[r*Re+0],h=c&2097151,p=c&2097152?this._combined[r]:h?vi(h):yi;if(l+=p,o)for(let d=0;d<p.length;++d)o.push(r);r+=c>>22||1}return o&&o.push(r),l}};function j2(e,t,r,n,o,l){let c=[];for(let h=0;h<e.length-1;h++){let p=h,d=e.get(++p);if(!d.isWrapped)continue;let v=[e.get(h)];for(;p<e.length&&d.isWrapped;)v.push(d),d=e.get(++p);if(!l&&n>=h&&n<p){h+=v.length-1;continue}let _=0,y=Jn(v,_,t),b=1,w=0;for(;b<v.length;){let k=Jn(v,b,t),D=k-w,j=r-y,$=Math.min(D,j);v[_].copyCellsFrom(v[b],w,y,$,!1),y+=$,y===r&&(_++,y=0),w+=$,w===k&&(b++,w=0),y===0&&_!==0&&v[_-1].getWidth(r-1)===2&&(v[_].copyCellsFrom(v[_-1],r-1,y++,1,!1),v[_-1].setCell(r-1,o))}v[_].replaceCells(y,r,o);let x=0;for(let k=v.length-1;k>0&&(k>_||v[k].getTrimmedLength()===0);k--)x++;x>0&&(c.push(h+v.length-x),c.push(x)),h+=v.length-1}return c}function T2(e,t){let r=[],n=0,o=t[n],l=0;for(let c=0;c<e.length;c++)if(o===c){let h=t[++n];e.onDeleteEmitter.fire({index:c-l,amount:h}),c+=h-1,l+=h,o=t[++n]}else r.push(c);return{layout:r,countRemoved:l}}function B2(e,t){let r=[];for(let n=0;n<t.length;n++)r.push(e.get(t[n]));for(let n=0;n<r.length;n++)e.set(n,r[n]);e.length=t.length}function I2(e,t,r){let n=[],o=e.map((p,d)=>Jn(e,d,t)).reduce((p,d)=>p+d),l=0,c=0,h=0;for(;h<o;){if(o-h<r){n.push(o-h);break}l+=r;let p=Jn(e,c,t);l>p&&(l-=p,c++);let d=e[c].getWidth(l-1)===2;d&&l--;let v=d?r-1:r;n.push(v),h+=v}return n}function Jn(e,t,r){if(t===e.length-1)return e[t].getTrimmedLength();let n=!e[t].hasContent(r-1)&&e[t].getWidth(r-1)===1,o=e[t+1].getWidth(0)===2;return n&&o?r-1:r}var Uv=class Kv{constructor(t){this.line=t,this.isDisposed=!1,this._disposables=[],this._id=Kv._nextId++,this._onDispose=this.register(new oe),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),Vi(this._disposables),this._disposables.length=0)}register(t){return this._disposables.push(t),t}};Uv._nextId=1;var A2=Uv,ct={},Ai=ct.B;ct[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""};ct.A={"#":""};ct.B=void 0;ct[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""};ct.C=ct[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};ct.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};ct.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};ct.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};ct.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""};ct.E=ct[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};ct.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""};ct.H=ct[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};ct["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""};var Rg=4294967295,Ng=class{constructor(e,t,r){this._hasScrollback=e,this._optionsService=t,this._bufferService=r,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=tt.clone(),this.savedCharset=Ai,this.markers=[],this._nullCell=ur.fromCharData([0,lv,1,0]),this._whitespaceCell=ur.fromCharData([0,yi,1,32]),this._isClearing=!1,this._memoryCleanupQueue=new Xa,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new Pg(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new qa),this._nullCell}getWhitespaceCell(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new qa),this._whitespaceCell}getBlankLine(e,t){return new Tn(this._bufferService.cols,this.getNullCell(e),t)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows}_getCorrectBufferLength(e){if(!this._hasScrollback)return e;let t=e+this._optionsService.rawOptions.scrollback;return t>Rg?Rg:t}fillViewportRows(e){if(this.lines.length===0){e===void 0&&(e=tt);let t=this._rows;for(;t--;)this.lines.push(this.getBlankLine(e))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new Pg(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(e,t){let r=this.getNullCell(tt),n=0,o=this._getCorrectBufferLength(t);if(o>this.lines.maxLength&&(this.lines.maxLength=o),this.lines.length>0){if(this._cols<e)for(let c=0;c<this.lines.length;c++)n+=+this.lines.get(c).resize(e,r);let l=0;if(this._rows<t)for(let c=this._rows;c<t;c++)this.lines.length<t+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new Tn(e,r)):this.ybase>0&&this.lines.length<=this.ybase+this.y+l+1?(this.ybase--,l++,this.ydisp>0&&this.ydisp--):this.lines.push(new Tn(e,r)));else for(let c=this._rows;c>t;c--)this.lines.length>t+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(o<this.lines.maxLength){let c=this.lines.length-o;c>0&&(this.lines.trimStart(c),this.ybase=Math.max(this.ybase-c,0),this.ydisp=Math.max(this.ydisp-c,0),this.savedY=Math.max(this.savedY-c,0)),this.lines.maxLength=o}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,t-1),l&&(this.y+=l),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=t-1,this._isReflowEnabled&&(this._reflow(e,t),this._cols>e))for(let l=0;l<this.lines.length;l++)n+=+this.lines.get(l).resize(e,r);this._cols=e,this._rows=t,this._memoryCleanupQueue.clear(),n>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let e=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,e=!1);let t=0;for(;this._memoryCleanupPosition<this.lines.length;)if(t+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),t>100)return!0;return e}get _isReflowEnabled(){let e=this._optionsService.rawOptions.windowsPty;return e&&e.buildNumber?this._hasScrollback&&e.backend==="conpty"&&e.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(e,t){this._cols!==e&&(e>this._cols?this._reflowLarger(e,t):this._reflowSmaller(e,t))}_reflowLarger(e,t){let r=this._optionsService.rawOptions.reflowCursorLine,n=j2(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(tt),r);if(n.length>0){let o=T2(this.lines,n);B2(this.lines,o.layout),this._reflowLargerAdjustViewport(e,t,o.countRemoved)}}_reflowLargerAdjustViewport(e,t,r){let n=this.getNullCell(tt),o=r;for(;o-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<t&&this.lines.push(new Tn(e,n))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-r,0)}_reflowSmaller(e,t){let r=this._optionsService.rawOptions.reflowCursorLine,n=this.getNullCell(tt),o=[],l=0;for(let c=this.lines.length-1;c>=0;c--){let h=this.lines.get(c);if(!h||!h.isWrapped&&h.getTrimmedLength()<=e)continue;let p=[h];for(;h.isWrapped&&c>0;)h=this.lines.get(--c),p.unshift(h);if(!r){let $=this.ybase+this.y;if($>=c&&$<c+p.length)continue}let d=p[p.length-1].getTrimmedLength(),v=I2(p,this._cols,e),_=v.length-p.length,y;this.ybase===0&&this.y!==this.lines.length-1?y=Math.max(0,this.y-this.lines.maxLength+_):y=Math.max(0,this.lines.length-this.lines.maxLength+_);let b=[];for(let $=0;$<_;$++){let F=this.getBlankLine(tt,!0);b.push(F)}b.length>0&&(o.push({start:c+p.length+l,newLines:b}),l+=b.length),p.push(...b);let w=v.length-1,x=v[w];x===0&&(w--,x=v[w]);let k=p.length-_-1,D=d;for(;k>=0;){let $=Math.min(D,x);if(p[w]===void 0)break;if(p[w].copyCellsFrom(p[k],D-$,x-$,$,!0),x-=$,x===0&&(w--,x=v[w]),D-=$,D===0){k--;let F=Math.max(k,0);D=Jn(p,F,this._cols)}}for(let $=0;$<p.length;$++)v[$]<e&&p[$].setCell(v[$],n);let j=_-y;for(;j-- >0;)this.ybase===0?this.y<t-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+l)-t&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+_,this.ybase+t-1)}if(o.length>0){let c=[],h=[];for(let x=0;x<this.lines.length;x++)h.push(this.lines.get(x));let p=this.lines.length,d=p-1,v=0,_=o[v];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+l);let y=0;for(let x=Math.min(this.lines.maxLength-1,p+l-1);x>=0;x--)if(_&&_.start>d+y){for(let k=_.newLines.length-1;k>=0;k--)this.lines.set(x--,_.newLines[k]);x++,c.push({index:d+1,amount:_.newLines.length}),y+=_.newLines.length,_=o[++v]}else this.lines.set(x,h[d--]);let b=0;for(let x=c.length-1;x>=0;x--)c[x].index+=b,this.lines.onInsertEmitter.fire(c[x]),b+=c[x].amount;let w=Math.max(0,p+l-this.lines.maxLength);w>0&&this.lines.onTrimEmitter.fire(w)}}translateBufferLineToString(e,t,r=0,n){let o=this.lines.get(e);return o?o.translateToString(t,r,n):""}getWrappedRangeForLine(e){let t=e,r=e;for(;t>0&&this.lines.get(t).isWrapped;)t--;for(;r+1<this.lines.length&&this.lines.get(r+1).isWrapped;)r++;return{first:t,last:r}}setupTabStops(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0}prevStop(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e}nextStop(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e}clearMarkers(e){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].line===e&&(this.markers[t].dispose(),this.markers.splice(t--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].dispose();this.markers.length=0,this._isClearing=!1}addMarker(e){let t=new A2(e);return this.markers.push(t),t.register(this.lines.onTrim(r=>{t.line-=r,t.line<0&&t.dispose()})),t.register(this.lines.onInsert(r=>{t.line>=r.index&&(t.line+=r.amount)})),t.register(this.lines.onDelete(r=>{t.line>=r.index&&t.line<r.index+r.amount&&t.dispose(),t.line>r.index&&(t.line-=r.amount)})),t.register(t.onDispose(()=>this._removeMarker(t))),t}_removeMarker(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)}},F2=class extends Ne{constructor(e,t){super(),this._optionsService=e,this._bufferService=t,this._onBufferActivate=this._register(new oe),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this._register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this._register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new Ng(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new Ng(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(e,t){this._normal.resize(e,t),this._alt.resize(e,t),this.setupTabStops(e)}setupTabStops(e){this._normal.setupTabStops(e),this._alt.setupTabStops(e)}},Vv=2,qv=1,xh=class extends Ne{constructor(e){super(),this.isUserScrolling=!1,this._onResize=this._register(new oe),this.onResize=this._onResize.event,this._onScroll=this._register(new oe),this.onScroll=this._onScroll.event,this.cols=Math.max(e.rawOptions.cols||0,Vv),this.rows=Math.max(e.rawOptions.rows||0,qv),this.buffers=this._register(new F2(e,this)),this._register(this.buffers.onBufferActivate(t=>{this._onScroll.fire(t.activeBuffer.ydisp)}))}get buffer(){return this.buffers.active}resize(e,t){let r=this.cols!==e,n=this.rows!==t;this.cols=e,this.rows=t,this.buffers.resize(e,t),this._onResize.fire({cols:e,rows:t,colsChanged:r,rowsChanged:n})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(e,t=!1){let r=this.buffer,n;n=this._cachedBlankLine,(!n||n.length!==this.cols||n.getFg(0)!==e.fg||n.getBg(0)!==e.bg)&&(n=r.getBlankLine(e,t),this._cachedBlankLine=n),n.isWrapped=t;let o=r.ybase+r.scrollTop,l=r.ybase+r.scrollBottom;if(r.scrollTop===0){let c=r.lines.isFull;l===r.lines.length-1?c?r.lines.recycle().copyFrom(n):r.lines.push(n.clone()):r.lines.splice(l+1,0,n.clone()),c?this.isUserScrolling&&(r.ydisp=Math.max(r.ydisp-1,0)):(r.ybase++,this.isUserScrolling||r.ydisp++)}else{let c=l-o+1;r.lines.shiftElements(o+1,c-1,-1),r.lines.set(l,n.clone())}this.isUserScrolling||(r.ydisp=r.ybase),this._onScroll.fire(r.ydisp)}scrollLines(e,t){let r=this.buffer;if(e<0){if(r.ydisp===0)return;this.isUserScrolling=!0}else e+r.ydisp>=r.ybase&&(this.isUserScrolling=!1);let n=r.ydisp;r.ydisp=Math.max(Math.min(r.ydisp+e,r.ybase),0),n!==r.ydisp&&(t||this._onScroll.fire(r.ydisp))}};xh=Ge([ce(0,Tt)],xh);var bs={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnEraseInDisplay:!1,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},reflowCursorLine:!1,rescaleOverlappingGlyphs:!1,rightClickSelectsWord:Ga,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRuler:{}},z2=["normal","bold","100","200","300","400","500","600","700","800","900"],$2=class extends Ne{constructor(e){super(),this._onOptionChange=this._register(new oe),this.onOptionChange=this._onOptionChange.event;let t={...bs};for(let r in e)if(r in t)try{let n=e[r];t[r]=this._sanitizeAndValidateOption(r,n)}catch(n){console.error(n)}this.rawOptions=t,this.options={...t},this._setupOptions(),this._register(He(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(e,t){return this.onOptionChange(r=>{r===e&&t(this.rawOptions[e])})}onMultipleOptionChange(e,t){return this.onOptionChange(r=>{e.indexOf(r)!==-1&&t()})}_setupOptions(){let e=r=>{if(!(r in bs))throw new Error(`No option with key "${r}"`);return this.rawOptions[r]},t=(r,n)=>{if(!(r in bs))throw new Error(`No option with key "${r}"`);n=this._sanitizeAndValidateOption(r,n),this.rawOptions[r]!==n&&(this.rawOptions[r]=n,this._onOptionChange.fire(r))};for(let r in this.rawOptions){let n={get:e.bind(this,r),set:t.bind(this,r)};Object.defineProperty(this.options,r,n)}}_sanitizeAndValidateOption(e,t){switch(e){case"cursorStyle":if(t||(t=bs[e]),!H2(t))throw new Error(`"${t}" is not a valid value for ${e}`);break;case"wordSeparator":t||(t=bs[e]);break;case"fontWeight":case"fontWeightBold":if(typeof t=="number"&&1<=t&&t<=1e3)break;t=z2.includes(t)?t:bs[e];break;case"cursorWidth":t=Math.floor(t);case"lineHeight":case"tabStopWidth":if(t<1)throw new Error(`${e} cannot be less than 1, value: ${t}`);break;case"minimumContrastRatio":t=Math.max(1,Math.min(21,Math.round(t*10)/10));break;case"scrollback":if(t=Math.min(t,4294967295),t<0)throw new Error(`${e} cannot be less than 0, value: ${t}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(t<=0)throw new Error(`${e} cannot be less than or equal to 0, value: ${t}`);break;case"rows":case"cols":if(!t&&t!==0)throw new Error(`${e} must be numeric, value: ${t}`);break;case"windowsPty":t=t??{};break}return t}};function H2(e){return e==="block"||e==="underline"||e==="bar"}function Bn(e,t=5){if(typeof e!="object")return e;let r=Array.isArray(e)?[]:{};for(let n in e)r[n]=t<=1?e[n]:e[n]&&Bn(e[n],t-1);return r}var Lg=Object.freeze({insertMode:!1}),Dg=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,cursorBlink:void 0,cursorStyle:void 0,origin:!1,reverseWraparound:!1,sendFocus:!1,synchronizedOutput:!1,wraparound:!0}),bh=class extends Ne{constructor(e,t,r){super(),this._bufferService=e,this._logService=t,this._optionsService=r,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this._register(new oe),this.onData=this._onData.event,this._onUserInput=this._register(new oe),this.onUserInput=this._onUserInput.event,this._onBinary=this._register(new oe),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this._register(new oe),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=Bn(Lg),this.decPrivateModes=Bn(Dg)}reset(){this.modes=Bn(Lg),this.decPrivateModes=Bn(Dg)}triggerDataEvent(e,t=!1){if(this._optionsService.rawOptions.disableStdin)return;let r=this._bufferService.buffer;t&&this._optionsService.rawOptions.scrollOnUserInput&&r.ybase!==r.ydisp&&this._onRequestScrollToBottom.fire(),t&&this._onUserInput.fire(),this._logService.debug(`sending data "${e}"`),this._logService.trace("sending data (codes)",()=>e.split("").map(n=>n.charCodeAt(0))),this._onData.fire(e)}triggerBinaryEvent(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${e}"`),this._logService.trace("sending binary (codes)",()=>e.split("").map(t=>t.charCodeAt(0))),this._onBinary.fire(e))}};bh=Ge([ce(0,jt),ce(1,fv),ce(2,Tt)],bh);var Mg={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:e=>e.button===4||e.action!==1?!1:(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)},VT200:{events:19,restrict:e=>e.action!==32},DRAG:{events:23,restrict:e=>!(e.action===32&&e.button===3)},ANY:{events:31,restrict:e=>!0}};function Ru(e,t){let r=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return e.button===4?(r|=64,r|=e.action):(r|=e.button&3,e.button&4&&(r|=64),e.button&8&&(r|=128),e.action===32?r|=32:e.action===0&&!t&&(r|=3)),r}var Nu=String.fromCharCode,Og={DEFAULT:e=>{let t=[Ru(e,!1)+32,e.col+32,e.row+32];return t[0]>255||t[1]>255||t[2]>255?"":`\x1B[M${Nu(t[0])}${Nu(t[1])}${Nu(t[2])}`},SGR:e=>{let t=e.action===0&&e.button!==4?"m":"M";return`\x1B[<${Ru(e,!0)};${e.col};${e.row}${t}`},SGR_PIXELS:e=>{let t=e.action===0&&e.button!==4?"m":"M";return`\x1B[<${Ru(e,!0)};${e.x};${e.y}${t}`}},Ch=class extends Ne{constructor(e,t,r){super(),this._bufferService=e,this._coreService=t,this._optionsService=r,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._wheelPartialScroll=0,this._onProtocolChange=this._register(new oe),this.onProtocolChange=this._onProtocolChange.event;for(let n of Object.keys(Mg))this.addProtocol(n,Mg[n]);for(let n of Object.keys(Og))this.addEncoding(n,Og[n]);this.reset()}addProtocol(e,t){this._protocols[e]=t}addEncoding(e,t){this._encodings[e]=t}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(e){if(!this._protocols[e])throw new Error(`unknown protocol "${e}"`);this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(e){if(!this._encodings[e])throw new Error(`unknown encoding "${e}"`);this._activeEncoding=e}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null,this._wheelPartialScroll=0}consumeWheelEvent(e,t,r){if(e.deltaY===0||e.shiftKey||t===void 0||r===void 0)return 0;let n=t/r,o=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(o/=n+0,Math.abs(e.deltaY)<50&&(o*=.3),this._wheelPartialScroll+=o,o=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._bufferService.rows),o}_applyScrollModifier(e,t){return t.altKey||t.ctrlKey||t.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity}triggerMouseEvent(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows||e.button===4&&e.action===32||e.button===3&&e.action!==32||e.button!==4&&(e.action===2||e.action===3)||(e.col++,e.row++,e.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,e,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(e))return!1;let t=this._encodings[this._activeEncoding](e);return t&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=e,!0}explainEvents(e){return{down:!!(e&1),up:!!(e&2),drag:!!(e&4),move:!!(e&8),wheel:!!(e&16)}}_equalEvents(e,t,r){if(r){if(e.x!==t.x||e.y!==t.y)return!1}else if(e.col!==t.col||e.row!==t.row)return!1;return!(e.button!==t.button||e.action!==t.action||e.ctrl!==t.ctrl||e.alt!==t.alt||e.shift!==t.shift)}};Ch=Ge([ce(0,jt),ce(1,Yi),ce(2,Tt)],Ch);var Lu=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],W2=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],at;function U2(e,t){let r=0,n=t.length-1,o;if(e<t[0][0]||e>t[n][1])return!1;for(;n>=r;)if(o=r+n>>1,e>t[o][1])r=o+1;else if(e<t[o][0])n=o-1;else return!0;return!1}var K2=class{constructor(){if(this.version="6",!at){at=new Uint8Array(65536),at.fill(1),at[0]=0,at.fill(0,1,32),at.fill(0,127,160),at.fill(2,4352,4448),at[9001]=2,at[9002]=2,at.fill(2,11904,42192),at[12351]=1,at.fill(2,44032,55204),at.fill(2,63744,64256),at.fill(2,65040,65050),at.fill(2,65072,65136),at.fill(2,65280,65377),at.fill(2,65504,65511);for(let e=0;e<Lu.length;++e)at.fill(0,Lu[e][0],Lu[e][1]+1)}}wcwidth(e){return e<32?0:e<127?1:e<65536?at[e]:U2(e,W2)?0:e>=131072&&e<=196605||e>=196608&&e<=262141?2:1}charProperties(e,t){let r=this.wcwidth(e),n=r===0&&t!==0;if(n){let o=zi.extractWidth(t);o===0?n=!1:o>r&&(r=o)}return zi.createPropertyValue(0,r,n)}},zi=class Ia{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new oe,this.onChange=this._onChange.event;let t=new K2;this.register(t),this._active=t.version,this._activeProvider=t}static extractShouldJoin(t){return(t&1)!==0}static extractWidth(t){return t>>1&3}static extractCharKind(t){return t>>3}static createPropertyValue(t,r,n=!1){return(t&16777215)<<3|(r&3)<<1|(n?1:0)}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(t){if(!this._providers[t])throw new Error(`unknown Unicode version "${t}"`);this._active=t,this._activeProvider=this._providers[t],this._onChange.fire(t)}register(t){this._providers[t.version]=t}wcwidth(t){return this._activeProvider.wcwidth(t)}getStringCellWidth(t){let r=0,n=0,o=t.length;for(let l=0;l<o;++l){let c=t.charCodeAt(l);if(55296<=c&&c<=56319){if(++l>=o)return r+this.wcwidth(c);let d=t.charCodeAt(l);56320<=d&&d<=57343?c=(c-55296)*1024+d-56320+65536:r+=this.wcwidth(d)}let h=this.charProperties(c,n),p=Ia.extractWidth(h);Ia.extractShouldJoin(h)&&(p-=Ia.extractWidth(n)),r+=p,n=h}return r}charProperties(t,r){return this._activeProvider.charProperties(t,r)}},V2=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(e){this.glevel=e,this.charset=this._charsets[e]}setgCharset(e,t){this._charsets[e]=t,this.glevel===e&&(this.charset=t)}};function jg(e){let t=e.buffer.lines.get(e.buffer.ybase+e.buffer.y-1)?.get(e.cols-1),r=e.buffer.lines.get(e.buffer.ybase+e.buffer.y);r&&t&&(r.isWrapped=t[3]!==0&&t[3]!==32)}var Nn=2147483647,q2=256,Qv=class kh{constructor(t=32,r=32){if(this.maxLength=t,this.maxSubParamsLength=r,r>q2)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(t),this.length=0,this._subParams=new Int32Array(r),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(t),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(t){let r=new kh;if(!t.length)return r;for(let n=Array.isArray(t[0])?1:0;n<t.length;++n){let o=t[n];if(Array.isArray(o))for(let l=0;l<o.length;++l)r.addSubParam(o[l]);else r.addParam(o)}return r}clone(){let t=new kh(this.maxLength,this.maxSubParamsLength);return t.params.set(this.params),t.length=this.length,t._subParams.set(this._subParams),t._subParamsLength=this._subParamsLength,t._subParamsIdx.set(this._subParamsIdx),t._rejectDigits=this._rejectDigits,t._rejectSubDigits=this._rejectSubDigits,t._digitIsSub=this._digitIsSub,t}toArray(){let t=[];for(let r=0;r<this.length;++r){t.push(this.params[r]);let n=this._subParamsIdx[r]>>8,o=this._subParamsIdx[r]&255;o-n>0&&t.push(Array.prototype.slice.call(this._subParams,n,o))}return t}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(t){if(this._digitIsSub=!1,this.length>=this.maxLength){this._rejectDigits=!0;return}if(t<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=t>Nn?Nn:t}addSubParam(t){if(this._digitIsSub=!0,!!this.length){if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength){this._rejectSubDigits=!0;return}if(t<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=t>Nn?Nn:t,this._subParamsIdx[this.length-1]++}}hasSubParams(t){return(this._subParamsIdx[t]&255)-(this._subParamsIdx[t]>>8)>0}getSubParams(t){let r=this._subParamsIdx[t]>>8,n=this._subParamsIdx[t]&255;return n-r>0?this._subParams.subarray(r,n):null}getSubParamsAll(){let t={};for(let r=0;r<this.length;++r){let n=this._subParamsIdx[r]>>8,o=this._subParamsIdx[r]&255;o-n>0&&(t[r]=this._subParams.slice(n,o))}return t}addDigit(t){let r;if(this._rejectDigits||!(r=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let n=this._digitIsSub?this._subParams:this.params,o=n[r-1];n[r-1]=~o?Math.min(o*10+t,Nn):t}},Ln=[],Q2=class{constructor(){this._state=0,this._active=Ln,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(e,t){this._handlers[e]===void 0&&(this._handlers[e]=[]);let r=this._handlers[e];return r.push(t),{dispose:()=>{let n=r.indexOf(t);n!==-1&&r.splice(n,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=Ln}reset(){if(this._state===2)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].end(!1);this._stack.paused=!1,this._active=Ln,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||Ln,!this._active.length)this._handlerFb(this._id,"START");else for(let e=this._active.length-1;e>=0;e--)this._active[e].start()}_put(e,t,r){if(!this._active.length)this._handlerFb(this._id,"PUT",sl(e,t,r));else for(let n=this._active.length-1;n>=0;n--)this._active[n].put(e,t,r)}start(){this.reset(),this._state=1}put(e,t,r){if(this._state!==3){if(this._state===1)for(;t<r;){let n=e[t++];if(n===59){this._state=2,this._start();break}if(n<48||57<n){this._state=3;return}this._id===-1&&(this._id=0),this._id=this._id*10+n-48}this._state===2&&r-t>0&&this._put(e,t,r)}}end(e,t=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),!this._active.length)this._handlerFb(this._id,"END",e);else{let r=!1,n=this._active.length-1,o=!1;if(this._stack.paused&&(n=this._stack.loopPosition-1,r=t,o=this._stack.fallThrough,this._stack.paused=!1),!o&&r===!1){for(;n>=0&&(r=this._active[n].end(e),r!==!0);n--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!1,r;n--}for(;n>=0;n--)if(r=this._active[n].end(!1),r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!0,r}this._active=Ln,this._id=-1,this._state=0}}},Yt=class{constructor(e){this._handler=e,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(e,t,r){this._hitLimit||(this._data+=sl(e,t,r),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}end(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data),t instanceof Promise))return t.then(r=>(this._data="",this._hitLimit=!1,r));return this._data="",this._hitLimit=!1,t}},Dn=[],Y2=class{constructor(){this._handlers=Object.create(null),this._active=Dn,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=Dn}registerHandler(e,t){this._handlers[e]===void 0&&(this._handlers[e]=[]);let r=this._handlers[e];return r.push(t),{dispose:()=>{let n=r.indexOf(t);n!==-1&&r.splice(n,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}reset(){if(this._active.length)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].unhook(!1);this._stack.paused=!1,this._active=Dn,this._ident=0}hook(e,t){if(this.reset(),this._ident=e,this._active=this._handlers[e]||Dn,!this._active.length)this._handlerFb(this._ident,"HOOK",t);else for(let r=this._active.length-1;r>=0;r--)this._active[r].hook(t)}put(e,t,r){if(!this._active.length)this._handlerFb(this._ident,"PUT",sl(e,t,r));else for(let n=this._active.length-1;n>=0;n--)this._active[n].put(e,t,r)}unhook(e,t=!0){if(!this._active.length)this._handlerFb(this._ident,"UNHOOK",e);else{let r=!1,n=this._active.length-1,o=!1;if(this._stack.paused&&(n=this._stack.loopPosition-1,r=t,o=this._stack.fallThrough,this._stack.paused=!1),!o&&r===!1){for(;n>=0&&(r=this._active[n].unhook(e),r!==!0);n--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!1,r;n--}for(;n>=0;n--)if(r=this._active[n].unhook(!1),r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!0,r}this._active=Dn,this._ident=0}},In=new Qv;In.addParam(0);var Tg=class{constructor(e){this._handler=e,this._data="",this._params=In,this._hitLimit=!1}hook(e){this._params=e.length>1||e.params[0]?e.clone():In,this._data="",this._hitLimit=!1}put(e,t,r){this._hitLimit||(this._data+=sl(e,t,r),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}unhook(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data,this._params),t instanceof Promise))return t.then(r=>(this._params=In,this._data="",this._hitLimit=!1,r));return this._params=In,this._data="",this._hitLimit=!1,t}},G2=class{constructor(e){this.table=new Uint8Array(e)}setDefault(e,t){this.table.fill(e<<4|t)}add(e,t,r,n){this.table[t<<8|e]=r<<4|n}addMany(e,t,r,n){for(let o=0;o<e.length;o++)this.table[t<<8|e[o]]=r<<4|n}},lr=160,X2=(function(){let e=new G2(4095),t=Array.apply(null,Array(256)).map((h,p)=>p),r=(h,p)=>t.slice(h,p),n=r(32,127),o=r(0,24);o.push(25),o.push.apply(o,r(28,32));let l=r(0,14),c;e.setDefault(1,0),e.addMany(n,0,2,0);for(c in l)e.addMany([24,26,153,154],c,3,0),e.addMany(r(128,144),c,3,0),e.addMany(r(144,152),c,3,0),e.add(156,c,0,0),e.add(27,c,11,1),e.add(157,c,4,8),e.addMany([152,158,159],c,0,7),e.add(155,c,11,3),e.add(144,c,11,9);return e.addMany(o,0,3,0),e.addMany(o,1,3,1),e.add(127,1,0,1),e.addMany(o,8,0,8),e.addMany(o,3,3,3),e.add(127,3,0,3),e.addMany(o,4,3,4),e.add(127,4,0,4),e.addMany(o,6,3,6),e.addMany(o,5,3,5),e.add(127,5,0,5),e.addMany(o,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(n,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(r(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(n,7,0,7),e.addMany(o,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(r(64,127),3,7,0),e.addMany(r(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(r(48,60),4,8,4),e.addMany(r(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(r(32,64),6,0,6),e.add(127,6,0,6),e.addMany(r(64,127),6,0,0),e.addMany(r(32,48),3,9,5),e.addMany(r(32,48),5,9,5),e.addMany(r(48,64),5,0,6),e.addMany(r(64,127),5,7,0),e.addMany(r(32,48),4,9,5),e.addMany(r(32,48),1,9,2),e.addMany(r(32,48),2,9,2),e.addMany(r(48,127),2,10,0),e.addMany(r(48,80),1,10,0),e.addMany(r(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(r(96,127),1,10,0),e.add(80,1,11,9),e.addMany(o,9,0,9),e.add(127,9,0,9),e.addMany(r(28,32),9,0,9),e.addMany(r(32,48),9,9,12),e.addMany(r(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(o,11,0,11),e.addMany(r(32,128),11,0,11),e.addMany(r(28,32),11,0,11),e.addMany(o,10,0,10),e.add(127,10,0,10),e.addMany(r(28,32),10,0,10),e.addMany(r(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(r(32,48),10,9,12),e.addMany(o,12,0,12),e.add(127,12,0,12),e.addMany(r(28,32),12,0,12),e.addMany(r(32,48),12,9,12),e.addMany(r(48,64),12,0,11),e.addMany(r(64,127),12,12,13),e.addMany(r(64,127),10,12,13),e.addMany(r(64,127),9,12,13),e.addMany(o,13,13,13),e.addMany(n,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(lr,0,2,0),e.add(lr,8,5,8),e.add(lr,6,0,6),e.add(lr,11,0,11),e.add(lr,13,13,13),e})(),J2=class extends Ne{constructor(e=X2){super(),this._transitions=e,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new Qv,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(t,r,n)=>{},this._executeHandlerFb=t=>{},this._csiHandlerFb=(t,r)=>{},this._escHandlerFb=t=>{},this._errorHandlerFb=t=>t,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this._register(He(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this._register(new Q2),this._dcsParser=this._register(new Y2),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(e,t=[64,126]){let r=0;if(e.prefix){if(e.prefix.length>1)throw new Error("only one byte as prefix supported");if(r=e.prefix.charCodeAt(0),r&&60>r||r>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(e.intermediates){if(e.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let o=0;o<e.intermediates.length;++o){let l=e.intermediates.charCodeAt(o);if(32>l||l>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");r<<=8,r|=l}}if(e.final.length!==1)throw new Error("final must be a single byte");let n=e.final.charCodeAt(0);if(t[0]>n||n>t[1])throw new Error(`final must be in range ${t[0]} .. ${t[1]}`);return r<<=8,r|=n,r}identToString(e){let t=[];for(;e;)t.push(String.fromCharCode(e&255)),e>>=8;return t.reverse().join("")}setPrintHandler(e){this._printHandler=e}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(e,t){let r=this._identifier(e,[48,126]);this._escHandlers[r]===void 0&&(this._escHandlers[r]=[]);let n=this._escHandlers[r];return n.push(t),{dispose:()=>{let o=n.indexOf(t);o!==-1&&n.splice(o,1)}}}clearEscHandler(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]}setEscHandlerFallback(e){this._escHandlerFb=e}setExecuteHandler(e,t){this._executeHandlers[e.charCodeAt(0)]=t}clearExecuteHandler(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]}setExecuteHandlerFallback(e){this._executeHandlerFb=e}registerCsiHandler(e,t){let r=this._identifier(e);this._csiHandlers[r]===void 0&&(this._csiHandlers[r]=[]);let n=this._csiHandlers[r];return n.push(t),{dispose:()=>{let o=n.indexOf(t);o!==-1&&n.splice(o,1)}}}clearCsiHandler(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]}setCsiHandlerFallback(e){this._csiHandlerFb=e}registerDcsHandler(e,t){return this._dcsParser.registerHandler(this._identifier(e),t)}clearDcsHandler(e){this._dcsParser.clearHandler(this._identifier(e))}setDcsHandlerFallback(e){this._dcsParser.setHandlerFallback(e)}registerOscHandler(e,t){return this._oscParser.registerHandler(e,t)}clearOscHandler(e){this._oscParser.clearHandler(e)}setOscHandlerFallback(e){this._oscParser.setHandlerFallback(e)}setErrorHandler(e){this._errorHandler=e}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(e,t,r,n,o){this._parseStack.state=e,this._parseStack.handlers=t,this._parseStack.handlerPos=r,this._parseStack.transition=n,this._parseStack.chunkPos=o}parse(e,t,r){let n=0,o=0,l=0,c;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,l=this._parseStack.chunkPos+1;else{if(r===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let h=this._parseStack.handlers,p=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(r===!1&&p>-1){for(;p>=0&&(c=h[p](this._params),c!==!0);p--)if(c instanceof Promise)return this._parseStack.handlerPos=p,c}this._parseStack.handlers=[];break;case 4:if(r===!1&&p>-1){for(;p>=0&&(c=h[p](),c!==!0);p--)if(c instanceof Promise)return this._parseStack.handlerPos=p,c}this._parseStack.handlers=[];break;case 6:if(n=e[this._parseStack.chunkPos],c=this._dcsParser.unhook(n!==24&&n!==26,r),c)return c;n===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(n=e[this._parseStack.chunkPos],c=this._oscParser.end(n!==24&&n!==26,r),c)return c;n===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break}this._parseStack.state=0,l=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=this._parseStack.transition&15}for(let h=l;h<t;++h){switch(n=e[h],o=this._transitions.table[this.currentState<<8|(n<160?n:lr)],o>>4){case 2:for(let y=h+1;;++y){if(y>=t||(n=e[y])<32||n>126&&n<lr){this._printHandler(e,h,y),h=y-1;break}if(++y>=t||(n=e[y])<32||n>126&&n<lr){this._printHandler(e,h,y),h=y-1;break}if(++y>=t||(n=e[y])<32||n>126&&n<lr){this._printHandler(e,h,y),h=y-1;break}if(++y>=t||(n=e[y])<32||n>126&&n<lr){this._printHandler(e,h,y),h=y-1;break}}break;case 3:this._executeHandlers[n]?this._executeHandlers[n]():this._executeHandlerFb(n),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:h,code:n,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let p=this._csiHandlers[this._collect<<8|n],d=p?p.length-1:-1;for(;d>=0&&(c=p[d](this._params),c!==!0);d--)if(c instanceof Promise)return this._preserveStack(3,p,d,o,h),c;d<0&&this._csiHandlerFb(this._collect<<8|n,this._params),this.precedingJoinState=0;break;case 8:do switch(n){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(n-48)}while(++h<t&&(n=e[h])>47&&n<60);h--;break;case 9:this._collect<<=8,this._collect|=n;break;case 10:let v=this._escHandlers[this._collect<<8|n],_=v?v.length-1:-1;for(;_>=0&&(c=v[_](),c!==!0);_--)if(c instanceof Promise)return this._preserveStack(4,v,_,o,h),c;_<0&&this._escHandlerFb(this._collect<<8|n),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|n,this._params);break;case 13:for(let y=h+1;;++y)if(y>=t||(n=e[y])===24||n===26||n===27||n>127&&n<lr){this._dcsParser.put(e,h,y),h=y-1;break}break;case 14:if(c=this._dcsParser.unhook(n!==24&&n!==26),c)return this._preserveStack(6,[],0,o,h),c;n===27&&(o|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let y=h+1;;y++)if(y>=t||(n=e[y])<32||n>127&&n<lr){this._oscParser.put(e,h,y),h=y-1;break}break;case 6:if(c=this._oscParser.end(n!==24&&n!==26),c)return this._preserveStack(5,[],0,o,h),c;n===27&&(o|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break}this.currentState=o&15}}},Z2=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,eE=/^[\da-f]+$/;function Bg(e){if(!e)return;let t=e.toLowerCase();if(t.indexOf("rgb:")===0){t=t.slice(4);let r=Z2.exec(t);if(r){let n=r[1]?15:r[4]?255:r[7]?4095:65535;return[Math.round(parseInt(r[1]||r[4]||r[7]||r[10],16)/n*255),Math.round(parseInt(r[2]||r[5]||r[8]||r[11],16)/n*255),Math.round(parseInt(r[3]||r[6]||r[9]||r[12],16)/n*255)]}}else if(t.indexOf("#")===0&&(t=t.slice(1),eE.exec(t)&&[3,6,9,12].includes(t.length))){let r=t.length/3,n=[0,0,0];for(let o=0;o<3;++o){let l=parseInt(t.slice(r*o,r*o+r),16);n[o]=r===1?l<<4:r===2?l:r===3?l>>4:l>>8}return n}}function Du(e,t){let r=e.toString(16),n=r.length<2?"0"+r:r;switch(t){case 4:return r[0];case 8:return n;case 12:return(n+n).slice(0,3);default:return n+n}}function tE(e,t=16){let[r,n,o]=e;return`rgb:${Du(r,t)}/${Du(n,t)}/${Du(o,t)}`}var rE={"(":0,")":1,"*":2,"+":3,"-":1,".":2},_i=131072,Ig=10;function Ag(e,t){if(e>24)return t.setWinLines||!1;switch(e){case 1:return!!t.restoreWin;case 2:return!!t.minimizeWin;case 3:return!!t.setWinPosition;case 4:return!!t.setWinSizePixels;case 5:return!!t.raiseWin;case 6:return!!t.lowerWin;case 7:return!!t.refreshWin;case 8:return!!t.setWinSizeChars;case 9:return!!t.maximizeWin;case 10:return!!t.fullscreenWin;case 11:return!!t.getWinState;case 13:return!!t.getWinPosition;case 14:return!!t.getWinSizePixels;case 15:return!!t.getScreenSizePixels;case 16:return!!t.getCellSizePixels;case 18:return!!t.getWinSizeChars;case 19:return!!t.getScreenSizeChars;case 20:return!!t.getIconTitle;case 21:return!!t.getWinTitle;case 22:return!!t.pushTitle;case 23:return!!t.popTitle;case 24:return!!t.setWinLines}return!1}var Fg=5e3,zg=0,iE=class extends Ne{constructor(e,t,r,n,o,l,c,h,p=new J2){super(),this._bufferService=e,this._charsetService=t,this._coreService=r,this._logService=n,this._optionsService=o,this._oscLinkService=l,this._coreMouseService=c,this._unicodeService=h,this._parser=p,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new xC,this._utf8Decoder=new bC,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=tt.clone(),this._eraseAttrDataInternal=tt.clone(),this._onRequestBell=this._register(new oe),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this._register(new oe),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this._register(new oe),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this._register(new oe),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this._register(new oe),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this._register(new oe),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this._register(new oe),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this._register(new oe),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this._register(new oe),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this._register(new oe),this.onLineFeed=this._onLineFeed.event,this._onScroll=this._register(new oe),this.onScroll=this._onScroll.event,this._onTitleChange=this._register(new oe),this.onTitleChange=this._onTitleChange.event,this._onColor=this._register(new oe),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this._register(this._parser),this._dirtyRowTracker=new Eh(this._bufferService),this._activeBuffer=this._bufferService.buffer,this._register(this._bufferService.buffers.onBufferActivate(d=>this._activeBuffer=d.activeBuffer)),this._parser.setCsiHandlerFallback((d,v)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(d),params:v.toArray()})}),this._parser.setEscHandlerFallback(d=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(d)})}),this._parser.setExecuteHandlerFallback(d=>{this._logService.debug("Unknown EXECUTE code: ",{code:d})}),this._parser.setOscHandlerFallback((d,v,_)=>{this._logService.debug("Unknown OSC code: ",{identifier:d,action:v,data:_})}),this._parser.setDcsHandlerFallback((d,v,_)=>{v==="HOOK"&&(_=_.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(d),action:v,payload:_})}),this._parser.setPrintHandler((d,v,_)=>this.print(d,v,_)),this._parser.registerCsiHandler({final:"@"},d=>this.insertChars(d)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},d=>this.scrollLeft(d)),this._parser.registerCsiHandler({final:"A"},d=>this.cursorUp(d)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},d=>this.scrollRight(d)),this._parser.registerCsiHandler({final:"B"},d=>this.cursorDown(d)),this._parser.registerCsiHandler({final:"C"},d=>this.cursorForward(d)),this._parser.registerCsiHandler({final:"D"},d=>this.cursorBackward(d)),this._parser.registerCsiHandler({final:"E"},d=>this.cursorNextLine(d)),this._parser.registerCsiHandler({final:"F"},d=>this.cursorPrecedingLine(d)),this._parser.registerCsiHandler({final:"G"},d=>this.cursorCharAbsolute(d)),this._parser.registerCsiHandler({final:"H"},d=>this.cursorPosition(d)),this._parser.registerCsiHandler({final:"I"},d=>this.cursorForwardTab(d)),this._parser.registerCsiHandler({final:"J"},d=>this.eraseInDisplay(d,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},d=>this.eraseInDisplay(d,!0)),this._parser.registerCsiHandler({final:"K"},d=>this.eraseInLine(d,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},d=>this.eraseInLine(d,!0)),this._parser.registerCsiHandler({final:"L"},d=>this.insertLines(d)),this._parser.registerCsiHandler({final:"M"},d=>this.deleteLines(d)),this._parser.registerCsiHandler({final:"P"},d=>this.deleteChars(d)),this._parser.registerCsiHandler({final:"S"},d=>this.scrollUp(d)),this._parser.registerCsiHandler({final:"T"},d=>this.scrollDown(d)),this._parser.registerCsiHandler({final:"X"},d=>this.eraseChars(d)),this._parser.registerCsiHandler({final:"Z"},d=>this.cursorBackwardTab(d)),this._parser.registerCsiHandler({final:"`"},d=>this.charPosAbsolute(d)),this._parser.registerCsiHandler({final:"a"},d=>this.hPositionRelative(d)),this._parser.registerCsiHandler({final:"b"},d=>this.repeatPrecedingCharacter(d)),this._parser.registerCsiHandler({final:"c"},d=>this.sendDeviceAttributesPrimary(d)),this._parser.registerCsiHandler({prefix:">",final:"c"},d=>this.sendDeviceAttributesSecondary(d)),this._parser.registerCsiHandler({final:"d"},d=>this.linePosAbsolute(d)),this._parser.registerCsiHandler({final:"e"},d=>this.vPositionRelative(d)),this._parser.registerCsiHandler({final:"f"},d=>this.hVPosition(d)),this._parser.registerCsiHandler({final:"g"},d=>this.tabClear(d)),this._parser.registerCsiHandler({final:"h"},d=>this.setMode(d)),this._parser.registerCsiHandler({prefix:"?",final:"h"},d=>this.setModePrivate(d)),this._parser.registerCsiHandler({final:"l"},d=>this.resetMode(d)),this._parser.registerCsiHandler({prefix:"?",final:"l"},d=>this.resetModePrivate(d)),this._parser.registerCsiHandler({final:"m"},d=>this.charAttributes(d)),this._parser.registerCsiHandler({final:"n"},d=>this.deviceStatus(d)),this._parser.registerCsiHandler({prefix:"?",final:"n"},d=>this.deviceStatusPrivate(d)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},d=>this.softReset(d)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},d=>this.setCursorStyle(d)),this._parser.registerCsiHandler({final:"r"},d=>this.setScrollRegion(d)),this._parser.registerCsiHandler({final:"s"},d=>this.saveCursor(d)),this._parser.registerCsiHandler({final:"t"},d=>this.windowOptions(d)),this._parser.registerCsiHandler({final:"u"},d=>this.restoreCursor(d)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},d=>this.insertColumns(d)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},d=>this.deleteColumns(d)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},d=>this.selectProtected(d)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},d=>this.requestMode(d,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},d=>this.requestMode(d,!1)),this._parser.setExecuteHandler(Q.BEL,()=>this.bell()),this._parser.setExecuteHandler(Q.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(Q.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(Q.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(Q.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(Q.BS,()=>this.backspace()),this._parser.setExecuteHandler(Q.HT,()=>this.tab()),this._parser.setExecuteHandler(Q.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(Q.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(Ta.IND,()=>this.index()),this._parser.setExecuteHandler(Ta.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(Ta.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new Yt(d=>(this.setTitle(d),this.setIconName(d),!0))),this._parser.registerOscHandler(1,new Yt(d=>this.setIconName(d))),this._parser.registerOscHandler(2,new Yt(d=>this.setTitle(d))),this._parser.registerOscHandler(4,new Yt(d=>this.setOrReportIndexedColor(d))),this._parser.registerOscHandler(8,new Yt(d=>this.setHyperlink(d))),this._parser.registerOscHandler(10,new Yt(d=>this.setOrReportFgColor(d))),this._parser.registerOscHandler(11,new Yt(d=>this.setOrReportBgColor(d))),this._parser.registerOscHandler(12,new Yt(d=>this.setOrReportCursorColor(d))),this._parser.registerOscHandler(104,new Yt(d=>this.restoreIndexedColor(d))),this._parser.registerOscHandler(110,new Yt(d=>this.restoreFgColor(d))),this._parser.registerOscHandler(111,new Yt(d=>this.restoreBgColor(d))),this._parser.registerOscHandler(112,new Yt(d=>this.restoreCursorColor(d))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let d in ct)this._parser.registerEscHandler({intermediates:"(",final:d},()=>this.selectCharset("("+d)),this._parser.registerEscHandler({intermediates:")",final:d},()=>this.selectCharset(")"+d)),this._parser.registerEscHandler({intermediates:"*",final:d},()=>this.selectCharset("*"+d)),this._parser.registerEscHandler({intermediates:"+",final:d},()=>this.selectCharset("+"+d)),this._parser.registerEscHandler({intermediates:"-",final:d},()=>this.selectCharset("-"+d)),this._parser.registerEscHandler({intermediates:".",final:d},()=>this.selectCharset("."+d)),this._parser.registerEscHandler({intermediates:"/",final:d},()=>this.selectCharset("/"+d));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(d=>(this._logService.error("Parsing error: ",d),d)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new Tg((d,v)=>this.requestStatusString(d,v)))}getAttrData(){return this._curAttrData}_preserveStack(e,t,r,n){this._parseStack.paused=!0,this._parseStack.cursorStartX=e,this._parseStack.cursorStartY=t,this._parseStack.decodedLength=r,this._parseStack.position=n}_logSlowResolvingAsync(e){this._logService.logLevel<=3&&Promise.race([e,new Promise((t,r)=>setTimeout(()=>r("#SLOW_TIMEOUT"),Fg))]).catch(t=>{if(t!=="#SLOW_TIMEOUT")throw t;console.warn(`async parser handler taking longer than ${Fg} ms`)})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(e,t){let r,n=this._activeBuffer.x,o=this._activeBuffer.y,l=0,c=this._parseStack.paused;if(c){if(r=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,t))return this._logSlowResolvingAsync(r),r;n=this._parseStack.cursorStartX,o=this._parseStack.cursorStartY,this._parseStack.paused=!1,e.length>_i&&(l=this._parseStack.position+_i)}if(this._logService.logLevel<=1&&this._logService.debug(`parsing data ${typeof e=="string"?` "${e}"`:` "${Array.prototype.map.call(e,d=>String.fromCharCode(d)).join("")}"`}`),this._logService.logLevel===0&&this._logService.trace("parsing data (codes)",typeof e=="string"?e.split("").map(d=>d.charCodeAt(0)):e),this._parseBuffer.length<e.length&&this._parseBuffer.length<_i&&(this._parseBuffer=new Uint32Array(Math.min(e.length,_i))),c||this._dirtyRowTracker.clearRange(),e.length>_i)for(let d=l;d<e.length;d+=_i){let v=d+_i<e.length?d+_i:e.length,_=typeof e=="string"?this._stringDecoder.decode(e.substring(d,v),this._parseBuffer):this._utf8Decoder.decode(e.subarray(d,v),this._parseBuffer);if(r=this._parser.parse(this._parseBuffer,_))return this._preserveStack(n,o,_,d),this._logSlowResolvingAsync(r),r}else if(!c){let d=typeof e=="string"?this._stringDecoder.decode(e,this._parseBuffer):this._utf8Decoder.decode(e,this._parseBuffer);if(r=this._parser.parse(this._parseBuffer,d))return this._preserveStack(n,o,d,0),this._logSlowResolvingAsync(r),r}(this._activeBuffer.x!==n||this._activeBuffer.y!==o)&&this._onCursorMove.fire();let h=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),p=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);p<this._bufferService.rows&&this._onRequestRefreshRows.fire({start:Math.min(p,this._bufferService.rows-1),end:Math.min(h,this._bufferService.rows-1)})}print(e,t,r){let n,o,l=this._charsetService.charset,c=this._optionsService.rawOptions.screenReaderMode,h=this._bufferService.cols,p=this._coreService.decPrivateModes.wraparound,d=this._coreService.modes.insertMode,v=this._curAttrData,_=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&r-t>0&&_.getWidth(this._activeBuffer.x-1)===2&&_.setCellFromCodepoint(this._activeBuffer.x-1,0,1,v);let y=this._parser.precedingJoinState;for(let b=t;b<r;++b){if(n=e[b],n<127&&l){let D=l[String.fromCharCode(n)];D&&(n=D.charCodeAt(0))}let w=this._unicodeService.charProperties(n,y);o=zi.extractWidth(w);let x=zi.extractShouldJoin(w),k=x?zi.extractWidth(y):0;if(y=w,c&&this._onA11yChar.fire(vi(n)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+o-k>h){if(p){let D=_,j=this._activeBuffer.x-k;for(this._activeBuffer.x=k,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),_=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),k>0&&_ instanceof Tn&&_.copyCellsFrom(D,j,0,k,!1);j<h;)D.setCellFromCodepoint(j++,0,1,v)}else if(this._activeBuffer.x=h-1,o===2)continue}if(x&&this._activeBuffer.x){let D=_.getWidth(this._activeBuffer.x-1)?1:2;_.addCodepointToCell(this._activeBuffer.x-D,n,o);for(let j=o-k;--j>=0;)_.setCellFromCodepoint(this._activeBuffer.x++,0,0,v);continue}if(d&&(_.insertCells(this._activeBuffer.x,o-k,this._activeBuffer.getNullCell(v)),_.getWidth(h-1)===2&&_.setCellFromCodepoint(h-1,0,1,v)),_.setCellFromCodepoint(this._activeBuffer.x++,n,o,v),o>0)for(;--o;)_.setCellFromCodepoint(this._activeBuffer.x++,0,0,v)}this._parser.precedingJoinState=y,this._activeBuffer.x<h&&r-t>0&&_.getWidth(this._activeBuffer.x)===0&&!_.hasContent(this._activeBuffer.x)&&_.setCellFromCodepoint(this._activeBuffer.x,0,1,v),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(e,t){return e.final==="t"&&!e.prefix&&!e.intermediates?this._parser.registerCsiHandler(e,r=>Ag(r.params[0],this._optionsService.rawOptions.windowOptions)?t(r):!0):this._parser.registerCsiHandler(e,t)}registerDcsHandler(e,t){return this._parser.registerDcsHandler(e,new Tg(t))}registerEscHandler(e,t){return this._parser.registerEscHandler(e,t)}registerOscHandler(e,t){return this._parser.registerOscHandler(e,new Yt(t))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);e.hasWidth(this._activeBuffer.x)&&!e.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let e=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-e),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(e=this._bufferService.cols-1){this._activeBuffer.x=Math.min(e,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(e,t){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=e,this._activeBuffer.y=this._activeBuffer.scrollTop+t):(this._activeBuffer.x=e,this._activeBuffer.y=t),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(e,t){this._restrictCursor(),this._setCursor(this._activeBuffer.x+e,this._activeBuffer.y+t)}cursorUp(e){let t=this._activeBuffer.y-this._activeBuffer.scrollTop;return t>=0?this._moveCursor(0,-Math.min(t,e.params[0]||1)):this._moveCursor(0,-(e.params[0]||1)),!0}cursorDown(e){let t=this._activeBuffer.scrollBottom-this._activeBuffer.y;return t>=0?this._moveCursor(0,Math.min(t,e.params[0]||1)):this._moveCursor(0,e.params[0]||1),!0}cursorForward(e){return this._moveCursor(e.params[0]||1,0),!0}cursorBackward(e){return this._moveCursor(-(e.params[0]||1),0),!0}cursorNextLine(e){return this.cursorDown(e),this._activeBuffer.x=0,!0}cursorPrecedingLine(e){return this.cursorUp(e),this._activeBuffer.x=0,!0}cursorCharAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(e){return this._setCursor(e.length>=2?(e.params[1]||1)-1:0,(e.params[0]||1)-1),!0}charPosAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(e){return this._moveCursor(e.params[0]||1,0),!0}linePosAbsolute(e){return this._setCursor(this._activeBuffer.x,(e.params[0]||1)-1),!0}vPositionRelative(e){return this._moveCursor(0,e.params[0]||1),!0}hVPosition(e){return this.cursorPosition(e),!0}tabClear(e){let t=e.params[0];return t===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:t===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(e){let t=e.params[0];return t===1&&(this._curAttrData.bg|=536870912),(t===2||t===0)&&(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(e,t,r,n=!1,o=!1){let l=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);l.replaceCells(t,r,this._activeBuffer.getNullCell(this._eraseAttrData()),o),n&&(l.isWrapped=!1)}_resetBufferLine(e,t=!1){let r=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);r&&(r.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),t),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+e),r.isWrapped=!1)}eraseInDisplay(e,t=!1){this._restrictCursor(this._bufferService.cols);let r;switch(e.params[0]){case 0:for(r=this._activeBuffer.y,this._dirtyRowTracker.markDirty(r),this._eraseInBufferLine(r++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,t);r<this._bufferService.rows;r++)this._resetBufferLine(r,t);this._dirtyRowTracker.markDirty(r);break;case 1:for(r=this._activeBuffer.y,this._dirtyRowTracker.markDirty(r),this._eraseInBufferLine(r,0,this._activeBuffer.x+1,!0,t),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(r+1).isWrapped=!1);r--;)this._resetBufferLine(r,t);this._dirtyRowTracker.markDirty(0);break;case 2:if(this._optionsService.rawOptions.scrollOnEraseInDisplay){for(r=this._bufferService.rows,this._dirtyRowTracker.markRangeDirty(0,r-1);r--&&!this._activeBuffer.lines.get(this._activeBuffer.ybase+r)?.getTrimmedLength(););for(;r>=0;r--)this._bufferService.scroll(this._eraseAttrData())}else{for(r=this._bufferService.rows,this._dirtyRowTracker.markDirty(r-1);r--;)this._resetBufferLine(r,t);this._dirtyRowTracker.markDirty(0)}break;case 3:let n=this._activeBuffer.lines.length-this._bufferService.rows;n>0&&(this._activeBuffer.lines.trimStart(n),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-n,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-n,0),this._onScroll.fire(0));break}return!0}eraseInLine(e,t=!1){switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,t);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,t);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,t);break}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let r=this._activeBuffer.ybase+this._activeBuffer.y,n=this._bufferService.rows-1-this._activeBuffer.scrollBottom,o=this._bufferService.rows-1+this._activeBuffer.ybase-n+1;for(;t--;)this._activeBuffer.lines.splice(o-1,1),this._activeBuffer.lines.splice(r,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let r=this._activeBuffer.ybase+this._activeBuffer.y,n;for(n=this._bufferService.rows-1-this._activeBuffer.scrollBottom,n=this._bufferService.rows-1+this._activeBuffer.ybase-n;t--;)this._activeBuffer.lines.splice(r,1),this._activeBuffer.lines.splice(n,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.insertCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.deleteCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(tt));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);n.deleteCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData())),n.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);n.insertCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData())),n.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);n.insertCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData())),n.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);n.deleteCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData())),n.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(e.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(e){let t=this._parser.precedingJoinState;if(!t)return!0;let r=e.params[0]||1,n=zi.extractWidth(t),o=this._activeBuffer.x-n,l=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(o),c=new Uint32Array(l.length*r),h=0;for(let d=0;d<l.length;){let v=l.codePointAt(d)||0;c[h++]=v,d+=v>65535?2:1}let p=h;for(let d=1;d<r;++d)c.copyWithin(p,0,h),p+=h;return this.print(c,0,p),!0}sendDeviceAttributesPrimary(e){return e.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(Q.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(Q.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(e){return e.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(Q.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(Q.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(e.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(Q.ESC+"[>83;40003;0c")),!0}_is(e){return(this._optionsService.rawOptions.termName+"").indexOf(e)===0}setMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0;break}return!0}setModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,Ai),this._charsetService.setgCharset(1,Ai),this._charsetService.setgCharset(2,Ai),this._charsetService.setgCharset(3,Ai);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!0;break}return!0}resetMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1;break}return!0}resetModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),e.params[t]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!1,this._onRequestRefreshRows.fire(void 0);break}return!0}requestMode(e,t){let r;(x=>(x[x.NOT_RECOGNIZED=0]="NOT_RECOGNIZED",x[x.SET=1]="SET",x[x.RESET=2]="RESET",x[x.PERMANENTLY_SET=3]="PERMANENTLY_SET",x[x.PERMANENTLY_RESET=4]="PERMANENTLY_RESET"))(r||={});let n=this._coreService.decPrivateModes,{activeProtocol:o,activeEncoding:l}=this._coreMouseService,c=this._coreService,{buffers:h,cols:p}=this._bufferService,{active:d,alt:v}=h,_=this._optionsService.rawOptions,y=(x,k)=>(c.triggerDataEvent(`${Q.ESC}[${t?"":"?"}${x};${k}$y`),!0),b=x=>x?1:2,w=e.params[0];return t?w===2?y(w,4):w===4?y(w,b(c.modes.insertMode)):w===12?y(w,3):w===20?y(w,b(_.convertEol)):y(w,0):w===1?y(w,b(n.applicationCursorKeys)):w===3?y(w,_.windowOptions.setWinLines?p===80?2:p===132?1:0:0):w===6?y(w,b(n.origin)):w===7?y(w,b(n.wraparound)):w===8?y(w,3):w===9?y(w,b(o==="X10")):w===12?y(w,b(_.cursorBlink)):w===25?y(w,b(!c.isCursorHidden)):w===45?y(w,b(n.reverseWraparound)):w===66?y(w,b(n.applicationKeypad)):w===67?y(w,4):w===1e3?y(w,b(o==="VT200")):w===1002?y(w,b(o==="DRAG")):w===1003?y(w,b(o==="ANY")):w===1004?y(w,b(n.sendFocus)):w===1005?y(w,4):w===1006?y(w,b(l==="SGR")):w===1015?y(w,4):w===1016?y(w,b(l==="SGR_PIXELS")):w===1048?y(w,1):w===47||w===1047||w===1049?y(w,b(d===v)):w===2004?y(w,b(n.bracketedPasteMode)):w===2026?y(w,b(n.synchronizedOutput)):y(w,0)}_updateAttrColor(e,t,r,n,o){return t===2?(e|=50331648,e&=-16777216,e|=io.fromColorRGB([r,n,o])):t===5&&(e&=-50331904,e|=33554432|r&255),e}_extractColor(e,t,r){let n=[0,0,-1,0,0,0],o=0,l=0;do{if(n[l+o]=e.params[t+l],e.hasSubParams(t+l)){let c=e.getSubParams(t+l),h=0;do n[1]===5&&(o=1),n[l+h+1+o]=c[h];while(++h<c.length&&h+l+1+o<n.length);break}if(n[1]===5&&l+o>=2||n[1]===2&&l+o>=5)break;n[1]&&(o=1)}while(++l+t<e.length&&l+o<n.length);for(let c=2;c<n.length;++c)n[c]===-1&&(n[c]=0);switch(n[0]){case 38:r.fg=this._updateAttrColor(r.fg,n[1],n[3],n[4],n[5]);break;case 48:r.bg=this._updateAttrColor(r.bg,n[1],n[3],n[4],n[5]);break;case 58:r.extended=r.extended.clone(),r.extended.underlineColor=this._updateAttrColor(r.extended.underlineColor,n[1],n[3],n[4],n[5])}return l}_processUnderline(e,t){t.extended=t.extended.clone(),(!~e||e>5)&&(e=1),t.extended.underlineStyle=e,t.fg|=268435456,e===0&&(t.fg&=-268435457),t.updateExtended()}_processSGR0(e){e.fg=tt.fg,e.bg=tt.bg,e.extended=e.extended.clone(),e.extended.underlineStyle=0,e.extended.underlineColor&=-67108864,e.updateExtended()}charAttributes(e){if(e.length===1&&e.params[0]===0)return this._processSGR0(this._curAttrData),!0;let t=e.length,r,n=this._curAttrData;for(let o=0;o<t;o++)r=e.params[o],r>=30&&r<=37?(n.fg&=-50331904,n.fg|=16777216|r-30):r>=40&&r<=47?(n.bg&=-50331904,n.bg|=16777216|r-40):r>=90&&r<=97?(n.fg&=-50331904,n.fg|=16777216|r-90|8):r>=100&&r<=107?(n.bg&=-50331904,n.bg|=16777216|r-100|8):r===0?this._processSGR0(n):r===1?n.fg|=134217728:r===3?n.bg|=67108864:r===4?(n.fg|=268435456,this._processUnderline(e.hasSubParams(o)?e.getSubParams(o)[0]:1,n)):r===5?n.fg|=536870912:r===7?n.fg|=67108864:r===8?n.fg|=1073741824:r===9?n.fg|=2147483648:r===2?n.bg|=134217728:r===21?this._processUnderline(2,n):r===22?(n.fg&=-134217729,n.bg&=-134217729):r===23?n.bg&=-67108865:r===24?(n.fg&=-268435457,this._processUnderline(0,n)):r===25?n.fg&=-536870913:r===27?n.fg&=-67108865:r===28?n.fg&=-1073741825:r===29?n.fg&=2147483647:r===39?(n.fg&=-67108864,n.fg|=tt.fg&16777215):r===49?(n.bg&=-67108864,n.bg|=tt.bg&16777215):r===38||r===48||r===58?o+=this._extractColor(e,o,n):r===53?n.bg|=1073741824:r===55?n.bg&=-1073741825:r===59?(n.extended=n.extended.clone(),n.extended.underlineColor=-1,n.updateExtended()):r===100?(n.fg&=-67108864,n.fg|=tt.fg&16777215,n.bg&=-67108864,n.bg|=tt.bg&16777215):this._logService.debug("Unknown SGR attribute: %d.",r);return!0}deviceStatus(e){switch(e.params[0]){case 5:this._coreService.triggerDataEvent(`${Q.ESC}[0n`);break;case 6:let t=this._activeBuffer.y+1,r=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${Q.ESC}[${t};${r}R`);break}return!0}deviceStatusPrivate(e){switch(e.params[0]){case 6:let t=this._activeBuffer.y+1,r=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${Q.ESC}[?${t};${r}R`);break}return!0}softReset(e){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=tt.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(e){let t=e.length===0?1:e.params[0];if(t===0)this._coreService.decPrivateModes.cursorStyle=void 0,this._coreService.decPrivateModes.cursorBlink=void 0;else{switch(t){case 1:case 2:this._coreService.decPrivateModes.cursorStyle="block";break;case 3:case 4:this._coreService.decPrivateModes.cursorStyle="underline";break;case 5:case 6:this._coreService.decPrivateModes.cursorStyle="bar";break}let r=t%2===1;this._coreService.decPrivateModes.cursorBlink=r}return!0}setScrollRegion(e){let t=e.params[0]||1,r;return(e.length<2||(r=e.params[1])>this._bufferService.rows||r===0)&&(r=this._bufferService.rows),r>t&&(this._activeBuffer.scrollTop=t-1,this._activeBuffer.scrollBottom=r-1,this._setCursor(0,0)),!0}windowOptions(e){if(!Ag(e.params[0],this._optionsService.rawOptions.windowOptions))return!0;let t=e.length>1?e.params[1]:0;switch(e.params[0]){case 14:t!==2&&this._onRequestWindowsOptionsReport.fire(0);break;case 16:this._onRequestWindowsOptionsReport.fire(1);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${Q.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:(t===0||t===2)&&(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>Ig&&this._windowTitleStack.shift()),(t===0||t===1)&&(this._iconNameStack.push(this._iconName),this._iconNameStack.length>Ig&&this._iconNameStack.shift());break;case 23:(t===0||t===2)&&this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),(t===0||t===1)&&this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop());break}return!0}saveCursor(e){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(e){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(e){return this._windowTitle=e,this._onTitleChange.fire(e),!0}setIconName(e){return this._iconName=e,!0}setOrReportIndexedColor(e){let t=[],r=e.split(";");for(;r.length>1;){let n=r.shift(),o=r.shift();if(/^\d+$/.exec(n)){let l=parseInt(n);if($g(l))if(o==="?")t.push({type:0,index:l});else{let c=Bg(o);c&&t.push({type:1,index:l,color:c})}}}return t.length&&this._onColor.fire(t),!0}setHyperlink(e){let t=e.indexOf(";");if(t===-1)return!0;let r=e.slice(0,t).trim(),n=e.slice(t+1);return n?this._createHyperlink(r,n):r.trim()?!1:this._finishHyperlink()}_createHyperlink(e,t){this._getCurrentLinkId()&&this._finishHyperlink();let r=e.split(":"),n,o=r.findIndex(l=>l.startsWith("id="));return o!==-1&&(n=r[o].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:n,uri:t}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(e,t){let r=e.split(";");for(let n=0;n<r.length&&!(t>=this._specialColors.length);++n,++t)if(r[n]==="?")this._onColor.fire([{type:0,index:this._specialColors[t]}]);else{let o=Bg(r[n]);o&&this._onColor.fire([{type:1,index:this._specialColors[t],color:o}])}return!0}setOrReportFgColor(e){return this._setOrReportSpecialColor(e,0)}setOrReportBgColor(e){return this._setOrReportSpecialColor(e,1)}setOrReportCursorColor(e){return this._setOrReportSpecialColor(e,2)}restoreIndexedColor(e){if(!e)return this._onColor.fire([{type:2}]),!0;let t=[],r=e.split(";");for(let n=0;n<r.length;++n)if(/^\d+$/.exec(r[n])){let o=parseInt(r[n]);$g(o)&&t.push({type:2,index:o})}return t.length&&this._onColor.fire(t),!0}restoreFgColor(e){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(e){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(e){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,Ai),!0}selectCharset(e){return e.length!==2?(this.selectDefaultCharset(),!0):(e[0]==="/"||this._charsetService.setgCharset(rE[e[0]],ct[e[1]]||Ai),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let e=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,e,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=tt.clone(),this._eraseAttrDataInternal=tt.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=this._curAttrData.bg&67108863,this._eraseAttrDataInternal}setgLevel(e){return this._charsetService.setgLevel(e),!0}screenAlignmentPattern(){let e=new ur;e.content=1<<22|69,e.fg=this._curAttrData.fg,e.bg=this._curAttrData.bg,this._setCursor(0,0);for(let t=0;t<this._bufferService.rows;++t){let r=this._activeBuffer.ybase+this._activeBuffer.y+t,n=this._activeBuffer.lines.get(r);n&&(n.fill(e),n.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(e,t){let r=c=>(this._coreService.triggerDataEvent(`${Q.ESC}${c}${Q.ESC}\\`),!0),n=this._bufferService.buffer,o=this._optionsService.rawOptions;return r(e==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:e==='"p'?'P1$r61;1"p':e==="r"?`P1$r${n.scrollTop+1};${n.scrollBottom+1}r`:e==="m"?"P1$r0m":e===" q"?`P1$r${{block:2,underline:4,bar:6}[o.cursorStyle]-(o.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(e,t){this._dirtyRowTracker.markRangeDirty(e,t)}},Eh=class{constructor(e){this._bufferService=e,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(e){e<this.start?this.start=e:e>this.end&&(this.end=e)}markRangeDirty(e,t){e>t&&(zg=e,e=t,t=zg),e<this.start&&(this.start=e),t>this.end&&(this.end=t)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};Eh=Ge([ce(0,jt)],Eh);function $g(e){return 0<=e&&e<256}var sE=5e7,Hg=12,nE=50,oE=class extends Ne{constructor(e){super(),this._action=e,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this._register(new oe),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(e,t){if(t!==void 0&&this._syncCalls>t){this._syncCalls=0;return}if(this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;this._isSyncWriting=!0;let r;for(;r=this._writeBuffer.shift();){this._action(r);let n=this._callbacks.shift();n&&n()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(e,t){if(this._pendingData>sE)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput){this._didUserInput=!1,this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t),this._innerWrite();return}setTimeout(()=>this._innerWrite())}this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t)}_innerWrite(e=0,t=!0){let r=e||performance.now();for(;this._writeBuffer.length>this._bufferOffset;){let n=this._writeBuffer[this._bufferOffset],o=this._action(n,t);if(o){let c=h=>performance.now()-r>=Hg?setTimeout(()=>this._innerWrite(0,h)):this._innerWrite(r,h);o.catch(h=>(queueMicrotask(()=>{throw h}),Promise.resolve(!1))).then(c);return}let l=this._callbacks[this._bufferOffset];if(l&&l(),this._bufferOffset++,this._pendingData-=n.length,performance.now()-r>=Hg)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>nE&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}},Ph=class{constructor(e){this._bufferService=e,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(e){let t=this._bufferService.buffer;if(e.id===void 0){let h=t.addMarker(t.ybase+t.y),p={data:e,id:this._nextId++,lines:[h]};return h.onDispose(()=>this._removeMarkerFromLink(p,h)),this._dataByLinkId.set(p.id,p),p.id}let r=e,n=this._getEntryIdKey(r),o=this._entriesWithId.get(n);if(o)return this.addLineToLink(o.id,t.ybase+t.y),o.id;let l=t.addMarker(t.ybase+t.y),c={id:this._nextId++,key:this._getEntryIdKey(r),data:r,lines:[l]};return l.onDispose(()=>this._removeMarkerFromLink(c,l)),this._entriesWithId.set(c.key,c),this._dataByLinkId.set(c.id,c),c.id}addLineToLink(e,t){let r=this._dataByLinkId.get(e);if(r&&r.lines.every(n=>n.line!==t)){let n=this._bufferService.buffer.addMarker(t);r.lines.push(n),n.onDispose(()=>this._removeMarkerFromLink(r,n))}}getLinkData(e){return this._dataByLinkId.get(e)?.data}_getEntryIdKey(e){return`${e.id};;${e.uri}`}_removeMarkerFromLink(e,t){let r=e.lines.indexOf(t);r!==-1&&(e.lines.splice(r,1),e.lines.length===0&&(e.data.id!==void 0&&this._entriesWithId.delete(e.key),this._dataByLinkId.delete(e.id)))}};Ph=Ge([ce(0,jt)],Ph);var Wg=!1,aE=class extends Ne{constructor(e){super(),this._windowsWrappingHeuristics=this._register(new Ls),this._onBinary=this._register(new oe),this.onBinary=this._onBinary.event,this._onData=this._register(new oe),this.onData=this._onData.event,this._onLineFeed=this._register(new oe),this.onLineFeed=this._onLineFeed.event,this._onResize=this._register(new oe),this.onResize=this._onResize.event,this._onWriteParsed=this._register(new oe),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this._register(new oe),this._instantiationService=new D2,this.optionsService=this._register(new $2(e)),this._instantiationService.setService(Tt,this.optionsService),this._bufferService=this._register(this._instantiationService.createInstance(xh)),this._instantiationService.setService(jt,this._bufferService),this._logService=this._register(this._instantiationService.createInstance(wh)),this._instantiationService.setService(fv,this._logService),this.coreService=this._register(this._instantiationService.createInstance(bh)),this._instantiationService.setService(Yi,this.coreService),this.coreMouseService=this._register(this._instantiationService.createInstance(Ch)),this._instantiationService.setService(dv,this.coreMouseService),this.unicodeService=this._register(this._instantiationService.createInstance(zi)),this._instantiationService.setService(PC,this.unicodeService),this._charsetService=this._instantiationService.createInstance(V2),this._instantiationService.setService(EC,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(Ph),this._instantiationService.setService(pv,this._oscLinkService),this._inputHandler=this._register(new iE(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this._register(St.forward(this._inputHandler.onLineFeed,this._onLineFeed)),this._register(this._inputHandler),this._register(St.forward(this._bufferService.onResize,this._onResize)),this._register(St.forward(this.coreService.onData,this._onData)),this._register(St.forward(this.coreService.onBinary,this._onBinary)),this._register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom(!0))),this._register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this._register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this._register(this._bufferService.onScroll(()=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this._register(new oE((t,r)=>this._inputHandler.parse(t,r))),this._register(St.forward(this._writeBuffer.onWriteParsed,this._onWriteParsed))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this._register(new oe),this._onScroll.event(e=>{this._onScrollApi?.fire(e.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(e){for(let t in e)this.optionsService.options[t]=e[t]}write(e,t){this._writeBuffer.write(e,t)}writeSync(e,t){this._logService.logLevel<=3&&!Wg&&(this._logService.warn("writeSync is unreliable and will be removed soon."),Wg=!0),this._writeBuffer.writeSync(e,t)}input(e,t=!0){this.coreService.triggerDataEvent(e,t)}resize(e,t){isNaN(e)||isNaN(t)||(e=Math.max(e,Vv),t=Math.max(t,qv),this._bufferService.resize(e,t))}scroll(e,t=!1){this._bufferService.scroll(e,t)}scrollLines(e,t){this._bufferService.scrollLines(e,t)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(e){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){let t=e-this._bufferService.buffer.ydisp;t!==0&&this.scrollLines(t)}registerEscHandler(e,t){return this._inputHandler.registerEscHandler(e,t)}registerDcsHandler(e,t){return this._inputHandler.registerDcsHandler(e,t)}registerCsiHandler(e,t){return this._inputHandler.registerCsiHandler(e,t)}registerOscHandler(e,t){return this._inputHandler.registerOscHandler(e,t)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let e=!1,t=this.optionsService.rawOptions.windowsPty;t&&t.buildNumber!==void 0&&t.buildNumber!==void 0?e=t.backend==="conpty"&&t.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(e=!0),e?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let e=[];e.push(this.onLineFeed(jg.bind(null,this._bufferService))),e.push(this.registerCsiHandler({final:"H"},()=>(jg(this._bufferService),!1))),this._windowsWrappingHeuristics.value=He(()=>{for(let t of e)t.dispose()})}}},lE={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};function cE(e,t,r,n){let o={type:0,cancel:!1,key:void 0},l=(e.shiftKey?1:0)|(e.altKey?2:0)|(e.ctrlKey?4:0)|(e.metaKey?8:0);switch(e.keyCode){case 0:e.key==="UIKeyInputUpArrow"?t?o.key=Q.ESC+"OA":o.key=Q.ESC+"[A":e.key==="UIKeyInputLeftArrow"?t?o.key=Q.ESC+"OD":o.key=Q.ESC+"[D":e.key==="UIKeyInputRightArrow"?t?o.key=Q.ESC+"OC":o.key=Q.ESC+"[C":e.key==="UIKeyInputDownArrow"&&(t?o.key=Q.ESC+"OB":o.key=Q.ESC+"[B");break;case 8:o.key=e.ctrlKey?"\b":Q.DEL,e.altKey&&(o.key=Q.ESC+o.key);break;case 9:if(e.shiftKey){o.key=Q.ESC+"[Z";break}o.key=Q.HT,o.cancel=!0;break;case 13:o.key=e.altKey?Q.ESC+Q.CR:Q.CR,o.cancel=!0;break;case 27:o.key=Q.ESC,e.altKey&&(o.key=Q.ESC+Q.ESC),o.cancel=!0;break;case 37:if(e.metaKey)break;l?o.key=Q.ESC+"[1;"+(l+1)+"D":t?o.key=Q.ESC+"OD":o.key=Q.ESC+"[D";break;case 39:if(e.metaKey)break;l?o.key=Q.ESC+"[1;"+(l+1)+"C":t?o.key=Q.ESC+"OC":o.key=Q.ESC+"[C";break;case 38:if(e.metaKey)break;l?o.key=Q.ESC+"[1;"+(l+1)+"A":t?o.key=Q.ESC+"OA":o.key=Q.ESC+"[A";break;case 40:if(e.metaKey)break;l?o.key=Q.ESC+"[1;"+(l+1)+"B":t?o.key=Q.ESC+"OB":o.key=Q.ESC+"[B";break;case 45:!e.shiftKey&&!e.ctrlKey&&(o.key=Q.ESC+"[2~");break;case 46:l?o.key=Q.ESC+"[3;"+(l+1)+"~":o.key=Q.ESC+"[3~";break;case 36:l?o.key=Q.ESC+"[1;"+(l+1)+"H":t?o.key=Q.ESC+"OH":o.key=Q.ESC+"[H";break;case 35:l?o.key=Q.ESC+"[1;"+(l+1)+"F":t?o.key=Q.ESC+"OF":o.key=Q.ESC+"[F";break;case 33:e.shiftKey?o.type=2:e.ctrlKey?o.key=Q.ESC+"[5;"+(l+1)+"~":o.key=Q.ESC+"[5~";break;case 34:e.shiftKey?o.type=3:e.ctrlKey?o.key=Q.ESC+"[6;"+(l+1)+"~":o.key=Q.ESC+"[6~";break;case 112:l?o.key=Q.ESC+"[1;"+(l+1)+"P":o.key=Q.ESC+"OP";break;case 113:l?o.key=Q.ESC+"[1;"+(l+1)+"Q":o.key=Q.ESC+"OQ";break;case 114:l?o.key=Q.ESC+"[1;"+(l+1)+"R":o.key=Q.ESC+"OR";break;case 115:l?o.key=Q.ESC+"[1;"+(l+1)+"S":o.key=Q.ESC+"OS";break;case 116:l?o.key=Q.ESC+"[15;"+(l+1)+"~":o.key=Q.ESC+"[15~";break;case 117:l?o.key=Q.ESC+"[17;"+(l+1)+"~":o.key=Q.ESC+"[17~";break;case 118:l?o.key=Q.ESC+"[18;"+(l+1)+"~":o.key=Q.ESC+"[18~";break;case 119:l?o.key=Q.ESC+"[19;"+(l+1)+"~":o.key=Q.ESC+"[19~";break;case 120:l?o.key=Q.ESC+"[20;"+(l+1)+"~":o.key=Q.ESC+"[20~";break;case 121:l?o.key=Q.ESC+"[21;"+(l+1)+"~":o.key=Q.ESC+"[21~";break;case 122:l?o.key=Q.ESC+"[23;"+(l+1)+"~":o.key=Q.ESC+"[23~";break;case 123:l?o.key=Q.ESC+"[24;"+(l+1)+"~":o.key=Q.ESC+"[24~";break;default:if(e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey)e.keyCode>=65&&e.keyCode<=90?o.key=String.fromCharCode(e.keyCode-64):e.keyCode===32?o.key=Q.NUL:e.keyCode>=51&&e.keyCode<=55?o.key=String.fromCharCode(e.keyCode-51+27):e.keyCode===56?o.key=Q.DEL:e.keyCode===219?o.key=Q.ESC:e.keyCode===220?o.key=Q.FS:e.keyCode===221&&(o.key=Q.GS);else if((!r||n)&&e.altKey&&!e.metaKey){let c=lE[e.keyCode]?.[e.shiftKey?1:0];if(c)o.key=Q.ESC+c;else if(e.keyCode>=65&&e.keyCode<=90){let h=e.ctrlKey?e.keyCode-64:e.keyCode+32,p=String.fromCharCode(h);e.shiftKey&&(p=p.toUpperCase()),o.key=Q.ESC+p}else if(e.keyCode===32)o.key=Q.ESC+(e.ctrlKey?Q.NUL:" ");else if(e.key==="Dead"&&e.code.startsWith("Key")){let h=e.code.slice(3,4);e.shiftKey||(h=h.toLowerCase()),o.key=Q.ESC+h,o.cancel=!0}}else r&&!e.altKey&&!e.ctrlKey&&!e.shiftKey&&e.metaKey?e.keyCode===65&&(o.type=1):e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.keyCode>=48&&e.key.length===1?o.key=e.key:e.key&&e.ctrlKey&&(e.key==="_"&&(o.key=Q.US),e.key==="@"&&(o.key=Q.NUL));break}return o}var Ze=0,uE=class{constructor(e){this._getKey=e,this._array=[],this._insertedValues=[],this._flushInsertedTask=new Xa,this._isFlushingInserted=!1,this._deletedIndices=[],this._flushDeletedTask=new Xa,this._isFlushingDeleted=!1}clear(){this._array.length=0,this._insertedValues.length=0,this._flushInsertedTask.clear(),this._isFlushingInserted=!1,this._deletedIndices.length=0,this._flushDeletedTask.clear(),this._isFlushingDeleted=!1}insert(e){this._flushCleanupDeleted(),this._insertedValues.length===0&&this._flushInsertedTask.enqueue(()=>this._flushInserted()),this._insertedValues.push(e)}_flushInserted(){let e=this._insertedValues.sort((o,l)=>this._getKey(o)-this._getKey(l)),t=0,r=0,n=new Array(this._array.length+this._insertedValues.length);for(let o=0;o<n.length;o++)r>=this._array.length||this._getKey(e[t])<=this._getKey(this._array[r])?(n[o]=e[t],t++):n[o]=this._array[r++];this._array=n,this._insertedValues.length=0}_flushCleanupInserted(){!this._isFlushingInserted&&this._insertedValues.length>0&&this._flushInsertedTask.flush()}delete(e){if(this._flushCleanupInserted(),this._array.length===0)return!1;let t=this._getKey(e);if(t===void 0||(Ze=this._search(t),Ze===-1)||this._getKey(this._array[Ze])!==t)return!1;do if(this._array[Ze]===e)return this._deletedIndices.length===0&&this._flushDeletedTask.enqueue(()=>this._flushDeleted()),this._deletedIndices.push(Ze),!0;while(++Ze<this._array.length&&this._getKey(this._array[Ze])===t);return!1}_flushDeleted(){this._isFlushingDeleted=!0;let e=this._deletedIndices.sort((o,l)=>o-l),t=0,r=new Array(this._array.length-e.length),n=0;for(let o=0;o<this._array.length;o++)e[t]===o?t++:r[n++]=this._array[o];this._array=r,this._deletedIndices.length=0,this._isFlushingDeleted=!1}_flushCleanupDeleted(){!this._isFlushingDeleted&&this._deletedIndices.length>0&&this._flushDeletedTask.flush()}*getKeyIterator(e){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(Ze=this._search(e),!(Ze<0||Ze>=this._array.length)&&this._getKey(this._array[Ze])===e))do yield this._array[Ze];while(++Ze<this._array.length&&this._getKey(this._array[Ze])===e)}forEachByKey(e,t){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(Ze=this._search(e),!(Ze<0||Ze>=this._array.length)&&this._getKey(this._array[Ze])===e))do t(this._array[Ze]);while(++Ze<this._array.length&&this._getKey(this._array[Ze])===e)}values(){return this._flushCleanupInserted(),this._flushCleanupDeleted(),[...this._array].values()}_search(e){let t=0,r=this._array.length-1;for(;r>=t;){let n=t+r>>1,o=this._getKey(this._array[n]);if(o>e)r=n-1;else if(o<e)t=n+1;else{for(;n>0&&this._getKey(this._array[n-1])===e;)n--;return n}}return t}},Mu=0,Ug=0,hE=class extends Ne{constructor(){super(),this._decorations=new uE(e=>e?.marker.line),this._onDecorationRegistered=this._register(new oe),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this._register(new oe),this.onDecorationRemoved=this._onDecorationRemoved.event,this._register(He(()=>this.reset()))}get decorations(){return this._decorations.values()}registerDecoration(e){if(e.marker.isDisposed)return;let t=new dE(e);if(t){let r=t.marker.onDispose(()=>t.dispose()),n=t.onDispose(()=>{n.dispose(),t&&(this._decorations.delete(t)&&this._onDecorationRemoved.fire(t),r.dispose())});this._decorations.insert(t),this._onDecorationRegistered.fire(t)}return t}reset(){for(let e of this._decorations.values())e.dispose();this._decorations.clear()}*getDecorationsAtCell(e,t,r){let n=0,o=0;for(let l of this._decorations.getKeyIterator(t))n=l.options.x??0,o=n+(l.options.width??1),e>=n&&e<o&&(!r||(l.options.layer??"bottom")===r)&&(yield l)}forEachDecorationAtCell(e,t,r,n){this._decorations.forEachByKey(t,o=>{Mu=o.options.x??0,Ug=Mu+(o.options.width??1),e>=Mu&&e<Ug&&(!r||(o.options.layer??"bottom")===r)&&n(o)})}},dE=class extends xi{constructor(e){super(),this.options=e,this.onRenderEmitter=this.add(new oe),this.onRender=this.onRenderEmitter.event,this._onDispose=this.add(new oe),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=e.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=qe.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=qe.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}},fE=1e3,pE=class{constructor(e,t=fE){this._renderCallback=e,this._debounceThresholdMS=t,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(e,t,r){this._rowCount=r,e=e!==void 0?e:0,t=t!==void 0?t:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,e):e,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,t):t;let n=performance.now();if(n-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=n,this._innerRefresh();else if(!this._additionalRefreshRequested){let o=n-this._lastRefreshMs,l=this._debounceThresholdMS-o;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=performance.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},l)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t)}},Kg=20,Ja=class extends Ne{constructor(e,t,r,n){super(),this._terminal=e,this._coreBrowserService=r,this._renderService=n,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="";let o=this._coreBrowserService.mainDocument;this._accessibilityContainer=o.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=o.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let l=0;l<this._terminal.rows;l++)this._rowElements[l]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[l]);if(this._topBoundaryFocusListener=l=>this._handleBoundaryFocus(l,0),this._bottomBoundaryFocusListener=l=>this._handleBoundaryFocus(l,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=o.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this._register(new pE(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this._register(this._terminal.onResize(l=>this._handleResize(l.rows))),this._register(this._terminal.onRender(l=>this._refreshRows(l.start,l.end))),this._register(this._terminal.onScroll(()=>this._refreshRows())),this._register(this._terminal.onA11yChar(l=>this._handleChar(l))),this._register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this._register(this._terminal.onA11yTab(l=>this._handleTab(l))),this._register(this._terminal.onKey(l=>this._handleKey(l.key))),this._register(this._terminal.onBlur(()=>this._clearLiveRegion())),this._register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._register(xe(o,"selectionchange",()=>this._handleSelectionChange())),this._register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRowsDimensions(),this._refreshRows(),this._register(He(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(e){for(let t=0;t<e;t++)this._handleChar(" ")}_handleChar(e){this._liveRegionLineCount<Kg+1&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,e===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===Kg+1&&(this._liveRegion.textContent+=qu.get())))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(e){this._clearLiveRegion(),/\p{Control}/u.test(e)||this._charsToConsume.push(e)}_refreshRows(e,t){this._liveRegionDebouncer.refresh(e,t,this._terminal.rows)}_renderRows(e,t){let r=this._terminal.buffer,n=r.lines.length.toString();for(let o=e;o<=t;o++){let l=r.lines.get(r.ydisp+o),c=[],h=l?.translateToString(!0,void 0,void 0,c)||"",p=(r.ydisp+o+1).toString(),d=this._rowElements[o];d&&(h.length===0?(d.textContent="",this._rowColumns.set(d,[0,1])):(d.textContent=h,this._rowColumns.set(d,c)),d.setAttribute("aria-posinset",p),d.setAttribute("aria-setsize",n),this._alignRowWidth(d))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(e,t){let r=e.target,n=this._rowElements[t===0?1:this._rowElements.length-2],o=r.getAttribute("aria-posinset"),l=t===0?"1":`${this._terminal.buffer.lines.length}`;if(o===l||e.relatedTarget!==n)return;let c,h;if(t===0?(c=r,h=this._rowElements.pop(),this._rowContainer.removeChild(h)):(c=this._rowElements.shift(),h=r,this._rowContainer.removeChild(c)),c.removeEventListener("focus",this._topBoundaryFocusListener),h.removeEventListener("focus",this._bottomBoundaryFocusListener),t===0){let p=this._createAccessibilityTreeNode();this._rowElements.unshift(p),this._rowContainer.insertAdjacentElement("afterbegin",p)}else{let p=this._createAccessibilityTreeNode();this._rowElements.push(p),this._rowContainer.appendChild(p)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(t===0?-1:1),this._rowElements[t===0?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;let e=this._coreBrowserService.mainDocument.getSelection();if(!e)return;if(e.isCollapsed){this._rowContainer.contains(e.anchorNode)&&this._terminal.clearSelection();return}if(!e.anchorNode||!e.focusNode){console.error("anchorNode and/or focusNode are null");return}let t={node:e.anchorNode,offset:e.anchorOffset},r={node:e.focusNode,offset:e.focusOffset};if((t.node.compareDocumentPosition(r.node)&Node.DOCUMENT_POSITION_PRECEDING||t.node===r.node&&t.offset>r.offset)&&([t,r]=[r,t]),t.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(t={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(t.node))return;let n=this._rowElements.slice(-1)[0];if(r.node.compareDocumentPosition(n)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(r={node:n,offset:n.textContent?.length??0}),!this._rowContainer.contains(r.node))return;let o=({node:h,offset:p})=>{let d=h instanceof Text?h.parentNode:h,v=parseInt(d?.getAttribute("aria-posinset"),10)-1;if(isNaN(v))return console.warn("row is invalid. Race condition?"),null;let _=this._rowColumns.get(d);if(!_)return console.warn("columns is null. Race condition?"),null;let y=p<_.length?_[p]:_.slice(-1)[0]+1;return y>=this._terminal.cols&&(++v,y=0),{row:v,column:y}},l=o(t),c=o(r);if(!(!l||!c)){if(l.row>c.row||l.row===c.row&&l.column>=c.column)throw new Error("invalid range");this._terminal.select(l.column,l.row,(c.row-l.row)*this._terminal.cols-l.column+c.column)}}_handleResize(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let t=this._rowContainer.children.length;t<this._terminal.rows;t++)this._rowElements[t]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[t]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let e=this._coreBrowserService.mainDocument.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){Object.assign(this._accessibilityContainer.style,{width:`${this._renderService.dimensions.css.canvas.width}px`,fontSize:`${this._terminal.options.fontSize}px`}),this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e]),this._alignRowWidth(this._rowElements[e])}}_refreshRowDimensions(e){e.style.height=`${this._renderService.dimensions.css.cell.height}px`}_alignRowWidth(e){e.style.transform="";let t=e.getBoundingClientRect().width,r=this._rowColumns.get(e)?.slice(-1)?.[0];if(!r)return;let n=r*this._renderService.dimensions.css.cell.width;e.style.transform=`scaleX(${n/t})`}};Ja=Ge([ce(1,Gh),ce(2,Qr),ce(3,Yr)],Ja);var Rh=class extends Ne{constructor(e,t,r,n,o){super(),this._element=e,this._mouseService=t,this._renderService=r,this._bufferService=n,this._linkProviderService=o,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this._register(new oe),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this._register(new oe),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this._register(He(()=>{Vi(this._linkCacheDisposables),this._linkCacheDisposables.length=0,this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this._register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this._register(xe(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this._register(xe(this._element,"mousemove",this._handleMouseMove.bind(this))),this._register(xe(this._element,"mousedown",this._handleMouseDown.bind(this))),this._register(xe(this._element,"mouseup",this._handleMouseUp.bind(this)))}get currentLink(){return this._currentLink}_handleMouseMove(e){this._lastMouseEvent=e;let t=this._positionFromMouseEvent(e,this._element,this._mouseService);if(!t)return;this._isMouseOut=!1;let r=e.composedPath();for(let n=0;n<r.length;n++){let o=r[n];if(o.classList.contains("xterm"))break;if(o.classList.contains("xterm-hover"))return}(!this._lastBufferCell||t.x!==this._lastBufferCell.x||t.y!==this._lastBufferCell.y)&&(this._handleHover(t),this._lastBufferCell=t)}_handleHover(e){if(this._activeLine!==e.y||this._wasResized){this._clearCurrentLink(),this._askForLink(e,!1),this._wasResized=!1;return}this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))}_askForLink(e,t){(!this._activeProviderReplies||!t)&&(this._activeProviderReplies?.forEach(n=>{n?.forEach(o=>{o.link.dispose&&o.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);let r=!1;for(let[n,o]of this._linkProviderService.linkProviders.entries())t?this._activeProviderReplies?.get(n)&&(r=this._checkLinkProviderResult(n,e,r)):o.provideLinks(e.y,l=>{if(this._isMouseOut)return;let c=l?.map(h=>({link:h}));this._activeProviderReplies?.set(n,c),r=this._checkLinkProviderResult(n,e,r),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(e.y,this._activeProviderReplies)})}_removeIntersectingLinks(e,t){let r=new Set;for(let n=0;n<t.size;n++){let o=t.get(n);if(o)for(let l=0;l<o.length;l++){let c=o[l],h=c.link.range.start.y<e?0:c.link.range.start.x,p=c.link.range.end.y>e?this._bufferService.cols:c.link.range.end.x;for(let d=h;d<=p;d++){if(r.has(d)){o.splice(l--,1);break}r.add(d)}}}}_checkLinkProviderResult(e,t,r){if(!this._activeProviderReplies)return r;let n=this._activeProviderReplies.get(e),o=!1;for(let l=0;l<e;l++)(!this._activeProviderReplies.has(l)||this._activeProviderReplies.get(l))&&(o=!0);if(!o&&n){let l=n.find(c=>this._linkAtPosition(c.link,t));l&&(r=!0,this._handleNewLink(l))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!r)for(let l=0;l<this._activeProviderReplies.size;l++){let c=this._activeProviderReplies.get(l)?.find(h=>this._linkAtPosition(h.link,t));if(c){r=!0,this._handleNewLink(c);break}}return r}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(e){if(!this._currentLink)return;let t=this._positionFromMouseEvent(e,this._element,this._mouseService);t&&this._mouseDownLink&&mE(this._mouseDownLink.link,this._currentLink.link)&&this._linkAtPosition(this._currentLink.link,t)&&this._currentLink.link.activate(e,this._currentLink.link.text)}_clearCurrentLink(e,t){!this._currentLink||!this._lastMouseEvent||(!e||!t||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=t)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,Vi(this._linkCacheDisposables),this._linkCacheDisposables.length=0)}_handleNewLink(e){if(!this._lastMouseEvent)return;let t=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);t&&this._linkAtPosition(e.link,t)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0?!0:e.link.decorations.underline,pointerCursor:e.link.decorations===void 0?!0:e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:r=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==r&&(this._currentLink.state.decorations.pointerCursor=r,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",r))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:r=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==r&&(this._currentLink.state.decorations.underline=r,this._currentLink.state.isHovered&&this._fireUnderlineEvent(e.link,r))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(r=>{if(!this._currentLink)return;let n=r.start===0?0:r.start+1+this._bufferService.buffer.ydisp,o=this._bufferService.buffer.ydisp+1+r.end;if(this._currentLink.link.range.start.y>=n&&this._currentLink.link.range.end.y<=o&&(this._clearCurrentLink(n,o),this._lastMouseEvent)){let l=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);l&&this._askForLink(l,!1)}})))}_linkHover(e,t,r){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),t.hover&&t.hover(r,t.text)}_fireUnderlineEvent(e,t){let r=e.range,n=this._bufferService.buffer.ydisp,o=this._createLinkUnderlineEvent(r.start.x-1,r.start.y-n-1,r.end.x,r.end.y-n-1,void 0);(t?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(o)}_linkLeave(e,t,r){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),t.leave&&t.leave(r,t.text)}_linkAtPosition(e,t){let r=e.range.start.y*this._bufferService.cols+e.range.start.x,n=e.range.end.y*this._bufferService.cols+e.range.end.x,o=t.y*this._bufferService.cols+t.x;return r<=o&&o<=n}_positionFromMouseEvent(e,t,r){let n=r.getCoords(e,t,this._bufferService.cols,this._bufferService.rows);if(n)return{x:n[0],y:n[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(e,t,r,n,o){return{x1:e,y1:t,x2:r,y2:n,cols:this._bufferService.cols,fg:o}}};Rh=Ge([ce(1,Xh),ce(2,Yr),ce(3,jt),ce(4,gv)],Rh);function mE(e,t){return e.text===t.text&&e.range.start.x===t.range.start.x&&e.range.start.y===t.range.start.y&&e.range.end.x===t.range.end.x&&e.range.end.y===t.range.end.y}var gE=class extends aE{constructor(e={}){super(e),this._linkifier=this._register(new Ls),this.browser=Tv,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this._register(new Ls),this._onCursorMove=this._register(new oe),this.onCursorMove=this._onCursorMove.event,this._onKey=this._register(new oe),this.onKey=this._onKey.event,this._onRender=this._register(new oe),this.onRender=this._onRender.event,this._onSelectionChange=this._register(new oe),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this._register(new oe),this.onTitleChange=this._onTitleChange.event,this._onBell=this._register(new oe),this.onBell=this._onBell.event,this._onFocus=this._register(new oe),this._onBlur=this._register(new oe),this._onA11yCharEmitter=this._register(new oe),this._onA11yTabEmitter=this._register(new oe),this._onWillOpen=this._register(new oe),this._setup(),this._decorationService=this._instantiationService.createInstance(hE),this._instantiationService.setService(so,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(n2),this._instantiationService.setService(gv,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(Yu)),this._register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this._register(this._inputHandler.onRequestRefreshRows(t=>this.refresh(t?.start??0,t?.end??this.rows-1))),this._register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this._register(this._inputHandler.onRequestReset(()=>this.reset())),this._register(this._inputHandler.onRequestWindowsOptionsReport(t=>this._reportWindowsOptions(t))),this._register(this._inputHandler.onColor(t=>this._handleColorEvent(t))),this._register(St.forward(this._inputHandler.onCursorMove,this._onCursorMove)),this._register(St.forward(this._inputHandler.onTitleChange,this._onTitleChange)),this._register(St.forward(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this._register(St.forward(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this._register(this._bufferService.onResize(t=>this._afterResize(t.cols,t.rows))),this._register(He(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}get linkifier(){return this._linkifier.value}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(e){if(this._themeService)for(let t of e){let r,n="";switch(t.index){case 256:r="foreground",n="10";break;case 257:r="background",n="11";break;case 258:r="cursor",n="12";break;default:r="ansi",n="4;"+t.index}switch(t.type){case 0:let o=Fe.toColorRGB(r==="ansi"?this._themeService.colors.ansi[t.index]:this._themeService.colors[r]);this.coreService.triggerDataEvent(`${Q.ESC}]${n};${tE(o)}${Ov.ST}`);break;case 1:if(r==="ansi")this._themeService.modifyColors(l=>l.ansi[t.index]=rt.toColor(...t.color));else{let l=r;this._themeService.modifyColors(c=>c[l]=rt.toColor(...t.color))}break;case 2:this._themeService.restoreColor(t.index);break}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(e){e?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(Ja,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(e){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Q.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Q.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let e=this.buffer.ybase+this.buffer.y,t=this.buffer.lines.get(e);if(!t)return;let r=Math.min(this.buffer.x,this.cols-1),n=this._renderService.dimensions.css.cell.height,o=t.getWidth(r),l=this._renderService.dimensions.css.cell.width*o,c=this.buffer.y*this._renderService.dimensions.css.cell.height,h=r*this._renderService.dimensions.css.cell.width;this.textarea.style.left=h+"px",this.textarea.style.top=c+"px",this.textarea.style.width=l+"px",this.textarea.style.height=n+"px",this.textarea.style.lineHeight=n+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this._register(xe(this.element,"copy",t=>{this.hasSelection()&&SC(t,this._selectionService)}));let e=t=>wC(t,this.textarea,this.coreService,this.optionsService);this._register(xe(this.textarea,"paste",e)),this._register(xe(this.element,"paste",e)),Bv?this._register(xe(this.element,"mousedown",t=>{t.button===2&&tg(t,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this._register(xe(this.element,"contextmenu",t=>{tg(t,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),nd&&this._register(xe(this.element,"auxclick",t=>{t.button===1&&av(t,this.textarea,this.screenElement)}))}_bindKeys(){this._register(xe(this.textarea,"keyup",e=>this._keyUp(e),!0)),this._register(xe(this.textarea,"keydown",e=>this._keyDown(e),!0)),this._register(xe(this.textarea,"keypress",e=>this._keyPress(e),!0)),this._register(xe(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this._register(xe(this.textarea,"compositionupdate",e=>this._compositionHelper.compositionupdate(e))),this._register(xe(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this._register(xe(this.textarea,"input",e=>this._inputEvent(e),!0)),this._register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(e){if(!e)throw new Error("Terminal requires a parent element.");if(e.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService){this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView);return}this._document=e.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),e.appendChild(this.element);let t=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),t.appendChild(this._viewportElement),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._register(xe(this.screenElement,"mousemove",o=>this.updateCursorStyle(o))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),t.appendChild(this.screenElement);let r=this.textarea=this._document.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",Vu.get()),Fv||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._register(this.optionsService.onSpecificOptionChange("disableStdin",()=>r.readOnly=this.optionsService.rawOptions.disableStdin)),this.textarea.readOnly=this.optionsService.rawOptions.disableStdin,this._coreBrowserService=this._register(this._instantiationService.createInstance(i2,this.textarea,e.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(Qr,this._coreBrowserService),this._register(xe(this.textarea,"focus",o=>this._handleTextAreaFocus(o))),this._register(xe(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(gh,this._document,this._helperContainer),this._instantiationService.setService(nl,this._charSizeService),this._themeService=this._instantiationService.createInstance(Sh),this._instantiationService.setService(Ts,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(Ya),this._instantiationService.setService(mv,this._characterJoinerService),this._renderService=this._register(this._instantiationService.createInstance(vh,this.rows,this.screenElement)),this._instantiationService.setService(Yr,this._renderService),this._register(this._renderService.onRenderedViewportChange(o=>this._onRender.fire(o))),this.onResize(o=>this._renderService.resize(o.cols,o.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(fh,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(_h),this._instantiationService.setService(Xh,this._mouseService);let n=this._linkifier.value=this._register(this._instantiationService.createInstance(Rh,this.screenElement));this.element.appendChild(t);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this._register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this._register(this.onBlur(()=>this._renderService.handleBlur())),this._register(this.onFocus(()=>this._renderService.handleFocus())),this._viewport=this._register(this._instantiationService.createInstance(hh,this.element,this.screenElement)),this._register(this._viewport.onRequestScrollLines(o=>{super.scrollLines(o,!1),this.refresh(0,this.rows-1)})),this._selectionService=this._register(this._instantiationService.createInstance(yh,this.element,this.screenElement,n)),this._instantiationService.setService(NC,this._selectionService),this._register(this._selectionService.onRequestScrollLines(o=>this.scrollLines(o.amount,o.suppressScrollEvent))),this._register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this._register(this._selectionService.onRequestRedraw(o=>this._renderService.handleSelectionChanged(o.start,o.end,o.columnSelectMode))),this._register(this._selectionService.onLinuxMouseSelection(o=>{this.textarea.value=o,this.textarea.focus(),this.textarea.select()})),this._register(St.any(this._onScroll.event,this._inputHandler.onScroll)(()=>{this._selectionService.refresh(),this._viewport?.queueSync()})),this._register(this._instantiationService.createInstance(dh,this.screenElement)),this._register(xe(this.element,"mousedown",o=>this._selectionService.handleMouseDown(o))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(Ja,this)),this._register(this.optionsService.onSpecificOptionChange("screenReaderMode",o=>this._handleScreenReaderModeOptionChange(o))),this.options.overviewRuler.width&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(Qa,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRuler",o=>{!this._overviewRulerRenderer&&o&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(Qa,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(mh,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let e=this,t=this.element;function r(l){let c=e._mouseService.getMouseReportCoords(l,e.screenElement);if(!c)return!1;let h,p;switch(l.overrideType||l.type){case"mousemove":p=32,l.buttons===void 0?(h=3,l.button!==void 0&&(h=l.button<3?l.button:3)):h=l.buttons&1?0:l.buttons&4?1:l.buttons&2?2:3;break;case"mouseup":p=0,h=l.button<3?l.button:3;break;case"mousedown":p=1,h=l.button<3?l.button:3;break;case"wheel":if(e._customWheelEventHandler&&e._customWheelEventHandler(l)===!1)return!1;let d=l.deltaY;if(d===0||e.coreMouseService.consumeWheelEvent(l,e._renderService?.dimensions?.device?.cell?.height,e._coreBrowserService?.dpr)===0)return!1;p=d<0?0:1,h=4;break;default:return!1}return p===void 0||h===void 0||h>4?!1:e.coreMouseService.triggerMouseEvent({col:c.col,row:c.row,x:c.x,y:c.y,button:h,action:p,ctrl:l.ctrlKey,alt:l.altKey,shift:l.shiftKey})}let n={mouseup:null,wheel:null,mousedrag:null,mousemove:null},o={mouseup:l=>(r(l),l.buttons||(this._document.removeEventListener("mouseup",n.mouseup),n.mousedrag&&this._document.removeEventListener("mousemove",n.mousedrag)),this.cancel(l)),wheel:l=>(r(l),this.cancel(l,!0)),mousedrag:l=>{l.buttons&&r(l)},mousemove:l=>{l.buttons||r(l)}};this._register(this.coreMouseService.onProtocolChange(l=>{l?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(l)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),l&8?n.mousemove||(t.addEventListener("mousemove",o.mousemove),n.mousemove=o.mousemove):(t.removeEventListener("mousemove",n.mousemove),n.mousemove=null),l&16?n.wheel||(t.addEventListener("wheel",o.wheel,{passive:!1}),n.wheel=o.wheel):(t.removeEventListener("wheel",n.wheel),n.wheel=null),l&2?n.mouseup||(n.mouseup=o.mouseup):(this._document.removeEventListener("mouseup",n.mouseup),n.mouseup=null),l&4?n.mousedrag||(n.mousedrag=o.mousedrag):(this._document.removeEventListener("mousemove",n.mousedrag),n.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this._register(xe(t,"mousedown",l=>{if(l.preventDefault(),this.focus(),!(!this.coreMouseService.areMouseEventsActive||this._selectionService.shouldForceSelection(l)))return r(l),n.mouseup&&this._document.addEventListener("mouseup",n.mouseup),n.mousedrag&&this._document.addEventListener("mousemove",n.mousedrag),this.cancel(l)})),this._register(xe(t,"wheel",l=>{if(!n.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(l)===!1)return!1;if(!this.buffer.hasScrollback){if(l.deltaY===0)return!1;if(e.coreMouseService.consumeWheelEvent(l,e._renderService?.dimensions?.device?.cell?.height,e._coreBrowserService?.dpr)===0)return this.cancel(l,!0);let c=Q.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(l.deltaY<0?"A":"B");return this.coreService.triggerDataEvent(c,!0),this.cancel(l,!0)}}},{passive:!1}))}refresh(e,t){this._renderService?.refreshRows(e,t)}updateCursorStyle(e){this._selectionService?.shouldColumnSelect(e)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(e,t){this._viewport?this._viewport.scrollLines(e):super.scrollLines(e,t),this.refresh(0,this.rows-1)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(e){e&&this._viewport?this._viewport.scrollToLine(this.buffer.ybase,!0):this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){let t=e-this._bufferService.buffer.ydisp;t!==0&&this.scrollLines(t)}paste(e){ov(e,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(e){this._customKeyEventHandler=e}attachCustomWheelEventHandler(e){this._customWheelEventHandler=e}registerLinkProvider(e){return this._linkProviderService.registerLinkProvider(e)}registerCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let t=this._characterJoinerService.register(e);return this.refresh(0,this.rows-1),t}deregisterCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(e)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(e){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)}registerDecoration(e){return this._decorationService.registerDecoration(e)}hasSelection(){return this._selectionService?this._selectionService.hasSelection:!1}select(e,t,r){this._selectionService.setSelection(e,t,r)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(!(!this._selectionService||!this._selectionService.hasSelection))return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(e,t){this._selectionService?.selectLines(e,t)}_keyDown(e){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)return!1;let t=this.browser.isMac&&this.options.macOptionIsMeta&&e.altKey;if(!t&&!this._compositionHelper.keydown(e))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(!0),!1;!t&&(e.key==="Dead"||e.key==="AltGraph")&&(this._unprocessedDeadKey=!0);let r=cE(e,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),r.type===3||r.type===2){let n=this.rows-1;return this.scrollLines(r.type===2?-n:n),this.cancel(e,!0)}if(r.type===1&&this.selectAll(),this._isThirdLevelShift(this.browser,e)||(r.cancel&&this.cancel(e,!0),!r.key)||e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.key.length===1&&e.key.charCodeAt(0)>=65&&e.key.charCodeAt(0)<=90)return!0;if(this._unprocessedDeadKey)return this._unprocessedDeadKey=!1,!0;if((r.key===Q.ETX||r.key===Q.CR)&&(this.textarea.value=""),this._onKey.fire({key:r.key,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(r.key,!0),!this.optionsService.rawOptions.screenReaderMode||e.altKey||e.ctrlKey)return this.cancel(e,!0);this._keyDownHandled=!0}_isThirdLevelShift(e,t){let r=e.isMac&&!this.options.macOptionIsMeta&&t.altKey&&!t.ctrlKey&&!t.metaKey||e.isWindows&&t.altKey&&t.ctrlKey&&!t.metaKey||e.isWindows&&t.getModifierState("AltGraph");return t.type==="keypress"?r:r&&(!t.keyCode||t.keyCode>47)}_keyUp(e){this._keyDownSeen=!1,!(this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)&&(_E(e)||this.focus(),this.updateCursorStyle(e),this._keyPressHandled=!1)}_keyPress(e){let t;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)return!1;if(this.cancel(e),e.charCode)t=e.charCode;else if(e.which===null||e.which===void 0)t=e.keyCode;else if(e.which!==0&&e.charCode!==0)t=e.which;else return!1;return!t||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e)?!1:(t=String.fromCharCode(t),this._onKey.fire({key:t,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(t,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,!0)}_inputEvent(e){if(e.data&&e.inputType==="insertText"&&(!e.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let t=e.data;return this.coreService.triggerDataEvent(t,!0),this.cancel(e),!0}return!1}resize(e,t){if(e===this.cols&&t===this.rows){this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure();return}super.resize(e,t)}_afterResize(e,t){this._charSizeService?.measure()}clear(){if(!(this.buffer.ybase===0&&this.buffer.y===0)){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let e=1;e<this.rows;e++)this.buffer.lines.push(this.buffer.getBlankLine(tt));this._onScroll.fire({position:this.buffer.ydisp}),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;let e=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this._customKeyEventHandler=e,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(Q.ESC+"[I"):this.coreService.triggerDataEvent(Q.ESC+"[O")}_reportWindowsOptions(e){if(this._renderService)switch(e){case 0:let t=this._renderService.dimensions.css.canvas.width.toFixed(0),r=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${Q.ESC}[4;${r};${t}t`);break;case 1:let n=this._renderService.dimensions.css.cell.width.toFixed(0),o=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${Q.ESC}[6;${o};${n}t`);break}}cancel(e,t){if(!(!this.options.cancelEvents&&!t))return e.preventDefault(),e.stopPropagation(),!1}};function _E(e){return e.keyCode===16||e.keyCode===17||e.keyCode===18}var vE=class{constructor(){this._addons=[]}dispose(){for(let e=this._addons.length-1;e>=0;e--)this._addons[e].instance.dispose()}loadAddon(e,t){let r={instance:t,dispose:t.dispose,isDisposed:!1};this._addons.push(r),t.dispose=()=>this._wrappedAddonDispose(r),t.activate(e)}_wrappedAddonDispose(e){if(e.isDisposed)return;let t=-1;for(let r=0;r<this._addons.length;r++)if(this._addons[r]===e){t=r;break}if(t===-1)throw new Error("Could not dispose an addon that has not been loaded");e.isDisposed=!0,e.dispose.apply(e.instance),this._addons.splice(t,1)}},yE=class{constructor(e){this._line=e}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(e,t){if(!(e<0||e>=this._line.length))return t?(this._line.loadCell(e,t),t):this._line.loadCell(e,new ur)}translateToString(e,t,r){return this._line.translateToString(e,t,r)}},Vg=class{constructor(e,t){this._buffer=e,this.type=t}init(e){return this._buffer=e,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(e){let t=this._buffer.lines.get(e);if(t)return new yE(t)}getNullCell(){return new ur}},SE=class extends Ne{constructor(e){super(),this._core=e,this._onBufferChange=this._register(new oe),this.onBufferChange=this._onBufferChange.event,this._normal=new Vg(this._core.buffers.normal,"normal"),this._alternate=new Vg(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}},wE=class{constructor(e){this._core=e}registerCsiHandler(e,t){return this._core.registerCsiHandler(e,r=>t(r.toArray()))}addCsiHandler(e,t){return this.registerCsiHandler(e,t)}registerDcsHandler(e,t){return this._core.registerDcsHandler(e,(r,n)=>t(r,n.toArray()))}addDcsHandler(e,t){return this.registerDcsHandler(e,t)}registerEscHandler(e,t){return this._core.registerEscHandler(e,t)}addEscHandler(e,t){return this.registerEscHandler(e,t)}registerOscHandler(e,t){return this._core.registerOscHandler(e,t)}addOscHandler(e,t){return this.registerOscHandler(e,t)}},xE=class{constructor(e){this._core=e}register(e){this._core.unicodeService.register(e)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(e){this._core.unicodeService.activeVersion=e}},bE=["cols","rows"],Er=0,CE=class extends Ne{constructor(e){super(),this._core=this._register(new gE(e)),this._addonManager=this._register(new vE),this._publicOptions={...this._core.options};let t=n=>this._core.options[n],r=(n,o)=>{this._checkReadonlyOptions(n),this._core.options[n]=o};for(let n in this._core.options){let o={get:t.bind(this,n),set:r.bind(this,n)};Object.defineProperty(this._publicOptions,n,o)}}_checkReadonlyOptions(e){if(bE.includes(e))throw new Error(`Option "${e}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new wE(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new xE(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this._register(new SE(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let e=this._core.coreService.decPrivateModes,t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any";break}return{applicationCursorKeysMode:e.applicationCursorKeys,applicationKeypadMode:e.applicationKeypad,bracketedPasteMode:e.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:e.origin,reverseWraparoundMode:e.reverseWraparound,sendFocusMode:e.sendFocus,synchronizedOutputMode:e.synchronizedOutput,wraparoundMode:e.wraparound}}get options(){return this._publicOptions}set options(e){for(let t in e)this._publicOptions[t]=e[t]}blur(){this._core.blur()}focus(){this._core.focus()}input(e,t=!0){this._core.input(e,t)}resize(e,t){this._verifyIntegers(e,t),this._core.resize(e,t)}open(e){this._core.open(e)}attachCustomKeyEventHandler(e){this._core.attachCustomKeyEventHandler(e)}attachCustomWheelEventHandler(e){this._core.attachCustomWheelEventHandler(e)}registerLinkProvider(e){return this._core.registerLinkProvider(e)}registerCharacterJoiner(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)}deregisterCharacterJoiner(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)}registerMarker(e=0){return this._verifyIntegers(e),this._core.registerMarker(e)}registerDecoration(e){return this._checkProposedApi(),this._verifyPositiveIntegers(e.x??0,e.width??0,e.height??0),this._core.registerDecoration(e)}hasSelection(){return this._core.hasSelection()}select(e,t,r){this._verifyIntegers(e,t,r),this._core.select(e,t,r)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(e,t){this._verifyIntegers(e,t),this._core.selectLines(e,t)}dispose(){super.dispose()}scrollLines(e){this._verifyIntegers(e),this._core.scrollLines(e)}scrollPages(e){this._verifyIntegers(e),this._core.scrollPages(e)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(e){this._verifyIntegers(e),this._core.scrollToLine(e)}clear(){this._core.clear()}write(e,t){this._core.write(e,t)}writeln(e,t){this._core.write(e),this._core.write(`\r
`,t)}paste(e){this._core.paste(e)}refresh(e,t){this._verifyIntegers(e,t),this._core.refresh(e,t)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(e){this._addonManager.loadAddon(this,e)}static get strings(){return{get promptLabel(){return Vu.get()},set promptLabel(e){Vu.set(e)},get tooMuchOutput(){return qu.get()},set tooMuchOutput(e){qu.set(e)}}}_verifyIntegers(...e){for(Er of e)if(Er===1/0||isNaN(Er)||Er%1!==0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...e){for(Er of e)if(Er&&(Er===1/0||isNaN(Er)||Er%1!==0||Er<0))throw new Error("This API only accepts positive integers")}};/**
 * Copyright (c) 2014-2024 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * @license MIT
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 */var kE=2,EE=1,PE=class{activate(e){this._terminal=e}dispose(){}fit(){let e=this.proposeDimensions();if(!e||!this._terminal||isNaN(e.cols)||isNaN(e.rows))return;let t=this._terminal._core;(this._terminal.rows!==e.rows||this._terminal.cols!==e.cols)&&(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let e=this._terminal._core._renderService.dimensions;if(e.css.cell.width===0||e.css.cell.height===0)return;let t=this._terminal.options.scrollback===0?0:this._terminal.options.overviewRuler?.width||14,r=window.getComputedStyle(this._terminal.element.parentElement),n=parseInt(r.getPropertyValue("height")),o=Math.max(0,parseInt(r.getPropertyValue("width"))),l=window.getComputedStyle(this._terminal.element),c={top:parseInt(l.getPropertyValue("padding-top")),bottom:parseInt(l.getPropertyValue("padding-bottom")),right:parseInt(l.getPropertyValue("padding-right")),left:parseInt(l.getPropertyValue("padding-left"))},h=c.top+c.bottom,p=c.right+c.left,d=n-h,v=o-p-t;return{cols:Math.max(kE,Math.floor(v/e.css.cell.width)),rows:Math.max(EE,Math.floor(d/e.css.cell.height))}}};/**
 * Copyright (c) 2014-2024 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * @license MIT
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 */var RE=class{constructor(e,t,r,n={}){this._terminal=e,this._regex=t,this._handler=r,this._options=n}provideLinks(e,t){let r=LE.computeLink(e,this._regex,this._terminal,this._handler);t(this._addCallbacks(r))}_addCallbacks(e){return e.map(t=>(t.leave=this._options.leave,t.hover=(r,n)=>{if(this._options.hover){let{range:o}=t;this._options.hover(r,n,o)}},t))}};function NE(e){try{let t=new URL(e),r=t.password&&t.username?`${t.protocol}//${t.username}:${t.password}@${t.host}`:t.username?`${t.protocol}//${t.username}@${t.host}`:`${t.protocol}//${t.host}`;return e.toLocaleLowerCase().startsWith(r.toLocaleLowerCase())}catch{return!1}}var LE=class Aa{static computeLink(t,r,n,o){let l=new RegExp(r.source,(r.flags||"")+"g"),[c,h]=Aa._getWindowedLineStrings(t-1,n),p=c.join(""),d,v=[];for(;d=l.exec(p);){let _=d[0];if(!NE(_))continue;let[y,b]=Aa._mapStrIdx(n,h,0,d.index),[w,x]=Aa._mapStrIdx(n,y,b,_.length);if(y===-1||b===-1||w===-1||x===-1)continue;let k={start:{x:b+1,y:y+1},end:{x,y:w+1}};v.push({range:k,text:_,activate:o})}return v}static _getWindowedLineStrings(t,r){let n,o=t,l=t,c=0,h="",p=[];if(n=r.buffer.active.getLine(t)){let d=n.translateToString(!0);if(n.isWrapped&&d[0]!==" "){for(c=0;(n=r.buffer.active.getLine(--o))&&c<2048&&(h=n.translateToString(!0),c+=h.length,p.push(h),!(!n.isWrapped||h.indexOf(" ")!==-1)););p.reverse()}for(p.push(d),c=0;(n=r.buffer.active.getLine(++l))&&n.isWrapped&&c<2048&&(h=n.translateToString(!0),c+=h.length,p.push(h),h.indexOf(" ")===-1););}return[p,o]}static _mapStrIdx(t,r,n,o){let l=t.buffer.active,c=l.getNullCell(),h=n;for(;o;){let p=l.getLine(r);if(!p)return[-1,-1];for(let d=h;d<p.length;++d){p.getCell(d,c);let v=c.getChars();if(c.getWidth()&&(o-=v.length||1,d===p.length-1&&v==="")){let _=l.getLine(r+1);_&&_.isWrapped&&(_.getCell(0,c),c.getWidth()===2&&(o+=1))}if(o<0)return[r,d]}r++,h=0}return[r,h]}},DE=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function ME(e,t){let r=window.open();if(r){try{r.opener=null}catch{}r.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}var OE=class{constructor(e=ME,t={}){this._handler=e,this._options=t}activate(e){this._terminal=e;let t=this._options,r=t.urlRegex||DE;this._linkProvider=this._terminal.registerLinkProvider(new RE(this._terminal,r,this._handler,t))}dispose(){this._linkProvider?.dispose()}};function jE(){const{t:e}=to(),[t,r]=C.useState([]),[n,o]=C.useState(null),[l,c]=C.useState(""),h=C.useRef(new Map),p=C.useRef(null),d=C.useCallback(y=>{const b=`tab-${Date.now()}`,w=y||l||"",x={id:b,title:w&&w.split(/[/\\]/).pop()||"Terminal",cwd:w};r(k=>[...k,x]),o(b),setTimeout(()=>v(b,w),0)},[l]),v=C.useCallback((y,b)=>{const w=document.getElementById(`terminal-${y}`);if(!w)return;const x=new CE({cursorBlink:!0,fontSize:14,fontFamily:'Consolas, "Courier New", monospace',theme:{background:"#1e1e2e",foreground:"#cdd6f4",cursor:"#f5e0dc",cursorAccent:"#1e1e2e",selectionBackground:"#585b70",black:"#45475a",red:"#f38ba8",green:"#a6e3a1",yellow:"#f9e2af",blue:"#89b4fa",magenta:"#f5c2e7",cyan:"#94e2d5",white:"#bac2de",brightBlack:"#585b70",brightRed:"#f38ba8",brightGreen:"#a6e3a1",brightYellow:"#f9e2af",brightBlue:"#89b4fa",brightMagenta:"#f5c2e7",brightCyan:"#94e2d5",brightWhite:"#a6adc8"},allowProposedApi:!0}),k=new PE;x.loadAddon(k),x.loadAddon(new OE),x.open(w),k.fit();const D=window.location.protocol==="https:"?"wss:":"ws:",j=window.location.host,$=`${D}//${j}/api/terminal?cwd=${encodeURIComponent(b)}&cols=${x.cols}&rows=${x.rows}`,F=new WebSocket($);F.onopen=()=>{x.writeln(`\x1B[32m Connected to terminal\x1B[0m\r
`)},F.onmessage=H=>{try{const J=JSON.parse(H.data);switch(J.type){case"output":x.write(J.data);break;case"session":r(Z=>Z.map(le=>le.id===y?{...le,title:J.cwd.split(/[/\\]/).pop()||J.shell}:le));break;case"exit":x.writeln(`\r
\x1B[33m Process exited with code ${J.exitCode}\x1B[0m`);break}}catch{x.write(H.data)}},F.onclose=()=>{x.writeln(`\r
\x1B[31m Disconnected from terminal\x1B[0m`)},F.onerror=()=>{x.writeln(`\r
\x1B[31m Connection error\x1B[0m`)},x.onData(H=>{F.readyState===WebSocket.OPEN&&F.send(JSON.stringify({type:"input",data:H}))}),x.onResize(({cols:H,rows:J})=>{F.readyState===WebSocket.OPEN&&F.send(JSON.stringify({type:"resize",cols:H,rows:J}))}),h.current.set(y,{terminal:x,ws:F,fitAddon:k}),x.focus()},[]),_=C.useCallback(y=>{const b=h.current.get(y);b&&(b.ws.close(),b.terminal.dispose(),h.current.delete(y)),r(w=>{const x=w.filter(k=>k.id!==y);return n===y&&x.length>0?o(x[x.length-1].id):x.length===0&&o(null),x})},[n]);return C.useEffect(()=>{const y=()=>{if(n){const b=h.current.get(n);b&&b.fitAddon.fit()}};return window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[n]),C.useEffect(()=>{if(n){const y=h.current.get(n);y&&setTimeout(()=>{y.fitAddon.fit(),y.terminal.focus()},0)}},[n]),C.useEffect(()=>{t.length===0&&d()},[]),g.jsxs("div",{className:"h-full flex flex-col",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:e("shell.title")}),g.jsx("p",{className:"text-slate-500",children:e("shell.subtitle")})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Ns,{size:18,className:"text-slate-500"}),g.jsx("input",{type:"text",value:l,onChange:y=>c(y.target.value),placeholder:e("shell.workingDirectoryPlaceholder"),className:"w-64 px-3 py-1.5 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),g.jsxs("button",{onClick:()=>d(),className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[g.jsx(Rs,{size:18}),e("shell.newTab")]})]})]}),t.length>0&&g.jsx("div",{className:"flex items-center gap-1 bg-slate-800 rounded-t-lg px-2 pt-2",children:t.map(y=>g.jsxs("div",{onClick:()=>o(y.id),className:`flex items-center gap-2 px-3 py-1.5 rounded-t-lg cursor-pointer transition-colors ${n===y.id?"bg-[#1e1e2e] text-white":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:[g.jsx(Qn,{size:14}),g.jsx("span",{className:"text-sm max-w-32 truncate",children:y.title}),g.jsx("button",{onClick:b=>{b.stopPropagation(),_(y.id)},className:"p-0.5 hover:bg-slate-600 rounded",children:g.jsx(Qh,{size:14})})]},y.id))}),g.jsx("div",{ref:p,className:"flex-1 bg-[#1e1e2e] rounded-b-lg overflow-hidden",style:{minHeight:"400px"},children:t.length===0?g.jsx("div",{className:"h-full flex items-center justify-center text-slate-500",children:g.jsxs("div",{className:"text-center",children:[g.jsx(Qn,{size:48,className:"mx-auto mb-4 opacity-50"}),g.jsx("p",{children:e("shell.noTerminals")}),g.jsx("button",{onClick:()=>d(),className:"mt-4 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:e("shell.newTab")})]})}):t.map(y=>g.jsx("div",{id:`terminal-${y.id}`,className:`h-full w-full p-2 ${n===y.id?"":"hidden"}`},y.id))}),g.jsx("p",{className:"mt-4 text-sm text-slate-500",children:e("shell.tip")})]})}const{slice:TE,forEach:BE}=[];function IE(e){return BE.call(TE.call(arguments,1),t=>{if(t)for(const r in t)e[r]===void 0&&(e[r]=t[r])}),e}function AE(e){return typeof e!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(r=>r.test(e))}const qg=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,FE=function(e,t){const n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},o=encodeURIComponent(t);let l=`${e}=${o}`;if(n.maxAge>0){const c=n.maxAge-0;if(Number.isNaN(c))throw new Error("maxAge should be a Number");l+=`; Max-Age=${Math.floor(c)}`}if(n.domain){if(!qg.test(n.domain))throw new TypeError("option domain is invalid");l+=`; Domain=${n.domain}`}if(n.path){if(!qg.test(n.path))throw new TypeError("option path is invalid");l+=`; Path=${n.path}`}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");l+=`; Expires=${n.expires.toUTCString()}`}if(n.httpOnly&&(l+="; HttpOnly"),n.secure&&(l+="; Secure"),n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"strict":l+="; SameSite=Strict";break;case"none":l+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(l+="; Partitioned"),l},Qg={create(e,t,r,n){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(o.expires=new Date,o.expires.setTime(o.expires.getTime()+r*60*1e3)),n&&(o.domain=n),document.cookie=FE(e,t,o)},read(e){const t=`${e}=`,r=document.cookie.split(";");for(let n=0;n<r.length;n++){let o=r[n];for(;o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(t)===0)return o.substring(t.length,o.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var zE={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return Qg.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:r,cookieMinutes:n,cookieDomain:o,cookieOptions:l}=t;r&&typeof document<"u"&&Qg.create(r,e,n,o,l)}},$E={name:"querystring",lookup(e){let{lookupQuerystring:t}=e,r;if(typeof window<"u"){let{search:n}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));const l=n.substring(1).split("&");for(let c=0;c<l.length;c++){const h=l[c].indexOf("=");h>0&&l[c].substring(0,h)===t&&(r=l[c].substring(h+1))}}return r}},HE={name:"hash",lookup(e){let{lookupHash:t,lookupFromHashIndex:r}=e,n;if(typeof window<"u"){const{hash:o}=window.location;if(o&&o.length>2){const l=o.substring(1);if(t){const c=l.split("&");for(let h=0;h<c.length;h++){const p=c[h].indexOf("=");p>0&&c[h].substring(0,p)===t&&(n=c[h].substring(p+1))}}if(n)return n;if(!n&&r>-1){const c=o.match(/\/([a-zA-Z-]*)/g);return Array.isArray(c)?c[typeof r=="number"?r:0]?.replace("/",""):void 0}}}return n}};let Cs=null;const Yg=()=>{if(Cs!==null)return Cs;try{if(Cs=typeof window<"u"&&window.localStorage!==null,!Cs)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Cs=!1}return Cs};var WE={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&Yg())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:r}=t;r&&Yg()&&window.localStorage.setItem(r,e)}};let ks=null;const Gg=()=>{if(ks!==null)return ks;try{if(ks=typeof window<"u"&&window.sessionStorage!==null,!ks)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{ks=!1}return ks};var UE={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&Gg())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:r}=t;r&&Gg()&&window.sessionStorage.setItem(r,e)}},KE={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:r,userLanguage:n,language:o}=navigator;if(r)for(let l=0;l<r.length;l++)t.push(r[l]);n&&t.push(n),o&&t.push(o)}return t.length>0?t:void 0}},VE={name:"htmlTag",lookup(e){let{htmlTag:t}=e,r;const n=t||(typeof document<"u"?document.documentElement:null);return n&&typeof n.getAttribute=="function"&&(r=n.getAttribute("lang")),r}},qE={name:"path",lookup(e){let{lookupFromPathIndex:t}=e;if(typeof window>"u")return;const r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(r)?r[typeof t=="number"?t:0]?.replace("/",""):void 0}},QE={name:"subdomain",lookup(e){let{lookupFromSubdomainIndex:t}=e;const r=typeof t=="number"?t+1:1,n=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(n)return n[r]}};let Yv=!1;try{document.cookie,Yv=!0}catch{}const Gv=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Yv||Gv.splice(1,1);const YE=()=>({order:Gv,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e});class Xv{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,r)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=IE(r,this.options||{},YE()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=o=>o.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(zE),this.addDetector($E),this.addDetector(WE),this.addDetector(UE),this.addDetector(KE),this.addDetector(VE),this.addDetector(qE),this.addDetector(QE),this.addDetector(HE)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,r=[];return t.forEach(n=>{if(this.detectors[n]){let o=this.detectors[n].lookup(this.options);o&&typeof o=="string"&&(o=[o]),o&&(r=r.concat(o))}}),r=r.filter(n=>n!=null&&!AE(n)).map(n=>this.options.convertDetectedLanguage(n)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?r:r.length>0?r[0]:null}cacheUserLanguage(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||r.forEach(n=>{this.detectors[n]&&this.detectors[n].cacheUserLanguage(t,this.options)}))}}Xv.type="languageDetector";const GE={loading:"Loading...",error:"Error",save:"Save",cancel:"Cancel",delete:"Delete",create:"Create",edit:"Edit",close:"Close",confirm:"Confirm",back:"Back",clear:"Clear",execute:"Execute",refresh:"Refresh",start:"Start",stop:"Stop",pause:"Pause",resume:"Resume"},XE={projects:"Projects",agents:"Agents",shell:"Shell",settings:"Settings"},JE={title:"Projects",subtitle:"Manage AI agent projects",newProject:"New Project",noProjects:"No projects yet. Create one to get started!",untitled:"Untitled Project",noDescription:"No description",name:"Project Name",namePlaceholder:"Enter project name...",goal:"Goal",goalPlaceholder:"Describe what you want to accomplish...",repoPath:"Repository Path",repoPathPlaceholder:"/path/to/your/project",browse:"Browse",runs:"Runs",noRuns:"No runs yet",startRun:"Start Run",specs:"Specifications",specsMeta:"Meta & Constraints",specsOverview:"Overview",specsGlossary:"Glossary",specsRequirements:"Specification",specsInterfaces:"Implementation Status",specsDecisions:"Decisions",specsEmpty:"No specifications yet",specsListHint:"One per line",specsMetaPlaceholder:"Constraints, scope, non-goals...",specsOverviewPlaceholder:"Intent, background, goals, success criteria...",specsGlossaryPlaceholder:"Term: definition",specsRequirementsPlaceholder:"Specification details...",specsInterfacesPlaceholder:"Implementation status, progress, gaps...",specsDecisionsPlaceholder:"- Decision and rationale",status:{planning:"Planning",planned:"Planned",pending:"Pending",running:"Running",verifying:"Verifying",debugging:"Debugging",completed:"Completed",failed:"Failed",needs_input:"Needs Input"},detail:{title:"Project Details",backToProjects:"Back to projects",viewReport:"View Report",hideReport:"Hide Report",finalReport:"Final Report",information:"Information",created:"Created",updated:"Updated",verification:"Verification",verificationPassed:"Verification Passed",verificationFailed:"Verification Failed"},logs:{title:"Logs",noLogs:"No logs yet...",autoScroll:"Auto-scroll"},plan:{title:"Plan",subtitle:"Plan tasks before execution",noPlan:"No plan yet",createPlan:"Create Plan",editPlan:"Edit Plan",approvePlan:"Approve Plan",rejectPlan:"Reject Plan",regeneratePlan:"Regenerate Plan",tasks:"Tasks",addTask:"Add Task",taskName:"Task Name",taskDescription:"Task Description",estimatedEffort:"Estimated Effort",dependencies:"Dependencies",priority:"Priority",high:"High",medium:"Medium",low:"Low",status:{draft:"Draft",pending_approval:"Pending Approval",approved:"Approved",rejected:"Rejected"},aiGenerate:"Generate Plan with AI",generating:"Generating plan..."},execution:{title:"Execution",startExecution:"Start Execution",stopExecution:"Stop Execution",executionHistory:"Execution History"},specsCount:"{{count}} items",specsBulkEdit:"Bulk edit",specsInlineEdit:"Inline edit",specsExpand:"Expand",specsCollapse:"Collapse",specsSpecification:"Specification",specsImplementationStatus:"Implementation Status",specsMarkdownHint:"Markdown supported",specsFiles:"Files",specsAddFile:"Add file",specsAddFolder:"Add folder",specsNoFiles:"No files yet",specsSelectFile:"Select a file to preview",specsFolderSelected:"Folder selected",specsRename:"Rename",specsNamePlaceholder:"Name...",specsFileNamePlaceholder:"new-file.md",specsFolderNamePlaceholder:"new-folder",specsSpecificationPlaceholder:"Specification details, scope, constraints...",specsImplementationStatusPlaceholder:"Implementation status, progress, gaps..."},ZE={title:"Terminal",subtitle:"Full-featured terminal emulator",workingDirectory:"Working Directory (optional)",workingDirectoryPlaceholder:"/path/to/directory",commandPlaceholder:"Enter command...",noCommands:"Enter a command below to get started",tip:"Tip: Full terminal support with tab completion, colors, and interactive programs",newTab:"New Tab",noTerminals:"No terminal sessions. Click the button below to start one."},eP={title:"Settings",subtitle:"Configure Supervisor Agent",backendStatus:"Backend Status",status:"Status",version:"Version",apiUsage:"API Usage",premiumRequests:"Premium Requests",copilotNotConfigured:"Copilot API not configured",configuration:"Configuration",defaultRepoPath:"Default Repository Path",apiBaseUrl:"API Base URL",copilotApiUrl:"Copilot API URL",maxDebugIterations:"Max Debug Iterations",saveSettings:"Save Settings",language:"Language",selectLanguage:"Select Language"},tP={settings:"Settings",repoPath:"Repository Path",repoPathPlaceholder:"/path/to/your/project",agentModel:"Agent Model",maxIterations:"Max Iterations",welcome:"Welcome to your project",welcomeDescription:"What would you like to accomplish? I can help with fixing bugs, adding features, running tests, and more.",inputPlaceholder:"Type a message...",inputHint:"Press Enter to send, Shift+Enter for new line",thinking:"Thinking...",readyToHelp:"Ready to help. What would you like to do?",suggestions:{runTests:"Run tests",fixBug:"Fix a bug",addFeature:"Add a feature"}},rP={common:GE,nav:XE,projects:JE,shell:ZE,settings:eP,chat:tP},iP={loading:"...",error:"",save:"",cancel:"",delete:"",create:"",edit:"",close:"",confirm:"",back:"",clear:"",execute:"",refresh:"",start:"",stop:"",pause:"",resume:""},sP={projects:"",agents:"",shell:"",settings:""},nP={title:"",subtitle:"AI ",newProject:"",noProjects:"",createFirst:"",untitled:"",noDescription:"",name:"",namePlaceholder:"...",description:"",descriptionPlaceholder:"",goal:"",goalPlaceholder:"...",repoPath:"",repoPathPlaceholder:"/path/to/your/project",browse:"",runs:"",noRuns:"",startRun:"",specs:"",specsMeta:"",specsOverview:"",specsGlossary:"",specsRequirements:"",specsInterfaces:"",specsDecisions:"",specsEmpty:"",specsListHint:"11",specsMetaPlaceholder:"...",specsOverviewPlaceholder:"/...",specsGlossaryPlaceholder:": ",specsRequirementsPlaceholder:"...",specsInterfacesPlaceholder:"...",specsDecisionsPlaceholder:"- ",specsCount:"{{count}} ",specsBulkEdit:"",specsInlineEdit:"",specsExpand:"",specsCollapse:"",requirements:"",acceptanceCriteria:"",notes:"",status:{planning:"",planned:"",pending:"",running:"",verifying:"",debugging:"",completed:"",failed:"",needs_input:""},detail:{title:"",backToProjects:"",viewReport:"",hideReport:"",finalReport:"",information:"",created:"",updated:"",verification:"",verificationPassed:"",verificationFailed:""},logs:{title:"",noLogs:"...",autoScroll:""},plan:{title:"",subtitle:"",noPlan:"",createPlan:"",editPlan:"",approvePlan:"",rejectPlan:"",regeneratePlan:"",tasks:"",addTask:"",taskName:"",taskDescription:"",estimatedEffort:"",dependencies:"",priority:"",high:"",medium:"",low:"",status:{draft:"",pending_approval:"",approved:"",rejected:""},aiGenerate:"AI ",generating:"..."},execution:{title:"",startExecution:"",stopExecution:"",executionHistory:""},specsSpecification:"",specsImplementationStatus:"",specsMarkdownHint:"",specsFiles:"",specsAddFile:"",specsAddFolder:"",specsNoFiles:"",specsSelectFile:"",specsFolderSelected:"",specsRename:"",specsNamePlaceholder:"...",specsFileNamePlaceholder:"new-file.md",specsFolderNamePlaceholder:"new-folder",specsSpecificationPlaceholder:"...",specsImplementationStatusPlaceholder:"..."},oP={title:"",subtitle:"",workingDirectory:"",workingDirectoryPlaceholder:"/path/to/directory",commandPlaceholder:"...",noCommands:"",tip:": ",newTab:"",noTerminals:""},aP={title:"",subtitle:"Supervisor Agent ",backendStatus:"",status:"",version:"",apiUsage:"API ",premiumRequests:"",copilotNotConfigured:"Copilot API ",configuration:"",defaultRepoPath:"",apiBaseUrl:"API  URL",copilotApiUrl:"Copilot API URL",maxDebugIterations:"",saveSettings:"",language:"",selectLanguage:""},lP={settings:"",repoPath:"",repoPathPlaceholder:"/path/to/your/project",agentModel:"",maxIterations:"",welcome:"",welcomeDescription:"",inputPlaceholder:"...",inputHint:"Enter Shift+Enter ",thinking:"...",readyToHelp:"",suggestions:{runTests:"",fixBug:"",addFeature:""}},cP={common:iP,nav:sP,projects:nP,shell:oP,settings:aP,chat:lP},uP={en:{translation:rP},ja:{translation:cP}};Ot.use(Xv).use(V1).init({resources:uP,fallbackLng:"en",supportedLngs:["en","ja"],interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator","htmlTag"],caches:["localStorage"]}});const hP=[{code:"en",name:"English",nativeName:"English"},{code:"ja",name:"Japanese",nativeName:""}];function dP(){const{t:e,i18n:t}=to(),r=Qi(),[n,o]=C.useState(""),[l,c]=C.useState(""),[h,p]=C.useState(!1),[d,v]=C.useState(!1),[_,y]=C.useState(""),[b,w]=C.useState(!1),{data:x,refetch:k}=Mt({queryKey:["health"],queryFn:$_}),{data:D,refetch:j}=Mt({queryKey:["settings"],queryFn:H_}),{data:$}=Mt({queryKey:["copilotStatus"],queryFn:U_,refetchInterval:5e3}),F=Ur({mutationFn:W_,onSuccess:()=>{r.invalidateQueries({queryKey:["settings"]}),r.invalidateQueries({queryKey:["copilotStatus"]}),o(""),c(""),y("")}}),H=()=>{const K={};n&&(K.openai_api_key=n),l&&(K.anthropic_api_key=l),Object.keys(K).length>0&&F.mutate(K)},J=()=>{_&&F.mutate({github_token:_})},Z=()=>{F.mutate({openai_api_key:""})},le=()=>{F.mutate({anthropic_api_key:""})},ie=()=>{F.mutate({github_token:""})},I=K=>{t.changeLanguage(K)};return g.jsxs("div",{className:"px-4 sm:px-6 py-4 sm:py-6",children:[g.jsxs("div",{className:"mb-4 sm:mb-6",children:[g.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-slate-800",children:e("settings.title")}),g.jsx("p",{className:"text-slate-500 text-sm sm:text-base",children:e("settings.subtitle")})]}),g.jsxs("div",{className:"grid gap-4 sm:gap-6 lg:grid-cols-2",children:[g.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4 sm:p-6 lg:col-span-2",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("h2",{className:"text-base sm:text-lg font-semibold text-slate-800 flex items-center gap-2",children:[g.jsx(px,{size:20}),"API Keys"]}),g.jsx("button",{onClick:()=>j(),className:"p-2.5 sm:p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 active:bg-slate-200 rounded-lg transition-colors",children:g.jsx(qn,{size:16})})]}),g.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Configure API keys for AI services. Keys are stored securely and take precedence over environment variables."}),g.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2",children:[g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:["OpenAI API Key",D?.openai_api_key_set&&g.jsxs("span",{className:"ml-2 text-xs text-green-600 font-normal",children:[g.jsx(fu,{size:12,className:"inline mr-1"}),"Configured (",D.openai_api_key,")"]})]}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:h?"text":"password",value:n,onChange:K=>o(K.target.value),placeholder:D?.openai_api_key_set?"Enter new key to update":"sk-...",className:"w-full px-3 py-3 sm:py-2 pr-20 text-base border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),g.jsx("button",{type:"button",onClick:()=>p(!h),className:"absolute right-10 top-1/2 -translate-y-1/2 p-1 text-slate-400 hover:text-slate-600 active:text-slate-800",children:h?g.jsx(pu,{size:18}):g.jsx(La,{size:18})}),D?.openai_api_key_set&&g.jsx("button",{type:"button",onClick:Z,className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-red-400 hover:text-red-600 active:text-red-800 text-xs",children:"Clear"})]})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:["Anthropic API Key",D?.anthropic_api_key_set&&g.jsxs("span",{className:"ml-2 text-xs text-green-600 font-normal",children:[g.jsx(fu,{size:12,className:"inline mr-1"}),"Configured (",D.anthropic_api_key,")"]})]}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:d?"text":"password",value:l,onChange:K=>c(K.target.value),placeholder:D?.anthropic_api_key_set?"Enter new key to update":"sk-ant-...",className:"w-full px-3 py-3 sm:py-2 pr-20 text-base border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),g.jsx("button",{type:"button",onClick:()=>v(!d),className:"absolute right-10 top-1/2 -translate-y-1/2 p-1 text-slate-400 hover:text-slate-600 active:text-slate-800",children:d?g.jsx(pu,{size:18}):g.jsx(La,{size:18})}),D?.anthropic_api_key_set&&g.jsx("button",{type:"button",onClick:le,className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-red-400 hover:text-red-600 active:text-red-800 text-xs",children:"Clear"})]})]})]}),g.jsx("div",{className:"mt-4",children:g.jsxs("button",{onClick:H,disabled:!n&&!l||F.isPending,className:"w-full sm:w-auto px-4 py-3 sm:py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 active:bg-primary-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[F.isPending&&g.jsx(Wt,{size:16,className:"animate-spin"}),"Save API Keys"]})})]}),g.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4 sm:p-6 lg:col-span-2",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("h2",{className:"text-base sm:text-lg font-semibold text-slate-800 flex items-center gap-2",children:[g.jsx(dx,{size:20}),"GitHub Copilot API"]}),D?.github_token_set&&g.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[g.jsx("span",{className:`w-2 h-2 rounded-full ${$?.running&&$?.healthy?"bg-green-500":$?.running?"bg-yellow-500 animate-pulse":"bg-red-500"}`}),g.jsx("span",{className:"text-slate-500",children:$?.running&&$?.healthy?"Running":$?.running?"Starting...":"Not running"})]})]}),$?.error&&D?.github_token_set&&g.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:$.error}),g.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Use GitHub Copilot as an OpenAI-compatible API proxy. Set your GitHub token below and the proxy will start automatically."}),g.jsxs("div",{className:"max-w-md",children:[g.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["GitHub Token",D?.github_token_set&&g.jsxs("span",{className:"ml-2 text-xs text-green-600 font-normal",children:[g.jsx(fu,{size:12,className:"inline mr-1"}),"Configured (",D.github_token,")"]})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("div",{className:"relative flex-1",children:[g.jsx("input",{type:b?"text":"password",value:_,onChange:K=>y(K.target.value),placeholder:D?.github_token_set?"Enter new token to update":"ghp_...",className:"w-full px-3 py-2 pr-10 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),g.jsx("button",{type:"button",onClick:()=>w(!b),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:b?g.jsx(pu,{size:18}):g.jsx(La,{size:18})})]}),g.jsxs("button",{onClick:J,disabled:!_||F.isPending,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[F.isPending&&g.jsx(Wt,{size:16,className:"animate-spin"}),"Save"]}),D?.github_token_set&&g.jsx("button",{onClick:ie,className:"px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:"Clear"})]}),g.jsxs("p",{className:"text-xs text-slate-400 mt-2",children:["Get your token from"," ",g.jsx("a",{href:"https://github.com/settings/tokens",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:"GitHub Settings  Tokens"})]})]})]}),g.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4 sm:p-6",children:[g.jsxs("h2",{className:"text-base sm:text-lg font-semibold text-slate-800 flex items-center gap-2 mb-4",children:[g.jsx(fx,{size:20}),e("settings.language")]}),g.jsx("div",{className:"space-y-2",children:hP.map(K=>g.jsxs("button",{onClick:()=>I(K.code),className:`w-full text-left px-4 py-3.5 sm:py-3 rounded-lg border transition-colors active:scale-[0.98] ${t.language===K.code?"border-primary-500 bg-primary-50 text-primary-700":"border-slate-200 hover:bg-slate-50 active:bg-slate-100"}`,children:[g.jsx("span",{className:"font-medium",children:K.nativeName}),g.jsxs("span",{className:"text-slate-500 ml-2",children:["(",K.name,")"]})]},K.code))})]}),g.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4 sm:p-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("h2",{className:"text-base sm:text-lg font-semibold text-slate-800 flex items-center gap-2",children:[g.jsx(vx,{size:20}),e("settings.backendStatus")]}),g.jsx("button",{onClick:()=>k(),className:"p-2.5 sm:p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 active:bg-slate-200 rounded-lg transition-colors",children:g.jsx(qn,{size:16})})]}),g.jsxs("dl",{className:"space-y-3",children:[g.jsxs("div",{className:"flex justify-between",children:[g.jsx("dt",{className:"text-slate-500",children:e("settings.status")}),g.jsxs("dd",{className:"flex items-center gap-2",children:[g.jsx("span",{className:`w-2 h-2 rounded-full ${x?.status==="ok"?"bg-green-500":"bg-red-500"}`}),x?.status??"Unknown"]})]}),g.jsxs("div",{className:"flex justify-between",children:[g.jsx("dt",{className:"text-slate-500",children:e("settings.version")}),g.jsx("dd",{className:"font-mono text-sm",children:x?.version??"-"})]})]})]}),g.jsx(fP,{})]})]})}function fP(){const{data:e,isLoading:t,refetch:r}=Mt({queryKey:["applications"],queryFn:Tx,refetchInterval:5e3}),n=async l=>{try{await Bx(l)}catch(c){console.error("Failed to focus application:",c)}},o=e?.applications||[];return g.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4 sm:p-6 lg:col-span-2",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("h2",{className:"text-base sm:text-lg font-semibold text-slate-800 flex items-center gap-2",children:[g.jsx(nx,{size:20}),""]}),g.jsx("button",{onClick:()=>r(),className:"p-2.5 sm:p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 active:bg-slate-200 rounded-lg transition-colors",children:g.jsx(qn,{size:16,className:t?"animate-spin":""})})]}),t&&o.length===0?g.jsx("div",{className:"flex items-center justify-center py-8 text-slate-400",children:g.jsx(Wt,{size:24,className:"animate-spin"})}):o.length===0?g.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:""}):g.jsx("div",{className:"space-y-1 max-h-[300px] overflow-y-auto",children:o.map(l=>g.jsxs("div",{className:"flex items-center justify-between px-3 py-2 hover:bg-slate-50 rounded-lg group",children:[g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"font-medium text-sm text-slate-700 truncate",children:l.title||l.name}),g.jsxs("span",{className:"text-xs text-slate-400",children:["(",l.name,")"]})]}),l.path&&g.jsx("div",{className:"text-xs text-slate-400 truncate",children:l.path})]}),g.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[g.jsxs("span",{className:"text-xs text-slate-400",children:["PID: ",l.pid]}),g.jsx("button",{onClick:()=>n(l.pid),className:"p-1.5 text-slate-400 hover:text-primary-600 hover:bg-primary-50 rounded transition-colors",title:"",children:g.jsx(ux,{size:14})})]})]},l.pid))})]})}function pP(){return g.jsxs(Cm,{children:[g.jsx(Pr,{path:"/projects/:projectId",element:g.jsx(iC,{})}),g.jsx(Pr,{path:"*",element:g.jsx(Ax,{children:g.jsxs(Cm,{children:[g.jsx(Pr,{path:"/",element:g.jsx(au,{to:"/projects",replace:!0})}),g.jsx(Pr,{path:"/projects",element:g.jsx(Kx,{})}),g.jsx(Pr,{path:"/agents",element:g.jsx(mC,{})}),g.jsx(Pr,{path:"/runs",element:g.jsx(au,{to:"/projects",replace:!0})}),g.jsx(Pr,{path:"/runs/:runId",element:g.jsx(au,{to:"/projects/:runId",replace:!0})}),g.jsx(Pr,{path:"/shell",element:g.jsx(jE,{})}),g.jsx(Pr,{path:"/settings",element:g.jsx(dP,{})})]})})})]})}const mP=new PS({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}});iS.createRoot(document.getElementById("root")).render(g.jsx($i.StrictMode,{children:g.jsx(RS,{client:mP,children:g.jsx(o1,{children:g.jsx(pP,{})})})}));
