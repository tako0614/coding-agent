var Ym=e=>{throw TypeError(e)};var Qh=(e,t,i)=>t.has(e)||Ym("Cannot "+i);var R=(e,t,i)=>(Qh(e,t,"read from private field"),i?i.call(e):t.get(e)),Se=(e,t,i)=>t.has(e)?Ym("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),ne=(e,t,i,n)=>(Qh(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),Re=(e,t,i)=>(Qh(e,t,"access private method"),i);var ul=(e,t,i,n)=>({set _(o){ne(e,t,o,i)},get _(){return R(e,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function i(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(o){if(o.ep)return;o.ep=!0;const l=i(o);fetch(o.href,l)}})();function iv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Yh={exports:{}},wo={},Gh={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gm;function AS(){if(Gm)return Ne;Gm=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),g=Symbol.iterator;function S(E){return E===null||typeof E!="object"?null:(E=g&&E[g]||E["@@iterator"],typeof E=="function"?E:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,C={};function k(E,M,Y){this.props=E,this.context=M,this.refs=C,this.updater=Y||w}k.prototype.isReactComponent={},k.prototype.setState=function(E,M){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,M,"setState")},k.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function L(){}L.prototype=k.prototype;function W(E,M,Y){this.props=E,this.context=M,this.refs=C,this.updater=Y||w}var O=W.prototype=new L;O.constructor=W,x(O,k.prototype),O.isPureReactComponent=!0;var T=Array.isArray,$=Object.prototype.hasOwnProperty,G={current:null},le={key:!0,ref:!0,__self:!0,__source:!0};function ue(E,M,Y){var ce,_e={},pe=null,Ee=null;if(M!=null)for(ce in M.ref!==void 0&&(Ee=M.ref),M.key!==void 0&&(pe=""+M.key),M)$.call(M,ce)&&!le.hasOwnProperty(ce)&&(_e[ce]=M[ce]);var de=arguments.length-2;if(de===1)_e.children=Y;else if(1<de){for(var ge=Array(de),Ve=0;Ve<de;Ve++)ge[Ve]=arguments[Ve+2];_e.children=ge}if(E&&E.defaultProps)for(ce in de=E.defaultProps,de)_e[ce]===void 0&&(_e[ce]=de[ce]);return{$$typeof:e,type:E,key:pe,ref:Ee,props:_e,_owner:G.current}}function ye(E,M){return{$$typeof:e,type:E.type,key:M,ref:E.ref,props:E.props,_owner:E._owner}}function ie(E){return typeof E=="object"&&E!==null&&E.$$typeof===e}function se(E){var M={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(Y){return M[Y]})}var z=/\/+/g;function j(E,M){return typeof E=="object"&&E!==null&&E.key!=null?se(""+E.key):M.toString(36)}function U(E,M,Y,ce,_e){var pe=typeof E;(pe==="undefined"||pe==="boolean")&&(E=null);var Ee=!1;if(E===null)Ee=!0;else switch(pe){case"string":case"number":Ee=!0;break;case"object":switch(E.$$typeof){case e:case t:Ee=!0}}if(Ee)return Ee=E,_e=_e(Ee),E=ce===""?"."+j(Ee,0):ce,T(_e)?(Y="",E!=null&&(Y=E.replace(z,"$&/")+"/"),U(_e,M,Y,"",function(Ve){return Ve})):_e!=null&&(ie(_e)&&(_e=ye(_e,Y+(!_e.key||Ee&&Ee.key===_e.key?"":(""+_e.key).replace(z,"$&/")+"/")+E)),M.push(_e)),1;if(Ee=0,ce=ce===""?".":ce+":",T(E))for(var de=0;de<E.length;de++){pe=E[de];var ge=ce+j(pe,de);Ee+=U(pe,M,Y,ge,_e)}else if(ge=S(E),typeof ge=="function")for(E=ge.call(E),de=0;!(pe=E.next()).done;)pe=pe.value,ge=ce+j(pe,de++),Ee+=U(pe,M,Y,ge,_e);else if(pe==="object")throw M=String(E),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return Ee}function V(E,M,Y){if(E==null)return E;var ce=[],_e=0;return U(E,ce,"","",function(pe){return M.call(Y,pe,_e++)}),ce}function K(E){if(E._status===-1){var M=E._result;M=M(),M.then(function(Y){(E._status===0||E._status===-1)&&(E._status=1,E._result=Y)},function(Y){(E._status===0||E._status===-1)&&(E._status=2,E._result=Y)}),E._status===-1&&(E._status=0,E._result=M)}if(E._status===1)return E._result.default;throw E._result}var te={current:null},A={transition:null},re={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:A,ReactCurrentOwner:G};function Z(){throw Error("act(...) is not supported in production builds of React.")}return Ne.Children={map:V,forEach:function(E,M,Y){V(E,function(){M.apply(this,arguments)},Y)},count:function(E){var M=0;return V(E,function(){M++}),M},toArray:function(E){return V(E,function(M){return M})||[]},only:function(E){if(!ie(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},Ne.Component=k,Ne.Fragment=i,Ne.Profiler=o,Ne.PureComponent=W,Ne.StrictMode=n,Ne.Suspense=p,Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,Ne.act=Z,Ne.cloneElement=function(E,M,Y){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var ce=x({},E.props),_e=E.key,pe=E.ref,Ee=E._owner;if(M!=null){if(M.ref!==void 0&&(pe=M.ref,Ee=G.current),M.key!==void 0&&(_e=""+M.key),E.type&&E.type.defaultProps)var de=E.type.defaultProps;for(ge in M)$.call(M,ge)&&!le.hasOwnProperty(ge)&&(ce[ge]=M[ge]===void 0&&de!==void 0?de[ge]:M[ge])}var ge=arguments.length-2;if(ge===1)ce.children=Y;else if(1<ge){de=Array(ge);for(var Ve=0;Ve<ge;Ve++)de[Ve]=arguments[Ve+2];ce.children=de}return{$$typeof:e,type:E.type,key:_e,ref:pe,props:ce,_owner:Ee}},Ne.createContext=function(E){return E={$$typeof:c,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:l,_context:E},E.Consumer=E},Ne.createElement=ue,Ne.createFactory=function(E){var M=ue.bind(null,E);return M.type=E,M},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(E){return{$$typeof:u,render:E}},Ne.isValidElement=ie,Ne.lazy=function(E){return{$$typeof:_,_payload:{_status:-1,_result:E},_init:K}},Ne.memo=function(E,M){return{$$typeof:d,type:E,compare:M===void 0?null:M}},Ne.startTransition=function(E){var M=A.transition;A.transition={};try{E()}finally{A.transition=M}},Ne.unstable_act=Z,Ne.useCallback=function(E,M){return te.current.useCallback(E,M)},Ne.useContext=function(E){return te.current.useContext(E)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(E){return te.current.useDeferredValue(E)},Ne.useEffect=function(E,M){return te.current.useEffect(E,M)},Ne.useId=function(){return te.current.useId()},Ne.useImperativeHandle=function(E,M,Y){return te.current.useImperativeHandle(E,M,Y)},Ne.useInsertionEffect=function(E,M){return te.current.useInsertionEffect(E,M)},Ne.useLayoutEffect=function(E,M){return te.current.useLayoutEffect(E,M)},Ne.useMemo=function(E,M){return te.current.useMemo(E,M)},Ne.useReducer=function(E,M,Y){return te.current.useReducer(E,M,Y)},Ne.useRef=function(E){return te.current.useRef(E)},Ne.useState=function(E){return te.current.useState(E)},Ne.useSyncExternalStore=function(E,M,Y){return te.current.useSyncExternalStore(E,M,Y)},Ne.useTransition=function(){return te.current.useTransition()},Ne.version="18.3.1",Ne}var Xm;function Vl(){return Xm||(Xm=1,Gh.exports=AS()),Gh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jm;function jS(){if(Jm)return wo;Jm=1;var e=Vl(),t=Symbol.for("react.element"),i=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(u,p,d){var _,g={},S=null,w=null;d!==void 0&&(S=""+d),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(w=p.ref);for(_ in p)n.call(p,_)&&!l.hasOwnProperty(_)&&(g[_]=p[_]);if(u&&u.defaultProps)for(_ in p=u.defaultProps,p)g[_]===void 0&&(g[_]=p[_]);return{$$typeof:t,type:u,key:S,ref:w,props:g,_owner:o.current}}return wo.Fragment=i,wo.jsx=c,wo.jsxs=c,wo}var Zm;function FS(){return Zm||(Zm=1,Yh.exports=jS()),Yh.exports}var v=FS(),N=Vl();const zS=iv(N);var dl={},Xh={exports:{}},Yt={},Jh={exports:{}},Zh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eg;function HS(){return eg||(eg=1,(function(e){function t(A,re){var Z=A.length;A.push(re);e:for(;0<Z;){var E=Z-1>>>1,M=A[E];if(0<o(M,re))A[E]=re,A[Z]=M,Z=E;else break e}}function i(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var re=A[0],Z=A.pop();if(Z!==re){A[0]=Z;e:for(var E=0,M=A.length,Y=M>>>1;E<Y;){var ce=2*(E+1)-1,_e=A[ce],pe=ce+1,Ee=A[pe];if(0>o(_e,Z))pe<M&&0>o(Ee,_e)?(A[E]=Ee,A[pe]=Z,E=pe):(A[E]=_e,A[ce]=Z,E=ce);else if(pe<M&&0>o(Ee,Z))A[E]=Ee,A[pe]=Z,E=pe;else break e}}return re}function o(A,re){var Z=A.sortIndex-re.sortIndex;return Z!==0?Z:A.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,u=c.now();e.unstable_now=function(){return c.now()-u}}var p=[],d=[],_=1,g=null,S=3,w=!1,x=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(A){for(var re=i(d);re!==null;){if(re.callback===null)n(d);else if(re.startTime<=A)n(d),re.sortIndex=re.expirationTime,t(p,re);else break;re=i(d)}}function T(A){if(C=!1,O(A),!x)if(i(p)!==null)x=!0,K($);else{var re=i(d);re!==null&&te(T,re.startTime-A)}}function $(A,re){x=!1,C&&(C=!1,L(ue),ue=-1),w=!0;var Z=S;try{for(O(re),g=i(p);g!==null&&(!(g.expirationTime>re)||A&&!se());){var E=g.callback;if(typeof E=="function"){g.callback=null,S=g.priorityLevel;var M=E(g.expirationTime<=re);re=e.unstable_now(),typeof M=="function"?g.callback=M:g===i(p)&&n(p),O(re)}else n(p);g=i(p)}if(g!==null)var Y=!0;else{var ce=i(d);ce!==null&&te(T,ce.startTime-re),Y=!1}return Y}finally{g=null,S=Z,w=!1}}var G=!1,le=null,ue=-1,ye=5,ie=-1;function se(){return!(e.unstable_now()-ie<ye)}function z(){if(le!==null){var A=e.unstable_now();ie=A;var re=!0;try{re=le(!0,A)}finally{re?j():(G=!1,le=null)}}else G=!1}var j;if(typeof W=="function")j=function(){W(z)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,V=U.port2;U.port1.onmessage=z,j=function(){V.postMessage(null)}}else j=function(){k(z,0)};function K(A){le=A,G||(G=!0,j())}function te(A,re){ue=k(function(){A(e.unstable_now())},re)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){x||w||(x=!0,K($))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ye=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_getFirstCallbackNode=function(){return i(p)},e.unstable_next=function(A){switch(S){case 1:case 2:case 3:var re=3;break;default:re=S}var Z=S;S=re;try{return A()}finally{S=Z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,re){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var Z=S;S=A;try{return re()}finally{S=Z}},e.unstable_scheduleCallback=function(A,re,Z){var E=e.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?E+Z:E):Z=E,A){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=Z+M,A={id:_++,callback:re,priorityLevel:A,startTime:Z,expirationTime:M,sortIndex:-1},Z>E?(A.sortIndex=Z,t(d,A),i(p)===null&&A===i(d)&&(C?(L(ue),ue=-1):C=!0,te(T,Z-E))):(A.sortIndex=M,t(p,A),x||w||(x=!0,K($))),A},e.unstable_shouldYield=se,e.unstable_wrapCallback=function(A){var re=S;return function(){var Z=S;S=re;try{return A.apply(this,arguments)}finally{S=Z}}}})(Zh)),Zh}var tg;function $S(){return tg||(tg=1,Jh.exports=HS()),Jh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ig;function WS(){if(ig)return Yt;ig=1;var e=Vl(),t=$S();function i(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,o={};function l(r,s){c(r,s),c(r+"Capture",s)}function c(r,s){for(o[r]=s,r=0;r<s.length;r++)n.add(s[r])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},g={};function S(r){return p.call(g,r)?!0:p.call(_,r)?!1:d.test(r)?g[r]=!0:(_[r]=!0,!1)}function w(r,s,a,h){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function x(r,s,a,h){if(s===null||typeof s>"u"||w(r,s,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function C(r,s,a,h,f,m,y){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=m,this.removeEmptyString=y}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){k[r]=new C(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];k[s]=new C(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){k[r]=new C(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){k[r]=new C(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){k[r]=new C(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){k[r]=new C(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){k[r]=new C(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){k[r]=new C(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){k[r]=new C(r,5,!1,r.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function W(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(L,W);k[s]=new C(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(L,W);k[s]=new C(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(L,W);k[s]=new C(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){k[r]=new C(r,1,!1,r.toLowerCase(),null,!1,!1)}),k.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){k[r]=new C(r,1,!1,r.toLowerCase(),null,!0,!0)});function O(r,s,a,h){var f=k.hasOwnProperty(s)?k[s]:null;(f!==null?f.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(x(s,a,f,h)&&(a=null),h||f===null?S(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):f.mustUseProperty?r[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,h=f.attributeNamespace,a===null?r.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,h?r.setAttributeNS(h,s,a):r.setAttribute(s,a))))}var T=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),G=Symbol.for("react.portal"),le=Symbol.for("react.fragment"),ue=Symbol.for("react.strict_mode"),ye=Symbol.for("react.profiler"),ie=Symbol.for("react.provider"),se=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),A=Symbol.iterator;function re(r){return r===null||typeof r!="object"?null:(r=A&&r[A]||r["@@iterator"],typeof r=="function"?r:null)}var Z=Object.assign,E;function M(r){if(E===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);E=s&&s[1]||""}return`
`+E+r}var Y=!1;function ce(r,s){if(!r||Y)return"";Y=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(F){var h=F}Reflect.construct(r,[],s)}else{try{s.call()}catch(F){h=F}r.call(s.prototype)}else{try{throw Error()}catch(F){h=F}r()}}catch(F){if(F&&h&&typeof F.stack=="string"){for(var f=F.stack.split(`
`),m=h.stack.split(`
`),y=f.length-1,b=m.length-1;1<=y&&0<=b&&f[y]!==m[b];)b--;for(;1<=y&&0<=b;y--,b--)if(f[y]!==m[b]){if(y!==1||b!==1)do if(y--,b--,0>b||f[y]!==m[b]){var P=`
`+f[y].replace(" at new "," at ");return r.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",r.displayName)),P}while(1<=y&&0<=b);break}}}finally{Y=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?M(r):""}function _e(r){switch(r.tag){case 5:return M(r.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return r=ce(r.type,!1),r;case 11:return r=ce(r.type.render,!1),r;case 1:return r=ce(r.type,!0),r;default:return""}}function pe(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case le:return"Fragment";case G:return"Portal";case ye:return"Profiler";case ue:return"StrictMode";case j:return"Suspense";case U:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case se:return(r.displayName||"Context")+".Consumer";case ie:return(r._context.displayName||"Context")+".Provider";case z:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case V:return s=r.displayName||null,s!==null?s:pe(r.type)||"Memo";case K:s=r._payload,r=r._init;try{return pe(r(s))}catch{}}return null}function Ee(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(s);case 8:return s===ue?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function de(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ge(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ve(r){var s=ge(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),h=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,m=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(y){h=""+y,m.call(this,y)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(y){h=""+y},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function bt(r){r._valueTracker||(r._valueTracker=Ve(r))}function Ot(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),h="";return r&&(h=ge(r)?r.checked?"true":"false":r.value),r=h,r!==a?(s.setValue(r),!0):!1}function Te(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Xr(r,s){var a=s.checked;return Z({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function tf(r,s){var a=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;a=de(s.value!=null?s.value:a),r._wrapperState={initialChecked:h,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function rf(r,s){s=s.checked,s!=null&&O(r,"checked",s,!1)}function ic(r,s){rf(r,s);var a=de(s.value),h=s.type;if(a!=null)h==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?rc(r,s.type,a):s.hasOwnProperty("defaultValue")&&rc(r,s.type,de(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function sf(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function rc(r,s,a){(s!=="number"||Te(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var Bn=Array.isArray;function Bs(r,s,a,h){if(r=r.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<r.length;a++)f=s.hasOwnProperty("$"+r[a].value),r[a].selected!==f&&(r[a].selected=f),f&&h&&(r[a].defaultSelected=!0)}else{for(a=""+de(a),s=null,f=0;f<r.length;f++){if(r[f].value===a){r[f].selected=!0,h&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function sc(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(i(91));return Z({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function nf(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(i(92));if(Bn(a)){if(1<a.length)throw Error(i(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:de(a)}}function of(r,s){var a=de(s.value),h=de(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),h!=null&&(r.defaultValue=""+h)}function af(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function lf(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nc(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?lf(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var ra,cf=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,h,f){MSApp.execUnsafeLocalFunction(function(){return r(s,a,h,f)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(ra=ra||document.createElement("div"),ra.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=ra.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function In(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var An={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},H0=["Webkit","ms","Moz","O"];Object.keys(An).forEach(function(r){H0.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),An[s]=An[r]})});function hf(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||An.hasOwnProperty(r)&&An[r]?(""+s).trim():s+"px"}function uf(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var h=a.indexOf("--")===0,f=hf(a,s[a],h);a==="float"&&(a="cssFloat"),h?r.setProperty(a,f):r[a]=f}}var $0=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oc(r,s){if(s){if($0[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(i(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(i(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(i(61))}if(s.style!=null&&typeof s.style!="object")throw Error(i(62))}}function ac(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lc=null;function cc(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var hc=null,Is=null,As=null;function df(r){if(r=no(r)){if(typeof hc!="function")throw Error(i(280));var s=r.stateNode;s&&(s=Ea(s),hc(r.stateNode,r.type,s))}}function ff(r){Is?As?As.push(r):As=[r]:Is=r}function pf(){if(Is){var r=Is,s=As;if(As=Is=null,df(r),s)for(r=0;r<s.length;r++)df(s[r])}}function mf(r,s){return r(s)}function gf(){}var uc=!1;function _f(r,s,a){if(uc)return r(s,a);uc=!0;try{return mf(r,s,a)}finally{uc=!1,(Is!==null||As!==null)&&(gf(),pf())}}function jn(r,s){var a=r.stateNode;if(a===null)return null;var h=Ea(a);if(h===null)return null;a=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var dc=!1;if(u)try{var Fn={};Object.defineProperty(Fn,"passive",{get:function(){dc=!0}}),window.addEventListener("test",Fn,Fn),window.removeEventListener("test",Fn,Fn)}catch{dc=!1}function W0(r,s,a,h,f,m,y,b,P){var F=Array.prototype.slice.call(arguments,3);try{s.apply(a,F)}catch(Q){this.onError(Q)}}var zn=!1,sa=null,na=!1,fc=null,U0={onError:function(r){zn=!0,sa=r}};function K0(r,s,a,h,f,m,y,b,P){zn=!1,sa=null,W0.apply(U0,arguments)}function V0(r,s,a,h,f,m,y,b,P){if(K0.apply(this,arguments),zn){if(zn){var F=sa;zn=!1,sa=null}else throw Error(i(198));na||(na=!0,fc=F)}}function Jr(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function vf(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function yf(r){if(Jr(r)!==r)throw Error(i(188))}function q0(r){var s=r.alternate;if(!s){if(s=Jr(r),s===null)throw Error(i(188));return s!==r?null:r}for(var a=r,h=s;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(h=f.return,h!==null){a=h;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return yf(f),r;if(m===h)return yf(f),s;m=m.sibling}throw Error(i(188))}if(a.return!==h.return)a=f,h=m;else{for(var y=!1,b=f.child;b;){if(b===a){y=!0,a=f,h=m;break}if(b===h){y=!0,h=f,a=m;break}b=b.sibling}if(!y){for(b=m.child;b;){if(b===a){y=!0,a=m,h=f;break}if(b===h){y=!0,h=m,a=f;break}b=b.sibling}if(!y)throw Error(i(189))}}if(a.alternate!==h)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?r:s}function Sf(r){return r=q0(r),r!==null?wf(r):null}function wf(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=wf(r);if(s!==null)return s;r=r.sibling}return null}var xf=t.unstable_scheduleCallback,Cf=t.unstable_cancelCallback,Q0=t.unstable_shouldYield,Y0=t.unstable_requestPaint,it=t.unstable_now,G0=t.unstable_getCurrentPriorityLevel,pc=t.unstable_ImmediatePriority,bf=t.unstable_UserBlockingPriority,oa=t.unstable_NormalPriority,X0=t.unstable_LowPriority,kf=t.unstable_IdlePriority,aa=null,Mi=null;function J0(r){if(Mi&&typeof Mi.onCommitFiberRoot=="function")try{Mi.onCommitFiberRoot(aa,r,void 0,(r.current.flags&128)===128)}catch{}}var wi=Math.clz32?Math.clz32:ty,Z0=Math.log,ey=Math.LN2;function ty(r){return r>>>=0,r===0?32:31-(Z0(r)/ey|0)|0}var la=64,ca=4194304;function Hn(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function ha(r,s){var a=r.pendingLanes;if(a===0)return 0;var h=0,f=r.suspendedLanes,m=r.pingedLanes,y=a&268435455;if(y!==0){var b=y&~f;b!==0?h=Hn(b):(m&=y,m!==0&&(h=Hn(m)))}else y=a&~f,y!==0?h=Hn(y):m!==0&&(h=Hn(m));if(h===0)return 0;if(s!==0&&s!==h&&(s&f)===0&&(f=h&-h,m=s&-s,f>=m||f===16&&(m&4194240)!==0))return s;if((h&4)!==0&&(h|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=h;0<s;)a=31-wi(s),f=1<<a,h|=r[a],s&=~f;return h}function iy(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ry(r,s){for(var a=r.suspendedLanes,h=r.pingedLanes,f=r.expirationTimes,m=r.pendingLanes;0<m;){var y=31-wi(m),b=1<<y,P=f[y];P===-1?((b&a)===0||(b&h)!==0)&&(f[y]=iy(b,s)):P<=s&&(r.expiredLanes|=b),m&=~b}}function mc(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Ef(){var r=la;return la<<=1,(la&4194240)===0&&(la=64),r}function gc(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function $n(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-wi(s),r[s]=a}function sy(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<a;){var f=31-wi(a),m=1<<f;s[f]=0,h[f]=-1,r[f]=-1,a&=~m}}function _c(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var h=31-wi(a),f=1<<h;f&s|r[h]&s&&(r[h]|=s),a&=~f}}var Ae=0;function Rf(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Pf,vc,Lf,Nf,Df,yc=!1,ua=[],mr=null,gr=null,_r=null,Wn=new Map,Un=new Map,vr=[],ny="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mf(r,s){switch(r){case"focusin":case"focusout":mr=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":_r=null;break;case"pointerover":case"pointerout":Wn.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Un.delete(s.pointerId)}}function Kn(r,s,a,h,f,m){return r===null||r.nativeEvent!==m?(r={blockedOn:s,domEventName:a,eventSystemFlags:h,nativeEvent:m,targetContainers:[f]},s!==null&&(s=no(s),s!==null&&vc(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function oy(r,s,a,h,f){switch(s){case"focusin":return mr=Kn(mr,r,s,a,h,f),!0;case"dragenter":return gr=Kn(gr,r,s,a,h,f),!0;case"mouseover":return _r=Kn(_r,r,s,a,h,f),!0;case"pointerover":var m=f.pointerId;return Wn.set(m,Kn(Wn.get(m)||null,r,s,a,h,f)),!0;case"gotpointercapture":return m=f.pointerId,Un.set(m,Kn(Un.get(m)||null,r,s,a,h,f)),!0}return!1}function Tf(r){var s=Zr(r.target);if(s!==null){var a=Jr(s);if(a!==null){if(s=a.tag,s===13){if(s=vf(a),s!==null){r.blockedOn=s,Df(r.priority,function(){Lf(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function da(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=wc(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var h=new a.constructor(a.type,a);lc=h,a.target.dispatchEvent(h),lc=null}else return s=no(a),s!==null&&vc(s),r.blockedOn=a,!1;s.shift()}return!0}function Of(r,s,a){da(r)&&a.delete(s)}function ay(){yc=!1,mr!==null&&da(mr)&&(mr=null),gr!==null&&da(gr)&&(gr=null),_r!==null&&da(_r)&&(_r=null),Wn.forEach(Of),Un.forEach(Of)}function Vn(r,s){r.blockedOn===s&&(r.blockedOn=null,yc||(yc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,ay)))}function qn(r){function s(f){return Vn(f,r)}if(0<ua.length){Vn(ua[0],r);for(var a=1;a<ua.length;a++){var h=ua[a];h.blockedOn===r&&(h.blockedOn=null)}}for(mr!==null&&Vn(mr,r),gr!==null&&Vn(gr,r),_r!==null&&Vn(_r,r),Wn.forEach(s),Un.forEach(s),a=0;a<vr.length;a++)h=vr[a],h.blockedOn===r&&(h.blockedOn=null);for(;0<vr.length&&(a=vr[0],a.blockedOn===null);)Tf(a),a.blockedOn===null&&vr.shift()}var js=T.ReactCurrentBatchConfig,fa=!0;function ly(r,s,a,h){var f=Ae,m=js.transition;js.transition=null;try{Ae=1,Sc(r,s,a,h)}finally{Ae=f,js.transition=m}}function cy(r,s,a,h){var f=Ae,m=js.transition;js.transition=null;try{Ae=4,Sc(r,s,a,h)}finally{Ae=f,js.transition=m}}function Sc(r,s,a,h){if(fa){var f=wc(r,s,a,h);if(f===null)jc(r,s,h,pa,a),Mf(r,h);else if(oy(f,r,s,a,h))h.stopPropagation();else if(Mf(r,h),s&4&&-1<ny.indexOf(r)){for(;f!==null;){var m=no(f);if(m!==null&&Pf(m),m=wc(r,s,a,h),m===null&&jc(r,s,h,pa,a),m===f)break;f=m}f!==null&&h.stopPropagation()}else jc(r,s,h,null,a)}}var pa=null;function wc(r,s,a,h){if(pa=null,r=cc(h),r=Zr(r),r!==null)if(s=Jr(r),s===null)r=null;else if(a=s.tag,a===13){if(r=vf(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return pa=r,null}function Bf(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(G0()){case pc:return 1;case bf:return 4;case oa:case X0:return 16;case kf:return 536870912;default:return 16}default:return 16}}var yr=null,xc=null,ma=null;function If(){if(ma)return ma;var r,s=xc,a=s.length,h,f="value"in yr?yr.value:yr.textContent,m=f.length;for(r=0;r<a&&s[r]===f[r];r++);var y=a-r;for(h=1;h<=y&&s[a-h]===f[m-h];h++);return ma=f.slice(r,1<h?1-h:void 0)}function ga(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function _a(){return!0}function Af(){return!1}function Zt(r){function s(a,h,f,m,y){this._reactName=a,this._targetInst=f,this.type=h,this.nativeEvent=m,this.target=y,this.currentTarget=null;for(var b in r)r.hasOwnProperty(b)&&(a=r[b],this[b]=a?a(m):m[b]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?_a:Af,this.isPropagationStopped=Af,this}return Z(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=_a)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=_a)},persist:function(){},isPersistent:_a}),s}var Fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cc=Zt(Fs),Qn=Z({},Fs,{view:0,detail:0}),hy=Zt(Qn),bc,kc,Yn,va=Z({},Qn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rc,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Yn&&(Yn&&r.type==="mousemove"?(bc=r.screenX-Yn.screenX,kc=r.screenY-Yn.screenY):kc=bc=0,Yn=r),bc)},movementY:function(r){return"movementY"in r?r.movementY:kc}}),jf=Zt(va),uy=Z({},va,{dataTransfer:0}),dy=Zt(uy),fy=Z({},Qn,{relatedTarget:0}),Ec=Zt(fy),py=Z({},Fs,{animationName:0,elapsedTime:0,pseudoElement:0}),my=Zt(py),gy=Z({},Fs,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),_y=Zt(gy),vy=Z({},Fs,{data:0}),Ff=Zt(vy),yy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xy(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=wy[r])?!!s[r]:!1}function Rc(){return xy}var Cy=Z({},Qn,{key:function(r){if(r.key){var s=yy[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=ga(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Sy[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rc,charCode:function(r){return r.type==="keypress"?ga(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ga(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),by=Zt(Cy),ky=Z({},va,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zf=Zt(ky),Ey=Z({},Qn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rc}),Ry=Zt(Ey),Py=Z({},Fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ly=Zt(Py),Ny=Z({},va,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Dy=Zt(Ny),My=[9,13,27,32],Pc=u&&"CompositionEvent"in window,Gn=null;u&&"documentMode"in document&&(Gn=document.documentMode);var Ty=u&&"TextEvent"in window&&!Gn,Hf=u&&(!Pc||Gn&&8<Gn&&11>=Gn),$f=" ",Wf=!1;function Uf(r,s){switch(r){case"keyup":return My.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kf(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var zs=!1;function Oy(r,s){switch(r){case"compositionend":return Kf(s);case"keypress":return s.which!==32?null:(Wf=!0,$f);case"textInput":return r=s.data,r===$f&&Wf?null:r;default:return null}}function By(r,s){if(zs)return r==="compositionend"||!Pc&&Uf(r,s)?(r=If(),ma=xc=yr=null,zs=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Hf&&s.locale!=="ko"?null:s.data;default:return null}}var Iy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vf(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Iy[r.type]:s==="textarea"}function qf(r,s,a,h){ff(h),s=Ca(s,"onChange"),0<s.length&&(a=new Cc("onChange","change",null,a,h),r.push({event:a,listeners:s}))}var Xn=null,Jn=null;function Ay(r){up(r,0)}function ya(r){var s=Ks(r);if(Ot(s))return r}function jy(r,s){if(r==="change")return s}var Qf=!1;if(u){var Lc;if(u){var Nc="oninput"in document;if(!Nc){var Yf=document.createElement("div");Yf.setAttribute("oninput","return;"),Nc=typeof Yf.oninput=="function"}Lc=Nc}else Lc=!1;Qf=Lc&&(!document.documentMode||9<document.documentMode)}function Gf(){Xn&&(Xn.detachEvent("onpropertychange",Xf),Jn=Xn=null)}function Xf(r){if(r.propertyName==="value"&&ya(Jn)){var s=[];qf(s,Jn,r,cc(r)),_f(Ay,s)}}function Fy(r,s,a){r==="focusin"?(Gf(),Xn=s,Jn=a,Xn.attachEvent("onpropertychange",Xf)):r==="focusout"&&Gf()}function zy(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ya(Jn)}function Hy(r,s){if(r==="click")return ya(s)}function $y(r,s){if(r==="input"||r==="change")return ya(s)}function Wy(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var xi=typeof Object.is=="function"?Object.is:Wy;function Zn(r,s){if(xi(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),h=Object.keys(s);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var f=a[h];if(!p.call(s,f)||!xi(r[f],s[f]))return!1}return!0}function Jf(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Zf(r,s){var a=Jf(r);r=0;for(var h;a;){if(a.nodeType===3){if(h=r+a.textContent.length,r<=s&&h>=s)return{node:a,offset:s-r};r=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Jf(a)}}function ep(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?ep(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function tp(){for(var r=window,s=Te();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=Te(r.document)}return s}function Dc(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function Uy(r){var s=tp(),a=r.focusedElem,h=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&ep(a.ownerDocument.documentElement,a)){if(h!==null&&Dc(a)){if(s=h.start,r=h.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=a.textContent.length,m=Math.min(h.start,f);h=h.end===void 0?m:Math.min(h.end,f),!r.extend&&m>h&&(f=h,h=m,m=f),f=Zf(a,m);var y=Zf(a,h);f&&y&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==y.node||r.focusOffset!==y.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),m>h?(r.addRange(s),r.extend(y.node,y.offset)):(s.setEnd(y.node,y.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var Ky=u&&"documentMode"in document&&11>=document.documentMode,Hs=null,Mc=null,eo=null,Tc=!1;function ip(r,s,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Tc||Hs==null||Hs!==Te(h)||(h=Hs,"selectionStart"in h&&Dc(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),eo&&Zn(eo,h)||(eo=h,h=Ca(Mc,"onSelect"),0<h.length&&(s=new Cc("onSelect","select",null,s,a),r.push({event:s,listeners:h}),s.target=Hs)))}function Sa(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var $s={animationend:Sa("Animation","AnimationEnd"),animationiteration:Sa("Animation","AnimationIteration"),animationstart:Sa("Animation","AnimationStart"),transitionend:Sa("Transition","TransitionEnd")},Oc={},rp={};u&&(rp=document.createElement("div").style,"AnimationEvent"in window||(delete $s.animationend.animation,delete $s.animationiteration.animation,delete $s.animationstart.animation),"TransitionEvent"in window||delete $s.transitionend.transition);function wa(r){if(Oc[r])return Oc[r];if(!$s[r])return r;var s=$s[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in rp)return Oc[r]=s[a];return r}var sp=wa("animationend"),np=wa("animationiteration"),op=wa("animationstart"),ap=wa("transitionend"),lp=new Map,cp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(r,s){lp.set(r,s),l(s,[r])}for(var Bc=0;Bc<cp.length;Bc++){var Ic=cp[Bc],Vy=Ic.toLowerCase(),qy=Ic[0].toUpperCase()+Ic.slice(1);Sr(Vy,"on"+qy)}Sr(sp,"onAnimationEnd"),Sr(np,"onAnimationIteration"),Sr(op,"onAnimationStart"),Sr("dblclick","onDoubleClick"),Sr("focusin","onFocus"),Sr("focusout","onBlur"),Sr(ap,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var to="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qy=new Set("cancel close invalid load scroll toggle".split(" ").concat(to));function hp(r,s,a){var h=r.type||"unknown-event";r.currentTarget=a,V0(h,s,void 0,r),r.currentTarget=null}function up(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var h=r[a],f=h.event;h=h.listeners;e:{var m=void 0;if(s)for(var y=h.length-1;0<=y;y--){var b=h[y],P=b.instance,F=b.currentTarget;if(b=b.listener,P!==m&&f.isPropagationStopped())break e;hp(f,b,F),m=P}else for(y=0;y<h.length;y++){if(b=h[y],P=b.instance,F=b.currentTarget,b=b.listener,P!==m&&f.isPropagationStopped())break e;hp(f,b,F),m=P}}}if(na)throw r=fc,na=!1,fc=null,r}function ze(r,s){var a=s[Uc];a===void 0&&(a=s[Uc]=new Set);var h=r+"__bubble";a.has(h)||(dp(s,r,2,!1),a.add(h))}function Ac(r,s,a){var h=0;s&&(h|=4),dp(a,r,h,s)}var xa="_reactListening"+Math.random().toString(36).slice(2);function io(r){if(!r[xa]){r[xa]=!0,n.forEach(function(a){a!=="selectionchange"&&(Qy.has(a)||Ac(a,!1,r),Ac(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[xa]||(s[xa]=!0,Ac("selectionchange",!1,s))}}function dp(r,s,a,h){switch(Bf(s)){case 1:var f=ly;break;case 4:f=cy;break;default:f=Sc}a=f.bind(null,s,a,r),f=void 0,!dc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),h?f!==void 0?r.addEventListener(s,a,{capture:!0,passive:f}):r.addEventListener(s,a,!0):f!==void 0?r.addEventListener(s,a,{passive:f}):r.addEventListener(s,a,!1)}function jc(r,s,a,h,f){var m=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var y=h.tag;if(y===3||y===4){var b=h.stateNode.containerInfo;if(b===f||b.nodeType===8&&b.parentNode===f)break;if(y===4)for(y=h.return;y!==null;){var P=y.tag;if((P===3||P===4)&&(P=y.stateNode.containerInfo,P===f||P.nodeType===8&&P.parentNode===f))return;y=y.return}for(;b!==null;){if(y=Zr(b),y===null)return;if(P=y.tag,P===5||P===6){h=m=y;continue e}b=b.parentNode}}h=h.return}_f(function(){var F=m,Q=cc(a),X=[];e:{var q=lp.get(r);if(q!==void 0){var ae=Cc,fe=r;switch(r){case"keypress":if(ga(a)===0)break e;case"keydown":case"keyup":ae=by;break;case"focusin":fe="focus",ae=Ec;break;case"focusout":fe="blur",ae=Ec;break;case"beforeblur":case"afterblur":ae=Ec;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=jf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=dy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=Ry;break;case sp:case np:case op:ae=my;break;case ap:ae=Ly;break;case"scroll":ae=hy;break;case"wheel":ae=Dy;break;case"copy":case"cut":case"paste":ae=_y;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=zf}var me=(s&4)!==0,rt=!me&&r==="scroll",B=me?q!==null?q+"Capture":null:q;me=[];for(var D=F,I;D!==null;){I=D;var J=I.stateNode;if(I.tag===5&&J!==null&&(I=J,B!==null&&(J=jn(D,B),J!=null&&me.push(ro(D,J,I)))),rt)break;D=D.return}0<me.length&&(q=new ae(q,fe,null,a,Q),X.push({event:q,listeners:me}))}}if((s&7)===0){e:{if(q=r==="mouseover"||r==="pointerover",ae=r==="mouseout"||r==="pointerout",q&&a!==lc&&(fe=a.relatedTarget||a.fromElement)&&(Zr(fe)||fe[qi]))break e;if((ae||q)&&(q=Q.window===Q?Q:(q=Q.ownerDocument)?q.defaultView||q.parentWindow:window,ae?(fe=a.relatedTarget||a.toElement,ae=F,fe=fe?Zr(fe):null,fe!==null&&(rt=Jr(fe),fe!==rt||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ae=null,fe=F),ae!==fe)){if(me=jf,J="onMouseLeave",B="onMouseEnter",D="mouse",(r==="pointerout"||r==="pointerover")&&(me=zf,J="onPointerLeave",B="onPointerEnter",D="pointer"),rt=ae==null?q:Ks(ae),I=fe==null?q:Ks(fe),q=new me(J,D+"leave",ae,a,Q),q.target=rt,q.relatedTarget=I,J=null,Zr(Q)===F&&(me=new me(B,D+"enter",fe,a,Q),me.target=I,me.relatedTarget=rt,J=me),rt=J,ae&&fe)t:{for(me=ae,B=fe,D=0,I=me;I;I=Ws(I))D++;for(I=0,J=B;J;J=Ws(J))I++;for(;0<D-I;)me=Ws(me),D--;for(;0<I-D;)B=Ws(B),I--;for(;D--;){if(me===B||B!==null&&me===B.alternate)break t;me=Ws(me),B=Ws(B)}me=null}else me=null;ae!==null&&fp(X,q,ae,me,!1),fe!==null&&rt!==null&&fp(X,rt,fe,me,!0)}}e:{if(q=F?Ks(F):window,ae=q.nodeName&&q.nodeName.toLowerCase(),ae==="select"||ae==="input"&&q.type==="file")var ve=jy;else if(Vf(q))if(Qf)ve=$y;else{ve=zy;var we=Fy}else(ae=q.nodeName)&&ae.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(ve=Hy);if(ve&&(ve=ve(r,F))){qf(X,ve,a,Q);break e}we&&we(r,q,F),r==="focusout"&&(we=q._wrapperState)&&we.controlled&&q.type==="number"&&rc(q,"number",q.value)}switch(we=F?Ks(F):window,r){case"focusin":(Vf(we)||we.contentEditable==="true")&&(Hs=we,Mc=F,eo=null);break;case"focusout":eo=Mc=Hs=null;break;case"mousedown":Tc=!0;break;case"contextmenu":case"mouseup":case"dragend":Tc=!1,ip(X,a,Q);break;case"selectionchange":if(Ky)break;case"keydown":case"keyup":ip(X,a,Q)}var xe;if(Pc)e:{switch(r){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else zs?Uf(r,a)&&(Ce="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Ce="onCompositionStart");Ce&&(Hf&&a.locale!=="ko"&&(zs||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&zs&&(xe=If()):(yr=Q,xc="value"in yr?yr.value:yr.textContent,zs=!0)),we=Ca(F,Ce),0<we.length&&(Ce=new Ff(Ce,r,null,a,Q),X.push({event:Ce,listeners:we}),xe?Ce.data=xe:(xe=Kf(a),xe!==null&&(Ce.data=xe)))),(xe=Ty?Oy(r,a):By(r,a))&&(F=Ca(F,"onBeforeInput"),0<F.length&&(Q=new Ff("onBeforeInput","beforeinput",null,a,Q),X.push({event:Q,listeners:F}),Q.data=xe))}up(X,s)})}function ro(r,s,a){return{instance:r,listener:s,currentTarget:a}}function Ca(r,s){for(var a=s+"Capture",h=[];r!==null;){var f=r,m=f.stateNode;f.tag===5&&m!==null&&(f=m,m=jn(r,a),m!=null&&h.unshift(ro(r,m,f)),m=jn(r,s),m!=null&&h.push(ro(r,m,f))),r=r.return}return h}function Ws(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function fp(r,s,a,h,f){for(var m=s._reactName,y=[];a!==null&&a!==h;){var b=a,P=b.alternate,F=b.stateNode;if(P!==null&&P===h)break;b.tag===5&&F!==null&&(b=F,f?(P=jn(a,m),P!=null&&y.unshift(ro(a,P,b))):f||(P=jn(a,m),P!=null&&y.push(ro(a,P,b)))),a=a.return}y.length!==0&&r.push({event:s,listeners:y})}var Yy=/\r\n?/g,Gy=/\u0000|\uFFFD/g;function pp(r){return(typeof r=="string"?r:""+r).replace(Yy,`
`).replace(Gy,"")}function ba(r,s,a){if(s=pp(s),pp(r)!==s&&a)throw Error(i(425))}function ka(){}var Fc=null,zc=null;function Hc(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var $c=typeof setTimeout=="function"?setTimeout:void 0,Xy=typeof clearTimeout=="function"?clearTimeout:void 0,mp=typeof Promise=="function"?Promise:void 0,Jy=typeof queueMicrotask=="function"?queueMicrotask:typeof mp<"u"?function(r){return mp.resolve(null).then(r).catch(Zy)}:$c;function Zy(r){setTimeout(function(){throw r})}function Wc(r,s){var a=s,h=0;do{var f=a.nextSibling;if(r.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(h===0){r.removeChild(f),qn(s);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=f}while(a);qn(s)}function wr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function gp(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var Us=Math.random().toString(36).slice(2),Ti="__reactFiber$"+Us,so="__reactProps$"+Us,qi="__reactContainer$"+Us,Uc="__reactEvents$"+Us,eS="__reactListeners$"+Us,tS="__reactHandles$"+Us;function Zr(r){var s=r[Ti];if(s)return s;for(var a=r.parentNode;a;){if(s=a[qi]||a[Ti]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=gp(r);r!==null;){if(a=r[Ti])return a;r=gp(r)}return s}r=a,a=r.parentNode}return null}function no(r){return r=r[Ti]||r[qi],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Ks(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(i(33))}function Ea(r){return r[so]||null}var Kc=[],Vs=-1;function xr(r){return{current:r}}function He(r){0>Vs||(r.current=Kc[Vs],Kc[Vs]=null,Vs--)}function Fe(r,s){Vs++,Kc[Vs]=r.current,r.current=s}var Cr={},Lt=xr(Cr),Ut=xr(!1),es=Cr;function qs(r,s){var a=r.type.contextTypes;if(!a)return Cr;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var f={},m;for(m in a)f[m]=s[m];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function Kt(r){return r=r.childContextTypes,r!=null}function Ra(){He(Ut),He(Lt)}function _p(r,s,a){if(Lt.current!==Cr)throw Error(i(168));Fe(Lt,s),Fe(Ut,a)}function vp(r,s,a){var h=r.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var f in h)if(!(f in s))throw Error(i(108,Ee(r)||"Unknown",f));return Z({},a,h)}function Pa(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Cr,es=Lt.current,Fe(Lt,r),Fe(Ut,Ut.current),!0}function yp(r,s,a){var h=r.stateNode;if(!h)throw Error(i(169));a?(r=vp(r,s,es),h.__reactInternalMemoizedMergedChildContext=r,He(Ut),He(Lt),Fe(Lt,r)):He(Ut),Fe(Ut,a)}var Qi=null,La=!1,Vc=!1;function Sp(r){Qi===null?Qi=[r]:Qi.push(r)}function iS(r){La=!0,Sp(r)}function br(){if(!Vc&&Qi!==null){Vc=!0;var r=0,s=Ae;try{var a=Qi;for(Ae=1;r<a.length;r++){var h=a[r];do h=h(!0);while(h!==null)}Qi=null,La=!1}catch(f){throw Qi!==null&&(Qi=Qi.slice(r+1)),xf(pc,br),f}finally{Ae=s,Vc=!1}}return null}var Qs=[],Ys=0,Na=null,Da=0,ai=[],li=0,ts=null,Yi=1,Gi="";function is(r,s){Qs[Ys++]=Da,Qs[Ys++]=Na,Na=r,Da=s}function wp(r,s,a){ai[li++]=Yi,ai[li++]=Gi,ai[li++]=ts,ts=r;var h=Yi;r=Gi;var f=32-wi(h)-1;h&=~(1<<f),a+=1;var m=32-wi(s)+f;if(30<m){var y=f-f%5;m=(h&(1<<y)-1).toString(32),h>>=y,f-=y,Yi=1<<32-wi(s)+f|a<<f|h,Gi=m+r}else Yi=1<<m|a<<f|h,Gi=r}function qc(r){r.return!==null&&(is(r,1),wp(r,1,0))}function Qc(r){for(;r===Na;)Na=Qs[--Ys],Qs[Ys]=null,Da=Qs[--Ys],Qs[Ys]=null;for(;r===ts;)ts=ai[--li],ai[li]=null,Gi=ai[--li],ai[li]=null,Yi=ai[--li],ai[li]=null}var ei=null,ti=null,We=!1,Ci=null;function xp(r,s){var a=di(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function Cp(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,ei=r,ti=wr(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,ei=r,ti=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=ts!==null?{id:Yi,overflow:Gi}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=di(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,ei=r,ti=null,!0):!1;default:return!1}}function Yc(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Gc(r){if(We){var s=ti;if(s){var a=s;if(!Cp(r,s)){if(Yc(r))throw Error(i(418));s=wr(a.nextSibling);var h=ei;s&&Cp(r,s)?xp(h,a):(r.flags=r.flags&-4097|2,We=!1,ei=r)}}else{if(Yc(r))throw Error(i(418));r.flags=r.flags&-4097|2,We=!1,ei=r}}}function bp(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;ei=r}function Ma(r){if(r!==ei)return!1;if(!We)return bp(r),We=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!Hc(r.type,r.memoizedProps)),s&&(s=ti)){if(Yc(r))throw kp(),Error(i(418));for(;s;)xp(r,s),s=wr(s.nextSibling)}if(bp(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){ti=wr(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}ti=null}}else ti=ei?wr(r.stateNode.nextSibling):null;return!0}function kp(){for(var r=ti;r;)r=wr(r.nextSibling)}function Gs(){ti=ei=null,We=!1}function Xc(r){Ci===null?Ci=[r]:Ci.push(r)}var rS=T.ReactCurrentBatchConfig;function oo(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(i(309));var h=a.stateNode}if(!h)throw Error(i(147,r));var f=h,m=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===m?s.ref:(s=function(y){var b=f.refs;y===null?delete b[m]:b[m]=y},s._stringRef=m,s)}if(typeof r!="string")throw Error(i(284));if(!a._owner)throw Error(i(290,r))}return r}function Ta(r,s){throw r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function Ep(r){var s=r._init;return s(r._payload)}function Rp(r){function s(B,D){if(r){var I=B.deletions;I===null?(B.deletions=[D],B.flags|=16):I.push(D)}}function a(B,D){if(!r)return null;for(;D!==null;)s(B,D),D=D.sibling;return null}function h(B,D){for(B=new Map;D!==null;)D.key!==null?B.set(D.key,D):B.set(D.index,D),D=D.sibling;return B}function f(B,D){return B=Mr(B,D),B.index=0,B.sibling=null,B}function m(B,D,I){return B.index=I,r?(I=B.alternate,I!==null?(I=I.index,I<D?(B.flags|=2,D):I):(B.flags|=2,D)):(B.flags|=1048576,D)}function y(B){return r&&B.alternate===null&&(B.flags|=2),B}function b(B,D,I,J){return D===null||D.tag!==6?(D=$h(I,B.mode,J),D.return=B,D):(D=f(D,I),D.return=B,D)}function P(B,D,I,J){var ve=I.type;return ve===le?Q(B,D,I.props.children,J,I.key):D!==null&&(D.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===K&&Ep(ve)===D.type)?(J=f(D,I.props),J.ref=oo(B,D,I),J.return=B,J):(J=rl(I.type,I.key,I.props,null,B.mode,J),J.ref=oo(B,D,I),J.return=B,J)}function F(B,D,I,J){return D===null||D.tag!==4||D.stateNode.containerInfo!==I.containerInfo||D.stateNode.implementation!==I.implementation?(D=Wh(I,B.mode,J),D.return=B,D):(D=f(D,I.children||[]),D.return=B,D)}function Q(B,D,I,J,ve){return D===null||D.tag!==7?(D=hs(I,B.mode,J,ve),D.return=B,D):(D=f(D,I),D.return=B,D)}function X(B,D,I){if(typeof D=="string"&&D!==""||typeof D=="number")return D=$h(""+D,B.mode,I),D.return=B,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case $:return I=rl(D.type,D.key,D.props,null,B.mode,I),I.ref=oo(B,null,D),I.return=B,I;case G:return D=Wh(D,B.mode,I),D.return=B,D;case K:var J=D._init;return X(B,J(D._payload),I)}if(Bn(D)||re(D))return D=hs(D,B.mode,I,null),D.return=B,D;Ta(B,D)}return null}function q(B,D,I,J){var ve=D!==null?D.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return ve!==null?null:b(B,D,""+I,J);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case $:return I.key===ve?P(B,D,I,J):null;case G:return I.key===ve?F(B,D,I,J):null;case K:return ve=I._init,q(B,D,ve(I._payload),J)}if(Bn(I)||re(I))return ve!==null?null:Q(B,D,I,J,null);Ta(B,I)}return null}function ae(B,D,I,J,ve){if(typeof J=="string"&&J!==""||typeof J=="number")return B=B.get(I)||null,b(D,B,""+J,ve);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case $:return B=B.get(J.key===null?I:J.key)||null,P(D,B,J,ve);case G:return B=B.get(J.key===null?I:J.key)||null,F(D,B,J,ve);case K:var we=J._init;return ae(B,D,I,we(J._payload),ve)}if(Bn(J)||re(J))return B=B.get(I)||null,Q(D,B,J,ve,null);Ta(D,J)}return null}function fe(B,D,I,J){for(var ve=null,we=null,xe=D,Ce=D=0,_t=null;xe!==null&&Ce<I.length;Ce++){xe.index>Ce?(_t=xe,xe=null):_t=xe.sibling;var Be=q(B,xe,I[Ce],J);if(Be===null){xe===null&&(xe=_t);break}r&&xe&&Be.alternate===null&&s(B,xe),D=m(Be,D,Ce),we===null?ve=Be:we.sibling=Be,we=Be,xe=_t}if(Ce===I.length)return a(B,xe),We&&is(B,Ce),ve;if(xe===null){for(;Ce<I.length;Ce++)xe=X(B,I[Ce],J),xe!==null&&(D=m(xe,D,Ce),we===null?ve=xe:we.sibling=xe,we=xe);return We&&is(B,Ce),ve}for(xe=h(B,xe);Ce<I.length;Ce++)_t=ae(xe,B,Ce,I[Ce],J),_t!==null&&(r&&_t.alternate!==null&&xe.delete(_t.key===null?Ce:_t.key),D=m(_t,D,Ce),we===null?ve=_t:we.sibling=_t,we=_t);return r&&xe.forEach(function(Tr){return s(B,Tr)}),We&&is(B,Ce),ve}function me(B,D,I,J){var ve=re(I);if(typeof ve!="function")throw Error(i(150));if(I=ve.call(I),I==null)throw Error(i(151));for(var we=ve=null,xe=D,Ce=D=0,_t=null,Be=I.next();xe!==null&&!Be.done;Ce++,Be=I.next()){xe.index>Ce?(_t=xe,xe=null):_t=xe.sibling;var Tr=q(B,xe,Be.value,J);if(Tr===null){xe===null&&(xe=_t);break}r&&xe&&Tr.alternate===null&&s(B,xe),D=m(Tr,D,Ce),we===null?ve=Tr:we.sibling=Tr,we=Tr,xe=_t}if(Be.done)return a(B,xe),We&&is(B,Ce),ve;if(xe===null){for(;!Be.done;Ce++,Be=I.next())Be=X(B,Be.value,J),Be!==null&&(D=m(Be,D,Ce),we===null?ve=Be:we.sibling=Be,we=Be);return We&&is(B,Ce),ve}for(xe=h(B,xe);!Be.done;Ce++,Be=I.next())Be=ae(xe,B,Ce,Be.value,J),Be!==null&&(r&&Be.alternate!==null&&xe.delete(Be.key===null?Ce:Be.key),D=m(Be,D,Ce),we===null?ve=Be:we.sibling=Be,we=Be);return r&&xe.forEach(function(IS){return s(B,IS)}),We&&is(B,Ce),ve}function rt(B,D,I,J){if(typeof I=="object"&&I!==null&&I.type===le&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case $:e:{for(var ve=I.key,we=D;we!==null;){if(we.key===ve){if(ve=I.type,ve===le){if(we.tag===7){a(B,we.sibling),D=f(we,I.props.children),D.return=B,B=D;break e}}else if(we.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===K&&Ep(ve)===we.type){a(B,we.sibling),D=f(we,I.props),D.ref=oo(B,we,I),D.return=B,B=D;break e}a(B,we);break}else s(B,we);we=we.sibling}I.type===le?(D=hs(I.props.children,B.mode,J,I.key),D.return=B,B=D):(J=rl(I.type,I.key,I.props,null,B.mode,J),J.ref=oo(B,D,I),J.return=B,B=J)}return y(B);case G:e:{for(we=I.key;D!==null;){if(D.key===we)if(D.tag===4&&D.stateNode.containerInfo===I.containerInfo&&D.stateNode.implementation===I.implementation){a(B,D.sibling),D=f(D,I.children||[]),D.return=B,B=D;break e}else{a(B,D);break}else s(B,D);D=D.sibling}D=Wh(I,B.mode,J),D.return=B,B=D}return y(B);case K:return we=I._init,rt(B,D,we(I._payload),J)}if(Bn(I))return fe(B,D,I,J);if(re(I))return me(B,D,I,J);Ta(B,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,D!==null&&D.tag===6?(a(B,D.sibling),D=f(D,I),D.return=B,B=D):(a(B,D),D=$h(I,B.mode,J),D.return=B,B=D),y(B)):a(B,D)}return rt}var Xs=Rp(!0),Pp=Rp(!1),Oa=xr(null),Ba=null,Js=null,Jc=null;function Zc(){Jc=Js=Ba=null}function eh(r){var s=Oa.current;He(Oa),r._currentValue=s}function th(r,s,a){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===a)break;r=r.return}}function Zs(r,s){Ba=r,Jc=Js=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(Vt=!0),r.firstContext=null)}function ci(r){var s=r._currentValue;if(Jc!==r)if(r={context:r,memoizedValue:s,next:null},Js===null){if(Ba===null)throw Error(i(308));Js=r,Ba.dependencies={lanes:0,firstContext:r}}else Js=Js.next=r;return s}var rs=null;function ih(r){rs===null?rs=[r]:rs.push(r)}function Lp(r,s,a,h){var f=s.interleaved;return f===null?(a.next=a,ih(s)):(a.next=f.next,f.next=a),s.interleaved=a,Xi(r,h)}function Xi(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var kr=!1;function rh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Np(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Ji(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function Er(r,s,a){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(Oe&2)!==0){var f=h.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),h.pending=s,Xi(r,a)}return f=h.interleaved,f===null?(s.next=s,ih(h)):(s.next=f.next,f.next=s),h.interleaved=s,Xi(r,a)}function Ia(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var h=s.lanes;h&=r.pendingLanes,a|=h,s.lanes=a,_c(r,a)}}function Dp(r,s){var a=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var y={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?f=m=y:m=m.next=y,a=a.next}while(a!==null);m===null?f=m=s:m=m.next=s}else f=m=s;a={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:h.shared,effects:h.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function Aa(r,s,a,h){var f=r.updateQueue;kr=!1;var m=f.firstBaseUpdate,y=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var P=b,F=P.next;P.next=null,y===null?m=F:y.next=F,y=P;var Q=r.alternate;Q!==null&&(Q=Q.updateQueue,b=Q.lastBaseUpdate,b!==y&&(b===null?Q.firstBaseUpdate=F:b.next=F,Q.lastBaseUpdate=P))}if(m!==null){var X=f.baseState;y=0,Q=F=P=null,b=m;do{var q=b.lane,ae=b.eventTime;if((h&q)===q){Q!==null&&(Q=Q.next={eventTime:ae,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var fe=r,me=b;switch(q=s,ae=a,me.tag){case 1:if(fe=me.payload,typeof fe=="function"){X=fe.call(ae,X,q);break e}X=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=me.payload,q=typeof fe=="function"?fe.call(ae,X,q):fe,q==null)break e;X=Z({},X,q);break e;case 2:kr=!0}}b.callback!==null&&b.lane!==0&&(r.flags|=64,q=f.effects,q===null?f.effects=[b]:q.push(b))}else ae={eventTime:ae,lane:q,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Q===null?(F=Q=ae,P=X):Q=Q.next=ae,y|=q;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;q=b,b=q.next,q.next=null,f.lastBaseUpdate=q,f.shared.pending=null}}while(!0);if(Q===null&&(P=X),f.baseState=P,f.firstBaseUpdate=F,f.lastBaseUpdate=Q,s=f.shared.interleaved,s!==null){f=s;do y|=f.lane,f=f.next;while(f!==s)}else m===null&&(f.shared.lanes=0);os|=y,r.lanes=y,r.memoizedState=X}}function Mp(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var h=r[s],f=h.callback;if(f!==null){if(h.callback=null,h=a,typeof f!="function")throw Error(i(191,f));f.call(h)}}}var ao={},Oi=xr(ao),lo=xr(ao),co=xr(ao);function ss(r){if(r===ao)throw Error(i(174));return r}function sh(r,s){switch(Fe(co,s),Fe(lo,r),Fe(Oi,ao),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:nc(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=nc(s,r)}He(Oi),Fe(Oi,s)}function en(){He(Oi),He(lo),He(co)}function Tp(r){ss(co.current);var s=ss(Oi.current),a=nc(s,r.type);s!==a&&(Fe(lo,r),Fe(Oi,a))}function nh(r){lo.current===r&&(He(Oi),He(lo))}var qe=xr(0);function ja(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var oh=[];function ah(){for(var r=0;r<oh.length;r++)oh[r]._workInProgressVersionPrimary=null;oh.length=0}var Fa=T.ReactCurrentDispatcher,lh=T.ReactCurrentBatchConfig,ns=0,Qe=null,ct=null,mt=null,za=!1,ho=!1,uo=0,sS=0;function Nt(){throw Error(i(321))}function ch(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!xi(r[a],s[a]))return!1;return!0}function hh(r,s,a,h,f,m){if(ns=m,Qe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Fa.current=r===null||r.memoizedState===null?lS:cS,r=a(h,f),ho){m=0;do{if(ho=!1,uo=0,25<=m)throw Error(i(301));m+=1,mt=ct=null,s.updateQueue=null,Fa.current=hS,r=a(h,f)}while(ho)}if(Fa.current=Wa,s=ct!==null&&ct.next!==null,ns=0,mt=ct=Qe=null,za=!1,s)throw Error(i(300));return r}function uh(){var r=uo!==0;return uo=0,r}function Bi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?Qe.memoizedState=mt=r:mt=mt.next=r,mt}function hi(){if(ct===null){var r=Qe.alternate;r=r!==null?r.memoizedState:null}else r=ct.next;var s=mt===null?Qe.memoizedState:mt.next;if(s!==null)mt=s,ct=r;else{if(r===null)throw Error(i(310));ct=r,r={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},mt===null?Qe.memoizedState=mt=r:mt=mt.next=r}return mt}function fo(r,s){return typeof s=="function"?s(r):s}function dh(r){var s=hi(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=r;var h=ct,f=h.baseQueue,m=a.pending;if(m!==null){if(f!==null){var y=f.next;f.next=m.next,m.next=y}h.baseQueue=f=m,a.pending=null}if(f!==null){m=f.next,h=h.baseState;var b=y=null,P=null,F=m;do{var Q=F.lane;if((ns&Q)===Q)P!==null&&(P=P.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),h=F.hasEagerState?F.eagerState:r(h,F.action);else{var X={lane:Q,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};P===null?(b=P=X,y=h):P=P.next=X,Qe.lanes|=Q,os|=Q}F=F.next}while(F!==null&&F!==m);P===null?y=h:P.next=b,xi(h,s.memoizedState)||(Vt=!0),s.memoizedState=h,s.baseState=y,s.baseQueue=P,a.lastRenderedState=h}if(r=a.interleaved,r!==null){f=r;do m=f.lane,Qe.lanes|=m,os|=m,f=f.next;while(f!==r)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function fh(r){var s=hi(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=r;var h=a.dispatch,f=a.pending,m=s.memoizedState;if(f!==null){a.pending=null;var y=f=f.next;do m=r(m,y.action),y=y.next;while(y!==f);xi(m,s.memoizedState)||(Vt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,h]}function Op(){}function Bp(r,s){var a=Qe,h=hi(),f=s(),m=!xi(h.memoizedState,f);if(m&&(h.memoizedState=f,Vt=!0),h=h.queue,ph(jp.bind(null,a,h,r),[r]),h.getSnapshot!==s||m||mt!==null&&mt.memoizedState.tag&1){if(a.flags|=2048,po(9,Ap.bind(null,a,h,f,s),void 0,null),gt===null)throw Error(i(349));(ns&30)!==0||Ip(a,s,f)}return f}function Ip(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=Qe.updateQueue,s===null?(s={lastEffect:null,stores:null},Qe.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function Ap(r,s,a,h){s.value=a,s.getSnapshot=h,Fp(s)&&zp(r)}function jp(r,s,a){return a(function(){Fp(s)&&zp(r)})}function Fp(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!xi(r,a)}catch{return!0}}function zp(r){var s=Xi(r,1);s!==null&&Ri(s,r,1,-1)}function Hp(r){var s=Bi();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:r},s.queue=r,r=r.dispatch=aS.bind(null,Qe,r),[s.memoizedState,r]}function po(r,s,a,h){return r={tag:r,create:s,destroy:a,deps:h,next:null},s=Qe.updateQueue,s===null?(s={lastEffect:null,stores:null},Qe.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(h=a.next,a.next=r,r.next=h,s.lastEffect=r)),r}function $p(){return hi().memoizedState}function Ha(r,s,a,h){var f=Bi();Qe.flags|=r,f.memoizedState=po(1|s,a,void 0,h===void 0?null:h)}function $a(r,s,a,h){var f=hi();h=h===void 0?null:h;var m=void 0;if(ct!==null){var y=ct.memoizedState;if(m=y.destroy,h!==null&&ch(h,y.deps)){f.memoizedState=po(s,a,m,h);return}}Qe.flags|=r,f.memoizedState=po(1|s,a,m,h)}function Wp(r,s){return Ha(8390656,8,r,s)}function ph(r,s){return $a(2048,8,r,s)}function Up(r,s){return $a(4,2,r,s)}function Kp(r,s){return $a(4,4,r,s)}function Vp(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function qp(r,s,a){return a=a!=null?a.concat([r]):null,$a(4,4,Vp.bind(null,s,r),a)}function mh(){}function Qp(r,s){var a=hi();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&ch(s,h[1])?h[0]:(a.memoizedState=[r,s],r)}function Yp(r,s){var a=hi();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&ch(s,h[1])?h[0]:(r=r(),a.memoizedState=[r,s],r)}function Gp(r,s,a){return(ns&21)===0?(r.baseState&&(r.baseState=!1,Vt=!0),r.memoizedState=a):(xi(a,s)||(a=Ef(),Qe.lanes|=a,os|=a,r.baseState=!0),s)}function nS(r,s){var a=Ae;Ae=a!==0&&4>a?a:4,r(!0);var h=lh.transition;lh.transition={};try{r(!1),s()}finally{Ae=a,lh.transition=h}}function Xp(){return hi().memoizedState}function oS(r,s,a){var h=Nr(r);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},Jp(r))Zp(s,a);else if(a=Lp(r,s,a,h),a!==null){var f=It();Ri(a,r,h,f),em(a,s,h)}}function aS(r,s,a){var h=Nr(r),f={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(Jp(r))Zp(s,f);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var y=s.lastRenderedState,b=m(y,a);if(f.hasEagerState=!0,f.eagerState=b,xi(b,y)){var P=s.interleaved;P===null?(f.next=f,ih(s)):(f.next=P.next,P.next=f),s.interleaved=f;return}}catch{}finally{}a=Lp(r,s,f,h),a!==null&&(f=It(),Ri(a,r,h,f),em(a,s,h))}}function Jp(r){var s=r.alternate;return r===Qe||s!==null&&s===Qe}function Zp(r,s){ho=za=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function em(r,s,a){if((a&4194240)!==0){var h=s.lanes;h&=r.pendingLanes,a|=h,s.lanes=a,_c(r,a)}}var Wa={readContext:ci,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},lS={readContext:ci,useCallback:function(r,s){return Bi().memoizedState=[r,s===void 0?null:s],r},useContext:ci,useEffect:Wp,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,Ha(4194308,4,Vp.bind(null,s,r),a)},useLayoutEffect:function(r,s){return Ha(4194308,4,r,s)},useInsertionEffect:function(r,s){return Ha(4,2,r,s)},useMemo:function(r,s){var a=Bi();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var h=Bi();return s=a!==void 0?a(s):s,h.memoizedState=h.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},h.queue=r,r=r.dispatch=oS.bind(null,Qe,r),[h.memoizedState,r]},useRef:function(r){var s=Bi();return r={current:r},s.memoizedState=r},useState:Hp,useDebugValue:mh,useDeferredValue:function(r){return Bi().memoizedState=r},useTransition:function(){var r=Hp(!1),s=r[0];return r=nS.bind(null,r[1]),Bi().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var h=Qe,f=Bi();if(We){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),gt===null)throw Error(i(349));(ns&30)!==0||Ip(h,s,a)}f.memoizedState=a;var m={value:a,getSnapshot:s};return f.queue=m,Wp(jp.bind(null,h,m,r),[r]),h.flags|=2048,po(9,Ap.bind(null,h,m,a,s),void 0,null),a},useId:function(){var r=Bi(),s=gt.identifierPrefix;if(We){var a=Gi,h=Yi;a=(h&~(1<<32-wi(h)-1)).toString(32)+a,s=":"+s+"R"+a,a=uo++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=sS++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},cS={readContext:ci,useCallback:Qp,useContext:ci,useEffect:ph,useImperativeHandle:qp,useInsertionEffect:Up,useLayoutEffect:Kp,useMemo:Yp,useReducer:dh,useRef:$p,useState:function(){return dh(fo)},useDebugValue:mh,useDeferredValue:function(r){var s=hi();return Gp(s,ct.memoizedState,r)},useTransition:function(){var r=dh(fo)[0],s=hi().memoizedState;return[r,s]},useMutableSource:Op,useSyncExternalStore:Bp,useId:Xp,unstable_isNewReconciler:!1},hS={readContext:ci,useCallback:Qp,useContext:ci,useEffect:ph,useImperativeHandle:qp,useInsertionEffect:Up,useLayoutEffect:Kp,useMemo:Yp,useReducer:fh,useRef:$p,useState:function(){return fh(fo)},useDebugValue:mh,useDeferredValue:function(r){var s=hi();return ct===null?s.memoizedState=r:Gp(s,ct.memoizedState,r)},useTransition:function(){var r=fh(fo)[0],s=hi().memoizedState;return[r,s]},useMutableSource:Op,useSyncExternalStore:Bp,useId:Xp,unstable_isNewReconciler:!1};function bi(r,s){if(r&&r.defaultProps){s=Z({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function gh(r,s,a,h){s=r.memoizedState,a=a(h,s),a=a==null?s:Z({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Ua={isMounted:function(r){return(r=r._reactInternals)?Jr(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var h=It(),f=Nr(r),m=Ji(h,f);m.payload=s,a!=null&&(m.callback=a),s=Er(r,m,f),s!==null&&(Ri(s,r,f,h),Ia(s,r,f))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var h=It(),f=Nr(r),m=Ji(h,f);m.tag=1,m.payload=s,a!=null&&(m.callback=a),s=Er(r,m,f),s!==null&&(Ri(s,r,f,h),Ia(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=It(),h=Nr(r),f=Ji(a,h);f.tag=2,s!=null&&(f.callback=s),s=Er(r,f,h),s!==null&&(Ri(s,r,h,a),Ia(s,r,h))}};function tm(r,s,a,h,f,m,y){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,m,y):s.prototype&&s.prototype.isPureReactComponent?!Zn(a,h)||!Zn(f,m):!0}function im(r,s,a){var h=!1,f=Cr,m=s.contextType;return typeof m=="object"&&m!==null?m=ci(m):(f=Kt(s)?es:Lt.current,h=s.contextTypes,m=(h=h!=null)?qs(r,f):Cr),s=new s(a,m),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ua,r.stateNode=s,s._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=m),s}function rm(r,s,a,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,h),s.state!==r&&Ua.enqueueReplaceState(s,s.state,null)}function _h(r,s,a,h){var f=r.stateNode;f.props=a,f.state=r.memoizedState,f.refs={},rh(r);var m=s.contextType;typeof m=="object"&&m!==null?f.context=ci(m):(m=Kt(s)?es:Lt.current,f.context=qs(r,m)),f.state=r.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(gh(r,s,m,a),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Ua.enqueueReplaceState(f,f.state,null),Aa(r,a,f,h),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function tn(r,s){try{var a="",h=s;do a+=_e(h),h=h.return;while(h);var f=a}catch(m){f=`
Error generating stack: `+m.message+`
`+m.stack}return{value:r,source:s,stack:f,digest:null}}function vh(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function yh(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var uS=typeof WeakMap=="function"?WeakMap:Map;function sm(r,s,a){a=Ji(-1,a),a.tag=3,a.payload={element:null};var h=s.value;return a.callback=function(){Xa||(Xa=!0,Oh=h),yh(r,s)},a}function nm(r,s,a){a=Ji(-1,a),a.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var f=s.value;a.payload=function(){return h(f)},a.callback=function(){yh(r,s)}}var m=r.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){yh(r,s),typeof h!="function"&&(Pr===null?Pr=new Set([this]):Pr.add(this));var y=s.stack;this.componentDidCatch(s.value,{componentStack:y!==null?y:""})}),a}function om(r,s,a){var h=r.pingCache;if(h===null){h=r.pingCache=new uS;var f=new Set;h.set(s,f)}else f=h.get(s),f===void 0&&(f=new Set,h.set(s,f));f.has(a)||(f.add(a),r=kS.bind(null,r,s,a),s.then(r,r))}function am(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function lm(r,s,a,h,f){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Ji(-1,1),s.tag=2,Er(a,s,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=f,r)}var dS=T.ReactCurrentOwner,Vt=!1;function Bt(r,s,a,h){s.child=r===null?Pp(s,null,a,h):Xs(s,r.child,a,h)}function cm(r,s,a,h,f){a=a.render;var m=s.ref;return Zs(s,f),h=hh(r,s,a,h,m,f),a=uh(),r!==null&&!Vt?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Zi(r,s,f)):(We&&a&&qc(s),s.flags|=1,Bt(r,s,h,f),s.child)}function hm(r,s,a,h,f){if(r===null){var m=a.type;return typeof m=="function"&&!Hh(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=m,um(r,s,m,h,f)):(r=rl(a.type,null,h,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(m=r.child,(r.lanes&f)===0){var y=m.memoizedProps;if(a=a.compare,a=a!==null?a:Zn,a(y,h)&&r.ref===s.ref)return Zi(r,s,f)}return s.flags|=1,r=Mr(m,h),r.ref=s.ref,r.return=s,s.child=r}function um(r,s,a,h,f){if(r!==null){var m=r.memoizedProps;if(Zn(m,h)&&r.ref===s.ref)if(Vt=!1,s.pendingProps=h=m,(r.lanes&f)!==0)(r.flags&131072)!==0&&(Vt=!0);else return s.lanes=r.lanes,Zi(r,s,f)}return Sh(r,s,a,h,f)}function dm(r,s,a){var h=s.pendingProps,f=h.children,m=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(sn,ii),ii|=a;else{if((a&1073741824)===0)return r=m!==null?m.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Fe(sn,ii),ii|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=m!==null?m.baseLanes:a,Fe(sn,ii),ii|=h}else m!==null?(h=m.baseLanes|a,s.memoizedState=null):h=a,Fe(sn,ii),ii|=h;return Bt(r,s,f,a),s.child}function fm(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Sh(r,s,a,h,f){var m=Kt(a)?es:Lt.current;return m=qs(s,m),Zs(s,f),a=hh(r,s,a,h,m,f),h=uh(),r!==null&&!Vt?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Zi(r,s,f)):(We&&h&&qc(s),s.flags|=1,Bt(r,s,a,f),s.child)}function pm(r,s,a,h,f){if(Kt(a)){var m=!0;Pa(s)}else m=!1;if(Zs(s,f),s.stateNode===null)Va(r,s),im(s,a,h),_h(s,a,h,f),h=!0;else if(r===null){var y=s.stateNode,b=s.memoizedProps;y.props=b;var P=y.context,F=a.contextType;typeof F=="object"&&F!==null?F=ci(F):(F=Kt(a)?es:Lt.current,F=qs(s,F));var Q=a.getDerivedStateFromProps,X=typeof Q=="function"||typeof y.getSnapshotBeforeUpdate=="function";X||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(b!==h||P!==F)&&rm(s,y,h,F),kr=!1;var q=s.memoizedState;y.state=q,Aa(s,h,y,f),P=s.memoizedState,b!==h||q!==P||Ut.current||kr?(typeof Q=="function"&&(gh(s,a,Q,h),P=s.memoizedState),(b=kr||tm(s,a,b,h,q,P,F))?(X||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=P),y.props=h,y.state=P,y.context=F,h=b):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{y=s.stateNode,Np(r,s),b=s.memoizedProps,F=s.type===s.elementType?b:bi(s.type,b),y.props=F,X=s.pendingProps,q=y.context,P=a.contextType,typeof P=="object"&&P!==null?P=ci(P):(P=Kt(a)?es:Lt.current,P=qs(s,P));var ae=a.getDerivedStateFromProps;(Q=typeof ae=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(b!==X||q!==P)&&rm(s,y,h,P),kr=!1,q=s.memoizedState,y.state=q,Aa(s,h,y,f);var fe=s.memoizedState;b!==X||q!==fe||Ut.current||kr?(typeof ae=="function"&&(gh(s,a,ae,h),fe=s.memoizedState),(F=kr||tm(s,a,F,h,q,fe,P)||!1)?(Q||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(h,fe,P),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(h,fe,P)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||b===r.memoizedProps&&q===r.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||b===r.memoizedProps&&q===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=fe),y.props=h,y.state=fe,y.context=P,h=F):(typeof y.componentDidUpdate!="function"||b===r.memoizedProps&&q===r.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||b===r.memoizedProps&&q===r.memoizedState||(s.flags|=1024),h=!1)}return wh(r,s,a,h,m,f)}function wh(r,s,a,h,f,m){fm(r,s);var y=(s.flags&128)!==0;if(!h&&!y)return f&&yp(s,a,!1),Zi(r,s,m);h=s.stateNode,dS.current=s;var b=y&&typeof a.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,r!==null&&y?(s.child=Xs(s,r.child,null,m),s.child=Xs(s,null,b,m)):Bt(r,s,b,m),s.memoizedState=h.state,f&&yp(s,a,!0),s.child}function mm(r){var s=r.stateNode;s.pendingContext?_p(r,s.pendingContext,s.pendingContext!==s.context):s.context&&_p(r,s.context,!1),sh(r,s.containerInfo)}function gm(r,s,a,h,f){return Gs(),Xc(f),s.flags|=256,Bt(r,s,a,h),s.child}var xh={dehydrated:null,treeContext:null,retryLane:0};function Ch(r){return{baseLanes:r,cachePool:null,transitions:null}}function _m(r,s,a){var h=s.pendingProps,f=qe.current,m=!1,y=(s.flags&128)!==0,b;if((b=y)||(b=r!==null&&r.memoizedState===null?!1:(f&2)!==0),b?(m=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),Fe(qe,f&1),r===null)return Gc(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(y=h.children,r=h.fallback,m?(h=s.mode,m=s.child,y={mode:"hidden",children:y},(h&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=y):m=sl(y,h,0,null),r=hs(r,h,a,null),m.return=s,r.return=s,m.sibling=r,s.child=m,s.child.memoizedState=Ch(a),s.memoizedState=xh,r):bh(s,y));if(f=r.memoizedState,f!==null&&(b=f.dehydrated,b!==null))return fS(r,s,y,h,b,f,a);if(m){m=h.fallback,y=s.mode,f=r.child,b=f.sibling;var P={mode:"hidden",children:h.children};return(y&1)===0&&s.child!==f?(h=s.child,h.childLanes=0,h.pendingProps=P,s.deletions=null):(h=Mr(f,P),h.subtreeFlags=f.subtreeFlags&14680064),b!==null?m=Mr(b,m):(m=hs(m,y,a,null),m.flags|=2),m.return=s,h.return=s,h.sibling=m,s.child=h,h=m,m=s.child,y=r.child.memoizedState,y=y===null?Ch(a):{baseLanes:y.baseLanes|a,cachePool:null,transitions:y.transitions},m.memoizedState=y,m.childLanes=r.childLanes&~a,s.memoizedState=xh,h}return m=r.child,r=m.sibling,h=Mr(m,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=a),h.return=s,h.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=h,s.memoizedState=null,h}function bh(r,s){return s=sl({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Ka(r,s,a,h){return h!==null&&Xc(h),Xs(s,r.child,null,a),r=bh(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function fS(r,s,a,h,f,m,y){if(a)return s.flags&256?(s.flags&=-257,h=vh(Error(i(422))),Ka(r,s,y,h)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(m=h.fallback,f=s.mode,h=sl({mode:"visible",children:h.children},f,0,null),m=hs(m,f,y,null),m.flags|=2,h.return=s,m.return=s,h.sibling=m,s.child=h,(s.mode&1)!==0&&Xs(s,r.child,null,y),s.child.memoizedState=Ch(y),s.memoizedState=xh,m);if((s.mode&1)===0)return Ka(r,s,y,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var b=h.dgst;return h=b,m=Error(i(419)),h=vh(m,h,void 0),Ka(r,s,y,h)}if(b=(y&r.childLanes)!==0,Vt||b){if(h=gt,h!==null){switch(y&-y){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(h.suspendedLanes|y))!==0?0:f,f!==0&&f!==m.retryLane&&(m.retryLane=f,Xi(r,f),Ri(h,r,f,-1))}return zh(),h=vh(Error(i(421))),Ka(r,s,y,h)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=ES.bind(null,r),f._reactRetry=s,null):(r=m.treeContext,ti=wr(f.nextSibling),ei=s,We=!0,Ci=null,r!==null&&(ai[li++]=Yi,ai[li++]=Gi,ai[li++]=ts,Yi=r.id,Gi=r.overflow,ts=s),s=bh(s,h.children),s.flags|=4096,s)}function vm(r,s,a){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),th(r.return,s,a)}function kh(r,s,a,h,f){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:f}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=h,m.tail=a,m.tailMode=f)}function ym(r,s,a){var h=s.pendingProps,f=h.revealOrder,m=h.tail;if(Bt(r,s,h.children,a),h=qe.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&vm(r,a,s);else if(r.tag===19)vm(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(Fe(qe,h),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)r=a.alternate,r!==null&&ja(r)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),kh(s,!1,f,a,m);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&ja(r)===null){s.child=f;break}r=f.sibling,f.sibling=a,a=f,f=r}kh(s,!0,a,null,m);break;case"together":kh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Va(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Zi(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),os|=s.lanes,(a&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,a=Mr(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=Mr(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function pS(r,s,a){switch(s.tag){case 3:mm(s),Gs();break;case 5:Tp(s);break;case 1:Kt(s.type)&&Pa(s);break;case 4:sh(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,f=s.memoizedProps.value;Fe(Oa,h._currentValue),h._currentValue=f;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Fe(qe,qe.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?_m(r,s,a):(Fe(qe,qe.current&1),r=Zi(r,s,a),r!==null?r.sibling:null);Fe(qe,qe.current&1);break;case 19:if(h=(a&s.childLanes)!==0,(r.flags&128)!==0){if(h)return ym(r,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Fe(qe,qe.current),h)break;return null;case 22:case 23:return s.lanes=0,dm(r,s,a)}return Zi(r,s,a)}var Sm,Eh,wm,xm;Sm=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Eh=function(){},wm=function(r,s,a,h){var f=r.memoizedProps;if(f!==h){r=s.stateNode,ss(Oi.current);var m=null;switch(a){case"input":f=Xr(r,f),h=Xr(r,h),m=[];break;case"select":f=Z({},f,{value:void 0}),h=Z({},h,{value:void 0}),m=[];break;case"textarea":f=sc(r,f),h=sc(r,h),m=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=ka)}oc(a,h);var y;a=null;for(F in f)if(!h.hasOwnProperty(F)&&f.hasOwnProperty(F)&&f[F]!=null)if(F==="style"){var b=f[F];for(y in b)b.hasOwnProperty(y)&&(a||(a={}),a[y]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(o.hasOwnProperty(F)?m||(m=[]):(m=m||[]).push(F,null));for(F in h){var P=h[F];if(b=f!=null?f[F]:void 0,h.hasOwnProperty(F)&&P!==b&&(P!=null||b!=null))if(F==="style")if(b){for(y in b)!b.hasOwnProperty(y)||P&&P.hasOwnProperty(y)||(a||(a={}),a[y]="");for(y in P)P.hasOwnProperty(y)&&b[y]!==P[y]&&(a||(a={}),a[y]=P[y])}else a||(m||(m=[]),m.push(F,a)),a=P;else F==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,b=b?b.__html:void 0,P!=null&&b!==P&&(m=m||[]).push(F,P)):F==="children"?typeof P!="string"&&typeof P!="number"||(m=m||[]).push(F,""+P):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(o.hasOwnProperty(F)?(P!=null&&F==="onScroll"&&ze("scroll",r),m||b===P||(m=[])):(m=m||[]).push(F,P))}a&&(m=m||[]).push("style",a);var F=m;(s.updateQueue=F)&&(s.flags|=4)}},xm=function(r,s,a,h){a!==h&&(s.flags|=4)};function mo(r,s){if(!We)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function Dt(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,h=0;if(s)for(var f=r.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=h,r.childLanes=a,s}function mS(r,s,a){var h=s.pendingProps;switch(Qc(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(s),null;case 1:return Kt(s.type)&&Ra(),Dt(s),null;case 3:return h=s.stateNode,en(),He(Ut),He(Lt),ah(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(Ma(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Ci!==null&&(Ah(Ci),Ci=null))),Eh(r,s),Dt(s),null;case 5:nh(s);var f=ss(co.current);if(a=s.type,r!==null&&s.stateNode!=null)wm(r,s,a,h,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(i(166));return Dt(s),null}if(r=ss(Oi.current),Ma(s)){h=s.stateNode,a=s.type;var m=s.memoizedProps;switch(h[Ti]=s,h[so]=m,r=(s.mode&1)!==0,a){case"dialog":ze("cancel",h),ze("close",h);break;case"iframe":case"object":case"embed":ze("load",h);break;case"video":case"audio":for(f=0;f<to.length;f++)ze(to[f],h);break;case"source":ze("error",h);break;case"img":case"image":case"link":ze("error",h),ze("load",h);break;case"details":ze("toggle",h);break;case"input":tf(h,m),ze("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!m.multiple},ze("invalid",h);break;case"textarea":nf(h,m),ze("invalid",h)}oc(a,m),f=null;for(var y in m)if(m.hasOwnProperty(y)){var b=m[y];y==="children"?typeof b=="string"?h.textContent!==b&&(m.suppressHydrationWarning!==!0&&ba(h.textContent,b,r),f=["children",b]):typeof b=="number"&&h.textContent!==""+b&&(m.suppressHydrationWarning!==!0&&ba(h.textContent,b,r),f=["children",""+b]):o.hasOwnProperty(y)&&b!=null&&y==="onScroll"&&ze("scroll",h)}switch(a){case"input":bt(h),sf(h,m,!0);break;case"textarea":bt(h),af(h);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(h.onclick=ka)}h=f,s.updateQueue=h,h!==null&&(s.flags|=4)}else{y=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=lf(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=y.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=y.createElement(a,{is:h.is}):(r=y.createElement(a),a==="select"&&(y=r,h.multiple?y.multiple=!0:h.size&&(y.size=h.size))):r=y.createElementNS(r,a),r[Ti]=s,r[so]=h,Sm(r,s,!1,!1),s.stateNode=r;e:{switch(y=ac(a,h),a){case"dialog":ze("cancel",r),ze("close",r),f=h;break;case"iframe":case"object":case"embed":ze("load",r),f=h;break;case"video":case"audio":for(f=0;f<to.length;f++)ze(to[f],r);f=h;break;case"source":ze("error",r),f=h;break;case"img":case"image":case"link":ze("error",r),ze("load",r),f=h;break;case"details":ze("toggle",r),f=h;break;case"input":tf(r,h),f=Xr(r,h),ze("invalid",r);break;case"option":f=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},f=Z({},h,{value:void 0}),ze("invalid",r);break;case"textarea":nf(r,h),f=sc(r,h),ze("invalid",r);break;default:f=h}oc(a,f),b=f;for(m in b)if(b.hasOwnProperty(m)){var P=b[m];m==="style"?uf(r,P):m==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&cf(r,P)):m==="children"?typeof P=="string"?(a!=="textarea"||P!=="")&&In(r,P):typeof P=="number"&&In(r,""+P):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?P!=null&&m==="onScroll"&&ze("scroll",r):P!=null&&O(r,m,P,y))}switch(a){case"input":bt(r),sf(r,h,!1);break;case"textarea":bt(r),af(r);break;case"option":h.value!=null&&r.setAttribute("value",""+de(h.value));break;case"select":r.multiple=!!h.multiple,m=h.value,m!=null?Bs(r,!!h.multiple,m,!1):h.defaultValue!=null&&Bs(r,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=ka)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Dt(s),null;case 6:if(r&&s.stateNode!=null)xm(r,s,r.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(i(166));if(a=ss(co.current),ss(Oi.current),Ma(s)){if(h=s.stateNode,a=s.memoizedProps,h[Ti]=s,(m=h.nodeValue!==a)&&(r=ei,r!==null))switch(r.tag){case 3:ba(h.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&ba(h.nodeValue,a,(r.mode&1)!==0)}m&&(s.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[Ti]=s,s.stateNode=h}return Dt(s),null;case 13:if(He(qe),h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(We&&ti!==null&&(s.mode&1)!==0&&(s.flags&128)===0)kp(),Gs(),s.flags|=98560,m=!1;else if(m=Ma(s),h!==null&&h.dehydrated!==null){if(r===null){if(!m)throw Error(i(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[Ti]=s}else Gs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Dt(s),m=!1}else Ci!==null&&(Ah(Ci),Ci=null),m=!0;if(!m)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(qe.current&1)!==0?ht===0&&(ht=3):zh())),s.updateQueue!==null&&(s.flags|=4),Dt(s),null);case 4:return en(),Eh(r,s),r===null&&io(s.stateNode.containerInfo),Dt(s),null;case 10:return eh(s.type._context),Dt(s),null;case 17:return Kt(s.type)&&Ra(),Dt(s),null;case 19:if(He(qe),m=s.memoizedState,m===null)return Dt(s),null;if(h=(s.flags&128)!==0,y=m.rendering,y===null)if(h)mo(m,!1);else{if(ht!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(y=ja(r),y!==null){for(s.flags|=128,mo(m,!1),h=y.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=a,a=s.child;a!==null;)m=a,r=h,m.flags&=14680066,y=m.alternate,y===null?(m.childLanes=0,m.lanes=r,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=y.childLanes,m.lanes=y.lanes,m.child=y.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=y.memoizedProps,m.memoizedState=y.memoizedState,m.updateQueue=y.updateQueue,m.type=y.type,r=y.dependencies,m.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return Fe(qe,qe.current&1|2),s.child}r=r.sibling}m.tail!==null&&it()>nn&&(s.flags|=128,h=!0,mo(m,!1),s.lanes=4194304)}else{if(!h)if(r=ja(y),r!==null){if(s.flags|=128,h=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),mo(m,!0),m.tail===null&&m.tailMode==="hidden"&&!y.alternate&&!We)return Dt(s),null}else 2*it()-m.renderingStartTime>nn&&a!==1073741824&&(s.flags|=128,h=!0,mo(m,!1),s.lanes=4194304);m.isBackwards?(y.sibling=s.child,s.child=y):(a=m.last,a!==null?a.sibling=y:s.child=y,m.last=y)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=it(),s.sibling=null,a=qe.current,Fe(qe,h?a&1|2:a&1),s):(Dt(s),null);case 22:case 23:return Fh(),h=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(ii&1073741824)!==0&&(Dt(s),s.subtreeFlags&6&&(s.flags|=8192)):Dt(s),null;case 24:return null;case 25:return null}throw Error(i(156,s.tag))}function gS(r,s){switch(Qc(s),s.tag){case 1:return Kt(s.type)&&Ra(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return en(),He(Ut),He(Lt),ah(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return nh(s),null;case 13:if(He(qe),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Gs()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return He(qe),null;case 4:return en(),null;case 10:return eh(s.type._context),null;case 22:case 23:return Fh(),null;case 24:return null;default:return null}}var qa=!1,Mt=!1,_S=typeof WeakSet=="function"?WeakSet:Set,he=null;function rn(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){Xe(r,s,h)}else a.current=null}function Rh(r,s,a){try{a()}catch(h){Xe(r,s,h)}}var Cm=!1;function vS(r,s){if(Fc=fa,r=tp(),Dc(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var f=h.anchorOffset,m=h.focusNode;h=h.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var y=0,b=-1,P=-1,F=0,Q=0,X=r,q=null;t:for(;;){for(var ae;X!==a||f!==0&&X.nodeType!==3||(b=y+f),X!==m||h!==0&&X.nodeType!==3||(P=y+h),X.nodeType===3&&(y+=X.nodeValue.length),(ae=X.firstChild)!==null;)q=X,X=ae;for(;;){if(X===r)break t;if(q===a&&++F===f&&(b=y),q===m&&++Q===h&&(P=y),(ae=X.nextSibling)!==null)break;X=q,q=X.parentNode}X=ae}a=b===-1||P===-1?null:{start:b,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(zc={focusedElem:r,selectionRange:a},fa=!1,he=s;he!==null;)if(s=he,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,he=r;else for(;he!==null;){s=he;try{var fe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var me=fe.memoizedProps,rt=fe.memoizedState,B=s.stateNode,D=B.getSnapshotBeforeUpdate(s.elementType===s.type?me:bi(s.type,me),rt);B.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var I=s.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(J){Xe(s,s.return,J)}if(r=s.sibling,r!==null){r.return=s.return,he=r;break}he=s.return}return fe=Cm,Cm=!1,fe}function go(r,s,a){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&r)===r){var m=f.destroy;f.destroy=void 0,m!==void 0&&Rh(s,a,m)}f=f.next}while(f!==h)}}function Qa(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var h=a.create;a.destroy=h()}a=a.next}while(a!==s)}}function Ph(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function bm(r){var s=r.alternate;s!==null&&(r.alternate=null,bm(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[Ti],delete s[so],delete s[Uc],delete s[eS],delete s[tS])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function km(r){return r.tag===5||r.tag===3||r.tag===4}function Em(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||km(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Lh(r,s,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=ka));else if(h!==4&&(r=r.child,r!==null))for(Lh(r,s,a),r=r.sibling;r!==null;)Lh(r,s,a),r=r.sibling}function Nh(r,s,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(Nh(r,s,a),r=r.sibling;r!==null;)Nh(r,s,a),r=r.sibling}var kt=null,ki=!1;function Rr(r,s,a){for(a=a.child;a!==null;)Rm(r,s,a),a=a.sibling}function Rm(r,s,a){if(Mi&&typeof Mi.onCommitFiberUnmount=="function")try{Mi.onCommitFiberUnmount(aa,a)}catch{}switch(a.tag){case 5:Mt||rn(a,s);case 6:var h=kt,f=ki;kt=null,Rr(r,s,a),kt=h,ki=f,kt!==null&&(ki?(r=kt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):kt.removeChild(a.stateNode));break;case 18:kt!==null&&(ki?(r=kt,a=a.stateNode,r.nodeType===8?Wc(r.parentNode,a):r.nodeType===1&&Wc(r,a),qn(r)):Wc(kt,a.stateNode));break;case 4:h=kt,f=ki,kt=a.stateNode.containerInfo,ki=!0,Rr(r,s,a),kt=h,ki=f;break;case 0:case 11:case 14:case 15:if(!Mt&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var m=f,y=m.destroy;m=m.tag,y!==void 0&&((m&2)!==0||(m&4)!==0)&&Rh(a,s,y),f=f.next}while(f!==h)}Rr(r,s,a);break;case 1:if(!Mt&&(rn(a,s),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(b){Xe(a,s,b)}Rr(r,s,a);break;case 21:Rr(r,s,a);break;case 22:a.mode&1?(Mt=(h=Mt)||a.memoizedState!==null,Rr(r,s,a),Mt=h):Rr(r,s,a);break;default:Rr(r,s,a)}}function Pm(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new _S),s.forEach(function(h){var f=RS.bind(null,r,h);a.has(h)||(a.add(h),h.then(f,f))})}}function Ei(r,s){var a=s.deletions;if(a!==null)for(var h=0;h<a.length;h++){var f=a[h];try{var m=r,y=s,b=y;e:for(;b!==null;){switch(b.tag){case 5:kt=b.stateNode,ki=!1;break e;case 3:kt=b.stateNode.containerInfo,ki=!0;break e;case 4:kt=b.stateNode.containerInfo,ki=!0;break e}b=b.return}if(kt===null)throw Error(i(160));Rm(m,y,f),kt=null,ki=!1;var P=f.alternate;P!==null&&(P.return=null),f.return=null}catch(F){Xe(f,s,F)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Lm(s,r),s=s.sibling}function Lm(r,s){var a=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Ei(s,r),Ii(r),h&4){try{go(3,r,r.return),Qa(3,r)}catch(me){Xe(r,r.return,me)}try{go(5,r,r.return)}catch(me){Xe(r,r.return,me)}}break;case 1:Ei(s,r),Ii(r),h&512&&a!==null&&rn(a,a.return);break;case 5:if(Ei(s,r),Ii(r),h&512&&a!==null&&rn(a,a.return),r.flags&32){var f=r.stateNode;try{In(f,"")}catch(me){Xe(r,r.return,me)}}if(h&4&&(f=r.stateNode,f!=null)){var m=r.memoizedProps,y=a!==null?a.memoizedProps:m,b=r.type,P=r.updateQueue;if(r.updateQueue=null,P!==null)try{b==="input"&&m.type==="radio"&&m.name!=null&&rf(f,m),ac(b,y);var F=ac(b,m);for(y=0;y<P.length;y+=2){var Q=P[y],X=P[y+1];Q==="style"?uf(f,X):Q==="dangerouslySetInnerHTML"?cf(f,X):Q==="children"?In(f,X):O(f,Q,X,F)}switch(b){case"input":ic(f,m);break;case"textarea":of(f,m);break;case"select":var q=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!m.multiple;var ae=m.value;ae!=null?Bs(f,!!m.multiple,ae,!1):q!==!!m.multiple&&(m.defaultValue!=null?Bs(f,!!m.multiple,m.defaultValue,!0):Bs(f,!!m.multiple,m.multiple?[]:"",!1))}f[so]=m}catch(me){Xe(r,r.return,me)}}break;case 6:if(Ei(s,r),Ii(r),h&4){if(r.stateNode===null)throw Error(i(162));f=r.stateNode,m=r.memoizedProps;try{f.nodeValue=m}catch(me){Xe(r,r.return,me)}}break;case 3:if(Ei(s,r),Ii(r),h&4&&a!==null&&a.memoizedState.isDehydrated)try{qn(s.containerInfo)}catch(me){Xe(r,r.return,me)}break;case 4:Ei(s,r),Ii(r);break;case 13:Ei(s,r),Ii(r),f=r.child,f.flags&8192&&(m=f.memoizedState!==null,f.stateNode.isHidden=m,!m||f.alternate!==null&&f.alternate.memoizedState!==null||(Th=it())),h&4&&Pm(r);break;case 22:if(Q=a!==null&&a.memoizedState!==null,r.mode&1?(Mt=(F=Mt)||Q,Ei(s,r),Mt=F):Ei(s,r),Ii(r),h&8192){if(F=r.memoizedState!==null,(r.stateNode.isHidden=F)&&!Q&&(r.mode&1)!==0)for(he=r,Q=r.child;Q!==null;){for(X=he=Q;he!==null;){switch(q=he,ae=q.child,q.tag){case 0:case 11:case 14:case 15:go(4,q,q.return);break;case 1:rn(q,q.return);var fe=q.stateNode;if(typeof fe.componentWillUnmount=="function"){h=q,a=q.return;try{s=h,fe.props=s.memoizedProps,fe.state=s.memoizedState,fe.componentWillUnmount()}catch(me){Xe(h,a,me)}}break;case 5:rn(q,q.return);break;case 22:if(q.memoizedState!==null){Mm(X);continue}}ae!==null?(ae.return=q,he=ae):Mm(X)}Q=Q.sibling}e:for(Q=null,X=r;;){if(X.tag===5){if(Q===null){Q=X;try{f=X.stateNode,F?(m=f.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(b=X.stateNode,P=X.memoizedProps.style,y=P!=null&&P.hasOwnProperty("display")?P.display:null,b.style.display=hf("display",y))}catch(me){Xe(r,r.return,me)}}}else if(X.tag===6){if(Q===null)try{X.stateNode.nodeValue=F?"":X.memoizedProps}catch(me){Xe(r,r.return,me)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===r)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===r)break e;for(;X.sibling===null;){if(X.return===null||X.return===r)break e;Q===X&&(Q=null),X=X.return}Q===X&&(Q=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:Ei(s,r),Ii(r),h&4&&Pm(r);break;case 21:break;default:Ei(s,r),Ii(r)}}function Ii(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(km(a)){var h=a;break e}a=a.return}throw Error(i(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(In(f,""),h.flags&=-33);var m=Em(r);Nh(r,m,f);break;case 3:case 4:var y=h.stateNode.containerInfo,b=Em(r);Lh(r,b,y);break;default:throw Error(i(161))}}catch(P){Xe(r,r.return,P)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function yS(r,s,a){he=r,Nm(r)}function Nm(r,s,a){for(var h=(r.mode&1)!==0;he!==null;){var f=he,m=f.child;if(f.tag===22&&h){var y=f.memoizedState!==null||qa;if(!y){var b=f.alternate,P=b!==null&&b.memoizedState!==null||Mt;b=qa;var F=Mt;if(qa=y,(Mt=P)&&!F)for(he=f;he!==null;)y=he,P=y.child,y.tag===22&&y.memoizedState!==null?Tm(f):P!==null?(P.return=y,he=P):Tm(f);for(;m!==null;)he=m,Nm(m),m=m.sibling;he=f,qa=b,Mt=F}Dm(r)}else(f.subtreeFlags&8772)!==0&&m!==null?(m.return=f,he=m):Dm(r)}}function Dm(r){for(;he!==null;){var s=he;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Mt||Qa(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Mt)if(a===null)h.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:bi(s.type,a.memoizedProps);h.componentDidUpdate(f,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var m=s.updateQueue;m!==null&&Mp(s,m,h);break;case 3:var y=s.updateQueue;if(y!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Mp(s,y,a)}break;case 5:var b=s.stateNode;if(a===null&&s.flags&4){a=b;var P=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&a.focus();break;case"img":P.src&&(a.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var F=s.alternate;if(F!==null){var Q=F.memoizedState;if(Q!==null){var X=Q.dehydrated;X!==null&&qn(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Mt||s.flags&512&&Ph(s)}catch(q){Xe(s,s.return,q)}}if(s===r){he=null;break}if(a=s.sibling,a!==null){a.return=s.return,he=a;break}he=s.return}}function Mm(r){for(;he!==null;){var s=he;if(s===r){he=null;break}var a=s.sibling;if(a!==null){a.return=s.return,he=a;break}he=s.return}}function Tm(r){for(;he!==null;){var s=he;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Qa(4,s)}catch(P){Xe(s,a,P)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var f=s.return;try{h.componentDidMount()}catch(P){Xe(s,f,P)}}var m=s.return;try{Ph(s)}catch(P){Xe(s,m,P)}break;case 5:var y=s.return;try{Ph(s)}catch(P){Xe(s,y,P)}}}catch(P){Xe(s,s.return,P)}if(s===r){he=null;break}var b=s.sibling;if(b!==null){b.return=s.return,he=b;break}he=s.return}}var SS=Math.ceil,Ya=T.ReactCurrentDispatcher,Dh=T.ReactCurrentOwner,ui=T.ReactCurrentBatchConfig,Oe=0,gt=null,ot=null,Et=0,ii=0,sn=xr(0),ht=0,_o=null,os=0,Ga=0,Mh=0,vo=null,qt=null,Th=0,nn=1/0,er=null,Xa=!1,Oh=null,Pr=null,Ja=!1,Lr=null,Za=0,yo=0,Bh=null,el=-1,tl=0;function It(){return(Oe&6)!==0?it():el!==-1?el:el=it()}function Nr(r){return(r.mode&1)===0?1:(Oe&2)!==0&&Et!==0?Et&-Et:rS.transition!==null?(tl===0&&(tl=Ef()),tl):(r=Ae,r!==0||(r=window.event,r=r===void 0?16:Bf(r.type)),r)}function Ri(r,s,a,h){if(50<yo)throw yo=0,Bh=null,Error(i(185));$n(r,a,h),((Oe&2)===0||r!==gt)&&(r===gt&&((Oe&2)===0&&(Ga|=a),ht===4&&Dr(r,Et)),Qt(r,h),a===1&&Oe===0&&(s.mode&1)===0&&(nn=it()+500,La&&br()))}function Qt(r,s){var a=r.callbackNode;ry(r,s);var h=ha(r,r===gt?Et:0);if(h===0)a!==null&&Cf(a),r.callbackNode=null,r.callbackPriority=0;else if(s=h&-h,r.callbackPriority!==s){if(a!=null&&Cf(a),s===1)r.tag===0?iS(Bm.bind(null,r)):Sp(Bm.bind(null,r)),Jy(function(){(Oe&6)===0&&br()}),a=null;else{switch(Rf(h)){case 1:a=pc;break;case 4:a=bf;break;case 16:a=oa;break;case 536870912:a=kf;break;default:a=oa}a=Wm(a,Om.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function Om(r,s){if(el=-1,tl=0,(Oe&6)!==0)throw Error(i(327));var a=r.callbackNode;if(on()&&r.callbackNode!==a)return null;var h=ha(r,r===gt?Et:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||s)s=il(r,h);else{s=h;var f=Oe;Oe|=2;var m=Am();(gt!==r||Et!==s)&&(er=null,nn=it()+500,ls(r,s));do try{CS();break}catch(b){Im(r,b)}while(!0);Zc(),Ya.current=m,Oe=f,ot!==null?s=0:(gt=null,Et=0,s=ht)}if(s!==0){if(s===2&&(f=mc(r),f!==0&&(h=f,s=Ih(r,f))),s===1)throw a=_o,ls(r,0),Dr(r,h),Qt(r,it()),a;if(s===6)Dr(r,h);else{if(f=r.current.alternate,(h&30)===0&&!wS(f)&&(s=il(r,h),s===2&&(m=mc(r),m!==0&&(h=m,s=Ih(r,m))),s===1))throw a=_o,ls(r,0),Dr(r,h),Qt(r,it()),a;switch(r.finishedWork=f,r.finishedLanes=h,s){case 0:case 1:throw Error(i(345));case 2:cs(r,qt,er);break;case 3:if(Dr(r,h),(h&130023424)===h&&(s=Th+500-it(),10<s)){if(ha(r,0)!==0)break;if(f=r.suspendedLanes,(f&h)!==h){It(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=$c(cs.bind(null,r,qt,er),s);break}cs(r,qt,er);break;case 4:if(Dr(r,h),(h&4194240)===h)break;for(s=r.eventTimes,f=-1;0<h;){var y=31-wi(h);m=1<<y,y=s[y],y>f&&(f=y),h&=~m}if(h=f,h=it()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*SS(h/1960))-h,10<h){r.timeoutHandle=$c(cs.bind(null,r,qt,er),h);break}cs(r,qt,er);break;case 5:cs(r,qt,er);break;default:throw Error(i(329))}}}return Qt(r,it()),r.callbackNode===a?Om.bind(null,r):null}function Ih(r,s){var a=vo;return r.current.memoizedState.isDehydrated&&(ls(r,s).flags|=256),r=il(r,s),r!==2&&(s=qt,qt=a,s!==null&&Ah(s)),r}function Ah(r){qt===null?qt=r:qt.push.apply(qt,r)}function wS(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var f=a[h],m=f.getSnapshot;f=f.value;try{if(!xi(m(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Dr(r,s){for(s&=~Mh,s&=~Ga,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-wi(s),h=1<<a;r[a]=-1,s&=~h}}function Bm(r){if((Oe&6)!==0)throw Error(i(327));on();var s=ha(r,0);if((s&1)===0)return Qt(r,it()),null;var a=il(r,s);if(r.tag!==0&&a===2){var h=mc(r);h!==0&&(s=h,a=Ih(r,h))}if(a===1)throw a=_o,ls(r,0),Dr(r,s),Qt(r,it()),a;if(a===6)throw Error(i(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,cs(r,qt,er),Qt(r,it()),null}function jh(r,s){var a=Oe;Oe|=1;try{return r(s)}finally{Oe=a,Oe===0&&(nn=it()+500,La&&br())}}function as(r){Lr!==null&&Lr.tag===0&&(Oe&6)===0&&on();var s=Oe;Oe|=1;var a=ui.transition,h=Ae;try{if(ui.transition=null,Ae=1,r)return r()}finally{Ae=h,ui.transition=a,Oe=s,(Oe&6)===0&&br()}}function Fh(){ii=sn.current,He(sn)}function ls(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,Xy(a)),ot!==null)for(a=ot.return;a!==null;){var h=a;switch(Qc(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Ra();break;case 3:en(),He(Ut),He(Lt),ah();break;case 5:nh(h);break;case 4:en();break;case 13:He(qe);break;case 19:He(qe);break;case 10:eh(h.type._context);break;case 22:case 23:Fh()}a=a.return}if(gt=r,ot=r=Mr(r.current,null),Et=ii=s,ht=0,_o=null,Mh=Ga=os=0,qt=vo=null,rs!==null){for(s=0;s<rs.length;s++)if(a=rs[s],h=a.interleaved,h!==null){a.interleaved=null;var f=h.next,m=a.pending;if(m!==null){var y=m.next;m.next=f,h.next=y}a.pending=h}rs=null}return r}function Im(r,s){do{var a=ot;try{if(Zc(),Fa.current=Wa,za){for(var h=Qe.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}za=!1}if(ns=0,mt=ct=Qe=null,ho=!1,uo=0,Dh.current=null,a===null||a.return===null){ht=1,_o=s,ot=null;break}e:{var m=r,y=a.return,b=a,P=s;if(s=Et,b.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var F=P,Q=b,X=Q.tag;if((Q.mode&1)===0&&(X===0||X===11||X===15)){var q=Q.alternate;q?(Q.updateQueue=q.updateQueue,Q.memoizedState=q.memoizedState,Q.lanes=q.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var ae=am(y);if(ae!==null){ae.flags&=-257,lm(ae,y,b,m,s),ae.mode&1&&om(m,F,s),s=ae,P=F;var fe=s.updateQueue;if(fe===null){var me=new Set;me.add(P),s.updateQueue=me}else fe.add(P);break e}else{if((s&1)===0){om(m,F,s),zh();break e}P=Error(i(426))}}else if(We&&b.mode&1){var rt=am(y);if(rt!==null){(rt.flags&65536)===0&&(rt.flags|=256),lm(rt,y,b,m,s),Xc(tn(P,b));break e}}m=P=tn(P,b),ht!==4&&(ht=2),vo===null?vo=[m]:vo.push(m),m=y;do{switch(m.tag){case 3:m.flags|=65536,s&=-s,m.lanes|=s;var B=sm(m,P,s);Dp(m,B);break e;case 1:b=P;var D=m.type,I=m.stateNode;if((m.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Pr===null||!Pr.has(I)))){m.flags|=65536,s&=-s,m.lanes|=s;var J=nm(m,b,s);Dp(m,J);break e}}m=m.return}while(m!==null)}Fm(a)}catch(ve){s=ve,ot===a&&a!==null&&(ot=a=a.return);continue}break}while(!0)}function Am(){var r=Ya.current;return Ya.current=Wa,r===null?Wa:r}function zh(){(ht===0||ht===3||ht===2)&&(ht=4),gt===null||(os&268435455)===0&&(Ga&268435455)===0||Dr(gt,Et)}function il(r,s){var a=Oe;Oe|=2;var h=Am();(gt!==r||Et!==s)&&(er=null,ls(r,s));do try{xS();break}catch(f){Im(r,f)}while(!0);if(Zc(),Oe=a,Ya.current=h,ot!==null)throw Error(i(261));return gt=null,Et=0,ht}function xS(){for(;ot!==null;)jm(ot)}function CS(){for(;ot!==null&&!Q0();)jm(ot)}function jm(r){var s=$m(r.alternate,r,ii);r.memoizedProps=r.pendingProps,s===null?Fm(r):ot=s,Dh.current=null}function Fm(r){var s=r;do{var a=s.alternate;if(r=s.return,(s.flags&32768)===0){if(a=mS(a,s,ii),a!==null){ot=a;return}}else{if(a=gS(a,s),a!==null){a.flags&=32767,ot=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{ht=6,ot=null;return}}if(s=s.sibling,s!==null){ot=s;return}ot=s=r}while(s!==null);ht===0&&(ht=5)}function cs(r,s,a){var h=Ae,f=ui.transition;try{ui.transition=null,Ae=1,bS(r,s,a,h)}finally{ui.transition=f,Ae=h}return null}function bS(r,s,a,h){do on();while(Lr!==null);if((Oe&6)!==0)throw Error(i(327));a=r.finishedWork;var f=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(i(177));r.callbackNode=null,r.callbackPriority=0;var m=a.lanes|a.childLanes;if(sy(r,m),r===gt&&(ot=gt=null,Et=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Ja||(Ja=!0,Wm(oa,function(){return on(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=ui.transition,ui.transition=null;var y=Ae;Ae=1;var b=Oe;Oe|=4,Dh.current=null,vS(r,a),Lm(a,r),Uy(zc),fa=!!Fc,zc=Fc=null,r.current=a,yS(a),Y0(),Oe=b,Ae=y,ui.transition=m}else r.current=a;if(Ja&&(Ja=!1,Lr=r,Za=f),m=r.pendingLanes,m===0&&(Pr=null),J0(a.stateNode),Qt(r,it()),s!==null)for(h=r.onRecoverableError,a=0;a<s.length;a++)f=s[a],h(f.value,{componentStack:f.stack,digest:f.digest});if(Xa)throw Xa=!1,r=Oh,Oh=null,r;return(Za&1)!==0&&r.tag!==0&&on(),m=r.pendingLanes,(m&1)!==0?r===Bh?yo++:(yo=0,Bh=r):yo=0,br(),null}function on(){if(Lr!==null){var r=Rf(Za),s=ui.transition,a=Ae;try{if(ui.transition=null,Ae=16>r?16:r,Lr===null)var h=!1;else{if(r=Lr,Lr=null,Za=0,(Oe&6)!==0)throw Error(i(331));var f=Oe;for(Oe|=4,he=r.current;he!==null;){var m=he,y=m.child;if((he.flags&16)!==0){var b=m.deletions;if(b!==null){for(var P=0;P<b.length;P++){var F=b[P];for(he=F;he!==null;){var Q=he;switch(Q.tag){case 0:case 11:case 15:go(8,Q,m)}var X=Q.child;if(X!==null)X.return=Q,he=X;else for(;he!==null;){Q=he;var q=Q.sibling,ae=Q.return;if(bm(Q),Q===F){he=null;break}if(q!==null){q.return=ae,he=q;break}he=ae}}}var fe=m.alternate;if(fe!==null){var me=fe.child;if(me!==null){fe.child=null;do{var rt=me.sibling;me.sibling=null,me=rt}while(me!==null)}}he=m}}if((m.subtreeFlags&2064)!==0&&y!==null)y.return=m,he=y;else e:for(;he!==null;){if(m=he,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:go(9,m,m.return)}var B=m.sibling;if(B!==null){B.return=m.return,he=B;break e}he=m.return}}var D=r.current;for(he=D;he!==null;){y=he;var I=y.child;if((y.subtreeFlags&2064)!==0&&I!==null)I.return=y,he=I;else e:for(y=D;he!==null;){if(b=he,(b.flags&2048)!==0)try{switch(b.tag){case 0:case 11:case 15:Qa(9,b)}}catch(ve){Xe(b,b.return,ve)}if(b===y){he=null;break e}var J=b.sibling;if(J!==null){J.return=b.return,he=J;break e}he=b.return}}if(Oe=f,br(),Mi&&typeof Mi.onPostCommitFiberRoot=="function")try{Mi.onPostCommitFiberRoot(aa,r)}catch{}h=!0}return h}finally{Ae=a,ui.transition=s}}return!1}function zm(r,s,a){s=tn(a,s),s=sm(r,s,1),r=Er(r,s,1),s=It(),r!==null&&($n(r,1,s),Qt(r,s))}function Xe(r,s,a){if(r.tag===3)zm(r,r,a);else for(;s!==null;){if(s.tag===3){zm(s,r,a);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Pr===null||!Pr.has(h))){r=tn(a,r),r=nm(s,r,1),s=Er(s,r,1),r=It(),s!==null&&($n(s,1,r),Qt(s,r));break}}s=s.return}}function kS(r,s,a){var h=r.pingCache;h!==null&&h.delete(s),s=It(),r.pingedLanes|=r.suspendedLanes&a,gt===r&&(Et&a)===a&&(ht===4||ht===3&&(Et&130023424)===Et&&500>it()-Th?ls(r,0):Mh|=a),Qt(r,s)}function Hm(r,s){s===0&&((r.mode&1)===0?s=1:(s=ca,ca<<=1,(ca&130023424)===0&&(ca=4194304)));var a=It();r=Xi(r,s),r!==null&&($n(r,s,a),Qt(r,a))}function ES(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),Hm(r,a)}function RS(r,s){var a=0;switch(r.tag){case 13:var h=r.stateNode,f=r.memoizedState;f!==null&&(a=f.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(i(314))}h!==null&&h.delete(s),Hm(r,a)}var $m;$m=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||Ut.current)Vt=!0;else{if((r.lanes&a)===0&&(s.flags&128)===0)return Vt=!1,pS(r,s,a);Vt=(r.flags&131072)!==0}else Vt=!1,We&&(s.flags&1048576)!==0&&wp(s,Da,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Va(r,s),r=s.pendingProps;var f=qs(s,Lt.current);Zs(s,a),f=hh(null,s,h,r,f,a);var m=uh();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Kt(h)?(m=!0,Pa(s)):m=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,rh(s),f.updater=Ua,s.stateNode=f,f._reactInternals=s,_h(s,h,r,a),s=wh(null,s,h,!0,m,a)):(s.tag=0,We&&m&&qc(s),Bt(null,s,f,a),s=s.child),s;case 16:h=s.elementType;e:{switch(Va(r,s),r=s.pendingProps,f=h._init,h=f(h._payload),s.type=h,f=s.tag=LS(h),r=bi(h,r),f){case 0:s=Sh(null,s,h,r,a);break e;case 1:s=pm(null,s,h,r,a);break e;case 11:s=cm(null,s,h,r,a);break e;case 14:s=hm(null,s,h,bi(h.type,r),a);break e}throw Error(i(306,h,""))}return s;case 0:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:bi(h,f),Sh(r,s,h,f,a);case 1:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:bi(h,f),pm(r,s,h,f,a);case 3:e:{if(mm(s),r===null)throw Error(i(387));h=s.pendingProps,m=s.memoizedState,f=m.element,Np(r,s),Aa(s,h,null,a);var y=s.memoizedState;if(h=y.element,m.isDehydrated)if(m={element:h,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){f=tn(Error(i(423)),s),s=gm(r,s,h,a,f);break e}else if(h!==f){f=tn(Error(i(424)),s),s=gm(r,s,h,a,f);break e}else for(ti=wr(s.stateNode.containerInfo.firstChild),ei=s,We=!0,Ci=null,a=Pp(s,null,h,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Gs(),h===f){s=Zi(r,s,a);break e}Bt(r,s,h,a)}s=s.child}return s;case 5:return Tp(s),r===null&&Gc(s),h=s.type,f=s.pendingProps,m=r!==null?r.memoizedProps:null,y=f.children,Hc(h,f)?y=null:m!==null&&Hc(h,m)&&(s.flags|=32),fm(r,s),Bt(r,s,y,a),s.child;case 6:return r===null&&Gc(s),null;case 13:return _m(r,s,a);case 4:return sh(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=Xs(s,null,h,a):Bt(r,s,h,a),s.child;case 11:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:bi(h,f),cm(r,s,h,f,a);case 7:return Bt(r,s,s.pendingProps,a),s.child;case 8:return Bt(r,s,s.pendingProps.children,a),s.child;case 12:return Bt(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(h=s.type._context,f=s.pendingProps,m=s.memoizedProps,y=f.value,Fe(Oa,h._currentValue),h._currentValue=y,m!==null)if(xi(m.value,y)){if(m.children===f.children&&!Ut.current){s=Zi(r,s,a);break e}}else for(m=s.child,m!==null&&(m.return=s);m!==null;){var b=m.dependencies;if(b!==null){y=m.child;for(var P=b.firstContext;P!==null;){if(P.context===h){if(m.tag===1){P=Ji(-1,a&-a),P.tag=2;var F=m.updateQueue;if(F!==null){F=F.shared;var Q=F.pending;Q===null?P.next=P:(P.next=Q.next,Q.next=P),F.pending=P}}m.lanes|=a,P=m.alternate,P!==null&&(P.lanes|=a),th(m.return,a,s),b.lanes|=a;break}P=P.next}}else if(m.tag===10)y=m.type===s.type?null:m.child;else if(m.tag===18){if(y=m.return,y===null)throw Error(i(341));y.lanes|=a,b=y.alternate,b!==null&&(b.lanes|=a),th(y,a,s),y=m.sibling}else y=m.child;if(y!==null)y.return=m;else for(y=m;y!==null;){if(y===s){y=null;break}if(m=y.sibling,m!==null){m.return=y.return,y=m;break}y=y.return}m=y}Bt(r,s,f.children,a),s=s.child}return s;case 9:return f=s.type,h=s.pendingProps.children,Zs(s,a),f=ci(f),h=h(f),s.flags|=1,Bt(r,s,h,a),s.child;case 14:return h=s.type,f=bi(h,s.pendingProps),f=bi(h.type,f),hm(r,s,h,f,a);case 15:return um(r,s,s.type,s.pendingProps,a);case 17:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:bi(h,f),Va(r,s),s.tag=1,Kt(h)?(r=!0,Pa(s)):r=!1,Zs(s,a),im(s,h,f),_h(s,h,f,a),wh(null,s,h,!0,r,a);case 19:return ym(r,s,a);case 22:return dm(r,s,a)}throw Error(i(156,s.tag))};function Wm(r,s){return xf(r,s)}function PS(r,s,a,h){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function di(r,s,a,h){return new PS(r,s,a,h)}function Hh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function LS(r){if(typeof r=="function")return Hh(r)?1:0;if(r!=null){if(r=r.$$typeof,r===z)return 11;if(r===V)return 14}return 2}function Mr(r,s){var a=r.alternate;return a===null?(a=di(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function rl(r,s,a,h,f,m){var y=2;if(h=r,typeof r=="function")Hh(r)&&(y=1);else if(typeof r=="string")y=5;else e:switch(r){case le:return hs(a.children,f,m,s);case ue:y=8,f|=8;break;case ye:return r=di(12,a,s,f|2),r.elementType=ye,r.lanes=m,r;case j:return r=di(13,a,s,f),r.elementType=j,r.lanes=m,r;case U:return r=di(19,a,s,f),r.elementType=U,r.lanes=m,r;case te:return sl(a,f,m,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case ie:y=10;break e;case se:y=9;break e;case z:y=11;break e;case V:y=14;break e;case K:y=16,h=null;break e}throw Error(i(130,r==null?r:typeof r,""))}return s=di(y,a,s,f),s.elementType=r,s.type=h,s.lanes=m,s}function hs(r,s,a,h){return r=di(7,r,h,s),r.lanes=a,r}function sl(r,s,a,h){return r=di(22,r,h,s),r.elementType=te,r.lanes=a,r.stateNode={isHidden:!1},r}function $h(r,s,a){return r=di(6,r,null,s),r.lanes=a,r}function Wh(r,s,a){return s=di(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function NS(r,s,a,h,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gc(0),this.expirationTimes=gc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gc(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Uh(r,s,a,h,f,m,y,b,P){return r=new NS(r,s,a,b,P),s===1?(s=1,m===!0&&(s|=8)):s=0,m=di(3,null,null,s),r.current=m,m.stateNode=r,m.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},rh(m),r}function DS(r,s,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G,key:h==null?null:""+h,children:r,containerInfo:s,implementation:a}}function Um(r){if(!r)return Cr;r=r._reactInternals;e:{if(Jr(r)!==r||r.tag!==1)throw Error(i(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Kt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(i(171))}if(r.tag===1){var a=r.type;if(Kt(a))return vp(r,a,s)}return s}function Km(r,s,a,h,f,m,y,b,P){return r=Uh(a,h,!0,r,f,m,y,b,P),r.context=Um(null),a=r.current,h=It(),f=Nr(a),m=Ji(h,f),m.callback=s??null,Er(a,m,f),r.current.lanes=f,$n(r,f,h),Qt(r,h),r}function nl(r,s,a,h){var f=s.current,m=It(),y=Nr(f);return a=Um(a),s.context===null?s.context=a:s.pendingContext=a,s=Ji(m,y),s.payload={element:r},h=h===void 0?null:h,h!==null&&(s.callback=h),r=Er(f,s,y),r!==null&&(Ri(r,f,y,m),Ia(r,f,y)),y}function ol(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Vm(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function Kh(r,s){Vm(r,s),(r=r.alternate)&&Vm(r,s)}function MS(){return null}var qm=typeof reportError=="function"?reportError:function(r){console.error(r)};function Vh(r){this._internalRoot=r}al.prototype.render=Vh.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));nl(r,s,null,null)},al.prototype.unmount=Vh.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;as(function(){nl(null,r,null,null)}),s[qi]=null}};function al(r){this._internalRoot=r}al.prototype.unstable_scheduleHydration=function(r){if(r){var s=Nf();r={blockedOn:null,target:r,priority:s};for(var a=0;a<vr.length&&s!==0&&s<vr[a].priority;a++);vr.splice(a,0,r),a===0&&Tf(r)}};function qh(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function ll(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Qm(){}function TS(r,s,a,h,f){if(f){if(typeof h=="function"){var m=h;h=function(){var F=ol(y);m.call(F)}}var y=Km(s,h,r,0,null,!1,!1,"",Qm);return r._reactRootContainer=y,r[qi]=y.current,io(r.nodeType===8?r.parentNode:r),as(),y}for(;f=r.lastChild;)r.removeChild(f);if(typeof h=="function"){var b=h;h=function(){var F=ol(P);b.call(F)}}var P=Uh(r,0,!1,null,null,!1,!1,"",Qm);return r._reactRootContainer=P,r[qi]=P.current,io(r.nodeType===8?r.parentNode:r),as(function(){nl(s,P,a,h)}),P}function cl(r,s,a,h,f){var m=a._reactRootContainer;if(m){var y=m;if(typeof f=="function"){var b=f;f=function(){var P=ol(y);b.call(P)}}nl(s,y,r,f)}else y=TS(a,s,r,f,h);return ol(y)}Pf=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=Hn(s.pendingLanes);a!==0&&(_c(s,a|1),Qt(s,it()),(Oe&6)===0&&(nn=it()+500,br()))}break;case 13:as(function(){var h=Xi(r,1);if(h!==null){var f=It();Ri(h,r,1,f)}}),Kh(r,1)}},vc=function(r){if(r.tag===13){var s=Xi(r,134217728);if(s!==null){var a=It();Ri(s,r,134217728,a)}Kh(r,134217728)}},Lf=function(r){if(r.tag===13){var s=Nr(r),a=Xi(r,s);if(a!==null){var h=It();Ri(a,r,s,h)}Kh(r,s)}},Nf=function(){return Ae},Df=function(r,s){var a=Ae;try{return Ae=r,s()}finally{Ae=a}},hc=function(r,s,a){switch(s){case"input":if(ic(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var h=a[s];if(h!==r&&h.form===r.form){var f=Ea(h);if(!f)throw Error(i(90));Ot(h),ic(h,f)}}}break;case"textarea":of(r,a);break;case"select":s=a.value,s!=null&&Bs(r,!!a.multiple,s,!1)}},mf=jh,gf=as;var OS={usingClientEntryPoint:!1,Events:[no,Ks,Ea,ff,pf,jh]},So={findFiberByHostInstance:Zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},BS={bundleType:So.bundleType,version:So.version,rendererPackageName:So.rendererPackageName,rendererConfig:So.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Sf(r),r===null?null:r.stateNode},findFiberByHostInstance:So.findFiberByHostInstance||MS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hl.isDisabled&&hl.supportsFiber)try{aa=hl.inject(BS),Mi=hl}catch{}}return Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OS,Yt.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qh(s))throw Error(i(200));return DS(r,s,null,a)},Yt.createRoot=function(r,s){if(!qh(r))throw Error(i(299));var a=!1,h="",f=qm;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Uh(r,1,!1,null,null,a,!1,h,f),r[qi]=s.current,io(r.nodeType===8?r.parentNode:r),new Vh(s)},Yt.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=Sf(s),r=r===null?null:r.stateNode,r},Yt.flushSync=function(r){return as(r)},Yt.hydrate=function(r,s,a){if(!ll(s))throw Error(i(200));return cl(null,r,s,!0,a)},Yt.hydrateRoot=function(r,s,a){if(!qh(r))throw Error(i(405));var h=a!=null&&a.hydratedSources||null,f=!1,m="",y=qm;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),s=Km(s,null,r,1,a??null,f,!1,m,y),r[qi]=s.current,io(r),h)for(r=0;r<h.length;r++)a=h[r],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new al(s)},Yt.render=function(r,s,a){if(!ll(s))throw Error(i(200));return cl(null,r,s,!1,a)},Yt.unmountComponentAtNode=function(r){if(!ll(r))throw Error(i(40));return r._reactRootContainer?(as(function(){cl(null,null,r,!1,function(){r._reactRootContainer=null,r[qi]=null})}),!0):!1},Yt.unstable_batchedUpdates=jh,Yt.unstable_renderSubtreeIntoContainer=function(r,s,a,h){if(!ll(a))throw Error(i(200));if(r==null||r._reactInternals===void 0)throw Error(i(38));return cl(r,s,a,!1,h)},Yt.version="18.3.1-next-f1338f8080-20240426",Yt}var rg;function US(){if(rg)return Xh.exports;rg=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Xh.exports=WS(),Xh.exports}var sg;function KS(){if(sg)return dl;sg=1;var e=US();return dl.createRoot=e.createRoot,dl.hydrateRoot=e.hydrateRoot,dl}var VS=KS();const qS=iv(VS);var Ln=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},QS={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Fr,Rd,$_,YS=($_=class{constructor(){Se(this,Fr,QS);Se(this,Rd,!1)}setTimeoutProvider(e){ne(this,Fr,e)}setTimeout(e,t){return R(this,Fr).setTimeout(e,t)}clearTimeout(e){R(this,Fr).clearTimeout(e)}setInterval(e,t){return R(this,Fr).setInterval(e,t)}clearInterval(e){R(this,Fr).clearInterval(e)}},Fr=new WeakMap,Rd=new WeakMap,$_),ps=new YS;function GS(e){setTimeout(e,0)}var Es=typeof window>"u"||"Deno"in globalThis;function zt(){}function XS(e,t){return typeof e=="function"?e(t):e}function bu(e){return typeof e=="number"&&e>=0&&e!==1/0}function rv(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Yr(e,t){return typeof e=="function"?e(t):e}function gi(e,t){return typeof e=="function"?e(t):e}function ng(e,t){const{type:i="all",exact:n,fetchStatus:o,predicate:l,queryKey:c,stale:u}=e;if(c){if(n){if(t.queryHash!==Pd(c,t.options))return!1}else if(!Fo(t.queryKey,c))return!1}if(i!=="all"){const p=t.isActive();if(i==="active"&&!p||i==="inactive"&&p)return!1}return!(typeof u=="boolean"&&t.isStale()!==u||o&&o!==t.state.fetchStatus||l&&!l(t))}function og(e,t){const{exact:i,status:n,predicate:o,mutationKey:l}=e;if(l){if(!t.options.mutationKey)return!1;if(i){if(Rs(t.options.mutationKey)!==Rs(l))return!1}else if(!Fo(t.options.mutationKey,l))return!1}return!(n&&t.state.status!==n||o&&!o(t))}function Pd(e,t){return((t==null?void 0:t.queryKeyHashFn)||Rs)(e)}function Rs(e){return JSON.stringify(e,(t,i)=>ku(i)?Object.keys(i).sort().reduce((n,o)=>(n[o]=i[o],n),{}):i)}function Fo(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(i=>Fo(e[i],t[i])):!1}var JS=Object.prototype.hasOwnProperty;function sv(e,t){if(e===t)return e;const i=ag(e)&&ag(t);if(!i&&!(ku(e)&&ku(t)))return t;const o=(i?e:Object.keys(e)).length,l=i?t:Object.keys(t),c=l.length,u=i?new Array(c):{};let p=0;for(let d=0;d<c;d++){const _=i?d:l[d],g=e[_],S=t[_];if(g===S){u[_]=g,(i?d<o:JS.call(e,_))&&p++;continue}if(g===null||S===null||typeof g!="object"||typeof S!="object"){u[_]=S;continue}const w=sv(g,S);u[_]=w,w===g&&p++}return o===c&&p===o?e:u}function Tl(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(e[i]!==t[i])return!1;return!0}function ag(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function ku(e){if(!lg(e))return!1;const t=e.constructor;if(t===void 0)return!0;const i=t.prototype;return!(!lg(i)||!i.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function lg(e){return Object.prototype.toString.call(e)==="[object Object]"}function ZS(e){return new Promise(t=>{ps.setTimeout(t,e)})}function Eu(e,t,i){return typeof i.structuralSharing=="function"?i.structuralSharing(e,t):i.structuralSharing!==!1?sv(e,t):t}function ew(e,t,i=0){const n=[...e,t];return i&&n.length>i?n.slice(1):n}function tw(e,t,i=0){const n=[t,...e];return i&&n.length>i?n.slice(0,-1):n}var Ld=Symbol();function nv(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Ld?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Nd(e,t){return typeof e=="function"?e(...t):!!e}function iw(e,t,i){let n=!1,o;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(o??(o=t()),n||(n=!0,o.aborted?i():o.addEventListener("abort",i,{once:!0})),o)}),e}var gs,zr,mn,W_,rw=(W_=class extends Ln{constructor(){super();Se(this,gs);Se(this,zr);Se(this,mn);ne(this,mn,t=>{if(!Es&&window.addEventListener){const i=()=>t();return window.addEventListener("visibilitychange",i,!1),()=>{window.removeEventListener("visibilitychange",i)}}})}onSubscribe(){R(this,zr)||this.setEventListener(R(this,mn))}onUnsubscribe(){var t;this.hasListeners()||((t=R(this,zr))==null||t.call(this),ne(this,zr,void 0))}setEventListener(t){var i;ne(this,mn,t),(i=R(this,zr))==null||i.call(this),ne(this,zr,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){R(this,gs)!==t&&(ne(this,gs,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(i=>{i(t)})}isFocused(){var t;return typeof R(this,gs)=="boolean"?R(this,gs):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},gs=new WeakMap,zr=new WeakMap,mn=new WeakMap,W_),Dd=new rw;function Ru(){let e,t;const i=new Promise((o,l)=>{e=o,t=l});i.status="pending",i.catch(()=>{});function n(o){Object.assign(i,o),delete i.resolve,delete i.reject}return i.resolve=o=>{n({status:"fulfilled",value:o}),e(o)},i.reject=o=>{n({status:"rejected",reason:o}),t(o)},i}var sw=GS;function nw(){let e=[],t=0,i=u=>{u()},n=u=>{u()},o=sw;const l=u=>{t?e.push(u):o(()=>{i(u)})},c=()=>{const u=e;e=[],u.length&&o(()=>{n(()=>{u.forEach(p=>{i(p)})})})};return{batch:u=>{let p;t++;try{p=u()}finally{t--,t||c()}return p},batchCalls:u=>(...p)=>{l(()=>{u(...p)})},schedule:l,setNotifyFunction:u=>{i=u},setBatchNotifyFunction:u=>{n=u},setScheduler:u=>{o=u}}}var ft=nw(),gn,Hr,_n,U_,ow=(U_=class extends Ln{constructor(){super();Se(this,gn,!0);Se(this,Hr);Se(this,_n);ne(this,_n,t=>{if(!Es&&window.addEventListener){const i=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",i,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",n)}}})}onSubscribe(){R(this,Hr)||this.setEventListener(R(this,_n))}onUnsubscribe(){var t;this.hasListeners()||((t=R(this,Hr))==null||t.call(this),ne(this,Hr,void 0))}setEventListener(t){var i;ne(this,_n,t),(i=R(this,Hr))==null||i.call(this),ne(this,Hr,t(this.setOnline.bind(this)))}setOnline(t){R(this,gn)!==t&&(ne(this,gn,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return R(this,gn)}},gn=new WeakMap,Hr=new WeakMap,_n=new WeakMap,U_),Ol=new ow;function aw(e){return Math.min(1e3*2**e,3e4)}function ov(e){return(e??"online")==="online"?Ol.isOnline():!0}var Pu=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function av(e){let t=!1,i=0,n;const o=Ru(),l=()=>o.status!=="pending",c=C=>{var k;if(!l()){const L=new Pu(C);S(L),(k=e.onCancel)==null||k.call(e,L)}},u=()=>{t=!0},p=()=>{t=!1},d=()=>Dd.isFocused()&&(e.networkMode==="always"||Ol.isOnline())&&e.canRun(),_=()=>ov(e.networkMode)&&e.canRun(),g=C=>{l()||(n==null||n(),o.resolve(C))},S=C=>{l()||(n==null||n(),o.reject(C))},w=()=>new Promise(C=>{var k;n=L=>{(l()||d())&&C(L)},(k=e.onPause)==null||k.call(e)}).then(()=>{var C;n=void 0,l()||(C=e.onContinue)==null||C.call(e)}),x=()=>{if(l())return;let C;const k=i===0?e.initialPromise:void 0;try{C=k??e.fn()}catch(L){C=Promise.reject(L)}Promise.resolve(C).then(g).catch(L=>{var G;if(l())return;const W=e.retry??(Es?0:3),O=e.retryDelay??aw,T=typeof O=="function"?O(i,L):O,$=W===!0||typeof W=="number"&&i<W||typeof W=="function"&&W(i,L);if(t||!$){S(L);return}i++,(G=e.onFail)==null||G.call(e,i,L),ZS(T).then(()=>d()?void 0:w()).then(()=>{t?S(L):x()})})};return{promise:o,status:()=>o.status,cancel:c,continue:()=>(n==null||n(),o),cancelRetry:u,continueRetry:p,canStart:_,start:()=>(_()?x():w().then(x),o)}}var _s,K_,lv=(K_=class{constructor(){Se(this,_s)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),bu(this.gcTime)&&ne(this,_s,ps.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Es?1/0:300*1e3))}clearGcTimeout(){R(this,_s)&&(ps.clearTimeout(R(this,_s)),ne(this,_s,void 0))}},_s=new WeakMap,K_),vs,vn,mi,ys,vt,Vo,Ss,Li,ir,V_,lw=(V_=class extends lv{constructor(t){super();Se(this,Li);Se(this,vs);Se(this,vn);Se(this,mi);Se(this,ys);Se(this,vt);Se(this,Vo);Se(this,Ss);ne(this,Ss,!1),ne(this,Vo,t.defaultOptions),this.setOptions(t.options),this.observers=[],ne(this,ys,t.client),ne(this,mi,R(this,ys).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ne(this,vs,hg(this.options)),this.state=t.state??R(this,vs),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=R(this,vt))==null?void 0:t.promise}setOptions(t){if(this.options={...R(this,Vo),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const i=hg(this.options);i.data!==void 0&&(this.setState(cg(i.data,i.dataUpdatedAt)),ne(this,vs,i))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&R(this,mi).remove(this)}setData(t,i){const n=Eu(this.state.data,t,this.options);return Re(this,Li,ir).call(this,{data:n,type:"success",dataUpdatedAt:i==null?void 0:i.updatedAt,manual:i==null?void 0:i.manual}),n}setState(t,i){Re(this,Li,ir).call(this,{type:"setState",state:t,setStateOptions:i})}cancel(t){var n,o;const i=(n=R(this,vt))==null?void 0:n.promise;return(o=R(this,vt))==null||o.cancel(t),i?i.then(zt).catch(zt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(R(this,vs))}isActive(){return this.observers.some(t=>gi(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ld||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Yr(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!rv(this.state.dataUpdatedAt,t)}onFocus(){var i;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(i=R(this,vt))==null||i.continue()}onOnline(){var i;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(i=R(this,vt))==null||i.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),R(this,mi).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(i=>i!==t),this.observers.length||(R(this,vt)&&(R(this,Ss)?R(this,vt).cancel({revert:!0}):R(this,vt).cancelRetry()),this.scheduleGc()),R(this,mi).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Re(this,Li,ir).call(this,{type:"invalidate"})}async fetch(t,i){var p,d,_,g,S,w,x,C,k,L,W,O;if(this.state.fetchStatus!=="idle"&&((p=R(this,vt))==null?void 0:p.status())!=="rejected"){if(this.state.data!==void 0&&(i!=null&&i.cancelRefetch))this.cancel({silent:!0});else if(R(this,vt))return R(this,vt).continueRetry(),R(this,vt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const T=this.observers.find($=>$.options.queryFn);T&&this.setOptions(T.options)}const n=new AbortController,o=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(ne(this,Ss,!0),n.signal)})},l=()=>{const T=nv(this.options,i),G=(()=>{const le={client:R(this,ys),queryKey:this.queryKey,meta:this.meta};return o(le),le})();return ne(this,Ss,!1),this.options.persister?this.options.persister(T,G,this):T(G)},u=(()=>{const T={fetchOptions:i,options:this.options,queryKey:this.queryKey,client:R(this,ys),state:this.state,fetchFn:l};return o(T),T})();(d=this.options.behavior)==null||d.onFetch(u,this),ne(this,vn,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((_=u.fetchOptions)==null?void 0:_.meta))&&Re(this,Li,ir).call(this,{type:"fetch",meta:(g=u.fetchOptions)==null?void 0:g.meta}),ne(this,vt,av({initialPromise:i==null?void 0:i.initialPromise,fn:u.fetchFn,onCancel:T=>{T instanceof Pu&&T.revert&&this.setState({...R(this,vn),fetchStatus:"idle"}),n.abort()},onFail:(T,$)=>{Re(this,Li,ir).call(this,{type:"failed",failureCount:T,error:$})},onPause:()=>{Re(this,Li,ir).call(this,{type:"pause"})},onContinue:()=>{Re(this,Li,ir).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0}));try{const T=await R(this,vt).start();if(T===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(T),(w=(S=R(this,mi).config).onSuccess)==null||w.call(S,T,this),(C=(x=R(this,mi).config).onSettled)==null||C.call(x,T,this.state.error,this),T}catch(T){if(T instanceof Pu){if(T.silent)return R(this,vt).promise;if(T.revert){if(this.state.data===void 0)throw T;return this.state.data}}throw Re(this,Li,ir).call(this,{type:"error",error:T}),(L=(k=R(this,mi).config).onError)==null||L.call(k,T,this),(O=(W=R(this,mi).config).onSettled)==null||O.call(W,this.state.data,T,this),T}finally{this.scheduleGc()}}},vs=new WeakMap,vn=new WeakMap,mi=new WeakMap,ys=new WeakMap,vt=new WeakMap,Vo=new WeakMap,Ss=new WeakMap,Li=new WeakSet,ir=function(t){const i=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...cv(n.data,this.options),fetchMeta:t.meta??null};case"success":const o={...n,...cg(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ne(this,vn,t.manual?o:void 0),o;case"error":const l=t.error;return{...n,error:l,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=i(this.state),ft.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),R(this,mi).notify({query:this,type:"updated",action:t})})},V_);function cv(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ov(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function cg(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function hg(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,i=t!==void 0,n=i?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:i?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:i?"success":"pending",fetchStatus:"idle"}}var Xt,Me,qo,jt,ws,yn,sr,$r,Qo,Sn,wn,xs,Cs,Wr,xn,Ie,No,Lu,Nu,Du,Mu,Tu,Ou,Bu,hv,q_,cw=(q_=class extends Ln{constructor(t,i){super();Se(this,Ie);Se(this,Xt);Se(this,Me);Se(this,qo);Se(this,jt);Se(this,ws);Se(this,yn);Se(this,sr);Se(this,$r);Se(this,Qo);Se(this,Sn);Se(this,wn);Se(this,xs);Se(this,Cs);Se(this,Wr);Se(this,xn,new Set);this.options=i,ne(this,Xt,t),ne(this,$r,null),ne(this,sr,Ru()),this.bindMethods(),this.setOptions(i)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(R(this,Me).addObserver(this),ug(R(this,Me),this.options)?Re(this,Ie,No).call(this):this.updateResult(),Re(this,Ie,Mu).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Iu(R(this,Me),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Iu(R(this,Me),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Re(this,Ie,Tu).call(this),Re(this,Ie,Ou).call(this),R(this,Me).removeObserver(this)}setOptions(t){const i=this.options,n=R(this,Me);if(this.options=R(this,Xt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof gi(this.options.enabled,R(this,Me))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Re(this,Ie,Bu).call(this),R(this,Me).setOptions(this.options),i._defaulted&&!Tl(this.options,i)&&R(this,Xt).getQueryCache().notify({type:"observerOptionsUpdated",query:R(this,Me),observer:this});const o=this.hasListeners();o&&dg(R(this,Me),n,this.options,i)&&Re(this,Ie,No).call(this),this.updateResult(),o&&(R(this,Me)!==n||gi(this.options.enabled,R(this,Me))!==gi(i.enabled,R(this,Me))||Yr(this.options.staleTime,R(this,Me))!==Yr(i.staleTime,R(this,Me)))&&Re(this,Ie,Lu).call(this);const l=Re(this,Ie,Nu).call(this);o&&(R(this,Me)!==n||gi(this.options.enabled,R(this,Me))!==gi(i.enabled,R(this,Me))||l!==R(this,Wr))&&Re(this,Ie,Du).call(this,l)}getOptimisticResult(t){const i=R(this,Xt).getQueryCache().build(R(this,Xt),t),n=this.createResult(i,t);return uw(this,n)&&(ne(this,jt,n),ne(this,yn,this.options),ne(this,ws,R(this,Me).state)),n}getCurrentResult(){return R(this,jt)}trackResult(t,i){return new Proxy(t,{get:(n,o)=>(this.trackProp(o),i==null||i(o),o==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&R(this,sr).status==="pending"&&R(this,sr).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,o))})}trackProp(t){R(this,xn).add(t)}getCurrentQuery(){return R(this,Me)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const i=R(this,Xt).defaultQueryOptions(t),n=R(this,Xt).getQueryCache().build(R(this,Xt),i);return n.fetch().then(()=>this.createResult(n,i))}fetch(t){return Re(this,Ie,No).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),R(this,jt)))}createResult(t,i){var ye;const n=R(this,Me),o=this.options,l=R(this,jt),c=R(this,ws),u=R(this,yn),d=t!==n?t.state:R(this,qo),{state:_}=t;let g={..._},S=!1,w;if(i._optimisticResults){const ie=this.hasListeners(),se=!ie&&ug(t,i),z=ie&&dg(t,n,i,o);(se||z)&&(g={...g,...cv(_.data,t.options)}),i._optimisticResults==="isRestoring"&&(g.fetchStatus="idle")}let{error:x,errorUpdatedAt:C,status:k}=g;w=g.data;let L=!1;if(i.placeholderData!==void 0&&w===void 0&&k==="pending"){let ie;l!=null&&l.isPlaceholderData&&i.placeholderData===(u==null?void 0:u.placeholderData)?(ie=l.data,L=!0):ie=typeof i.placeholderData=="function"?i.placeholderData((ye=R(this,wn))==null?void 0:ye.state.data,R(this,wn)):i.placeholderData,ie!==void 0&&(k="success",w=Eu(l==null?void 0:l.data,ie,i),S=!0)}if(i.select&&w!==void 0&&!L)if(l&&w===(c==null?void 0:c.data)&&i.select===R(this,Qo))w=R(this,Sn);else try{ne(this,Qo,i.select),w=i.select(w),w=Eu(l==null?void 0:l.data,w,i),ne(this,Sn,w),ne(this,$r,null)}catch(ie){ne(this,$r,ie)}R(this,$r)&&(x=R(this,$r),w=R(this,Sn),C=Date.now(),k="error");const W=g.fetchStatus==="fetching",O=k==="pending",T=k==="error",$=O&&W,G=w!==void 0,ue={status:k,fetchStatus:g.fetchStatus,isPending:O,isSuccess:k==="success",isError:T,isInitialLoading:$,isLoading:$,data:w,dataUpdatedAt:g.dataUpdatedAt,error:x,errorUpdatedAt:C,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>d.dataUpdateCount||g.errorUpdateCount>d.errorUpdateCount,isFetching:W,isRefetching:W&&!O,isLoadingError:T&&!G,isPaused:g.fetchStatus==="paused",isPlaceholderData:S,isRefetchError:T&&G,isStale:Md(t,i),refetch:this.refetch,promise:R(this,sr),isEnabled:gi(i.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const ie=j=>{ue.status==="error"?j.reject(ue.error):ue.data!==void 0&&j.resolve(ue.data)},se=()=>{const j=ne(this,sr,ue.promise=Ru());ie(j)},z=R(this,sr);switch(z.status){case"pending":t.queryHash===n.queryHash&&ie(z);break;case"fulfilled":(ue.status==="error"||ue.data!==z.value)&&se();break;case"rejected":(ue.status!=="error"||ue.error!==z.reason)&&se();break}}return ue}updateResult(){const t=R(this,jt),i=this.createResult(R(this,Me),this.options);if(ne(this,ws,R(this,Me).state),ne(this,yn,this.options),R(this,ws).data!==void 0&&ne(this,wn,R(this,Me)),Tl(i,t))return;ne(this,jt,i);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!R(this,xn).size)return!0;const c=new Set(l??R(this,xn));return this.options.throwOnError&&c.add("error"),Object.keys(R(this,jt)).some(u=>{const p=u;return R(this,jt)[p]!==t[p]&&c.has(p)})};Re(this,Ie,hv).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Re(this,Ie,Mu).call(this)}},Xt=new WeakMap,Me=new WeakMap,qo=new WeakMap,jt=new WeakMap,ws=new WeakMap,yn=new WeakMap,sr=new WeakMap,$r=new WeakMap,Qo=new WeakMap,Sn=new WeakMap,wn=new WeakMap,xs=new WeakMap,Cs=new WeakMap,Wr=new WeakMap,xn=new WeakMap,Ie=new WeakSet,No=function(t){Re(this,Ie,Bu).call(this);let i=R(this,Me).fetch(this.options,t);return t!=null&&t.throwOnError||(i=i.catch(zt)),i},Lu=function(){Re(this,Ie,Tu).call(this);const t=Yr(this.options.staleTime,R(this,Me));if(Es||R(this,jt).isStale||!bu(t))return;const n=rv(R(this,jt).dataUpdatedAt,t)+1;ne(this,xs,ps.setTimeout(()=>{R(this,jt).isStale||this.updateResult()},n))},Nu=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(R(this,Me)):this.options.refetchInterval)??!1},Du=function(t){Re(this,Ie,Ou).call(this),ne(this,Wr,t),!(Es||gi(this.options.enabled,R(this,Me))===!1||!bu(R(this,Wr))||R(this,Wr)===0)&&ne(this,Cs,ps.setInterval(()=>{(this.options.refetchIntervalInBackground||Dd.isFocused())&&Re(this,Ie,No).call(this)},R(this,Wr)))},Mu=function(){Re(this,Ie,Lu).call(this),Re(this,Ie,Du).call(this,Re(this,Ie,Nu).call(this))},Tu=function(){R(this,xs)&&(ps.clearTimeout(R(this,xs)),ne(this,xs,void 0))},Ou=function(){R(this,Cs)&&(ps.clearInterval(R(this,Cs)),ne(this,Cs,void 0))},Bu=function(){const t=R(this,Xt).getQueryCache().build(R(this,Xt),this.options);if(t===R(this,Me))return;const i=R(this,Me);ne(this,Me,t),ne(this,qo,t.state),this.hasListeners()&&(i==null||i.removeObserver(this),t.addObserver(this))},hv=function(t){ft.batch(()=>{t.listeners&&this.listeners.forEach(i=>{i(R(this,jt))}),R(this,Xt).getQueryCache().notify({query:R(this,Me),type:"observerResultsUpdated"})})},q_);function hw(e,t){return gi(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function ug(e,t){return hw(e,t)||e.state.data!==void 0&&Iu(e,t,t.refetchOnMount)}function Iu(e,t,i){if(gi(t.enabled,e)!==!1&&Yr(t.staleTime,e)!=="static"){const n=typeof i=="function"?i(e):i;return n==="always"||n!==!1&&Md(e,t)}return!1}function dg(e,t,i,n){return(e!==t||gi(n.enabled,e)===!1)&&(!i.suspense||e.state.status!=="error")&&Md(e,i)}function Md(e,t){return gi(t.enabled,e)!==!1&&e.isStaleByTime(Yr(t.staleTime,e))}function uw(e,t){return!Tl(e.getCurrentResult(),t)}function fg(e){return{onFetch:(t,i)=>{var _,g,S,w,x;const n=t.options,o=(S=(g=(_=t.fetchOptions)==null?void 0:_.meta)==null?void 0:g.fetchMore)==null?void 0:S.direction,l=((w=t.state.data)==null?void 0:w.pages)||[],c=((x=t.state.data)==null?void 0:x.pageParams)||[];let u={pages:[],pageParams:[]},p=0;const d=async()=>{let C=!1;const k=O=>{iw(O,()=>t.signal,()=>C=!0)},L=nv(t.options,t.fetchOptions),W=async(O,T,$)=>{if(C)return Promise.reject();if(T==null&&O.pages.length)return Promise.resolve(O);const le=(()=>{const se={client:t.client,queryKey:t.queryKey,pageParam:T,direction:$?"backward":"forward",meta:t.options.meta};return k(se),se})(),ue=await L(le),{maxPages:ye}=t.options,ie=$?tw:ew;return{pages:ie(O.pages,ue,ye),pageParams:ie(O.pageParams,T,ye)}};if(o&&l.length){const O=o==="backward",T=O?dw:pg,$={pages:l,pageParams:c},G=T(n,$);u=await W($,G,O)}else{const O=e??l.length;do{const T=p===0?c[0]??n.initialPageParam:pg(n,u);if(p>0&&T==null)break;u=await W(u,T),p++}while(p<O)}return u};t.options.persister?t.fetchFn=()=>{var C,k;return(k=(C=t.options).persister)==null?void 0:k.call(C,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},i)}:t.fetchFn=d}}}function pg(e,{pages:t,pageParams:i}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,i[n],i):void 0}function dw(e,{pages:t,pageParams:i}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,i[0],i):void 0}var Yo,zi,Ft,bs,Hi,Ar,Q_,fw=(Q_=class extends lv{constructor(t){super();Se(this,Hi);Se(this,Yo);Se(this,zi);Se(this,Ft);Se(this,bs);ne(this,Yo,t.client),this.mutationId=t.mutationId,ne(this,Ft,t.mutationCache),ne(this,zi,[]),this.state=t.state||uv(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){R(this,zi).includes(t)||(R(this,zi).push(t),this.clearGcTimeout(),R(this,Ft).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ne(this,zi,R(this,zi).filter(i=>i!==t)),this.scheduleGc(),R(this,Ft).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){R(this,zi).length||(this.state.status==="pending"?this.scheduleGc():R(this,Ft).remove(this))}continue(){var t;return((t=R(this,bs))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var c,u,p,d,_,g,S,w,x,C,k,L,W,O,T,$,G,le,ue,ye;const i=()=>{Re(this,Hi,Ar).call(this,{type:"continue"})},n={client:R(this,Yo),meta:this.options.meta,mutationKey:this.options.mutationKey};ne(this,bs,av({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(ie,se)=>{Re(this,Hi,Ar).call(this,{type:"failed",failureCount:ie,error:se})},onPause:()=>{Re(this,Hi,Ar).call(this,{type:"pause"})},onContinue:i,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>R(this,Ft).canRun(this)}));const o=this.state.status==="pending",l=!R(this,bs).canStart();try{if(o)i();else{Re(this,Hi,Ar).call(this,{type:"pending",variables:t,isPaused:l}),await((u=(c=R(this,Ft).config).onMutate)==null?void 0:u.call(c,t,this,n));const se=await((d=(p=this.options).onMutate)==null?void 0:d.call(p,t,n));se!==this.state.context&&Re(this,Hi,Ar).call(this,{type:"pending",context:se,variables:t,isPaused:l})}const ie=await R(this,bs).start();return await((g=(_=R(this,Ft).config).onSuccess)==null?void 0:g.call(_,ie,t,this.state.context,this,n)),await((w=(S=this.options).onSuccess)==null?void 0:w.call(S,ie,t,this.state.context,n)),await((C=(x=R(this,Ft).config).onSettled)==null?void 0:C.call(x,ie,null,this.state.variables,this.state.context,this,n)),await((L=(k=this.options).onSettled)==null?void 0:L.call(k,ie,null,t,this.state.context,n)),Re(this,Hi,Ar).call(this,{type:"success",data:ie}),ie}catch(ie){try{await((O=(W=R(this,Ft).config).onError)==null?void 0:O.call(W,ie,t,this.state.context,this,n))}catch(se){Promise.reject(se)}try{await(($=(T=this.options).onError)==null?void 0:$.call(T,ie,t,this.state.context,n))}catch(se){Promise.reject(se)}try{await((le=(G=R(this,Ft).config).onSettled)==null?void 0:le.call(G,void 0,ie,this.state.variables,this.state.context,this,n))}catch(se){Promise.reject(se)}try{await((ye=(ue=this.options).onSettled)==null?void 0:ye.call(ue,void 0,ie,t,this.state.context,n))}catch(se){Promise.reject(se)}throw Re(this,Hi,Ar).call(this,{type:"error",error:ie}),ie}finally{R(this,Ft).runNext(this)}}},Yo=new WeakMap,zi=new WeakMap,Ft=new WeakMap,bs=new WeakMap,Hi=new WeakSet,Ar=function(t){const i=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=i(this.state),ft.batch(()=>{R(this,zi).forEach(n=>{n.onMutationUpdate(t)}),R(this,Ft).notify({mutation:this,type:"updated",action:t})})},Q_);function uv(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var nr,Ni,Go,Y_,pw=(Y_=class extends Ln{constructor(t={}){super();Se(this,nr);Se(this,Ni);Se(this,Go);this.config=t,ne(this,nr,new Set),ne(this,Ni,new Map),ne(this,Go,0)}build(t,i,n){const o=new fw({client:t,mutationCache:this,mutationId:++ul(this,Go)._,options:t.defaultMutationOptions(i),state:n});return this.add(o),o}add(t){R(this,nr).add(t);const i=fl(t);if(typeof i=="string"){const n=R(this,Ni).get(i);n?n.push(t):R(this,Ni).set(i,[t])}this.notify({type:"added",mutation:t})}remove(t){if(R(this,nr).delete(t)){const i=fl(t);if(typeof i=="string"){const n=R(this,Ni).get(i);if(n)if(n.length>1){const o=n.indexOf(t);o!==-1&&n.splice(o,1)}else n[0]===t&&R(this,Ni).delete(i)}}this.notify({type:"removed",mutation:t})}canRun(t){const i=fl(t);if(typeof i=="string"){const n=R(this,Ni).get(i),o=n==null?void 0:n.find(l=>l.state.status==="pending");return!o||o===t}else return!0}runNext(t){var n;const i=fl(t);if(typeof i=="string"){const o=(n=R(this,Ni).get(i))==null?void 0:n.find(l=>l!==t&&l.state.isPaused);return(o==null?void 0:o.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ft.batch(()=>{R(this,nr).forEach(t=>{this.notify({type:"removed",mutation:t})}),R(this,nr).clear(),R(this,Ni).clear()})}getAll(){return Array.from(R(this,nr))}find(t){const i={exact:!0,...t};return this.getAll().find(n=>og(i,n))}findAll(t={}){return this.getAll().filter(i=>og(t,i))}notify(t){ft.batch(()=>{this.listeners.forEach(i=>{i(t)})})}resumePausedMutations(){const t=this.getAll().filter(i=>i.state.isPaused);return ft.batch(()=>Promise.all(t.map(i=>i.continue().catch(zt))))}},nr=new WeakMap,Ni=new WeakMap,Go=new WeakMap,Y_);function fl(e){var t;return(t=e.options.scope)==null?void 0:t.id}var or,Ur,Jt,ar,hr,xl,Au,G_,mw=(G_=class extends Ln{constructor(i,n){super();Se(this,hr);Se(this,or);Se(this,Ur);Se(this,Jt);Se(this,ar);ne(this,or,i),this.setOptions(n),this.bindMethods(),Re(this,hr,xl).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(i){var o;const n=this.options;this.options=R(this,or).defaultMutationOptions(i),Tl(this.options,n)||R(this,or).getMutationCache().notify({type:"observerOptionsUpdated",mutation:R(this,Jt),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Rs(n.mutationKey)!==Rs(this.options.mutationKey)?this.reset():((o=R(this,Jt))==null?void 0:o.state.status)==="pending"&&R(this,Jt).setOptions(this.options)}onUnsubscribe(){var i;this.hasListeners()||(i=R(this,Jt))==null||i.removeObserver(this)}onMutationUpdate(i){Re(this,hr,xl).call(this),Re(this,hr,Au).call(this,i)}getCurrentResult(){return R(this,Ur)}reset(){var i;(i=R(this,Jt))==null||i.removeObserver(this),ne(this,Jt,void 0),Re(this,hr,xl).call(this),Re(this,hr,Au).call(this)}mutate(i,n){var o;return ne(this,ar,n),(o=R(this,Jt))==null||o.removeObserver(this),ne(this,Jt,R(this,or).getMutationCache().build(R(this,or),this.options)),R(this,Jt).addObserver(this),R(this,Jt).execute(i)}},or=new WeakMap,Ur=new WeakMap,Jt=new WeakMap,ar=new WeakMap,hr=new WeakSet,xl=function(){var n;const i=((n=R(this,Jt))==null?void 0:n.state)??uv();ne(this,Ur,{...i,isPending:i.status==="pending",isSuccess:i.status==="success",isError:i.status==="error",isIdle:i.status==="idle",mutate:this.mutate,reset:this.reset})},Au=function(i){ft.batch(()=>{var n,o,l,c,u,p,d,_;if(R(this,ar)&&this.hasListeners()){const g=R(this,Ur).variables,S=R(this,Ur).context,w={client:R(this,or),meta:this.options.meta,mutationKey:this.options.mutationKey};if((i==null?void 0:i.type)==="success"){try{(o=(n=R(this,ar)).onSuccess)==null||o.call(n,i.data,g,S,w)}catch(x){Promise.reject(x)}try{(c=(l=R(this,ar)).onSettled)==null||c.call(l,i.data,null,g,S,w)}catch(x){Promise.reject(x)}}else if((i==null?void 0:i.type)==="error"){try{(p=(u=R(this,ar)).onError)==null||p.call(u,i.error,g,S,w)}catch(x){Promise.reject(x)}try{(_=(d=R(this,ar)).onSettled)==null||_.call(d,void 0,i.error,g,S,w)}catch(x){Promise.reject(x)}}}this.listeners.forEach(g=>{g(R(this,Ur))})})},G_),$i,X_,gw=(X_=class extends Ln{constructor(t={}){super();Se(this,$i);this.config=t,ne(this,$i,new Map)}build(t,i,n){const o=i.queryKey,l=i.queryHash??Pd(o,i);let c=this.get(l);return c||(c=new lw({client:t,queryKey:o,queryHash:l,options:t.defaultQueryOptions(i),state:n,defaultOptions:t.getQueryDefaults(o)}),this.add(c)),c}add(t){R(this,$i).has(t.queryHash)||(R(this,$i).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const i=R(this,$i).get(t.queryHash);i&&(t.destroy(),i===t&&R(this,$i).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ft.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return R(this,$i).get(t)}getAll(){return[...R(this,$i).values()]}find(t){const i={exact:!0,...t};return this.getAll().find(n=>ng(i,n))}findAll(t={}){const i=this.getAll();return Object.keys(t).length>0?i.filter(n=>ng(t,n)):i}notify(t){ft.batch(()=>{this.listeners.forEach(i=>{i(t)})})}onFocus(){ft.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ft.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},$i=new WeakMap,X_),Je,Kr,Vr,Cn,bn,qr,kn,En,J_,_w=(J_=class{constructor(e={}){Se(this,Je);Se(this,Kr);Se(this,Vr);Se(this,Cn);Se(this,bn);Se(this,qr);Se(this,kn);Se(this,En);ne(this,Je,e.queryCache||new gw),ne(this,Kr,e.mutationCache||new pw),ne(this,Vr,e.defaultOptions||{}),ne(this,Cn,new Map),ne(this,bn,new Map),ne(this,qr,0)}mount(){ul(this,qr)._++,R(this,qr)===1&&(ne(this,kn,Dd.subscribe(async e=>{e&&(await this.resumePausedMutations(),R(this,Je).onFocus())})),ne(this,En,Ol.subscribe(async e=>{e&&(await this.resumePausedMutations(),R(this,Je).onOnline())})))}unmount(){var e,t;ul(this,qr)._--,R(this,qr)===0&&((e=R(this,kn))==null||e.call(this),ne(this,kn,void 0),(t=R(this,En))==null||t.call(this),ne(this,En,void 0))}isFetching(e){return R(this,Je).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return R(this,Kr).findAll({...e,status:"pending"}).length}getQueryData(e){var i;const t=this.defaultQueryOptions({queryKey:e});return(i=R(this,Je).get(t.queryHash))==null?void 0:i.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),i=R(this,Je).build(this,t),n=i.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&i.isStaleByTime(Yr(t.staleTime,i))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return R(this,Je).findAll(e).map(({queryKey:t,state:i})=>{const n=i.data;return[t,n]})}setQueryData(e,t,i){const n=this.defaultQueryOptions({queryKey:e}),o=R(this,Je).get(n.queryHash),l=o==null?void 0:o.state.data,c=XS(t,l);if(c!==void 0)return R(this,Je).build(this,n).setData(c,{...i,manual:!0})}setQueriesData(e,t,i){return ft.batch(()=>R(this,Je).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,i)]))}getQueryState(e){var i;const t=this.defaultQueryOptions({queryKey:e});return(i=R(this,Je).get(t.queryHash))==null?void 0:i.state}removeQueries(e){const t=R(this,Je);ft.batch(()=>{t.findAll(e).forEach(i=>{t.remove(i)})})}resetQueries(e,t){const i=R(this,Je);return ft.batch(()=>(i.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const i={revert:!0,...t},n=ft.batch(()=>R(this,Je).findAll(e).map(o=>o.cancel(i)));return Promise.all(n).then(zt).catch(zt)}invalidateQueries(e,t={}){return ft.batch(()=>(R(this,Je).findAll(e).forEach(i=>{i.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const i={...t,cancelRefetch:t.cancelRefetch??!0},n=ft.batch(()=>R(this,Je).findAll(e).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let l=o.fetch(void 0,i);return i.throwOnError||(l=l.catch(zt)),o.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(n).then(zt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const i=R(this,Je).build(this,t);return i.isStaleByTime(Yr(t.staleTime,i))?i.fetch(t):Promise.resolve(i.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(zt).catch(zt)}fetchInfiniteQuery(e){return e.behavior=fg(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(zt).catch(zt)}ensureInfiniteQueryData(e){return e.behavior=fg(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ol.isOnline()?R(this,Kr).resumePausedMutations():Promise.resolve()}getQueryCache(){return R(this,Je)}getMutationCache(){return R(this,Kr)}getDefaultOptions(){return R(this,Vr)}setDefaultOptions(e){ne(this,Vr,e)}setQueryDefaults(e,t){R(this,Cn).set(Rs(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...R(this,Cn).values()],i={};return t.forEach(n=>{Fo(e,n.queryKey)&&Object.assign(i,n.defaultOptions)}),i}setMutationDefaults(e,t){R(this,bn).set(Rs(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...R(this,bn).values()],i={};return t.forEach(n=>{Fo(e,n.mutationKey)&&Object.assign(i,n.defaultOptions)}),i}defaultQueryOptions(e){if(e._defaulted)return e;const t={...R(this,Vr).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Pd(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Ld&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...R(this,Vr).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){R(this,Je).clear(),R(this,Kr).clear()}},Je=new WeakMap,Kr=new WeakMap,Vr=new WeakMap,Cn=new WeakMap,bn=new WeakMap,qr=new WeakMap,kn=new WeakMap,En=new WeakMap,J_),dv=N.createContext(void 0),Ms=e=>{const t=N.useContext(dv);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},vw=({client:e,children:t})=>(N.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),v.jsx(dv.Provider,{value:e,children:t})),fv=N.createContext(!1),yw=()=>N.useContext(fv);fv.Provider;function Sw(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var ww=N.createContext(Sw()),xw=()=>N.useContext(ww),Cw=(e,t,i)=>{const n=i!=null&&i.state.error&&typeof e.throwOnError=="function"?Nd(e.throwOnError,[i.state.error,i]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||n)&&(t.isReset()||(e.retryOnMount=!1))},bw=e=>{N.useEffect(()=>{e.clearReset()},[e])},kw=({result:e,errorResetBoundary:t,throwOnError:i,query:n,suspense:o})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(o&&e.data===void 0||Nd(i,[e.error,n])),Ew=e=>{if(e.suspense){const i=o=>o==="static"?o:Math.max(o??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...o)=>i(n(...o)):i(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Rw=(e,t)=>e.isLoading&&e.isFetching&&!t,Pw=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,mg=(e,t,i)=>t.fetchOptimistic(e).catch(()=>{i.clearReset()});function Lw(e,t,i){var S,w,x,C;const n=yw(),o=xw(),l=Ms(),c=l.defaultQueryOptions(e);(w=(S=l.getDefaultOptions().queries)==null?void 0:S._experimental_beforeQuery)==null||w.call(S,c);const u=l.getQueryCache().get(c.queryHash);c._optimisticResults=n?"isRestoring":"optimistic",Ew(c),Cw(c,o,u),bw(o);const p=!l.getQueryCache().get(c.queryHash),[d]=N.useState(()=>new t(l,c)),_=d.getOptimisticResult(c),g=!n&&e.subscribed!==!1;if(N.useSyncExternalStore(N.useCallback(k=>{const L=g?d.subscribe(ft.batchCalls(k)):zt;return d.updateResult(),L},[d,g]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),N.useEffect(()=>{d.setOptions(c)},[c,d]),Pw(c,_))throw mg(c,d,o);if(kw({result:_,errorResetBoundary:o,throwOnError:c.throwOnError,query:u,suspense:c.suspense}))throw _.error;if((C=(x=l.getDefaultOptions().queries)==null?void 0:x._experimental_afterQuery)==null||C.call(x,c,_),c.experimental_prefetchInRender&&!Es&&Rw(_,n)){const k=p?mg(c,d,o):u==null?void 0:u.promise;k==null||k.catch(zt).finally(()=>{d.updateResult()})}return c.notifyOnChangeProps?_:d.trackResult(_)}function vi(e,t){return Lw(e,cw)}function Ps(e,t){const i=Ms(),[n]=N.useState(()=>new mw(i,e));N.useEffect(()=>{n.setOptions(e)},[n,e]);const o=N.useSyncExternalStore(N.useCallback(c=>n.subscribe(ft.batchCalls(c)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),l=N.useCallback((c,u)=>{n.mutate(c,u).catch(zt)},[n]);if(o.error&&Nd(n.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:l,mutateAsync:o.mutate}}/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var gg="popstate";function Nw(e={}){function t(n,o){let{pathname:l,search:c,hash:u}=n.location;return ju("",{pathname:l,search:c,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function i(n,o){return typeof o=="string"?o:zo(o)}return Mw(t,i,null,e)}function Ue(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Si(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Dw(){return Math.random().toString(36).substring(2,10)}function _g(e,t){return{usr:e.state,key:e.key,idx:t}}function ju(e,t,i=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Nn(t):t,state:i,key:t&&t.key||n||Dw()}}function zo({pathname:e="/",search:t="",hash:i=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Nn(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substring(i),e=e.substring(0,i));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function Mw(e,t,i,n={}){let{window:o=document.defaultView,v5Compat:l=!1}=n,c=o.history,u="POP",p=null,d=_();d==null&&(d=0,c.replaceState({...c.state,idx:d},""));function _(){return(c.state||{idx:null}).idx}function g(){u="POP";let k=_(),L=k==null?null:k-d;d=k,p&&p({action:u,location:C.location,delta:L})}function S(k,L){u="PUSH";let W=ju(C.location,k,L);d=_()+1;let O=_g(W,d),T=C.createHref(W);try{c.pushState(O,"",T)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;o.location.assign(T)}l&&p&&p({action:u,location:C.location,delta:1})}function w(k,L){u="REPLACE";let W=ju(C.location,k,L);d=_();let O=_g(W,d),T=C.createHref(W);c.replaceState(O,"",T),l&&p&&p({action:u,location:C.location,delta:0})}function x(k){return Tw(k)}let C={get action(){return u},get location(){return e(o,c)},listen(k){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(gg,g),p=k,()=>{o.removeEventListener(gg,g),p=null}},createHref(k){return t(o,k)},createURL:x,encodeLocation(k){let L=x(k);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:S,replace:w,go(k){return c.go(k)}};return C}function Tw(e,t=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Ue(i,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:zo(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=i+n),new URL(n,i)}function pv(e,t,i="/"){return Ow(e,t,i,!1)}function Ow(e,t,i,n){let o=typeof t=="string"?Nn(t):t,l=ur(o.pathname||"/",i);if(l==null)return null;let c=mv(e);Bw(c);let u=null;for(let p=0;u==null&&p<c.length;++p){let d=Vw(l);u=Uw(c[p],d,n)}return u}function mv(e,t=[],i=[],n="",o=!1){let l=(c,u,p=o,d)=>{let _={relativePath:d===void 0?c.path||"":d,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(n)&&p)return;Ue(_.relativePath.startsWith(n),`Absolute route path "${_.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(n.length)}let g=cr([n,_.relativePath]),S=i.concat(_);c.children&&c.children.length>0&&(Ue(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),mv(c.children,t,S,g,p)),!(c.path==null&&!c.index)&&t.push({path:g,score:$w(g,c.index),routesMeta:S})};return e.forEach((c,u)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))l(c,u);else for(let d of gv(c.path))l(c,u,!0,d)}),t}function gv(e){let t=e.split("/");if(t.length===0)return[];let[i,...n]=t,o=i.endsWith("?"),l=i.replace(/\?$/,"");if(n.length===0)return o?[l,""]:[l];let c=gv(n.join("/")),u=[];return u.push(...c.map(p=>p===""?l:[l,p].join("/"))),o&&u.push(...c),u.map(p=>e.startsWith("/")&&p===""?"/":p)}function Bw(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:Ww(t.routesMeta.map(n=>n.childrenIndex),i.routesMeta.map(n=>n.childrenIndex)))}var Iw=/^:[\w-]+$/,Aw=3,jw=2,Fw=1,zw=10,Hw=-2,vg=e=>e==="*";function $w(e,t){let i=e.split("/"),n=i.length;return i.some(vg)&&(n+=Hw),t&&(n+=jw),i.filter(o=>!vg(o)).reduce((o,l)=>o+(Iw.test(l)?Aw:l===""?Fw:zw),n)}function Ww(e,t){return e.length===t.length&&e.slice(0,-1).every((n,o)=>n===t[o])?e[e.length-1]-t[t.length-1]:0}function Uw(e,t,i=!1){let{routesMeta:n}=e,o={},l="/",c=[];for(let u=0;u<n.length;++u){let p=n[u],d=u===n.length-1,_=l==="/"?t:t.slice(l.length)||"/",g=Bl({path:p.relativePath,caseSensitive:p.caseSensitive,end:d},_),S=p.route;if(!g&&d&&i&&!n[n.length-1].route.index&&(g=Bl({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!g)return null;Object.assign(o,g.params),c.push({params:o,pathname:cr([l,g.pathname]),pathnameBase:Gw(cr([l,g.pathnameBase])),route:S}),g.pathnameBase!=="/"&&(l=cr([l,g.pathnameBase]))}return c}function Bl(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,n]=Kw(e.path,e.caseSensitive,e.end),o=t.match(i);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),u=o.slice(1);return{params:n.reduce((d,{paramName:_,isOptional:g},S)=>{if(_==="*"){let x=u[S]||"";c=l.slice(0,l.length-x.length).replace(/(.)\/+$/,"$1")}const w=u[S];return g&&!w?d[_]=void 0:d[_]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:c,pattern:e}}function Kw(e,t=!1,i=!0){Si(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,p)=>(n.push({paramName:u,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),n]}function Vw(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Si(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ur(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,n=e.charAt(i);return n&&n!=="/"?null:e.slice(i)||"/"}var _v=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qw=e=>_v.test(e);function Qw(e,t="/"){let{pathname:i,search:n="",hash:o=""}=typeof e=="string"?Nn(e):e,l;if(i)if(qw(i))l=i;else{if(i.includes("//")){let c=i;i=i.replace(/\/\/+/g,"/"),Si(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${i}`)}i.startsWith("/")?l=yg(i.substring(1),"/"):l=yg(i,t)}else l=t;return{pathname:l,search:Xw(n),hash:Jw(o)}}function yg(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?i.length>1&&i.pop():o!=="."&&i.push(o)}),i.length>1?i.join("/"):"/"}function eu(e,t,i,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Yw(e){return e.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function Td(e){let t=Yw(e);return t.map((i,n)=>n===t.length-1?i.pathname:i.pathnameBase)}function Od(e,t,i,n=!1){let o;typeof e=="string"?o=Nn(e):(o={...e},Ue(!o.pathname||!o.pathname.includes("?"),eu("?","pathname","search",o)),Ue(!o.pathname||!o.pathname.includes("#"),eu("#","pathname","hash",o)),Ue(!o.search||!o.search.includes("#"),eu("#","search","hash",o)));let l=e===""||o.pathname==="",c=l?"/":o.pathname,u;if(c==null)u=i;else{let g=t.length-1;if(!n&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),g-=1;o.pathname=S.join("/")}u=g>=0?t[g]:"/"}let p=Qw(o,u),d=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&i.endsWith("/");return!p.pathname.endsWith("/")&&(d||_)&&(p.pathname+="/"),p}var cr=e=>e.join("/").replace(/\/\/+/g,"/"),Gw=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Xw=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Jw=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Zw=class{constructor(e,t,i,n=!1){this.status=e,this.statusText=t||"",this.internal=n,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function e1(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function t1(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var vv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function yv(e,t){let i=e;if(typeof i!="string"||!_v.test(i))return{absoluteURL:void 0,isExternal:!1,to:i};let n=i,o=!1;if(vv)try{let l=new URL(window.location.href),c=i.startsWith("//")?new URL(l.protocol+i):new URL(i),u=ur(c.pathname,t);c.origin===l.origin&&u!=null?i=u+c.search+c.hash:o=!0}catch{Si(!1,`<Link to="${i}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:o,to:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Sv=["POST","PUT","PATCH","DELETE"];new Set(Sv);var i1=["GET",...Sv];new Set(i1);var Dn=N.createContext(null);Dn.displayName="DataRouter";var ql=N.createContext(null);ql.displayName="DataRouterState";var r1=N.createContext(!1),wv=N.createContext({isTransitioning:!1});wv.displayName="ViewTransition";var s1=N.createContext(new Map);s1.displayName="Fetchers";var n1=N.createContext(null);n1.displayName="Await";var oi=N.createContext(null);oi.displayName="Navigation";var Xo=N.createContext(null);Xo.displayName="Location";var Di=N.createContext({outlet:null,matches:[],isDataRoute:!1});Di.displayName="Route";var Bd=N.createContext(null);Bd.displayName="RouteError";var xv="REACT_ROUTER_ERROR",o1="REDIRECT",a1="ROUTE_ERROR_RESPONSE";function l1(e){if(e.startsWith(`${xv}:${o1}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function c1(e){if(e.startsWith(`${xv}:${a1}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new Zw(t.status,t.statusText,t.data)}catch{}}function h1(e,{relative:t}={}){Ue(Mn(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:n}=N.useContext(oi),{hash:o,pathname:l,search:c}=Jo(e,{relative:t}),u=l;return i!=="/"&&(u=l==="/"?i:cr([i,l])),n.createHref({pathname:u,search:c,hash:o})}function Mn(){return N.useContext(Xo)!=null}function dr(){return Ue(Mn(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Xo).location}var Cv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bv(e){N.useContext(oi).static||N.useLayoutEffect(e)}function kv(){let{isDataRoute:e}=N.useContext(Di);return e?b1():u1()}function u1(){Ue(Mn(),"useNavigate() may be used only in the context of a <Router> component.");let e=N.useContext(Dn),{basename:t,navigator:i}=N.useContext(oi),{matches:n}=N.useContext(Di),{pathname:o}=dr(),l=JSON.stringify(Td(n)),c=N.useRef(!1);return bv(()=>{c.current=!0}),N.useCallback((p,d={})=>{if(Si(c.current,Cv),!c.current)return;if(typeof p=="number"){i.go(p);return}let _=Od(p,JSON.parse(l),o,d.relative==="path");e==null&&t!=="/"&&(_.pathname=_.pathname==="/"?t:cr([t,_.pathname])),(d.replace?i.replace:i.push)(_,d.state,d)},[t,i,l,o,e])}N.createContext(null);function d1(){let{matches:e}=N.useContext(Di),t=e[e.length-1];return t?t.params:{}}function Jo(e,{relative:t}={}){let{matches:i}=N.useContext(Di),{pathname:n}=dr(),o=JSON.stringify(Td(i));return N.useMemo(()=>Od(e,JSON.parse(o),n,t==="path"),[e,o,n,t])}function f1(e,t){return Ev(e,t)}function Ev(e,t,i,n,o){var W;Ue(Mn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=N.useContext(oi),{matches:c}=N.useContext(Di),u=c[c.length-1],p=u?u.params:{},d=u?u.pathname:"/",_=u?u.pathnameBase:"/",g=u&&u.route;{let O=g&&g.path||"";Pv(d,!g||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let S=dr(),w;if(t){let O=typeof t=="string"?Nn(t):t;Ue(_==="/"||((W=O.pathname)==null?void 0:W.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${O.pathname}" was given in the \`location\` prop.`),w=O}else w=S;let x=w.pathname||"/",C=x;if(_!=="/"){let O=_.replace(/^\//,"").split("/");C="/"+x.replace(/^\//,"").split("/").slice(O.length).join("/")}let k=pv(e,{pathname:C});Si(g||k!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Si(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=v1(k&&k.map(O=>Object.assign({},O,{params:Object.assign({},p,O.params),pathname:cr([_,l.encodeLocation?l.encodeLocation(O.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?_:cr([_,l.encodeLocation?l.encodeLocation(O.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathnameBase])})),c,i,n,o);return t&&L?N.createElement(Xo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},L):L}function p1(){let e=C1(),t=e1(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:n},l={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:l},"ErrorBoundary")," or"," ",N.createElement("code",{style:l},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),i?N.createElement("pre",{style:o},i):null,c)}var m1=N.createElement(p1,null),Rv=class extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const i=c1(e.digest);i&&(e=i)}let t=e!==void 0?N.createElement(Di.Provider,{value:this.props.routeContext},N.createElement(Bd.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?N.createElement(g1,{error:e},t):t}};Rv.contextType=r1;var tu=new WeakMap;function g1({children:e,error:t}){let{basename:i}=N.useContext(oi);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let n=l1(t.digest);if(n){let o=tu.get(t);if(o)throw o;let l=yv(n.location,i);if(vv&&!tu.get(t))if(l.isExternal||n.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:n.replace}));throw tu.set(t,c),c}return N.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return e}function _1({routeContext:e,match:t,children:i}){let n=N.useContext(Dn);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),N.createElement(Di.Provider,{value:e},i)}function v1(e,t=[],i=null,n=null,o=null){if(e==null){if(!i)return null;if(i.errors)e=i.matches;else if(t.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let l=e,c=i==null?void 0:i.errors;if(c!=null){let _=l.findIndex(g=>g.route.id&&(c==null?void 0:c[g.route.id])!==void 0);Ue(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,_+1))}let u=!1,p=-1;if(i)for(let _=0;_<l.length;_++){let g=l[_];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(p=_),g.route.id){let{loaderData:S,errors:w}=i,x=g.route.loader&&!S.hasOwnProperty(g.route.id)&&(!w||w[g.route.id]===void 0);if(g.route.lazy||x){u=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let d=i&&n?(_,g)=>{var S,w;n(_,{location:i.location,params:((w=(S=i.matches)==null?void 0:S[0])==null?void 0:w.params)??{},unstable_pattern:t1(i.matches),errorInfo:g})}:void 0;return l.reduceRight((_,g,S)=>{let w,x=!1,C=null,k=null;i&&(w=c&&g.route.id?c[g.route.id]:void 0,C=g.route.errorElement||m1,u&&(p<0&&S===0?(Pv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,k=null):p===S&&(x=!0,k=g.route.hydrateFallbackElement||null)));let L=t.concat(l.slice(0,S+1)),W=()=>{let O;return w?O=C:x?O=k:g.route.Component?O=N.createElement(g.route.Component,null):g.route.element?O=g.route.element:O=_,N.createElement(_1,{match:g,routeContext:{outlet:_,matches:L,isDataRoute:i!=null},children:O})};return i&&(g.route.ErrorBoundary||g.route.errorElement||S===0)?N.createElement(Rv,{location:i.location,revalidation:i.revalidation,component:C,error:w,children:W(),routeContext:{outlet:null,matches:L,isDataRoute:!0},onError:d}):W()},null)}function Id(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function y1(e){let t=N.useContext(Dn);return Ue(t,Id(e)),t}function S1(e){let t=N.useContext(ql);return Ue(t,Id(e)),t}function w1(e){let t=N.useContext(Di);return Ue(t,Id(e)),t}function Ad(e){let t=w1(e),i=t.matches[t.matches.length-1];return Ue(i.route.id,`${e} can only be used on routes that contain a unique "id"`),i.route.id}function x1(){return Ad("useRouteId")}function C1(){var n;let e=N.useContext(Bd),t=S1("useRouteError"),i=Ad("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function b1(){let{router:e}=y1("useNavigate"),t=Ad("useNavigate"),i=N.useRef(!1);return bv(()=>{i.current=!0}),N.useCallback(async(o,l={})=>{Si(i.current,Cv),i.current&&(typeof o=="number"?await e.navigate(o):await e.navigate(o,{fromRouteId:t,...l}))},[e,t])}var Sg={};function Pv(e,t,i){!t&&!Sg[e]&&(Sg[e]=!0,Si(!1,i))}N.memo(k1);function k1({routes:e,future:t,state:i,onError:n}){return Ev(e,void 0,i,n,t)}function iu({to:e,replace:t,state:i,relative:n}){Ue(Mn(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=N.useContext(oi);Si(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=N.useContext(Di),{pathname:c}=dr(),u=kv(),p=Od(e,Td(l),c,n==="path"),d=JSON.stringify(p);return N.useEffect(()=>{u(JSON.parse(d),{replace:t,state:i,relative:n})},[u,d,n,t,i]),null}function rr(e){Ue(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function E1({basename:e="/",children:t=null,location:i,navigationType:n="POP",navigator:o,static:l=!1,unstable_useTransitions:c}){Ue(!Mn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),p=N.useMemo(()=>({basename:u,navigator:o,static:l,unstable_useTransitions:c,future:{}}),[u,o,l,c]);typeof i=="string"&&(i=Nn(i));let{pathname:d="/",search:_="",hash:g="",state:S=null,key:w="default"}=i,x=N.useMemo(()=>{let C=ur(d,u);return C==null?null:{location:{pathname:C,search:_,hash:g,state:S,key:w},navigationType:n}},[u,d,_,g,S,w,n]);return Si(x!=null,`<Router basename="${u}"> is not able to match the URL "${d}${_}${g}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:N.createElement(oi.Provider,{value:p},N.createElement(Xo.Provider,{children:t,value:x}))}function R1({children:e,location:t}){return f1(Fu(e),t)}function Fu(e,t=[]){let i=[];return N.Children.forEach(e,(n,o)=>{if(!N.isValidElement(n))return;let l=[...t,o];if(n.type===N.Fragment){i.push.apply(i,Fu(n.props.children,l));return}Ue(n.type===rr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ue(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=Fu(n.props.children,l)),i.push(c)}),i}var Cl="get",bl="application/x-www-form-urlencoded";function Ql(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function P1(e){return Ql(e)&&e.tagName.toLowerCase()==="button"}function L1(e){return Ql(e)&&e.tagName.toLowerCase()==="form"}function N1(e){return Ql(e)&&e.tagName.toLowerCase()==="input"}function D1(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function M1(e,t){return e.button===0&&(!t||t==="_self")&&!D1(e)}var pl=null;function T1(){if(pl===null)try{new FormData(document.createElement("form"),0),pl=!1}catch{pl=!0}return pl}var O1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ru(e){return e!=null&&!O1.has(e)?(Si(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bl}"`),null):e}function B1(e,t){let i,n,o,l,c;if(L1(e)){let u=e.getAttribute("action");n=u?ur(u,t):null,i=e.getAttribute("method")||Cl,o=ru(e.getAttribute("enctype"))||bl,l=new FormData(e)}else if(P1(e)||N1(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=e.getAttribute("formaction")||u.getAttribute("action");if(n=p?ur(p,t):null,i=e.getAttribute("formmethod")||u.getAttribute("method")||Cl,o=ru(e.getAttribute("formenctype"))||ru(u.getAttribute("enctype"))||bl,l=new FormData(u,e),!T1()){let{name:d,type:_,value:g}=e;if(_==="image"){let S=d?`${d}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else d&&l.append(d,g)}}else{if(Ql(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=Cl,n=null,o=bl,c=e}return l&&o==="text/plain"&&(c=l,l=void 0),{action:n,method:i.toLowerCase(),encType:o,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function jd(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function I1(e,t,i){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${i}`:t&&ur(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${i}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${i}`,n}async function A1(e,t){if(e.id in t)return t[e.id];try{let i=await import(e.module);return t[e.id]=i,i}catch(i){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function j1(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function F1(e,t,i){let n=await Promise.all(e.map(async o=>{let l=t.routes[o.route.id];if(l){let c=await A1(l,i);return c.links?c.links():[]}return[]}));return W1(n.flat(1).filter(j1).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function wg(e,t,i,n,o,l){let c=(p,d)=>i[d]?p.route.id!==i[d].route.id:!0,u=(p,d)=>{var _;return i[d].pathname!==p.pathname||((_=i[d].route.path)==null?void 0:_.endsWith("*"))&&i[d].params["*"]!==p.params["*"]};return l==="assets"?t.filter((p,d)=>c(p,d)||u(p,d)):l==="data"?t.filter((p,d)=>{var g;let _=n.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(c(p,d)||u(p,d))return!0;if(p.route.shouldRevalidate){let S=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((g=i[0])==null?void 0:g.params)||{},nextUrl:new URL(e,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function z1(e,t,{includeHydrateFallback:i}={}){return H1(e.map(n=>{let o=t.routes[n.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),i&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function H1(e){return[...new Set(e)]}function $1(e){let t={},i=Object.keys(e).sort();for(let n of i)t[n]=e[n];return t}function W1(e,t){let i=new Set;return new Set(t),e.reduce((n,o)=>{let l=JSON.stringify($1(o));return i.has(l)||(i.add(l),n.push({key:l,link:o})),n},[])}function Lv(){let e=N.useContext(Dn);return jd(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function U1(){let e=N.useContext(ql);return jd(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Fd=N.createContext(void 0);Fd.displayName="FrameworkContext";function Nv(){let e=N.useContext(Fd);return jd(e,"You must render this element inside a <HydratedRouter> element"),e}function K1(e,t){let i=N.useContext(Fd),[n,o]=N.useState(!1),[l,c]=N.useState(!1),{onFocus:u,onBlur:p,onMouseEnter:d,onMouseLeave:_,onTouchStart:g}=t,S=N.useRef(null);N.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let C=L=>{L.forEach(W=>{c(W.isIntersecting)})},k=new IntersectionObserver(C,{threshold:.5});return S.current&&k.observe(S.current),()=>{k.disconnect()}}},[e]),N.useEffect(()=>{if(n){let C=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(C)}}},[n]);let w=()=>{o(!0)},x=()=>{o(!1),c(!1)};return i?e!=="intent"?[l,S,{}]:[l,S,{onFocus:xo(u,w),onBlur:xo(p,x),onMouseEnter:xo(d,w),onMouseLeave:xo(_,x),onTouchStart:xo(g,w)}]:[!1,S,{}]}function xo(e,t){return i=>{e&&e(i),i.defaultPrevented||t(i)}}function V1({page:e,...t}){let{router:i}=Lv(),n=N.useMemo(()=>pv(i.routes,e,i.basename),[i.routes,e,i.basename]);return n?N.createElement(Q1,{page:e,matches:n,...t}):null}function q1(e){let{manifest:t,routeModules:i}=Nv(),[n,o]=N.useState([]);return N.useEffect(()=>{let l=!1;return F1(e,t,i).then(c=>{l||o(c)}),()=>{l=!0}},[e,t,i]),n}function Q1({page:e,matches:t,...i}){let n=dr(),{manifest:o,routeModules:l}=Nv(),{basename:c}=Lv(),{loaderData:u,matches:p}=U1(),d=N.useMemo(()=>wg(e,t,p,o,n,"data"),[e,t,p,o,n]),_=N.useMemo(()=>wg(e,t,p,o,n,"assets"),[e,t,p,o,n]),g=N.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let x=new Set,C=!1;if(t.forEach(L=>{var O;let W=o.routes[L.route.id];!W||!W.hasLoader||(!d.some(T=>T.route.id===L.route.id)&&L.route.id in u&&((O=l[L.route.id])!=null&&O.shouldRevalidate)||W.hasClientLoader?C=!0:x.add(L.route.id))}),x.size===0)return[];let k=I1(e,c,"data");return C&&x.size>0&&k.searchParams.set("_routes",t.filter(L=>x.has(L.route.id)).map(L=>L.route.id).join(",")),[k.pathname+k.search]},[c,u,n,o,d,t,e,l]),S=N.useMemo(()=>z1(_,o),[_,o]),w=q1(_);return N.createElement(N.Fragment,null,g.map(x=>N.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...i})),S.map(x=>N.createElement("link",{key:x,rel:"modulepreload",href:x,...i})),w.map(({key:x,link:C})=>N.createElement("link",{key:x,nonce:i.nonce,...C})))}function Y1(...e){return t=>{e.forEach(i=>{typeof i=="function"?i(t):i!=null&&(i.current=t)})}}var G1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{G1&&(window.__reactRouterVersion="7.11.0")}catch{}function X1({basename:e,children:t,unstable_useTransitions:i,window:n}){let o=N.useRef();o.current==null&&(o.current=Nw({window:n,v5Compat:!0}));let l=o.current,[c,u]=N.useState({action:l.action,location:l.location}),p=N.useCallback(d=>{i===!1?u(d):N.startTransition(()=>u(d))},[i]);return N.useLayoutEffect(()=>l.listen(p),[l,p]),N.createElement(E1,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:i})}var Dv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rn=N.forwardRef(function({onClick:t,discover:i="render",prefetch:n="none",relative:o,reloadDocument:l,replace:c,state:u,target:p,to:d,preventScrollReset:_,viewTransition:g,unstable_defaultShouldRevalidate:S,...w},x){let{basename:C,unstable_useTransitions:k}=N.useContext(oi),L=typeof d=="string"&&Dv.test(d),W=yv(d,C);d=W.to;let O=h1(d,{relative:o}),[T,$,G]=K1(n,w),le=tx(d,{replace:c,state:u,target:p,preventScrollReset:_,relative:o,viewTransition:g,unstable_defaultShouldRevalidate:S,unstable_useTransitions:k});function ue(ie){t&&t(ie),ie.defaultPrevented||le(ie)}let ye=N.createElement("a",{...w,...G,href:W.absoluteURL||O,onClick:W.isExternal||l?t:ue,ref:Y1(x,$),target:p,"data-discover":!L&&i==="render"?"true":void 0});return T&&!L?N.createElement(N.Fragment,null,ye,N.createElement(V1,{page:O})):ye});Rn.displayName="Link";var J1=N.forwardRef(function({"aria-current":t="page",caseSensitive:i=!1,className:n="",end:o=!1,style:l,to:c,viewTransition:u,children:p,...d},_){let g=Jo(c,{relative:d.relative}),S=dr(),w=N.useContext(ql),{navigator:x,basename:C}=N.useContext(oi),k=w!=null&&ox(g)&&u===!0,L=x.encodeLocation?x.encodeLocation(g).pathname:g.pathname,W=S.pathname,O=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;i||(W=W.toLowerCase(),O=O?O.toLowerCase():null,L=L.toLowerCase()),O&&C&&(O=ur(O,C)||O);const T=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let $=W===L||!o&&W.startsWith(L)&&W.charAt(T)==="/",G=O!=null&&(O===L||!o&&O.startsWith(L)&&O.charAt(L.length)==="/"),le={isActive:$,isPending:G,isTransitioning:k},ue=$?t:void 0,ye;typeof n=="function"?ye=n(le):ye=[n,$?"active":null,G?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let ie=typeof l=="function"?l(le):l;return N.createElement(Rn,{...d,"aria-current":ue,className:ye,ref:_,style:ie,to:c,viewTransition:u},typeof p=="function"?p(le):p)});J1.displayName="NavLink";var Z1=N.forwardRef(({discover:e="render",fetcherKey:t,navigate:i,reloadDocument:n,replace:o,state:l,method:c=Cl,action:u,onSubmit:p,relative:d,preventScrollReset:_,viewTransition:g,unstable_defaultShouldRevalidate:S,...w},x)=>{let{unstable_useTransitions:C}=N.useContext(oi),k=sx(),L=nx(u,{relative:d}),W=c.toLowerCase()==="get"?"get":"post",O=typeof u=="string"&&Dv.test(u),T=$=>{if(p&&p($),$.defaultPrevented)return;$.preventDefault();let G=$.nativeEvent.submitter,le=(G==null?void 0:G.getAttribute("formmethod"))||c,ue=()=>k(G||$.currentTarget,{fetcherKey:t,method:le,navigate:i,replace:o,state:l,relative:d,preventScrollReset:_,viewTransition:g,unstable_defaultShouldRevalidate:S});C&&i!==!1?N.startTransition(()=>ue()):ue()};return N.createElement("form",{ref:x,method:W,action:L,onSubmit:n?p:T,...w,"data-discover":!O&&e==="render"?"true":void 0})});Z1.displayName="Form";function ex(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Mv(e){let t=N.useContext(Dn);return Ue(t,ex(e)),t}function tx(e,{target:t,replace:i,state:n,preventScrollReset:o,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:u,unstable_useTransitions:p}={}){let d=kv(),_=dr(),g=Jo(e,{relative:l});return N.useCallback(S=>{if(M1(S,t)){S.preventDefault();let w=i!==void 0?i:zo(_)===zo(g),x=()=>d(e,{replace:w,state:n,preventScrollReset:o,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:u});p?N.startTransition(()=>x()):x()}},[_,d,g,i,n,t,e,o,l,c,u,p])}var ix=0,rx=()=>`__${String(++ix)}__`;function sx(){let{router:e}=Mv("useSubmit"),{basename:t}=N.useContext(oi),i=x1(),n=e.fetch,o=e.navigate;return N.useCallback(async(l,c={})=>{let{action:u,method:p,encType:d,formData:_,body:g}=B1(l,t);if(c.navigate===!1){let S=c.fetcherKey||rx();await n(S,i,c.action||u,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:_,body:g,formMethod:c.method||p,formEncType:c.encType||d,flushSync:c.flushSync})}else await o(c.action||u,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:_,body:g,formMethod:c.method||p,formEncType:c.encType||d,replace:c.replace,state:c.state,fromRouteId:i,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,o,t,i])}function nx(e,{relative:t}={}){let{basename:i}=N.useContext(oi),n=N.useContext(Di);Ue(n,"useFormAction must be used inside a RouteContext");let[o]=n.matches.slice(-1),l={...Jo(e||".",{relative:t})},c=dr();if(e==null){l.search=c.search;let u=new URLSearchParams(l.search),p=u.getAll("index");if(p.some(_=>_==="")){u.delete("index"),p.filter(g=>g).forEach(g=>u.append("index",g));let _=u.toString();l.search=_?`?${_}`:""}}return(!e||e===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(l.pathname=l.pathname==="/"?i:cr([i,l.pathname])),zo(l)}function ox(e,{relative:t}={}){let i=N.useContext(wv);Ue(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Mv("useViewTransitionState"),o=Jo(e,{relative:t});if(!i.isTransitioning)return!1;let l=ur(i.currentLocation.pathname,n)||i.currentLocation.pathname,c=ur(i.nextLocation.pathname,n)||i.nextLocation.pathname;return Bl(o.pathname,c)!=null||Bl(o.pathname,l)!=null}const ke=e=>typeof e=="string",Co=()=>{let e,t;const i=new Promise((n,o)=>{e=n,t=o});return i.resolve=e,i.reject=t,i},xg=e=>e==null?"":""+e,ax=(e,t,i)=>{e.forEach(n=>{t[n]&&(i[n]=t[n])})},lx=/###/g,Cg=e=>e&&e.indexOf("###")>-1?e.replace(lx,"."):e,bg=e=>!e||ke(e),Io=(e,t,i)=>{const n=ke(t)?t.split("."):t;let o=0;for(;o<n.length-1;){if(bg(e))return{};const l=Cg(n[o]);!e[l]&&i&&(e[l]=new i),Object.prototype.hasOwnProperty.call(e,l)?e=e[l]:e={},++o}return bg(e)?{}:{obj:e,k:Cg(n[o])}},kg=(e,t,i)=>{const{obj:n,k:o}=Io(e,t,Object);if(n!==void 0||t.length===1){n[o]=i;return}let l=t[t.length-1],c=t.slice(0,t.length-1),u=Io(e,c,Object);for(;u.obj===void 0&&c.length;)l=`${c[c.length-1]}.${l}`,c=c.slice(0,c.length-1),u=Io(e,c,Object),u!=null&&u.obj&&typeof u.obj[`${u.k}.${l}`]<"u"&&(u.obj=void 0);u.obj[`${u.k}.${l}`]=i},cx=(e,t,i,n)=>{const{obj:o,k:l}=Io(e,t,Object);o[l]=o[l]||[],o[l].push(i)},Il=(e,t)=>{const{obj:i,k:n}=Io(e,t);if(i&&Object.prototype.hasOwnProperty.call(i,n))return i[n]},hx=(e,t,i)=>{const n=Il(e,i);return n!==void 0?n:Il(t,i)},Tv=(e,t,i)=>{for(const n in t)n!=="__proto__"&&n!=="constructor"&&(n in e?ke(e[n])||e[n]instanceof String||ke(t[n])||t[n]instanceof String?i&&(e[n]=t[n]):Tv(e[n],t[n],i):e[n]=t[n]);return e},an=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var ux={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const dx=e=>ke(e)?e.replace(/[&<>"'\/]/g,t=>ux[t]):e;class fx{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const i=this.regExpMap.get(t);if(i!==void 0)return i;const n=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,n),this.regExpQueue.push(t),n}}const px=[" ",",","?","!",";"],mx=new fx(20),gx=(e,t,i)=>{t=t||"",i=i||"";const n=px.filter(c=>t.indexOf(c)<0&&i.indexOf(c)<0);if(n.length===0)return!0;const o=mx.getRegExp(`(${n.map(c=>c==="?"?"\\?":c).join("|")})`);let l=!o.test(e);if(!l){const c=e.indexOf(i);c>0&&!o.test(e.substring(0,c))&&(l=!0)}return l},zu=(e,t,i=".")=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const n=t.split(i);let o=e;for(let l=0;l<n.length;){if(!o||typeof o!="object")return;let c,u="";for(let p=l;p<n.length;++p)if(p!==l&&(u+=i),u+=n[p],c=o[u],c!==void 0){if(["string","number","boolean"].indexOf(typeof c)>-1&&p<n.length-1)continue;l+=p-l+1;break}o=c}return o},Ho=e=>e==null?void 0:e.replace("_","-"),_x={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var i,n;(n=(i=console==null?void 0:console[e])==null?void 0:i.apply)==null||n.call(i,console,t)}};class Al{constructor(t,i={}){this.init(t,i)}init(t,i={}){this.prefix=i.prefix||"i18next:",this.logger=t||_x,this.options=i,this.debug=i.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,i,n,o){return o&&!this.debug?null:(ke(t[0])&&(t[0]=`${n}${this.prefix} ${t[0]}`),this.logger[i](t))}create(t){return new Al(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Al(this.logger,t)}}var Wi=new Al;class Yl{constructor(){this.observers={}}on(t,i){return t.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const o=this.observers[n].get(i)||0;this.observers[n].set(i,o+1)}),this}off(t,i){if(this.observers[t]){if(!i){delete this.observers[t];return}this.observers[t].delete(i)}}emit(t,...i){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([o,l])=>{for(let c=0;c<l;c++)o(...i)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([o,l])=>{for(let c=0;c<l;c++)o.apply(o,[t,...i])})}}class Eg extends Yl{constructor(t,i={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=i,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const i=this.options.ns.indexOf(t);i>-1&&this.options.ns.splice(i,1)}getResource(t,i,n,o={}){var d,_;const l=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,c=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure;let u;t.indexOf(".")>-1?u=t.split("."):(u=[t,i],n&&(Array.isArray(n)?u.push(...n):ke(n)&&l?u.push(...n.split(l)):u.push(n)));const p=Il(this.data,u);return!p&&!i&&!n&&t.indexOf(".")>-1&&(t=u[0],i=u[1],n=u.slice(2).join(".")),p||!c||!ke(n)?p:zu((_=(d=this.data)==null?void 0:d[t])==null?void 0:_[i],n,l)}addResource(t,i,n,o,l={silent:!1}){const c=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator;let u=[t,i];n&&(u=u.concat(c?n.split(c):n)),t.indexOf(".")>-1&&(u=t.split("."),o=i,i=u[1]),this.addNamespaces(i),kg(this.data,u,o),l.silent||this.emit("added",t,i,n,o)}addResources(t,i,n,o={silent:!1}){for(const l in n)(ke(n[l])||Array.isArray(n[l]))&&this.addResource(t,i,l,n[l],{silent:!0});o.silent||this.emit("added",t,i,n)}addResourceBundle(t,i,n,o,l,c={silent:!1,skipCopy:!1}){let u=[t,i];t.indexOf(".")>-1&&(u=t.split("."),o=n,n=i,i=u[1]),this.addNamespaces(i);let p=Il(this.data,u)||{};c.skipCopy||(n=JSON.parse(JSON.stringify(n))),o?Tv(p,n,l):p={...p,...n},kg(this.data,u,p),c.silent||this.emit("added",t,i,n)}removeResourceBundle(t,i){this.hasResourceBundle(t,i)&&delete this.data[t][i],this.removeNamespaces(i),this.emit("removed",t,i)}hasResourceBundle(t,i){return this.getResource(t,i)!==void 0}getResourceBundle(t,i){return i||(i=this.options.defaultNS),this.getResource(t,i)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const i=this.getDataByLanguage(t);return!!(i&&Object.keys(i)||[]).find(o=>i[o]&&Object.keys(i[o]).length>0)}toJSON(){return this.data}}var Ov={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,i,n,o){return e.forEach(l=>{var c;t=((c=this.processors[l])==null?void 0:c.process(t,i,n,o))??t}),t}};const Bv=Symbol("i18next/PATH_KEY");function vx(){const e=[],t=Object.create(null);let i;return t.get=(n,o)=>{var l;return(l=i==null?void 0:i.revoke)==null||l.call(i),o===Bv?e:(e.push(o),i=Proxy.revocable(n,t),i.proxy)},Proxy.revocable(Object.create(null),t).proxy}function Hu(e,t){const{[Bv]:i}=e(vx());return i.join((t==null?void 0:t.keySeparator)??".")}const Rg={},su=e=>!ke(e)&&typeof e!="boolean"&&typeof e!="number";class jl extends Yl{constructor(t,i={}){super(),ax(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=i,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Wi.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,i={interpolation:{}}){const n={...i};if(t==null)return!1;const o=this.resolve(t,n);if((o==null?void 0:o.res)===void 0)return!1;const l=su(o.res);return!(n.returnObjects===!1&&l)}extractFromKey(t,i){let n=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let l=i.ns||this.options.defaultNS||[];const c=n&&t.indexOf(n)>-1,u=!this.options.userDefinedKeySeparator&&!i.keySeparator&&!this.options.userDefinedNsSeparator&&!i.nsSeparator&&!gx(t,n,o);if(c&&!u){const p=t.match(this.interpolator.nestingRegexp);if(p&&p.length>0)return{key:t,namespaces:ke(l)?[l]:l};const d=t.split(n);(n!==o||n===o&&this.options.ns.indexOf(d[0])>-1)&&(l=d.shift()),t=d.join(o)}return{key:t,namespaces:ke(l)?[l]:l}}translate(t,i,n){let o=typeof i=="object"?{...i}:i;if(typeof o!="object"&&this.options.overloadTranslationOptionHandler&&(o=this.options.overloadTranslationOptionHandler(arguments)),typeof o=="object"&&(o={...o}),o||(o={}),t==null)return"";typeof t=="function"&&(t=Hu(t,{...this.options,...o})),Array.isArray(t)||(t=[String(t)]);const l=o.returnDetails!==void 0?o.returnDetails:this.options.returnDetails,c=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,{key:u,namespaces:p}=this.extractFromKey(t[t.length-1],o),d=p[p.length-1];let _=o.nsSeparator!==void 0?o.nsSeparator:this.options.nsSeparator;_===void 0&&(_=":");const g=o.lng||this.language,S=o.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((g==null?void 0:g.toLowerCase())==="cimode")return S?l?{res:`${d}${_}${u}`,usedKey:u,exactUsedKey:u,usedLng:g,usedNS:d,usedParams:this.getUsedParamsDetails(o)}:`${d}${_}${u}`:l?{res:u,usedKey:u,exactUsedKey:u,usedLng:g,usedNS:d,usedParams:this.getUsedParamsDetails(o)}:u;const w=this.resolve(t,o);let x=w==null?void 0:w.res;const C=(w==null?void 0:w.usedKey)||u,k=(w==null?void 0:w.exactUsedKey)||u,L=["[object Number]","[object Function]","[object RegExp]"],W=o.joinArrays!==void 0?o.joinArrays:this.options.joinArrays,O=!this.i18nFormat||this.i18nFormat.handleAsObject,T=o.count!==void 0&&!ke(o.count),$=jl.hasDefaultValue(o),G=T?this.pluralResolver.getSuffix(g,o.count,o):"",le=o.ordinal&&T?this.pluralResolver.getSuffix(g,o.count,{ordinal:!1}):"",ue=T&&!o.ordinal&&o.count===0,ye=ue&&o[`defaultValue${this.options.pluralSeparator}zero`]||o[`defaultValue${G}`]||o[`defaultValue${le}`]||o.defaultValue;let ie=x;O&&!x&&$&&(ie=ye);const se=su(ie),z=Object.prototype.toString.apply(ie);if(O&&ie&&se&&L.indexOf(z)<0&&!(ke(W)&&Array.isArray(ie))){if(!o.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const j=this.options.returnedObjectHandler?this.options.returnedObjectHandler(C,ie,{...o,ns:p}):`key '${u} (${this.language})' returned an object instead of string.`;return l?(w.res=j,w.usedParams=this.getUsedParamsDetails(o),w):j}if(c){const j=Array.isArray(ie),U=j?[]:{},V=j?k:C;for(const K in ie)if(Object.prototype.hasOwnProperty.call(ie,K)){const te=`${V}${c}${K}`;$&&!x?U[K]=this.translate(te,{...o,defaultValue:su(ye)?ye[K]:void 0,joinArrays:!1,ns:p}):U[K]=this.translate(te,{...o,joinArrays:!1,ns:p}),U[K]===te&&(U[K]=ie[K])}x=U}}else if(O&&ke(W)&&Array.isArray(x))x=x.join(W),x&&(x=this.extendTranslation(x,t,o,n));else{let j=!1,U=!1;!this.isValidLookup(x)&&$&&(j=!0,x=ye),this.isValidLookup(x)||(U=!0,x=u);const K=(o.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&U?void 0:x,te=$&&ye!==x&&this.options.updateMissing;if(U||j||te){if(this.logger.log(te?"updateKey":"missingKey",g,d,u,te?ye:x),c){const E=this.resolve(u,{...o,keySeparator:!1});E&&E.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let A=[];const re=this.languageUtils.getFallbackCodes(this.options.fallbackLng,o.lng||this.language);if(this.options.saveMissingTo==="fallback"&&re&&re[0])for(let E=0;E<re.length;E++)A.push(re[E]);else this.options.saveMissingTo==="all"?A=this.languageUtils.toResolveHierarchy(o.lng||this.language):A.push(o.lng||this.language);const Z=(E,M,Y)=>{var _e;const ce=$&&Y!==x?Y:K;this.options.missingKeyHandler?this.options.missingKeyHandler(E,d,M,ce,te,o):(_e=this.backendConnector)!=null&&_e.saveMissing&&this.backendConnector.saveMissing(E,d,M,ce,te,o),this.emit("missingKey",E,d,M,x)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?A.forEach(E=>{const M=this.pluralResolver.getSuffixes(E,o);ue&&o[`defaultValue${this.options.pluralSeparator}zero`]&&M.indexOf(`${this.options.pluralSeparator}zero`)<0&&M.push(`${this.options.pluralSeparator}zero`),M.forEach(Y=>{Z([E],u+Y,o[`defaultValue${Y}`]||ye)})}):Z(A,u,ye))}x=this.extendTranslation(x,t,o,w,n),U&&x===u&&this.options.appendNamespaceToMissingKey&&(x=`${d}${_}${u}`),(U||j)&&this.options.parseMissingKeyHandler&&(x=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}${_}${u}`:u,j?x:void 0,o))}return l?(w.res=x,w.usedParams=this.getUsedParamsDetails(o),w):x}extendTranslation(t,i,n,o,l){var p,d;if((p=this.i18nFormat)!=null&&p.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const _=ke(t)&&(((d=n==null?void 0:n.interpolation)==null?void 0:d.skipOnVariables)!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let g;if(_){const w=t.match(this.interpolator.nestingRegexp);g=w&&w.length}let S=n.replace&&!ke(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(S={...this.options.interpolation.defaultVariables,...S}),t=this.interpolator.interpolate(t,S,n.lng||this.language||o.usedLng,n),_){const w=t.match(this.interpolator.nestingRegexp),x=w&&w.length;g<x&&(n.nest=!1)}!n.lng&&o&&o.res&&(n.lng=this.language||o.usedLng),n.nest!==!1&&(t=this.interpolator.nest(t,(...w)=>(l==null?void 0:l[0])===w[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${w[0]} in key: ${i[0]}`),null):this.translate(...w,i),n)),n.interpolation&&this.interpolator.reset()}const c=n.postProcess||this.options.postProcess,u=ke(c)?[c]:c;return t!=null&&(u!=null&&u.length)&&n.applyPostProcessor!==!1&&(t=Ov.handle(u,t,i,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),t}resolve(t,i={}){let n,o,l,c,u;return ke(t)&&(t=[t]),t.forEach(p=>{if(this.isValidLookup(n))return;const d=this.extractFromKey(p,i),_=d.key;o=_;let g=d.namespaces;this.options.fallbackNS&&(g=g.concat(this.options.fallbackNS));const S=i.count!==void 0&&!ke(i.count),w=S&&!i.ordinal&&i.count===0,x=i.context!==void 0&&(ke(i.context)||typeof i.context=="number")&&i.context!=="",C=i.lngs?i.lngs:this.languageUtils.toResolveHierarchy(i.lng||this.language,i.fallbackLng);g.forEach(k=>{var L,W;this.isValidLookup(n)||(u=k,!Rg[`${C[0]}-${k}`]&&((L=this.utils)!=null&&L.hasLoadedNamespace)&&!((W=this.utils)!=null&&W.hasLoadedNamespace(u))&&(Rg[`${C[0]}-${k}`]=!0,this.logger.warn(`key "${o}" for languages "${C.join(", ")}" won't get resolved as namespace "${u}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),C.forEach(O=>{var G;if(this.isValidLookup(n))return;c=O;const T=[_];if((G=this.i18nFormat)!=null&&G.addLookupKeys)this.i18nFormat.addLookupKeys(T,_,O,k,i);else{let le;S&&(le=this.pluralResolver.getSuffix(O,i.count,i));const ue=`${this.options.pluralSeparator}zero`,ye=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(S&&(i.ordinal&&le.indexOf(ye)===0&&T.push(_+le.replace(ye,this.options.pluralSeparator)),T.push(_+le),w&&T.push(_+ue)),x){const ie=`${_}${this.options.contextSeparator||"_"}${i.context}`;T.push(ie),S&&(i.ordinal&&le.indexOf(ye)===0&&T.push(ie+le.replace(ye,this.options.pluralSeparator)),T.push(ie+le),w&&T.push(ie+ue))}}let $;for(;$=T.pop();)this.isValidLookup(n)||(l=$,n=this.getResource(O,k,$,i))}))})}),{res:n,usedKey:o,exactUsedKey:l,usedLng:c,usedNS:u}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,i,n,o={}){var l;return(l=this.i18nFormat)!=null&&l.getResource?this.i18nFormat.getResource(t,i,n,o):this.resourceStore.getResource(t,i,n,o)}getUsedParamsDetails(t={}){const i=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=t.replace&&!ke(t.replace);let o=n?t.replace:t;if(n&&typeof t.count<"u"&&(o.count=t.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!n){o={...o};for(const l of i)delete o[l]}return o}static hasDefaultValue(t){const i="defaultValue";for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&i===n.substring(0,i.length)&&t[n]!==void 0)return!0;return!1}}class Pg{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Wi.create("languageUtils")}getScriptPartFromCode(t){if(t=Ho(t),!t||t.indexOf("-")<0)return null;const i=t.split("-");return i.length===2||(i.pop(),i[i.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(i.join("-"))}getLanguagePartFromCode(t){if(t=Ho(t),!t||t.indexOf("-")<0)return t;const i=t.split("-");return this.formatLanguageCode(i[0])}formatLanguageCode(t){if(ke(t)&&t.indexOf("-")>-1){let i;try{i=Intl.getCanonicalLocales(t)[0]}catch{}return i&&this.options.lowerCaseLng&&(i=i.toLowerCase()),i||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let i;return t.forEach(n=>{if(i)return;const o=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(o))&&(i=o)}),!i&&this.options.supportedLngs&&t.forEach(n=>{if(i)return;const o=this.getScriptPartFromCode(n);if(this.isSupportedCode(o))return i=o;const l=this.getLanguagePartFromCode(n);if(this.isSupportedCode(l))return i=l;i=this.options.supportedLngs.find(c=>{if(c===l)return c;if(!(c.indexOf("-")<0&&l.indexOf("-")<0)&&(c.indexOf("-")>0&&l.indexOf("-")<0&&c.substring(0,c.indexOf("-"))===l||c.indexOf(l)===0&&l.length>1))return c})}),i||(i=this.getFallbackCodes(this.options.fallbackLng)[0]),i}getFallbackCodes(t,i){if(!t)return[];if(typeof t=="function"&&(t=t(i)),ke(t)&&(t=[t]),Array.isArray(t))return t;if(!i)return t.default||[];let n=t[i];return n||(n=t[this.getScriptPartFromCode(i)]),n||(n=t[this.formatLanguageCode(i)]),n||(n=t[this.getLanguagePartFromCode(i)]),n||(n=t.default),n||[]}toResolveHierarchy(t,i){const n=this.getFallbackCodes((i===!1?[]:i)||this.options.fallbackLng||[],t),o=[],l=c=>{c&&(this.isSupportedCode(c)?o.push(c):this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`))};return ke(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&l(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&l(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&l(this.getLanguagePartFromCode(t))):ke(t)&&l(this.formatLanguageCode(t)),n.forEach(c=>{o.indexOf(c)<0&&l(this.formatLanguageCode(c))}),o}}const Lg={zero:0,one:1,two:2,few:3,many:4,other:5},Ng={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class yx{constructor(t,i={}){this.languageUtils=t,this.options=i,this.logger=Wi.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,i){this.rules[t]=i}clearCache(){this.pluralRulesCache={}}getRule(t,i={}){const n=Ho(t==="dev"?"en":t),o=i.ordinal?"ordinal":"cardinal",l=JSON.stringify({cleanedCode:n,type:o});if(l in this.pluralRulesCache)return this.pluralRulesCache[l];let c;try{c=new Intl.PluralRules(n,{type:o})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Ng;if(!t.match(/-|_/))return Ng;const p=this.languageUtils.getLanguagePartFromCode(t);c=this.getRule(p,i)}return this.pluralRulesCache[l]=c,c}needsPlural(t,i={}){let n=this.getRule(t,i);return n||(n=this.getRule("dev",i)),(n==null?void 0:n.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(t,i,n={}){return this.getSuffixes(t,n).map(o=>`${i}${o}`)}getSuffixes(t,i={}){let n=this.getRule(t,i);return n||(n=this.getRule("dev",i)),n?n.resolvedOptions().pluralCategories.sort((o,l)=>Lg[o]-Lg[l]).map(o=>`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${o}`):[]}getSuffix(t,i,n={}){const o=this.getRule(t,n);return o?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${o.select(i)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",i,n))}}const Dg=(e,t,i,n=".",o=!0)=>{let l=hx(e,t,i);return!l&&o&&ke(i)&&(l=zu(e,i,n),l===void 0&&(l=zu(t,i,n))),l},nu=e=>e.replace(/\$/g,"$$$$");class Mg{constructor(t={}){var i;this.logger=Wi.create("interpolator"),this.options=t,this.format=((i=t==null?void 0:t.interpolation)==null?void 0:i.format)||(n=>n),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:i,escapeValue:n,useRawValueToEscape:o,prefix:l,prefixEscaped:c,suffix:u,suffixEscaped:p,formatSeparator:d,unescapeSuffix:_,unescapePrefix:g,nestingPrefix:S,nestingPrefixEscaped:w,nestingSuffix:x,nestingSuffixEscaped:C,nestingOptionsSeparator:k,maxReplaces:L,alwaysFormat:W}=t.interpolation;this.escape=i!==void 0?i:dx,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=o!==void 0?o:!1,this.prefix=l?an(l):c||"{{",this.suffix=u?an(u):p||"}}",this.formatSeparator=d||",",this.unescapePrefix=_?"":g||"-",this.unescapeSuffix=this.unescapePrefix?"":_||"",this.nestingPrefix=S?an(S):w||an("$t("),this.nestingSuffix=x?an(x):C||an(")"),this.nestingOptionsSeparator=k||",",this.maxReplaces=L||1e3,this.alwaysFormat=W!==void 0?W:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(i,n)=>(i==null?void 0:i.source)===n?(i.lastIndex=0,i):new RegExp(n,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,i,n,o){var w;let l,c,u;const p=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=x=>{if(x.indexOf(this.formatSeparator)<0){const W=Dg(i,p,x,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(W,void 0,n,{...o,...i,interpolationkey:x}):W}const C=x.split(this.formatSeparator),k=C.shift().trim(),L=C.join(this.formatSeparator).trim();return this.format(Dg(i,p,k,this.options.keySeparator,this.options.ignoreJSONStructure),L,n,{...o,...i,interpolationkey:k})};this.resetRegExp();const _=(o==null?void 0:o.missingInterpolationHandler)||this.options.missingInterpolationHandler,g=((w=o==null?void 0:o.interpolation)==null?void 0:w.skipOnVariables)!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:x=>nu(x)},{regex:this.regexp,safeValue:x=>this.escapeValue?nu(this.escape(x)):nu(x)}].forEach(x=>{for(u=0;l=x.regex.exec(t);){const C=l[1].trim();if(c=d(C),c===void 0)if(typeof _=="function"){const L=_(t,l,o);c=ke(L)?L:""}else if(o&&Object.prototype.hasOwnProperty.call(o,C))c="";else if(g){c=l[0];continue}else this.logger.warn(`missed to pass in variable ${C} for interpolating ${t}`),c="";else!ke(c)&&!this.useRawValueToEscape&&(c=xg(c));const k=x.safeValue(c);if(t=t.replace(l[0],k),g?(x.regex.lastIndex+=c.length,x.regex.lastIndex-=l[0].length):x.regex.lastIndex=0,u++,u>=this.maxReplaces)break}}),t}nest(t,i,n={}){let o,l,c;const u=(p,d)=>{const _=this.nestingOptionsSeparator;if(p.indexOf(_)<0)return p;const g=p.split(new RegExp(`${_}[ ]*{`));let S=`{${g[1]}`;p=g[0],S=this.interpolate(S,c);const w=S.match(/'/g),x=S.match(/"/g);(((w==null?void 0:w.length)??0)%2===0&&!x||x.length%2!==0)&&(S=S.replace(/'/g,'"'));try{c=JSON.parse(S),d&&(c={...d,...c})}catch(C){return this.logger.warn(`failed parsing options string in nesting for key ${p}`,C),`${p}${_}${S}`}return c.defaultValue&&c.defaultValue.indexOf(this.prefix)>-1&&delete c.defaultValue,p};for(;o=this.nestingRegexp.exec(t);){let p=[];c={...n},c=c.replace&&!ke(c.replace)?c.replace:c,c.applyPostProcessor=!1,delete c.defaultValue;const d=/{.*}/.test(o[1])?o[1].lastIndexOf("}")+1:o[1].indexOf(this.formatSeparator);if(d!==-1&&(p=o[1].slice(d).split(this.formatSeparator).map(_=>_.trim()).filter(Boolean),o[1]=o[1].slice(0,d)),l=i(u.call(this,o[1].trim(),c),c),l&&o[0]===t&&!ke(l))return l;ke(l)||(l=xg(l)),l||(this.logger.warn(`missed to resolve ${o[1]} for nesting ${t}`),l=""),p.length&&(l=p.reduce((_,g)=>this.format(_,g,n.lng,{...n,interpolationkey:o[1].trim()}),l.trim())),t=t.replace(o[0],l),this.regexp.lastIndex=0}return t}}const Sx=e=>{let t=e.toLowerCase().trim();const i={};if(e.indexOf("(")>-1){const n=e.split("(");t=n[0].toLowerCase().trim();const o=n[1].substring(0,n[1].length-1);t==="currency"&&o.indexOf(":")<0?i.currency||(i.currency=o.trim()):t==="relativetime"&&o.indexOf(":")<0?i.range||(i.range=o.trim()):o.split(";").forEach(c=>{if(c){const[u,...p]=c.split(":"),d=p.join(":").trim().replace(/^'+|'+$/g,""),_=u.trim();i[_]||(i[_]=d),d==="false"&&(i[_]=!1),d==="true"&&(i[_]=!0),isNaN(d)||(i[_]=parseInt(d,10))}})}return{formatName:t,formatOptions:i}},Tg=e=>{const t={};return(i,n,o)=>{let l=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(l={...l,[o.interpolationkey]:void 0});const c=n+JSON.stringify(l);let u=t[c];return u||(u=e(Ho(n),o),t[c]=u),u(i)}},wx=e=>(t,i,n)=>e(Ho(i),n)(t);class xx{constructor(t={}){this.logger=Wi.create("formatter"),this.options=t,this.init(t)}init(t,i={interpolation:{}}){this.formatSeparator=i.interpolation.formatSeparator||",";const n=i.cacheInBuiltFormats?Tg:wx;this.formats={number:n((o,l)=>{const c=new Intl.NumberFormat(o,{...l});return u=>c.format(u)}),currency:n((o,l)=>{const c=new Intl.NumberFormat(o,{...l,style:"currency"});return u=>c.format(u)}),datetime:n((o,l)=>{const c=new Intl.DateTimeFormat(o,{...l});return u=>c.format(u)}),relativetime:n((o,l)=>{const c=new Intl.RelativeTimeFormat(o,{...l});return u=>c.format(u,l.range||"day")}),list:n((o,l)=>{const c=new Intl.ListFormat(o,{...l});return u=>c.format(u)})}}add(t,i){this.formats[t.toLowerCase().trim()]=i}addCached(t,i){this.formats[t.toLowerCase().trim()]=Tg(i)}format(t,i,n,o={}){const l=i.split(this.formatSeparator);if(l.length>1&&l[0].indexOf("(")>1&&l[0].indexOf(")")<0&&l.find(u=>u.indexOf(")")>-1)){const u=l.findIndex(p=>p.indexOf(")")>-1);l[0]=[l[0],...l.splice(1,u)].join(this.formatSeparator)}return l.reduce((u,p)=>{var g;const{formatName:d,formatOptions:_}=Sx(p);if(this.formats[d]){let S=u;try{const w=((g=o==null?void 0:o.formatParams)==null?void 0:g[o.interpolationkey])||{},x=w.locale||w.lng||o.locale||o.lng||n;S=this.formats[d](u,x,{..._,...o,...w})}catch(w){this.logger.warn(w)}return S}else this.logger.warn(`there was no format function for ${d}`);return u},t)}}const Cx=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class bx extends Yl{constructor(t,i,n,o={}){var l,c;super(),this.backend=t,this.store=i,this.services=n,this.languageUtils=n.languageUtils,this.options=o,this.logger=Wi.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],(c=(l=this.backend)==null?void 0:l.init)==null||c.call(l,n,o.backend,o)}queueLoad(t,i,n,o){const l={},c={},u={},p={};return t.forEach(d=>{let _=!0;i.forEach(g=>{const S=`${d}|${g}`;!n.reload&&this.store.hasResourceBundle(d,g)?this.state[S]=2:this.state[S]<0||(this.state[S]===1?c[S]===void 0&&(c[S]=!0):(this.state[S]=1,_=!1,c[S]===void 0&&(c[S]=!0),l[S]===void 0&&(l[S]=!0),p[g]===void 0&&(p[g]=!0)))}),_||(u[d]=!0)}),(Object.keys(l).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(l),pending:Object.keys(c),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(p)}}loaded(t,i,n){const o=t.split("|"),l=o[0],c=o[1];i&&this.emit("failedLoading",l,c,i),!i&&n&&this.store.addResourceBundle(l,c,n,void 0,void 0,{skipCopy:!0}),this.state[t]=i?-1:2,i&&n&&(this.state[t]=0);const u={};this.queue.forEach(p=>{cx(p.loaded,[l],c),Cx(p,t),i&&p.errors.push(i),p.pendingCount===0&&!p.done&&(Object.keys(p.loaded).forEach(d=>{u[d]||(u[d]={});const _=p.loaded[d];_.length&&_.forEach(g=>{u[d][g]===void 0&&(u[d][g]=!0)})}),p.done=!0,p.errors.length?p.callback(p.errors):p.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(p=>!p.done)}read(t,i,n,o=0,l=this.retryTimeout,c){if(!t.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:i,fcName:n,tried:o,wait:l,callback:c});return}this.readingCalls++;const u=(d,_)=>{if(this.readingCalls--,this.waitingReads.length>0){const g=this.waitingReads.shift();this.read(g.lng,g.ns,g.fcName,g.tried,g.wait,g.callback)}if(d&&_&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,t,i,n,o+1,l*2,c)},l);return}c(d,_)},p=this.backend[n].bind(this.backend);if(p.length===2){try{const d=p(t,i);d&&typeof d.then=="function"?d.then(_=>u(null,_)).catch(u):u(null,d)}catch(d){u(d)}return}return p(t,i,u)}prepareLoading(t,i,n={},o){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();ke(t)&&(t=this.languageUtils.toResolveHierarchy(t)),ke(i)&&(i=[i]);const l=this.queueLoad(t,i,n,o);if(!l.toLoad.length)return l.pending.length||o(),null;l.toLoad.forEach(c=>{this.loadOne(c)})}load(t,i,n){this.prepareLoading(t,i,{},n)}reload(t,i,n){this.prepareLoading(t,i,{reload:!0},n)}loadOne(t,i=""){const n=t.split("|"),o=n[0],l=n[1];this.read(o,l,"read",void 0,void 0,(c,u)=>{c&&this.logger.warn(`${i}loading namespace ${l} for language ${o} failed`,c),!c&&u&&this.logger.log(`${i}loaded namespace ${l} for language ${o}`,u),this.loaded(t,c,u)})}saveMissing(t,i,n,o,l,c={},u=()=>{}){var p,d,_,g,S;if((d=(p=this.services)==null?void 0:p.utils)!=null&&d.hasLoadedNamespace&&!((g=(_=this.services)==null?void 0:_.utils)!=null&&g.hasLoadedNamespace(i))){this.logger.warn(`did not save key "${n}" as the namespace "${i}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if((S=this.backend)!=null&&S.create){const w={...c,isUpdate:l},x=this.backend.create.bind(this.backend);if(x.length<6)try{let C;x.length===5?C=x(t,i,n,o,w):C=x(t,i,n,o),C&&typeof C.then=="function"?C.then(k=>u(null,k)).catch(u):u(null,C)}catch(C){u(C)}else x(t,i,n,o,u,w)}!t||!t[0]||this.store.addResource(t[0],i,n,o)}}}const Og=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),ke(e[1])&&(t.defaultValue=e[1]),ke(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const i=e[3]||e[2];Object.keys(i).forEach(n=>{t[n]=i[n]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Bg=e=>{var t,i;return ke(e.ns)&&(e.ns=[e.ns]),ke(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),ke(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),((i=(t=e.supportedLngs)==null?void 0:t.indexOf)==null?void 0:i.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e},ml=()=>{},kx=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(i=>{typeof e[i]=="function"&&(e[i]=e[i].bind(e))})};class Ao extends Yl{constructor(t={},i){if(super(),this.options=Bg(t),this.services={},this.logger=Wi,this.modules={external:[]},kx(this),i&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,i),this;setTimeout(()=>{this.init(t,i)},0)}}init(t={},i){this.isInitializing=!0,typeof t=="function"&&(i=t,t={}),t.defaultNS==null&&t.ns&&(ke(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const n=Og();this.options={...n,...this.options,...Bg(t)},this.options.interpolation={...n.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=n.overloadTranslationOptionHandler);const o=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?Wi.init(o(this.modules.logger),this.options):Wi.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=xx;const _=new Pg(this.options);this.store=new Eg(this.options.resources,this.options);const g=this.services;g.logger=Wi,g.resourceStore=this.store,g.languageUtils=_,g.pluralResolver=new yx(_,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),d&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(g.formatter=o(d),g.formatter.init&&g.formatter.init(g,this.options),this.options.interpolation.format=g.formatter.format.bind(g.formatter)),g.interpolator=new Mg(this.options),g.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},g.backendConnector=new bx(o(this.modules.backend),g.resourceStore,g,this.options),g.backendConnector.on("*",(w,...x)=>{this.emit(w,...x)}),this.modules.languageDetector&&(g.languageDetector=o(this.modules.languageDetector),g.languageDetector.init&&g.languageDetector.init(g,this.options.detection,this.options)),this.modules.i18nFormat&&(g.i18nFormat=o(this.modules.i18nFormat),g.i18nFormat.init&&g.i18nFormat.init(this)),this.translator=new jl(this.services,this.options),this.translator.on("*",(w,...x)=>{this.emit(w,...x)}),this.modules.external.forEach(w=>{w.init&&w.init(this)})}if(this.format=this.options.interpolation.format,i||(i=ml),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=(..._)=>this.store[d](..._)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=(..._)=>(this.store[d](..._),this)});const u=Co(),p=()=>{const d=(_,g)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),u.resolve(g),i(_,g)};if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initAsync?p():setTimeout(p,0),u}loadResources(t,i=ml){var l,c;let n=i;const o=ke(t)?t:this.language;if(typeof t=="function"&&(n=t),!this.options.resources||this.options.partialBundledLanguages){if((o==null?void 0:o.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const u=[],p=d=>{if(!d||d==="cimode")return;this.services.languageUtils.toResolveHierarchy(d).forEach(g=>{g!=="cimode"&&u.indexOf(g)<0&&u.push(g)})};o?p(o):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(_=>p(_)),(c=(l=this.options.preload)==null?void 0:l.forEach)==null||c.call(l,d=>p(d)),this.services.backendConnector.load(u,this.options.ns,d=>{!d&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(d)})}else n(null)}reloadResources(t,i,n){const o=Co();return typeof t=="function"&&(n=t,t=void 0),typeof i=="function"&&(n=i,i=void 0),t||(t=this.languages),i||(i=this.options.ns),n||(n=ml),this.services.backendConnector.reload(t,i,l=>{o.resolve(),n(l)}),o}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&Ov.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let i=0;i<this.languages.length;i++){const n=this.languages[i];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,i){this.isLanguageChangingTo=t;const n=Co();this.emit("languageChanging",t);const o=u=>{this.language=u,this.languages=this.services.languageUtils.toResolveHierarchy(u),this.resolvedLanguage=void 0,this.setResolvedLanguage(u)},l=(u,p)=>{p?this.isLanguageChangingTo===t&&(o(p),this.translator.changeLanguage(p),this.isLanguageChangingTo=void 0,this.emit("languageChanged",p),this.logger.log("languageChanged",p)):this.isLanguageChangingTo=void 0,n.resolve((...d)=>this.t(...d)),i&&i(u,(...d)=>this.t(...d))},c=u=>{var _,g;!t&&!u&&this.services.languageDetector&&(u=[]);const p=ke(u)?u:u&&u[0],d=this.store.hasLanguageSomeTranslations(p)?p:this.services.languageUtils.getBestMatchFromCodes(ke(u)?[u]:u);d&&(this.language||o(d),this.translator.language||this.translator.changeLanguage(d),(g=(_=this.services.languageDetector)==null?void 0:_.cacheUserLanguage)==null||g.call(_,d)),this.loadResources(d,S=>{l(S,d)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(t),n}getFixedT(t,i,n){const o=(l,c,...u)=>{let p;typeof c!="object"?p=this.options.overloadTranslationOptionHandler([l,c].concat(u)):p={...c},p.lng=p.lng||o.lng,p.lngs=p.lngs||o.lngs,p.ns=p.ns||o.ns,p.keyPrefix!==""&&(p.keyPrefix=p.keyPrefix||n||o.keyPrefix);const d=this.options.keySeparator||".";let _;return p.keyPrefix&&Array.isArray(l)?_=l.map(g=>(typeof g=="function"&&(g=Hu(g,{...this.options,...c})),`${p.keyPrefix}${d}${g}`)):(typeof l=="function"&&(l=Hu(l,{...this.options,...c})),_=p.keyPrefix?`${p.keyPrefix}${d}${l}`:l),this.t(_,p)};return ke(t)?o.lng=t:o.lngs=t,o.ns=i,o.keyPrefix=n,o}t(...t){var i;return(i=this.translator)==null?void 0:i.translate(...t)}exists(...t){var i;return(i=this.translator)==null?void 0:i.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,i={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=i.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,l=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const c=(u,p)=>{const d=this.services.backendConnector.state[`${u}|${p}`];return d===-1||d===0||d===2};if(i.precheck){const u=i.precheck(this,c);if(u!==void 0)return u}return!!(this.hasResourceBundle(n,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(n,t)&&(!o||c(l,t)))}loadNamespaces(t,i){const n=Co();return this.options.ns?(ke(t)&&(t=[t]),t.forEach(o=>{this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}),this.loadResources(o=>{n.resolve(),i&&i(o)}),n):(i&&i(),Promise.resolve())}loadLanguages(t,i){const n=Co();ke(t)&&(t=[t]);const o=this.options.preload||[],l=t.filter(c=>o.indexOf(c)<0&&this.services.languageUtils.isSupportedCode(c));return l.length?(this.options.preload=o.concat(l),this.loadResources(c=>{n.resolve(),i&&i(c)}),n):(i&&i(),Promise.resolve())}dir(t){var o,l;if(t||(t=this.resolvedLanguage||(((o=this.languages)==null?void 0:o.length)>0?this.languages[0]:this.language)),!t)return"rtl";try{const c=new Intl.Locale(t);if(c&&c.getTextInfo){const u=c.getTextInfo();if(u&&u.direction)return u.direction}}catch{}const i=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=((l=this.services)==null?void 0:l.languageUtils)||new Pg(Og());return t.toLowerCase().indexOf("-latn")>1?"ltr":i.indexOf(n.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},i){const n=new Ao(t,i);return n.createInstance=Ao.createInstance,n}cloneInstance(t={},i=ml){const n=t.forkResourceStore;n&&delete t.forkResourceStore;const o={...this.options,...t,isClone:!0},l=new Ao(o);if((t.debug!==void 0||t.prefix!==void 0)&&(l.logger=l.logger.clone(t)),["store","services","language"].forEach(u=>{l[u]=this[u]}),l.services={...this.services},l.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},n){const u=Object.keys(this.store.data).reduce((p,d)=>(p[d]={...this.store.data[d]},p[d]=Object.keys(p[d]).reduce((_,g)=>(_[g]={...p[d][g]},_),p[d]),p),{});l.store=new Eg(u,o),l.services.resourceStore=l.store}return t.interpolation&&(l.services.interpolator=new Mg(o)),l.translator=new jl(l.services,o),l.translator.on("*",(u,...p)=>{l.emit(u,...p)}),l.init(o,i),l.translator.options=o,l.translator.backendConnector.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ht=Ao.createInstance();Ht.createInstance;Ht.dir;Ht.init;Ht.loadResources;Ht.reloadResources;Ht.use;Ht.changeLanguage;Ht.getFixedT;Ht.t;Ht.exists;Ht.setDefaultNamespace;Ht.hasLoadedNamespace;Ht.loadNamespaces;Ht.loadLanguages;const Ex=(e,t,i,n)=>{var l,c,u,p;const o=[i,{code:t,...n||{}}];if((c=(l=e==null?void 0:e.services)==null?void 0:l.logger)!=null&&c.forward)return e.services.logger.forward(o,"warn","react-i18next::",!0);Ls(o[0])&&(o[0]=`react-i18next:: ${o[0]}`),(p=(u=e==null?void 0:e.services)==null?void 0:u.logger)!=null&&p.warn?e.services.logger.warn(...o):console!=null&&console.warn&&console.warn(...o)},Ig={},Iv=(e,t,i,n)=>{Ls(i)&&Ig[i]||(Ls(i)&&(Ig[i]=new Date),Ex(e,t,i,n))},Av=(e,t)=>()=>{if(e.isInitialized)t();else{const i=()=>{setTimeout(()=>{e.off("initialized",i)},0),t()};e.on("initialized",i)}},$u=(e,t,i)=>{e.loadNamespaces(t,Av(e,i))},Ag=(e,t,i,n)=>{if(Ls(i)&&(i=[i]),e.options.preload&&e.options.preload.indexOf(t)>-1)return $u(e,i,n);i.forEach(o=>{e.options.ns.indexOf(o)<0&&e.options.ns.push(o)}),e.loadLanguages(t,Av(e,n))},Rx=(e,t,i={})=>!t.languages||!t.languages.length?(Iv(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:i.lng,precheck:(n,o)=>{if(i.bindI18n&&i.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!o(n.isLanguageChangingTo,e))return!1}}),Ls=e=>typeof e=="string",Px=e=>typeof e=="object"&&e!==null,Lx=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Nx={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},Dx=e=>Nx[e],Mx=e=>e.replace(Lx,Dx);let Wu={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Mx,transDefaultProps:void 0};const Tx=(e={})=>{Wu={...Wu,...e}},Ox=()=>Wu;let jv;const Bx=e=>{jv=e},Ix=()=>jv,Ax={type:"3rdParty",init(e){Tx(e.options.react),Bx(e)}},jx=N.createContext();class Fx{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(i=>{this.usedNamespaces[i]||(this.usedNamespaces[i]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var ou={exports:{}},au={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function zx(){if(jg)return au;jg=1;var e=Vl();function t(g,S){return g===S&&(g!==0||1/g===1/S)||g!==g&&S!==S}var i=typeof Object.is=="function"?Object.is:t,n=e.useState,o=e.useEffect,l=e.useLayoutEffect,c=e.useDebugValue;function u(g,S){var w=S(),x=n({inst:{value:w,getSnapshot:S}}),C=x[0].inst,k=x[1];return l(function(){C.value=w,C.getSnapshot=S,p(C)&&k({inst:C})},[g,w,S]),o(function(){return p(C)&&k({inst:C}),g(function(){p(C)&&k({inst:C})})},[g]),c(w),w}function p(g){var S=g.getSnapshot;g=g.value;try{var w=S();return!i(g,w)}catch{return!0}}function d(g,S){return S()}var _=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:u;return au.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:_,au}var Fg;function Hx(){return Fg||(Fg=1,ou.exports=zx()),ou.exports}var $x=Hx();const Wx=(e,t)=>Ls(t)?t:Px(t)&&Ls(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,Ux={t:Wx,ready:!1},Kx=()=>()=>{},Ts=(e,t={})=>{var ye,ie,se;const{i18n:i}=t,{i18n:n,defaultNS:o}=N.useContext(jx)||{},l=i||n||Ix();l&&!l.reportNamespaces&&(l.reportNamespaces=new Fx),l||Iv(l,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const c=N.useMemo(()=>{var z;return{...Ox(),...(z=l==null?void 0:l.options)==null?void 0:z.react,...t}},[l,t]),{useSuspense:u,keyPrefix:p}=c,d=o||((ye=l==null?void 0:l.options)==null?void 0:ye.defaultNS),_=Ls(d)?[d]:d||["translation"],g=N.useMemo(()=>_,_);(se=(ie=l==null?void 0:l.reportNamespaces)==null?void 0:ie.addUsedNamespaces)==null||se.call(ie,g);const S=N.useRef(0),w=N.useCallback(z=>{if(!l)return Kx;const{bindI18n:j,bindI18nStore:U}=c,V=()=>{S.current+=1,z()};return j&&l.on(j,V),U&&l.store.on(U,V),()=>{j&&j.split(" ").forEach(K=>l.off(K,V)),U&&U.split(" ").forEach(K=>l.store.off(K,V))}},[l,c]),x=N.useRef(),C=N.useCallback(()=>{if(!l)return Ux;const z=!!(l.isInitialized||l.initializedStoreOnce)&&g.every(A=>Rx(A,l,c)),j=t.lng||l.language,U=S.current,V=x.current;if(V&&V.ready===z&&V.lng===j&&V.keyPrefix===p&&V.revision===U)return V;const te={t:l.getFixedT(j,c.nsMode==="fallback"?g:g[0],p),ready:z,lng:j,keyPrefix:p,revision:U};return x.current=te,te},[l,g,p,c,t.lng]),[k,L]=N.useState(0),{t:W,ready:O}=$x.useSyncExternalStore(w,C,C);N.useEffect(()=>{if(l&&!O&&!u){const z=()=>L(j=>j+1);t.lng?Ag(l,t.lng,g,z):$u(l,g,z)}},[l,t.lng,g,O,u,k]);const T=l||{},$=N.useRef(null),G=N.useRef(),le=z=>{const j=Object.getOwnPropertyDescriptors(z);j.__original&&delete j.__original;const U=Object.create(Object.getPrototypeOf(z),j);if(!Object.prototype.hasOwnProperty.call(U,"__original"))try{Object.defineProperty(U,"__original",{value:z,writable:!1,enumerable:!1,configurable:!1})}catch{}return U},ue=N.useMemo(()=>{const z=T,j=z==null?void 0:z.language;let U=z;z&&($.current&&$.current.__original===z?G.current!==j?(U=le(z),$.current=U,G.current=j):U=$.current:(U=le(z),$.current=U,G.current=j));const V=[W,U,O];return V.t=W,V.i18n=U,V.ready=O,V},[W,T,O,T.resolvedLanguage,T.language,T.languages]);if(l&&u&&!O)throw new Promise(z=>{const j=()=>z();t.lng?Ag(l,t.lng,g,j):$u(l,g,j)});return ue};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Fv=(...e)=>e.filter((t,i,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===i).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=N.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:o="",children:l,iconNode:c,...u},p)=>N.createElement("svg",{ref:p,...qx,width:t,height:t,stroke:e,strokeWidth:n?Number(i)*24/Number(t):i,className:Fv("lucide",o),...u},[...c.map(([d,_])=>N.createElement(d,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=(e,t)=>{const i=N.forwardRef(({className:n,...o},l)=>N.createElement(Qx,{ref:l,iconNode:t,className:Fv(`lucide-${Vx(e)}`,n),...o}));return i.displayName=`${e}`,i};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=De("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=De("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=De("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=De("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=De("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=De("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=De("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=De("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=De("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=De("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=De("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=De("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=De("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=De("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=De("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fl=De("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=De("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=De("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=De("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=De("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=De("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=De("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=De("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=De("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=De("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=De("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=De("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=De("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=De("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=De("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=De("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=De("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=De("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=De("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=De("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=De("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=De("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=De("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),nt="";async function mC(){const e=await fetch(`${nt}/api/runs`);if(!e.ok)throw new Error("Failed to fetch runs");return e.json()}async function gC(e){const t=await fetch(`${nt}/api/runs/${e}`);if(!t.ok)throw new Error("Failed to fetch run");return t.json()}async function _C(e,t){const i=typeof e=="string"?{goal:e,repoPath:t}:e,n=await fetch(`${nt}/api/runs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({goal:i.goal,repo_path:i.repoPath,project_id:i.projectId})});if(!n.ok)throw new Error("Failed to create run");return n.json()}async function vC(e){if(!(await fetch(`${nt}/api/runs/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete run")}async function yC(){const e=await fetch(`${nt}/api/projects`);if(!e.ok)throw new Error("Failed to fetch projects");return e.json()}async function SC(e){const t=await fetch(`${nt}/api/projects/${e}`);if(!t.ok)throw new Error("Failed to fetch project");return t.json()}async function wC(e){const t=await fetch(`${nt}/api/projects`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create project");return t.json()}async function xC(e){if(!(await fetch(`${nt}/api/projects/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete project")}async function CC(e,t){const i=new URL(`${nt}/api/logs/${e}`,window.location.origin),n=await fetch(i.toString());if(!n.ok)throw new Error("Failed to fetch logs");return n.json()}async function bC(e){const t=new URL(`${nt}/api/shortcuts`,window.location.origin),i=await fetch(t.toString());if(!i.ok)throw new Error("Failed to fetch shortcuts");return i.json()}async function kC(e){const t=await fetch(`${nt}/api/shortcuts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create shortcut");return t.json()}async function EC(e,t){const i=new URL(`${nt}/api/shortcuts/${e}/execute`,window.location.origin),n=await fetch(i.toString(),{method:"POST"});if(!n.ok)throw new Error("Failed to execute shortcut");return n.json()}async function RC(e){if(!(await fetch(`${nt}/api/shortcuts/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete shortcut")}async function PC(){const e=await fetch(`${nt}/api/usage`);if(!e.ok)throw new Error("Failed to fetch usage");return e.json()}async function LC(e){const t=await fetch(`${nt}/api/runs/${e}/dag`);if(t.status===404||t.status===202)return null;if(!t.ok)throw new Error("Failed to fetch DAG");return t.json()}async function Wv(){const e=await fetch(`${nt}/health`);if(!e.ok)throw new Error("Failed to fetch health");return e.json()}function NC(e,t,i){const n=new URL(`${nt}/api/events`,window.location.origin);e&&n.searchParams.set("run_id",e);const o=new EventSource(n.toString());return o.onmessage=l=>{try{const c=JSON.parse(l.data);c.type!=="connected"&&t(c)}catch(c){console.error("Failed to parse SSE message:",c)}},o.onerror=l=>{console.error("SSE error:",l),i==null||i(l)},()=>o.close()}async function Uv(){const e=await fetch(`${nt}/api/settings`);if(!e.ok)throw new Error("Failed to fetch settings");return e.json()}async function Kv(e){const t=await fetch(`${nt}/api/settings`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update settings");return t.json()}async function Vv(){const e=await fetch(`${nt}/api/copilot/status`);if(!e.ok)throw new Error("Failed to fetch copilot status");return e.json()}async function DC(){const e=await fetch(`${nt}/api/copilot/models`);if(!e.ok)throw new Error("Failed to fetch copilot models");return e.json()}function qv(e){var t,i,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(i=qv(e[t]))&&(n&&(n+=" "),n+=i)}else for(i in e)e[i]&&(n&&(n+=" "),n+=i);return n}function et(){for(var e,t,i=0,n="",o=arguments.length;i<o;i++)(e=arguments[i])&&(t=qv(e))&&(n&&(n+=" "),n+=t);return n}const MC=[{path:"/projects",labelKey:"nav.projects",icon:Hd},{path:"/shortcuts",labelKey:"nav.shortcuts",icon:$v},{path:"/shell",labelKey:"nav.shell",icon:$o},{path:"/settings",labelKey:"nav.settings",icon:dC}];function TC({children:e}){const{t}=Ts(),i=dr(),[n,o]=N.useState(!1),{data:l}=vi({queryKey:["health"],queryFn:Wv,refetchInterval:3e4}),{data:c}=vi({queryKey:["usage"],queryFn:PC,refetchInterval:6e4});return v.jsxs("div",{className:"min-h-screen bg-slate-50",children:[v.jsxs("header",{className:"lg:hidden fixed top-0 left-0 right-0 h-14 bg-white border-b border-slate-200 flex items-center px-4 z-50",children:[v.jsx("button",{onClick:()=>o(!n),className:"p-2 hover:bg-slate-100 rounded-lg",children:n?v.jsx(Hv,{size:20}):v.jsx(oC,{size:20})}),v.jsx("h1",{className:"ml-3 font-semibold text-slate-800",children:"Supervisor Agent"})]}),v.jsxs("aside",{className:et("fixed top-0 left-0 h-full w-64 bg-white border-r border-slate-200 z-40 transition-transform lg:translate-x-0",n?"translate-x-0":"-translate-x-full"),children:[v.jsxs("div",{className:"h-14 flex items-center px-4 border-b border-slate-200",children:[v.jsx(Yx,{className:"text-primary-600",size:24}),v.jsx("h1",{className:"ml-2 font-bold text-slate-800",children:"Supervisor"})]}),v.jsx("nav",{className:"p-4 space-y-1",children:MC.map(({path:u,labelKey:p,icon:d})=>v.jsxs(Rn,{to:u,onClick:()=>o(!1),className:et("flex items-center gap-3 px-3 py-2 rounded-lg transition-colors",i.pathname.startsWith(u)?"bg-primary-50 text-primary-700":"text-slate-600 hover:bg-slate-100"),children:[v.jsx(d,{size:18}),v.jsx("span",{children:t(p)})]},u))}),v.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-slate-200",children:v.jsxs("div",{className:"text-xs text-slate-500 space-y-1",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:et("w-2 h-2 rounded-full",(l==null?void 0:l.status)==="ok"?"bg-green-500":"bg-red-500")}),v.jsxs("span",{children:["Backend: ",(l==null?void 0:l.status)??"disconnected"]})]}),(c==null?void 0:c.usage)&&v.jsxs("div",{children:["Usage: ",c.usage.premium_requests.used,"/",c.usage.premium_requests.limit]}),v.jsxs("div",{className:"text-slate-400",children:["v",(l==null?void 0:l.version)??"?"]})]})})]}),v.jsx("main",{className:"lg:ml-64 pt-14 lg:pt-0 min-h-screen",children:v.jsx("div",{className:"6",children:e})}),n&&v.jsx("div",{className:"fixed inset-0 bg-black/20 z-30 lg:hidden",onClick:()=>o(!1)})]})}const OC="modulepreload",BC=function(e){return"/"+e},Wg={},IC=function(t,i,n){let o=Promise.resolve();if(i&&i.length>0){let c=function(d){return Promise.all(d.map(_=>Promise.resolve(_).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),p=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));o=c(i.map(d=>{if(d=BC(d),d in Wg)return;Wg[d]=!0;const _=d.endsWith(".css"),g=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const S=document.createElement("link");if(S.rel=_?"stylesheet":OC,_||(S.as="script"),S.crossOrigin="",S.href=d,p&&S.setAttribute("nonce",p),document.head.appendChild(S),_)return new Promise((w,x)=>{S.addEventListener("load",w),S.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${d}`)))})}))}function l(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return o.then(c=>{for(const u of c||[])u.status==="rejected"&&l(u.reason);return t().catch(l)})},Ud=typeof window<"u"&&"__TAURI__"in window;let hu=null;async function AC(){if(Ud&&!hu)try{hu=await IC(()=>import("./index-CAPIJpMW.js"),[])}catch{console.warn("Failed to load Tauri dialog plugin")}return hu}async function jC(){if(!Ud)return null;const e=await AC();if(!e)return null;try{return await e.open({directory:!0,multiple:!1,title:"Select Project Folder"})}catch(t){return console.error("Failed to open folder dialog:",t),null}}function FC({project:e,onDelete:t}){const{t:i}=Ts();return v.jsx(Rn,{to:`/projects/${e.project_id}`,className:"block bg-white rounded-xl border border-slate-200 p-5 hover:shadow-lg hover:border-primary-300 transition-all group",children:v.jsxs("div",{className:"flex items-start justify-between gap-3",children:[v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v.jsx(Hd,{size:20,className:"text-primary-500"}),v.jsx("h3",{className:"font-semibold text-slate-800 truncate text-lg",children:e.name})]}),e.description&&v.jsx("p",{className:"text-sm text-slate-500 line-clamp-2 mb-3",children:e.description}),v.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-400",children:[v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx(tC,{size:12}),v.jsx("span",{className:"truncate max-w-[200px]",title:e.repo_path,children:e.repo_path.split(/[/\\]/).pop()})]}),v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx(Zx,{size:12}),v.jsx("span",{children:new Date(e.created_at).toLocaleDateString()})]})]})]}),v.jsx("button",{onClick:n=>{n.preventDefault(),n.stopPropagation(),t()},className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",title:i("common.delete"),children:v.jsx(Wd,{size:16})})]})})}function zC(){const{t:e}=Ts(),t=Ms(),[i,n]=N.useState(!1),[o,l]=N.useState(""),[c,u]=N.useState(""),[p,d]=N.useState(""),{data:_,isLoading:g,error:S}=vi({queryKey:["projects"],queryFn:yC,refetchInterval:1e4}),w=Ps({mutationFn:({name:k,description:L,repo_path:W})=>wC({name:k,description:L,repo_path:W}),onSuccess:()=>{t.invalidateQueries({queryKey:["projects"]}),n(!1),l(""),u(""),d("")}}),x=Ps({mutationFn:xC,onSuccess:()=>{t.invalidateQueries({queryKey:["projects"]})}}),C=async()=>{const k=await jC();if(k&&(d(k),!o)){const L=k.split(/[/\\]/).pop()||"";l(L)}};return v.jsxs("div",{className:"mx-auto max-w-4xl",children:[v.jsxs("div",{className:"flex items-center justify-between mb-8",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:e("projects.title")}),v.jsx("p",{className:"text-slate-500 mt-1",children:e("projects.subtitle")})]}),v.jsxs("button",{onClick:()=>n(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-primary-600 text-white rounded-xl hover:bg-primary-700 transition-colors shadow-sm",children:[v.jsx($d,{size:18}),e("projects.newProject")]})]}),i&&v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md p-6",children:[v.jsx("h2",{className:"text-xl font-semibold mb-4",children:e("projects.newProject")}),v.jsxs("form",{onSubmit:k=>{k.preventDefault(),o.trim()&&p.trim()&&w.mutate({name:o.trim(),description:c.trim()||void 0,repo_path:p.trim()})},children:[v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:e("projects.name")}),v.jsx("input",{type:"text",value:o,onChange:k=>l(k.target.value),placeholder:e("projects.namePlaceholder"),className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500",autoFocus:!0,required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:e("projects.description")}),v.jsx("textarea",{value:c,onChange:k=>u(k.target.value),placeholder:e("projects.descriptionPlaceholder"),className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 resize-none",rows:2})]}),v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[v.jsx(Fl,{size:14,className:"inline mr-1.5"}),e("projects.repoPath")]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"text",value:p,onChange:k=>d(k.target.value),placeholder:e("projects.repoPathPlaceholder"),className:"flex-1 px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0}),Ud&&v.jsx("button",{type:"button",onClick:C,className:"px-4 py-3 bg-slate-100 text-slate-700 rounded-xl hover:bg-slate-200 transition-colors",title:e("projects.browse"),children:v.jsx(Fl,{size:18})})]})]})]}),v.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[v.jsx("button",{type:"button",onClick:()=>{n(!1),l(""),u(""),d("")},className:"px-4 py-2.5 text-slate-600 hover:bg-slate-100 rounded-xl transition-colors",children:e("common.cancel")}),v.jsxs("button",{type:"submit",disabled:w.isPending||!o.trim()||!p.trim(),className:"flex items-center gap-2 px-5 py-2.5 bg-primary-600 text-white rounded-xl hover:bg-primary-700 disabled:opacity-50 transition-colors",children:[w.isPending&&v.jsx(ni,{size:18,className:"animate-spin"}),e("common.create")]})]})]})]})}),g?v.jsx("div",{className:"flex items-center justify-center py-16",children:v.jsx(ni,{size:32,className:"animate-spin text-primary-600"})}):S?v.jsxs("div",{className:"text-center py-16 text-red-600",children:[e("common.error"),": ",S.message]}):(_==null?void 0:_.projects.length)===0?v.jsxs("div",{className:"text-center py-16",children:[v.jsx(Hd,{size:48,className:"mx-auto text-slate-300 mb-4"}),v.jsx("p",{className:"text-slate-500 mb-2",children:e("projects.noProjects")}),v.jsx("p",{className:"text-sm text-slate-400",children:e("projects.createFirst")})]}):v.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:_==null?void 0:_.projects.map(k=>v.jsx(FC,{project:k,onDelete:()=>x.mutate(k.project_id)},k.project_id))})]})}function HC({name:e,className:t}){const i=t||"w-4 h-4",n=e.toLowerCase();return n.includes("read")||n.includes("glob")||n.includes("grep")?v.jsx(kl,{className:i}):n.includes("write")||n.includes("edit")?v.jsx(aC,{className:i}):n.includes("bash")||n.includes("shell")?v.jsx($o,{className:i}):n.includes("search")?v.jsx(cC,{className:i}):v.jsx($v,{className:i})}function $C({message:e}){return v.jsxs("div",{className:"flex gap-3 px-4 py-4",children:[v.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center shrink-0",children:v.jsx(pC,{size:16,className:"text-blue-600"})}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"You"}),v.jsx("div",{className:"text-slate-800 whitespace-pre-wrap",children:e.content})]})]})}function WC({message:e}){const t=e.isThinking||e.type==="thinking",i=e.executor==="codex"?"text-green-600":"text-purple-600",n=e.executor==="codex"?"bg-green-100":"bg-purple-100",o=e.executor==="codex"?"Codex":"Claude";return v.jsxs("div",{className:"flex gap-3 px-4 py-4 bg-slate-50",children:[v.jsx("div",{className:et("w-8 h-8 rounded-full flex items-center justify-center shrink-0",n),children:t?v.jsx(Jx,{size:16,className:i}):v.jsx(Xx,{size:16,className:i})}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[v.jsx("span",{className:"text-xs text-slate-400",children:o}),t&&v.jsxs("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:[v.jsx(ni,{size:10,className:"animate-spin"}),"Thinking..."]})]}),v.jsx("div",{className:et("whitespace-pre-wrap",t?"text-slate-500 italic":"text-slate-800"),children:e.content||(t?"Processing...":"")})]})]})}function UC({message:e}){const[t,i]=N.useState(!1),n=e.toolName||"Unknown Tool",o=e.toolInput?JSON.stringify(e.toolInput,null,2):"",l=e.toolInput?Object.entries(e.toolInput).slice(0,2).map(([c,u])=>`${c}: ${typeof u=="string"?u.slice(0,30):JSON.stringify(u).slice(0,30)}`).join(", "):"";return v.jsx("div",{className:"px-4 py-2 ml-11",children:v.jsxs("div",{className:"border border-amber-200 bg-amber-50 rounded-lg overflow-hidden",children:[v.jsxs("button",{onClick:()=>i(!t),className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-amber-100 transition-colors",children:[v.jsx(HC,{name:n,className:"w-4 h-4 text-amber-600"}),v.jsx("span",{className:"font-medium text-sm text-amber-800",children:n}),v.jsx("span",{className:"text-xs text-amber-600 truncate flex-1 text-left font-mono",children:l&&l.length>50?l.slice(0,50)+"...":l}),t?v.jsx(zd,{size:14,className:"text-amber-600"}):v.jsx(zv,{size:14,className:"text-amber-600"})]}),t&&o&&v.jsx("div",{className:"px-3 pb-3 border-t border-amber-200",children:v.jsx("pre",{className:"mt-2 bg-white rounded p-2 text-xs font-mono text-slate-700 overflow-x-auto max-h-48 overflow-y-auto",children:o})})]})})}function KC({message:e}){const[t,i]=N.useState(!1),n=e.isError,o=e.content||e.toolOutput||"",l=o.length>80?o.slice(0,80)+"...":o;return v.jsx("div",{className:"px-4 py-2 ml-11",children:v.jsxs("div",{className:et("border rounded-lg overflow-hidden",n?"border-red-200 bg-red-50":"border-green-200 bg-green-50"),children:[v.jsxs("button",{onClick:()=>i(!t),className:et("w-full flex items-center gap-2 px-3 py-2 transition-colors",n?"hover:bg-red-100":"hover:bg-green-100"),children:[n?v.jsx(Xl,{size:14,className:"text-red-500 shrink-0"}):v.jsx(Gl,{size:14,className:"text-green-500 shrink-0"}),v.jsx("span",{className:et("font-medium text-sm",n?"text-red-700":"text-green-700"),children:n?"Error":"Result"}),v.jsx("span",{className:"text-xs text-slate-600 truncate flex-1 text-left",children:l}),o.length>80&&(t?v.jsx(zd,{size:14,className:"text-slate-400"}):v.jsx(zv,{size:14,className:"text-slate-400"}))]}),t&&v.jsx("div",{className:et("px-3 pb-3 border-t",n?"border-red-200":"border-green-200"),children:v.jsx("pre",{className:"mt-2 bg-white rounded p-2 text-xs font-mono text-slate-700 overflow-x-auto max-h-64 overflow-y-auto whitespace-pre-wrap",children:o})})]})})}function VC({message:e}){const t=e.executor==="codex"?"text-green-600":"text-purple-600",i=e.executor==="codex"?"bg-green-50":"bg-purple-50",n=e.executor==="codex"?"border-green-200":"border-purple-200";return v.jsxs("div",{className:"flex gap-3 px-4 py-4",children:[v.jsx("div",{className:et("w-8 h-8 rounded-full flex items-center justify-center shrink-0",e.executor==="codex"?"bg-green-100":"bg-purple-100"),children:v.jsx(Gl,{size:16,className:t})}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("div",{className:"text-xs text-slate-400 mb-2",children:"Task Completed"}),v.jsx("div",{className:et("rounded-lg border p-3",i,n),children:v.jsx("div",{className:"text-slate-800 whitespace-pre-wrap",children:e.content})})]})]})}function qC({message:e}){const t=e.content.includes("Codex")||e.content.includes(""),i=e.content.includes("Claude")||e.content.includes("");return v.jsx("div",{className:"px-4 py-2",children:v.jsxs("div",{className:et("flex items-center justify-center gap-2 text-xs",t?"text-green-600":i?"text-purple-600":"text-slate-400"),children:[v.jsx("div",{className:et("h-px flex-1",t?"bg-green-200":i?"bg-purple-200":"bg-slate-200")}),v.jsx(eC,{size:12}),v.jsx("span",{children:e.content}),v.jsx("div",{className:et("h-px flex-1",t?"bg-green-200":i?"bg-purple-200":"bg-slate-200")})]})})}function QC({message:e}){switch(e.type){case"user":return v.jsx($C,{message:e});case"assistant":case"thinking":return v.jsx(WC,{message:e});case"tool_use":return v.jsx(UC,{message:e});case"tool_result":return v.jsx(KC,{message:e});case"result":return v.jsx(VC,{message:e});case"system":return v.jsx(qC,{message:e});default:return null}}function YC({log:e}){const t={debug:"text-slate-400",info:"text-blue-600",warn:"text-amber-600",error:"text-red-600"},i={debug:"bg-slate-100",info:"bg-blue-50",warn:"bg-amber-50",error:"bg-red-50"};return v.jsxs("div",{className:et("px-3 py-2 border-b border-slate-100 font-mono text-xs",i[e.level]||"bg-white"),children:[v.jsxs("div",{className:"flex items-start gap-2",children:[v.jsx("span",{className:"text-slate-400 shrink-0",children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}),v.jsx("span",{className:et("font-semibold uppercase shrink-0 w-12",t[e.level]||"text-slate-500"),children:e.level}),v.jsxs("span",{className:"text-purple-600 shrink-0",children:["[",e.source,"]"]}),v.jsx("span",{className:"text-slate-700 break-all flex-1",children:e.message})]}),e.metadata&&Object.keys(e.metadata).length>0&&v.jsx("div",{className:"mt-1 ml-[120px] text-slate-500",children:v.jsx("pre",{className:"text-[10px] bg-white/50 rounded p-1 overflow-x-auto",children:JSON.stringify(e.metadata,null,2)})})]})}function GC({current:e,total:t}){const i=t>0?Math.round(e/t*100):0;return v.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[v.jsx("div",{className:"w-24 h-1 bg-slate-200 rounded-full overflow-hidden",children:v.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:`${i}%`}})}),v.jsxs("span",{children:[e,"/",t]})]})}const ln=e=>`supervisor_run_${e}`,cn=e=>`supervisor_goal_${e}`;function XC({projectId:e,repoPath:t}){const i=Ms(),[n,o]=N.useState("idle"),[l,c]=N.useState(null),[u,p]=N.useState(""),[d,_]=N.useState(null),[g,S]=N.useState([]),[w,x]=N.useState("chat"),[C,k]=N.useState(!0),[L,W]=N.useState("gpt-5.2"),[O,T]=N.useState(!1),[$,G]=N.useState([]),le=N.useRef(null),ue=N.useRef(null),ye=N.useRef(null),{data:ie}=vi({queryKey:["copilotStatus"],queryFn:Vv,refetchInterval:1e4}),{data:se}=vi({queryKey:["copilotModels"],queryFn:DC,enabled:(ie==null?void 0:ie.running)&&(ie==null?void 0:ie.healthy),staleTime:6e4}),{data:z}=vi({queryKey:["settings"],queryFn:Uv}),j=Ps({mutationFn:Kv,onSuccess:()=>{i.invalidateQueries({queryKey:["settings"]})}});N.useEffect(()=>{z!=null&&z.dag_model&&W(z.dag_model)},[z==null?void 0:z.dag_model]);const U=E=>{W(E),T(!1),j.mutate({dag_model:E})},V=((se==null?void 0:se.models)??[]).map(E=>E.id);N.useEffect(()=>{(async()=>{const M=localStorage.getItem(ln(e)),Y=localStorage.getItem(cn(e));if(!M){k(!1);return}try{const ce=await gC(M);if(ce.status==="running"||ce.status==="pending"){c(M),o("running"),Y&&G([{id:`user-restored-${Date.now()}`,type:"user",content:Y,timestamp:ce.created_at}]);const{logs:_e}=await CC(M);console.log(`[Restore] Loaded ${_e.length} historical logs`);const pe=Y?[{id:`user-restored-${Date.now()}`,type:"user",content:Y,timestamp:ce.created_at}]:[];_e.forEach(de=>{S(bt=>[...bt,de]);const ge=de.metadata,Ve=de.source==="claude"||de.source==="codex"?de.source:void 0;if(de.source==="supervisor")(de.message.includes("")||de.message.includes("")||de.message.includes(""))&&pe.push({id:`sys-${de.timestamp}-${Math.random().toString(36).slice(2,6)}`,type:"system",content:de.message,timestamp:de.timestamp});else if(de.source==="claude"||de.source==="codex"){const bt=ge==null?void 0:ge.type;if(bt==="assistant"){const Ot=(ge==null?void 0:ge.full_content)||de.message;Ot&&Ot.length>5&&pe.push({id:`asst-${de.timestamp}-${Math.random().toString(36).slice(2,6)}`,type:"assistant",content:Ot,timestamp:de.timestamp,executor:Ve})}else bt==="tool_use"?pe.push({id:`tool-${(ge==null?void 0:ge.tool_use_id)||de.timestamp}`,type:"tool_use",content:de.message,timestamp:de.timestamp,toolName:ge==null?void 0:ge.tool_name,toolInput:ge==null?void 0:ge.tool_input,executor:Ve}):bt==="tool_result"?pe.push({id:`result-${(ge==null?void 0:ge.tool_use_id)||de.timestamp}`,type:"tool_result",content:(ge==null?void 0:ge.full_content)||de.message,timestamp:de.timestamp,isError:ge==null?void 0:ge.is_error,executor:Ve}):bt==="result"&&pe.push({id:`final-${de.timestamp}-${Math.random().toString(36).slice(2,6)}`,type:"result",content:(ge==null?void 0:ge.full_result)||de.message,timestamp:de.timestamp,executor:Ve})}}),G(pe);const Ee=await LC(M).catch(()=>null);Ee&&_(Ee)}else(ce.status==="completed"||ce.status==="failed")&&(localStorage.removeItem(ln(e)),localStorage.removeItem(cn(e)))}catch(ce){console.error("Failed to restore run:",ce),localStorage.removeItem(ln(e)),localStorage.removeItem(cn(e))}k(!1)})()},[e]),N.useEffect(()=>{var E,M;w==="chat"?(E=le.current)==null||E.scrollIntoView({behavior:"smooth"}):(M=ue.current)==null||M.scrollIntoView({behavior:"smooth"})},[$,g,w]);const K=N.useCallback(E=>{G(M=>M.some(Y=>Y.id===E.id)?M:[...M,E])},[]),te=N.useCallback((E,M)=>{o(E?"completed":"failed"),localStorage.removeItem(ln(e)),localStorage.removeItem(cn(e)),K({id:`complete-${Date.now()}`,type:"system",content:M,timestamp:new Date().toISOString()})},[e,K]);N.useEffect(()=>l?NC(l,M=>{S(_e=>[..._e.slice(-499),M]);const Y=M.metadata,ce=M.source==="claude"||M.source==="codex"?M.source:void 0;if(console.log("[SSE]",M.source,Y==null?void 0:Y.type,M.message.slice(0,80)),M.source==="supervisor"){if(M.message.includes(" Run completed")){te(!0,M.message);return}if(M.message.includes(" Run failed")||M.message.includes("Run failed")){te(!1,M.message);return}if(M.message.includes("Task started:")||M.message.includes("")){const _e=M.message.replace(/\s*Task started:\s*/i,"").trim();K({id:`sys-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,type:"system",content:`Starting: ${_e}`,timestamp:M.timestamp})}else if(M.message.includes("Task completed:")||M.message.includes("")){const _e=M.message.replace(/\s*Task completed:\s*/i,"").trim();K({id:`sys-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,type:"system",content:`Completed: ${_e}`,timestamp:M.timestamp})}else(M.message.includes("Task failed:")||M.message.includes(""))&&K({id:`sys-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,type:"system",content:M.message,timestamp:M.timestamp})}if(M.source==="claude"||M.source==="codex"){const _e=Y==null?void 0:Y.type;if(_e==="assistant"){const pe=(Y==null?void 0:Y.full_content)||M.message;pe&&pe.length>5&&K({id:`asst-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,type:"assistant",content:pe,timestamp:M.timestamp,executor:ce})}else if(_e==="tool_use"){const pe=Y==null?void 0:Y.tool_name,Ee=Y==null?void 0:Y.tool_input,de=Y==null?void 0:Y.tool_use_id;K({id:`tool-${de||Date.now()}`,type:"tool_use",content:M.message,timestamp:M.timestamp,toolName:pe,toolInput:Ee,executor:ce})}else if(_e==="tool_result"){const pe=Y==null?void 0:Y.tool_use_id,Ee=Y==null?void 0:Y.is_error,de=(Y==null?void 0:Y.full_content)||M.message;K({id:`result-${pe||Date.now()}`,type:"tool_result",content:de,timestamp:M.timestamp,isError:Ee,executor:ce})}else if(_e==="result"){const pe=(Y==null?void 0:Y.full_result)||M.message;K({id:`final-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,type:"result",content:pe,timestamp:M.timestamp,executor:ce})}}},M=>console.error("SSE error:",M)):void 0,[l,K,te]);const A=async()=>{const E=u.trim();if(E&&(p(""),K({id:`user-${Date.now()}`,type:"user",content:E,timestamp:new Date().toISOString()}),n!=="running")){o("running"),S([]),G(M=>M.filter(Y=>Y.type==="user")),_(null);try{const M=await _C({goal:E,repoPath:t,projectId:e});c(M.run_id),localStorage.setItem(ln(e),M.run_id),localStorage.setItem(cn(e),E),K({id:`start-${Date.now()}`,type:"system",content:"Starting execution...",timestamp:new Date().toISOString()})}catch(M){o("failed"),K({id:`error-${Date.now()}`,type:"system",content:`Error: ${M instanceof Error?M.message:"Failed to start"}`,timestamp:new Date().toISOString()})}}},re=E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),A())},Z=()=>{o("idle"),c(null),localStorage.removeItem(ln(e)),localStorage.removeItem(cn(e)),K({id:`stop-${Date.now()}`,type:"system",content:"Stopped by user",timestamp:new Date().toISOString()})};return C?v.jsxs("div",{className:"flex flex-col h-[calc(100vh-64px)] items-center justify-center bg-white",children:[v.jsx(ni,{className:"animate-spin text-blue-500 mb-4",size:32}),v.jsx("p",{className:"text-sm text-slate-500",children:"Restoring session..."})]}):v.jsxs("div",{className:"flex flex-col h-[calc(100vh-64px)]",children:[v.jsxs("div",{className:"px-4 py-2 border-b border-slate-100 bg-white flex items-center justify-between",children:[v.jsx("div",{className:"flex-1",children:n==="running"&&(d==null?void 0:d.progress)&&v.jsx(GC,{current:d.progress.completed,total:d.progress.total})}),v.jsxs("div",{className:"flex bg-slate-100 rounded-lg p-0.5",children:[v.jsxs("button",{onClick:()=>x("chat"),className:et("flex items-center gap-1.5 px-3 py-1 rounded-md text-xs font-medium transition-colors",w==="chat"?"bg-white text-slate-800 shadow-sm":"text-slate-500 hover:text-slate-700"),children:[v.jsx(Hg,{size:12}),"Chat",$.length>0&&v.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-blue-100 text-blue-600 rounded-full text-[10px]",children:$.length})]}),v.jsxs("button",{onClick:()=>x("logs"),className:et("flex items-center gap-1.5 px-3 py-1 rounded-md text-xs font-medium transition-colors",w==="logs"?"bg-white text-slate-800 shadow-sm":"text-slate-500 hover:text-slate-700"),children:[v.jsx(nC,{size:12}),"Raw Logs",g.length>0&&v.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-slate-200 text-slate-600 rounded-full text-[10px]",children:g.length})]})]})]}),w==="chat"&&v.jsxs("div",{className:"flex-1 overflow-y-auto bg-white",children:[$.length===0&&v.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[v.jsx(Hg,{size:40,className:"mb-4 opacity-30"}),v.jsx("p",{className:"text-sm",children:"Enter a goal to start"})]}),v.jsx("div",{className:"divide-y divide-slate-100",children:$.map(E=>v.jsx(QC,{message:E},E.id))}),n==="running"&&v.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 text-slate-500 bg-slate-50",children:[v.jsx(ni,{size:14,className:"animate-spin"}),v.jsx("span",{className:"text-sm",children:"Processing..."})]}),v.jsx("div",{ref:le})]}),w==="logs"&&v.jsx("div",{className:"flex-1 overflow-y-auto bg-slate-900",children:g.length===0?v.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[v.jsx($o,{size:40,className:"mb-4 opacity-30"}),v.jsx("p",{className:"text-sm",children:"No logs yet. Start a task to see all messages."})]}):v.jsxs("div",{className:"divide-y divide-slate-800",children:[g.map((E,M)=>v.jsx(YC,{log:E},`${E.timestamp}-${M}`)),v.jsx("div",{ref:ue})]})}),v.jsx("div",{className:"border-t border-slate-200 bg-white p-4",children:v.jsxs("div",{className:"max-w-3xl mx-auto",children:[v.jsxs("div",{className:"relative mb-2",children:[v.jsxs("button",{onClick:()=>T(!O),disabled:n==="running",className:"flex items-center gap-1.5 px-2 py-1 text-xs text-slate-600 hover:bg-slate-100 rounded-md transition-colors disabled:opacity-50",children:[v.jsx("span",{className:"font-medium",children:L}),v.jsx(zd,{size:12})]}),O&&V.length>0&&v.jsx("div",{className:"absolute bottom-full left-0 mb-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 min-w-[180px] max-h-[300px] overflow-y-auto z-50",children:V.map(E=>v.jsx("button",{onClick:()=>U(E),className:et("w-full text-left px-3 py-1.5 text-xs hover:bg-slate-50 transition-colors",E===L?"bg-blue-50 text-blue-600":"text-slate-700"),children:E},E))})]}),v.jsxs("div",{className:"relative",children:[v.jsx("textarea",{ref:ye,value:u,onChange:E=>p(E.target.value),onKeyDown:re,placeholder:"Ask me to build, fix, or explain something...",className:"w-full resize-none border border-slate-200 rounded-xl px-4 py-3 pr-24 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent min-h-[52px] max-h-[200px]",rows:1,disabled:n==="running"}),v.jsx("div",{className:"absolute right-2 bottom-2 flex items-center gap-2",children:n==="running"?v.jsx("button",{onClick:Z,className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",title:"Stop",children:v.jsx(fC,{size:16})}):v.jsx("button",{onClick:A,disabled:!u.trim(),className:et("p-2 rounded-lg transition-colors",u.trim()?"bg-blue-500 text-white hover:bg-blue-600":"bg-slate-100 text-slate-400 cursor-not-allowed"),children:v.jsx(hC,{size:16})})})]})]})})]})}function JC(){const e=Ms(),{data:t,isLoading:i}=vi({queryKey:["runs"],queryFn:mC,staleTime:3e4}),n=Ps({mutationFn:vC,onSuccess:()=>{e.invalidateQueries({queryKey:["runs"]})}});if(i)return v.jsx("div",{className:"flex items-center justify-center py-12",children:v.jsx(ni,{className:"animate-spin text-slate-400"})});const o=(t==null?void 0:t.runs)||[];return o.length===0?v.jsxs("div",{className:"text-center py-16 text-slate-400",children:[v.jsx(zg,{size:40,className:"mx-auto mb-4 opacity-30"}),v.jsx("p",{className:"text-sm",children:"No history yet"})]}):v.jsx("div",{className:"p-6 space-y-3 max-w-3xl mx-auto",children:o.map(l=>v.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4 group hover:border-slate-300 transition-colors",children:v.jsxs("div",{className:"flex items-start justify-between gap-4",children:[v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.status==="completed"&&v.jsx(Gl,{size:16,className:"text-green-500"}),l.status==="failed"&&v.jsx(Xl,{size:16,className:"text-red-500"}),l.status==="running"&&v.jsx(ni,{size:16,className:"text-blue-500 animate-spin"}),l.status==="pending"&&v.jsx(zg,{size:16,className:"text-yellow-500"}),v.jsx("span",{className:"text-xs text-slate-400",children:new Date(l.created_at).toLocaleString()})]}),v.jsx("p",{className:"text-sm text-slate-700 line-clamp-2",children:l.user_goal})]}),v.jsx("button",{onClick:()=>n.mutate(l.run_id),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:v.jsx(Wd,{size:16})})]})},l.run_id))})}function ZC(){const{projectId:e}=d1(),[t,i]=N.useState("chat"),{data:n,isLoading:o,error:l}=vi({queryKey:["project",e],queryFn:()=>SC(e),enabled:!!e});return o?v.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:v.jsx(ni,{className:"animate-spin text-blue-500",size:32})}):l||!n?v.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-50",children:[v.jsx(Xl,{className:"text-red-400 mb-4",size:48}),v.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Project not found"}),v.jsx(Rn,{to:"/",className:"text-blue-500 hover:underline text-sm",children:"Go back"})]}):v.jsxs("div",{className:"h-screen flex flex-col bg-slate-50",children:[v.jsx("header",{className:"bg-white border-b border-slate-200 shrink-0",children:v.jsxs("div",{className:"max-w-5xl mx-auto px-6 h-16 flex items-center gap-4",children:[v.jsx(Rn,{to:"/",className:"p-2 hover:bg-slate-100 rounded-lg transition-colors -ml-2",children:v.jsx(Gx,{size:20,className:"text-slate-500"})}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("h1",{className:"font-semibold text-slate-800 truncate",children:n.name}),v.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-slate-400",children:[v.jsx(Fl,{size:12}),v.jsx("span",{className:"font-mono truncate",children:n.repo_path})]})]}),v.jsxs("div",{className:"flex bg-slate-100 rounded-lg p-1",children:[v.jsx("button",{onClick:()=>i("chat"),className:et("px-4 py-1.5 rounded-md text-sm font-medium transition-colors",t==="chat"?"bg-white text-slate-800 shadow-sm":"text-slate-500 hover:text-slate-700"),children:"Chat"}),v.jsx("button",{onClick:()=>i("history"),className:et("px-4 py-1.5 rounded-md text-sm font-medium transition-colors",t==="history"?"bg-white text-slate-800 shadow-sm":"text-slate-500 hover:text-slate-700"),children:"History"})]})]})}),v.jsx("main",{className:"flex-1 overflow-hidden",children:t==="chat"?v.jsx(XC,{projectId:e,repoPath:n.repo_path}):v.jsx(JC,{})})]})}function eb({shortcut:e,onExecute:t,onDelete:i,executing:n,result:o}){const{t:l}=Ts();return v.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[v.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("h3",{className:"font-medium text-slate-800",children:e.name}),e.description&&v.jsx("p",{className:"text-sm text-slate-500 mt-1",children:e.description})]}),v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx("button",{onClick:t,disabled:n,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors disabled:opacity-50",title:l("common.execute"),children:n?v.jsx(ni,{size:16,className:"animate-spin"}):v.jsx(lC,{size:16})}),v.jsx("button",{onClick:i,className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:l("common.delete"),children:v.jsx(Wd,{size:16})})]})]}),v.jsx("div",{className:"bg-slate-50 rounded px-3 py-2 font-mono text-sm text-slate-700",children:e.command}),e.category&&v.jsx("div",{className:"mt-2",children:v.jsx("span",{className:"inline-block px-2 py-0.5 bg-slate-100 text-slate-600 text-xs rounded",children:e.category})}),o&&v.jsxs("div",{className:"mt-3 border-t border-slate-200 pt-3",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.exitCode===0?v.jsx(Gl,{size:14,className:"text-green-500"}):v.jsx(Xl,{size:14,className:"text-red-500"}),v.jsxs("span",{className:"text-xs text-slate-500",children:[l("shortcuts.exitCode"),": ",o.exitCode," (",o.durationMs,"ms)"]})]}),o.stdout&&v.jsx("pre",{className:"text-xs bg-slate-100 p-2 rounded overflow-x-auto max-h-32",children:o.stdout.slice(0,500)}),o.stderr&&v.jsx("pre",{className:"text-xs bg-red-50 text-red-700 p-2 rounded overflow-x-auto max-h-32 mt-2",children:o.stderr.slice(0,500)})]})]})}function tb(){const{t:e}=Ts(),t=Ms(),[i,n]=N.useState(!1),[o,l]=N.useState(null),[c,u]=N.useState({}),[p,d]=N.useState({name:"",command:"",description:"",category:""}),{data:_,isLoading:g}=vi({queryKey:["shortcuts"],queryFn:()=>bC()}),S=Ps({mutationFn:kC,onSuccess:()=>{t.invalidateQueries({queryKey:["shortcuts"]}),n(!1),d({name:"",command:"",description:"",category:""})}}),w=Ps({mutationFn:RC,onSuccess:()=>{t.invalidateQueries({queryKey:["shortcuts"]})}}),x=async C=>{l(C.id);try{const{result:k}=await EC(C.id);u(L=>({...L,[C.id]:k}))}catch(k){console.error("Execute error:",k)}finally{l(null)}};return v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-6",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:e("shortcuts.title")}),v.jsx("p",{className:"text-slate-500",children:e("shortcuts.subtitle")})]}),v.jsxs("button",{onClick:()=>n(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[v.jsx($d,{size:18}),e("shortcuts.newShortcut")]})]}),i&&v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg p-6",children:[v.jsx("h2",{className:"text-xl font-semibold mb-4",children:e("shortcuts.createShortcut")}),v.jsxs("form",{onSubmit:C=>{C.preventDefault(),S.mutate(p)},children:[v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:e("shortcuts.name")}),v.jsx("input",{type:"text",value:p.name,onChange:C=>d({...p,name:C.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:e("shortcuts.command")}),v.jsx("input",{type:"text",value:p.command,onChange:C=>d({...p,command:C.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg font-mono focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:e("shortcuts.descriptionOptional")}),v.jsx("input",{type:"text",value:p.description,onChange:C=>d({...p,description:C.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:e("shortcuts.categoryOptional")}),v.jsx("input",{type:"text",value:p.category,onChange:C=>d({...p,category:C.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:e("shortcuts.categoryPlaceholder")})]})]}),v.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[v.jsx("button",{type:"button",onClick:()=>n(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:e("common.cancel")}),v.jsxs("button",{type:"submit",disabled:S.isPending,className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 transition-colors",children:[S.isPending&&v.jsx(ni,{size:18,className:"animate-spin"}),e("common.create")]})]})]})]})}),g?v.jsx("div",{className:"flex items-center justify-center py-12",children:v.jsx(ni,{size:32,className:"animate-spin text-primary-600"})}):(_==null?void 0:_.shortcuts.length)===0?v.jsx("div",{className:"text-center py-12 text-slate-500",children:e("shortcuts.noShortcuts")}):v.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:_==null?void 0:_.shortcuts.map(C=>v.jsx(eb,{shortcut:C,onExecute:()=>x(C),onDelete:()=>w.mutate(C.id),executing:o===C.id,result:c[C.id]},C.id))})]})}/**
 * Copyright (c) 2014-2024 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * @license MIT
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 */var Qv=Object.defineProperty,ib=Object.getOwnPropertyDescriptor,rb=(e,t)=>{for(var i in t)Qv(e,i,{get:t[i],enumerable:!0})},tt=(e,t,i,n)=>{for(var o=n>1?void 0:n?ib(t,i):t,l=e.length-1,c;l>=0;l--)(c=e[l])&&(o=(n?c(t,i,o):c(o))||o);return n&&o&&Qv(t,i,o),o},oe=(e,t)=>(i,n)=>t(i,n,e),Ug="Terminal input",Uu={get:()=>Ug,set:e=>Ug=e},Kg="Too much output to announce, navigate to rows manually to read",Ku={get:()=>Kg,set:e=>Kg=e};function sb(e){return e.replace(/\r?\n/g,"\r")}function nb(e,t){return t?"\x1B[200~"+e+"\x1B[201~":e}function ob(e,t){e.clipboardData&&e.clipboardData.setData("text/plain",t.selectionText),e.preventDefault()}function ab(e,t,i,n){if(e.stopPropagation(),e.clipboardData){let o=e.clipboardData.getData("text/plain");Yv(o,t,i,n)}}function Yv(e,t,i,n){e=sb(e),e=nb(e,i.decPrivateModes.bracketedPasteMode&&n.rawOptions.ignoreBracketedPasteMode!==!0),i.triggerDataEvent(e,!0),t.value=""}function Gv(e,t,i){let n=i.getBoundingClientRect(),o=e.clientX-n.left-10,l=e.clientY-n.top-10;t.style.width="20px",t.style.height="20px",t.style.left=`${o}px`,t.style.top=`${l}px`,t.style.zIndex="1000",t.focus()}function Vg(e,t,i,n,o){Gv(e,t,i),o&&n.rightClickSelect(e),t.value=n.selectionText,t.select()}function jr(e){return e>65535?(e-=65536,String.fromCharCode((e>>10)+55296)+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)}function Jl(e,t=0,i=e.length){let n="";for(let o=t;o<i;++o){let l=e[o];l>65535?(l-=65536,n+=String.fromCharCode((l>>10)+55296)+String.fromCharCode(l%1024+56320)):n+=String.fromCharCode(l)}return n}var lb=class{constructor(){this._interim=0}clear(){this._interim=0}decode(e,t){let i=e.length;if(!i)return 0;let n=0,o=0;if(this._interim){let l=e.charCodeAt(o++);56320<=l&&l<=57343?t[n++]=(this._interim-55296)*1024+l-56320+65536:(t[n++]=this._interim,t[n++]=l),this._interim=0}for(let l=o;l<i;++l){let c=e.charCodeAt(l);if(55296<=c&&c<=56319){if(++l>=i)return this._interim=c,n;let u=e.charCodeAt(l);56320<=u&&u<=57343?t[n++]=(c-55296)*1024+u-56320+65536:(t[n++]=c,t[n++]=u);continue}c!==65279&&(t[n++]=c)}return n}},cb=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(e,t){let i=e.length;if(!i)return 0;let n=0,o,l,c,u,p=0,d=0;if(this.interim[0]){let S=!1,w=this.interim[0];w&=(w&224)===192?31:(w&240)===224?15:7;let x=0,C;for(;(C=this.interim[++x]&63)&&x<4;)w<<=6,w|=C;let k=(this.interim[0]&224)===192?2:(this.interim[0]&240)===224?3:4,L=k-x;for(;d<L;){if(d>=i)return 0;if(C=e[d++],(C&192)!==128){d--,S=!0;break}else this.interim[x++]=C,w<<=6,w|=C&63}S||(k===2?w<128?d--:t[n++]=w:k===3?w<2048||w>=55296&&w<=57343||w===65279||(t[n++]=w):w<65536||w>1114111||(t[n++]=w)),this.interim.fill(0)}let _=i-4,g=d;for(;g<i;){for(;g<_&&!((o=e[g])&128)&&!((l=e[g+1])&128)&&!((c=e[g+2])&128)&&!((u=e[g+3])&128);)t[n++]=o,t[n++]=l,t[n++]=c,t[n++]=u,g+=4;if(o=e[g++],o<128)t[n++]=o;else if((o&224)===192){if(g>=i)return this.interim[0]=o,n;if(l=e[g++],(l&192)!==128){g--;continue}if(p=(o&31)<<6|l&63,p<128){g--;continue}t[n++]=p}else if((o&240)===224){if(g>=i)return this.interim[0]=o,n;if(l=e[g++],(l&192)!==128){g--;continue}if(g>=i)return this.interim[0]=o,this.interim[1]=l,n;if(c=e[g++],(c&192)!==128){g--;continue}if(p=(o&15)<<12|(l&63)<<6|c&63,p<2048||p>=55296&&p<=57343||p===65279)continue;t[n++]=p}else if((o&248)===240){if(g>=i)return this.interim[0]=o,n;if(l=e[g++],(l&192)!==128){g--;continue}if(g>=i)return this.interim[0]=o,this.interim[1]=l,n;if(c=e[g++],(c&192)!==128){g--;continue}if(g>=i)return this.interim[0]=o,this.interim[1]=l,this.interim[2]=c,n;if(u=e[g++],(u&192)!==128){g--;continue}if(p=(o&7)<<18|(l&63)<<12|(c&63)<<6|u&63,p<65536||p>1114111)continue;t[n++]=p}}return n}},Xv="",Qr=" ",Zo=class Jv{constructor(){this.fg=0,this.bg=0,this.extended=new zl}static toColorRGB(t){return[t>>>16&255,t>>>8&255,t&255]}static fromColorRGB(t){return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255}clone(){let t=new Jv;return t.fg=this.fg,t.bg=this.bg,t.extended=this.extended.clone(),t}isInverse(){return this.fg&67108864}isBold(){return this.fg&134217728}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:this.fg&268435456}isBlink(){return this.fg&536870912}isInvisible(){return this.fg&1073741824}isItalic(){return this.bg&67108864}isDim(){return this.bg&134217728}isStrikethrough(){return this.fg&2147483648}isProtected(){return this.bg&536870912}isOverline(){return this.bg&1073741824}getFgColorMode(){return this.fg&50331648}getBgColorMode(){return this.bg&50331648}isFgRGB(){return(this.fg&50331648)===50331648}isBgRGB(){return(this.bg&50331648)===50331648}isFgPalette(){return(this.fg&50331648)===16777216||(this.fg&50331648)===33554432}isBgPalette(){return(this.bg&50331648)===16777216||(this.bg&50331648)===33554432}isFgDefault(){return(this.fg&50331648)===0}isBgDefault(){return(this.bg&50331648)===0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(this.fg&50331648){case 16777216:case 33554432:return this.fg&255;case 50331648:return this.fg&16777215;default:return-1}}getBgColor(){switch(this.bg&50331648){case 16777216:case 33554432:return this.bg&255;case 50331648:return this.bg&16777215;default:return-1}}hasExtendedAttrs(){return this.bg&268435456}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(this.bg&268435456&&~this.extended.underlineColor)switch(this.extended.underlineColor&50331648){case 16777216:case 33554432:return this.extended.underlineColor&255;case 50331648:return this.extended.underlineColor&16777215;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return this.bg&268435456&&~this.extended.underlineColor?this.extended.underlineColor&50331648:this.getFgColorMode()}isUnderlineColorRGB(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===50331648:this.isFgRGB()}isUnderlineColorPalette(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===16777216||(this.extended.underlineColor&50331648)===33554432:this.isFgPalette()}isUnderlineColorDefault(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===0:this.isFgDefault()}getUnderlineStyle(){return this.fg&268435456?this.bg&268435456?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}},zl=class Zv{constructor(t=0,i=0){this._ext=0,this._urlId=0,this._ext=t,this._urlId=i}get ext(){return this._urlId?this._ext&-469762049|this.underlineStyle<<26:this._ext}set ext(t){this._ext=t}get underlineStyle(){return this._urlId?5:(this._ext&469762048)>>26}set underlineStyle(t){this._ext&=-469762049,this._ext|=t<<26&469762048}get underlineColor(){return this._ext&67108863}set underlineColor(t){this._ext&=-67108864,this._ext|=t&67108863}get urlId(){return this._urlId}set urlId(t){this._urlId=t}get underlineVariantOffset(){let t=(this._ext&3758096384)>>29;return t<0?t^4294967288:t}set underlineVariantOffset(t){this._ext&=536870911,this._ext|=t<<29&3758096384}clone(){return new Zv(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}},yi=class e0 extends Zo{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new zl,this.combinedData=""}static fromCharData(t){let i=new e0;return i.setFromCharData(t),i}isCombined(){return this.content&2097152}getWidth(){return this.content>>22}getChars(){return this.content&2097152?this.combinedData:this.content&2097151?jr(this.content&2097151):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):this.content&2097151}setFromCharData(t){this.fg=t[0],this.bg=0;let i=!1;if(t[1].length>2)i=!0;else if(t[1].length===2){let n=t[1].charCodeAt(0);if(55296<=n&&n<=56319){let o=t[1].charCodeAt(1);56320<=o&&o<=57343?this.content=(n-55296)*1024+o-56320+65536|t[2]<<22:i=!0}else i=!0}else this.content=t[1].charCodeAt(0)|t[2]<<22;i&&(this.combinedData=t[1],this.content=2097152|t[2]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},qg="di$target",Vu="di$dependencies",uu=new Map;function hb(e){return e[Vu]||[]}function Ct(e){if(uu.has(e))return uu.get(e);let t=function(i,n,o){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");ub(t,i,o)};return t._id=e,uu.set(e,t),t}function ub(e,t,i){t[qg]===t?t[Vu].push({id:e,index:i}):(t[Vu]=[{id:e,index:i}],t[qg]=t)}var $t=Ct("BufferService"),t0=Ct("CoreMouseService"),Os=Ct("CoreService"),db=Ct("CharsetService"),Kd=Ct("InstantiationService"),i0=Ct("LogService"),Wt=Ct("OptionsService"),r0=Ct("OscLinkService"),fb=Ct("UnicodeService"),ea=Ct("DecorationService"),qu=class{constructor(e,t,i){this._bufferService=e,this._optionsService=t,this._oscLinkService=i}provideLinks(e,t){var _;let i=this._bufferService.buffer.lines.get(e-1);if(!i){t(void 0);return}let n=[],o=this._optionsService.rawOptions.linkHandler,l=new yi,c=i.getTrimmedLength(),u=-1,p=-1,d=!1;for(let g=0;g<c;g++)if(!(p===-1&&!i.hasContent(g))){if(i.loadCell(g,l),l.hasExtendedAttrs()&&l.extended.urlId)if(p===-1){p=g,u=l.extended.urlId;continue}else d=l.extended.urlId!==u;else p!==-1&&(d=!0);if(d||p!==-1&&g===c-1){let S=(_=this._oscLinkService.getLinkData(u))==null?void 0:_.uri;if(S){let w={start:{x:p+1,y:e},end:{x:g+(!d&&g===c-1?1:0),y:e}},x=!1;if(!(o!=null&&o.allowNonHttpProtocols))try{let C=new URL(S);["http:","https:"].includes(C.protocol)||(x=!0)}catch{x=!0}x||n.push({text:S,range:w,activate:(C,k)=>o?o.activate(C,k,w):pb(C,k),hover:(C,k)=>{var L;return(L=o==null?void 0:o.hover)==null?void 0:L.call(o,C,k,w)},leave:(C,k)=>{var L;return(L=o==null?void 0:o.leave)==null?void 0:L.call(o,C,k,w)}})}d=!1,l.hasExtendedAttrs()&&l.extended.urlId?(p=g,u=l.extended.urlId):(p=-1,u=-1)}}t(n)}};qu=tt([oe(0,$t),oe(1,Wt),oe(2,r0)],qu);function pb(e,t){if(confirm(`Do you want to navigate to ${t}?

WARNING: This link could potentially be dangerous`)){let i=window.open();if(i){try{i.opener=null}catch{}i.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}}var Zl=Ct("CharSizeService"),fr=Ct("CoreBrowserService"),Vd=Ct("MouseService"),pr=Ct("RenderService"),mb=Ct("SelectionService"),s0=Ct("CharacterJoinerService"),Tn=Ct("ThemeService"),n0=Ct("LinkProviderService"),gb=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?Qg.isErrorNoTelemetry(e)?new Qg(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},_b=new gb;function El(e){vb(e)||_b.onUnexpectedError(e)}var Qu="Canceled";function vb(e){return e instanceof yb?!0:e instanceof Error&&e.name===Qu&&e.message===Qu}var yb=class extends Error{constructor(){super(Qu),this.name=this.message}};function Sb(e){return new Error(`Illegal argument: ${e}`)}var Qg=class Yu extends Error{constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof Yu)return t;let i=new Yu;return i.message=t.message,i.stack=t.stack,i}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}},Gu=class o0 extends Error{constructor(t){super(t||"An unexpected bug occurred."),Object.setPrototypeOf(this,o0.prototype)}};function ri(e,t=0){return e[e.length-(1+t)]}var wb;(e=>{function t(l){return l<0}e.isLessThan=t;function i(l){return l<=0}e.isLessThanOrEqual=i;function n(l){return l>0}e.isGreaterThan=n;function o(l){return l===0}e.isNeitherLessOrGreaterThan=o,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(wb||(wb={}));function xb(e,t){let i=this,n=!1,o;return function(){return n||(n=!0,t||(o=e.apply(i,arguments))),o}}var a0;(e=>{function t(T){return T&&typeof T=="object"&&typeof T[Symbol.iterator]=="function"}e.is=t;let i=Object.freeze([]);function n(){return i}e.empty=n;function*o(T){yield T}e.single=o;function l(T){return t(T)?T:o(T)}e.wrap=l;function c(T){return T||i}e.from=c;function*u(T){for(let $=T.length-1;$>=0;$--)yield T[$]}e.reverse=u;function p(T){return!T||T[Symbol.iterator]().next().done===!0}e.isEmpty=p;function d(T){return T[Symbol.iterator]().next().value}e.first=d;function _(T,$){let G=0;for(let le of T)if($(le,G++))return!0;return!1}e.some=_;function g(T,$){for(let G of T)if($(G))return G}e.find=g;function*S(T,$){for(let G of T)$(G)&&(yield G)}e.filter=S;function*w(T,$){let G=0;for(let le of T)yield $(le,G++)}e.map=w;function*x(T,$){let G=0;for(let le of T)yield*$(le,G++)}e.flatMap=x;function*C(...T){for(let $ of T)yield*$}e.concat=C;function k(T,$,G){let le=G;for(let ue of T)le=$(le,ue);return le}e.reduce=k;function*L(T,$,G=T.length){for($<0&&($+=T.length),G<0?G+=T.length:G>T.length&&(G=T.length);$<G;$++)yield T[$]}e.slice=L;function W(T,$=Number.POSITIVE_INFINITY){let G=[];if($===0)return[G,T];let le=T[Symbol.iterator]();for(let ue=0;ue<$;ue++){let ye=le.next();if(ye.done)return[G,e.empty()];G.push(ye.value)}return[G,{[Symbol.iterator](){return le}}]}e.consume=W;async function O(T){let $=[];for await(let G of T)$.push(G);return Promise.resolve($)}e.asyncToArray=O})(a0||(a0={}));function Ns(e){if(a0.is(e)){let t=[];for(let i of e)if(i)try{i.dispose()}catch(n){t.push(n)}if(t.length===1)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function Cb(...e){return Ke(()=>Ns(e))}function Ke(e){return{dispose:xb(()=>{e()})}}var l0=class c0{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{Ns(this._toDispose)}finally{this._toDispose.clear()}}add(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?c0.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(t),t}delete(t){if(t){if(t===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(t),t.dispose()}}deleteAndLeak(t){t&&this._toDispose.has(t)&&(this._toDispose.delete(t),void 0)}};l0.DISABLE_DISPOSED_WARNING=!1;var Gr=l0,Le=class{constructor(){this._store=new Gr,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};Le.None=Object.freeze({dispose(){}});var Pn=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)==null||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)==null||e.dispose(),this._value=void 0}clearAndLeak(){let e=this._value;return this._value=void 0,e}},lr=typeof window=="object"?window:globalThis,Xu=class Ju{constructor(t){this.element=t,this.next=Ju.Undefined,this.prev=Ju.Undefined}};Xu.Undefined=new Xu(void 0);var Ye=Xu,Yg=class{constructor(){this._first=Ye.Undefined,this._last=Ye.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Ye.Undefined}clear(){let e=this._first;for(;e!==Ye.Undefined;){let t=e.next;e.prev=Ye.Undefined,e.next=Ye.Undefined,e=t}this._first=Ye.Undefined,this._last=Ye.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){let i=new Ye(e);if(this._first===Ye.Undefined)this._first=i,this._last=i;else if(t){let o=this._last;this._last=i,i.prev=o,o.next=i}else{let o=this._first;this._first=i,i.next=o,o.prev=i}this._size+=1;let n=!1;return()=>{n||(n=!0,this._remove(i))}}shift(){if(this._first!==Ye.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Ye.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Ye.Undefined&&e.next!==Ye.Undefined){let t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Ye.Undefined&&e.next===Ye.Undefined?(this._first=Ye.Undefined,this._last=Ye.Undefined):e.next===Ye.Undefined?(this._last=this._last.prev,this._last.next=Ye.Undefined):e.prev===Ye.Undefined&&(this._first=this._first.next,this._first.prev=Ye.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Ye.Undefined;)yield e.element,e=e.next}},bb=globalThis.performance&&typeof globalThis.performance.now=="function",kb=class h0{static create(t){return new h0(t)}constructor(t){this._now=bb&&t===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}},Pt;(e=>{e.None=()=>Le.None;function t(z,j){return g(z,()=>{},0,void 0,!0,void 0,j)}e.defer=t;function i(z){return(j,U=null,V)=>{let K=!1,te;return te=z(A=>{if(!K)return te?te.dispose():K=!0,j.call(U,A)},null,V),K&&te.dispose(),te}}e.once=i;function n(z,j,U){return d((V,K=null,te)=>z(A=>V.call(K,j(A)),null,te),U)}e.map=n;function o(z,j,U){return d((V,K=null,te)=>z(A=>{j(A),V.call(K,A)},null,te),U)}e.forEach=o;function l(z,j,U){return d((V,K=null,te)=>z(A=>j(A)&&V.call(K,A),null,te),U)}e.filter=l;function c(z){return z}e.signal=c;function u(...z){return(j,U=null,V)=>{let K=Cb(...z.map(te=>te(A=>j.call(U,A))));return _(K,V)}}e.any=u;function p(z,j,U,V){let K=U;return n(z,te=>(K=j(K,te),K),V)}e.reduce=p;function d(z,j){let U,V={onWillAddFirstListener(){U=z(K.fire,K)},onDidRemoveLastListener(){U==null||U.dispose()}},K=new ee(V);return j==null||j.add(K),K.event}function _(z,j){return j instanceof Array?j.push(z):j&&j.add(z),z}function g(z,j,U=100,V=!1,K=!1,te,A){let re,Z,E,M=0,Y,ce={leakWarningThreshold:te,onWillAddFirstListener(){re=z(pe=>{M++,Z=j(Z,pe),V&&!E&&(_e.fire(Z),Z=void 0),Y=()=>{let Ee=Z;Z=void 0,E=void 0,(!V||M>1)&&_e.fire(Ee),M=0},typeof U=="number"?(clearTimeout(E),E=setTimeout(Y,U)):E===void 0&&(E=0,queueMicrotask(Y))})},onWillRemoveListener(){K&&M>0&&(Y==null||Y())},onDidRemoveLastListener(){Y=void 0,re.dispose()}},_e=new ee(ce);return A==null||A.add(_e),_e.event}e.debounce=g;function S(z,j=0,U){return e.debounce(z,(V,K)=>V?(V.push(K),V):[K],j,void 0,!0,void 0,U)}e.accumulate=S;function w(z,j=(V,K)=>V===K,U){let V=!0,K;return l(z,te=>{let A=V||!j(te,K);return V=!1,K=te,A},U)}e.latch=w;function x(z,j,U){return[e.filter(z,j,U),e.filter(z,V=>!j(V),U)]}e.split=x;function C(z,j=!1,U=[],V){let K=U.slice(),te=z(Z=>{K?K.push(Z):re.fire(Z)});V&&V.add(te);let A=()=>{K==null||K.forEach(Z=>re.fire(Z)),K=null},re=new ee({onWillAddFirstListener(){te||(te=z(Z=>re.fire(Z)),V&&V.add(te))},onDidAddFirstListener(){K&&(j?setTimeout(A):A())},onDidRemoveLastListener(){te&&te.dispose(),te=null}});return V&&V.add(re),re.event}e.buffer=C;function k(z,j){return(U,V,K)=>{let te=j(new W);return z(function(A){let re=te.evaluate(A);re!==L&&U.call(V,re)},void 0,K)}}e.chain=k;let L=Symbol("HaltChainable");class W{constructor(){this.steps=[]}map(j){return this.steps.push(j),this}forEach(j){return this.steps.push(U=>(j(U),U)),this}filter(j){return this.steps.push(U=>j(U)?U:L),this}reduce(j,U){let V=U;return this.steps.push(K=>(V=j(V,K),V)),this}latch(j=(U,V)=>U===V){let U=!0,V;return this.steps.push(K=>{let te=U||!j(K,V);return U=!1,V=K,te?K:L}),this}evaluate(j){for(let U of this.steps)if(j=U(j),j===L)break;return j}}function O(z,j,U=V=>V){let V=(...re)=>A.fire(U(...re)),K=()=>z.on(j,V),te=()=>z.removeListener(j,V),A=new ee({onWillAddFirstListener:K,onDidRemoveLastListener:te});return A.event}e.fromNodeEventEmitter=O;function T(z,j,U=V=>V){let V=(...re)=>A.fire(U(...re)),K=()=>z.addEventListener(j,V),te=()=>z.removeEventListener(j,V),A=new ee({onWillAddFirstListener:K,onDidRemoveLastListener:te});return A.event}e.fromDOMEventEmitter=T;function $(z){return new Promise(j=>i(z)(j))}e.toPromise=$;function G(z){let j=new ee;return z.then(U=>{j.fire(U)},()=>{j.fire(void 0)}).finally(()=>{j.dispose()}),j.event}e.fromPromise=G;function le(z,j){return z(U=>j.fire(U))}e.forward=le;function ue(z,j,U){return j(U),z(V=>j(V))}e.runAndSubscribe=ue;class ye{constructor(j,U){this._observable=j,this._counter=0,this._hasChanged=!1;let V={onWillAddFirstListener:()=>{j.addObserver(this)},onDidRemoveLastListener:()=>{j.removeObserver(this)}};this.emitter=new ee(V),U&&U.add(this.emitter)}beginUpdate(j){this._counter++}handlePossibleChange(j){}handleChange(j,U){this._hasChanged=!0}endUpdate(j){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function ie(z,j){return new ye(z,j).emitter.event}e.fromObservable=ie;function se(z){return(j,U,V)=>{let K=0,te=!1,A={beginUpdate(){K++},endUpdate(){K--,K===0&&(z.reportChanges(),te&&(te=!1,j.call(U)))},handlePossibleChange(){},handleChange(){te=!0}};z.addObserver(A),z.reportChanges();let re={dispose(){z.removeObserver(A)}};return V instanceof Gr?V.add(re):Array.isArray(V)&&V.push(re),re}}e.fromObservableLight=se})(Pt||(Pt={}));var Zu=class ed{constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${t}_${ed._idPool++}`,ed.all.add(this)}start(t){this._stopWatch=new kb,this.listenerCount=t}stop(){if(this._stopWatch){let t=this._stopWatch.elapsed();this.durations.push(t),this.elapsedOverall+=t,this.invocationCount+=1,this._stopWatch=void 0}}};Zu.all=new Set,Zu._idPool=0;var Eb=Zu,Rb=-1,u0=class d0{constructor(t,i,n=(d0._idPool++).toString(16).padStart(3,"0")){this._errorHandler=t,this.threshold=i,this.name=n,this._warnCountdown=0}dispose(){var t;(t=this._stacks)==null||t.clear()}check(t,i){let n=this.threshold;if(n<=0||i<n)return;this._stacks||(this._stacks=new Map);let o=this._stacks.get(t.value)||0;if(this._stacks.set(t.value,o+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let[l,c]=this.getMostFrequentStack(),u=`[${this.name}] potential listener LEAK detected, having ${i} listeners already. MOST frequent listener (${c}):`;console.warn(u),console.warn(l);let p=new Nb(u,l);this._errorHandler(p)}return()=>{let l=this._stacks.get(t.value)||0;this._stacks.set(t.value,l-1)}}getMostFrequentStack(){if(!this._stacks)return;let t,i=0;for(let[n,o]of this._stacks)(!t||i<o)&&(t=[n,o],i=o);return t}};u0._idPool=1;var Pb=u0,Lb=class f0{constructor(t){this.value=t}static create(){let t=new Error;return new f0(t.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},Nb=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},Db=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},Mb=0,du=class{constructor(e){this.value=e,this.id=Mb++}},Tb=2,Ob,ee=class{constructor(t){var i,n,o,l;this._size=0,this._options=t,this._leakageMon=(i=this._options)!=null&&i.leakWarningThreshold?new Pb((t==null?void 0:t.onListenerError)??El,((n=this._options)==null?void 0:n.leakWarningThreshold)??Rb):void 0,this._perfMon=(o=this._options)!=null&&o._profName?new Eb(this._options._profName):void 0,this._deliveryQueue=(l=this._options)==null?void 0:l.deliveryQueue}dispose(){var t,i,n,o;this._disposed||(this._disposed=!0,((t=this._deliveryQueue)==null?void 0:t.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),(n=(i=this._options)==null?void 0:i.onDidRemoveLastListener)==null||n.call(i),(o=this._leakageMon)==null||o.dispose())}get event(){return this._event??(this._event=(t,i,n)=>{var u,p,d,_,g;if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let S=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(S);let w=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],x=new Db(`${S}. HINT: Stack shows most frequent listener (${w[1]}-times)`,w[0]);return(((u=this._options)==null?void 0:u.onListenerError)||El)(x),Le.None}if(this._disposed)return Le.None;i&&(t=t.bind(i));let o=new du(t),l;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(o.stack=Lb.create(),l=this._leakageMon.check(o.stack,this._size+1)),this._listeners?this._listeners instanceof du?(this._deliveryQueue??(this._deliveryQueue=new Bb),this._listeners=[this._listeners,o]):this._listeners.push(o):((d=(p=this._options)==null?void 0:p.onWillAddFirstListener)==null||d.call(p,this),this._listeners=o,(g=(_=this._options)==null?void 0:_.onDidAddFirstListener)==null||g.call(_,this)),this._size++;let c=Ke(()=>{l==null||l(),this._removeListener(o)});return n instanceof Gr?n.add(c):Array.isArray(n)&&n.push(c),c}),this._event}_removeListener(t){var l,c,u,p;if((c=(l=this._options)==null?void 0:l.onWillRemoveListener)==null||c.call(l,this),!this._listeners)return;if(this._size===1){this._listeners=void 0,(p=(u=this._options)==null?void 0:u.onDidRemoveLastListener)==null||p.call(u,this),this._size=0;return}let i=this._listeners,n=i.indexOf(t);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,i[n]=void 0;let o=this._deliveryQueue.current===this;if(this._size*Tb<=i.length){let d=0;for(let _=0;_<i.length;_++)i[_]?i[d++]=i[_]:o&&(this._deliveryQueue.end--,d<this._deliveryQueue.i&&this._deliveryQueue.i--);i.length=d}}_deliver(t,i){var o;if(!t)return;let n=((o=this._options)==null?void 0:o.onListenerError)||El;if(!n){t.value(i);return}try{t.value(i)}catch(l){n(l)}}_deliverQueue(t){let i=t.current._listeners;for(;t.i<t.end;)this._deliver(i[t.i++],t.value);t.reset()}fire(t){var i,n,o,l;if((i=this._deliveryQueue)!=null&&i.current&&(this._deliverQueue(this._deliveryQueue),(n=this._perfMon)==null||n.stop()),(o=this._perfMon)==null||o.start(this._size),this._listeners)if(this._listeners instanceof du)this._deliver(this._listeners,t);else{let c=this._deliveryQueue;c.enqueue(this,t,this._listeners.length),this._deliverQueue(c)}(l=this._perfMon)==null||l.stop()}hasListeners(){return this._size>0}},Bb=class{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},td=class{constructor(){this.mapWindowIdToZoomLevel=new Map,this._onDidChangeZoomLevel=new ee,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this.mapWindowIdToZoomFactor=new Map,this._onDidChangeFullscreen=new ee,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event,this.mapWindowIdToFullScreen=new Map}getZoomLevel(t){return this.mapWindowIdToZoomLevel.get(this.getWindowId(t))??0}setZoomLevel(t,i){if(this.getZoomLevel(i)===t)return;let n=this.getWindowId(i);this.mapWindowIdToZoomLevel.set(n,t),this._onDidChangeZoomLevel.fire(n)}getZoomFactor(t){return this.mapWindowIdToZoomFactor.get(this.getWindowId(t))??1}setZoomFactor(t,i){this.mapWindowIdToZoomFactor.set(this.getWindowId(i),t)}setFullscreen(t,i){if(this.isFullscreen(i)===t)return;let n=this.getWindowId(i);this.mapWindowIdToFullScreen.set(n,t),this._onDidChangeFullscreen.fire(n)}isFullscreen(t){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(t))}getWindowId(t){return t.vscodeWindowId}};td.INSTANCE=new td;var qd=td;function Ib(e,t,i){typeof t=="string"&&(t=e.matchMedia(t)),t.addEventListener("change",i)}qd.INSTANCE.onDidChangeZoomLevel;function Ab(e){return qd.INSTANCE.getZoomFactor(e)}qd.INSTANCE.onDidChangeFullscreen;var On=typeof navigator=="object"?navigator.userAgent:"",id=On.indexOf("Firefox")>=0,jb=On.indexOf("AppleWebKit")>=0,Qd=On.indexOf("Chrome")>=0,Fb=!Qd&&On.indexOf("Safari")>=0;On.indexOf("Electron/")>=0;On.indexOf("Android")>=0;var fu=!1;if(typeof lr.matchMedia=="function"){let e=lr.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),t=lr.matchMedia("(display-mode: fullscreen)");fu=e.matches,Ib(lr,e,({matches:i})=>{fu&&t.matches||(fu=i)})}var pn="en",rd=!1,sd=!1,Rl=!1,p0=!1,gl,Pl=pn,Gg=pn,zb,Pi,ks=globalThis,Rt,Z_;typeof ks.vscode<"u"&&typeof ks.vscode.process<"u"?Rt=ks.vscode.process:typeof process<"u"&&typeof((Z_=process==null?void 0:process.versions)==null?void 0:Z_.node)=="string"&&(Rt=process);var ev,Hb=typeof((ev=Rt==null?void 0:Rt.versions)==null?void 0:ev.electron)=="string",$b=Hb&&(Rt==null?void 0:Rt.type)==="renderer",tv;if(typeof Rt=="object"){rd=Rt.platform==="win32",sd=Rt.platform==="darwin",Rl=Rt.platform==="linux",Rl&&Rt.env.SNAP&&Rt.env.SNAP_REVISION,Rt.env.CI||Rt.env.BUILD_ARTIFACTSTAGINGDIRECTORY,gl=pn,Pl=pn;let e=Rt.env.VSCODE_NLS_CONFIG;if(e)try{let t=JSON.parse(e);gl=t.userLocale,Gg=t.osLocale,Pl=t.resolvedLanguage||pn,zb=(tv=t.languagePack)==null?void 0:tv.translationsConfigFile}catch{}p0=!0}else typeof navigator=="object"&&!$b?(Pi=navigator.userAgent,rd=Pi.indexOf("Windows")>=0,sd=Pi.indexOf("Macintosh")>=0,(Pi.indexOf("Macintosh")>=0||Pi.indexOf("iPad")>=0||Pi.indexOf("iPhone")>=0)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Rl=Pi.indexOf("Linux")>=0,(Pi==null?void 0:Pi.indexOf("Mobi"))>=0,Pl=globalThis._VSCODE_NLS_LANGUAGE||pn,gl=navigator.language.toLowerCase(),Gg=gl):console.error("Unable to resolve platform.");var m0=rd,Ki=sd,Wb=Rl,Xg=p0,Vi=Pi,Or=Pl,Ub;(e=>{function t(){return Or}e.value=t;function i(){return Or.length===2?Or==="en":Or.length>=3?Or[0]==="e"&&Or[1]==="n"&&Or[2]==="-":!1}e.isDefaultVariant=i;function n(){return Or==="en"}e.isDefault=n})(Ub||(Ub={}));var Kb=typeof ks.postMessage=="function"&&!ks.importScripts;(()=>{if(Kb){let e=[];ks.addEventListener("message",i=>{if(i.data&&i.data.vscodeScheduleAsyncWork)for(let n=0,o=e.length;n<o;n++){let l=e[n];if(l.id===i.data.vscodeScheduleAsyncWork){e.splice(n,1),l.callback();return}}});let t=0;return i=>{let n=++t;e.push({id:n,callback:i}),ks.postMessage({vscodeScheduleAsyncWork:n},"*")}}return e=>setTimeout(e)})();var Vb=!!(Vi&&Vi.indexOf("Chrome")>=0);Vi&&Vi.indexOf("Firefox")>=0;!Vb&&Vi&&Vi.indexOf("Safari")>=0;Vi&&Vi.indexOf("Edg/")>=0;Vi&&Vi.indexOf("Android")>=0;var hn=typeof navigator=="object"?navigator:{};Xg||document.queryCommandSupported&&document.queryCommandSupported("copy")||hn&&hn.clipboard&&hn.clipboard.writeText,Xg||hn&&hn.clipboard&&hn.clipboard.readText;var Yd=class{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}},pu=new Yd,Jg=new Yd,Zg=new Yd,qb=new Array(230),g0;(e=>{function t(u){return pu.keyCodeToStr(u)}e.toString=t;function i(u){return pu.strToKeyCode(u)}e.fromString=i;function n(u){return Jg.keyCodeToStr(u)}e.toUserSettingsUS=n;function o(u){return Zg.keyCodeToStr(u)}e.toUserSettingsGeneral=o;function l(u){return Jg.strToKeyCode(u)||Zg.strToKeyCode(u)}e.fromUserSettings=l;function c(u){if(u>=98&&u<=113)return null;switch(u){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return pu.keyCodeToStr(u)}e.toElectronAccelerator=c})(g0||(g0={}));var Qb=class _0{constructor(t,i,n,o,l){this.ctrlKey=t,this.shiftKey=i,this.altKey=n,this.metaKey=o,this.keyCode=l}equals(t){return t instanceof _0&&this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode}getHashCode(){let t=this.ctrlKey?"1":"0",i=this.shiftKey?"1":"0",n=this.altKey?"1":"0",o=this.metaKey?"1":"0";return`K${t}${i}${n}${o}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new Yb([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},Yb=class{constructor(e){if(e.length===0)throw Sb("chords");this.chords=e}getHashCode(){let e="";for(let t=0,i=this.chords.length;t<i;t++)t!==0&&(e+=";"),e+=this.chords[t].getHashCode();return e}equals(e){if(e===null||this.chords.length!==e.chords.length)return!1;for(let t=0;t<this.chords.length;t++)if(!this.chords[t].equals(e.chords[t]))return!1;return!0}};function Gb(e){if(e.charCode){let i=String.fromCharCode(e.charCode).toUpperCase();return g0.fromString(i)}let t=e.keyCode;if(t===3)return 7;if(id)switch(t){case 59:return 85;case 60:if(Wb)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(Ki)return 57;break}else if(jb&&(Ki&&t===93||!Ki&&t===92))return 57;return qb[t]||0}var Xb=Ki?256:2048,Jb=512,Zb=1024,ek=Ki?2048:256,e_=class{constructor(e){var i;this._standardKeyboardEventBrand=!0;let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=(i=t.getModifierState)==null?void 0:i.call(t,"AltGraph"),this.keyCode=Gb(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=Xb),this.altKey&&(t|=Jb),this.shiftKey&&(t|=Zb),this.metaKey&&(t|=ek),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new Qb(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}},t_=new WeakMap;function tk(e){if(!e.parent||e.parent===e)return null;try{let t=e.location,i=e.parent.location;if(t.origin!=="null"&&i.origin!=="null"&&t.origin!==i.origin)return null}catch{return null}return e.parent}var ik=class{static getSameOriginWindowChain(e){let t=t_.get(e);if(!t){t=[],t_.set(e,t);let i=e,n;do n=tk(i),n?t.push({window:new WeakRef(i),iframeElement:i.frameElement||null}):t.push({window:new WeakRef(i),iframeElement:null}),i=n;while(i)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let i=0,n=0,o=this.getSameOriginWindowChain(e);for(let l of o){let c=l.window.deref();if(i+=(c==null?void 0:c.scrollY)??0,n+=(c==null?void 0:c.scrollX)??0,c===t||!l.iframeElement)break;let u=l.iframeElement.getBoundingClientRect();i+=u.top,n+=u.left}return{top:i,left:n}}},_l=class{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let i=ik.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=i.left,this.posy-=i.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}},i_=class{constructor(e,t=0,i=0){var o;this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=i,this.deltaX=t;let n=!1;if(Qd){let l=navigator.userAgent.match(/Chrome\/(\d+)/);n=(l?parseInt(l[1]):123)<=122}if(e){let l=e,c=e,u=((o=e.view)==null?void 0:o.devicePixelRatio)||1;if(typeof l.wheelDeltaY<"u")n?this.deltaY=l.wheelDeltaY/(120*u):this.deltaY=l.wheelDeltaY/120;else if(typeof c.VERTICAL_AXIS<"u"&&c.axis===c.VERTICAL_AXIS)this.deltaY=-c.detail/3;else if(e.type==="wheel"){let p=e;p.deltaMode===p.DOM_DELTA_LINE?id&&!Ki?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof l.wheelDeltaX<"u")Fb&&m0?this.deltaX=-(l.wheelDeltaX/120):n?this.deltaX=l.wheelDeltaX/(120*u):this.deltaX=l.wheelDeltaX/120;else if(typeof c.HORIZONTAL_AXIS<"u"&&c.axis===c.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){let p=e;p.deltaMode===p.DOM_DELTA_LINE?id&&!Ki?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(n?this.deltaY=e.wheelDelta/(120*u):this.deltaY=e.wheelDelta/120)}}preventDefault(){var e;(e=this.browserEvent)==null||e.preventDefault()}stopPropagation(){var e;(e=this.browserEvent)==null||e.stopPropagation()}},v0=Object.freeze(function(e,t){let i=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(i)}}}),rk;(e=>{function t(i){return i===e.None||i===e.Cancelled||i instanceof sk?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}e.isCancellationToken=t,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Pt.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:v0})})(rk||(rk={}));var sk=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?v0:(this._emitter||(this._emitter=new ee),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},Gd=class{constructor(e,t){this._isDisposed=!1,this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new Gu("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new Gu("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}},nk=class{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){var e;(e=this.disposable)==null||e.dispose(),this.disposable=void 0}cancelAndSet(e,t,i=globalThis){if(this.isDisposed)throw new Gu("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let n=i.setInterval(()=>{e()},t);this.disposable=Ke(()=>{i.clearInterval(n),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},ok;(e=>{async function t(n){let o,l=await Promise.all(n.map(c=>c.then(u=>u,u=>{o||(o=u)})));if(typeof o<"u")throw o;return l}e.settled=t;function i(n){return new Promise(async(o,l)=>{try{await n(o,l)}catch(c){l(c)}})}e.withAsyncBody=i})(ok||(ok={}));var r_=class pi{static fromArray(t){return new pi(i=>{i.emitMany(t)})}static fromPromise(t){return new pi(async i=>{i.emitMany(await t)})}static fromPromises(t){return new pi(async i=>{await Promise.all(t.map(async n=>i.emitOne(await n)))})}static merge(t){return new pi(async i=>{await Promise.all(t.map(async n=>{for await(let o of n)i.emitOne(o)}))})}constructor(t,i){this._state=0,this._results=[],this._error=null,this._onReturn=i,this._onStateChanged=new ee,queueMicrotask(async()=>{let n={emitOne:o=>this.emitOne(o),emitMany:o=>this.emitMany(o),reject:o=>this.reject(o)};try{await Promise.resolve(t(n)),this.resolve()}catch(o){this.reject(o)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(t<this._results.length)return{done:!1,value:this._results[t++]};if(this._state===1)return{done:!0,value:void 0};await Pt.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>{var i;return(i=this._onReturn)==null||i.call(this),{done:!0,value:void 0}}}}static map(t,i){return new pi(async n=>{for await(let o of t)n.emitOne(i(o))})}map(t){return pi.map(this,t)}static filter(t,i){return new pi(async n=>{for await(let o of t)i(o)&&n.emitOne(o)})}filter(t){return pi.filter(this,t)}static coalesce(t){return pi.filter(t,i=>!!i)}coalesce(){return pi.coalesce(this)}static async toPromise(t){let i=[];for await(let n of t)i.push(n);return i}toPromise(){return pi.toPromise(this)}emitOne(t){this._state===0&&(this._results.push(t),this._onStateChanged.fire())}emitMany(t){this._state===0&&(this._results=this._results.concat(t),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(t){this._state===0&&(this._state=2,this._error=t,this._onStateChanged.fire())}};r_.EMPTY=r_.fromArray([]);var{getWindow:Ui,getWindowId:ak,onDidRegisterWindow:lk}=(function(){let e=new Map,t={window:lr,disposables:new Gr};e.set(lr.vscodeWindowId,t);let i=new ee,n=new ee,o=new ee;function l(c,u){return(typeof c=="number"?e.get(c):void 0)??(u?t:void 0)}return{onDidRegisterWindow:i.event,onWillUnregisterWindow:o.event,onDidUnregisterWindow:n.event,registerWindow(c){if(e.has(c.vscodeWindowId))return Le.None;let u=new Gr,p={window:c,disposables:u.add(new Gr)};return e.set(c.vscodeWindowId,p),u.add(Ke(()=>{e.delete(c.vscodeWindowId),n.fire(c)})),u.add(be(c,yt.BEFORE_UNLOAD,()=>{o.fire(c)})),i.fire(p),u},getWindows(){return e.values()},getWindowsCount(){return e.size},getWindowId(c){return c.vscodeWindowId},hasWindow(c){return e.has(c)},getWindowById:l,getWindow(c){var d;let u=c;if((d=u==null?void 0:u.ownerDocument)!=null&&d.defaultView)return u.ownerDocument.defaultView.window;let p=c;return p!=null&&p.view?p.view.window:lr},getDocument(c){return Ui(c).document}}})(),ck=class{constructor(e,t,i,n){this._node=e,this._type=t,this._handler=i,this._options=n||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function be(e,t,i,n){return new ck(e,t,i,n)}var s_=function(e,t,i,n){return be(e,t,i,n)},Xd,hk=class extends nk{constructor(e){super(),this.defaultTarget=e&&Ui(e)}cancelAndSet(e,t,i){return super.cancelAndSet(e,t,i??this.defaultTarget)}},n_=class{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){El(e)}}static sort(e,t){return t.priority-e.priority}};(function(){let e=new Map,t=new Map,i=new Map,n=new Map,o=l=>{i.set(l,!1);let c=e.get(l)??[];for(t.set(l,c),e.set(l,[]),n.set(l,!0);c.length>0;)c.sort(n_.sort),c.shift().execute();n.set(l,!1)};Xd=(l,c,u=0)=>{let p=ak(l),d=new n_(c,u),_=e.get(p);return _||(_=[],e.set(p,_)),_.push(d),i.get(p)||(i.set(p,!0),l.requestAnimationFrame(()=>o(p))),d}})();function uk(e){let t=e.getBoundingClientRect(),i=Ui(e);return{left:t.left+i.scrollX,top:t.top+i.scrollY,width:t.width,height:t.height}}var yt={CLICK:"click",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",KEY_DOWN:"keydown",KEY_UP:"keyup",BEFORE_UNLOAD:"beforeunload",CHANGE:"change",FOCUS:"focus",BLUR:"blur",INPUT:"input"},dk=class{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingTop="",this._paddingLeft="",this._paddingBottom="",this._paddingRight="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){let t=Gt(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){let t=Gt(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){let t=Gt(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){let t=Gt(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){let t=Gt(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){let t=Gt(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){let t=Gt(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingTop(e){let t=Gt(e);this._paddingTop!==t&&(this._paddingTop=t,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(e){let t=Gt(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(e){let t=Gt(e);this._paddingBottom!==t&&(this._paddingBottom=t,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(e){let t=Gt(e);this._paddingRight!==t&&(this._paddingRight=t,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){let t=Gt(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){let t=Gt(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){let t=Gt(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}};function Gt(e){return typeof e=="number"?`${e}px`:e}function jo(e){return new dk(e)}var y0=class{constructor(){this._hooks=new Gr,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let i=this._onStopCallback;this._onStopCallback=null,e&&i&&i(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,i,n,o){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=n,this._onStopCallback=o;let l=e;try{e.setPointerCapture(t),this._hooks.add(Ke(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{l=Ui(e)}this._hooks.add(be(l,yt.POINTER_MOVE,c=>{if(c.buttons!==i){this.stopMonitoring(!0);return}c.preventDefault(),this._pointerMoveCallback(c)})),this._hooks.add(be(l,yt.POINTER_UP,c=>this.stopMonitoring(!0)))}};function fk(e,t,i){let n=null,o=null;if(typeof i.value=="function"?(n="value",o=i.value,o.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof i.get=="function"&&(n="get",o=i.get),!o)throw new Error("not supported");let l=`$memoize$${t}`;i[n]=function(...c){return this.hasOwnProperty(l)||Object.defineProperty(this,l,{configurable:!1,enumerable:!1,writable:!1,value:o.apply(this,c)}),this[l]}}var Fi;(e=>(e.Tap="-xterm-gesturetap",e.Change="-xterm-gesturechange",e.Start="-xterm-gesturestart",e.End="-xterm-gesturesend",e.Contextmenu="-xterm-gesturecontextmenu"))(Fi||(Fi={}));var Do=class Tt extends Le{constructor(){super(),this.dispatched=!1,this.targets=new Yg,this.ignoreTargets=new Yg,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(Pt.runAndSubscribe(lk,({window:t,disposables:i})=>{i.add(be(t.document,"touchstart",n=>this.onTouchStart(n),{passive:!1})),i.add(be(t.document,"touchend",n=>this.onTouchEnd(t,n))),i.add(be(t.document,"touchmove",n=>this.onTouchMove(n),{passive:!1}))},{window:lr,disposables:this._store}))}static addTarget(t){if(!Tt.isTouchDevice())return Le.None;Tt.INSTANCE||(Tt.INSTANCE=new Tt);let i=Tt.INSTANCE.targets.push(t);return Ke(i)}static ignoreTarget(t){if(!Tt.isTouchDevice())return Le.None;Tt.INSTANCE||(Tt.INSTANCE=new Tt);let i=Tt.INSTANCE.ignoreTargets.push(t);return Ke(i)}static isTouchDevice(){return"ontouchstart"in lr||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(t){let i=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,o=t.targetTouches.length;n<o;n++){let l=t.targetTouches.item(n);this.activeTouches[l.identifier]={id:l.identifier,initialTarget:l.target,initialTimeStamp:i,initialPageX:l.pageX,initialPageY:l.pageY,rollingTimestamps:[i],rollingPageX:[l.pageX],rollingPageY:[l.pageY]};let c=this.newGestureEvent(Fi.Start,l.target);c.pageX=l.pageX,c.pageY=l.pageY,this.dispatchEvent(c)}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}onTouchEnd(t,i){let n=Date.now(),o=Object.keys(this.activeTouches).length;for(let l=0,c=i.changedTouches.length;l<c;l++){let u=i.changedTouches.item(l);if(!this.activeTouches.hasOwnProperty(String(u.identifier))){console.warn("move of an UNKNOWN touch",u);continue}let p=this.activeTouches[u.identifier],d=Date.now()-p.initialTimeStamp;if(d<Tt.HOLD_DELAY&&Math.abs(p.initialPageX-ri(p.rollingPageX))<30&&Math.abs(p.initialPageY-ri(p.rollingPageY))<30){let _=this.newGestureEvent(Fi.Tap,p.initialTarget);_.pageX=ri(p.rollingPageX),_.pageY=ri(p.rollingPageY),this.dispatchEvent(_)}else if(d>=Tt.HOLD_DELAY&&Math.abs(p.initialPageX-ri(p.rollingPageX))<30&&Math.abs(p.initialPageY-ri(p.rollingPageY))<30){let _=this.newGestureEvent(Fi.Contextmenu,p.initialTarget);_.pageX=ri(p.rollingPageX),_.pageY=ri(p.rollingPageY),this.dispatchEvent(_)}else if(o===1){let _=ri(p.rollingPageX),g=ri(p.rollingPageY),S=ri(p.rollingTimestamps)-p.rollingTimestamps[0],w=_-p.rollingPageX[0],x=g-p.rollingPageY[0],C=[...this.targets].filter(k=>p.initialTarget instanceof Node&&k.contains(p.initialTarget));this.inertia(t,C,n,Math.abs(w)/S,w>0?1:-1,_,Math.abs(x)/S,x>0?1:-1,g)}this.dispatchEvent(this.newGestureEvent(Fi.End,p.initialTarget)),delete this.activeTouches[u.identifier]}this.dispatched&&(i.preventDefault(),i.stopPropagation(),this.dispatched=!1)}newGestureEvent(t,i){let n=document.createEvent("CustomEvent");return n.initEvent(t,!1,!0),n.initialTarget=i,n.tapCount=0,n}dispatchEvent(t){if(t.type===Fi.Tap){let i=new Date().getTime(),n=0;i-this._lastSetTapCountTime>Tt.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=i,t.tapCount=n}else(t.type===Fi.Change||t.type===Fi.Contextmenu)&&(this._lastSetTapCountTime=0);if(t.initialTarget instanceof Node){for(let n of this.ignoreTargets)if(n.contains(t.initialTarget))return;let i=[];for(let n of this.targets)if(n.contains(t.initialTarget)){let o=0,l=t.initialTarget;for(;l&&l!==n;)o++,l=l.parentElement;i.push([o,n])}i.sort((n,o)=>n[0]-o[0]);for(let[n,o]of i)o.dispatchEvent(t),this.dispatched=!0}}inertia(t,i,n,o,l,c,u,p,d){this.handle=Xd(t,()=>{let _=Date.now(),g=_-n,S=0,w=0,x=!0;o+=Tt.SCROLL_FRICTION*g,u+=Tt.SCROLL_FRICTION*g,o>0&&(x=!1,S=l*o*g),u>0&&(x=!1,w=p*u*g);let C=this.newGestureEvent(Fi.Change);C.translationX=S,C.translationY=w,i.forEach(k=>k.dispatchEvent(C)),x||this.inertia(t,i,_,o,l,c+S,u,p,d+w)})}onTouchMove(t){let i=Date.now();for(let n=0,o=t.changedTouches.length;n<o;n++){let l=t.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(l.identifier))){console.warn("end of an UNKNOWN touch",l);continue}let c=this.activeTouches[l.identifier],u=this.newGestureEvent(Fi.Change,c.initialTarget);u.translationX=l.pageX-ri(c.rollingPageX),u.translationY=l.pageY-ri(c.rollingPageY),u.pageX=l.pageX,u.pageY=l.pageY,this.dispatchEvent(u),c.rollingPageX.length>3&&(c.rollingPageX.shift(),c.rollingPageY.shift(),c.rollingTimestamps.shift()),c.rollingPageX.push(l.pageX),c.rollingPageY.push(l.pageY),c.rollingTimestamps.push(i)}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}};Do.SCROLL_FRICTION=-.005,Do.HOLD_DELAY=700,Do.CLEAR_TAP_COUNT_TIME=400,tt([fk],Do,"isTouchDevice",1);var pk=Do,Jd=class extends Le{onclick(e,t){this._register(be(e,yt.CLICK,i=>t(new _l(Ui(e),i))))}onmousedown(e,t){this._register(be(e,yt.MOUSE_DOWN,i=>t(new _l(Ui(e),i))))}onmouseover(e,t){this._register(be(e,yt.MOUSE_OVER,i=>t(new _l(Ui(e),i))))}onmouseleave(e,t){this._register(be(e,yt.MOUSE_LEAVE,i=>t(new _l(Ui(e),i))))}onkeydown(e,t){this._register(be(e,yt.KEY_DOWN,i=>t(new e_(i))))}onkeyup(e,t){this._register(be(e,yt.KEY_UP,i=>t(new e_(i))))}oninput(e,t){this._register(be(e,yt.INPUT,t))}onblur(e,t){this._register(be(e,yt.BLUR,t))}onfocus(e,t){this._register(be(e,yt.FOCUS,t))}onchange(e,t){this._register(be(e,yt.CHANGE,t))}ignoreGesture(e){return pk.ignoreTarget(e)}},o_=11,mk=class extends Jd{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.style.position="absolute",this.domNode.style.width=o_+"px",this.domNode.style.height=o_+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new y0),this._register(s_(this.bgDomNode,yt.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(s_(this.domNode,yt.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new hk),this._pointerdownScheduleRepeatTimer=this._register(new Gd)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,Ui(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,i=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}},gk=class nd{constructor(t,i,n,o,l,c,u){this._forceIntegerValues=t,this._scrollStateBrand=void 0,this._forceIntegerValues&&(i=i|0,n=n|0,o=o|0,l=l|0,c=c|0,u=u|0),this.rawScrollLeft=o,this.rawScrollTop=u,i<0&&(i=0),o+i>n&&(o=n-i),o<0&&(o=0),l<0&&(l=0),u+l>c&&(u=c-l),u<0&&(u=0),this.width=i,this.scrollWidth=n,this.scrollLeft=o,this.height=l,this.scrollHeight=c,this.scrollTop=u}equals(t){return this.rawScrollLeft===t.rawScrollLeft&&this.rawScrollTop===t.rawScrollTop&&this.width===t.width&&this.scrollWidth===t.scrollWidth&&this.scrollLeft===t.scrollLeft&&this.height===t.height&&this.scrollHeight===t.scrollHeight&&this.scrollTop===t.scrollTop}withScrollDimensions(t,i){return new nd(this._forceIntegerValues,typeof t.width<"u"?t.width:this.width,typeof t.scrollWidth<"u"?t.scrollWidth:this.scrollWidth,i?this.rawScrollLeft:this.scrollLeft,typeof t.height<"u"?t.height:this.height,typeof t.scrollHeight<"u"?t.scrollHeight:this.scrollHeight,i?this.rawScrollTop:this.scrollTop)}withScrollPosition(t){return new nd(this._forceIntegerValues,this.width,this.scrollWidth,typeof t.scrollLeft<"u"?t.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof t.scrollTop<"u"?t.scrollTop:this.rawScrollTop)}createScrollEvent(t,i){let n=this.width!==t.width,o=this.scrollWidth!==t.scrollWidth,l=this.scrollLeft!==t.scrollLeft,c=this.height!==t.height,u=this.scrollHeight!==t.scrollHeight,p=this.scrollTop!==t.scrollTop;return{inSmoothScrolling:i,oldWidth:t.width,oldScrollWidth:t.scrollWidth,oldScrollLeft:t.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:t.height,oldScrollHeight:t.scrollHeight,oldScrollTop:t.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:o,scrollLeftChanged:l,heightChanged:c,scrollHeightChanged:u,scrollTopChanged:p}}},_k=class extends Le{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new ee),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new gk(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){var n;let i=this._state.withScrollDimensions(e,t);this._setState(i,!!this._smoothScrolling),(n=this._smoothScrolling)==null||n.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){let t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};let i=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===i.scrollLeft&&this._smoothScrolling.to.scrollTop===i.scrollTop)return;let n;t?n=new l_(this._smoothScrolling.from,i,this._smoothScrolling.startTime,this._smoothScrolling.duration):n=this._smoothScrolling.combine(this._state,i,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=n}else{let i=this._state.withScrollPosition(e);this._smoothScrolling=l_.start(this._state,i,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){let i=this._state;i.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(i,t)))}},a_=class{constructor(e,t,i){this.scrollLeft=e,this.scrollTop=t,this.isDone=i}};function mu(e,t){let i=t-e;return function(n){return e+i*Sk(n)}}function vk(e,t,i){return function(n){return n<i?e(n/i):t((n-i)/(1-i))}}var l_=class od{constructor(t,i,n,o){this.from=t,this.to=i,this.duration=o,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(t,i,n){if(Math.abs(t-i)>2.5*n){let o,l;return t<i?(o=t+.75*n,l=i-.75*n):(o=t-.75*n,l=i+.75*n),vk(mu(t,o),mu(l,i),.33)}return mu(t,i)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(t){this.to=t.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(t){let i=(t-this.startTime)/this.duration;if(i<1){let n=this.scrollLeft(i),o=this.scrollTop(i);return new a_(n,o,!1)}return new a_(this.to.scrollLeft,this.to.scrollTop,!0)}combine(t,i,n){return od.start(t,i,n)}static start(t,i,n){n=n+10;let o=Date.now()-10;return new od(t,i,o,n)}};function yk(e){return Math.pow(e,3)}function Sk(e){return 1-yk(1-e)}var wk=class extends Le{constructor(e,t,i){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=i,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Gd)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;(e=this._domNode)==null||e.setClassName(this._visibleClassName)},0))}_hide(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(t=this._domNode)==null||t.setClassName(this._invisibleClassName+(e?" fade":"")))}},xk=140,S0=class extends Jd{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new wk(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new y0),this._shouldRender=!0,this.domNode=jo(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(be(this.domNode.domNode,yt.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){let t=this._register(new mk(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,i,n){this.slider=jo(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof i=="number"&&this.slider.setWidth(i),typeof n=="number"&&this.slider.setHeight(n),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(be(this.slider.domNode,yt.POINTER_DOWN,o=>{o.button===0&&(o.preventDefault(),this._sliderPointerDown(o))})),this.onclick(this.slider.domNode,o=>{o.leftButton&&o.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){let t=this.domNode.domNode.getClientRects()[0].top,i=t+this._scrollbarState.getSliderPosition(),n=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),o=this._sliderPointerPosition(e);i<=o&&o<=n?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,i;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,i=e.offsetY;else{let o=uk(this.domNode.domNode);t=e.pageX-o.left,i=e.pageY-o.top}let n=this._pointerDownRelativePosition(t,i);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(n):this._scrollbarState.getDesiredScrollPositionFromOffset(n)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=this._sliderPointerPosition(e),i=this._sliderOrthogonalPointerPosition(e),n=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>{let l=this._sliderOrthogonalPointerPosition(o),c=Math.abs(l-i);if(m0&&c>xk){this._setDesiredScrollPositionNow(n.getScrollPosition());return}let u=this._sliderPointerPosition(o)-t;this._setDesiredScrollPositionNow(n.getDesiredScrollPositionFromDelta(u))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){let t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}},w0=class ad{constructor(t,i,n,o,l,c){this._scrollbarSize=Math.round(i),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(t),this._visibleSize=o,this._scrollSize=l,this._scrollPosition=c,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new ad(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(t){let i=Math.round(t);return this._visibleSize!==i?(this._visibleSize=i,this._refreshComputedValues(),!0):!1}setScrollSize(t){let i=Math.round(t);return this._scrollSize!==i?(this._scrollSize=i,this._refreshComputedValues(),!0):!1}setScrollPosition(t){let i=Math.round(t);return this._scrollPosition!==i?(this._scrollPosition=i,this._refreshComputedValues(),!0):!1}setScrollbarSize(t){this._scrollbarSize=Math.round(t)}setOppositeScrollbarSize(t){this._oppositeScrollbarSize=Math.round(t)}static _computeValues(t,i,n,o,l){let c=Math.max(0,n-t),u=Math.max(0,c-2*i),p=o>0&&o>n;if(!p)return{computedAvailableSize:Math.round(c),computedIsNeeded:p,computedSliderSize:Math.round(u),computedSliderRatio:0,computedSliderPosition:0};let d=Math.round(Math.max(20,Math.floor(n*u/o))),_=(u-d)/(o-n),g=l*_;return{computedAvailableSize:Math.round(c),computedIsNeeded:p,computedSliderSize:Math.round(d),computedSliderRatio:_,computedSliderPosition:Math.round(g)}}_refreshComputedValues(){let t=ad._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=t.computedAvailableSize,this._computedIsNeeded=t.computedIsNeeded,this._computedSliderSize=t.computedSliderSize,this._computedSliderRatio=t.computedSliderRatio,this._computedSliderPosition=t.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(t){if(!this._computedIsNeeded)return 0;let i=t-this._arrowSize-this._computedSliderSize/2;return Math.round(i/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(t){if(!this._computedIsNeeded)return 0;let i=t-this._arrowSize,n=this._scrollPosition;return i<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(t){if(!this._computedIsNeeded)return 0;let i=this._computedSliderPosition+t;return Math.round(i/this._computedSliderRatio)}},Ck=class extends S0{constructor(e,t,i){let n=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new w0(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,n.width,n.scrollWidth,o.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}},bk=class extends S0{constructor(e,t,i){let n=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new w0(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,n.height,n.scrollHeight,o.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}},kk=500,c_=50,Ek=class{constructor(e,t,i){this.timestamp=e,this.deltaX=t,this.deltaY=i,this.score=0}},ld=class{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let t=1,i=0,n=1,o=this._rear;do{let l=o===this._front?t:Math.pow(2,-n);if(t-=l,i+=this._memory[o].score*l,o===this._front)break;o=(this._capacity+o-1)%this._capacity,n++}while(!0);return i<=.5}acceptStandardWheelEvent(t){if(Qd){let i=Ui(t.browserEvent),n=Ab(i);this.accept(Date.now(),t.deltaX*n,t.deltaY*n)}else this.accept(Date.now(),t.deltaX,t.deltaY)}accept(t,i,n){let o=null,l=new Ek(t,i,n);this._front===-1&&this._rear===-1?(this._memory[0]=l,this._front=0,this._rear=0):(o=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=l),l.score=this._computeScore(l,o)}_computeScore(t,i){if(Math.abs(t.deltaX)>0&&Math.abs(t.deltaY)>0)return 1;let n=.5;if((!this._isAlmostInt(t.deltaX)||!this._isAlmostInt(t.deltaY))&&(n+=.25),i){let o=Math.abs(t.deltaX),l=Math.abs(t.deltaY),c=Math.abs(i.deltaX),u=Math.abs(i.deltaY),p=Math.max(Math.min(o,c),1),d=Math.max(Math.min(l,u),1),_=Math.max(o,c),g=Math.max(l,u);_%p===0&&g%d===0&&(n-=.5)}return Math.min(Math.max(n,0),1)}_isAlmostInt(t){return Math.abs(Math.round(t)-t)<.01}};ld.INSTANCE=new ld;var Rk=ld,Pk=class extends Jd{constructor(e,t,i){super(),this._onScroll=this._register(new ee),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new ee),this.onWillScroll=this._onWillScroll.event,this._options=Nk(t),this._scrollable=i,this._register(this._scrollable.onScroll(o=>{this._onWillScroll.fire(o),this._onDidScroll(o),this._onScroll.fire(o)}));let n={onMouseWheel:o=>this._onMouseWheel(o),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new bk(this._scrollable,this._options,n)),this._horizontalScrollbar=this._register(new Ck(this._scrollable,this._options,n)),this._domNode=document.createElement("div"),this._domNode.className="xterm-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=jo(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=jo(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=jo(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,o=>this._onMouseOver(o)),this.onmouseleave(this._listenOnDomNode,o=>this._onMouseLeave(o)),this._hideTimeout=this._register(new Gd),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=Ns(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Ki&&(this._options.className+=" mac"),this._domNode.className="xterm-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(e){this._revealOnScroll=e}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new i_(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=Ns(this._mouseWheelToDispose),e)){let t=i=>{this._onMouseWheel(new i_(i))};this._mouseWheelToDispose.push(be(this._listenOnDomNode,yt.MOUSE_WHEEL,t,{passive:!1}))}}_onMouseWheel(e){var o;if((o=e.browserEvent)!=null&&o.defaultPrevented)return;let t=Rk.INSTANCE;t.acceptStandardWheelEvent(e);let i=!1;if(e.deltaY||e.deltaX){let l=e.deltaY*this._options.mouseWheelScrollSensitivity,c=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&c+l===0?c=l=0:Math.abs(l)>=Math.abs(c)?c=0:l=0),this._options.flipAxes&&([l,c]=[c,l]);let u=!Ki&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||u)&&!c&&(c=l,l=0),e.browserEvent&&e.browserEvent.altKey&&(c=c*this._options.fastScrollSensitivity,l=l*this._options.fastScrollSensitivity);let p=this._scrollable.getFutureScrollPosition(),d={};if(l){let _=c_*l,g=p.scrollTop-(_<0?Math.floor(_):Math.ceil(_));this._verticalScrollbar.writeScrollPosition(d,g)}if(c){let _=c_*c,g=p.scrollLeft-(_<0?Math.floor(_):Math.ceil(_));this._horizontalScrollbar.writeScrollPosition(d,g)}d=this._scrollable.validateScrollPosition(d),(p.scrollLeft!==d.scrollLeft||p.scrollTop!==d.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(d):this._scrollable.setScrollPositionNow(d),i=!0)}let n=i;!n&&this._options.alwaysConsumeMouseWheel&&(n=!0),!n&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(n=!0),n&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,i=e.scrollLeft>0,n=i?" left":"",o=t?" top":"",l=i||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${n}`),this._topShadowDomNode.setClassName(`shadow${o}`),this._topLeftShadowDomNode.setClassName(`shadow${l}${o}${n}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),kk)}},Lk=class extends Pk{constructor(e,t,i){super(e,t,i)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}};function Nk(e){let t={lazyRender:typeof e.lazyRender<"u"?e.lazyRender:!1,className:typeof e.className<"u"?e.className:"",useShadows:typeof e.useShadows<"u"?e.useShadows:!0,handleMouseWheel:typeof e.handleMouseWheel<"u"?e.handleMouseWheel:!0,flipAxes:typeof e.flipAxes<"u"?e.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof e.consumeMouseWheelIfScrollbarIsNeeded<"u"?e.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof e.alwaysConsumeMouseWheel<"u"?e.alwaysConsumeMouseWheel:!1,scrollYToX:typeof e.scrollYToX<"u"?e.scrollYToX:!1,mouseWheelScrollSensitivity:typeof e.mouseWheelScrollSensitivity<"u"?e.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof e.fastScrollSensitivity<"u"?e.fastScrollSensitivity:5,scrollPredominantAxis:typeof e.scrollPredominantAxis<"u"?e.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof e.mouseWheelSmoothScroll<"u"?e.mouseWheelSmoothScroll:!0,arrowSize:typeof e.arrowSize<"u"?e.arrowSize:11,listenOnDomNode:typeof e.listenOnDomNode<"u"?e.listenOnDomNode:null,horizontal:typeof e.horizontal<"u"?e.horizontal:1,horizontalScrollbarSize:typeof e.horizontalScrollbarSize<"u"?e.horizontalScrollbarSize:10,horizontalSliderSize:typeof e.horizontalSliderSize<"u"?e.horizontalSliderSize:0,horizontalHasArrows:typeof e.horizontalHasArrows<"u"?e.horizontalHasArrows:!1,vertical:typeof e.vertical<"u"?e.vertical:1,verticalScrollbarSize:typeof e.verticalScrollbarSize<"u"?e.verticalScrollbarSize:10,verticalHasArrows:typeof e.verticalHasArrows<"u"?e.verticalHasArrows:!1,verticalSliderSize:typeof e.verticalSliderSize<"u"?e.verticalSliderSize:0,scrollByPage:typeof e.scrollByPage<"u"?e.scrollByPage:!1};return t.horizontalSliderSize=typeof e.horizontalSliderSize<"u"?e.horizontalSliderSize:t.horizontalScrollbarSize,t.verticalSliderSize=typeof e.verticalSliderSize<"u"?e.verticalSliderSize:t.verticalScrollbarSize,Ki&&(t.className+=" mac"),t}var cd=class extends Le{constructor(e,t,i,n,o,l,c,u){super(),this._bufferService=i,this._optionsService=c,this._renderService=u,this._onRequestScrollLines=this._register(new ee),this.onRequestScrollLines=this._onRequestScrollLines.event,this._isSyncing=!1,this._isHandlingScroll=!1,this._suppressOnScrollHandler=!1;let p=this._register(new _k({forceIntegerValues:!1,smoothScrollDuration:this._optionsService.rawOptions.smoothScrollDuration,scheduleAtNextAnimationFrame:d=>Xd(n.window,d)}));this._register(this._optionsService.onSpecificOptionChange("smoothScrollDuration",()=>{p.setSmoothScrollDuration(this._optionsService.rawOptions.smoothScrollDuration)})),this._scrollableElement=this._register(new Lk(t,{vertical:1,horizontal:2,useShadows:!1,mouseWheelSmoothScroll:!0,...this._getChangeOptions()},p)),this._register(this._optionsService.onMultipleOptionChange(["scrollSensitivity","fastScrollSensitivity","overviewRuler"],()=>this._scrollableElement.updateOptions(this._getChangeOptions()))),this._register(o.onProtocolChange(d=>{this._scrollableElement.updateOptions({handleMouseWheel:!(d&16)})})),this._scrollableElement.setScrollDimensions({height:0,scrollHeight:0}),this._register(Pt.runAndSubscribe(l.onChangeColors,()=>{this._scrollableElement.getDomNode().style.backgroundColor=l.colors.background.css})),e.appendChild(this._scrollableElement.getDomNode()),this._register(Ke(()=>this._scrollableElement.getDomNode().remove())),this._styleElement=n.mainDocument.createElement("style"),t.appendChild(this._styleElement),this._register(Ke(()=>this._styleElement.remove())),this._register(Pt.runAndSubscribe(l.onChangeColors,()=>{this._styleElement.textContent=[".xterm .xterm-scrollable-element > .scrollbar > .slider {",`  background: ${l.colors.scrollbarSliderBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider:hover {",`  background: ${l.colors.scrollbarSliderHoverBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider.active {",`  background: ${l.colors.scrollbarSliderActiveBackground.css};`,"}"].join(`
`)})),this._register(this._bufferService.onResize(()=>this.queueSync())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._latestYDisp=void 0,this.queueSync()})),this._register(this._bufferService.onScroll(()=>this._sync())),this._register(this._scrollableElement.onScroll(d=>this._handleScroll(d)))}scrollLines(e){let t=this._scrollableElement.getScrollPosition();this._scrollableElement.setScrollPosition({reuseAnimation:!0,scrollTop:t.scrollTop+e*this._renderService.dimensions.css.cell.height})}scrollToLine(e,t){t&&(this._latestYDisp=e),this._scrollableElement.setScrollPosition({reuseAnimation:!t,scrollTop:e*this._renderService.dimensions.css.cell.height})}_getChangeOptions(){var e;return{mouseWheelScrollSensitivity:this._optionsService.rawOptions.scrollSensitivity,fastScrollSensitivity:this._optionsService.rawOptions.fastScrollSensitivity,verticalScrollbarSize:((e=this._optionsService.rawOptions.overviewRuler)==null?void 0:e.width)||14}}queueSync(e){e!==void 0&&(this._latestYDisp=e),this._queuedAnimationFrame===void 0&&(this._queuedAnimationFrame=this._renderService.addRefreshCallback(()=>{this._queuedAnimationFrame=void 0,this._sync(this._latestYDisp)}))}_sync(e=this._bufferService.buffer.ydisp){!this._renderService||this._isSyncing||(this._isSyncing=!0,this._suppressOnScrollHandler=!0,this._scrollableElement.setScrollDimensions({height:this._renderService.dimensions.css.canvas.height,scrollHeight:this._renderService.dimensions.css.cell.height*this._bufferService.buffer.lines.length}),this._suppressOnScrollHandler=!1,e!==this._latestYDisp&&this._scrollableElement.setScrollPosition({scrollTop:e*this._renderService.dimensions.css.cell.height}),this._isSyncing=!1)}_handleScroll(e){if(!this._renderService||this._isHandlingScroll||this._suppressOnScrollHandler)return;this._isHandlingScroll=!0;let t=Math.round(e.scrollTop/this._renderService.dimensions.css.cell.height),i=t-this._bufferService.buffer.ydisp;i!==0&&(this._latestYDisp=t,this._onRequestScrollLines.fire(i)),this._isHandlingScroll=!1}};cd=tt([oe(2,$t),oe(3,fr),oe(4,t0),oe(5,Tn),oe(6,Wt),oe(7,pr)],cd);var hd=class extends Le{constructor(e,t,i,n,o){super(),this._screenElement=e,this._bufferService=t,this._coreBrowserService=i,this._decorationService=n,this._renderService=o,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this._register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this._register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this._register(this._decorationService.onDecorationRemoved(l=>this._removeDecoration(l))),this._register(Ke(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let e of this._decorationService.decorations)this._renderDecoration(e);this._dimensionsChanged=!1}_renderDecoration(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)}_createElement(e){var n;let t=this._coreBrowserService.mainDocument.createElement("div");t.classList.add("xterm-decoration"),t.classList.toggle("xterm-decoration-top-layer",((n=e==null?void 0:e.options)==null?void 0:n.layer)==="top"),t.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,t.style.height=`${(e.options.height||1)*this._renderService.dimensions.css.cell.height}px`,t.style.top=`${(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height}px`,t.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let i=e.options.x??0;return i&&i>this._bufferService.cols&&(t.style.display="none"),this._refreshXPosition(e,t),t}_refreshStyle(e){let t=e.marker.line-this._bufferService.buffers.active.ydisp;if(t<0||t>=this._bufferService.rows)e.element&&(e.element.style.display="none",e.onRenderEmitter.fire(e.element));else{let i=this._decorationElements.get(e);i||(i=this._createElement(e),e.element=i,this._decorationElements.set(e,i),this._container.appendChild(i),e.onDispose(()=>{this._decorationElements.delete(e),i.remove()})),i.style.display=this._altBufferIsActive?"none":"block",this._altBufferIsActive||(i.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,i.style.height=`${(e.options.height||1)*this._renderService.dimensions.css.cell.height}px`,i.style.top=`${t*this._renderService.dimensions.css.cell.height}px`,i.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`),e.onRenderEmitter.fire(i)}}_refreshXPosition(e,t=e.element){if(!t)return;let i=e.options.x??0;(e.options.anchor||"left")==="right"?t.style.right=i?`${i*this._renderService.dimensions.css.cell.width}px`:"":t.style.left=i?`${i*this._renderService.dimensions.css.cell.width}px`:""}_removeDecoration(e){var t;(t=this._decorationElements.get(e))==null||t.remove(),this._decorationElements.delete(e),e.dispose()}};hd=tt([oe(1,$t),oe(2,fr),oe(3,ea),oe(4,pr)],hd);var Dk=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(e){if(e.options.overviewRulerOptions){for(let t of this._zones)if(t.color===e.options.overviewRulerOptions.color&&t.position===e.options.overviewRulerOptions.position){if(this._lineIntersectsZone(t,e.marker.line))return;if(this._lineAdjacentToZone(t,e.marker.line,e.options.overviewRulerOptions.position)){this._addLineToZone(t,e.marker.line);return}}if(this._zonePoolIndex<this._zonePool.length){this._zonePool[this._zonePoolIndex].color=e.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=e.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=e.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=e.marker.line,this._zones.push(this._zonePool[this._zonePoolIndex++]);return}this._zones.push({color:e.options.overviewRulerOptions.color,position:e.options.overviewRulerOptions.position,startBufferLine:e.marker.line,endBufferLine:e.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(e){this._linePadding=e}_lineIntersectsZone(e,t){return t>=e.startBufferLine&&t<=e.endBufferLine}_lineAdjacentToZone(e,t,i){return t>=e.startBufferLine-this._linePadding[i||"full"]&&t<=e.endBufferLine+this._linePadding[i||"full"]}_addLineToZone(e,t){e.startBufferLine=Math.min(e.startBufferLine,t),e.endBufferLine=Math.max(e.endBufferLine,t)}},Ai={full:0,left:0,center:0,right:0},Br={full:0,left:0,center:0,right:0},bo={full:0,left:0,center:0,right:0},Hl=class extends Le{constructor(e,t,i,n,o,l,c,u){var d;super(),this._viewportElement=e,this._screenElement=t,this._bufferService=i,this._decorationService=n,this._renderService=o,this._optionsService=l,this._themeService=c,this._coreBrowserService=u,this._colorZoneStore=new Dk,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(d=this._viewportElement.parentElement)==null||d.insertBefore(this._canvas,this._viewportElement),this._register(Ke(()=>{var _;return(_=this._canvas)==null?void 0:_.remove()}));let p=this._canvas.getContext("2d");if(p)this._ctx=p;else throw new Error("Ctx cannot be null");this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this._register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0))),this._register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this._register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})),this._register(this._renderService.onRender(()=>{(!this._containerHeight||this._containerHeight!==this._screenElement.clientHeight)&&(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._register(this._optionsService.onSpecificOptionChange("overviewRuler",()=>this._queueRefresh(!0))),this._register(this._themeService.onChangeColors(()=>this._queueRefresh())),this._queueRefresh(!0)}get _width(){var e;return((e=this._optionsService.options.overviewRuler)==null?void 0:e.width)||0}_refreshDrawConstants(){let e=Math.floor((this._canvas.width-1)/3),t=Math.ceil((this._canvas.width-1)/3);Br.full=this._canvas.width,Br.left=e,Br.center=t,Br.right=e,this._refreshDrawHeightConstants(),bo.full=1,bo.left=1,bo.center=1+Br.left,bo.right=1+Br.left+Br.center}_refreshDrawHeightConstants(){Ai.full=Math.round(2*this._coreBrowserService.dpr);let e=this._canvas.height/this._bufferService.buffer.lines.length,t=Math.round(Math.max(Math.min(e,12),6)*this._coreBrowserService.dpr);Ai.left=t,Ai.center=t,Ai.right=t}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Ai.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Ai.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Ai.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Ai.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let t of this._decorationService.decorations)this._colorZoneStore.addDecoration(t);this._ctx.lineWidth=1,this._renderRulerOutline();let e=this._colorZoneStore.zones;for(let t of e)t.position!=="full"&&this._renderColorZone(t);for(let t of e)t.position==="full"&&this._renderColorZone(t);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderRulerOutline(){this._ctx.fillStyle=this._themeService.colors.overviewRulerBorder.css,this._ctx.fillRect(0,0,1,this._canvas.height),this._optionsService.rawOptions.overviewRuler.showTopBorder&&this._ctx.fillRect(1,0,this._canvas.width-1,1),this._optionsService.rawOptions.overviewRuler.showBottomBorder&&this._ctx.fillRect(1,this._canvas.height-1,this._canvas.width-1,this._canvas.height)}_renderColorZone(e){this._ctx.fillStyle=e.color,this._ctx.fillRect(bo[e.position||"full"],Math.round((this._canvas.height-1)*(e.startBufferLine/this._bufferService.buffers.active.lines.length)-Ai[e.position||"full"]/2),Br[e.position||"full"],Math.round((this._canvas.height-1)*((e.endBufferLine-e.startBufferLine)/this._bufferService.buffers.active.lines.length)+Ai[e.position||"full"]))}_queueRefresh(e,t){this._shouldUpdateDimensions=e||this._shouldUpdateDimensions,this._shouldUpdateAnchor=t||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};Hl=tt([oe(2,$t),oe(3,ea),oe(4,pr),oe(5,Wt),oe(6,Tn),oe(7,fr)],Hl);var H;(e=>(e.NUL="\0",e.SOH="",e.STX="",e.ETX="",e.EOT="",e.ENQ="",e.ACK="",e.BEL="\x07",e.BS="\b",e.HT="	",e.LF=`
`,e.VT="\v",e.FF="\f",e.CR="\r",e.SO="",e.SI="",e.DLE="",e.DC1="",e.DC2="",e.DC3="",e.DC4="",e.NAK="",e.SYN="",e.ETB="",e.CAN="",e.EM="",e.SUB="",e.ESC="\x1B",e.FS="",e.GS="",e.RS="",e.US="",e.SP=" ",e.DEL=""))(H||(H={}));var Ll;(e=>(e.PAD="",e.HOP="",e.BPH="",e.NBH="",e.IND="",e.NEL="",e.SSA="",e.ESA="",e.HTS="",e.HTJ="",e.VTS="",e.PLD="",e.PLU="",e.RI="",e.SS2="",e.SS3="",e.DCS="",e.PU1="",e.PU2="",e.STS="",e.CCH="",e.MW="",e.SPA="",e.EPA="",e.SOS="",e.SGCI="",e.SCI="",e.CSI="",e.ST="",e.OSC="",e.PM="",e.APC=""))(Ll||(Ll={}));var x0;(e=>e.ST=`${H.ESC}\\`)(x0||(x0={}));var ud=class{constructor(e,t,i,n,o,l){this._textarea=e,this._compositionView=t,this._bufferService=i,this._optionsService=n,this._coreService=o,this._renderService=l,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(e){this._compositionView.textContent=e.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(e){if(this._isComposing||this._isSendingComposition){if(e.keyCode===20||e.keyCode===229||e.keyCode===16||e.keyCode===17||e.keyCode===18)return!1;this._finalizeComposition(!1)}return e.keyCode===229?(this._handleAnyTextareaChanges(),!1):!0}_finalizeComposition(e){if(this._compositionView.classList.remove("active"),this._isComposing=!1,e){let t={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){this._isSendingComposition=!1;let i;t.start+=this._dataAlreadySent.length,this._isComposing?i=this._textarea.value.substring(t.start,this._compositionPosition.start):i=this._textarea.value.substring(t.start),i.length>0&&this._coreService.triggerDataEvent(i,!0)}},0)}else{this._isSendingComposition=!1;let t=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(t,!0)}}_handleAnyTextareaChanges(){let e=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let t=this._textarea.value,i=t.replace(e,"");this._dataAlreadySent=i,t.length>e.length?this._coreService.triggerDataEvent(i,!0):t.length<e.length?this._coreService.triggerDataEvent(`${H.DEL}`,!0):t.length===e.length&&t!==e&&this._coreService.triggerDataEvent(t,!0)}},0)}updateCompositionElements(e){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let t=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),i=this._renderService.dimensions.css.cell.height,n=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,o=t*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=o+"px",this._compositionView.style.top=n+"px",this._compositionView.style.height=i+"px",this._compositionView.style.lineHeight=i+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let l=this._compositionView.getBoundingClientRect();this._textarea.style.left=o+"px",this._textarea.style.top=n+"px",this._textarea.style.width=Math.max(l.width,1)+"px",this._textarea.style.height=Math.max(l.height,1)+"px",this._textarea.style.lineHeight=l.height+"px"}e||setTimeout(()=>this.updateCompositionElements(!0),0)}}};ud=tt([oe(2,$t),oe(3,Wt),oe(4,Os),oe(5,pr)],ud);var St=0,wt=0,xt=0,Ze=0,h_={css:"#00000000",rgba:0},lt;(e=>{function t(o,l,c,u){return u!==void 0?`#${us(o)}${us(l)}${us(c)}${us(u)}`:`#${us(o)}${us(l)}${us(c)}`}e.toCss=t;function i(o,l,c,u=255){return(o<<24|l<<16|c<<8|u)>>>0}e.toRgba=i;function n(o,l,c,u){return{css:e.toCss(o,l,c,u),rgba:e.toRgba(o,l,c,u)}}e.toColor=n})(lt||(lt={}));var $e;(e=>{function t(p,d){if(Ze=(d.rgba&255)/255,Ze===1)return{css:d.css,rgba:d.rgba};let _=d.rgba>>24&255,g=d.rgba>>16&255,S=d.rgba>>8&255,w=p.rgba>>24&255,x=p.rgba>>16&255,C=p.rgba>>8&255;St=w+Math.round((_-w)*Ze),wt=x+Math.round((g-x)*Ze),xt=C+Math.round((S-C)*Ze);let k=lt.toCss(St,wt,xt),L=lt.toRgba(St,wt,xt);return{css:k,rgba:L}}e.blend=t;function i(p){return(p.rgba&255)===255}e.isOpaque=i;function n(p,d,_){let g=Nl.ensureContrastRatio(p.rgba,d.rgba,_);if(g)return lt.toColor(g>>24&255,g>>16&255,g>>8&255)}e.ensureContrastRatio=n;function o(p){let d=(p.rgba|255)>>>0;return[St,wt,xt]=Nl.toChannels(d),{css:lt.toCss(St,wt,xt),rgba:d}}e.opaque=o;function l(p,d){return Ze=Math.round(d*255),[St,wt,xt]=Nl.toChannels(p.rgba),{css:lt.toCss(St,wt,xt,Ze),rgba:lt.toRgba(St,wt,xt,Ze)}}e.opacity=l;function c(p,d){return Ze=p.rgba&255,l(p,Ze*d/255)}e.multiplyOpacity=c;function u(p){return[p.rgba>>24&255,p.rgba>>16&255,p.rgba>>8&255]}e.toColorRGB=u})($e||($e={}));var Ge;(e=>{let t,i;try{let o=document.createElement("canvas");o.width=1,o.height=1;let l=o.getContext("2d",{willReadFrequently:!0});l&&(t=l,t.globalCompositeOperation="copy",i=t.createLinearGradient(0,0,1,1))}catch{}function n(o){if(o.match(/#[\da-f]{3,8}/i))switch(o.length){case 4:return St=parseInt(o.slice(1,2).repeat(2),16),wt=parseInt(o.slice(2,3).repeat(2),16),xt=parseInt(o.slice(3,4).repeat(2),16),lt.toColor(St,wt,xt);case 5:return St=parseInt(o.slice(1,2).repeat(2),16),wt=parseInt(o.slice(2,3).repeat(2),16),xt=parseInt(o.slice(3,4).repeat(2),16),Ze=parseInt(o.slice(4,5).repeat(2),16),lt.toColor(St,wt,xt,Ze);case 7:return{css:o,rgba:(parseInt(o.slice(1),16)<<8|255)>>>0};case 9:return{css:o,rgba:parseInt(o.slice(1),16)>>>0}}let l=o.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(l)return St=parseInt(l[1]),wt=parseInt(l[2]),xt=parseInt(l[3]),Ze=Math.round((l[5]===void 0?1:parseFloat(l[5]))*255),lt.toColor(St,wt,xt,Ze);if(!t||!i)throw new Error("css.toColor: Unsupported css format");if(t.fillStyle=i,t.fillStyle=o,typeof t.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(t.fillRect(0,0,1,1),[St,wt,xt,Ze]=t.getImageData(0,0,1,1).data,Ze!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:lt.toRgba(St,wt,xt,Ze),css:o}}e.toColor=n})(Ge||(Ge={}));var At;(e=>{function t(n){return i(n>>16&255,n>>8&255,n&255)}e.relativeLuminance=t;function i(n,o,l){let c=n/255,u=o/255,p=l/255,d=c<=.03928?c/12.92:Math.pow((c+.055)/1.055,2.4),_=u<=.03928?u/12.92:Math.pow((u+.055)/1.055,2.4),g=p<=.03928?p/12.92:Math.pow((p+.055)/1.055,2.4);return d*.2126+_*.7152+g*.0722}e.relativeLuminance2=i})(At||(At={}));var Nl;(e=>{function t(c,u){if(Ze=(u&255)/255,Ze===1)return u;let p=u>>24&255,d=u>>16&255,_=u>>8&255,g=c>>24&255,S=c>>16&255,w=c>>8&255;return St=g+Math.round((p-g)*Ze),wt=S+Math.round((d-S)*Ze),xt=w+Math.round((_-w)*Ze),lt.toRgba(St,wt,xt)}e.blend=t;function i(c,u,p){let d=At.relativeLuminance(c>>8),_=At.relativeLuminance(u>>8);if(tr(d,_)<p){if(_<d){let w=n(c,u,p),x=tr(d,At.relativeLuminance(w>>8));if(x<p){let C=o(c,u,p),k=tr(d,At.relativeLuminance(C>>8));return x>k?w:C}return w}let g=o(c,u,p),S=tr(d,At.relativeLuminance(g>>8));if(S<p){let w=n(c,u,p),x=tr(d,At.relativeLuminance(w>>8));return S>x?g:w}return g}}e.ensureContrastRatio=i;function n(c,u,p){let d=c>>24&255,_=c>>16&255,g=c>>8&255,S=u>>24&255,w=u>>16&255,x=u>>8&255,C=tr(At.relativeLuminance2(S,w,x),At.relativeLuminance2(d,_,g));for(;C<p&&(S>0||w>0||x>0);)S-=Math.max(0,Math.ceil(S*.1)),w-=Math.max(0,Math.ceil(w*.1)),x-=Math.max(0,Math.ceil(x*.1)),C=tr(At.relativeLuminance2(S,w,x),At.relativeLuminance2(d,_,g));return(S<<24|w<<16|x<<8|255)>>>0}e.reduceLuminance=n;function o(c,u,p){let d=c>>24&255,_=c>>16&255,g=c>>8&255,S=u>>24&255,w=u>>16&255,x=u>>8&255,C=tr(At.relativeLuminance2(S,w,x),At.relativeLuminance2(d,_,g));for(;C<p&&(S<255||w<255||x<255);)S=Math.min(255,S+Math.ceil((255-S)*.1)),w=Math.min(255,w+Math.ceil((255-w)*.1)),x=Math.min(255,x+Math.ceil((255-x)*.1)),C=tr(At.relativeLuminance2(S,w,x),At.relativeLuminance2(d,_,g));return(S<<24|w<<16|x<<8|255)>>>0}e.increaseLuminance=o;function l(c){return[c>>24&255,c>>16&255,c>>8&255,c&255]}e.toChannels=l})(Nl||(Nl={}));function us(e){let t=e.toString(16);return t.length<2?"0"+t:t}function tr(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}var Mk=class extends Zo{constructor(e,t,i){super(),this.content=0,this.combinedData="",this.fg=e.fg,this.bg=e.bg,this.combinedData=t,this._width=i}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},$l=class{constructor(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new yi}register(e){let t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id}deregister(e){for(let t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1}getJoinedCharacters(e){if(this._characterJoiners.length===0)return[];let t=this._bufferService.buffer.lines.get(e);if(!t||t.length===0)return[];let i=[],n=t.translateToString(!0),o=0,l=0,c=0,u=t.getFg(0),p=t.getBg(0);for(let d=0;d<t.getTrimmedLength();d++)if(t.loadCell(d,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==u||this._workCell.bg!==p){if(d-o>1){let _=this._getJoinedRanges(n,c,l,t,o);for(let g=0;g<_.length;g++)i.push(_[g])}o=d,c=l,u=this._workCell.fg,p=this._workCell.bg}l+=this._workCell.getChars().length||Qr.length}if(this._bufferService.cols-o>1){let d=this._getJoinedRanges(n,c,l,t,o);for(let _=0;_<d.length;_++)i.push(d[_])}return i}_getJoinedRanges(e,t,i,n,o){let l=e.substring(t,i),c=[];try{c=this._characterJoiners[0].handler(l)}catch(u){console.error(u)}for(let u=1;u<this._characterJoiners.length;u++)try{let p=this._characterJoiners[u].handler(l);for(let d=0;d<p.length;d++)$l._mergeRanges(c,p[d])}catch(p){console.error(p)}return this._stringRangesToCellRanges(c,n,o),c}_stringRangesToCellRanges(e,t,i){let n=0,o=!1,l=0,c=e[n];if(c){for(let u=i;u<this._bufferService.cols;u++){let p=t.getWidth(u),d=t.getString(u).length||Qr.length;if(p!==0){if(!o&&c[0]<=l&&(c[0]=u,o=!0),c[1]<=l){if(c[1]=u,c=e[++n],!c)break;c[0]<=l?(c[0]=u,o=!0):o=!1}l+=d}}c&&(c[1]=this._bufferService.cols)}}static _mergeRanges(e,t){let i=!1;for(let n=0;n<e.length;n++){let o=e[n];if(i){if(t[1]<=o[0])return e[n-1][1]=t[1],e;if(t[1]<=o[1])return e[n-1][1]=Math.max(t[1],o[1]),e.splice(n,1),e;e.splice(n,1),n--}else{if(t[1]<=o[0])return e.splice(n,0,t),e;if(t[1]<=o[1])return o[0]=Math.min(t[0],o[0]),e;t[0]<o[1]&&(o[0]=Math.min(t[0],o[0]),i=!0);continue}}return i?e[e.length-1][1]=t[1]:e.push(t),e}};$l=tt([oe(0,$t)],$l);function Tk(e){return 57508<=e&&e<=57558}function Ok(e){return 9472<=e&&e<=9631}function Bk(e){return Tk(e)||Ok(e)}function Ik(){return{css:{canvas:vl(),cell:vl()},device:{canvas:vl(),cell:vl(),char:{width:0,height:0,left:0,top:0}}}}function vl(){return{width:0,height:0}}var dd=class{constructor(e,t,i,n,o,l,c){this._document=e,this._characterJoinerService=t,this._optionsService=i,this._coreBrowserService=n,this._coreService=o,this._decorationService=l,this._themeService=c,this._workCell=new yi,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(e,t,i){this._selectionStart=e,this._selectionEnd=t,this._columnSelectMode=i}createRow(e,t,i,n,o,l,c,u,p,d,_){let g=[],S=this._characterJoinerService.getJoinedCharacters(t),w=this._themeService.colors,x=e.getNoBgTrimmedLength();i&&x<l+1&&(x=l+1);let C,k=0,L="",W=0,O=0,T=0,$=0,G=!1,le=0,ue=!1,ye=0,ie=0,se=[],z=d!==-1&&_!==-1;for(let j=0;j<x;j++){e.loadCell(j,this._workCell);let U=this._workCell.getWidth();if(U===0)continue;let V=!1,K=j>=ie,te=j,A=this._workCell;if(S.length>0&&j===S[0][0]&&K){let Te=S.shift(),Xr=this._isCellInSelection(Te[0],t);for(W=Te[0]+1;W<Te[1];W++)K&&(K=Xr===this._isCellInSelection(W,t));K&&(K=!i||l<Te[0]||l>=Te[1]),K?(V=!0,A=new Mk(this._workCell,e.translateToString(!0,Te[0],Te[1]),Te[1]-Te[0]),te=Te[1]-1,U=A.getWidth()):ie=Te[1]}let re=this._isCellInSelection(j,t),Z=i&&j===l,E=z&&j>=d&&j<=_,M=!1;this._decorationService.forEachDecorationAtCell(j,t,void 0,Te=>{M=!0});let Y=A.getChars()||Qr;if(Y===" "&&(A.isUnderline()||A.isOverline())&&(Y=""),ye=U*u-p.get(Y,A.isBold(),A.isItalic()),!C)C=this._document.createElement("span");else if(k&&(re&&ue||!re&&!ue&&A.bg===O)&&(re&&ue&&w.selectionForeground||A.fg===T)&&A.extended.ext===$&&E===G&&ye===le&&!Z&&!V&&!M&&K){A.isInvisible()?L+=Qr:L+=Y,k++;continue}else k&&(C.textContent=L),C=this._document.createElement("span"),k=0,L="";if(O=A.bg,T=A.fg,$=A.extended.ext,G=E,le=ye,ue=re,V&&l>=j&&l<=te&&(l=j),!this._coreService.isCursorHidden&&Z&&this._coreService.isCursorInitialized){if(se.push("xterm-cursor"),this._coreBrowserService.isFocused)c&&se.push("xterm-cursor-blink"),se.push(n==="bar"?"xterm-cursor-bar":n==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(o)switch(o){case"outline":se.push("xterm-cursor-outline");break;case"block":se.push("xterm-cursor-block");break;case"bar":se.push("xterm-cursor-bar");break;case"underline":se.push("xterm-cursor-underline");break}}if(A.isBold()&&se.push("xterm-bold"),A.isItalic()&&se.push("xterm-italic"),A.isDim()&&se.push("xterm-dim"),A.isInvisible()?L=Qr:L=A.getChars()||Qr,A.isUnderline()&&(se.push(`xterm-underline-${A.extended.underlineStyle}`),L===" "&&(L=""),!A.isUnderlineColorDefault()))if(A.isUnderlineColorRGB())C.style.textDecorationColor=`rgb(${Zo.toColorRGB(A.getUnderlineColor()).join(",")})`;else{let Te=A.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&A.isBold()&&Te<8&&(Te+=8),C.style.textDecorationColor=w.ansi[Te].css}A.isOverline()&&(se.push("xterm-overline"),L===" "&&(L="")),A.isStrikethrough()&&se.push("xterm-strikethrough"),E&&(C.style.textDecoration="underline");let ce=A.getFgColor(),_e=A.getFgColorMode(),pe=A.getBgColor(),Ee=A.getBgColorMode(),de=!!A.isInverse();if(de){let Te=ce;ce=pe,pe=Te;let Xr=_e;_e=Ee,Ee=Xr}let ge,Ve,bt=!1;this._decorationService.forEachDecorationAtCell(j,t,void 0,Te=>{Te.options.layer!=="top"&&bt||(Te.backgroundColorRGB&&(Ee=50331648,pe=Te.backgroundColorRGB.rgba>>8&16777215,ge=Te.backgroundColorRGB),Te.foregroundColorRGB&&(_e=50331648,ce=Te.foregroundColorRGB.rgba>>8&16777215,Ve=Te.foregroundColorRGB),bt=Te.options.layer==="top")}),!bt&&re&&(ge=this._coreBrowserService.isFocused?w.selectionBackgroundOpaque:w.selectionInactiveBackgroundOpaque,pe=ge.rgba>>8&16777215,Ee=50331648,bt=!0,w.selectionForeground&&(_e=50331648,ce=w.selectionForeground.rgba>>8&16777215,Ve=w.selectionForeground)),bt&&se.push("xterm-decoration-top");let Ot;switch(Ee){case 16777216:case 33554432:Ot=w.ansi[pe],se.push(`xterm-bg-${pe}`);break;case 50331648:Ot=lt.toColor(pe>>16,pe>>8&255,pe&255),this._addStyle(C,`background-color:#${u_((pe>>>0).toString(16),"0",6)}`);break;case 0:default:de?(Ot=w.foreground,se.push("xterm-bg-257")):Ot=w.background}switch(ge||A.isDim()&&(ge=$e.multiplyOpacity(Ot,.5)),_e){case 16777216:case 33554432:A.isBold()&&ce<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ce+=8),this._applyMinimumContrast(C,Ot,w.ansi[ce],A,ge,void 0)||se.push(`xterm-fg-${ce}`);break;case 50331648:let Te=lt.toColor(ce>>16&255,ce>>8&255,ce&255);this._applyMinimumContrast(C,Ot,Te,A,ge,Ve)||this._addStyle(C,`color:#${u_(ce.toString(16),"0",6)}`);break;case 0:default:this._applyMinimumContrast(C,Ot,w.foreground,A,ge,Ve)||de&&se.push("xterm-fg-257")}se.length&&(C.className=se.join(" "),se.length=0),!Z&&!V&&!M&&K?k++:C.textContent=L,ye!==this.defaultSpacing&&(C.style.letterSpacing=`${ye}px`),g.push(C),j=te}return C&&k&&(C.textContent=L),g}_applyMinimumContrast(e,t,i,n,o,l){if(this._optionsService.rawOptions.minimumContrastRatio===1||Bk(n.getCode()))return!1;let c=this._getContrastCache(n),u;if(!o&&!l&&(u=c.getColor(t.rgba,i.rgba)),u===void 0){let p=this._optionsService.rawOptions.minimumContrastRatio/(n.isDim()?2:1);u=$e.ensureContrastRatio(o||t,l||i,p),c.setColor((o||t).rgba,(l||i).rgba,u??null)}return u?(this._addStyle(e,`color:${u.css}`),!0):!1}_getContrastCache(e){return e.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(e,t){e.setAttribute("style",`${e.getAttribute("style")||""}${t};`)}_isCellInSelection(e,t){let i=this._selectionStart,n=this._selectionEnd;return!i||!n?!1:this._columnSelectMode?i[0]<=n[0]?e>=i[0]&&t>=i[1]&&e<n[0]&&t<=n[1]:e<i[0]&&t>=i[1]&&e>=n[0]&&t<=n[1]:t>i[1]&&t<n[1]||i[1]===n[1]&&t===i[1]&&e>=i[0]&&e<n[0]||i[1]<n[1]&&t===n[1]&&e<n[0]||i[1]<n[1]&&t===i[1]&&e>=i[0]}};dd=tt([oe(1,s0),oe(2,Wt),oe(3,fr),oe(4,Os),oe(5,ea),oe(6,Tn)],dd);function u_(e,t,i){for(;e.length<i;)e=t+e;return e}var Ak=class{constructor(e,t){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=e.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let i=e.createElement("span");i.classList.add("xterm-char-measure-element");let n=e.createElement("span");n.classList.add("xterm-char-measure-element"),n.style.fontWeight="bold";let o=e.createElement("span");o.classList.add("xterm-char-measure-element"),o.style.fontStyle="italic";let l=e.createElement("span");l.classList.add("xterm-char-measure-element"),l.style.fontWeight="bold",l.style.fontStyle="italic",this._measureElements=[i,n,o,l],this._container.appendChild(i),this._container.appendChild(n),this._container.appendChild(o),this._container.appendChild(l),t.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(e,t,i,n){e===this._font&&t===this._fontSize&&i===this._weight&&n===this._weightBold||(this._font=e,this._fontSize=t,this._weight=i,this._weightBold=n,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${i}`,this._measureElements[1].style.fontWeight=`${n}`,this._measureElements[2].style.fontWeight=`${i}`,this._measureElements[3].style.fontWeight=`${n}`,this.clear())}get(e,t,i){let n=0;if(!t&&!i&&e.length===1&&(n=e.charCodeAt(0))<256){if(this._flat[n]!==-9999)return this._flat[n];let c=this._measure(e,0);return c>0&&(this._flat[n]=c),c}let o=e;t&&(o+="B"),i&&(o+="I");let l=this._holey.get(o);if(l===void 0){let c=0;t&&(c|=1),i&&(c|=2),l=this._measure(e,c),l>0&&this._holey.set(o,l)}return l}_measure(e,t){let i=this._measureElements[t];return i.textContent=e.repeat(32),i.offsetWidth/32}},jk=class{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(e,t,i,n=!1){if(this.selectionStart=t,this.selectionEnd=i,!t||!i||t[0]===i[0]&&t[1]===i[1]){this.clear();return}let o=e.buffers.active.ydisp,l=t[1]-o,c=i[1]-o,u=Math.max(l,0),p=Math.min(c,e.rows-1);if(u>=e.rows||p<0){this.clear();return}this.hasSelection=!0,this.columnSelectMode=n,this.viewportStartRow=l,this.viewportEndRow=c,this.viewportCappedStartRow=u,this.viewportCappedEndRow=p,this.startCol=t[0],this.endCol=i[0]}isCellSelected(e,t,i){return this.hasSelection?(i-=e.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?t>=this.startCol&&i>=this.viewportCappedStartRow&&t<this.endCol&&i<=this.viewportCappedEndRow:t<this.startCol&&i>=this.viewportCappedStartRow&&t>=this.endCol&&i<=this.viewportCappedEndRow:i>this.viewportStartRow&&i<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&i===this.viewportStartRow&&t>=this.startCol&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportEndRow&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportStartRow&&t>=this.startCol):!1}};function Fk(){return new jk}var gu="xterm-dom-renderer-owner-",fi="xterm-rows",yl="xterm-fg-",d_="xterm-bg-",ko="xterm-focus",Sl="xterm-selection",zk=1,fd=class extends Le{constructor(e,t,i,n,o,l,c,u,p,d,_,g,S,w){super(),this._terminal=e,this._document=t,this._element=i,this._screenElement=n,this._viewportElement=o,this._helperContainer=l,this._linkifier2=c,this._charSizeService=p,this._optionsService=d,this._bufferService=_,this._coreService=g,this._coreBrowserService=S,this._themeService=w,this._terminalClass=zk++,this._rowElements=[],this._selectionRenderModel=Fk(),this.onRequestRedraw=this._register(new ee).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(fi),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(Sl),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=Ik(),this._updateDimensions(),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._themeService.onChangeColors(x=>this._injectCss(x))),this._injectCss(this._themeService.colors),this._rowFactory=u.createInstance(dd,document),this._element.classList.add(gu+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this._register(this._linkifier2.onShowLinkUnderline(x=>this._handleLinkHover(x))),this._register(this._linkifier2.onHideLinkUnderline(x=>this._handleLinkLeave(x))),this._register(Ke(()=>{this._element.classList.remove(gu+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new Ak(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let e=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*e,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*e),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/e),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/e),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let i of this._rowElements)i.style.width=`${this.dimensions.css.canvas.width}px`,i.style.height=`${this.dimensions.css.cell.height}px`,i.style.lineHeight=`${this.dimensions.css.cell.height}px`,i.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let t=`${this._terminalSelector} .${fi} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=t,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(e){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let t=`${this._terminalSelector} .${fi} { pointer-events: none; color: ${e.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;t+=`${this._terminalSelector} .${fi} .xterm-dim { color: ${$e.multiplyOpacity(e.foreground,.5).css};}`,t+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let i=`blink_underline_${this._terminalClass}`,n=`blink_bar_${this._terminalClass}`,o=`blink_block_${this._terminalClass}`;t+=`@keyframes ${i} { 50% {  border-bottom-style: hidden; }}`,t+=`@keyframes ${n} { 50% {  box-shadow: none; }}`,t+=`@keyframes ${o} { 0% {  background-color: ${e.cursor.css};  color: ${e.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${e.cursor.css}; }}`,t+=`${this._terminalSelector} .${fi}.${ko} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${i} 1s step-end infinite;}${this._terminalSelector} .${fi}.${ko} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${n} 1s step-end infinite;}${this._terminalSelector} .${fi}.${ko} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${o} 1s step-end infinite;}${this._terminalSelector} .${fi} .xterm-cursor.xterm-cursor-block { background-color: ${e.cursor.css}; color: ${e.cursorAccent.css};}${this._terminalSelector} .${fi} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${e.cursor.css} !important; color: ${e.cursorAccent.css} !important;}${this._terminalSelector} .${fi} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${e.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${fi} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${e.cursor.css} inset;}${this._terminalSelector} .${fi} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${e.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,t+=`${this._terminalSelector} .${Sl} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${Sl} div { position: absolute; background-color: ${e.selectionBackgroundOpaque.css};}${this._terminalSelector} .${Sl} div { position: absolute; background-color: ${e.selectionInactiveBackgroundOpaque.css};}`;for(let[l,c]of e.ansi.entries())t+=`${this._terminalSelector} .${yl}${l} { color: ${c.css}; }${this._terminalSelector} .${yl}${l}.xterm-dim { color: ${$e.multiplyOpacity(c,.5).css}; }${this._terminalSelector} .${d_}${l} { background-color: ${c.css}; }`;t+=`${this._terminalSelector} .${yl}257 { color: ${$e.opaque(e.background).css}; }${this._terminalSelector} .${yl}257.xterm-dim { color: ${$e.multiplyOpacity($e.opaque(e.background),.5).css}; }${this._terminalSelector} .${d_}257 { background-color: ${e.foreground.css}; }`,this._themeStyleElement.textContent=t}_setDefaultSpacing(){let e=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${e}px`,this._rowFactory.defaultSpacing=e}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(e,t){for(let i=this._rowElements.length;i<=t;i++){let n=this._document.createElement("div");this._rowContainer.appendChild(n),this._rowElements.push(n)}for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(e,t){this._refreshRowElements(e,t),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(ko),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(ko),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(e,t,i){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(e,t,i),this.renderRows(0,this._bufferService.rows-1),!e||!t||(this._selectionRenderModel.update(this._terminal,e,t,i),!this._selectionRenderModel.hasSelection))return;let n=this._selectionRenderModel.viewportStartRow,o=this._selectionRenderModel.viewportEndRow,l=this._selectionRenderModel.viewportCappedStartRow,c=this._selectionRenderModel.viewportCappedEndRow,u=this._document.createDocumentFragment();if(i){let p=e[0]>t[0];u.appendChild(this._createSelectionElement(l,p?t[0]:e[0],p?e[0]:t[0],c-l+1))}else{let p=n===l?e[0]:0,d=l===o?t[0]:this._bufferService.cols;u.appendChild(this._createSelectionElement(l,p,d));let _=c-l-1;if(u.appendChild(this._createSelectionElement(l+1,0,this._bufferService.cols,_)),l!==c){let g=o===c?t[0]:this._bufferService.cols;u.appendChild(this._createSelectionElement(c,0,g))}}this._selectionContainer.appendChild(u)}_createSelectionElement(e,t,i,n=1){let o=this._document.createElement("div"),l=t*this.dimensions.css.cell.width,c=this.dimensions.css.cell.width*(i-t);return l+c>this.dimensions.css.canvas.width&&(c=this.dimensions.css.canvas.width-l),o.style.height=`${n*this.dimensions.css.cell.height}px`,o.style.top=`${e*this.dimensions.css.cell.height}px`,o.style.left=`${l}px`,o.style.width=`${c}px`,o}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let e of this._rowElements)e.replaceChildren()}renderRows(e,t){let i=this._bufferService.buffer,n=i.ybase+i.y,o=Math.min(i.x,this._bufferService.cols-1),l=this._coreService.decPrivateModes.cursorBlink??this._optionsService.rawOptions.cursorBlink,c=this._coreService.decPrivateModes.cursorStyle??this._optionsService.rawOptions.cursorStyle,u=this._optionsService.rawOptions.cursorInactiveStyle;for(let p=e;p<=t;p++){let d=p+i.ydisp,_=this._rowElements[p],g=i.lines.get(d);if(!_||!g)break;_.replaceChildren(...this._rowFactory.createRow(g,d,d===n,c,u,o,l,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${gu}${this._terminalClass}`}_handleLinkHover(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)}_handleLinkLeave(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)}_setCellUnderline(e,t,i,n,o,l){i<0&&(e=0),n<0&&(t=0);let c=this._bufferService.rows-1;i=Math.max(Math.min(i,c),0),n=Math.max(Math.min(n,c),0),o=Math.min(o,this._bufferService.cols);let u=this._bufferService.buffer,p=u.ybase+u.y,d=Math.min(u.x,o-1),_=this._optionsService.rawOptions.cursorBlink,g=this._optionsService.rawOptions.cursorStyle,S=this._optionsService.rawOptions.cursorInactiveStyle;for(let w=i;w<=n;++w){let x=w+u.ydisp,C=this._rowElements[w],k=u.lines.get(x);if(!C||!k)break;C.replaceChildren(...this._rowFactory.createRow(k,x,x===p,g,S,d,_,this.dimensions.css.cell.width,this._widthCache,l?w===i?e:0:-1,l?(w===n?t:o)-1:-1))}}};fd=tt([oe(7,Kd),oe(8,Zl),oe(9,Wt),oe(10,$t),oe(11,Os),oe(12,fr),oe(13,Tn)],fd);var pd=class extends Le{constructor(e,t,i){super(),this._optionsService=i,this.width=0,this.height=0,this._onCharSizeChange=this._register(new ee),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this._register(new $k(this._optionsService))}catch{this._measureStrategy=this._register(new Hk(e,t,this._optionsService))}this._register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){let e=this._measureStrategy.measure();(e.width!==this.width||e.height!==this.height)&&(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};pd=tt([oe(2,Wt)],pd);var C0=class extends Le{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(e,t){e!==void 0&&e>0&&t!==void 0&&t>0&&(this._result.width=e,this._result.height=t)}},Hk=class extends C0{constructor(e,t,i){super(),this._document=e,this._parentElement=t,this._optionsService=i,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}},$k=class extends C0{constructor(e){super(),this._optionsService=e,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let t=this._ctx.measureText("W");if(!("width"in t&&"fontBoundingBoxAscent"in t&&"fontBoundingBoxDescent"in t))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let e=this._ctx.measureText("W");return this._validateAndSet(e.width,e.fontBoundingBoxAscent+e.fontBoundingBoxDescent),this._result}},Wk=class extends Le{constructor(e,t,i){super(),this._textarea=e,this._window=t,this.mainDocument=i,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=this._register(new Uk(this._window)),this._onDprChange=this._register(new ee),this.onDprChange=this._onDprChange.event,this._onWindowChange=this._register(new ee),this.onWindowChange=this._onWindowChange.event,this._register(this.onWindowChange(n=>this._screenDprMonitor.setWindow(n))),this._register(Pt.forward(this._screenDprMonitor.onDprChange,this._onDprChange)),this._register(be(this._textarea,"focus",()=>this._isFocused=!0)),this._register(be(this._textarea,"blur",()=>this._isFocused=!1))}get window(){return this._window}set window(e){this._window!==e&&(this._window=e,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}},Uk=class extends Le{constructor(e){super(),this._parentWindow=e,this._windowResizeListener=this._register(new Pn),this._onDprChange=this._register(new ee),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this._register(Ke(()=>this.clearListener()))}setWindow(e){this._parentWindow=e,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=be(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var e;this._outerListener&&((e=this._resolutionMediaMatchList)==null||e.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){!this._resolutionMediaMatchList||!this._outerListener||(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}},Kk=class extends Le{constructor(){super(),this.linkProviders=[],this._register(Ke(()=>this.linkProviders.length=0))}registerLinkProvider(e){return this.linkProviders.push(e),{dispose:()=>{let t=this.linkProviders.indexOf(e);t!==-1&&this.linkProviders.splice(t,1)}}}};function Zd(e,t,i){let n=i.getBoundingClientRect(),o=e.getComputedStyle(i),l=parseInt(o.getPropertyValue("padding-left")),c=parseInt(o.getPropertyValue("padding-top"));return[t.clientX-n.left-l,t.clientY-n.top-c]}function Vk(e,t,i,n,o,l,c,u,p){if(!l)return;let d=Zd(e,t,i);if(d)return d[0]=Math.ceil((d[0]+(p?c/2:0))/c),d[1]=Math.ceil(d[1]/u),d[0]=Math.min(Math.max(d[0],1),n+(p?1:0)),d[1]=Math.min(Math.max(d[1],1),o),d}var md=class{constructor(e,t){this._renderService=e,this._charSizeService=t}getCoords(e,t,i,n,o){return Vk(window,e,t,i,n,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,o)}getMouseReportCoords(e,t){let i=Zd(window,e,t);if(this._charSizeService.hasValidSize)return i[0]=Math.min(Math.max(i[0],0),this._renderService.dimensions.css.canvas.width-1),i[1]=Math.min(Math.max(i[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(i[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(i[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(i[0]),y:Math.floor(i[1])}}};md=tt([oe(0,pr),oe(1,Zl)],md);var qk=class{constructor(t,i){this._renderCallback=t,this._coreBrowserService=i,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(t){return this._refreshCallbacks.push(t),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(t,i,n){this._rowCount=n,t=t!==void 0?t:0,i=i!==void 0?i:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,t):t,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,i):i,!this._animationFrame&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0){this._runRefreshCallbacks();return}let t=Math.max(this._rowStart,0),i=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(t,i),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let t of this._refreshCallbacks)t(0);this._refreshCallbacks=[]}},b0={};rb(b0,{getSafariVersion:()=>Yk,isChromeOS:()=>P0,isFirefox:()=>k0,isIpad:()=>Gk,isIphone:()=>Xk,isLegacyEdge:()=>Qk,isLinux:()=>ef,isMac:()=>Wl,isNode:()=>ec,isSafari:()=>E0,isWindows:()=>R0});var ec=typeof process<"u"&&"title"in process,ta=ec?"node":navigator.userAgent,ia=ec?"node":navigator.platform,k0=ta.includes("Firefox"),Qk=ta.includes("Edge"),E0=/^((?!chrome|android).)*safari/i.test(ta);function Yk(){if(!E0)return 0;let e=ta.match(/Version\/(\d+)/);return e===null||e.length<2?0:parseInt(e[1])}var Wl=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(ia),Gk=ia==="iPad",Xk=ia==="iPhone",R0=["Windows","Win16","Win32","WinCE"].includes(ia),ef=ia.indexOf("Linux")>=0,P0=/\bCrOS\b/.test(ta),L0=class{constructor(){this._tasks=[],this._i=0}enqueue(e){this._tasks.push(e),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(e){this._idleCallback=void 0;let t=0,i=0,n=e.timeRemaining(),o=0;for(;this._i<this._tasks.length;){if(t=performance.now(),this._tasks[this._i]()||this._i++,t=Math.max(1,performance.now()-t),i=Math.max(t,i),o=e.timeRemaining(),i*1.5>o){n-t<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-t))}ms`),this._start();return}n=o}this.clear()}},Jk=class extends L0{_requestCallback(e){return setTimeout(()=>e(this._createDeadline(16)))}_cancelCallback(e){clearTimeout(e)}_createDeadline(e){let t=performance.now()+e;return{timeRemaining:()=>Math.max(0,t-performance.now())}}},Zk=class extends L0{_requestCallback(e){return requestIdleCallback(e)}_cancelCallback(e){cancelIdleCallback(e)}},Ul=!ec&&"requestIdleCallback"in window?Zk:Jk,e2=class{constructor(){this._queue=new Ul}set(e){this._queue.clear(),this._queue.enqueue(e)}flush(){this._queue.flush()}},gd=class extends Le{constructor(e,t,i,n,o,l,c,u,p){super(),this._rowCount=e,this._optionsService=i,this._charSizeService=n,this._coreService=o,this._coreBrowserService=u,this._renderer=this._register(new Pn),this._pausedResizeTask=new e2,this._observerDisposable=this._register(new Pn),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this._register(new ee),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this._register(new ee),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this._register(new ee),this.onRender=this._onRender.event,this._onRefreshRequest=this._register(new ee),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new qk((d,_)=>this._renderRows(d,_),this._coreBrowserService),this._register(this._renderDebouncer),this._syncOutputHandler=new t2(this._coreBrowserService,this._coreService,()=>this._fullRefresh()),this._register(Ke(()=>this._syncOutputHandler.dispose())),this._register(this._coreBrowserService.onDprChange(()=>this.handleDevicePixelRatioChange())),this._register(c.onResize(()=>this._fullRefresh())),this._register(c.buffers.onBufferActivate(()=>{var d;return(d=this._renderer.value)==null?void 0:d.clear()})),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this._register(l.onDecorationRegistered(()=>this._fullRefresh())),this._register(l.onDecorationRemoved(()=>this._fullRefresh())),this._register(this._optionsService.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(c.cols,c.rows),this._fullRefresh()})),this._register(this._optionsService.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(c.buffer.y,c.buffer.y,!0))),this._register(p.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(this._coreBrowserService.window,t),this._register(this._coreBrowserService.onWindowChange(d=>this._registerIntersectionObserver(d,t)))}get dimensions(){return this._renderer.value.dimensions}_registerIntersectionObserver(e,t){if("IntersectionObserver"in e){let i=new e.IntersectionObserver(n=>this._handleIntersectionChange(n[n.length-1]),{threshold:0});i.observe(t),this._observerDisposable.value=Ke(()=>i.disconnect())}}_handleIntersectionChange(e){this._isPaused=e.isIntersecting===void 0?e.intersectionRatio===0:!e.isIntersecting,!this._isPaused&&!this._charSizeService.hasValidSize&&this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(e,t,i=!1){if(this._isPaused){this._needsFullRefresh=!0;return}if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(e,t);return}let n=this._syncOutputHandler.flush();n&&(e=Math.min(e,n.start),t=Math.max(t,n.end)),i||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,t,this._rowCount)}_renderRows(e,t){if(this._renderer.value){if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(e,t);return}e=Math.min(e,this._rowCount-1),t=Math.min(t,this._rowCount-1),this._renderer.value.renderRows(e,t),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:t}),this._onRender.fire({start:e,end:t}),this._isNextRenderRedrawOnly=!0}}resize(e,t){this._rowCount=t,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(e){this._renderer.value=e,this._renderer.value&&(this._renderer.value.onRequestRedraw(t=>this.refreshRows(t.start,t.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(e){return this._renderDebouncer.addRefreshCallback(e)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var e,t;this._renderer.value&&((t=(e=this._renderer.value).clearTextureAtlas)==null||t.call(e),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(e,t){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var i;return(i=this._renderer.value)==null?void 0:i.handleResize(e,t)}):this._renderer.value.handleResize(e,t),this._fullRefresh())}handleCharSizeChanged(){var e;(e=this._renderer.value)==null||e.handleCharSizeChanged()}handleBlur(){var e;(e=this._renderer.value)==null||e.handleBlur()}handleFocus(){var e;(e=this._renderer.value)==null||e.handleFocus()}handleSelectionChanged(e,t,i){var n;this._selectionState.start=e,this._selectionState.end=t,this._selectionState.columnSelectMode=i,(n=this._renderer.value)==null||n.handleSelectionChanged(e,t,i)}handleCursorMove(){var e;(e=this._renderer.value)==null||e.handleCursorMove()}clear(){var e;(e=this._renderer.value)==null||e.clear()}};gd=tt([oe(2,Wt),oe(3,Zl),oe(4,Os),oe(5,ea),oe(6,$t),oe(7,fr),oe(8,Tn)],gd);var t2=class{constructor(e,t,i){this._coreBrowserService=e,this._coreService=t,this._onTimeout=i,this._start=0,this._end=0,this._isBuffering=!1}bufferRows(e,t){this._isBuffering?(this._start=Math.min(this._start,e),this._end=Math.max(this._end,t)):(this._start=e,this._end=t,this._isBuffering=!0),this._timeout===void 0&&(this._timeout=this._coreBrowserService.window.setTimeout(()=>{this._timeout=void 0,this._coreService.decPrivateModes.synchronizedOutput=!1,this._onTimeout()},1e3))}flush(){if(this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0),!this._isBuffering)return;let e={start:this._start,end:this._end};return this._isBuffering=!1,e}dispose(){this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0)}};function i2(e,t,i,n){let o=i.buffer.x,l=i.buffer.y;if(!i.buffer.hasScrollback)return n2(o,l,e,t,i,n)+tc(l,t,i,n)+o2(o,l,e,t,i,n);let c;if(l===t)return c=o>e?"D":"C",Uo(Math.abs(o-e),Wo(c,n));c=l>t?"D":"C";let u=Math.abs(l-t),p=s2(l>t?e:o,i)+(u-1)*i.cols+1+r2(l>t?o:e);return Uo(p,Wo(c,n))}function r2(e,t){return e-1}function s2(e,t){return t.cols-e}function n2(e,t,i,n,o,l){return tc(t,n,o,l).length===0?"":Uo(D0(e,t,e,t-Ds(t,o),!1,o).length,Wo("D",l))}function tc(e,t,i,n){let o=e-Ds(e,i),l=t-Ds(t,i),c=Math.abs(o-l)-a2(e,t,i);return Uo(c,Wo(N0(e,t),n))}function o2(e,t,i,n,o,l){let c;tc(t,n,o,l).length>0?c=n-Ds(n,o):c=t;let u=n,p=l2(e,t,i,n,o,l);return Uo(D0(e,c,i,u,p==="C",o).length,Wo(p,l))}function a2(e,t,i){var c;let n=0,o=e-Ds(e,i),l=t-Ds(t,i);for(let u=0;u<Math.abs(o-l);u++){let p=N0(e,t)==="A"?-1:1;(c=i.buffer.lines.get(o+p*u))!=null&&c.isWrapped&&n++}return n}function Ds(e,t){let i=0,n=t.buffer.lines.get(e),o=n==null?void 0:n.isWrapped;for(;o&&e>=0&&e<t.rows;)i++,n=t.buffer.lines.get(--e),o=n==null?void 0:n.isWrapped;return i}function l2(e,t,i,n,o,l){let c;return tc(i,n,o,l).length>0?c=n-Ds(n,o):c=t,e<i&&c<=n||e>=i&&c<n?"C":"D"}function N0(e,t){return e>t?"A":"B"}function D0(e,t,i,n,o,l){let c=e,u=t,p="";for(;(c!==i||u!==n)&&u>=0&&u<l.buffer.lines.length;)c+=o?1:-1,o&&c>l.cols-1?(p+=l.buffer.translateBufferLineToString(u,!1,e,c),c=0,e=0,u++):!o&&c<0&&(p+=l.buffer.translateBufferLineToString(u,!1,0,e+1),c=l.cols-1,e=c,u--);return p+l.buffer.translateBufferLineToString(u,!1,e,c)}function Wo(e,t){let i=t?"O":"[";return H.ESC+i+e}function Uo(e,t){e=Math.floor(e);let i="";for(let n=0;n<e;n++)i+=t;return i}var c2=class{constructor(e){this._bufferService=e,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:!this.selectionEnd||!this.selectionStart?this.selectionStart:this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?e%this._bufferService.cols===0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)-1]:[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[e,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[Math.max(e,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let e=this.selectionStart,t=this.selectionEnd;return!e||!t?!1:e[1]>t[1]||e[1]===t[1]&&e[0]>t[0]}handleTrim(e){return this.selectionStart&&(this.selectionStart[1]-=e),this.selectionEnd&&(this.selectionEnd[1]-=e),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}};function f_(e,t){if(e.start.y>e.end.y)throw new Error(`Buffer range end (${e.end.x}, ${e.end.y}) cannot be before start (${e.start.x}, ${e.start.y})`);return t*(e.end.y-e.start.y)+(e.end.x-e.start.x+1)}var _u=50,h2=15,u2=50,d2=500,f2="",p2=new RegExp(f2,"g"),_d=class extends Le{constructor(e,t,i,n,o,l,c,u,p){super(),this._element=e,this._screenElement=t,this._linkifier=i,this._bufferService=n,this._coreService=o,this._mouseService=l,this._optionsService=c,this._renderService=u,this._coreBrowserService=p,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new yi,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this._register(new ee),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this._register(new ee),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this._register(new ee),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this._register(new ee),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=d=>this._handleMouseMove(d),this._mouseUpListener=d=>this._handleMouseUp(d),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(d=>this._handleTrim(d)),this._register(this._bufferService.buffers.onBufferActivate(d=>this._handleBufferActivate(d))),this.enable(),this._model=new c2(this._bufferService),this._activeSelectionMode=0,this._register(Ke(()=>{this._removeMouseDownListeners()})),this._register(this._bufferService.onResize(d=>{d.rowsChanged&&this.clearSelection()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;return!e||!t?!1:e[0]!==t[0]||e[1]!==t[1]}get selectionText(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;if(!e||!t)return"";let i=this._bufferService.buffer,n=[];if(this._activeSelectionMode===3){if(e[0]===t[0])return"";let o=e[0]<t[0]?e[0]:t[0],l=e[0]<t[0]?t[0]:e[0];for(let c=e[1];c<=t[1];c++){let u=i.translateBufferLineToString(c,!0,o,l);n.push(u)}}else{let o=e[1]===t[1]?t[0]:void 0;n.push(i.translateBufferLineToString(e[1],!0,e[0],o));for(let l=e[1]+1;l<=t[1]-1;l++){let c=i.lines.get(l),u=i.translateBufferLineToString(l,!0);c!=null&&c.isWrapped?n[n.length-1]+=u:n.push(u)}if(e[1]!==t[1]){let l=i.lines.get(t[1]),c=i.translateBufferLineToString(t[1],!0,0,t[0]);l&&l.isWrapped?n[n.length-1]+=c:n.push(c)}}return n.map(o=>o.replace(p2," ")).join(R0?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(e){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),ef&&e&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(e){let t=this._getMouseBufferCoords(e),i=this._model.finalSelectionStart,n=this._model.finalSelectionEnd;return!i||!n||!t?!1:this._areCoordsInSelection(t,i,n)}isCellInSelection(e,t){let i=this._model.finalSelectionStart,n=this._model.finalSelectionEnd;return!i||!n?!1:this._areCoordsInSelection([e,t],i,n)}_areCoordsInSelection(e,t,i){return e[1]>t[1]&&e[1]<i[1]||t[1]===i[1]&&e[1]===t[1]&&e[0]>=t[0]&&e[0]<i[0]||t[1]<i[1]&&e[1]===i[1]&&e[0]<i[0]||t[1]<i[1]&&e[1]===t[1]&&e[0]>=t[0]}_selectWordAtCursor(e,t){var o,l;let i=(l=(o=this._linkifier.currentLink)==null?void 0:o.link)==null?void 0:l.range;if(i)return this._model.selectionStart=[i.start.x-1,i.start.y-1],this._model.selectionStartLength=f_(i,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let n=this._getMouseBufferCoords(e);return n?(this._selectWordAt(n,t),this._model.selectionEnd=void 0,!0):!1}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(e,t){this._model.clearSelection(),e=Math.max(e,0),t=Math.min(t,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._bufferService.cols,t],this.refresh(),this._onSelectionChange.fire()}_handleTrim(e){this._model.handleTrim(e)&&this.refresh()}_getMouseBufferCoords(e){let t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(t)return t[0]--,t[1]--,t[1]+=this._bufferService.buffer.ydisp,t}_getMouseEventScrollAmount(e){let t=Zd(this._coreBrowserService.window,e,this._screenElement)[1],i=this._renderService.dimensions.css.canvas.height;return t>=0&&t<=i?0:(t>i&&(t-=i),t=Math.min(Math.max(t,-_u),_u),t/=_u,t/Math.abs(t)+Math.round(t*(h2-1)))}shouldForceSelection(e){return Wl?e.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:e.shiftKey}handleMouseDown(e){if(this._mouseDownTimeStamp=e.timeStamp,!(e.button===2&&this.hasSelection)&&e.button===0){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._handleIncrementalClick(e):e.detail===1?this._handleSingleClick(e):e.detail===2?this._handleDoubleClick(e):e.detail===3&&this._handleTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),u2)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))}_handleSingleClick(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?3:0,this._model.selectionStart=this._getMouseBufferCoords(e),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let t=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);t&&t.length!==this._model.selectionStart[0]&&t.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(e){this._selectWordAtCursor(e,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(e){let t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=2,this._selectLineAt(t[1]))}shouldColumnSelect(e){return e.altKey&&!(Wl&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(e){if(e.stopImmediatePropagation(),!this._model.selectionStart)return;let t=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),!this._model.selectionEnd){this.refresh(!0);return}this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let i=this._bufferService.buffer;if(this._model.selectionEnd[1]<i.lines.length){let n=i.lines.get(this._model.selectionEnd[1]);n&&n.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}(!t||t[0]!==this._model.selectionEnd[0]||t[1]!==this._model.selectionEnd[1])&&this.refresh(!0)}_dragScroll(){if(!(!this._model.selectionEnd||!this._model.selectionStart)&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let e=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(e.ydisp+this._bufferService.rows,e.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=e.ydisp),this.refresh()}}_handleMouseUp(e){let t=e.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&t<d2&&e.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let i=this._mouseService.getCoords(e,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(i&&i[0]!==void 0&&i[1]!==void 0){let n=i2(i[0]-1,i[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(n,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd,i=!!e&&!!t&&(e[0]!==t[0]||e[1]!==t[1]);if(!i){this._oldHasSelection&&this._fireOnSelectionChange(e,t,i);return}!e||!t||(!this._oldSelectionStart||!this._oldSelectionEnd||e[0]!==this._oldSelectionStart[0]||e[1]!==this._oldSelectionStart[1]||t[0]!==this._oldSelectionEnd[0]||t[1]!==this._oldSelectionEnd[1])&&this._fireOnSelectionChange(e,t,i)}_fireOnSelectionChange(e,t,i){this._oldSelectionStart=e,this._oldSelectionEnd=t,this._oldHasSelection=i,this._onSelectionChange.fire()}_handleBufferActivate(e){this.clearSelection(),this._trimListener.dispose(),this._trimListener=e.activeBuffer.lines.onTrim(t=>this._handleTrim(t))}_convertViewportColToCharacterIndex(e,t){let i=t;for(let n=0;t>=n;n++){let o=e.loadCell(n,this._workCell).getChars().length;this._workCell.getWidth()===0?i--:o>1&&t!==n&&(i+=o-1)}return i}setSelection(e,t,i){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,t],this._model.selectionStartLength=i,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(e){this._isClickInSelection(e)||(this._selectWordAtCursor(e,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(e,t,i=!0,n=!0){if(e[0]>=this._bufferService.cols)return;let o=this._bufferService.buffer,l=o.lines.get(e[1]);if(!l)return;let c=o.translateBufferLineToString(e[1],!1),u=this._convertViewportColToCharacterIndex(l,e[0]),p=u,d=e[0]-u,_=0,g=0,S=0,w=0;if(c.charAt(u)===" "){for(;u>0&&c.charAt(u-1)===" ";)u--;for(;p<c.length&&c.charAt(p+1)===" ";)p++}else{let k=e[0],L=e[0];l.getWidth(k)===0&&(_++,k--),l.getWidth(L)===2&&(g++,L++);let W=l.getString(L).length;for(W>1&&(w+=W-1,p+=W-1);k>0&&u>0&&!this._isCharWordSeparator(l.loadCell(k-1,this._workCell));){l.loadCell(k-1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===0?(_++,k--):O>1&&(S+=O-1,u-=O-1),u--,k--}for(;L<l.length&&p+1<c.length&&!this._isCharWordSeparator(l.loadCell(L+1,this._workCell));){l.loadCell(L+1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===2?(g++,L++):O>1&&(w+=O-1,p+=O-1),p++,L++}}p++;let x=u+d-_+S,C=Math.min(this._bufferService.cols,p-u+_+g-S-w);if(!(!t&&c.slice(u,p).trim()==="")){if(i&&x===0&&l.getCodePoint(0)!==32){let k=o.lines.get(e[1]-1);if(k&&l.isWrapped&&k.getCodePoint(this._bufferService.cols-1)!==32){let L=this._getWordAt([this._bufferService.cols-1,e[1]-1],!1,!0,!1);if(L){let W=this._bufferService.cols-L.start;x-=W,C+=W}}}if(n&&x+C===this._bufferService.cols&&l.getCodePoint(this._bufferService.cols-1)!==32){let k=o.lines.get(e[1]+1);if(k!=null&&k.isWrapped&&k.getCodePoint(0)!==32){let L=this._getWordAt([0,e[1]+1],!1,!1,!0);L&&(C+=L.length)}}return{start:x,length:C}}}_selectWordAt(e,t){let i=this._getWordAt(e,t);if(i){for(;i.start<0;)i.start+=this._bufferService.cols,e[1]--;this._model.selectionStart=[i.start,e[1]],this._model.selectionStartLength=i.length}}_selectToWordAt(e){let t=this._getWordAt(e,!0);if(t){let i=e[1];for(;t.start<0;)t.start+=this._bufferService.cols,i--;if(!this._model.areSelectionValuesReversed())for(;t.start+t.length>this._bufferService.cols;)t.length-=this._bufferService.cols,i++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?t.start:t.start+t.length,i]}}_isCharWordSeparator(e){return e.getWidth()===0?!1:this._optionsService.rawOptions.wordSeparator.indexOf(e.getChars())>=0}_selectLineAt(e){let t=this._bufferService.buffer.getWrappedRangeForLine(e),i={start:{x:0,y:t.first},end:{x:this._bufferService.cols-1,y:t.last}};this._model.selectionStart=[0,t.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=f_(i,this._bufferService.cols)}};_d=tt([oe(3,$t),oe(4,Os),oe(5,Vd),oe(6,Wt),oe(7,pr),oe(8,fr)],_d);var p_=class{constructor(){this._data={}}set(e,t,i){this._data[e]||(this._data[e]={}),this._data[e][t]=i}get(e,t){return this._data[e]?this._data[e][t]:void 0}clear(){this._data={}}},m_=class{constructor(){this._color=new p_,this._css=new p_}setCss(e,t,i){this._css.set(e,t,i)}getCss(e,t){return this._css.get(e,t)}setColor(e,t,i){this._color.set(e,t,i)}getColor(e,t){return this._color.get(e,t)}clear(){this._color.clear(),this._css.clear()}},ut=Object.freeze((()=>{let e=[Ge.toColor("#2e3436"),Ge.toColor("#cc0000"),Ge.toColor("#4e9a06"),Ge.toColor("#c4a000"),Ge.toColor("#3465a4"),Ge.toColor("#75507b"),Ge.toColor("#06989a"),Ge.toColor("#d3d7cf"),Ge.toColor("#555753"),Ge.toColor("#ef2929"),Ge.toColor("#8ae234"),Ge.toColor("#fce94f"),Ge.toColor("#729fcf"),Ge.toColor("#ad7fa8"),Ge.toColor("#34e2e2"),Ge.toColor("#eeeeec")],t=[0,95,135,175,215,255];for(let i=0;i<216;i++){let n=t[i/36%6|0],o=t[i/6%6|0],l=t[i%6];e.push({css:lt.toCss(n,o,l),rgba:lt.toRgba(n,o,l)})}for(let i=0;i<24;i++){let n=8+i*10;e.push({css:lt.toCss(n,n,n),rgba:lt.toRgba(n,n,n)})}return e})()),ds=Ge.toColor("#ffffff"),Mo=Ge.toColor("#000000"),g_=Ge.toColor("#ffffff"),__=Mo,Eo={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117},m2=ds,vd=class extends Le{constructor(e){super(),this._optionsService=e,this._contrastCache=new m_,this._halfContrastCache=new m_,this._onChangeColors=this._register(new ee),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:ds,background:Mo,cursor:g_,cursorAccent:__,selectionForeground:void 0,selectionBackgroundTransparent:Eo,selectionBackgroundOpaque:$e.blend(Mo,Eo),selectionInactiveBackgroundTransparent:Eo,selectionInactiveBackgroundOpaque:$e.blend(Mo,Eo),scrollbarSliderBackground:$e.opacity(ds,.2),scrollbarSliderHoverBackground:$e.opacity(ds,.4),scrollbarSliderActiveBackground:$e.opacity(ds,.5),overviewRulerBorder:ds,ansi:ut.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this._register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this._register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(e={}){let t=this._colors;if(t.foreground=je(e.foreground,ds),t.background=je(e.background,Mo),t.cursor=$e.blend(t.background,je(e.cursor,g_)),t.cursorAccent=$e.blend(t.background,je(e.cursorAccent,__)),t.selectionBackgroundTransparent=je(e.selectionBackground,Eo),t.selectionBackgroundOpaque=$e.blend(t.background,t.selectionBackgroundTransparent),t.selectionInactiveBackgroundTransparent=je(e.selectionInactiveBackground,t.selectionBackgroundTransparent),t.selectionInactiveBackgroundOpaque=$e.blend(t.background,t.selectionInactiveBackgroundTransparent),t.selectionForeground=e.selectionForeground?je(e.selectionForeground,h_):void 0,t.selectionForeground===h_&&(t.selectionForeground=void 0),$e.isOpaque(t.selectionBackgroundTransparent)&&(t.selectionBackgroundTransparent=$e.opacity(t.selectionBackgroundTransparent,.3)),$e.isOpaque(t.selectionInactiveBackgroundTransparent)&&(t.selectionInactiveBackgroundTransparent=$e.opacity(t.selectionInactiveBackgroundTransparent,.3)),t.scrollbarSliderBackground=je(e.scrollbarSliderBackground,$e.opacity(t.foreground,.2)),t.scrollbarSliderHoverBackground=je(e.scrollbarSliderHoverBackground,$e.opacity(t.foreground,.4)),t.scrollbarSliderActiveBackground=je(e.scrollbarSliderActiveBackground,$e.opacity(t.foreground,.5)),t.overviewRulerBorder=je(e.overviewRulerBorder,m2),t.ansi=ut.slice(),t.ansi[0]=je(e.black,ut[0]),t.ansi[1]=je(e.red,ut[1]),t.ansi[2]=je(e.green,ut[2]),t.ansi[3]=je(e.yellow,ut[3]),t.ansi[4]=je(e.blue,ut[4]),t.ansi[5]=je(e.magenta,ut[5]),t.ansi[6]=je(e.cyan,ut[6]),t.ansi[7]=je(e.white,ut[7]),t.ansi[8]=je(e.brightBlack,ut[8]),t.ansi[9]=je(e.brightRed,ut[9]),t.ansi[10]=je(e.brightGreen,ut[10]),t.ansi[11]=je(e.brightYellow,ut[11]),t.ansi[12]=je(e.brightBlue,ut[12]),t.ansi[13]=je(e.brightMagenta,ut[13]),t.ansi[14]=je(e.brightCyan,ut[14]),t.ansi[15]=je(e.brightWhite,ut[15]),e.extendedAnsi){let i=Math.min(t.ansi.length-16,e.extendedAnsi.length);for(let n=0;n<i;n++)t.ansi[n+16]=je(e.extendedAnsi[n],ut[n+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(e){this._restoreColor(e),this._onChangeColors.fire(this.colors)}_restoreColor(e){if(e===void 0){for(let t=0;t<this._restoreColors.ansi.length;++t)this._colors.ansi[t]=this._restoreColors.ansi[t];return}switch(e){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[e]=this._restoreColors.ansi[e]}}modifyColors(e){e(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};vd=tt([oe(0,Wt)],vd);function je(e,t){if(e!==void 0)try{return Ge.toColor(e)}catch{}return t}var g2=class{constructor(...e){this._entries=new Map;for(let[t,i]of e)this.set(t,i)}set(e,t){let i=this._entries.get(e);return this._entries.set(e,t),i}forEach(e){for(let[t,i]of this._entries.entries())e(t,i)}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}},_2=class{constructor(){this._services=new g2,this._services.set(Kd,this)}setService(e,t){this._services.set(e,t)}getService(e){return this._services.get(e)}createInstance(e,...t){let i=hb(e).sort((l,c)=>l.index-c.index),n=[];for(let l of i){let c=this._services.get(l.id);if(!c)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${l.id._id}.`);n.push(c)}let o=i.length>0?i[0].index:t.length;if(t.length!==o)throw new Error(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);return new e(...t,...n)}},v2={trace:0,debug:1,info:2,warn:3,error:4,off:5},y2="xterm.js: ",yd=class extends Le{constructor(e){super(),this._optionsService=e,this._logLevel=5,this._updateLogLevel(),this._register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}get logLevel(){return this._logLevel}_updateLogLevel(){this._logLevel=v2[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(e){for(let t=0;t<e.length;t++)typeof e[t]=="function"&&(e[t]=e[t]())}_log(e,t,i){this._evalLazyOptionalParams(i),e.call(console,(this._optionsService.options.logger?"":y2)+t,...i)}trace(e,...t){var i;this._logLevel<=0&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.trace.bind(this._optionsService.options.logger))??console.log,e,t)}debug(e,...t){var i;this._logLevel<=1&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.debug.bind(this._optionsService.options.logger))??console.log,e,t)}info(e,...t){var i;this._logLevel<=2&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.info.bind(this._optionsService.options.logger))??console.info,e,t)}warn(e,...t){var i;this._logLevel<=3&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.warn.bind(this._optionsService.options.logger))??console.warn,e,t)}error(e,...t){var i;this._logLevel<=4&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.error.bind(this._optionsService.options.logger))??console.error,e,t)}};yd=tt([oe(0,Wt)],yd);var v_=class extends Le{constructor(e){super(),this._maxLength=e,this.onDeleteEmitter=this._register(new ee),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this._register(new ee),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this._register(new ee),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(e){if(this._maxLength===e)return;let t=new Array(e);for(let i=0;i<Math.min(e,this.length);i++)t[i]=this._array[this._getCyclicIndex(i)];this._array=t,this._maxLength=e,this._startIndex=0}get length(){return this._length}set length(e){if(e>this._length)for(let t=this._length;t<e;t++)this._array[t]=void 0;this._length=e}get(e){return this._array[this._getCyclicIndex(e)]}set(e,t){this._array[this._getCyclicIndex(e)]=t}push(e){this._array[this._getCyclicIndex(this._length)]=e,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(e,t,...i){if(t){for(let n=e;n<this._length-t;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+t)];this._length-=t,this.onDeleteEmitter.fire({index:e,amount:t})}for(let n=this._length-1;n>=e;n--)this._array[this._getCyclicIndex(n+i.length)]=this._array[this._getCyclicIndex(n)];for(let n=0;n<i.length;n++)this._array[this._getCyclicIndex(e+n)]=i[n];if(i.length&&this.onInsertEmitter.fire({index:e,amount:i.length}),this._length+i.length>this._maxLength){let n=this._length+i.length-this._maxLength;this._startIndex+=n,this._length=this._maxLength,this.onTrimEmitter.fire(n)}else this._length+=i.length}trimStart(e){e>this._length&&(e=this._length),this._startIndex+=e,this._length-=e,this.onTrimEmitter.fire(e)}shiftElements(e,t,i){if(!(t<=0)){if(e<0||e>=this._length)throw new Error("start argument out of range");if(e+i<0)throw new Error("Cannot shift elements in list beyond index 0");if(i>0){for(let o=t-1;o>=0;o--)this.set(e+o+i,this.get(e+o));let n=e+t+i-this._length;if(n>0)for(this._length+=n;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let n=0;n<t;n++)this.set(e+n+i,this.get(e+n))}}_getCyclicIndex(e){return(this._startIndex+e)%this._maxLength}},Pe=3,at=Object.freeze(new Zo),wl=0,vu=2,To=class M0{constructor(t,i,n=!1){this.isWrapped=n,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(t*Pe);let o=i||yi.fromCharData([0,Xv,1,0]);for(let l=0;l<t;++l)this.setCell(l,o);this.length=t}get(t){let i=this._data[t*Pe+0],n=i&2097151;return[this._data[t*Pe+1],i&2097152?this._combined[t]:n?jr(n):"",i>>22,i&2097152?this._combined[t].charCodeAt(this._combined[t].length-1):n]}set(t,i){this._data[t*Pe+1]=i[0],i[1].length>1?(this._combined[t]=i[1],this._data[t*Pe+0]=t|2097152|i[2]<<22):this._data[t*Pe+0]=i[1].charCodeAt(0)|i[2]<<22}getWidth(t){return this._data[t*Pe+0]>>22}hasWidth(t){return this._data[t*Pe+0]&12582912}getFg(t){return this._data[t*Pe+1]}getBg(t){return this._data[t*Pe+2]}hasContent(t){return this._data[t*Pe+0]&4194303}getCodePoint(t){let i=this._data[t*Pe+0];return i&2097152?this._combined[t].charCodeAt(this._combined[t].length-1):i&2097151}isCombined(t){return this._data[t*Pe+0]&2097152}getString(t){let i=this._data[t*Pe+0];return i&2097152?this._combined[t]:i&2097151?jr(i&2097151):""}isProtected(t){return this._data[t*Pe+2]&536870912}loadCell(t,i){return wl=t*Pe,i.content=this._data[wl+0],i.fg=this._data[wl+1],i.bg=this._data[wl+2],i.content&2097152&&(i.combinedData=this._combined[t]),i.bg&268435456&&(i.extended=this._extendedAttrs[t]),i}setCell(t,i){i.content&2097152&&(this._combined[t]=i.combinedData),i.bg&268435456&&(this._extendedAttrs[t]=i.extended),this._data[t*Pe+0]=i.content,this._data[t*Pe+1]=i.fg,this._data[t*Pe+2]=i.bg}setCellFromCodepoint(t,i,n,o){o.bg&268435456&&(this._extendedAttrs[t]=o.extended),this._data[t*Pe+0]=i|n<<22,this._data[t*Pe+1]=o.fg,this._data[t*Pe+2]=o.bg}addCodepointToCell(t,i,n){let o=this._data[t*Pe+0];o&2097152?this._combined[t]+=jr(i):o&2097151?(this._combined[t]=jr(o&2097151)+jr(i),o&=-2097152,o|=2097152):o=i|1<<22,n&&(o&=-12582913,o|=n<<22),this._data[t*Pe+0]=o}insertCells(t,i,n){if(t%=this.length,t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,n),i<this.length-t){let o=new yi;for(let l=this.length-t-i-1;l>=0;--l)this.setCell(t+i+l,this.loadCell(t+l,o));for(let l=0;l<i;++l)this.setCell(t+l,n)}else for(let o=t;o<this.length;++o)this.setCell(o,n);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,n)}deleteCells(t,i,n){if(t%=this.length,i<this.length-t){let o=new yi;for(let l=0;l<this.length-t-i;++l)this.setCell(t+l,this.loadCell(t+i+l,o));for(let l=this.length-i;l<this.length;++l)this.setCell(l,n)}else for(let o=t;o<this.length;++o)this.setCell(o,n);t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,n),this.getWidth(t)===0&&!this.hasContent(t)&&this.setCellFromCodepoint(t,0,1,n)}replaceCells(t,i,n,o=!1){if(o){for(t&&this.getWidth(t-1)===2&&!this.isProtected(t-1)&&this.setCellFromCodepoint(t-1,0,1,n),i<this.length&&this.getWidth(i-1)===2&&!this.isProtected(i)&&this.setCellFromCodepoint(i,0,1,n);t<i&&t<this.length;)this.isProtected(t)||this.setCell(t,n),t++;return}for(t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,n),i<this.length&&this.getWidth(i-1)===2&&this.setCellFromCodepoint(i,0,1,n);t<i&&t<this.length;)this.setCell(t++,n)}resize(t,i){if(t===this.length)return this._data.length*4*vu<this._data.buffer.byteLength;let n=t*Pe;if(t>this.length){if(this._data.buffer.byteLength>=n*4)this._data=new Uint32Array(this._data.buffer,0,n);else{let o=new Uint32Array(n);o.set(this._data),this._data=o}for(let o=this.length;o<t;++o)this.setCell(o,i)}else{this._data=this._data.subarray(0,n);let o=Object.keys(this._combined);for(let c=0;c<o.length;c++){let u=parseInt(o[c],10);u>=t&&delete this._combined[u]}let l=Object.keys(this._extendedAttrs);for(let c=0;c<l.length;c++){let u=parseInt(l[c],10);u>=t&&delete this._extendedAttrs[u]}}return this.length=t,n*4*vu<this._data.buffer.byteLength}cleanupMemory(){if(this._data.length*4*vu<this._data.buffer.byteLength){let t=new Uint32Array(this._data.length);return t.set(this._data),this._data=t,1}return 0}fill(t,i=!1){if(i){for(let n=0;n<this.length;++n)this.isProtected(n)||this.setCell(n,t);return}this._combined={},this._extendedAttrs={};for(let n=0;n<this.length;++n)this.setCell(n,t)}copyFrom(t){this.length!==t.length?this._data=new Uint32Array(t._data):this._data.set(t._data),this.length=t.length,this._combined={};for(let i in t._combined)this._combined[i]=t._combined[i];this._extendedAttrs={};for(let i in t._extendedAttrs)this._extendedAttrs[i]=t._extendedAttrs[i];this.isWrapped=t.isWrapped}clone(){let t=new M0(0);t._data=new Uint32Array(this._data),t.length=this.length;for(let i in this._combined)t._combined[i]=this._combined[i];for(let i in this._extendedAttrs)t._extendedAttrs[i]=this._extendedAttrs[i];return t.isWrapped=this.isWrapped,t}getTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(this._data[t*Pe+0]&4194303)return t+(this._data[t*Pe+0]>>22);return 0}getNoBgTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(this._data[t*Pe+0]&4194303||this._data[t*Pe+2]&50331648)return t+(this._data[t*Pe+0]>>22);return 0}copyCellsFrom(t,i,n,o,l){let c=t._data;if(l)for(let p=o-1;p>=0;p--){for(let d=0;d<Pe;d++)this._data[(n+p)*Pe+d]=c[(i+p)*Pe+d];c[(i+p)*Pe+2]&268435456&&(this._extendedAttrs[n+p]=t._extendedAttrs[i+p])}else for(let p=0;p<o;p++){for(let d=0;d<Pe;d++)this._data[(n+p)*Pe+d]=c[(i+p)*Pe+d];c[(i+p)*Pe+2]&268435456&&(this._extendedAttrs[n+p]=t._extendedAttrs[i+p])}let u=Object.keys(t._combined);for(let p=0;p<u.length;p++){let d=parseInt(u[p],10);d>=i&&(this._combined[d-i+n]=t._combined[d])}}translateToString(t,i,n,o){i=i??0,n=n??this.length,t&&(n=Math.min(n,this.getTrimmedLength())),o&&(o.length=0);let l="";for(;i<n;){let c=this._data[i*Pe+0],u=c&2097151,p=c&2097152?this._combined[i]:u?jr(u):Qr;if(l+=p,o)for(let d=0;d<p.length;++d)o.push(i);i+=c>>22||1}return o&&o.push(i),l}};function S2(e,t,i,n,o,l){let c=[];for(let u=0;u<e.length-1;u++){let p=u,d=e.get(++p);if(!d.isWrapped)continue;let _=[e.get(u)];for(;p<e.length&&d.isWrapped;)_.push(d),d=e.get(++p);if(!l&&n>=u&&n<p){u+=_.length-1;continue}let g=0,S=Ko(_,g,t),w=1,x=0;for(;w<_.length;){let k=Ko(_,w,t),L=k-x,W=i-S,O=Math.min(L,W);_[g].copyCellsFrom(_[w],x,S,O,!1),S+=O,S===i&&(g++,S=0),x+=O,x===k&&(w++,x=0),S===0&&g!==0&&_[g-1].getWidth(i-1)===2&&(_[g].copyCellsFrom(_[g-1],i-1,S++,1,!1),_[g-1].setCell(i-1,o))}_[g].replaceCells(S,i,o);let C=0;for(let k=_.length-1;k>0&&(k>g||_[k].getTrimmedLength()===0);k--)C++;C>0&&(c.push(u+_.length-C),c.push(C)),u+=_.length-1}return c}function w2(e,t){let i=[],n=0,o=t[n],l=0;for(let c=0;c<e.length;c++)if(o===c){let u=t[++n];e.onDeleteEmitter.fire({index:c-l,amount:u}),c+=u-1,l+=u,o=t[++n]}else i.push(c);return{layout:i,countRemoved:l}}function x2(e,t){let i=[];for(let n=0;n<t.length;n++)i.push(e.get(t[n]));for(let n=0;n<i.length;n++)e.set(n,i[n]);e.length=t.length}function C2(e,t,i){let n=[],o=e.map((p,d)=>Ko(e,d,t)).reduce((p,d)=>p+d),l=0,c=0,u=0;for(;u<o;){if(o-u<i){n.push(o-u);break}l+=i;let p=Ko(e,c,t);l>p&&(l-=p,c++);let d=e[c].getWidth(l-1)===2;d&&l--;let _=d?i-1:i;n.push(_),u+=_}return n}function Ko(e,t,i){if(t===e.length-1)return e[t].getTrimmedLength();let n=!e[t].hasContent(i-1)&&e[t].getWidth(i-1)===1,o=e[t+1].getWidth(0)===2;return n&&o?i-1:i}var T0=class O0{constructor(t){this.line=t,this.isDisposed=!1,this._disposables=[],this._id=O0._nextId++,this._onDispose=this.register(new ee),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),Ns(this._disposables),this._disposables.length=0)}register(t){return this._disposables.push(t),t}};T0._nextId=1;var b2=T0,pt={},fs=pt.B;pt[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""};pt.A={"#":""};pt.B=void 0;pt[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""};pt.C=pt[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};pt.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};pt.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};pt.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};pt.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""};pt.E=pt[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};pt.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""};pt.H=pt[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};pt["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""};var y_=4294967295,S_=class{constructor(e,t,i){this._hasScrollback=e,this._optionsService=t,this._bufferService=i,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=at.clone(),this.savedCharset=fs,this.markers=[],this._nullCell=yi.fromCharData([0,Xv,1,0]),this._whitespaceCell=yi.fromCharData([0,Qr,1,32]),this._isClearing=!1,this._memoryCleanupQueue=new Ul,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new v_(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new zl),this._nullCell}getWhitespaceCell(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new zl),this._whitespaceCell}getBlankLine(e,t){return new To(this._bufferService.cols,this.getNullCell(e),t)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows}_getCorrectBufferLength(e){if(!this._hasScrollback)return e;let t=e+this._optionsService.rawOptions.scrollback;return t>y_?y_:t}fillViewportRows(e){if(this.lines.length===0){e===void 0&&(e=at);let t=this._rows;for(;t--;)this.lines.push(this.getBlankLine(e))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new v_(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(e,t){let i=this.getNullCell(at),n=0,o=this._getCorrectBufferLength(t);if(o>this.lines.maxLength&&(this.lines.maxLength=o),this.lines.length>0){if(this._cols<e)for(let c=0;c<this.lines.length;c++)n+=+this.lines.get(c).resize(e,i);let l=0;if(this._rows<t)for(let c=this._rows;c<t;c++)this.lines.length<t+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new To(e,i)):this.ybase>0&&this.lines.length<=this.ybase+this.y+l+1?(this.ybase--,l++,this.ydisp>0&&this.ydisp--):this.lines.push(new To(e,i)));else for(let c=this._rows;c>t;c--)this.lines.length>t+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(o<this.lines.maxLength){let c=this.lines.length-o;c>0&&(this.lines.trimStart(c),this.ybase=Math.max(this.ybase-c,0),this.ydisp=Math.max(this.ydisp-c,0),this.savedY=Math.max(this.savedY-c,0)),this.lines.maxLength=o}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,t-1),l&&(this.y+=l),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=t-1,this._isReflowEnabled&&(this._reflow(e,t),this._cols>e))for(let l=0;l<this.lines.length;l++)n+=+this.lines.get(l).resize(e,i);this._cols=e,this._rows=t,this._memoryCleanupQueue.clear(),n>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let e=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,e=!1);let t=0;for(;this._memoryCleanupPosition<this.lines.length;)if(t+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),t>100)return!0;return e}get _isReflowEnabled(){let e=this._optionsService.rawOptions.windowsPty;return e&&e.buildNumber?this._hasScrollback&&e.backend==="conpty"&&e.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(e,t){this._cols!==e&&(e>this._cols?this._reflowLarger(e,t):this._reflowSmaller(e,t))}_reflowLarger(e,t){let i=this._optionsService.rawOptions.reflowCursorLine,n=S2(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(at),i);if(n.length>0){let o=w2(this.lines,n);x2(this.lines,o.layout),this._reflowLargerAdjustViewport(e,t,o.countRemoved)}}_reflowLargerAdjustViewport(e,t,i){let n=this.getNullCell(at),o=i;for(;o-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<t&&this.lines.push(new To(e,n))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-i,0)}_reflowSmaller(e,t){let i=this._optionsService.rawOptions.reflowCursorLine,n=this.getNullCell(at),o=[],l=0;for(let c=this.lines.length-1;c>=0;c--){let u=this.lines.get(c);if(!u||!u.isWrapped&&u.getTrimmedLength()<=e)continue;let p=[u];for(;u.isWrapped&&c>0;)u=this.lines.get(--c),p.unshift(u);if(!i){let O=this.ybase+this.y;if(O>=c&&O<c+p.length)continue}let d=p[p.length-1].getTrimmedLength(),_=C2(p,this._cols,e),g=_.length-p.length,S;this.ybase===0&&this.y!==this.lines.length-1?S=Math.max(0,this.y-this.lines.maxLength+g):S=Math.max(0,this.lines.length-this.lines.maxLength+g);let w=[];for(let O=0;O<g;O++){let T=this.getBlankLine(at,!0);w.push(T)}w.length>0&&(o.push({start:c+p.length+l,newLines:w}),l+=w.length),p.push(...w);let x=_.length-1,C=_[x];C===0&&(x--,C=_[x]);let k=p.length-g-1,L=d;for(;k>=0;){let O=Math.min(L,C);if(p[x]===void 0)break;if(p[x].copyCellsFrom(p[k],L-O,C-O,O,!0),C-=O,C===0&&(x--,C=_[x]),L-=O,L===0){k--;let T=Math.max(k,0);L=Ko(p,T,this._cols)}}for(let O=0;O<p.length;O++)_[O]<e&&p[O].setCell(_[O],n);let W=g-S;for(;W-- >0;)this.ybase===0?this.y<t-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+l)-t&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+g,this.ybase+t-1)}if(o.length>0){let c=[],u=[];for(let C=0;C<this.lines.length;C++)u.push(this.lines.get(C));let p=this.lines.length,d=p-1,_=0,g=o[_];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+l);let S=0;for(let C=Math.min(this.lines.maxLength-1,p+l-1);C>=0;C--)if(g&&g.start>d+S){for(let k=g.newLines.length-1;k>=0;k--)this.lines.set(C--,g.newLines[k]);C++,c.push({index:d+1,amount:g.newLines.length}),S+=g.newLines.length,g=o[++_]}else this.lines.set(C,u[d--]);let w=0;for(let C=c.length-1;C>=0;C--)c[C].index+=w,this.lines.onInsertEmitter.fire(c[C]),w+=c[C].amount;let x=Math.max(0,p+l-this.lines.maxLength);x>0&&this.lines.onTrimEmitter.fire(x)}}translateBufferLineToString(e,t,i=0,n){let o=this.lines.get(e);return o?o.translateToString(t,i,n):""}getWrappedRangeForLine(e){let t=e,i=e;for(;t>0&&this.lines.get(t).isWrapped;)t--;for(;i+1<this.lines.length&&this.lines.get(i+1).isWrapped;)i++;return{first:t,last:i}}setupTabStops(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0}prevStop(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e}nextStop(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e}clearMarkers(e){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].line===e&&(this.markers[t].dispose(),this.markers.splice(t--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].dispose();this.markers.length=0,this._isClearing=!1}addMarker(e){let t=new b2(e);return this.markers.push(t),t.register(this.lines.onTrim(i=>{t.line-=i,t.line<0&&t.dispose()})),t.register(this.lines.onInsert(i=>{t.line>=i.index&&(t.line+=i.amount)})),t.register(this.lines.onDelete(i=>{t.line>=i.index&&t.line<i.index+i.amount&&t.dispose(),t.line>i.index&&(t.line-=i.amount)})),t.register(t.onDispose(()=>this._removeMarker(t))),t}_removeMarker(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)}},k2=class extends Le{constructor(e,t){super(),this._optionsService=e,this._bufferService=t,this._onBufferActivate=this._register(new ee),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this._register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this._register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new S_(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new S_(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(e,t){this._normal.resize(e,t),this._alt.resize(e,t),this.setupTabStops(e)}setupTabStops(e){this._normal.setupTabStops(e),this._alt.setupTabStops(e)}},B0=2,I0=1,Sd=class extends Le{constructor(e){super(),this.isUserScrolling=!1,this._onResize=this._register(new ee),this.onResize=this._onResize.event,this._onScroll=this._register(new ee),this.onScroll=this._onScroll.event,this.cols=Math.max(e.rawOptions.cols||0,B0),this.rows=Math.max(e.rawOptions.rows||0,I0),this.buffers=this._register(new k2(e,this)),this._register(this.buffers.onBufferActivate(t=>{this._onScroll.fire(t.activeBuffer.ydisp)}))}get buffer(){return this.buffers.active}resize(e,t){let i=this.cols!==e,n=this.rows!==t;this.cols=e,this.rows=t,this.buffers.resize(e,t),this._onResize.fire({cols:e,rows:t,colsChanged:i,rowsChanged:n})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(e,t=!1){let i=this.buffer,n;n=this._cachedBlankLine,(!n||n.length!==this.cols||n.getFg(0)!==e.fg||n.getBg(0)!==e.bg)&&(n=i.getBlankLine(e,t),this._cachedBlankLine=n),n.isWrapped=t;let o=i.ybase+i.scrollTop,l=i.ybase+i.scrollBottom;if(i.scrollTop===0){let c=i.lines.isFull;l===i.lines.length-1?c?i.lines.recycle().copyFrom(n):i.lines.push(n.clone()):i.lines.splice(l+1,0,n.clone()),c?this.isUserScrolling&&(i.ydisp=Math.max(i.ydisp-1,0)):(i.ybase++,this.isUserScrolling||i.ydisp++)}else{let c=l-o+1;i.lines.shiftElements(o+1,c-1,-1),i.lines.set(l,n.clone())}this.isUserScrolling||(i.ydisp=i.ybase),this._onScroll.fire(i.ydisp)}scrollLines(e,t){let i=this.buffer;if(e<0){if(i.ydisp===0)return;this.isUserScrolling=!0}else e+i.ydisp>=i.ybase&&(this.isUserScrolling=!1);let n=i.ydisp;i.ydisp=Math.max(Math.min(i.ydisp+e,i.ybase),0),n!==i.ydisp&&(t||this._onScroll.fire(i.ydisp))}};Sd=tt([oe(0,Wt)],Sd);var un={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnEraseInDisplay:!1,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},reflowCursorLine:!1,rescaleOverlappingGlyphs:!1,rightClickSelectsWord:Wl,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRuler:{}},E2=["normal","bold","100","200","300","400","500","600","700","800","900"],R2=class extends Le{constructor(e){super(),this._onOptionChange=this._register(new ee),this.onOptionChange=this._onOptionChange.event;let t={...un};for(let i in e)if(i in t)try{let n=e[i];t[i]=this._sanitizeAndValidateOption(i,n)}catch(n){console.error(n)}this.rawOptions=t,this.options={...t},this._setupOptions(),this._register(Ke(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(e,t){return this.onOptionChange(i=>{i===e&&t(this.rawOptions[e])})}onMultipleOptionChange(e,t){return this.onOptionChange(i=>{e.indexOf(i)!==-1&&t()})}_setupOptions(){let e=i=>{if(!(i in un))throw new Error(`No option with key "${i}"`);return this.rawOptions[i]},t=(i,n)=>{if(!(i in un))throw new Error(`No option with key "${i}"`);n=this._sanitizeAndValidateOption(i,n),this.rawOptions[i]!==n&&(this.rawOptions[i]=n,this._onOptionChange.fire(i))};for(let i in this.rawOptions){let n={get:e.bind(this,i),set:t.bind(this,i)};Object.defineProperty(this.options,i,n)}}_sanitizeAndValidateOption(e,t){switch(e){case"cursorStyle":if(t||(t=un[e]),!P2(t))throw new Error(`"${t}" is not a valid value for ${e}`);break;case"wordSeparator":t||(t=un[e]);break;case"fontWeight":case"fontWeightBold":if(typeof t=="number"&&1<=t&&t<=1e3)break;t=E2.includes(t)?t:un[e];break;case"cursorWidth":t=Math.floor(t);case"lineHeight":case"tabStopWidth":if(t<1)throw new Error(`${e} cannot be less than 1, value: ${t}`);break;case"minimumContrastRatio":t=Math.max(1,Math.min(21,Math.round(t*10)/10));break;case"scrollback":if(t=Math.min(t,4294967295),t<0)throw new Error(`${e} cannot be less than 0, value: ${t}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(t<=0)throw new Error(`${e} cannot be less than or equal to 0, value: ${t}`);break;case"rows":case"cols":if(!t&&t!==0)throw new Error(`${e} must be numeric, value: ${t}`);break;case"windowsPty":t=t??{};break}return t}};function P2(e){return e==="block"||e==="underline"||e==="bar"}function Oo(e,t=5){if(typeof e!="object")return e;let i=Array.isArray(e)?[]:{};for(let n in e)i[n]=t<=1?e[n]:e[n]&&Oo(e[n],t-1);return i}var w_=Object.freeze({insertMode:!1}),x_=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,cursorBlink:void 0,cursorStyle:void 0,origin:!1,reverseWraparound:!1,sendFocus:!1,synchronizedOutput:!1,wraparound:!0}),wd=class extends Le{constructor(e,t,i){super(),this._bufferService=e,this._logService=t,this._optionsService=i,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this._register(new ee),this.onData=this._onData.event,this._onUserInput=this._register(new ee),this.onUserInput=this._onUserInput.event,this._onBinary=this._register(new ee),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this._register(new ee),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=Oo(w_),this.decPrivateModes=Oo(x_)}reset(){this.modes=Oo(w_),this.decPrivateModes=Oo(x_)}triggerDataEvent(e,t=!1){if(this._optionsService.rawOptions.disableStdin)return;let i=this._bufferService.buffer;t&&this._optionsService.rawOptions.scrollOnUserInput&&i.ybase!==i.ydisp&&this._onRequestScrollToBottom.fire(),t&&this._onUserInput.fire(),this._logService.debug(`sending data "${e}"`),this._logService.trace("sending data (codes)",()=>e.split("").map(n=>n.charCodeAt(0))),this._onData.fire(e)}triggerBinaryEvent(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${e}"`),this._logService.trace("sending binary (codes)",()=>e.split("").map(t=>t.charCodeAt(0))),this._onBinary.fire(e))}};wd=tt([oe(0,$t),oe(1,i0),oe(2,Wt)],wd);var C_={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:e=>e.button===4||e.action!==1?!1:(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)},VT200:{events:19,restrict:e=>e.action!==32},DRAG:{events:23,restrict:e=>!(e.action===32&&e.button===3)},ANY:{events:31,restrict:e=>!0}};function yu(e,t){let i=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return e.button===4?(i|=64,i|=e.action):(i|=e.button&3,e.button&4&&(i|=64),e.button&8&&(i|=128),e.action===32?i|=32:e.action===0&&!t&&(i|=3)),i}var Su=String.fromCharCode,b_={DEFAULT:e=>{let t=[yu(e,!1)+32,e.col+32,e.row+32];return t[0]>255||t[1]>255||t[2]>255?"":`\x1B[M${Su(t[0])}${Su(t[1])}${Su(t[2])}`},SGR:e=>{let t=e.action===0&&e.button!==4?"m":"M";return`\x1B[<${yu(e,!0)};${e.col};${e.row}${t}`},SGR_PIXELS:e=>{let t=e.action===0&&e.button!==4?"m":"M";return`\x1B[<${yu(e,!0)};${e.x};${e.y}${t}`}},xd=class extends Le{constructor(e,t,i){super(),this._bufferService=e,this._coreService=t,this._optionsService=i,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._wheelPartialScroll=0,this._onProtocolChange=this._register(new ee),this.onProtocolChange=this._onProtocolChange.event;for(let n of Object.keys(C_))this.addProtocol(n,C_[n]);for(let n of Object.keys(b_))this.addEncoding(n,b_[n]);this.reset()}addProtocol(e,t){this._protocols[e]=t}addEncoding(e,t){this._encodings[e]=t}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(e){if(!this._protocols[e])throw new Error(`unknown protocol "${e}"`);this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(e){if(!this._encodings[e])throw new Error(`unknown encoding "${e}"`);this._activeEncoding=e}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null,this._wheelPartialScroll=0}consumeWheelEvent(e,t,i){if(e.deltaY===0||e.shiftKey||t===void 0||i===void 0)return 0;let n=t/i,o=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(o/=n+0,Math.abs(e.deltaY)<50&&(o*=.3),this._wheelPartialScroll+=o,o=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._bufferService.rows),o}_applyScrollModifier(e,t){return t.altKey||t.ctrlKey||t.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity}triggerMouseEvent(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows||e.button===4&&e.action===32||e.button===3&&e.action!==32||e.button!==4&&(e.action===2||e.action===3)||(e.col++,e.row++,e.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,e,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(e))return!1;let t=this._encodings[this._activeEncoding](e);return t&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=e,!0}explainEvents(e){return{down:!!(e&1),up:!!(e&2),drag:!!(e&4),move:!!(e&8),wheel:!!(e&16)}}_equalEvents(e,t,i){if(i){if(e.x!==t.x||e.y!==t.y)return!1}else if(e.col!==t.col||e.row!==t.row)return!1;return!(e.button!==t.button||e.action!==t.action||e.ctrl!==t.ctrl||e.alt!==t.alt||e.shift!==t.shift)}};xd=tt([oe(0,$t),oe(1,Os),oe(2,Wt)],xd);var wu=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],L2=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],dt;function N2(e,t){let i=0,n=t.length-1,o;if(e<t[0][0]||e>t[n][1])return!1;for(;n>=i;)if(o=i+n>>1,e>t[o][1])i=o+1;else if(e<t[o][0])n=o-1;else return!0;return!1}var D2=class{constructor(){if(this.version="6",!dt){dt=new Uint8Array(65536),dt.fill(1),dt[0]=0,dt.fill(0,1,32),dt.fill(0,127,160),dt.fill(2,4352,4448),dt[9001]=2,dt[9002]=2,dt.fill(2,11904,42192),dt[12351]=1,dt.fill(2,44032,55204),dt.fill(2,63744,64256),dt.fill(2,65040,65050),dt.fill(2,65072,65136),dt.fill(2,65280,65377),dt.fill(2,65504,65511);for(let e=0;e<wu.length;++e)dt.fill(0,wu[e][0],wu[e][1]+1)}}wcwidth(e){return e<32?0:e<127?1:e<65536?dt[e]:N2(e,L2)?0:e>=131072&&e<=196605||e>=196608&&e<=262141?2:1}charProperties(e,t){let i=this.wcwidth(e),n=i===0&&t!==0;if(n){let o=ms.extractWidth(t);o===0?n=!1:o>i&&(i=o)}return ms.createPropertyValue(0,i,n)}},ms=class Dl{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new ee,this.onChange=this._onChange.event;let t=new D2;this.register(t),this._active=t.version,this._activeProvider=t}static extractShouldJoin(t){return(t&1)!==0}static extractWidth(t){return t>>1&3}static extractCharKind(t){return t>>3}static createPropertyValue(t,i,n=!1){return(t&16777215)<<3|(i&3)<<1|(n?1:0)}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(t){if(!this._providers[t])throw new Error(`unknown Unicode version "${t}"`);this._active=t,this._activeProvider=this._providers[t],this._onChange.fire(t)}register(t){this._providers[t.version]=t}wcwidth(t){return this._activeProvider.wcwidth(t)}getStringCellWidth(t){let i=0,n=0,o=t.length;for(let l=0;l<o;++l){let c=t.charCodeAt(l);if(55296<=c&&c<=56319){if(++l>=o)return i+this.wcwidth(c);let d=t.charCodeAt(l);56320<=d&&d<=57343?c=(c-55296)*1024+d-56320+65536:i+=this.wcwidth(d)}let u=this.charProperties(c,n),p=Dl.extractWidth(u);Dl.extractShouldJoin(u)&&(p-=Dl.extractWidth(n)),i+=p,n=u}return i}charProperties(t,i){return this._activeProvider.charProperties(t,i)}},M2=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(e){this.glevel=e,this.charset=this._charsets[e]}setgCharset(e,t){this._charsets[e]=t,this.glevel===e&&(this.charset=t)}};function k_(e){var n;let t=(n=e.buffer.lines.get(e.buffer.ybase+e.buffer.y-1))==null?void 0:n.get(e.cols-1),i=e.buffer.lines.get(e.buffer.ybase+e.buffer.y);i&&t&&(i.isWrapped=t[3]!==0&&t[3]!==32)}var Ro=2147483647,T2=256,A0=class Cd{constructor(t=32,i=32){if(this.maxLength=t,this.maxSubParamsLength=i,i>T2)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(t),this.length=0,this._subParams=new Int32Array(i),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(t),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(t){let i=new Cd;if(!t.length)return i;for(let n=Array.isArray(t[0])?1:0;n<t.length;++n){let o=t[n];if(Array.isArray(o))for(let l=0;l<o.length;++l)i.addSubParam(o[l]);else i.addParam(o)}return i}clone(){let t=new Cd(this.maxLength,this.maxSubParamsLength);return t.params.set(this.params),t.length=this.length,t._subParams.set(this._subParams),t._subParamsLength=this._subParamsLength,t._subParamsIdx.set(this._subParamsIdx),t._rejectDigits=this._rejectDigits,t._rejectSubDigits=this._rejectSubDigits,t._digitIsSub=this._digitIsSub,t}toArray(){let t=[];for(let i=0;i<this.length;++i){t.push(this.params[i]);let n=this._subParamsIdx[i]>>8,o=this._subParamsIdx[i]&255;o-n>0&&t.push(Array.prototype.slice.call(this._subParams,n,o))}return t}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(t){if(this._digitIsSub=!1,this.length>=this.maxLength){this._rejectDigits=!0;return}if(t<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=t>Ro?Ro:t}addSubParam(t){if(this._digitIsSub=!0,!!this.length){if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength){this._rejectSubDigits=!0;return}if(t<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=t>Ro?Ro:t,this._subParamsIdx[this.length-1]++}}hasSubParams(t){return(this._subParamsIdx[t]&255)-(this._subParamsIdx[t]>>8)>0}getSubParams(t){let i=this._subParamsIdx[t]>>8,n=this._subParamsIdx[t]&255;return n-i>0?this._subParams.subarray(i,n):null}getSubParamsAll(){let t={};for(let i=0;i<this.length;++i){let n=this._subParamsIdx[i]>>8,o=this._subParamsIdx[i]&255;o-n>0&&(t[i]=this._subParams.slice(n,o))}return t}addDigit(t){let i;if(this._rejectDigits||!(i=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let n=this._digitIsSub?this._subParams:this.params,o=n[i-1];n[i-1]=~o?Math.min(o*10+t,Ro):t}},Po=[],O2=class{constructor(){this._state=0,this._active=Po,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(e,t){this._handlers[e]===void 0&&(this._handlers[e]=[]);let i=this._handlers[e];return i.push(t),{dispose:()=>{let n=i.indexOf(t);n!==-1&&i.splice(n,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=Po}reset(){if(this._state===2)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].end(!1);this._stack.paused=!1,this._active=Po,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||Po,!this._active.length)this._handlerFb(this._id,"START");else for(let e=this._active.length-1;e>=0;e--)this._active[e].start()}_put(e,t,i){if(!this._active.length)this._handlerFb(this._id,"PUT",Jl(e,t,i));else for(let n=this._active.length-1;n>=0;n--)this._active[n].put(e,t,i)}start(){this.reset(),this._state=1}put(e,t,i){if(this._state!==3){if(this._state===1)for(;t<i;){let n=e[t++];if(n===59){this._state=2,this._start();break}if(n<48||57<n){this._state=3;return}this._id===-1&&(this._id=0),this._id=this._id*10+n-48}this._state===2&&i-t>0&&this._put(e,t,i)}}end(e,t=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),!this._active.length)this._handlerFb(this._id,"END",e);else{let i=!1,n=this._active.length-1,o=!1;if(this._stack.paused&&(n=this._stack.loopPosition-1,i=t,o=this._stack.fallThrough,this._stack.paused=!1),!o&&i===!1){for(;n>=0&&(i=this._active[n].end(e),i!==!0);n--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!1,i;n--}for(;n>=0;n--)if(i=this._active[n].end(!1),i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!0,i}this._active=Po,this._id=-1,this._state=0}}},si=class{constructor(e){this._handler=e,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(e,t,i){this._hitLimit||(this._data+=Jl(e,t,i),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}end(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data),t instanceof Promise))return t.then(i=>(this._data="",this._hitLimit=!1,i));return this._data="",this._hitLimit=!1,t}},Lo=[],B2=class{constructor(){this._handlers=Object.create(null),this._active=Lo,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=Lo}registerHandler(e,t){this._handlers[e]===void 0&&(this._handlers[e]=[]);let i=this._handlers[e];return i.push(t),{dispose:()=>{let n=i.indexOf(t);n!==-1&&i.splice(n,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}reset(){if(this._active.length)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].unhook(!1);this._stack.paused=!1,this._active=Lo,this._ident=0}hook(e,t){if(this.reset(),this._ident=e,this._active=this._handlers[e]||Lo,!this._active.length)this._handlerFb(this._ident,"HOOK",t);else for(let i=this._active.length-1;i>=0;i--)this._active[i].hook(t)}put(e,t,i){if(!this._active.length)this._handlerFb(this._ident,"PUT",Jl(e,t,i));else for(let n=this._active.length-1;n>=0;n--)this._active[n].put(e,t,i)}unhook(e,t=!0){if(!this._active.length)this._handlerFb(this._ident,"UNHOOK",e);else{let i=!1,n=this._active.length-1,o=!1;if(this._stack.paused&&(n=this._stack.loopPosition-1,i=t,o=this._stack.fallThrough,this._stack.paused=!1),!o&&i===!1){for(;n>=0&&(i=this._active[n].unhook(e),i!==!0);n--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!1,i;n--}for(;n>=0;n--)if(i=this._active[n].unhook(!1),i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!0,i}this._active=Lo,this._ident=0}},Bo=new A0;Bo.addParam(0);var E_=class{constructor(e){this._handler=e,this._data="",this._params=Bo,this._hitLimit=!1}hook(e){this._params=e.length>1||e.params[0]?e.clone():Bo,this._data="",this._hitLimit=!1}put(e,t,i){this._hitLimit||(this._data+=Jl(e,t,i),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}unhook(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data,this._params),t instanceof Promise))return t.then(i=>(this._params=Bo,this._data="",this._hitLimit=!1,i));return this._params=Bo,this._data="",this._hitLimit=!1,t}},I2=class{constructor(e){this.table=new Uint8Array(e)}setDefault(e,t){this.table.fill(e<<4|t)}add(e,t,i,n){this.table[t<<8|e]=i<<4|n}addMany(e,t,i,n){for(let o=0;o<e.length;o++)this.table[t<<8|e[o]]=i<<4|n}},_i=160,A2=(function(){let e=new I2(4095),t=Array.apply(null,Array(256)).map((u,p)=>p),i=(u,p)=>t.slice(u,p),n=i(32,127),o=i(0,24);o.push(25),o.push.apply(o,i(28,32));let l=i(0,14),c;e.setDefault(1,0),e.addMany(n,0,2,0);for(c in l)e.addMany([24,26,153,154],c,3,0),e.addMany(i(128,144),c,3,0),e.addMany(i(144,152),c,3,0),e.add(156,c,0,0),e.add(27,c,11,1),e.add(157,c,4,8),e.addMany([152,158,159],c,0,7),e.add(155,c,11,3),e.add(144,c,11,9);return e.addMany(o,0,3,0),e.addMany(o,1,3,1),e.add(127,1,0,1),e.addMany(o,8,0,8),e.addMany(o,3,3,3),e.add(127,3,0,3),e.addMany(o,4,3,4),e.add(127,4,0,4),e.addMany(o,6,3,6),e.addMany(o,5,3,5),e.add(127,5,0,5),e.addMany(o,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(n,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(i(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(n,7,0,7),e.addMany(o,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(i(64,127),3,7,0),e.addMany(i(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(i(48,60),4,8,4),e.addMany(i(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(i(32,64),6,0,6),e.add(127,6,0,6),e.addMany(i(64,127),6,0,0),e.addMany(i(32,48),3,9,5),e.addMany(i(32,48),5,9,5),e.addMany(i(48,64),5,0,6),e.addMany(i(64,127),5,7,0),e.addMany(i(32,48),4,9,5),e.addMany(i(32,48),1,9,2),e.addMany(i(32,48),2,9,2),e.addMany(i(48,127),2,10,0),e.addMany(i(48,80),1,10,0),e.addMany(i(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(i(96,127),1,10,0),e.add(80,1,11,9),e.addMany(o,9,0,9),e.add(127,9,0,9),e.addMany(i(28,32),9,0,9),e.addMany(i(32,48),9,9,12),e.addMany(i(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(o,11,0,11),e.addMany(i(32,128),11,0,11),e.addMany(i(28,32),11,0,11),e.addMany(o,10,0,10),e.add(127,10,0,10),e.addMany(i(28,32),10,0,10),e.addMany(i(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(i(32,48),10,9,12),e.addMany(o,12,0,12),e.add(127,12,0,12),e.addMany(i(28,32),12,0,12),e.addMany(i(32,48),12,9,12),e.addMany(i(48,64),12,0,11),e.addMany(i(64,127),12,12,13),e.addMany(i(64,127),10,12,13),e.addMany(i(64,127),9,12,13),e.addMany(o,13,13,13),e.addMany(n,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(_i,0,2,0),e.add(_i,8,5,8),e.add(_i,6,0,6),e.add(_i,11,0,11),e.add(_i,13,13,13),e})(),j2=class extends Le{constructor(e=A2){super(),this._transitions=e,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new A0,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(t,i,n)=>{},this._executeHandlerFb=t=>{},this._csiHandlerFb=(t,i)=>{},this._escHandlerFb=t=>{},this._errorHandlerFb=t=>t,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this._register(Ke(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this._register(new O2),this._dcsParser=this._register(new B2),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(e,t=[64,126]){let i=0;if(e.prefix){if(e.prefix.length>1)throw new Error("only one byte as prefix supported");if(i=e.prefix.charCodeAt(0),i&&60>i||i>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(e.intermediates){if(e.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let o=0;o<e.intermediates.length;++o){let l=e.intermediates.charCodeAt(o);if(32>l||l>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");i<<=8,i|=l}}if(e.final.length!==1)throw new Error("final must be a single byte");let n=e.final.charCodeAt(0);if(t[0]>n||n>t[1])throw new Error(`final must be in range ${t[0]} .. ${t[1]}`);return i<<=8,i|=n,i}identToString(e){let t=[];for(;e;)t.push(String.fromCharCode(e&255)),e>>=8;return t.reverse().join("")}setPrintHandler(e){this._printHandler=e}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(e,t){let i=this._identifier(e,[48,126]);this._escHandlers[i]===void 0&&(this._escHandlers[i]=[]);let n=this._escHandlers[i];return n.push(t),{dispose:()=>{let o=n.indexOf(t);o!==-1&&n.splice(o,1)}}}clearEscHandler(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]}setEscHandlerFallback(e){this._escHandlerFb=e}setExecuteHandler(e,t){this._executeHandlers[e.charCodeAt(0)]=t}clearExecuteHandler(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]}setExecuteHandlerFallback(e){this._executeHandlerFb=e}registerCsiHandler(e,t){let i=this._identifier(e);this._csiHandlers[i]===void 0&&(this._csiHandlers[i]=[]);let n=this._csiHandlers[i];return n.push(t),{dispose:()=>{let o=n.indexOf(t);o!==-1&&n.splice(o,1)}}}clearCsiHandler(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]}setCsiHandlerFallback(e){this._csiHandlerFb=e}registerDcsHandler(e,t){return this._dcsParser.registerHandler(this._identifier(e),t)}clearDcsHandler(e){this._dcsParser.clearHandler(this._identifier(e))}setDcsHandlerFallback(e){this._dcsParser.setHandlerFallback(e)}registerOscHandler(e,t){return this._oscParser.registerHandler(e,t)}clearOscHandler(e){this._oscParser.clearHandler(e)}setOscHandlerFallback(e){this._oscParser.setHandlerFallback(e)}setErrorHandler(e){this._errorHandler=e}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(e,t,i,n,o){this._parseStack.state=e,this._parseStack.handlers=t,this._parseStack.handlerPos=i,this._parseStack.transition=n,this._parseStack.chunkPos=o}parse(e,t,i){let n=0,o=0,l=0,c;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,l=this._parseStack.chunkPos+1;else{if(i===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let u=this._parseStack.handlers,p=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(i===!1&&p>-1){for(;p>=0&&(c=u[p](this._params),c!==!0);p--)if(c instanceof Promise)return this._parseStack.handlerPos=p,c}this._parseStack.handlers=[];break;case 4:if(i===!1&&p>-1){for(;p>=0&&(c=u[p](),c!==!0);p--)if(c instanceof Promise)return this._parseStack.handlerPos=p,c}this._parseStack.handlers=[];break;case 6:if(n=e[this._parseStack.chunkPos],c=this._dcsParser.unhook(n!==24&&n!==26,i),c)return c;n===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(n=e[this._parseStack.chunkPos],c=this._oscParser.end(n!==24&&n!==26,i),c)return c;n===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break}this._parseStack.state=0,l=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=this._parseStack.transition&15}for(let u=l;u<t;++u){switch(n=e[u],o=this._transitions.table[this.currentState<<8|(n<160?n:_i)],o>>4){case 2:for(let S=u+1;;++S){if(S>=t||(n=e[S])<32||n>126&&n<_i){this._printHandler(e,u,S),u=S-1;break}if(++S>=t||(n=e[S])<32||n>126&&n<_i){this._printHandler(e,u,S),u=S-1;break}if(++S>=t||(n=e[S])<32||n>126&&n<_i){this._printHandler(e,u,S),u=S-1;break}if(++S>=t||(n=e[S])<32||n>126&&n<_i){this._printHandler(e,u,S),u=S-1;break}}break;case 3:this._executeHandlers[n]?this._executeHandlers[n]():this._executeHandlerFb(n),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:u,code:n,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let p=this._csiHandlers[this._collect<<8|n],d=p?p.length-1:-1;for(;d>=0&&(c=p[d](this._params),c!==!0);d--)if(c instanceof Promise)return this._preserveStack(3,p,d,o,u),c;d<0&&this._csiHandlerFb(this._collect<<8|n,this._params),this.precedingJoinState=0;break;case 8:do switch(n){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(n-48)}while(++u<t&&(n=e[u])>47&&n<60);u--;break;case 9:this._collect<<=8,this._collect|=n;break;case 10:let _=this._escHandlers[this._collect<<8|n],g=_?_.length-1:-1;for(;g>=0&&(c=_[g](),c!==!0);g--)if(c instanceof Promise)return this._preserveStack(4,_,g,o,u),c;g<0&&this._escHandlerFb(this._collect<<8|n),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|n,this._params);break;case 13:for(let S=u+1;;++S)if(S>=t||(n=e[S])===24||n===26||n===27||n>127&&n<_i){this._dcsParser.put(e,u,S),u=S-1;break}break;case 14:if(c=this._dcsParser.unhook(n!==24&&n!==26),c)return this._preserveStack(6,[],0,o,u),c;n===27&&(o|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let S=u+1;;S++)if(S>=t||(n=e[S])<32||n>127&&n<_i){this._oscParser.put(e,u,S),u=S-1;break}break;case 6:if(c=this._oscParser.end(n!==24&&n!==26),c)return this._preserveStack(5,[],0,o,u),c;n===27&&(o|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break}this.currentState=o&15}}},F2=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,z2=/^[\da-f]+$/;function R_(e){if(!e)return;let t=e.toLowerCase();if(t.indexOf("rgb:")===0){t=t.slice(4);let i=F2.exec(t);if(i){let n=i[1]?15:i[4]?255:i[7]?4095:65535;return[Math.round(parseInt(i[1]||i[4]||i[7]||i[10],16)/n*255),Math.round(parseInt(i[2]||i[5]||i[8]||i[11],16)/n*255),Math.round(parseInt(i[3]||i[6]||i[9]||i[12],16)/n*255)]}}else if(t.indexOf("#")===0&&(t=t.slice(1),z2.exec(t)&&[3,6,9,12].includes(t.length))){let i=t.length/3,n=[0,0,0];for(let o=0;o<3;++o){let l=parseInt(t.slice(i*o,i*o+i),16);n[o]=i===1?l<<4:i===2?l:i===3?l>>4:l>>8}return n}}function xu(e,t){let i=e.toString(16),n=i.length<2?"0"+i:i;switch(t){case 4:return i[0];case 8:return n;case 12:return(n+n).slice(0,3);default:return n+n}}function H2(e,t=16){let[i,n,o]=e;return`rgb:${xu(i,t)}/${xu(n,t)}/${xu(o,t)}`}var $2={"(":0,")":1,"*":2,"+":3,"-":1,".":2},Ir=131072,P_=10;function L_(e,t){if(e>24)return t.setWinLines||!1;switch(e){case 1:return!!t.restoreWin;case 2:return!!t.minimizeWin;case 3:return!!t.setWinPosition;case 4:return!!t.setWinSizePixels;case 5:return!!t.raiseWin;case 6:return!!t.lowerWin;case 7:return!!t.refreshWin;case 8:return!!t.setWinSizeChars;case 9:return!!t.maximizeWin;case 10:return!!t.fullscreenWin;case 11:return!!t.getWinState;case 13:return!!t.getWinPosition;case 14:return!!t.getWinSizePixels;case 15:return!!t.getScreenSizePixels;case 16:return!!t.getCellSizePixels;case 18:return!!t.getWinSizeChars;case 19:return!!t.getScreenSizeChars;case 20:return!!t.getIconTitle;case 21:return!!t.getWinTitle;case 22:return!!t.pushTitle;case 23:return!!t.popTitle;case 24:return!!t.setWinLines}return!1}var N_=5e3,D_=0,W2=class extends Le{constructor(e,t,i,n,o,l,c,u,p=new j2){super(),this._bufferService=e,this._charsetService=t,this._coreService=i,this._logService=n,this._optionsService=o,this._oscLinkService=l,this._coreMouseService=c,this._unicodeService=u,this._parser=p,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new lb,this._utf8Decoder=new cb,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=at.clone(),this._eraseAttrDataInternal=at.clone(),this._onRequestBell=this._register(new ee),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this._register(new ee),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this._register(new ee),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this._register(new ee),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this._register(new ee),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this._register(new ee),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this._register(new ee),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this._register(new ee),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this._register(new ee),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this._register(new ee),this.onLineFeed=this._onLineFeed.event,this._onScroll=this._register(new ee),this.onScroll=this._onScroll.event,this._onTitleChange=this._register(new ee),this.onTitleChange=this._onTitleChange.event,this._onColor=this._register(new ee),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this._register(this._parser),this._dirtyRowTracker=new bd(this._bufferService),this._activeBuffer=this._bufferService.buffer,this._register(this._bufferService.buffers.onBufferActivate(d=>this._activeBuffer=d.activeBuffer)),this._parser.setCsiHandlerFallback((d,_)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(d),params:_.toArray()})}),this._parser.setEscHandlerFallback(d=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(d)})}),this._parser.setExecuteHandlerFallback(d=>{this._logService.debug("Unknown EXECUTE code: ",{code:d})}),this._parser.setOscHandlerFallback((d,_,g)=>{this._logService.debug("Unknown OSC code: ",{identifier:d,action:_,data:g})}),this._parser.setDcsHandlerFallback((d,_,g)=>{_==="HOOK"&&(g=g.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(d),action:_,payload:g})}),this._parser.setPrintHandler((d,_,g)=>this.print(d,_,g)),this._parser.registerCsiHandler({final:"@"},d=>this.insertChars(d)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},d=>this.scrollLeft(d)),this._parser.registerCsiHandler({final:"A"},d=>this.cursorUp(d)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},d=>this.scrollRight(d)),this._parser.registerCsiHandler({final:"B"},d=>this.cursorDown(d)),this._parser.registerCsiHandler({final:"C"},d=>this.cursorForward(d)),this._parser.registerCsiHandler({final:"D"},d=>this.cursorBackward(d)),this._parser.registerCsiHandler({final:"E"},d=>this.cursorNextLine(d)),this._parser.registerCsiHandler({final:"F"},d=>this.cursorPrecedingLine(d)),this._parser.registerCsiHandler({final:"G"},d=>this.cursorCharAbsolute(d)),this._parser.registerCsiHandler({final:"H"},d=>this.cursorPosition(d)),this._parser.registerCsiHandler({final:"I"},d=>this.cursorForwardTab(d)),this._parser.registerCsiHandler({final:"J"},d=>this.eraseInDisplay(d,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},d=>this.eraseInDisplay(d,!0)),this._parser.registerCsiHandler({final:"K"},d=>this.eraseInLine(d,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},d=>this.eraseInLine(d,!0)),this._parser.registerCsiHandler({final:"L"},d=>this.insertLines(d)),this._parser.registerCsiHandler({final:"M"},d=>this.deleteLines(d)),this._parser.registerCsiHandler({final:"P"},d=>this.deleteChars(d)),this._parser.registerCsiHandler({final:"S"},d=>this.scrollUp(d)),this._parser.registerCsiHandler({final:"T"},d=>this.scrollDown(d)),this._parser.registerCsiHandler({final:"X"},d=>this.eraseChars(d)),this._parser.registerCsiHandler({final:"Z"},d=>this.cursorBackwardTab(d)),this._parser.registerCsiHandler({final:"`"},d=>this.charPosAbsolute(d)),this._parser.registerCsiHandler({final:"a"},d=>this.hPositionRelative(d)),this._parser.registerCsiHandler({final:"b"},d=>this.repeatPrecedingCharacter(d)),this._parser.registerCsiHandler({final:"c"},d=>this.sendDeviceAttributesPrimary(d)),this._parser.registerCsiHandler({prefix:">",final:"c"},d=>this.sendDeviceAttributesSecondary(d)),this._parser.registerCsiHandler({final:"d"},d=>this.linePosAbsolute(d)),this._parser.registerCsiHandler({final:"e"},d=>this.vPositionRelative(d)),this._parser.registerCsiHandler({final:"f"},d=>this.hVPosition(d)),this._parser.registerCsiHandler({final:"g"},d=>this.tabClear(d)),this._parser.registerCsiHandler({final:"h"},d=>this.setMode(d)),this._parser.registerCsiHandler({prefix:"?",final:"h"},d=>this.setModePrivate(d)),this._parser.registerCsiHandler({final:"l"},d=>this.resetMode(d)),this._parser.registerCsiHandler({prefix:"?",final:"l"},d=>this.resetModePrivate(d)),this._parser.registerCsiHandler({final:"m"},d=>this.charAttributes(d)),this._parser.registerCsiHandler({final:"n"},d=>this.deviceStatus(d)),this._parser.registerCsiHandler({prefix:"?",final:"n"},d=>this.deviceStatusPrivate(d)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},d=>this.softReset(d)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},d=>this.setCursorStyle(d)),this._parser.registerCsiHandler({final:"r"},d=>this.setScrollRegion(d)),this._parser.registerCsiHandler({final:"s"},d=>this.saveCursor(d)),this._parser.registerCsiHandler({final:"t"},d=>this.windowOptions(d)),this._parser.registerCsiHandler({final:"u"},d=>this.restoreCursor(d)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},d=>this.insertColumns(d)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},d=>this.deleteColumns(d)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},d=>this.selectProtected(d)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},d=>this.requestMode(d,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},d=>this.requestMode(d,!1)),this._parser.setExecuteHandler(H.BEL,()=>this.bell()),this._parser.setExecuteHandler(H.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(H.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(H.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(H.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(H.BS,()=>this.backspace()),this._parser.setExecuteHandler(H.HT,()=>this.tab()),this._parser.setExecuteHandler(H.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(H.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(Ll.IND,()=>this.index()),this._parser.setExecuteHandler(Ll.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(Ll.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new si(d=>(this.setTitle(d),this.setIconName(d),!0))),this._parser.registerOscHandler(1,new si(d=>this.setIconName(d))),this._parser.registerOscHandler(2,new si(d=>this.setTitle(d))),this._parser.registerOscHandler(4,new si(d=>this.setOrReportIndexedColor(d))),this._parser.registerOscHandler(8,new si(d=>this.setHyperlink(d))),this._parser.registerOscHandler(10,new si(d=>this.setOrReportFgColor(d))),this._parser.registerOscHandler(11,new si(d=>this.setOrReportBgColor(d))),this._parser.registerOscHandler(12,new si(d=>this.setOrReportCursorColor(d))),this._parser.registerOscHandler(104,new si(d=>this.restoreIndexedColor(d))),this._parser.registerOscHandler(110,new si(d=>this.restoreFgColor(d))),this._parser.registerOscHandler(111,new si(d=>this.restoreBgColor(d))),this._parser.registerOscHandler(112,new si(d=>this.restoreCursorColor(d))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let d in pt)this._parser.registerEscHandler({intermediates:"(",final:d},()=>this.selectCharset("("+d)),this._parser.registerEscHandler({intermediates:")",final:d},()=>this.selectCharset(")"+d)),this._parser.registerEscHandler({intermediates:"*",final:d},()=>this.selectCharset("*"+d)),this._parser.registerEscHandler({intermediates:"+",final:d},()=>this.selectCharset("+"+d)),this._parser.registerEscHandler({intermediates:"-",final:d},()=>this.selectCharset("-"+d)),this._parser.registerEscHandler({intermediates:".",final:d},()=>this.selectCharset("."+d)),this._parser.registerEscHandler({intermediates:"/",final:d},()=>this.selectCharset("/"+d));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(d=>(this._logService.error("Parsing error: ",d),d)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new E_((d,_)=>this.requestStatusString(d,_)))}getAttrData(){return this._curAttrData}_preserveStack(e,t,i,n){this._parseStack.paused=!0,this._parseStack.cursorStartX=e,this._parseStack.cursorStartY=t,this._parseStack.decodedLength=i,this._parseStack.position=n}_logSlowResolvingAsync(e){this._logService.logLevel<=3&&Promise.race([e,new Promise((t,i)=>setTimeout(()=>i("#SLOW_TIMEOUT"),N_))]).catch(t=>{if(t!=="#SLOW_TIMEOUT")throw t;console.warn(`async parser handler taking longer than ${N_} ms`)})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(e,t){let i,n=this._activeBuffer.x,o=this._activeBuffer.y,l=0,c=this._parseStack.paused;if(c){if(i=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,t))return this._logSlowResolvingAsync(i),i;n=this._parseStack.cursorStartX,o=this._parseStack.cursorStartY,this._parseStack.paused=!1,e.length>Ir&&(l=this._parseStack.position+Ir)}if(this._logService.logLevel<=1&&this._logService.debug(`parsing data ${typeof e=="string"?` "${e}"`:` "${Array.prototype.map.call(e,d=>String.fromCharCode(d)).join("")}"`}`),this._logService.logLevel===0&&this._logService.trace("parsing data (codes)",typeof e=="string"?e.split("").map(d=>d.charCodeAt(0)):e),this._parseBuffer.length<e.length&&this._parseBuffer.length<Ir&&(this._parseBuffer=new Uint32Array(Math.min(e.length,Ir))),c||this._dirtyRowTracker.clearRange(),e.length>Ir)for(let d=l;d<e.length;d+=Ir){let _=d+Ir<e.length?d+Ir:e.length,g=typeof e=="string"?this._stringDecoder.decode(e.substring(d,_),this._parseBuffer):this._utf8Decoder.decode(e.subarray(d,_),this._parseBuffer);if(i=this._parser.parse(this._parseBuffer,g))return this._preserveStack(n,o,g,d),this._logSlowResolvingAsync(i),i}else if(!c){let d=typeof e=="string"?this._stringDecoder.decode(e,this._parseBuffer):this._utf8Decoder.decode(e,this._parseBuffer);if(i=this._parser.parse(this._parseBuffer,d))return this._preserveStack(n,o,d,0),this._logSlowResolvingAsync(i),i}(this._activeBuffer.x!==n||this._activeBuffer.y!==o)&&this._onCursorMove.fire();let u=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),p=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);p<this._bufferService.rows&&this._onRequestRefreshRows.fire({start:Math.min(p,this._bufferService.rows-1),end:Math.min(u,this._bufferService.rows-1)})}print(e,t,i){let n,o,l=this._charsetService.charset,c=this._optionsService.rawOptions.screenReaderMode,u=this._bufferService.cols,p=this._coreService.decPrivateModes.wraparound,d=this._coreService.modes.insertMode,_=this._curAttrData,g=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&i-t>0&&g.getWidth(this._activeBuffer.x-1)===2&&g.setCellFromCodepoint(this._activeBuffer.x-1,0,1,_);let S=this._parser.precedingJoinState;for(let w=t;w<i;++w){if(n=e[w],n<127&&l){let L=l[String.fromCharCode(n)];L&&(n=L.charCodeAt(0))}let x=this._unicodeService.charProperties(n,S);o=ms.extractWidth(x);let C=ms.extractShouldJoin(x),k=C?ms.extractWidth(S):0;if(S=x,c&&this._onA11yChar.fire(jr(n)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+o-k>u){if(p){let L=g,W=this._activeBuffer.x-k;for(this._activeBuffer.x=k,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),g=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),k>0&&g instanceof To&&g.copyCellsFrom(L,W,0,k,!1);W<u;)L.setCellFromCodepoint(W++,0,1,_)}else if(this._activeBuffer.x=u-1,o===2)continue}if(C&&this._activeBuffer.x){let L=g.getWidth(this._activeBuffer.x-1)?1:2;g.addCodepointToCell(this._activeBuffer.x-L,n,o);for(let W=o-k;--W>=0;)g.setCellFromCodepoint(this._activeBuffer.x++,0,0,_);continue}if(d&&(g.insertCells(this._activeBuffer.x,o-k,this._activeBuffer.getNullCell(_)),g.getWidth(u-1)===2&&g.setCellFromCodepoint(u-1,0,1,_)),g.setCellFromCodepoint(this._activeBuffer.x++,n,o,_),o>0)for(;--o;)g.setCellFromCodepoint(this._activeBuffer.x++,0,0,_)}this._parser.precedingJoinState=S,this._activeBuffer.x<u&&i-t>0&&g.getWidth(this._activeBuffer.x)===0&&!g.hasContent(this._activeBuffer.x)&&g.setCellFromCodepoint(this._activeBuffer.x,0,1,_),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(e,t){return e.final==="t"&&!e.prefix&&!e.intermediates?this._parser.registerCsiHandler(e,i=>L_(i.params[0],this._optionsService.rawOptions.windowOptions)?t(i):!0):this._parser.registerCsiHandler(e,t)}registerDcsHandler(e,t){return this._parser.registerDcsHandler(e,new E_(t))}registerEscHandler(e,t){return this._parser.registerEscHandler(e,t)}registerOscHandler(e,t){return this._parser.registerOscHandler(e,new si(t))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var e;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&e.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);t.hasWidth(this._activeBuffer.x)&&!t.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let e=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-e),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(e=this._bufferService.cols-1){this._activeBuffer.x=Math.min(e,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(e,t){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=e,this._activeBuffer.y=this._activeBuffer.scrollTop+t):(this._activeBuffer.x=e,this._activeBuffer.y=t),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(e,t){this._restrictCursor(),this._setCursor(this._activeBuffer.x+e,this._activeBuffer.y+t)}cursorUp(e){let t=this._activeBuffer.y-this._activeBuffer.scrollTop;return t>=0?this._moveCursor(0,-Math.min(t,e.params[0]||1)):this._moveCursor(0,-(e.params[0]||1)),!0}cursorDown(e){let t=this._activeBuffer.scrollBottom-this._activeBuffer.y;return t>=0?this._moveCursor(0,Math.min(t,e.params[0]||1)):this._moveCursor(0,e.params[0]||1),!0}cursorForward(e){return this._moveCursor(e.params[0]||1,0),!0}cursorBackward(e){return this._moveCursor(-(e.params[0]||1),0),!0}cursorNextLine(e){return this.cursorDown(e),this._activeBuffer.x=0,!0}cursorPrecedingLine(e){return this.cursorUp(e),this._activeBuffer.x=0,!0}cursorCharAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(e){return this._setCursor(e.length>=2?(e.params[1]||1)-1:0,(e.params[0]||1)-1),!0}charPosAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(e){return this._moveCursor(e.params[0]||1,0),!0}linePosAbsolute(e){return this._setCursor(this._activeBuffer.x,(e.params[0]||1)-1),!0}vPositionRelative(e){return this._moveCursor(0,e.params[0]||1),!0}hVPosition(e){return this.cursorPosition(e),!0}tabClear(e){let t=e.params[0];return t===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:t===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(e){let t=e.params[0];return t===1&&(this._curAttrData.bg|=536870912),(t===2||t===0)&&(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(e,t,i,n=!1,o=!1){let l=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);l.replaceCells(t,i,this._activeBuffer.getNullCell(this._eraseAttrData()),o),n&&(l.isWrapped=!1)}_resetBufferLine(e,t=!1){let i=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);i&&(i.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),t),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+e),i.isWrapped=!1)}eraseInDisplay(e,t=!1){var n;this._restrictCursor(this._bufferService.cols);let i;switch(e.params[0]){case 0:for(i=this._activeBuffer.y,this._dirtyRowTracker.markDirty(i),this._eraseInBufferLine(i++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,t);i<this._bufferService.rows;i++)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(i);break;case 1:for(i=this._activeBuffer.y,this._dirtyRowTracker.markDirty(i),this._eraseInBufferLine(i,0,this._activeBuffer.x+1,!0,t),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(i+1).isWrapped=!1);i--;)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(0);break;case 2:if(this._optionsService.rawOptions.scrollOnEraseInDisplay){for(i=this._bufferService.rows,this._dirtyRowTracker.markRangeDirty(0,i-1);i--&&!((n=this._activeBuffer.lines.get(this._activeBuffer.ybase+i))!=null&&n.getTrimmedLength()););for(;i>=0;i--)this._bufferService.scroll(this._eraseAttrData())}else{for(i=this._bufferService.rows,this._dirtyRowTracker.markDirty(i-1);i--;)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(0)}break;case 3:let o=this._activeBuffer.lines.length-this._bufferService.rows;o>0&&(this._activeBuffer.lines.trimStart(o),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-o,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-o,0),this._onScroll.fire(0));break}return!0}eraseInLine(e,t=!1){switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,t);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,t);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,t);break}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let i=this._activeBuffer.ybase+this._activeBuffer.y,n=this._bufferService.rows-1-this._activeBuffer.scrollBottom,o=this._bufferService.rows-1+this._activeBuffer.ybase-n+1;for(;t--;)this._activeBuffer.lines.splice(o-1,1),this._activeBuffer.lines.splice(i,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let i=this._activeBuffer.ybase+this._activeBuffer.y,n;for(n=this._bufferService.rows-1-this._activeBuffer.scrollBottom,n=this._bufferService.rows-1+this._activeBuffer.ybase-n;t--;)this._activeBuffer.lines.splice(i,1),this._activeBuffer.lines.splice(n,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.insertCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.deleteCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(at));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);n.deleteCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData())),n.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);n.insertCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData())),n.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);n.insertCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData())),n.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);n.deleteCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData())),n.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(e.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(e){let t=this._parser.precedingJoinState;if(!t)return!0;let i=e.params[0]||1,n=ms.extractWidth(t),o=this._activeBuffer.x-n,l=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(o),c=new Uint32Array(l.length*i),u=0;for(let d=0;d<l.length;){let _=l.codePointAt(d)||0;c[u++]=_,d+=_>65535?2:1}let p=u;for(let d=1;d<i;++d)c.copyWithin(p,0,u),p+=u;return this.print(c,0,p),!0}sendDeviceAttributesPrimary(e){return e.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(H.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(H.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(e){return e.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(H.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(H.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(e.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(H.ESC+"[>83;40003;0c")),!0}_is(e){return(this._optionsService.rawOptions.termName+"").indexOf(e)===0}setMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0;break}return!0}setModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,fs),this._charsetService.setgCharset(1,fs),this._charsetService.setgCharset(2,fs),this._charsetService.setgCharset(3,fs);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!0;break}return!0}resetMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1;break}return!0}resetModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),e.params[t]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!1,this._onRequestRefreshRows.fire(void 0);break}return!0}requestMode(e,t){(C=>(C[C.NOT_RECOGNIZED=0]="NOT_RECOGNIZED",C[C.SET=1]="SET",C[C.RESET=2]="RESET",C[C.PERMANENTLY_SET=3]="PERMANENTLY_SET",C[C.PERMANENTLY_RESET=4]="PERMANENTLY_RESET"))(void 0||(i={}));let n=this._coreService.decPrivateModes,{activeProtocol:o,activeEncoding:l}=this._coreMouseService,c=this._coreService,{buffers:u,cols:p}=this._bufferService,{active:d,alt:_}=u,g=this._optionsService.rawOptions,S=(C,k)=>(c.triggerDataEvent(`${H.ESC}[${t?"":"?"}${C};${k}$y`),!0),w=C=>C?1:2,x=e.params[0];return t?x===2?S(x,4):x===4?S(x,w(c.modes.insertMode)):x===12?S(x,3):x===20?S(x,w(g.convertEol)):S(x,0):x===1?S(x,w(n.applicationCursorKeys)):x===3?S(x,g.windowOptions.setWinLines?p===80?2:p===132?1:0:0):x===6?S(x,w(n.origin)):x===7?S(x,w(n.wraparound)):x===8?S(x,3):x===9?S(x,w(o==="X10")):x===12?S(x,w(g.cursorBlink)):x===25?S(x,w(!c.isCursorHidden)):x===45?S(x,w(n.reverseWraparound)):x===66?S(x,w(n.applicationKeypad)):x===67?S(x,4):x===1e3?S(x,w(o==="VT200")):x===1002?S(x,w(o==="DRAG")):x===1003?S(x,w(o==="ANY")):x===1004?S(x,w(n.sendFocus)):x===1005?S(x,4):x===1006?S(x,w(l==="SGR")):x===1015?S(x,4):x===1016?S(x,w(l==="SGR_PIXELS")):x===1048?S(x,1):x===47||x===1047||x===1049?S(x,w(d===_)):x===2004?S(x,w(n.bracketedPasteMode)):x===2026?S(x,w(n.synchronizedOutput)):S(x,0)}_updateAttrColor(e,t,i,n,o){return t===2?(e|=50331648,e&=-16777216,e|=Zo.fromColorRGB([i,n,o])):t===5&&(e&=-50331904,e|=33554432|i&255),e}_extractColor(e,t,i){let n=[0,0,-1,0,0,0],o=0,l=0;do{if(n[l+o]=e.params[t+l],e.hasSubParams(t+l)){let c=e.getSubParams(t+l),u=0;do n[1]===5&&(o=1),n[l+u+1+o]=c[u];while(++u<c.length&&u+l+1+o<n.length);break}if(n[1]===5&&l+o>=2||n[1]===2&&l+o>=5)break;n[1]&&(o=1)}while(++l+t<e.length&&l+o<n.length);for(let c=2;c<n.length;++c)n[c]===-1&&(n[c]=0);switch(n[0]){case 38:i.fg=this._updateAttrColor(i.fg,n[1],n[3],n[4],n[5]);break;case 48:i.bg=this._updateAttrColor(i.bg,n[1],n[3],n[4],n[5]);break;case 58:i.extended=i.extended.clone(),i.extended.underlineColor=this._updateAttrColor(i.extended.underlineColor,n[1],n[3],n[4],n[5])}return l}_processUnderline(e,t){t.extended=t.extended.clone(),(!~e||e>5)&&(e=1),t.extended.underlineStyle=e,t.fg|=268435456,e===0&&(t.fg&=-268435457),t.updateExtended()}_processSGR0(e){e.fg=at.fg,e.bg=at.bg,e.extended=e.extended.clone(),e.extended.underlineStyle=0,e.extended.underlineColor&=-67108864,e.updateExtended()}charAttributes(e){if(e.length===1&&e.params[0]===0)return this._processSGR0(this._curAttrData),!0;let t=e.length,i,n=this._curAttrData;for(let o=0;o<t;o++)i=e.params[o],i>=30&&i<=37?(n.fg&=-50331904,n.fg|=16777216|i-30):i>=40&&i<=47?(n.bg&=-50331904,n.bg|=16777216|i-40):i>=90&&i<=97?(n.fg&=-50331904,n.fg|=16777216|i-90|8):i>=100&&i<=107?(n.bg&=-50331904,n.bg|=16777216|i-100|8):i===0?this._processSGR0(n):i===1?n.fg|=134217728:i===3?n.bg|=67108864:i===4?(n.fg|=268435456,this._processUnderline(e.hasSubParams(o)?e.getSubParams(o)[0]:1,n)):i===5?n.fg|=536870912:i===7?n.fg|=67108864:i===8?n.fg|=1073741824:i===9?n.fg|=2147483648:i===2?n.bg|=134217728:i===21?this._processUnderline(2,n):i===22?(n.fg&=-134217729,n.bg&=-134217729):i===23?n.bg&=-67108865:i===24?(n.fg&=-268435457,this._processUnderline(0,n)):i===25?n.fg&=-536870913:i===27?n.fg&=-67108865:i===28?n.fg&=-1073741825:i===29?n.fg&=2147483647:i===39?(n.fg&=-67108864,n.fg|=at.fg&16777215):i===49?(n.bg&=-67108864,n.bg|=at.bg&16777215):i===38||i===48||i===58?o+=this._extractColor(e,o,n):i===53?n.bg|=1073741824:i===55?n.bg&=-1073741825:i===59?(n.extended=n.extended.clone(),n.extended.underlineColor=-1,n.updateExtended()):i===100?(n.fg&=-67108864,n.fg|=at.fg&16777215,n.bg&=-67108864,n.bg|=at.bg&16777215):this._logService.debug("Unknown SGR attribute: %d.",i);return!0}deviceStatus(e){switch(e.params[0]){case 5:this._coreService.triggerDataEvent(`${H.ESC}[0n`);break;case 6:let t=this._activeBuffer.y+1,i=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${H.ESC}[${t};${i}R`);break}return!0}deviceStatusPrivate(e){switch(e.params[0]){case 6:let t=this._activeBuffer.y+1,i=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${H.ESC}[?${t};${i}R`);break}return!0}softReset(e){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=at.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(e){let t=e.length===0?1:e.params[0];if(t===0)this._coreService.decPrivateModes.cursorStyle=void 0,this._coreService.decPrivateModes.cursorBlink=void 0;else{switch(t){case 1:case 2:this._coreService.decPrivateModes.cursorStyle="block";break;case 3:case 4:this._coreService.decPrivateModes.cursorStyle="underline";break;case 5:case 6:this._coreService.decPrivateModes.cursorStyle="bar";break}let i=t%2===1;this._coreService.decPrivateModes.cursorBlink=i}return!0}setScrollRegion(e){let t=e.params[0]||1,i;return(e.length<2||(i=e.params[1])>this._bufferService.rows||i===0)&&(i=this._bufferService.rows),i>t&&(this._activeBuffer.scrollTop=t-1,this._activeBuffer.scrollBottom=i-1,this._setCursor(0,0)),!0}windowOptions(e){if(!L_(e.params[0],this._optionsService.rawOptions.windowOptions))return!0;let t=e.length>1?e.params[1]:0;switch(e.params[0]){case 14:t!==2&&this._onRequestWindowsOptionsReport.fire(0);break;case 16:this._onRequestWindowsOptionsReport.fire(1);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${H.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:(t===0||t===2)&&(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>P_&&this._windowTitleStack.shift()),(t===0||t===1)&&(this._iconNameStack.push(this._iconName),this._iconNameStack.length>P_&&this._iconNameStack.shift());break;case 23:(t===0||t===2)&&this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),(t===0||t===1)&&this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop());break}return!0}saveCursor(e){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(e){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(e){return this._windowTitle=e,this._onTitleChange.fire(e),!0}setIconName(e){return this._iconName=e,!0}setOrReportIndexedColor(e){let t=[],i=e.split(";");for(;i.length>1;){let n=i.shift(),o=i.shift();if(/^\d+$/.exec(n)){let l=parseInt(n);if(M_(l))if(o==="?")t.push({type:0,index:l});else{let c=R_(o);c&&t.push({type:1,index:l,color:c})}}}return t.length&&this._onColor.fire(t),!0}setHyperlink(e){let t=e.indexOf(";");if(t===-1)return!0;let i=e.slice(0,t).trim(),n=e.slice(t+1);return n?this._createHyperlink(i,n):i.trim()?!1:this._finishHyperlink()}_createHyperlink(e,t){this._getCurrentLinkId()&&this._finishHyperlink();let i=e.split(":"),n,o=i.findIndex(l=>l.startsWith("id="));return o!==-1&&(n=i[o].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:n,uri:t}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(e,t){let i=e.split(";");for(let n=0;n<i.length&&!(t>=this._specialColors.length);++n,++t)if(i[n]==="?")this._onColor.fire([{type:0,index:this._specialColors[t]}]);else{let o=R_(i[n]);o&&this._onColor.fire([{type:1,index:this._specialColors[t],color:o}])}return!0}setOrReportFgColor(e){return this._setOrReportSpecialColor(e,0)}setOrReportBgColor(e){return this._setOrReportSpecialColor(e,1)}setOrReportCursorColor(e){return this._setOrReportSpecialColor(e,2)}restoreIndexedColor(e){if(!e)return this._onColor.fire([{type:2}]),!0;let t=[],i=e.split(";");for(let n=0;n<i.length;++n)if(/^\d+$/.exec(i[n])){let o=parseInt(i[n]);M_(o)&&t.push({type:2,index:o})}return t.length&&this._onColor.fire(t),!0}restoreFgColor(e){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(e){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(e){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,fs),!0}selectCharset(e){return e.length!==2?(this.selectDefaultCharset(),!0):(e[0]==="/"||this._charsetService.setgCharset($2[e[0]],pt[e[1]]||fs),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let e=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,e,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=at.clone(),this._eraseAttrDataInternal=at.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=this._curAttrData.bg&67108863,this._eraseAttrDataInternal}setgLevel(e){return this._charsetService.setgLevel(e),!0}screenAlignmentPattern(){let e=new yi;e.content=1<<22|69,e.fg=this._curAttrData.fg,e.bg=this._curAttrData.bg,this._setCursor(0,0);for(let t=0;t<this._bufferService.rows;++t){let i=this._activeBuffer.ybase+this._activeBuffer.y+t,n=this._activeBuffer.lines.get(i);n&&(n.fill(e),n.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(e,t){let i=c=>(this._coreService.triggerDataEvent(`${H.ESC}${c}${H.ESC}\\`),!0),n=this._bufferService.buffer,o=this._optionsService.rawOptions;return i(e==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:e==='"p'?'P1$r61;1"p':e==="r"?`P1$r${n.scrollTop+1};${n.scrollBottom+1}r`:e==="m"?"P1$r0m":e===" q"?`P1$r${{block:2,underline:4,bar:6}[o.cursorStyle]-(o.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(e,t){this._dirtyRowTracker.markRangeDirty(e,t)}},bd=class{constructor(e){this._bufferService=e,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(e){e<this.start?this.start=e:e>this.end&&(this.end=e)}markRangeDirty(e,t){e>t&&(D_=e,e=t,t=D_),e<this.start&&(this.start=e),t>this.end&&(this.end=t)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};bd=tt([oe(0,$t)],bd);function M_(e){return 0<=e&&e<256}var U2=5e7,T_=12,K2=50,V2=class extends Le{constructor(e){super(),this._action=e,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this._register(new ee),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(e,t){if(t!==void 0&&this._syncCalls>t){this._syncCalls=0;return}if(this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;this._isSyncWriting=!0;let i;for(;i=this._writeBuffer.shift();){this._action(i);let n=this._callbacks.shift();n&&n()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(e,t){if(this._pendingData>U2)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput){this._didUserInput=!1,this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t),this._innerWrite();return}setTimeout(()=>this._innerWrite())}this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t)}_innerWrite(e=0,t=!0){let i=e||performance.now();for(;this._writeBuffer.length>this._bufferOffset;){let n=this._writeBuffer[this._bufferOffset],o=this._action(n,t);if(o){let c=u=>performance.now()-i>=T_?setTimeout(()=>this._innerWrite(0,u)):this._innerWrite(i,u);o.catch(u=>(queueMicrotask(()=>{throw u}),Promise.resolve(!1))).then(c);return}let l=this._callbacks[this._bufferOffset];if(l&&l(),this._bufferOffset++,this._pendingData-=n.length,performance.now()-i>=T_)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>K2&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}},kd=class{constructor(e){this._bufferService=e,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(e){let t=this._bufferService.buffer;if(e.id===void 0){let u=t.addMarker(t.ybase+t.y),p={data:e,id:this._nextId++,lines:[u]};return u.onDispose(()=>this._removeMarkerFromLink(p,u)),this._dataByLinkId.set(p.id,p),p.id}let i=e,n=this._getEntryIdKey(i),o=this._entriesWithId.get(n);if(o)return this.addLineToLink(o.id,t.ybase+t.y),o.id;let l=t.addMarker(t.ybase+t.y),c={id:this._nextId++,key:this._getEntryIdKey(i),data:i,lines:[l]};return l.onDispose(()=>this._removeMarkerFromLink(c,l)),this._entriesWithId.set(c.key,c),this._dataByLinkId.set(c.id,c),c.id}addLineToLink(e,t){let i=this._dataByLinkId.get(e);if(i&&i.lines.every(n=>n.line!==t)){let n=this._bufferService.buffer.addMarker(t);i.lines.push(n),n.onDispose(()=>this._removeMarkerFromLink(i,n))}}getLinkData(e){var t;return(t=this._dataByLinkId.get(e))==null?void 0:t.data}_getEntryIdKey(e){return`${e.id};;${e.uri}`}_removeMarkerFromLink(e,t){let i=e.lines.indexOf(t);i!==-1&&(e.lines.splice(i,1),e.lines.length===0&&(e.data.id!==void 0&&this._entriesWithId.delete(e.key),this._dataByLinkId.delete(e.id)))}};kd=tt([oe(0,$t)],kd);var O_=!1,q2=class extends Le{constructor(e){super(),this._windowsWrappingHeuristics=this._register(new Pn),this._onBinary=this._register(new ee),this.onBinary=this._onBinary.event,this._onData=this._register(new ee),this.onData=this._onData.event,this._onLineFeed=this._register(new ee),this.onLineFeed=this._onLineFeed.event,this._onResize=this._register(new ee),this.onResize=this._onResize.event,this._onWriteParsed=this._register(new ee),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this._register(new ee),this._instantiationService=new _2,this.optionsService=this._register(new R2(e)),this._instantiationService.setService(Wt,this.optionsService),this._bufferService=this._register(this._instantiationService.createInstance(Sd)),this._instantiationService.setService($t,this._bufferService),this._logService=this._register(this._instantiationService.createInstance(yd)),this._instantiationService.setService(i0,this._logService),this.coreService=this._register(this._instantiationService.createInstance(wd)),this._instantiationService.setService(Os,this.coreService),this.coreMouseService=this._register(this._instantiationService.createInstance(xd)),this._instantiationService.setService(t0,this.coreMouseService),this.unicodeService=this._register(this._instantiationService.createInstance(ms)),this._instantiationService.setService(fb,this.unicodeService),this._charsetService=this._instantiationService.createInstance(M2),this._instantiationService.setService(db,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(kd),this._instantiationService.setService(r0,this._oscLinkService),this._inputHandler=this._register(new W2(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this._register(Pt.forward(this._inputHandler.onLineFeed,this._onLineFeed)),this._register(this._inputHandler),this._register(Pt.forward(this._bufferService.onResize,this._onResize)),this._register(Pt.forward(this.coreService.onData,this._onData)),this._register(Pt.forward(this.coreService.onBinary,this._onBinary)),this._register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom(!0))),this._register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this._register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this._register(this._bufferService.onScroll(()=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this._register(new V2((t,i)=>this._inputHandler.parse(t,i))),this._register(Pt.forward(this._writeBuffer.onWriteParsed,this._onWriteParsed))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this._register(new ee),this._onScroll.event(e=>{var t;(t=this._onScrollApi)==null||t.fire(e.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(e){for(let t in e)this.optionsService.options[t]=e[t]}write(e,t){this._writeBuffer.write(e,t)}writeSync(e,t){this._logService.logLevel<=3&&!O_&&(this._logService.warn("writeSync is unreliable and will be removed soon."),O_=!0),this._writeBuffer.writeSync(e,t)}input(e,t=!0){this.coreService.triggerDataEvent(e,t)}resize(e,t){isNaN(e)||isNaN(t)||(e=Math.max(e,B0),t=Math.max(t,I0),this._bufferService.resize(e,t))}scroll(e,t=!1){this._bufferService.scroll(e,t)}scrollLines(e,t){this._bufferService.scrollLines(e,t)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(e){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){let t=e-this._bufferService.buffer.ydisp;t!==0&&this.scrollLines(t)}registerEscHandler(e,t){return this._inputHandler.registerEscHandler(e,t)}registerDcsHandler(e,t){return this._inputHandler.registerDcsHandler(e,t)}registerCsiHandler(e,t){return this._inputHandler.registerCsiHandler(e,t)}registerOscHandler(e,t){return this._inputHandler.registerOscHandler(e,t)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let e=!1,t=this.optionsService.rawOptions.windowsPty;t&&t.buildNumber!==void 0&&t.buildNumber!==void 0?e=t.backend==="conpty"&&t.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(e=!0),e?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let e=[];e.push(this.onLineFeed(k_.bind(null,this._bufferService))),e.push(this.registerCsiHandler({final:"H"},()=>(k_(this._bufferService),!1))),this._windowsWrappingHeuristics.value=Ke(()=>{for(let t of e)t.dispose()})}}},Q2={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};function Y2(e,t,i,n){var c;let o={type:0,cancel:!1,key:void 0},l=(e.shiftKey?1:0)|(e.altKey?2:0)|(e.ctrlKey?4:0)|(e.metaKey?8:0);switch(e.keyCode){case 0:e.key==="UIKeyInputUpArrow"?t?o.key=H.ESC+"OA":o.key=H.ESC+"[A":e.key==="UIKeyInputLeftArrow"?t?o.key=H.ESC+"OD":o.key=H.ESC+"[D":e.key==="UIKeyInputRightArrow"?t?o.key=H.ESC+"OC":o.key=H.ESC+"[C":e.key==="UIKeyInputDownArrow"&&(t?o.key=H.ESC+"OB":o.key=H.ESC+"[B");break;case 8:o.key=e.ctrlKey?"\b":H.DEL,e.altKey&&(o.key=H.ESC+o.key);break;case 9:if(e.shiftKey){o.key=H.ESC+"[Z";break}o.key=H.HT,o.cancel=!0;break;case 13:o.key=e.altKey?H.ESC+H.CR:H.CR,o.cancel=!0;break;case 27:o.key=H.ESC,e.altKey&&(o.key=H.ESC+H.ESC),o.cancel=!0;break;case 37:if(e.metaKey)break;l?o.key=H.ESC+"[1;"+(l+1)+"D":t?o.key=H.ESC+"OD":o.key=H.ESC+"[D";break;case 39:if(e.metaKey)break;l?o.key=H.ESC+"[1;"+(l+1)+"C":t?o.key=H.ESC+"OC":o.key=H.ESC+"[C";break;case 38:if(e.metaKey)break;l?o.key=H.ESC+"[1;"+(l+1)+"A":t?o.key=H.ESC+"OA":o.key=H.ESC+"[A";break;case 40:if(e.metaKey)break;l?o.key=H.ESC+"[1;"+(l+1)+"B":t?o.key=H.ESC+"OB":o.key=H.ESC+"[B";break;case 45:!e.shiftKey&&!e.ctrlKey&&(o.key=H.ESC+"[2~");break;case 46:l?o.key=H.ESC+"[3;"+(l+1)+"~":o.key=H.ESC+"[3~";break;case 36:l?o.key=H.ESC+"[1;"+(l+1)+"H":t?o.key=H.ESC+"OH":o.key=H.ESC+"[H";break;case 35:l?o.key=H.ESC+"[1;"+(l+1)+"F":t?o.key=H.ESC+"OF":o.key=H.ESC+"[F";break;case 33:e.shiftKey?o.type=2:e.ctrlKey?o.key=H.ESC+"[5;"+(l+1)+"~":o.key=H.ESC+"[5~";break;case 34:e.shiftKey?o.type=3:e.ctrlKey?o.key=H.ESC+"[6;"+(l+1)+"~":o.key=H.ESC+"[6~";break;case 112:l?o.key=H.ESC+"[1;"+(l+1)+"P":o.key=H.ESC+"OP";break;case 113:l?o.key=H.ESC+"[1;"+(l+1)+"Q":o.key=H.ESC+"OQ";break;case 114:l?o.key=H.ESC+"[1;"+(l+1)+"R":o.key=H.ESC+"OR";break;case 115:l?o.key=H.ESC+"[1;"+(l+1)+"S":o.key=H.ESC+"OS";break;case 116:l?o.key=H.ESC+"[15;"+(l+1)+"~":o.key=H.ESC+"[15~";break;case 117:l?o.key=H.ESC+"[17;"+(l+1)+"~":o.key=H.ESC+"[17~";break;case 118:l?o.key=H.ESC+"[18;"+(l+1)+"~":o.key=H.ESC+"[18~";break;case 119:l?o.key=H.ESC+"[19;"+(l+1)+"~":o.key=H.ESC+"[19~";break;case 120:l?o.key=H.ESC+"[20;"+(l+1)+"~":o.key=H.ESC+"[20~";break;case 121:l?o.key=H.ESC+"[21;"+(l+1)+"~":o.key=H.ESC+"[21~";break;case 122:l?o.key=H.ESC+"[23;"+(l+1)+"~":o.key=H.ESC+"[23~";break;case 123:l?o.key=H.ESC+"[24;"+(l+1)+"~":o.key=H.ESC+"[24~";break;default:if(e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey)e.keyCode>=65&&e.keyCode<=90?o.key=String.fromCharCode(e.keyCode-64):e.keyCode===32?o.key=H.NUL:e.keyCode>=51&&e.keyCode<=55?o.key=String.fromCharCode(e.keyCode-51+27):e.keyCode===56?o.key=H.DEL:e.keyCode===219?o.key=H.ESC:e.keyCode===220?o.key=H.FS:e.keyCode===221&&(o.key=H.GS);else if((!i||n)&&e.altKey&&!e.metaKey){let u=(c=Q2[e.keyCode])==null?void 0:c[e.shiftKey?1:0];if(u)o.key=H.ESC+u;else if(e.keyCode>=65&&e.keyCode<=90){let p=e.ctrlKey?e.keyCode-64:e.keyCode+32,d=String.fromCharCode(p);e.shiftKey&&(d=d.toUpperCase()),o.key=H.ESC+d}else if(e.keyCode===32)o.key=H.ESC+(e.ctrlKey?H.NUL:" ");else if(e.key==="Dead"&&e.code.startsWith("Key")){let p=e.code.slice(3,4);e.shiftKey||(p=p.toLowerCase()),o.key=H.ESC+p,o.cancel=!0}}else i&&!e.altKey&&!e.ctrlKey&&!e.shiftKey&&e.metaKey?e.keyCode===65&&(o.type=1):e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.keyCode>=48&&e.key.length===1?o.key=e.key:e.key&&e.ctrlKey&&(e.key==="_"&&(o.key=H.US),e.key==="@"&&(o.key=H.NUL));break}return o}var st=0,G2=class{constructor(e){this._getKey=e,this._array=[],this._insertedValues=[],this._flushInsertedTask=new Ul,this._isFlushingInserted=!1,this._deletedIndices=[],this._flushDeletedTask=new Ul,this._isFlushingDeleted=!1}clear(){this._array.length=0,this._insertedValues.length=0,this._flushInsertedTask.clear(),this._isFlushingInserted=!1,this._deletedIndices.length=0,this._flushDeletedTask.clear(),this._isFlushingDeleted=!1}insert(e){this._flushCleanupDeleted(),this._insertedValues.length===0&&this._flushInsertedTask.enqueue(()=>this._flushInserted()),this._insertedValues.push(e)}_flushInserted(){let e=this._insertedValues.sort((o,l)=>this._getKey(o)-this._getKey(l)),t=0,i=0,n=new Array(this._array.length+this._insertedValues.length);for(let o=0;o<n.length;o++)i>=this._array.length||this._getKey(e[t])<=this._getKey(this._array[i])?(n[o]=e[t],t++):n[o]=this._array[i++];this._array=n,this._insertedValues.length=0}_flushCleanupInserted(){!this._isFlushingInserted&&this._insertedValues.length>0&&this._flushInsertedTask.flush()}delete(e){if(this._flushCleanupInserted(),this._array.length===0)return!1;let t=this._getKey(e);if(t===void 0||(st=this._search(t),st===-1)||this._getKey(this._array[st])!==t)return!1;do if(this._array[st]===e)return this._deletedIndices.length===0&&this._flushDeletedTask.enqueue(()=>this._flushDeleted()),this._deletedIndices.push(st),!0;while(++st<this._array.length&&this._getKey(this._array[st])===t);return!1}_flushDeleted(){this._isFlushingDeleted=!0;let e=this._deletedIndices.sort((o,l)=>o-l),t=0,i=new Array(this._array.length-e.length),n=0;for(let o=0;o<this._array.length;o++)e[t]===o?t++:i[n++]=this._array[o];this._array=i,this._deletedIndices.length=0,this._isFlushingDeleted=!1}_flushCleanupDeleted(){!this._isFlushingDeleted&&this._deletedIndices.length>0&&this._flushDeletedTask.flush()}*getKeyIterator(e){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(st=this._search(e),!(st<0||st>=this._array.length)&&this._getKey(this._array[st])===e))do yield this._array[st];while(++st<this._array.length&&this._getKey(this._array[st])===e)}forEachByKey(e,t){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(st=this._search(e),!(st<0||st>=this._array.length)&&this._getKey(this._array[st])===e))do t(this._array[st]);while(++st<this._array.length&&this._getKey(this._array[st])===e)}values(){return this._flushCleanupInserted(),this._flushCleanupDeleted(),[...this._array].values()}_search(e){let t=0,i=this._array.length-1;for(;i>=t;){let n=t+i>>1,o=this._getKey(this._array[n]);if(o>e)i=n-1;else if(o<e)t=n+1;else{for(;n>0&&this._getKey(this._array[n-1])===e;)n--;return n}}return t}},Cu=0,B_=0,X2=class extends Le{constructor(){super(),this._decorations=new G2(e=>e==null?void 0:e.marker.line),this._onDecorationRegistered=this._register(new ee),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this._register(new ee),this.onDecorationRemoved=this._onDecorationRemoved.event,this._register(Ke(()=>this.reset()))}get decorations(){return this._decorations.values()}registerDecoration(e){if(e.marker.isDisposed)return;let t=new J2(e);if(t){let i=t.marker.onDispose(()=>t.dispose()),n=t.onDispose(()=>{n.dispose(),t&&(this._decorations.delete(t)&&this._onDecorationRemoved.fire(t),i.dispose())});this._decorations.insert(t),this._onDecorationRegistered.fire(t)}return t}reset(){for(let e of this._decorations.values())e.dispose();this._decorations.clear()}*getDecorationsAtCell(e,t,i){let n=0,o=0;for(let l of this._decorations.getKeyIterator(t))n=l.options.x??0,o=n+(l.options.width??1),e>=n&&e<o&&(!i||(l.options.layer??"bottom")===i)&&(yield l)}forEachDecorationAtCell(e,t,i,n){this._decorations.forEachByKey(t,o=>{Cu=o.options.x??0,B_=Cu+(o.options.width??1),e>=Cu&&e<B_&&(!i||(o.options.layer??"bottom")===i)&&n(o)})}},J2=class extends Gr{constructor(e){super(),this.options=e,this.onRenderEmitter=this.add(new ee),this.onRender=this.onRenderEmitter.event,this._onDispose=this.add(new ee),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=e.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=Ge.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=Ge.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}},Z2=1e3,eE=class{constructor(e,t=Z2){this._renderCallback=e,this._debounceThresholdMS=t,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(e,t,i){this._rowCount=i,e=e!==void 0?e:0,t=t!==void 0?t:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,e):e,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,t):t;let n=performance.now();if(n-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=n,this._innerRefresh();else if(!this._additionalRefreshRequested){let o=n-this._lastRefreshMs,l=this._debounceThresholdMS-o;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=performance.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},l)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t)}},I_=20,Kl=class extends Le{constructor(e,t,i,n){super(),this._terminal=e,this._coreBrowserService=i,this._renderService=n,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="";let o=this._coreBrowserService.mainDocument;this._accessibilityContainer=o.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=o.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let l=0;l<this._terminal.rows;l++)this._rowElements[l]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[l]);if(this._topBoundaryFocusListener=l=>this._handleBoundaryFocus(l,0),this._bottomBoundaryFocusListener=l=>this._handleBoundaryFocus(l,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=o.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this._register(new eE(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this._register(this._terminal.onResize(l=>this._handleResize(l.rows))),this._register(this._terminal.onRender(l=>this._refreshRows(l.start,l.end))),this._register(this._terminal.onScroll(()=>this._refreshRows())),this._register(this._terminal.onA11yChar(l=>this._handleChar(l))),this._register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this._register(this._terminal.onA11yTab(l=>this._handleTab(l))),this._register(this._terminal.onKey(l=>this._handleKey(l.key))),this._register(this._terminal.onBlur(()=>this._clearLiveRegion())),this._register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._register(be(o,"selectionchange",()=>this._handleSelectionChange())),this._register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRowsDimensions(),this._refreshRows(),this._register(Ke(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(e){for(let t=0;t<e;t++)this._handleChar(" ")}_handleChar(e){this._liveRegionLineCount<I_+1&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,e===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===I_+1&&(this._liveRegion.textContent+=Ku.get())))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(e){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(e)||this._charsToConsume.push(e)}_refreshRows(e,t){this._liveRegionDebouncer.refresh(e,t,this._terminal.rows)}_renderRows(e,t){let i=this._terminal.buffer,n=i.lines.length.toString();for(let o=e;o<=t;o++){let l=i.lines.get(i.ydisp+o),c=[],u=(l==null?void 0:l.translateToString(!0,void 0,void 0,c))||"",p=(i.ydisp+o+1).toString(),d=this._rowElements[o];d&&(u.length===0?(d.textContent="",this._rowColumns.set(d,[0,1])):(d.textContent=u,this._rowColumns.set(d,c)),d.setAttribute("aria-posinset",p),d.setAttribute("aria-setsize",n),this._alignRowWidth(d))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(e,t){let i=e.target,n=this._rowElements[t===0?1:this._rowElements.length-2],o=i.getAttribute("aria-posinset"),l=t===0?"1":`${this._terminal.buffer.lines.length}`;if(o===l||e.relatedTarget!==n)return;let c,u;if(t===0?(c=i,u=this._rowElements.pop(),this._rowContainer.removeChild(u)):(c=this._rowElements.shift(),u=i,this._rowContainer.removeChild(c)),c.removeEventListener("focus",this._topBoundaryFocusListener),u.removeEventListener("focus",this._bottomBoundaryFocusListener),t===0){let p=this._createAccessibilityTreeNode();this._rowElements.unshift(p),this._rowContainer.insertAdjacentElement("afterbegin",p)}else{let p=this._createAccessibilityTreeNode();this._rowElements.push(p),this._rowContainer.appendChild(p)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(t===0?-1:1),this._rowElements[t===0?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}_handleSelectionChange(){var u;if(this._rowElements.length===0)return;let e=this._coreBrowserService.mainDocument.getSelection();if(!e)return;if(e.isCollapsed){this._rowContainer.contains(e.anchorNode)&&this._terminal.clearSelection();return}if(!e.anchorNode||!e.focusNode){console.error("anchorNode and/or focusNode are null");return}let t={node:e.anchorNode,offset:e.anchorOffset},i={node:e.focusNode,offset:e.focusOffset};if((t.node.compareDocumentPosition(i.node)&Node.DOCUMENT_POSITION_PRECEDING||t.node===i.node&&t.offset>i.offset)&&([t,i]=[i,t]),t.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(t={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(t.node))return;let n=this._rowElements.slice(-1)[0];if(i.node.compareDocumentPosition(n)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(i={node:n,offset:((u=n.textContent)==null?void 0:u.length)??0}),!this._rowContainer.contains(i.node))return;let o=({node:p,offset:d})=>{let _=p instanceof Text?p.parentNode:p,g=parseInt(_==null?void 0:_.getAttribute("aria-posinset"),10)-1;if(isNaN(g))return console.warn("row is invalid. Race condition?"),null;let S=this._rowColumns.get(_);if(!S)return console.warn("columns is null. Race condition?"),null;let w=d<S.length?S[d]:S.slice(-1)[0]+1;return w>=this._terminal.cols&&(++g,w=0),{row:g,column:w}},l=o(t),c=o(i);if(!(!l||!c)){if(l.row>c.row||l.row===c.row&&l.column>=c.column)throw new Error("invalid range");this._terminal.select(l.column,l.row,(c.row-l.row)*this._terminal.cols-l.column+c.column)}}_handleResize(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let t=this._rowContainer.children.length;t<this._terminal.rows;t++)this._rowElements[t]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[t]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let e=this._coreBrowserService.mainDocument.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){Object.assign(this._accessibilityContainer.style,{width:`${this._renderService.dimensions.css.canvas.width}px`,fontSize:`${this._terminal.options.fontSize}px`}),this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e]),this._alignRowWidth(this._rowElements[e])}}_refreshRowDimensions(e){e.style.height=`${this._renderService.dimensions.css.cell.height}px`}_alignRowWidth(e){var o,l;e.style.transform="";let t=e.getBoundingClientRect().width,i=(l=(o=this._rowColumns.get(e))==null?void 0:o.slice(-1))==null?void 0:l[0];if(!i)return;let n=i*this._renderService.dimensions.css.cell.width;e.style.transform=`scaleX(${n/t})`}};Kl=tt([oe(1,Kd),oe(2,fr),oe(3,pr)],Kl);var Ed=class extends Le{constructor(e,t,i,n,o){super(),this._element=e,this._mouseService=t,this._renderService=i,this._bufferService=n,this._linkProviderService=o,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this._register(new ee),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this._register(new ee),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this._register(Ke(()=>{var l;Ns(this._linkCacheDisposables),this._linkCacheDisposables.length=0,this._lastMouseEvent=void 0,(l=this._activeProviderReplies)==null||l.clear()})),this._register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this._register(be(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this._register(be(this._element,"mousemove",this._handleMouseMove.bind(this))),this._register(be(this._element,"mousedown",this._handleMouseDown.bind(this))),this._register(be(this._element,"mouseup",this._handleMouseUp.bind(this)))}get currentLink(){return this._currentLink}_handleMouseMove(e){this._lastMouseEvent=e;let t=this._positionFromMouseEvent(e,this._element,this._mouseService);if(!t)return;this._isMouseOut=!1;let i=e.composedPath();for(let n=0;n<i.length;n++){let o=i[n];if(o.classList.contains("xterm"))break;if(o.classList.contains("xterm-hover"))return}(!this._lastBufferCell||t.x!==this._lastBufferCell.x||t.y!==this._lastBufferCell.y)&&(this._handleHover(t),this._lastBufferCell=t)}_handleHover(e){if(this._activeLine!==e.y||this._wasResized){this._clearCurrentLink(),this._askForLink(e,!1),this._wasResized=!1;return}this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))}_askForLink(e,t){var n,o;(!this._activeProviderReplies||!t)&&((n=this._activeProviderReplies)==null||n.forEach(l=>{l==null||l.forEach(c=>{c.link.dispose&&c.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);let i=!1;for(let[l,c]of this._linkProviderService.linkProviders.entries())t?(o=this._activeProviderReplies)!=null&&o.get(l)&&(i=this._checkLinkProviderResult(l,e,i)):c.provideLinks(e.y,u=>{var d,_;if(this._isMouseOut)return;let p=u==null?void 0:u.map(g=>({link:g}));(d=this._activeProviderReplies)==null||d.set(l,p),i=this._checkLinkProviderResult(l,e,i),((_=this._activeProviderReplies)==null?void 0:_.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(e.y,this._activeProviderReplies)})}_removeIntersectingLinks(e,t){let i=new Set;for(let n=0;n<t.size;n++){let o=t.get(n);if(o)for(let l=0;l<o.length;l++){let c=o[l],u=c.link.range.start.y<e?0:c.link.range.start.x,p=c.link.range.end.y>e?this._bufferService.cols:c.link.range.end.x;for(let d=u;d<=p;d++){if(i.has(d)){o.splice(l--,1);break}i.add(d)}}}}_checkLinkProviderResult(e,t,i){var l;if(!this._activeProviderReplies)return i;let n=this._activeProviderReplies.get(e),o=!1;for(let c=0;c<e;c++)(!this._activeProviderReplies.has(c)||this._activeProviderReplies.get(c))&&(o=!0);if(!o&&n){let c=n.find(u=>this._linkAtPosition(u.link,t));c&&(i=!0,this._handleNewLink(c))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!i)for(let c=0;c<this._activeProviderReplies.size;c++){let u=(l=this._activeProviderReplies.get(c))==null?void 0:l.find(p=>this._linkAtPosition(p.link,t));if(u){i=!0,this._handleNewLink(u);break}}return i}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(e){if(!this._currentLink)return;let t=this._positionFromMouseEvent(e,this._element,this._mouseService);t&&this._mouseDownLink&&tE(this._mouseDownLink.link,this._currentLink.link)&&this._linkAtPosition(this._currentLink.link,t)&&this._currentLink.link.activate(e,this._currentLink.link.text)}_clearCurrentLink(e,t){!this._currentLink||!this._lastMouseEvent||(!e||!t||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=t)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,Ns(this._linkCacheDisposables),this._linkCacheDisposables.length=0)}_handleNewLink(e){if(!this._lastMouseEvent)return;let t=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);t&&this._linkAtPosition(e.link,t)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0?!0:e.link.decorations.underline,pointerCursor:e.link.decorations===void 0?!0:e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:()=>{var i,n;return(n=(i=this._currentLink)==null?void 0:i.state)==null?void 0:n.decorations.pointerCursor},set:i=>{var n;(n=this._currentLink)!=null&&n.state&&this._currentLink.state.decorations.pointerCursor!==i&&(this._currentLink.state.decorations.pointerCursor=i,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",i))}},underline:{get:()=>{var i,n;return(n=(i=this._currentLink)==null?void 0:i.state)==null?void 0:n.decorations.underline},set:i=>{var n,o,l;(n=this._currentLink)!=null&&n.state&&((l=(o=this._currentLink)==null?void 0:o.state)==null?void 0:l.decorations.underline)!==i&&(this._currentLink.state.decorations.underline=i,this._currentLink.state.isHovered&&this._fireUnderlineEvent(e.link,i))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(i=>{if(!this._currentLink)return;let n=i.start===0?0:i.start+1+this._bufferService.buffer.ydisp,o=this._bufferService.buffer.ydisp+1+i.end;if(this._currentLink.link.range.start.y>=n&&this._currentLink.link.range.end.y<=o&&(this._clearCurrentLink(n,o),this._lastMouseEvent)){let l=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);l&&this._askForLink(l,!1)}})))}_linkHover(e,t,i){var n;(n=this._currentLink)!=null&&n.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),t.hover&&t.hover(i,t.text)}_fireUnderlineEvent(e,t){let i=e.range,n=this._bufferService.buffer.ydisp,o=this._createLinkUnderlineEvent(i.start.x-1,i.start.y-n-1,i.end.x,i.end.y-n-1,void 0);(t?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(o)}_linkLeave(e,t,i){var n;(n=this._currentLink)!=null&&n.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),t.leave&&t.leave(i,t.text)}_linkAtPosition(e,t){let i=e.range.start.y*this._bufferService.cols+e.range.start.x,n=e.range.end.y*this._bufferService.cols+e.range.end.x,o=t.y*this._bufferService.cols+t.x;return i<=o&&o<=n}_positionFromMouseEvent(e,t,i){let n=i.getCoords(e,t,this._bufferService.cols,this._bufferService.rows);if(n)return{x:n[0],y:n[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(e,t,i,n,o){return{x1:e,y1:t,x2:i,y2:n,cols:this._bufferService.cols,fg:o}}};Ed=tt([oe(1,Vd),oe(2,pr),oe(3,$t),oe(4,n0)],Ed);function tE(e,t){return e.text===t.text&&e.range.start.x===t.range.start.x&&e.range.start.y===t.range.start.y&&e.range.end.x===t.range.end.x&&e.range.end.y===t.range.end.y}var iE=class extends q2{constructor(e={}){super(e),this._linkifier=this._register(new Pn),this.browser=b0,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this._register(new Pn),this._onCursorMove=this._register(new ee),this.onCursorMove=this._onCursorMove.event,this._onKey=this._register(new ee),this.onKey=this._onKey.event,this._onRender=this._register(new ee),this.onRender=this._onRender.event,this._onSelectionChange=this._register(new ee),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this._register(new ee),this.onTitleChange=this._onTitleChange.event,this._onBell=this._register(new ee),this.onBell=this._onBell.event,this._onFocus=this._register(new ee),this._onBlur=this._register(new ee),this._onA11yCharEmitter=this._register(new ee),this._onA11yTabEmitter=this._register(new ee),this._onWillOpen=this._register(new ee),this._setup(),this._decorationService=this._instantiationService.createInstance(X2),this._instantiationService.setService(ea,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(Kk),this._instantiationService.setService(n0,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(qu)),this._register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this._register(this._inputHandler.onRequestRefreshRows(t=>this.refresh((t==null?void 0:t.start)??0,(t==null?void 0:t.end)??this.rows-1))),this._register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this._register(this._inputHandler.onRequestReset(()=>this.reset())),this._register(this._inputHandler.onRequestWindowsOptionsReport(t=>this._reportWindowsOptions(t))),this._register(this._inputHandler.onColor(t=>this._handleColorEvent(t))),this._register(Pt.forward(this._inputHandler.onCursorMove,this._onCursorMove)),this._register(Pt.forward(this._inputHandler.onTitleChange,this._onTitleChange)),this._register(Pt.forward(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this._register(Pt.forward(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this._register(this._bufferService.onResize(t=>this._afterResize(t.cols,t.rows))),this._register(Ke(()=>{var t,i;this._customKeyEventHandler=void 0,(i=(t=this.element)==null?void 0:t.parentNode)==null||i.removeChild(this.element)}))}get linkifier(){return this._linkifier.value}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(e){if(this._themeService)for(let t of e){let i,n="";switch(t.index){case 256:i="foreground",n="10";break;case 257:i="background",n="11";break;case 258:i="cursor",n="12";break;default:i="ansi",n="4;"+t.index}switch(t.type){case 0:let o=$e.toColorRGB(i==="ansi"?this._themeService.colors.ansi[t.index]:this._themeService.colors[i]);this.coreService.triggerDataEvent(`${H.ESC}]${n};${H2(o)}${x0.ST}`);break;case 1:if(i==="ansi")this._themeService.modifyColors(l=>l.ansi[t.index]=lt.toColor(...t.color));else{let l=i;this._themeService.modifyColors(c=>c[l]=lt.toColor(...t.color))}break;case 2:this._themeService.restoreColor(t.index);break}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(e){e?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(Kl,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(e){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(H.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var e;return(e=this.textarea)==null?void 0:e.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(H.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let e=this.buffer.ybase+this.buffer.y,t=this.buffer.lines.get(e);if(!t)return;let i=Math.min(this.buffer.x,this.cols-1),n=this._renderService.dimensions.css.cell.height,o=t.getWidth(i),l=this._renderService.dimensions.css.cell.width*o,c=this.buffer.y*this._renderService.dimensions.css.cell.height,u=i*this._renderService.dimensions.css.cell.width;this.textarea.style.left=u+"px",this.textarea.style.top=c+"px",this.textarea.style.width=l+"px",this.textarea.style.height=n+"px",this.textarea.style.lineHeight=n+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this._register(be(this.element,"copy",t=>{this.hasSelection()&&ob(t,this._selectionService)}));let e=t=>ab(t,this.textarea,this.coreService,this.optionsService);this._register(be(this.textarea,"paste",e)),this._register(be(this.element,"paste",e)),k0?this._register(be(this.element,"mousedown",t=>{t.button===2&&Vg(t,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this._register(be(this.element,"contextmenu",t=>{Vg(t,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),ef&&this._register(be(this.element,"auxclick",t=>{t.button===1&&Gv(t,this.textarea,this.screenElement)}))}_bindKeys(){this._register(be(this.textarea,"keyup",e=>this._keyUp(e),!0)),this._register(be(this.textarea,"keydown",e=>this._keyDown(e),!0)),this._register(be(this.textarea,"keypress",e=>this._keyPress(e),!0)),this._register(be(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this._register(be(this.textarea,"compositionupdate",e=>this._compositionHelper.compositionupdate(e))),this._register(be(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this._register(be(this.textarea,"input",e=>this._inputEvent(e),!0)),this._register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(e){var o;if(!e)throw new Error("Terminal requires a parent element.");if(e.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((o=this.element)==null?void 0:o.ownerDocument.defaultView)&&this._coreBrowserService){this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView);return}this._document=e.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),e.appendChild(this.element);let t=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),t.appendChild(this._viewportElement),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._register(be(this.screenElement,"mousemove",l=>this.updateCursorStyle(l))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),t.appendChild(this.screenElement);let i=this.textarea=this._document.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",Uu.get()),P0||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._register(this.optionsService.onSpecificOptionChange("disableStdin",()=>i.readOnly=this.optionsService.rawOptions.disableStdin)),this.textarea.readOnly=this.optionsService.rawOptions.disableStdin,this._coreBrowserService=this._register(this._instantiationService.createInstance(Wk,this.textarea,e.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(fr,this._coreBrowserService),this._register(be(this.textarea,"focus",l=>this._handleTextAreaFocus(l))),this._register(be(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(pd,this._document,this._helperContainer),this._instantiationService.setService(Zl,this._charSizeService),this._themeService=this._instantiationService.createInstance(vd),this._instantiationService.setService(Tn,this._themeService),this._characterJoinerService=this._instantiationService.createInstance($l),this._instantiationService.setService(s0,this._characterJoinerService),this._renderService=this._register(this._instantiationService.createInstance(gd,this.rows,this.screenElement)),this._instantiationService.setService(pr,this._renderService),this._register(this._renderService.onRenderedViewportChange(l=>this._onRender.fire(l))),this.onResize(l=>this._renderService.resize(l.cols,l.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(ud,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(md),this._instantiationService.setService(Vd,this._mouseService);let n=this._linkifier.value=this._register(this._instantiationService.createInstance(Ed,this.screenElement));this.element.appendChild(t);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this._register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this._register(this.onBlur(()=>this._renderService.handleBlur())),this._register(this.onFocus(()=>this._renderService.handleFocus())),this._viewport=this._register(this._instantiationService.createInstance(cd,this.element,this.screenElement)),this._register(this._viewport.onRequestScrollLines(l=>{super.scrollLines(l,!1),this.refresh(0,this.rows-1)})),this._selectionService=this._register(this._instantiationService.createInstance(_d,this.element,this.screenElement,n)),this._instantiationService.setService(mb,this._selectionService),this._register(this._selectionService.onRequestScrollLines(l=>this.scrollLines(l.amount,l.suppressScrollEvent))),this._register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this._register(this._selectionService.onRequestRedraw(l=>this._renderService.handleSelectionChanged(l.start,l.end,l.columnSelectMode))),this._register(this._selectionService.onLinuxMouseSelection(l=>{this.textarea.value=l,this.textarea.focus(),this.textarea.select()})),this._register(Pt.any(this._onScroll.event,this._inputHandler.onScroll)(()=>{var l;this._selectionService.refresh(),(l=this._viewport)==null||l.queueSync()})),this._register(this._instantiationService.createInstance(hd,this.screenElement)),this._register(be(this.element,"mousedown",l=>this._selectionService.handleMouseDown(l))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(Kl,this)),this._register(this.optionsService.onSpecificOptionChange("screenReaderMode",l=>this._handleScreenReaderModeOptionChange(l))),this.options.overviewRuler.width&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(Hl,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRuler",l=>{!this._overviewRulerRenderer&&l&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(Hl,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(fd,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let e=this,t=this.element;function i(l){var d,_,g,S,w;let c=e._mouseService.getMouseReportCoords(l,e.screenElement);if(!c)return!1;let u,p;switch(l.overrideType||l.type){case"mousemove":p=32,l.buttons===void 0?(u=3,l.button!==void 0&&(u=l.button<3?l.button:3)):u=l.buttons&1?0:l.buttons&4?1:l.buttons&2?2:3;break;case"mouseup":p=0,u=l.button<3?l.button:3;break;case"mousedown":p=1,u=l.button<3?l.button:3;break;case"wheel":if(e._customWheelEventHandler&&e._customWheelEventHandler(l)===!1)return!1;let x=l.deltaY;if(x===0||e.coreMouseService.consumeWheelEvent(l,(S=(g=(_=(d=e._renderService)==null?void 0:d.dimensions)==null?void 0:_.device)==null?void 0:g.cell)==null?void 0:S.height,(w=e._coreBrowserService)==null?void 0:w.dpr)===0)return!1;p=x<0?0:1,u=4;break;default:return!1}return p===void 0||u===void 0||u>4?!1:e.coreMouseService.triggerMouseEvent({col:c.col,row:c.row,x:c.x,y:c.y,button:u,action:p,ctrl:l.ctrlKey,alt:l.altKey,shift:l.shiftKey})}let n={mouseup:null,wheel:null,mousedrag:null,mousemove:null},o={mouseup:l=>(i(l),l.buttons||(this._document.removeEventListener("mouseup",n.mouseup),n.mousedrag&&this._document.removeEventListener("mousemove",n.mousedrag)),this.cancel(l)),wheel:l=>(i(l),this.cancel(l,!0)),mousedrag:l=>{l.buttons&&i(l)},mousemove:l=>{l.buttons||i(l)}};this._register(this.coreMouseService.onProtocolChange(l=>{l?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(l)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),l&8?n.mousemove||(t.addEventListener("mousemove",o.mousemove),n.mousemove=o.mousemove):(t.removeEventListener("mousemove",n.mousemove),n.mousemove=null),l&16?n.wheel||(t.addEventListener("wheel",o.wheel,{passive:!1}),n.wheel=o.wheel):(t.removeEventListener("wheel",n.wheel),n.wheel=null),l&2?n.mouseup||(n.mouseup=o.mouseup):(this._document.removeEventListener("mouseup",n.mouseup),n.mouseup=null),l&4?n.mousedrag||(n.mousedrag=o.mousedrag):(this._document.removeEventListener("mousemove",n.mousedrag),n.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this._register(be(t,"mousedown",l=>{if(l.preventDefault(),this.focus(),!(!this.coreMouseService.areMouseEventsActive||this._selectionService.shouldForceSelection(l)))return i(l),n.mouseup&&this._document.addEventListener("mouseup",n.mouseup),n.mousedrag&&this._document.addEventListener("mousemove",n.mousedrag),this.cancel(l)})),this._register(be(t,"wheel",l=>{var c,u,p,d,_;if(!n.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(l)===!1)return!1;if(!this.buffer.hasScrollback){if(l.deltaY===0)return!1;if(e.coreMouseService.consumeWheelEvent(l,(d=(p=(u=(c=e._renderService)==null?void 0:c.dimensions)==null?void 0:u.device)==null?void 0:p.cell)==null?void 0:d.height,(_=e._coreBrowserService)==null?void 0:_.dpr)===0)return this.cancel(l,!0);let g=H.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(l.deltaY<0?"A":"B");return this.coreService.triggerDataEvent(g,!0),this.cancel(l,!0)}}},{passive:!1}))}refresh(e,t){var i;(i=this._renderService)==null||i.refreshRows(e,t)}updateCursorStyle(e){var t;(t=this._selectionService)!=null&&t.shouldColumnSelect(e)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(e,t){this._viewport?this._viewport.scrollLines(e):super.scrollLines(e,t),this.refresh(0,this.rows-1)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(e){e&&this._viewport?this._viewport.scrollToLine(this.buffer.ybase,!0):this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){let t=e-this._bufferService.buffer.ydisp;t!==0&&this.scrollLines(t)}paste(e){Yv(e,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(e){this._customKeyEventHandler=e}attachCustomWheelEventHandler(e){this._customWheelEventHandler=e}registerLinkProvider(e){return this._linkProviderService.registerLinkProvider(e)}registerCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let t=this._characterJoinerService.register(e);return this.refresh(0,this.rows-1),t}deregisterCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(e)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(e){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)}registerDecoration(e){return this._decorationService.registerDecoration(e)}hasSelection(){return this._selectionService?this._selectionService.hasSelection:!1}select(e,t,i){this._selectionService.setSelection(e,t,i)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(!(!this._selectionService||!this._selectionService.hasSelection))return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var e;(e=this._selectionService)==null||e.clearSelection()}selectAll(){var e;(e=this._selectionService)==null||e.selectAll()}selectLines(e,t){var i;(i=this._selectionService)==null||i.selectLines(e,t)}_keyDown(e){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)return!1;let t=this.browser.isMac&&this.options.macOptionIsMeta&&e.altKey;if(!t&&!this._compositionHelper.keydown(e))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(!0),!1;!t&&(e.key==="Dead"||e.key==="AltGraph")&&(this._unprocessedDeadKey=!0);let i=Y2(e,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),i.type===3||i.type===2){let n=this.rows-1;return this.scrollLines(i.type===2?-n:n),this.cancel(e,!0)}if(i.type===1&&this.selectAll(),this._isThirdLevelShift(this.browser,e)||(i.cancel&&this.cancel(e,!0),!i.key)||e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.key.length===1&&e.key.charCodeAt(0)>=65&&e.key.charCodeAt(0)<=90)return!0;if(this._unprocessedDeadKey)return this._unprocessedDeadKey=!1,!0;if((i.key===H.ETX||i.key===H.CR)&&(this.textarea.value=""),this._onKey.fire({key:i.key,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(i.key,!0),!this.optionsService.rawOptions.screenReaderMode||e.altKey||e.ctrlKey)return this.cancel(e,!0);this._keyDownHandled=!0}_isThirdLevelShift(e,t){let i=e.isMac&&!this.options.macOptionIsMeta&&t.altKey&&!t.ctrlKey&&!t.metaKey||e.isWindows&&t.altKey&&t.ctrlKey&&!t.metaKey||e.isWindows&&t.getModifierState("AltGraph");return t.type==="keypress"?i:i&&(!t.keyCode||t.keyCode>47)}_keyUp(e){this._keyDownSeen=!1,!(this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)&&(rE(e)||this.focus(),this.updateCursorStyle(e),this._keyPressHandled=!1)}_keyPress(e){let t;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)return!1;if(this.cancel(e),e.charCode)t=e.charCode;else if(e.which===null||e.which===void 0)t=e.keyCode;else if(e.which!==0&&e.charCode!==0)t=e.which;else return!1;return!t||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e)?!1:(t=String.fromCharCode(t),this._onKey.fire({key:t,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(t,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,!0)}_inputEvent(e){if(e.data&&e.inputType==="insertText"&&(!e.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let t=e.data;return this.coreService.triggerDataEvent(t,!0),this.cancel(e),!0}return!1}resize(e,t){if(e===this.cols&&t===this.rows){this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure();return}super.resize(e,t)}_afterResize(e,t){var i;(i=this._charSizeService)==null||i.measure()}clear(){if(!(this.buffer.ybase===0&&this.buffer.y===0)){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let e=1;e<this.rows;e++)this.buffer.lines.push(this.buffer.getBlankLine(at));this._onScroll.fire({position:this.buffer.ydisp}),this.refresh(0,this.rows-1)}}reset(){var t;this.options.rows=this.rows,this.options.cols=this.cols;let e=this._customKeyEventHandler;this._setup(),super.reset(),(t=this._selectionService)==null||t.reset(),this._decorationService.reset(),this._customKeyEventHandler=e,this.refresh(0,this.rows-1)}clearTextureAtlas(){var e;(e=this._renderService)==null||e.clearTextureAtlas()}_reportFocus(){var e;(e=this.element)!=null&&e.classList.contains("focus")?this.coreService.triggerDataEvent(H.ESC+"[I"):this.coreService.triggerDataEvent(H.ESC+"[O")}_reportWindowsOptions(e){if(this._renderService)switch(e){case 0:let t=this._renderService.dimensions.css.canvas.width.toFixed(0),i=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${H.ESC}[4;${i};${t}t`);break;case 1:let n=this._renderService.dimensions.css.cell.width.toFixed(0),o=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${H.ESC}[6;${o};${n}t`);break}}cancel(e,t){if(!(!this.options.cancelEvents&&!t))return e.preventDefault(),e.stopPropagation(),!1}};function rE(e){return e.keyCode===16||e.keyCode===17||e.keyCode===18}var sE=class{constructor(){this._addons=[]}dispose(){for(let e=this._addons.length-1;e>=0;e--)this._addons[e].instance.dispose()}loadAddon(e,t){let i={instance:t,dispose:t.dispose,isDisposed:!1};this._addons.push(i),t.dispose=()=>this._wrappedAddonDispose(i),t.activate(e)}_wrappedAddonDispose(e){if(e.isDisposed)return;let t=-1;for(let i=0;i<this._addons.length;i++)if(this._addons[i]===e){t=i;break}if(t===-1)throw new Error("Could not dispose an addon that has not been loaded");e.isDisposed=!0,e.dispose.apply(e.instance),this._addons.splice(t,1)}},nE=class{constructor(e){this._line=e}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(e,t){if(!(e<0||e>=this._line.length))return t?(this._line.loadCell(e,t),t):this._line.loadCell(e,new yi)}translateToString(e,t,i){return this._line.translateToString(e,t,i)}},A_=class{constructor(e,t){this._buffer=e,this.type=t}init(e){return this._buffer=e,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(e){let t=this._buffer.lines.get(e);if(t)return new nE(t)}getNullCell(){return new yi}},oE=class extends Le{constructor(e){super(),this._core=e,this._onBufferChange=this._register(new ee),this.onBufferChange=this._onBufferChange.event,this._normal=new A_(this._core.buffers.normal,"normal"),this._alternate=new A_(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}},aE=class{constructor(e){this._core=e}registerCsiHandler(e,t){return this._core.registerCsiHandler(e,i=>t(i.toArray()))}addCsiHandler(e,t){return this.registerCsiHandler(e,t)}registerDcsHandler(e,t){return this._core.registerDcsHandler(e,(i,n)=>t(i,n.toArray()))}addDcsHandler(e,t){return this.registerDcsHandler(e,t)}registerEscHandler(e,t){return this._core.registerEscHandler(e,t)}addEscHandler(e,t){return this.registerEscHandler(e,t)}registerOscHandler(e,t){return this._core.registerOscHandler(e,t)}addOscHandler(e,t){return this.registerOscHandler(e,t)}},lE=class{constructor(e){this._core=e}register(e){this._core.unicodeService.register(e)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(e){this._core.unicodeService.activeVersion=e}},cE=["cols","rows"],ji=0,hE=class extends Le{constructor(e){super(),this._core=this._register(new iE(e)),this._addonManager=this._register(new sE),this._publicOptions={...this._core.options};let t=n=>this._core.options[n],i=(n,o)=>{this._checkReadonlyOptions(n),this._core.options[n]=o};for(let n in this._core.options){let o={get:t.bind(this,n),set:i.bind(this,n)};Object.defineProperty(this._publicOptions,n,o)}}_checkReadonlyOptions(e){if(cE.includes(e))throw new Error(`Option "${e}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new aE(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new lE(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this._register(new oE(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let e=this._core.coreService.decPrivateModes,t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any";break}return{applicationCursorKeysMode:e.applicationCursorKeys,applicationKeypadMode:e.applicationKeypad,bracketedPasteMode:e.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:e.origin,reverseWraparoundMode:e.reverseWraparound,sendFocusMode:e.sendFocus,synchronizedOutputMode:e.synchronizedOutput,wraparoundMode:e.wraparound}}get options(){return this._publicOptions}set options(e){for(let t in e)this._publicOptions[t]=e[t]}blur(){this._core.blur()}focus(){this._core.focus()}input(e,t=!0){this._core.input(e,t)}resize(e,t){this._verifyIntegers(e,t),this._core.resize(e,t)}open(e){this._core.open(e)}attachCustomKeyEventHandler(e){this._core.attachCustomKeyEventHandler(e)}attachCustomWheelEventHandler(e){this._core.attachCustomWheelEventHandler(e)}registerLinkProvider(e){return this._core.registerLinkProvider(e)}registerCharacterJoiner(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)}deregisterCharacterJoiner(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)}registerMarker(e=0){return this._verifyIntegers(e),this._core.registerMarker(e)}registerDecoration(e){return this._checkProposedApi(),this._verifyPositiveIntegers(e.x??0,e.width??0,e.height??0),this._core.registerDecoration(e)}hasSelection(){return this._core.hasSelection()}select(e,t,i){this._verifyIntegers(e,t,i),this._core.select(e,t,i)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(e,t){this._verifyIntegers(e,t),this._core.selectLines(e,t)}dispose(){super.dispose()}scrollLines(e){this._verifyIntegers(e),this._core.scrollLines(e)}scrollPages(e){this._verifyIntegers(e),this._core.scrollPages(e)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(e){this._verifyIntegers(e),this._core.scrollToLine(e)}clear(){this._core.clear()}write(e,t){this._core.write(e,t)}writeln(e,t){this._core.write(e),this._core.write(`\r
`,t)}paste(e){this._core.paste(e)}refresh(e,t){this._verifyIntegers(e,t),this._core.refresh(e,t)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(e){this._addonManager.loadAddon(this,e)}static get strings(){return{get promptLabel(){return Uu.get()},set promptLabel(e){Uu.set(e)},get tooMuchOutput(){return Ku.get()},set tooMuchOutput(e){Ku.set(e)}}}_verifyIntegers(...e){for(ji of e)if(ji===1/0||isNaN(ji)||ji%1!==0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...e){for(ji of e)if(ji&&(ji===1/0||isNaN(ji)||ji%1!==0||ji<0))throw new Error("This API only accepts positive integers")}};/**
 * Copyright (c) 2014-2024 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * @license MIT
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 */var uE=2,dE=1,fE=class{activate(e){this._terminal=e}dispose(){}fit(){let e=this.proposeDimensions();if(!e||!this._terminal||isNaN(e.cols)||isNaN(e.rows))return;let t=this._terminal._core;(this._terminal.rows!==e.rows||this._terminal.cols!==e.cols)&&(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}proposeDimensions(){var g;if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let e=this._terminal._core._renderService.dimensions;if(e.css.cell.width===0||e.css.cell.height===0)return;let t=this._terminal.options.scrollback===0?0:((g=this._terminal.options.overviewRuler)==null?void 0:g.width)||14,i=window.getComputedStyle(this._terminal.element.parentElement),n=parseInt(i.getPropertyValue("height")),o=Math.max(0,parseInt(i.getPropertyValue("width"))),l=window.getComputedStyle(this._terminal.element),c={top:parseInt(l.getPropertyValue("padding-top")),bottom:parseInt(l.getPropertyValue("padding-bottom")),right:parseInt(l.getPropertyValue("padding-right")),left:parseInt(l.getPropertyValue("padding-left"))},u=c.top+c.bottom,p=c.right+c.left,d=n-u,_=o-p-t;return{cols:Math.max(uE,Math.floor(_/e.css.cell.width)),rows:Math.max(dE,Math.floor(d/e.css.cell.height))}}};/**
 * Copyright (c) 2014-2024 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * @license MIT
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 */var pE=class{constructor(e,t,i,n={}){this._terminal=e,this._regex=t,this._handler=i,this._options=n}provideLinks(e,t){let i=gE.computeLink(e,this._regex,this._terminal,this._handler);t(this._addCallbacks(i))}_addCallbacks(e){return e.map(t=>(t.leave=this._options.leave,t.hover=(i,n)=>{if(this._options.hover){let{range:o}=t;this._options.hover(i,n,o)}},t))}};function mE(e){try{let t=new URL(e),i=t.password&&t.username?`${t.protocol}//${t.username}:${t.password}@${t.host}`:t.username?`${t.protocol}//${t.username}@${t.host}`:`${t.protocol}//${t.host}`;return e.toLocaleLowerCase().startsWith(i.toLocaleLowerCase())}catch{return!1}}var gE=class Ml{static computeLink(t,i,n,o){let l=new RegExp(i.source,(i.flags||"")+"g"),[c,u]=Ml._getWindowedLineStrings(t-1,n),p=c.join(""),d,_=[];for(;d=l.exec(p);){let g=d[0];if(!mE(g))continue;let[S,w]=Ml._mapStrIdx(n,u,0,d.index),[x,C]=Ml._mapStrIdx(n,S,w,g.length);if(S===-1||w===-1||x===-1||C===-1)continue;let k={start:{x:w+1,y:S+1},end:{x:C,y:x+1}};_.push({range:k,text:g,activate:o})}return _}static _getWindowedLineStrings(t,i){let n,o=t,l=t,c=0,u="",p=[];if(n=i.buffer.active.getLine(t)){let d=n.translateToString(!0);if(n.isWrapped&&d[0]!==" "){for(c=0;(n=i.buffer.active.getLine(--o))&&c<2048&&(u=n.translateToString(!0),c+=u.length,p.push(u),!(!n.isWrapped||u.indexOf(" ")!==-1)););p.reverse()}for(p.push(d),c=0;(n=i.buffer.active.getLine(++l))&&n.isWrapped&&c<2048&&(u=n.translateToString(!0),c+=u.length,p.push(u),u.indexOf(" ")===-1););}return[p,o]}static _mapStrIdx(t,i,n,o){let l=t.buffer.active,c=l.getNullCell(),u=n;for(;o;){let p=l.getLine(i);if(!p)return[-1,-1];for(let d=u;d<p.length;++d){p.getCell(d,c);let _=c.getChars();if(c.getWidth()&&(o-=_.length||1,d===p.length-1&&_==="")){let g=l.getLine(i+1);g&&g.isWrapped&&(g.getCell(0,c),c.getWidth()===2&&(o+=1))}if(o<0)return[i,d]}i++,u=0}return[i,u]}},_E=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function vE(e,t){let i=window.open();if(i){try{i.opener=null}catch{}i.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}var yE=class{constructor(e=vE,t={}){this._handler=e,this._options=t}activate(e){this._terminal=e;let t=this._options,i=t.urlRegex||_E;this._linkProvider=this._terminal.registerLinkProvider(new pE(this._terminal,i,this._handler,t))}dispose(){var e;(e=this._linkProvider)==null||e.dispose()}};function SE(){const{t:e}=Ts(),[t,i]=N.useState([]),[n,o]=N.useState(null),[l,c]=N.useState(""),u=N.useRef(new Map),p=N.useRef(null),d=N.useCallback(S=>{const w=`tab-${Date.now()}`,x=S||l||"",C={id:w,title:x&&x.split(/[/\\]/).pop()||"Terminal",cwd:x};i(k=>[...k,C]),o(w),setTimeout(()=>_(w,x),0)},[l]),_=N.useCallback((S,w)=>{const x=document.getElementById(`terminal-${S}`);if(!x)return;const C=new hE({cursorBlink:!0,fontSize:14,fontFamily:'Consolas, "Courier New", monospace',theme:{background:"#1e1e2e",foreground:"#cdd6f4",cursor:"#f5e0dc",cursorAccent:"#1e1e2e",selectionBackground:"#585b70",black:"#45475a",red:"#f38ba8",green:"#a6e3a1",yellow:"#f9e2af",blue:"#89b4fa",magenta:"#f5c2e7",cyan:"#94e2d5",white:"#bac2de",brightBlack:"#585b70",brightRed:"#f38ba8",brightGreen:"#a6e3a1",brightYellow:"#f9e2af",brightBlue:"#89b4fa",brightMagenta:"#f5c2e7",brightCyan:"#94e2d5",brightWhite:"#a6adc8"},allowProposedApi:!0}),k=new fE;C.loadAddon(k),C.loadAddon(new yE),C.open(x),k.fit();const L=window.location.protocol==="https:"?"wss:":"ws:",W=window.location.host,O=`${L}//${W}/api/terminal?cwd=${encodeURIComponent(w)}&cols=${C.cols}&rows=${C.rows}`,T=new WebSocket(O);T.onopen=()=>{C.writeln(`\x1B[32m Connected to terminal\x1B[0m\r
`)},T.onmessage=$=>{try{const G=JSON.parse($.data);switch(G.type){case"output":C.write(G.data);break;case"session":i(le=>le.map(ue=>ue.id===S?{...ue,title:G.cwd.split(/[/\\]/).pop()||G.shell}:ue));break;case"exit":C.writeln(`\r
\x1B[33m Process exited with code ${G.exitCode}\x1B[0m`);break}}catch{C.write($.data)}},T.onclose=()=>{C.writeln(`\r
\x1B[31m Disconnected from terminal\x1B[0m`)},T.onerror=()=>{C.writeln(`\r
\x1B[31m Connection error\x1B[0m`)},C.onData($=>{T.readyState===WebSocket.OPEN&&T.send(JSON.stringify({type:"input",data:$}))}),C.onResize(({cols:$,rows:G})=>{T.readyState===WebSocket.OPEN&&T.send(JSON.stringify({type:"resize",cols:$,rows:G}))}),u.current.set(S,{terminal:C,ws:T,fitAddon:k}),C.focus()},[]),g=N.useCallback(S=>{const w=u.current.get(S);w&&(w.ws.close(),w.terminal.dispose(),u.current.delete(S)),i(x=>{const C=x.filter(k=>k.id!==S);return n===S&&C.length>0?o(C[C.length-1].id):C.length===0&&o(null),C})},[n]);return N.useEffect(()=>{const S=()=>{if(n){const w=u.current.get(n);w&&w.fitAddon.fit()}};return window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[n]),N.useEffect(()=>{if(n){const S=u.current.get(n);S&&setTimeout(()=>{S.fitAddon.fit(),S.terminal.focus()},0)}},[n]),N.useEffect(()=>{t.length===0&&d()},[]),v.jsxs("div",{className:"h-full flex flex-col",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:e("shell.title")}),v.jsx("p",{className:"text-slate-500",children:e("shell.subtitle")})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(Fl,{size:18,className:"text-slate-500"}),v.jsx("input",{type:"text",value:l,onChange:S=>c(S.target.value),placeholder:e("shell.workingDirectoryPlaceholder"),className:"w-64 px-3 py-1.5 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),v.jsxs("button",{onClick:()=>d(),className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[v.jsx($d,{size:18}),e("shell.newTab")]})]})]}),t.length>0&&v.jsx("div",{className:"flex items-center gap-1 bg-slate-800 rounded-t-lg px-2 pt-2",children:t.map(S=>v.jsxs("div",{onClick:()=>o(S.id),className:`flex items-center gap-2 px-3 py-1.5 rounded-t-lg cursor-pointer transition-colors ${n===S.id?"bg-[#1e1e2e] text-white":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:[v.jsx($o,{size:14}),v.jsx("span",{className:"text-sm max-w-32 truncate",children:S.title}),v.jsx("button",{onClick:w=>{w.stopPropagation(),g(S.id)},className:"p-0.5 hover:bg-slate-600 rounded",children:v.jsx(Hv,{size:14})})]},S.id))}),v.jsx("div",{ref:p,className:"flex-1 bg-[#1e1e2e] rounded-b-lg overflow-hidden",style:{minHeight:"400px"},children:t.length===0?v.jsx("div",{className:"h-full flex items-center justify-center text-slate-500",children:v.jsxs("div",{className:"text-center",children:[v.jsx($o,{size:48,className:"mx-auto mb-4 opacity-50"}),v.jsx("p",{children:e("shell.noTerminals")}),v.jsx("button",{onClick:()=>d(),className:"mt-4 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:e("shell.newTab")})]})}):t.map(S=>v.jsx("div",{id:`terminal-${S.id}`,className:`h-full w-full p-2 ${n===S.id?"":"hidden"}`},S.id))}),v.jsx("p",{className:"mt-4 text-sm text-slate-500",children:e("shell.tip")})]})}const{slice:wE,forEach:xE}=[];function CE(e){return xE.call(wE.call(arguments,1),t=>{if(t)for(const i in t)e[i]===void 0&&(e[i]=t[i])}),e}function bE(e){return typeof e!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(i=>i.test(e))}const j_=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,kE=function(e,t){const n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},o=encodeURIComponent(t);let l=`${e}=${o}`;if(n.maxAge>0){const c=n.maxAge-0;if(Number.isNaN(c))throw new Error("maxAge should be a Number");l+=`; Max-Age=${Math.floor(c)}`}if(n.domain){if(!j_.test(n.domain))throw new TypeError("option domain is invalid");l+=`; Domain=${n.domain}`}if(n.path){if(!j_.test(n.path))throw new TypeError("option path is invalid");l+=`; Path=${n.path}`}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");l+=`; Expires=${n.expires.toUTCString()}`}if(n.httpOnly&&(l+="; HttpOnly"),n.secure&&(l+="; Secure"),n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"strict":l+="; SameSite=Strict";break;case"none":l+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(l+="; Partitioned"),l},F_={create(e,t,i,n){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};i&&(o.expires=new Date,o.expires.setTime(o.expires.getTime()+i*60*1e3)),n&&(o.domain=n),document.cookie=kE(e,t,o)},read(e){const t=`${e}=`,i=document.cookie.split(";");for(let n=0;n<i.length;n++){let o=i[n];for(;o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(t)===0)return o.substring(t.length,o.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var EE={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return F_.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:i,cookieMinutes:n,cookieDomain:o,cookieOptions:l}=t;i&&typeof document<"u"&&F_.create(i,e,n,o,l)}},RE={name:"querystring",lookup(e){var n;let{lookupQuerystring:t}=e,i;if(typeof window<"u"){let{search:o}=window.location;!window.location.search&&((n=window.location.hash)==null?void 0:n.indexOf("?"))>-1&&(o=window.location.hash.substring(window.location.hash.indexOf("?")));const c=o.substring(1).split("&");for(let u=0;u<c.length;u++){const p=c[u].indexOf("=");p>0&&c[u].substring(0,p)===t&&(i=c[u].substring(p+1))}}return i}},PE={name:"hash",lookup(e){var o;let{lookupHash:t,lookupFromHashIndex:i}=e,n;if(typeof window<"u"){const{hash:l}=window.location;if(l&&l.length>2){const c=l.substring(1);if(t){const u=c.split("&");for(let p=0;p<u.length;p++){const d=u[p].indexOf("=");d>0&&u[p].substring(0,d)===t&&(n=u[p].substring(d+1))}}if(n)return n;if(!n&&i>-1){const u=l.match(/\/([a-zA-Z-]*)/g);return Array.isArray(u)?(o=u[typeof i=="number"?i:0])==null?void 0:o.replace("/",""):void 0}}}return n}};let dn=null;const z_=()=>{if(dn!==null)return dn;try{if(dn=typeof window<"u"&&window.localStorage!==null,!dn)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{dn=!1}return dn};var LE={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&z_())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:i}=t;i&&z_()&&window.localStorage.setItem(i,e)}};let fn=null;const H_=()=>{if(fn!==null)return fn;try{if(fn=typeof window<"u"&&window.sessionStorage!==null,!fn)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{fn=!1}return fn};var NE={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&H_())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:i}=t;i&&H_()&&window.sessionStorage.setItem(i,e)}},DE={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:i,userLanguage:n,language:o}=navigator;if(i)for(let l=0;l<i.length;l++)t.push(i[l]);n&&t.push(n),o&&t.push(o)}return t.length>0?t:void 0}},ME={name:"htmlTag",lookup(e){let{htmlTag:t}=e,i;const n=t||(typeof document<"u"?document.documentElement:null);return n&&typeof n.getAttribute=="function"&&(i=n.getAttribute("lang")),i}},TE={name:"path",lookup(e){var o;let{lookupFromPathIndex:t}=e;if(typeof window>"u")return;const i=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(i)?(o=i[typeof t=="number"?t:0])==null?void 0:o.replace("/",""):void 0}},OE={name:"subdomain",lookup(e){var o,l;let{lookupFromSubdomainIndex:t}=e;const i=typeof t=="number"?t+1:1,n=typeof window<"u"&&((l=(o=window.location)==null?void 0:o.hostname)==null?void 0:l.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(n)return n[i]}};let j0=!1;try{document.cookie,j0=!0}catch{}const F0=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];j0||F0.splice(1,1);const BE=()=>({order:F0,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e});class z0{constructor(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,i)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=CE(i,this.options||{},BE()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=o=>o.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(EE),this.addDetector(RE),this.addDetector(LE),this.addDetector(NE),this.addDetector(DE),this.addDetector(ME),this.addDetector(TE),this.addDetector(OE),this.addDetector(PE)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,i=[];return t.forEach(n=>{if(this.detectors[n]){let o=this.detectors[n].lookup(this.options);o&&typeof o=="string"&&(o=[o]),o&&(i=i.concat(o))}}),i=i.filter(n=>n!=null&&!bE(n)).map(n=>this.options.convertDetectedLanguage(n)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?i:i.length>0?i[0]:null}cacheUserLanguage(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;i&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||i.forEach(n=>{this.detectors[n]&&this.detectors[n].cacheUserLanguage(t,this.options)}))}}z0.type="languageDetector";const IE={loading:"Loading...",error:"Error",save:"Save",cancel:"Cancel",delete:"Delete",create:"Create",edit:"Edit",close:"Close",confirm:"Confirm",back:"Back",clear:"Clear",execute:"Execute",refresh:"Refresh",start:"Start",stop:"Stop",pause:"Pause",resume:"Resume"},AE={projects:"Projects",shortcuts:"Shortcuts",shell:"Shell",settings:"Settings"},jE={title:"Projects",subtitle:"Manage AI agent projects",newProject:"New Project",noProjects:"No projects yet. Create one to get started!",untitled:"Untitled Project",noDescription:"No description",name:"Project Name",namePlaceholder:"Enter project name...",goal:"Goal",goalPlaceholder:"Describe what you want to accomplish...",repoPath:"Repository Path",repoPathPlaceholder:"/path/to/your/project",browse:"Browse",runs:"Runs",noRuns:"No runs yet",startRun:"Start Run",specs:"Specifications",specsMeta:"Meta & Constraints",specsOverview:"Overview",specsGlossary:"Glossary",specsRequirements:"Specification",specsInterfaces:"Implementation Status",specsDecisions:"Decisions",specsEmpty:"No specifications yet",specsListHint:"One per line",specsMetaPlaceholder:"Constraints, scope, non-goals...",specsOverviewPlaceholder:"Intent, background, goals, success criteria...",specsGlossaryPlaceholder:"Term: definition",specsRequirementsPlaceholder:"Specification details...",specsInterfacesPlaceholder:"Implementation status, progress, gaps...",specsDecisionsPlaceholder:"- Decision and rationale",status:{planning:"Planning",planned:"Planned",pending:"Pending",running:"Running",verifying:"Verifying",debugging:"Debugging",completed:"Completed",failed:"Failed",needs_input:"Needs Input"},detail:{title:"Project Details",backToProjects:"Back to projects",viewReport:"View Report",hideReport:"Hide Report",finalReport:"Final Report",information:"Information",created:"Created",updated:"Updated",verification:"Verification",verificationPassed:"Verification Passed",verificationFailed:"Verification Failed"},logs:{title:"Logs",noLogs:"No logs yet...",autoScroll:"Auto-scroll"},plan:{title:"Plan",subtitle:"Plan tasks before execution",noPlan:"No plan yet",createPlan:"Create Plan",editPlan:"Edit Plan",approvePlan:"Approve Plan",rejectPlan:"Reject Plan",regeneratePlan:"Regenerate Plan",tasks:"Tasks",addTask:"Add Task",taskName:"Task Name",taskDescription:"Task Description",estimatedEffort:"Estimated Effort",dependencies:"Dependencies",priority:"Priority",high:"High",medium:"Medium",low:"Low",status:{draft:"Draft",pending_approval:"Pending Approval",approved:"Approved",rejected:"Rejected"},aiGenerate:"Generate Plan with AI",generating:"Generating plan..."},execution:{title:"Execution",startExecution:"Start Execution",stopExecution:"Stop Execution",executionHistory:"Execution History"},specsCount:"{{count}} items",specsBulkEdit:"Bulk edit",specsInlineEdit:"Inline edit",specsExpand:"Expand",specsCollapse:"Collapse",specsSpecification:"Specification",specsImplementationStatus:"Implementation Status",specsMarkdownHint:"Markdown supported",specsFiles:"Files",specsAddFile:"Add file",specsAddFolder:"Add folder",specsNoFiles:"No files yet",specsSelectFile:"Select a file to preview",specsFolderSelected:"Folder selected",specsRename:"Rename",specsNamePlaceholder:"Name...",specsFileNamePlaceholder:"new-file.md",specsFolderNamePlaceholder:"new-folder",specsSpecificationPlaceholder:"Specification details, scope, constraints...",specsImplementationStatusPlaceholder:"Implementation status, progress, gaps..."},FE={title:"Shortcuts",subtitle:"Quick access to common commands",newShortcut:"New Shortcut",noShortcuts:"No shortcuts yet. Create one to get started!",name:"Name",command:"Command",description:"Description",descriptionOptional:"Description (optional)",category:"Category",categoryOptional:"Category (optional)",categoryPlaceholder:"e.g., build, test, git",createShortcut:"Create Shortcut",exitCode:"Exit code"},zE={title:"Terminal",subtitle:"Full-featured terminal emulator",workingDirectory:"Working Directory (optional)",workingDirectoryPlaceholder:"/path/to/directory",commandPlaceholder:"Enter command...",noCommands:"Enter a command below to get started",tip:"Tip: Full terminal support with tab completion, colors, and interactive programs",newTab:"New Tab",noTerminals:"No terminal sessions. Click the button below to start one."},HE={title:"Settings",subtitle:"Configure Supervisor Agent",backendStatus:"Backend Status",status:"Status",version:"Version",apiUsage:"API Usage",premiumRequests:"Premium Requests",copilotNotConfigured:"Copilot API not configured",configuration:"Configuration",defaultRepoPath:"Default Repository Path",apiBaseUrl:"API Base URL",copilotApiUrl:"Copilot API URL",maxDebugIterations:"Max Debug Iterations",saveSettings:"Save Settings",language:"Language",selectLanguage:"Select Language"},$E={settings:"Settings",repoPath:"Repository Path",repoPathPlaceholder:"/path/to/your/project",agentModel:"Agent Model",maxIterations:"Max Iterations",welcome:"Welcome to your project",welcomeDescription:"What would you like to accomplish? I can help with fixing bugs, adding features, running tests, and more.",inputPlaceholder:"Type a message...",inputHint:"Press Enter to send, Shift+Enter for new line",thinking:"Thinking...",readyToHelp:"Ready to help. What would you like to do?",suggestions:{runTests:"Run tests",fixBug:"Fix a bug",addFeature:"Add a feature"}},WE={common:IE,nav:AE,projects:jE,shortcuts:FE,shell:zE,settings:HE,chat:$E},UE={loading:"...",error:"",save:"",cancel:"",delete:"",create:"",edit:"",close:"",confirm:"",back:"",clear:"",execute:"",refresh:"",start:"",stop:"",pause:"",resume:""},KE={projects:"",shortcuts:"",shell:"",settings:""},VE={title:"",subtitle:"AI ",newProject:"",noProjects:"",createFirst:"",untitled:"",noDescription:"",name:"",namePlaceholder:"...",description:"",descriptionPlaceholder:"",goal:"",goalPlaceholder:"...",repoPath:"",repoPathPlaceholder:"/path/to/your/project",browse:"",runs:"",noRuns:"",startRun:"",specs:"",specsMeta:"",specsOverview:"",specsGlossary:"",specsRequirements:"",specsInterfaces:"",specsDecisions:"",specsEmpty:"",specsListHint:"11",specsMetaPlaceholder:"...",specsOverviewPlaceholder:"/...",specsGlossaryPlaceholder:": ",specsRequirementsPlaceholder:"...",specsInterfacesPlaceholder:"...",specsDecisionsPlaceholder:"- ",specsCount:"{{count}} ",specsBulkEdit:"",specsInlineEdit:"",specsExpand:"",specsCollapse:"",requirements:"",acceptanceCriteria:"",notes:"",status:{planning:"",planned:"",pending:"",running:"",verifying:"",debugging:"",completed:"",failed:"",needs_input:""},detail:{title:"",backToProjects:"",viewReport:"",hideReport:"",finalReport:"",information:"",created:"",updated:"",verification:"",verificationPassed:"",verificationFailed:""},logs:{title:"",noLogs:"...",autoScroll:""},plan:{title:"",subtitle:"",noPlan:"",createPlan:"",editPlan:"",approvePlan:"",rejectPlan:"",regeneratePlan:"",tasks:"",addTask:"",taskName:"",taskDescription:"",estimatedEffort:"",dependencies:"",priority:"",high:"",medium:"",low:"",status:{draft:"",pending_approval:"",approved:"",rejected:""},aiGenerate:"AI ",generating:"..."},execution:{title:"",startExecution:"",stopExecution:"",executionHistory:""},specsSpecification:"",specsImplementationStatus:"",specsMarkdownHint:"",specsFiles:"",specsAddFile:"",specsAddFolder:"",specsNoFiles:"",specsSelectFile:"",specsFolderSelected:"",specsRename:"",specsNamePlaceholder:"...",specsFileNamePlaceholder:"new-file.md",specsFolderNamePlaceholder:"new-folder",specsSpecificationPlaceholder:"...",specsImplementationStatusPlaceholder:"..."},qE={title:"",subtitle:"",newShortcut:"",noShortcuts:"",name:"",command:"",description:"",descriptionOptional:"",category:"",categoryOptional:"",categoryPlaceholder:": build, test, git",createShortcut:"",exitCode:""},QE={title:"",subtitle:"",workingDirectory:"",workingDirectoryPlaceholder:"/path/to/directory",commandPlaceholder:"...",noCommands:"",tip:": ",newTab:"",noTerminals:""},YE={title:"",subtitle:"Supervisor Agent ",backendStatus:"",status:"",version:"",apiUsage:"API ",premiumRequests:"",copilotNotConfigured:"Copilot API ",configuration:"",defaultRepoPath:"",apiBaseUrl:"API  URL",copilotApiUrl:"Copilot API URL",maxDebugIterations:"",saveSettings:"",language:"",selectLanguage:""},GE={settings:"",repoPath:"",repoPathPlaceholder:"/path/to/your/project",agentModel:"",maxIterations:"",welcome:"",welcomeDescription:"",inputPlaceholder:"...",inputHint:"Enter Shift+Enter ",thinking:"...",readyToHelp:"",suggestions:{runTests:"",fixBug:"",addFeature:""}},XE={common:UE,nav:KE,projects:VE,shortcuts:qE,shell:QE,settings:YE,chat:GE},JE={en:{translation:WE},ja:{translation:XE}};Ht.use(z0).use(Ax).init({resources:JE,fallbackLng:"en",supportedLngs:["en","ja"],interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator","htmlTag"],caches:["localStorage"]}});const ZE=[{code:"en",name:"English",nativeName:"English"},{code:"ja",name:"Japanese",nativeName:""}];function eR(){const{t:e,i18n:t}=Ts(),i=Ms(),[n,o]=N.useState(""),[l,c]=N.useState(""),[u,p]=N.useState(!1),[d,_]=N.useState(!1),[g,S]=N.useState(""),[w,x]=N.useState(!1),{data:C,refetch:k}=vi({queryKey:["health"],queryFn:Wv}),{data:L,refetch:W}=vi({queryKey:["settings"],queryFn:Uv}),{data:O}=vi({queryKey:["copilotStatus"],queryFn:Vv,refetchInterval:5e3}),T=Ps({mutationFn:Kv,onSuccess:()=>{i.invalidateQueries({queryKey:["settings"]}),i.invalidateQueries({queryKey:["copilotStatus"]}),o(""),c(""),S("")}}),$=()=>{const se={};n&&(se.openai_api_key=n),l&&(se.anthropic_api_key=l),Object.keys(se).length>0&&T.mutate(se)},G=()=>{g&&T.mutate({github_token:g})},le=()=>{T.mutate({openai_api_key:""})},ue=()=>{T.mutate({anthropic_api_key:""})},ye=()=>{T.mutate({github_token:""})},ie=se=>{t.changeLanguage(se)};return v.jsxs("div",{children:[v.jsxs("div",{className:"mb-6",children:[v.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:e("settings.title")}),v.jsx("p",{className:"text-slate-500",children:e("settings.subtitle")})]}),v.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[v.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6 lg:col-span-2",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("h2",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[v.jsx(sC,{size:20}),"API Keys"]}),v.jsx("button",{onClick:()=>W(),className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:v.jsx($g,{size:16})})]}),v.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Configure API keys for AI services. Keys are stored securely and take precedence over environment variables."}),v.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["OpenAI API Key",(L==null?void 0:L.openai_api_key_set)&&v.jsxs("span",{className:"ml-2 text-xs text-green-600 font-normal",children:[v.jsx(lu,{size:12,className:"inline mr-1"}),"Configured (",L.openai_api_key,")"]})]}),v.jsxs("div",{className:"relative",children:[v.jsx("input",{type:u?"text":"password",value:n,onChange:se=>o(se.target.value),placeholder:L!=null&&L.openai_api_key_set?"Enter new key to update":"sk-...",className:"w-full px-3 py-2 pr-20 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),v.jsx("button",{type:"button",onClick:()=>p(!u),className:"absolute right-10 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:u?v.jsx(cu,{size:18}):v.jsx(kl,{size:18})}),(L==null?void 0:L.openai_api_key_set)&&v.jsx("button",{type:"button",onClick:le,className:"absolute right-2 top-1/2 -translate-y-1/2 text-red-400 hover:text-red-600 text-xs",children:"Clear"})]})]}),v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Anthropic API Key",(L==null?void 0:L.anthropic_api_key_set)&&v.jsxs("span",{className:"ml-2 text-xs text-green-600 font-normal",children:[v.jsx(lu,{size:12,className:"inline mr-1"}),"Configured (",L.anthropic_api_key,")"]})]}),v.jsxs("div",{className:"relative",children:[v.jsx("input",{type:d?"text":"password",value:l,onChange:se=>c(se.target.value),placeholder:L!=null&&L.anthropic_api_key_set?"Enter new key to update":"sk-ant-...",className:"w-full px-3 py-2 pr-20 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),v.jsx("button",{type:"button",onClick:()=>_(!d),className:"absolute right-10 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:d?v.jsx(cu,{size:18}):v.jsx(kl,{size:18})}),(L==null?void 0:L.anthropic_api_key_set)&&v.jsx("button",{type:"button",onClick:ue,className:"absolute right-2 top-1/2 -translate-y-1/2 text-red-400 hover:text-red-600 text-xs",children:"Clear"})]})]})]}),v.jsx("div",{className:"mt-4",children:v.jsxs("button",{onClick:$,disabled:!n&&!l||T.isPending,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[T.isPending&&v.jsx(ni,{size:16,className:"animate-spin"}),"Save API Keys"]})})]}),v.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6 lg:col-span-2",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("h2",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[v.jsx(iC,{size:20}),"GitHub Copilot API"]}),(L==null?void 0:L.github_token_set)&&v.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[v.jsx("span",{className:`w-2 h-2 rounded-full ${O!=null&&O.running&&(O!=null&&O.healthy)?"bg-green-500":O!=null&&O.running?"bg-yellow-500 animate-pulse":"bg-red-500"}`}),v.jsx("span",{className:"text-slate-500",children:O!=null&&O.running&&(O!=null&&O.healthy)?"Running":O!=null&&O.running?"Starting...":"Not running"})]})]}),(O==null?void 0:O.error)&&(L==null?void 0:L.github_token_set)&&v.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:O.error}),v.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Use GitHub Copilot as an OpenAI-compatible API proxy. Set your GitHub token below and the proxy will start automatically."}),v.jsxs("div",{className:"max-w-md",children:[v.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["GitHub Token",(L==null?void 0:L.github_token_set)&&v.jsxs("span",{className:"ml-2 text-xs text-green-600 font-normal",children:[v.jsx(lu,{size:12,className:"inline mr-1"}),"Configured (",L.github_token,")"]})]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsxs("div",{className:"relative flex-1",children:[v.jsx("input",{type:w?"text":"password",value:g,onChange:se=>S(se.target.value),placeholder:L!=null&&L.github_token_set?"Enter new token to update":"ghp_...",className:"w-full px-3 py-2 pr-10 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),v.jsx("button",{type:"button",onClick:()=>x(!w),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:w?v.jsx(cu,{size:18}):v.jsx(kl,{size:18})})]}),v.jsxs("button",{onClick:G,disabled:!g||T.isPending,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[T.isPending&&v.jsx(ni,{size:16,className:"animate-spin"}),"Save"]}),(L==null?void 0:L.github_token_set)&&v.jsx("button",{onClick:ye,className:"px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:"Clear"})]}),v.jsxs("p",{className:"text-xs text-slate-400 mt-2",children:["Get your token from"," ",v.jsx("a",{href:"https://github.com/settings/tokens",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:"GitHub Settings  Tokens"})]})]})]}),v.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[v.jsxs("h2",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2 mb-4",children:[v.jsx(rC,{size:20}),e("settings.language")]}),v.jsx("div",{className:"space-y-2",children:ZE.map(se=>v.jsxs("button",{onClick:()=>ie(se.code),className:`w-full text-left px-4 py-3 rounded-lg border transition-colors ${t.language===se.code?"border-primary-500 bg-primary-50 text-primary-700":"border-slate-200 hover:bg-slate-50"}`,children:[v.jsx("span",{className:"font-medium",children:se.nativeName}),v.jsxs("span",{className:"text-slate-500 ml-2",children:["(",se.name,")"]})]},se.code))})]}),v.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("h2",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[v.jsx(uC,{size:20}),e("settings.backendStatus")]}),v.jsx("button",{onClick:()=>k(),className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:v.jsx($g,{size:16})})]}),v.jsxs("dl",{className:"space-y-3",children:[v.jsxs("div",{className:"flex justify-between",children:[v.jsx("dt",{className:"text-slate-500",children:e("settings.status")}),v.jsxs("dd",{className:"flex items-center gap-2",children:[v.jsx("span",{className:`w-2 h-2 rounded-full ${(C==null?void 0:C.status)==="ok"?"bg-green-500":"bg-red-500"}`}),(C==null?void 0:C.status)??"Unknown"]})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("dt",{className:"text-slate-500",children:e("settings.version")}),v.jsx("dd",{className:"font-mono text-sm",children:(C==null?void 0:C.version)??"-"})]})]})]})]})]})}function tR(){return v.jsx(TC,{children:v.jsxs(R1,{children:[v.jsx(rr,{path:"/",element:v.jsx(iu,{to:"/projects",replace:!0})}),v.jsx(rr,{path:"/projects",element:v.jsx(zC,{})}),v.jsx(rr,{path:"/projects/:projectId",element:v.jsx(ZC,{})}),v.jsx(rr,{path:"/runs",element:v.jsx(iu,{to:"/projects",replace:!0})}),v.jsx(rr,{path:"/runs/:runId",element:v.jsx(iu,{to:"/projects/:runId",replace:!0})}),v.jsx(rr,{path:"/shortcuts",element:v.jsx(tb,{})}),v.jsx(rr,{path:"/shell",element:v.jsx(SE,{})}),v.jsx(rr,{path:"/settings",element:v.jsx(eR,{})})]})})}const iR=new _w({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}});qS.createRoot(document.getElementById("root")).render(v.jsx(zS.StrictMode,{children:v.jsx(vw,{client:iR,children:v.jsx(X1,{children:v.jsx(tR,{})})})}));
