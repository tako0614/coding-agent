(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();function qg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Jc={exports:{}},wn={},Zc={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yp;function Uy(){if(Yp)return Ce;Yp=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.iterator;function S(P){return P===null||typeof P!="object"?null:(P=_&&P[_]||P["@@iterator"],typeof P=="function"?P:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,b={};function E(P,z,le){this.props=P,this.context=z,this.refs=b,this.updater=le||x}E.prototype.isReactComponent={},E.prototype.setState=function(P,z){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,z,"setState")},E.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function M(){}M.prototype=E.prototype;function B(P,z,le){this.props=P,this.context=z,this.refs=b,this.updater=le||x}var W=B.prototype=new M;W.constructor=B,w(W,E.prototype),W.isPureReactComponent=!0;var A=Array.isArray,K=Object.prototype.hasOwnProperty,X={current:null},te={key:!0,ref:!0,__self:!0,__source:!0};function ne(P,z,le){var fe,Se={},ye=null,ke=null;if(z!=null)for(fe in z.ref!==void 0&&(ke=z.ref),z.key!==void 0&&(ye=""+z.key),z)K.call(z,fe)&&!te.hasOwnProperty(fe)&&(Se[fe]=z[fe]);var Pe=arguments.length-2;if(Pe===1)Se.children=le;else if(1<Pe){for(var Re=Array(Pe),at=0;at<Pe;at++)Re[at]=arguments[at+2];Se.children=Re}if(P&&P.defaultProps)for(fe in Pe=P.defaultProps,Pe)Se[fe]===void 0&&(Se[fe]=Pe[fe]);return{$$typeof:e,type:P,key:ye,ref:ke,props:Se,_owner:X.current}}function re(P,z){return{$$typeof:e,type:P.type,key:z,ref:P.ref,props:P.props,_owner:P._owner}}function F(P){return typeof P=="object"&&P!==null&&P.$$typeof===e}function V(P){var z={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(le){return z[le]})}var Q=/\/+/g;function $(P,z){return typeof P=="object"&&P!==null&&P.key!=null?V(""+P.key):z.toString(36)}function H(P,z,le,fe,Se){var ye=typeof P;(ye==="undefined"||ye==="boolean")&&(P=null);var ke=!1;if(P===null)ke=!0;else switch(ye){case"string":case"number":ke=!0;break;case"object":switch(P.$$typeof){case e:case t:ke=!0}}if(ke)return ke=P,Se=Se(ke),P=fe===""?"."+$(ke,0):fe,A(Se)?(le="",P!=null&&(le=P.replace(Q,"$&/")+"/"),H(Se,z,le,"",function(at){return at})):Se!=null&&(F(Se)&&(Se=re(Se,le+(!Se.key||ke&&ke.key===Se.key?"":(""+Se.key).replace(Q,"$&/")+"/")+P)),z.push(Se)),1;if(ke=0,fe=fe===""?".":fe+":",A(P))for(var Pe=0;Pe<P.length;Pe++){ye=P[Pe];var Re=fe+$(ye,Pe);ke+=H(ye,z,le,Re,Se)}else if(Re=S(P),typeof Re=="function")for(P=Re.call(P),Pe=0;!(ye=P.next()).done;)ye=ye.value,Re=fe+$(ye,Pe++),ke+=H(ye,z,le,Re,Se);else if(ye==="object")throw z=String(P),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return ke}function O(P,z,le){if(P==null)return P;var fe=[],Se=0;return H(P,fe,"","",function(ye){return z.call(le,ye,Se++)}),fe}function D(P){if(P._status===-1){var z=P._result;z=z(),z.then(function(le){(P._status===0||P._status===-1)&&(P._status=1,P._result=le)},function(le){(P._status===0||P._status===-1)&&(P._status=2,P._result=le)}),P._status===-1&&(P._status=0,P._result=z)}if(P._status===1)return P._result.default;throw P._result}var U={current:null},N={transition:null},G={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:N,ReactCurrentOwner:X};function Y(){throw Error("act(...) is not supported in production builds of React.")}return Ce.Children={map:O,forEach:function(P,z,le){O(P,function(){z.apply(this,arguments)},le)},count:function(P){var z=0;return O(P,function(){z++}),z},toArray:function(P){return O(P,function(z){return z})||[]},only:function(P){if(!F(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Ce.Component=E,Ce.Fragment=r,Ce.Profiler=o,Ce.PureComponent=B,Ce.StrictMode=n,Ce.Suspense=p,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,Ce.act=Y,Ce.cloneElement=function(P,z,le){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var fe=w({},P.props),Se=P.key,ye=P.ref,ke=P._owner;if(z!=null){if(z.ref!==void 0&&(ye=z.ref,ke=X.current),z.key!==void 0&&(Se=""+z.key),P.type&&P.type.defaultProps)var Pe=P.type.defaultProps;for(Re in z)K.call(z,Re)&&!te.hasOwnProperty(Re)&&(fe[Re]=z[Re]===void 0&&Pe!==void 0?Pe[Re]:z[Re])}var Re=arguments.length-2;if(Re===1)fe.children=le;else if(1<Re){Pe=Array(Re);for(var at=0;at<Re;at++)Pe[at]=arguments[at+2];fe.children=Pe}return{$$typeof:e,type:P.type,key:Se,ref:ye,props:fe,_owner:ke}},Ce.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:l,_context:P},P.Consumer=P},Ce.createElement=ne,Ce.createFactory=function(P){var z=ne.bind(null,P);return z.type=P,z},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(P){return{$$typeof:h,render:P}},Ce.isValidElement=F,Ce.lazy=function(P){return{$$typeof:v,_payload:{_status:-1,_result:P},_init:D}},Ce.memo=function(P,z){return{$$typeof:d,type:P,compare:z===void 0?null:z}},Ce.startTransition=function(P){var z=N.transition;N.transition={};try{P()}finally{N.transition=z}},Ce.unstable_act=Y,Ce.useCallback=function(P,z){return U.current.useCallback(P,z)},Ce.useContext=function(P){return U.current.useContext(P)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(P){return U.current.useDeferredValue(P)},Ce.useEffect=function(P,z){return U.current.useEffect(P,z)},Ce.useId=function(){return U.current.useId()},Ce.useImperativeHandle=function(P,z,le){return U.current.useImperativeHandle(P,z,le)},Ce.useInsertionEffect=function(P,z){return U.current.useInsertionEffect(P,z)},Ce.useLayoutEffect=function(P,z){return U.current.useLayoutEffect(P,z)},Ce.useMemo=function(P,z){return U.current.useMemo(P,z)},Ce.useReducer=function(P,z,le){return U.current.useReducer(P,z,le)},Ce.useRef=function(P){return U.current.useRef(P)},Ce.useState=function(P){return U.current.useState(P)},Ce.useSyncExternalStore=function(P,z,le){return U.current.useSyncExternalStore(P,z,le)},Ce.useTransition=function(){return U.current.useTransition()},Ce.version="18.3.1",Ce}var Gp;function Xa(){return Gp||(Gp=1,Zc.exports=Uy()),Zc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xp;function Ky(){if(Xp)return wn;Xp=1;var e=Xa(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(h,p,d){var v,_={},S=null,x=null;d!==void 0&&(S=""+d),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(x=p.ref);for(v in p)n.call(p,v)&&!l.hasOwnProperty(v)&&(_[v]=p[v]);if(h&&h.defaultProps)for(v in p=h.defaultProps,p)_[v]===void 0&&(_[v]=p[v]);return{$$typeof:t,type:h,key:S,ref:x,props:_,_owner:o.current}}return wn.Fragment=r,wn.jsx=c,wn.jsxs=c,wn}var Jp;function Vy(){return Jp||(Jp=1,Jc.exports=Ky()),Jc.exports}var g=Vy(),C=Xa();const zi=qg(C);var ma={},eu={exports:{}},Bt={},tu={exports:{}},ru={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zp;function qy(){return Zp||(Zp=1,(function(e){function t(N,G){var Y=N.length;N.push(G);e:for(;0<Y;){var P=Y-1>>>1,z=N[P];if(0<o(z,G))N[P]=G,N[Y]=z,Y=P;else break e}}function r(N){return N.length===0?null:N[0]}function n(N){if(N.length===0)return null;var G=N[0],Y=N.pop();if(Y!==G){N[0]=Y;e:for(var P=0,z=N.length,le=z>>>1;P<le;){var fe=2*(P+1)-1,Se=N[fe],ye=fe+1,ke=N[ye];if(0>o(Se,Y))ye<z&&0>o(ke,Se)?(N[P]=ke,N[ye]=Y,P=ye):(N[P]=Se,N[fe]=Y,P=fe);else if(ye<z&&0>o(ke,Y))N[P]=ke,N[ye]=Y,P=ye;else break e}}return G}function o(N,G){var Y=N.sortIndex-G.sortIndex;return Y!==0?Y:N.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();e.unstable_now=function(){return c.now()-h}}var p=[],d=[],v=1,_=null,S=3,x=!1,w=!1,b=!1,E=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(N){for(var G=r(d);G!==null;){if(G.callback===null)n(d);else if(G.startTime<=N)n(d),G.sortIndex=G.expirationTime,t(p,G);else break;G=r(d)}}function A(N){if(b=!1,W(N),!w)if(r(p)!==null)w=!0,D(K);else{var G=r(d);G!==null&&U(A,G.startTime-N)}}function K(N,G){w=!1,b&&(b=!1,M(ne),ne=-1),x=!0;var Y=S;try{for(W(G),_=r(p);_!==null&&(!(_.expirationTime>G)||N&&!V());){var P=_.callback;if(typeof P=="function"){_.callback=null,S=_.priorityLevel;var z=P(_.expirationTime<=G);G=e.unstable_now(),typeof z=="function"?_.callback=z:_===r(p)&&n(p),W(G)}else n(p);_=r(p)}if(_!==null)var le=!0;else{var fe=r(d);fe!==null&&U(A,fe.startTime-G),le=!1}return le}finally{_=null,S=Y,x=!1}}var X=!1,te=null,ne=-1,re=5,F=-1;function V(){return!(e.unstable_now()-F<re)}function Q(){if(te!==null){var N=e.unstable_now();F=N;var G=!0;try{G=te(!0,N)}finally{G?$():(X=!1,te=null)}}else X=!1}var $;if(typeof B=="function")$=function(){B(Q)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,O=H.port2;H.port1.onmessage=Q,$=function(){O.postMessage(null)}}else $=function(){E(Q,0)};function D(N){te=N,X||(X=!0,$())}function U(N,G){ne=E(function(){N(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_continueExecution=function(){w||x||(w=!0,D(K))},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_getFirstCallbackNode=function(){return r(p)},e.unstable_next=function(N){switch(S){case 1:case 2:case 3:var G=3;break;default:G=S}var Y=S;S=G;try{return N()}finally{S=Y}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(N,G){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var Y=S;S=N;try{return G()}finally{S=Y}},e.unstable_scheduleCallback=function(N,G,Y){var P=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?P+Y:P):Y=P,N){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=Y+z,N={id:v++,callback:G,priorityLevel:N,startTime:Y,expirationTime:z,sortIndex:-1},Y>P?(N.sortIndex=Y,t(d,N),r(p)===null&&N===r(d)&&(b?(M(ne),ne=-1):b=!0,U(A,Y-P))):(N.sortIndex=z,t(p,N),w||x||(w=!0,D(K))),N},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(N){var G=S;return function(){var Y=S;S=G;try{return N.apply(this,arguments)}finally{S=Y}}}})(ru)),ru}var em;function Qy(){return em||(em=1,tu.exports=qy()),tu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tm;function Yy(){if(tm)return Bt;tm=1;var e=Xa(),t=Qy();function r(i){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+i,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,o={};function l(i,s){c(i,s),c(i+"Capture",s)}function c(i,s){for(o[i]=s,i=0;i<s.length;i++)n.add(s[i])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},_={};function S(i){return p.call(_,i)?!0:p.call(v,i)?!1:d.test(i)?_[i]=!0:(v[i]=!0,!1)}function x(i,s,a,u){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return u?!1:a!==null?!a.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function w(i,s,a,u){if(s===null||typeof s>"u"||x(i,s,a,u))return!0;if(u)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function b(i,s,a,u,f,m,y){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=u,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=i,this.type=s,this.sanitizeURL=m,this.removeEmptyString=y}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){E[i]=new b(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var s=i[0];E[s]=new b(s,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){E[i]=new b(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){E[i]=new b(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){E[i]=new b(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){E[i]=new b(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){E[i]=new b(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){E[i]=new b(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){E[i]=new b(i,5,!1,i.toLowerCase(),null,!1,!1)});var M=/[\-:]([a-z])/g;function B(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var s=i.replace(M,B);E[s]=new b(s,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var s=i.replace(M,B);E[s]=new b(s,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var s=i.replace(M,B);E[s]=new b(s,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){E[i]=new b(i,1,!1,i.toLowerCase(),null,!1,!1)}),E.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){E[i]=new b(i,1,!1,i.toLowerCase(),null,!0,!0)});function W(i,s,a,u){var f=E.hasOwnProperty(s)?E[s]:null;(f!==null?f.type!==0:u||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(w(s,a,f,u)&&(a=null),u||f===null?S(s)&&(a===null?i.removeAttribute(s):i.setAttribute(s,""+a)):f.mustUseProperty?i[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,u=f.attributeNamespace,a===null?i.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,u?i.setAttributeNS(u,s,a):i.setAttribute(s,a))))}var A=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=Symbol.for("react.element"),X=Symbol.for("react.portal"),te=Symbol.for("react.fragment"),ne=Symbol.for("react.strict_mode"),re=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),V=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),U=Symbol.for("react.offscreen"),N=Symbol.iterator;function G(i){return i===null||typeof i!="object"?null:(i=N&&i[N]||i["@@iterator"],typeof i=="function"?i:null)}var Y=Object.assign,P;function z(i){if(P===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);P=s&&s[1]||""}return`
`+P+i}var le=!1;function fe(i,s){if(!i||le)return"";le=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(I){var u=I}Reflect.construct(i,[],s)}else{try{s.call()}catch(I){u=I}i.call(s.prototype)}else{try{throw Error()}catch(I){u=I}i()}}catch(I){if(I&&u&&typeof I.stack=="string"){for(var f=I.stack.split(`
`),m=u.stack.split(`
`),y=f.length-1,k=m.length-1;1<=y&&0<=k&&f[y]!==m[k];)k--;for(;1<=y&&0<=k;y--,k--)if(f[y]!==m[k]){if(y!==1||k!==1)do if(y--,k--,0>k||f[y]!==m[k]){var R=`
`+f[y].replace(" at new "," at ");return i.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",i.displayName)),R}while(1<=y&&0<=k);break}}}finally{le=!1,Error.prepareStackTrace=a}return(i=i?i.displayName||i.name:"")?z(i):""}function Se(i){switch(i.tag){case 5:return z(i.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return i=fe(i.type,!1),i;case 11:return i=fe(i.type.render,!1),i;case 1:return i=fe(i.type,!0),i;default:return""}}function ye(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case te:return"Fragment";case X:return"Portal";case re:return"Profiler";case ne:return"StrictMode";case $:return"Suspense";case H:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case V:return(i.displayName||"Context")+".Consumer";case F:return(i._context.displayName||"Context")+".Provider";case Q:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case O:return s=i.displayName||null,s!==null?s:ye(i.type)||"Memo";case D:s=i._payload,i=i._init;try{return ye(i(s))}catch{}}return null}function ke(i){var s=i.type;switch(i.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=s.render,i=i.displayName||i.name||"",s.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ye(s);case 8:return s===ne?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Pe(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Re(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function at(i){var s=Re(i)?"checked":"value",a=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),u=""+i[s];if(!i.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,m=a.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return f.call(this)},set:function(y){u=""+y,m.call(this,y)}}),Object.defineProperty(i,s,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(y){u=""+y},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function gr(i){i._valueTracker||(i._valueTracker=at(i))}function ar(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var a=s.getValue(),u="";return i&&(u=Re(i)?i.checked?"true":"false":i.value),i=u,i!==a?(s.setValue(i),!0):!1}function Ee(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function wi(i,s){var a=s.checked;return Y({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??i._wrapperState.initialChecked})}function td(i,s){var a=s.defaultValue==null?"":s.defaultValue,u=s.checked!=null?s.checked:s.defaultChecked;a=Pe(s.value!=null?s.value:a),i._wrapperState={initialChecked:u,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function rd(i,s){s=s.checked,s!=null&&W(i,"checked",s,!1)}function ol(i,s){rd(i,s);var a=Pe(s.value),u=s.type;if(a!=null)u==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+a):i.value!==""+a&&(i.value=""+a);else if(u==="submit"||u==="reset"){i.removeAttribute("value");return}s.hasOwnProperty("value")?al(i,s.type,a):s.hasOwnProperty("defaultValue")&&al(i,s.type,Pe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(i.defaultChecked=!!s.defaultChecked)}function id(i,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var u=s.type;if(!(u!=="submit"&&u!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+i._wrapperState.initialValue,a||s===i.value||(i.value=s),i.defaultValue=s}a=i.name,a!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,a!==""&&(i.name=a)}function al(i,s,a){(s!=="number"||Ee(i.ownerDocument)!==i)&&(a==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+a&&(i.defaultValue=""+a))}var js=Array.isArray;function Yi(i,s,a,u){if(i=i.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<i.length;a++)f=s.hasOwnProperty("$"+i[a].value),i[a].selected!==f&&(i[a].selected=f),f&&u&&(i[a].defaultSelected=!0)}else{for(a=""+Pe(a),s=null,f=0;f<i.length;f++){if(i[f].value===a){i[f].selected=!0,u&&(i[f].defaultSelected=!0);return}s!==null||i[f].disabled||(s=i[f])}s!==null&&(s.selected=!0)}}function ll(i,s){if(s.dangerouslySetInnerHTML!=null)throw Error(r(91));return Y({},s,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function sd(i,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(r(92));if(js(a)){if(1<a.length)throw Error(r(93));a=a[0]}s=a}s==null&&(s=""),a=s}i._wrapperState={initialValue:Pe(a)}}function nd(i,s){var a=Pe(s.value),u=Pe(s.defaultValue);a!=null&&(a=""+a,a!==i.value&&(i.value=a),s.defaultValue==null&&i.defaultValue!==a&&(i.defaultValue=a)),u!=null&&(i.defaultValue=""+u)}function od(i){var s=i.textContent;s===i._wrapperState.initialValue&&s!==""&&s!==null&&(i.value=s)}function ad(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cl(i,s){return i==null||i==="http://www.w3.org/1999/xhtml"?ad(s):i==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var oo,ld=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,u,f){MSApp.execUnsafeLocalFunction(function(){return i(s,a,u,f)})}:i})(function(i,s){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=s;else{for(oo=oo||document.createElement("div"),oo.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=oo.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;s.firstChild;)i.appendChild(s.firstChild)}});function Bs(i,s){if(s){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=s;return}}i.textContent=s}var Is={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qv=["Webkit","ms","Moz","O"];Object.keys(Is).forEach(function(i){Qv.forEach(function(s){s=s+i.charAt(0).toUpperCase()+i.substring(1),Is[s]=Is[i]})});function cd(i,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Is.hasOwnProperty(i)&&Is[i]?(""+s).trim():s+"px"}function ud(i,s){i=i.style;for(var a in s)if(s.hasOwnProperty(a)){var u=a.indexOf("--")===0,f=cd(a,s[a],u);a==="float"&&(a="cssFloat"),u?i.setProperty(a,f):i[a]=f}}var Yv=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ul(i,s){if(s){if(Yv[i]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(r(137,i));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(r(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(r(61))}if(s.style!=null&&typeof s.style!="object")throw Error(r(62))}}function hl(i,s){if(i.indexOf("-")===-1)return typeof s.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dl=null;function fl(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var pl=null,Gi=null,Xi=null;function hd(i){if(i=on(i)){if(typeof pl!="function")throw Error(r(280));var s=i.stateNode;s&&(s=Lo(s),pl(i.stateNode,i.type,s))}}function dd(i){Gi?Xi?Xi.push(i):Xi=[i]:Gi=i}function fd(){if(Gi){var i=Gi,s=Xi;if(Xi=Gi=null,hd(i),s)for(i=0;i<s.length;i++)hd(s[i])}}function pd(i,s){return i(s)}function md(){}var ml=!1;function gd(i,s,a){if(ml)return i(s,a);ml=!0;try{return pd(i,s,a)}finally{ml=!1,(Gi!==null||Xi!==null)&&(md(),fd())}}function As(i,s){var a=i.stateNode;if(a===null)return null;var u=Lo(a);if(u===null)return null;a=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var gl=!1;if(h)try{var Fs={};Object.defineProperty(Fs,"passive",{get:function(){gl=!0}}),window.addEventListener("test",Fs,Fs),window.removeEventListener("test",Fs,Fs)}catch{gl=!1}function Gv(i,s,a,u,f,m,y,k,R){var I=Array.prototype.slice.call(arguments,3);try{s.apply(a,I)}catch(Z){this.onError(Z)}}var zs=!1,ao=null,lo=!1,_l=null,Xv={onError:function(i){zs=!0,ao=i}};function Jv(i,s,a,u,f,m,y,k,R){zs=!1,ao=null,Gv.apply(Xv,arguments)}function Zv(i,s,a,u,f,m,y,k,R){if(Jv.apply(this,arguments),zs){if(zs){var I=ao;zs=!1,ao=null}else throw Error(r(198));lo||(lo=!0,_l=I)}}function xi(i){var s=i,a=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(a=s.return),i=s.return;while(i)}return s.tag===3?a:null}function _d(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function vd(i){if(xi(i)!==i)throw Error(r(188))}function e0(i){var s=i.alternate;if(!s){if(s=xi(i),s===null)throw Error(r(188));return s!==i?null:i}for(var a=i,u=s;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){a=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return vd(f),i;if(m===u)return vd(f),s;m=m.sibling}throw Error(r(188))}if(a.return!==u.return)a=f,u=m;else{for(var y=!1,k=f.child;k;){if(k===a){y=!0,a=f,u=m;break}if(k===u){y=!0,u=f,a=m;break}k=k.sibling}if(!y){for(k=m.child;k;){if(k===a){y=!0,a=m,u=f;break}if(k===u){y=!0,u=m,a=f;break}k=k.sibling}if(!y)throw Error(r(189))}}if(a.alternate!==u)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?i:s}function yd(i){return i=e0(i),i!==null?Sd(i):null}function Sd(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var s=Sd(i);if(s!==null)return s;i=i.sibling}return null}var wd=t.unstable_scheduleCallback,xd=t.unstable_cancelCallback,t0=t.unstable_shouldYield,r0=t.unstable_requestPaint,Ye=t.unstable_now,i0=t.unstable_getCurrentPriorityLevel,vl=t.unstable_ImmediatePriority,bd=t.unstable_UserBlockingPriority,co=t.unstable_NormalPriority,s0=t.unstable_LowPriority,Cd=t.unstable_IdlePriority,uo=null,_r=null;function n0(i){if(_r&&typeof _r.onCommitFiberRoot=="function")try{_r.onCommitFiberRoot(uo,i,void 0,(i.current.flags&128)===128)}catch{}}var lr=Math.clz32?Math.clz32:l0,o0=Math.log,a0=Math.LN2;function l0(i){return i>>>=0,i===0?32:31-(o0(i)/a0|0)|0}var ho=64,fo=4194304;function Hs(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function po(i,s){var a=i.pendingLanes;if(a===0)return 0;var u=0,f=i.suspendedLanes,m=i.pingedLanes,y=a&268435455;if(y!==0){var k=y&~f;k!==0?u=Hs(k):(m&=y,m!==0&&(u=Hs(m)))}else y=a&~f,y!==0?u=Hs(y):m!==0&&(u=Hs(m));if(u===0)return 0;if(s!==0&&s!==u&&(s&f)===0&&(f=u&-u,m=s&-s,f>=m||f===16&&(m&4194240)!==0))return s;if((u&4)!==0&&(u|=a&16),s=i.entangledLanes,s!==0)for(i=i.entanglements,s&=u;0<s;)a=31-lr(s),f=1<<a,u|=i[a],s&=~f;return u}function c0(i,s){switch(i){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function u0(i,s){for(var a=i.suspendedLanes,u=i.pingedLanes,f=i.expirationTimes,m=i.pendingLanes;0<m;){var y=31-lr(m),k=1<<y,R=f[y];R===-1?((k&a)===0||(k&u)!==0)&&(f[y]=c0(k,s)):R<=s&&(i.expiredLanes|=k),m&=~k}}function yl(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function kd(){var i=ho;return ho<<=1,(ho&4194240)===0&&(ho=64),i}function Sl(i){for(var s=[],a=0;31>a;a++)s.push(i);return s}function $s(i,s,a){i.pendingLanes|=s,s!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,s=31-lr(s),i[s]=a}function h0(i,s){var a=i.pendingLanes&~s;i.pendingLanes=s,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=s,i.mutableReadLanes&=s,i.entangledLanes&=s,s=i.entanglements;var u=i.eventTimes;for(i=i.expirationTimes;0<a;){var f=31-lr(a),m=1<<f;s[f]=0,u[f]=-1,i[f]=-1,a&=~m}}function wl(i,s){var a=i.entangledLanes|=s;for(i=i.entanglements;a;){var u=31-lr(a),f=1<<u;f&s|i[u]&s&&(i[u]|=s),a&=~f}}var Me=0;function Ed(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Pd,xl,Rd,Nd,Ld,bl=!1,mo=[],qr=null,Qr=null,Yr=null,Ws=new Map,Us=new Map,Gr=[],d0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dd(i,s){switch(i){case"focusin":case"focusout":qr=null;break;case"dragenter":case"dragleave":Qr=null;break;case"mouseover":case"mouseout":Yr=null;break;case"pointerover":case"pointerout":Ws.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Us.delete(s.pointerId)}}function Ks(i,s,a,u,f,m){return i===null||i.nativeEvent!==m?(i={blockedOn:s,domEventName:a,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},s!==null&&(s=on(s),s!==null&&xl(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),i)}function f0(i,s,a,u,f){switch(s){case"focusin":return qr=Ks(qr,i,s,a,u,f),!0;case"dragenter":return Qr=Ks(Qr,i,s,a,u,f),!0;case"mouseover":return Yr=Ks(Yr,i,s,a,u,f),!0;case"pointerover":var m=f.pointerId;return Ws.set(m,Ks(Ws.get(m)||null,i,s,a,u,f)),!0;case"gotpointercapture":return m=f.pointerId,Us.set(m,Ks(Us.get(m)||null,i,s,a,u,f)),!0}return!1}function Md(i){var s=bi(i.target);if(s!==null){var a=xi(s);if(a!==null){if(s=a.tag,s===13){if(s=_d(a),s!==null){i.blockedOn=s,Ld(i.priority,function(){Rd(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function go(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var a=kl(i.domEventName,i.eventSystemFlags,s[0],i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);dl=u,a.target.dispatchEvent(u),dl=null}else return s=on(a),s!==null&&xl(s),i.blockedOn=a,!1;s.shift()}return!0}function Od(i,s,a){go(i)&&a.delete(s)}function p0(){bl=!1,qr!==null&&go(qr)&&(qr=null),Qr!==null&&go(Qr)&&(Qr=null),Yr!==null&&go(Yr)&&(Yr=null),Ws.forEach(Od),Us.forEach(Od)}function Vs(i,s){i.blockedOn===s&&(i.blockedOn=null,bl||(bl=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,p0)))}function qs(i){function s(f){return Vs(f,i)}if(0<mo.length){Vs(mo[0],i);for(var a=1;a<mo.length;a++){var u=mo[a];u.blockedOn===i&&(u.blockedOn=null)}}for(qr!==null&&Vs(qr,i),Qr!==null&&Vs(Qr,i),Yr!==null&&Vs(Yr,i),Ws.forEach(s),Us.forEach(s),a=0;a<Gr.length;a++)u=Gr[a],u.blockedOn===i&&(u.blockedOn=null);for(;0<Gr.length&&(a=Gr[0],a.blockedOn===null);)Md(a),a.blockedOn===null&&Gr.shift()}var Ji=A.ReactCurrentBatchConfig,_o=!0;function m0(i,s,a,u){var f=Me,m=Ji.transition;Ji.transition=null;try{Me=1,Cl(i,s,a,u)}finally{Me=f,Ji.transition=m}}function g0(i,s,a,u){var f=Me,m=Ji.transition;Ji.transition=null;try{Me=4,Cl(i,s,a,u)}finally{Me=f,Ji.transition=m}}function Cl(i,s,a,u){if(_o){var f=kl(i,s,a,u);if(f===null)$l(i,s,u,vo,a),Dd(i,u);else if(f0(f,i,s,a,u))u.stopPropagation();else if(Dd(i,u),s&4&&-1<d0.indexOf(i)){for(;f!==null;){var m=on(f);if(m!==null&&Pd(m),m=kl(i,s,a,u),m===null&&$l(i,s,u,vo,a),m===f)break;f=m}f!==null&&u.stopPropagation()}else $l(i,s,u,null,a)}}var vo=null;function kl(i,s,a,u){if(vo=null,i=fl(u),i=bi(i),i!==null)if(s=xi(i),s===null)i=null;else if(a=s.tag,a===13){if(i=_d(s),i!==null)return i;i=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null);return vo=i,null}function Td(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(i0()){case vl:return 1;case bd:return 4;case co:case s0:return 16;case Cd:return 536870912;default:return 16}default:return 16}}var Xr=null,El=null,yo=null;function jd(){if(yo)return yo;var i,s=El,a=s.length,u,f="value"in Xr?Xr.value:Xr.textContent,m=f.length;for(i=0;i<a&&s[i]===f[i];i++);var y=a-i;for(u=1;u<=y&&s[a-u]===f[m-u];u++);return yo=f.slice(i,1<u?1-u:void 0)}function So(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function wo(){return!0}function Bd(){return!1}function At(i){function s(a,u,f,m,y){this._reactName=a,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=y,this.currentTarget=null;for(var k in i)i.hasOwnProperty(k)&&(a=i[k],this[k]=a?a(m):m[k]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?wo:Bd,this.isPropagationStopped=Bd,this}return Y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=wo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=wo)},persist:function(){},isPersistent:wo}),s}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pl=At(Zi),Qs=Y({},Zi,{view:0,detail:0}),_0=At(Qs),Rl,Nl,Ys,xo=Y({},Qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dl,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ys&&(Ys&&i.type==="mousemove"?(Rl=i.screenX-Ys.screenX,Nl=i.screenY-Ys.screenY):Nl=Rl=0,Ys=i),Rl)},movementY:function(i){return"movementY"in i?i.movementY:Nl}}),Id=At(xo),v0=Y({},xo,{dataTransfer:0}),y0=At(v0),S0=Y({},Qs,{relatedTarget:0}),Ll=At(S0),w0=Y({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),x0=At(w0),b0=Y({},Zi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),C0=At(b0),k0=Y({},Zi,{data:0}),Ad=At(k0),E0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},P0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},R0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function N0(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=R0[i])?!!s[i]:!1}function Dl(){return N0}var L0=Y({},Qs,{key:function(i){if(i.key){var s=E0[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=So(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?P0[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dl,charCode:function(i){return i.type==="keypress"?So(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?So(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),D0=At(L0),M0=Y({},xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fd=At(M0),O0=Y({},Qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dl}),T0=At(O0),j0=Y({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),B0=At(j0),I0=Y({},xo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),A0=At(I0),F0=[9,13,27,32],Ml=h&&"CompositionEvent"in window,Gs=null;h&&"documentMode"in document&&(Gs=document.documentMode);var z0=h&&"TextEvent"in window&&!Gs,zd=h&&(!Ml||Gs&&8<Gs&&11>=Gs),Hd=" ",$d=!1;function Wd(i,s){switch(i){case"keyup":return F0.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ud(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var es=!1;function H0(i,s){switch(i){case"compositionend":return Ud(s);case"keypress":return s.which!==32?null:($d=!0,Hd);case"textInput":return i=s.data,i===Hd&&$d?null:i;default:return null}}function $0(i,s){if(es)return i==="compositionend"||!Ml&&Wd(i,s)?(i=jd(),yo=El=Xr=null,es=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return zd&&s.locale!=="ko"?null:s.data;default:return null}}var W0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kd(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!W0[i.type]:s==="textarea"}function Vd(i,s,a,u){dd(u),s=Po(s,"onChange"),0<s.length&&(a=new Pl("onChange","change",null,a,u),i.push({event:a,listeners:s}))}var Xs=null,Js=null;function U0(i){hf(i,0)}function bo(i){var s=ns(i);if(ar(s))return i}function K0(i,s){if(i==="change")return s}var qd=!1;if(h){var Ol;if(h){var Tl="oninput"in document;if(!Tl){var Qd=document.createElement("div");Qd.setAttribute("oninput","return;"),Tl=typeof Qd.oninput=="function"}Ol=Tl}else Ol=!1;qd=Ol&&(!document.documentMode||9<document.documentMode)}function Yd(){Xs&&(Xs.detachEvent("onpropertychange",Gd),Js=Xs=null)}function Gd(i){if(i.propertyName==="value"&&bo(Js)){var s=[];Vd(s,Js,i,fl(i)),gd(U0,s)}}function V0(i,s,a){i==="focusin"?(Yd(),Xs=s,Js=a,Xs.attachEvent("onpropertychange",Gd)):i==="focusout"&&Yd()}function q0(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return bo(Js)}function Q0(i,s){if(i==="click")return bo(s)}function Y0(i,s){if(i==="input"||i==="change")return bo(s)}function G0(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var cr=typeof Object.is=="function"?Object.is:G0;function Zs(i,s){if(cr(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var a=Object.keys(i),u=Object.keys(s);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var f=a[u];if(!p.call(s,f)||!cr(i[f],s[f]))return!1}return!0}function Xd(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Jd(i,s){var a=Xd(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=s&&u>=s)return{node:a,offset:s-i};i=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Xd(a)}}function Zd(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Zd(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function ef(){for(var i=window,s=Ee();s instanceof i.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)i=s.contentWindow;else break;s=Ee(i.document)}return s}function jl(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}function X0(i){var s=ef(),a=i.focusedElem,u=i.selectionRange;if(s!==a&&a&&a.ownerDocument&&Zd(a.ownerDocument.documentElement,a)){if(u!==null&&jl(a)){if(s=u.start,i=u.end,i===void 0&&(i=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(i,a.value.length);else if(i=(s=a.ownerDocument||document)&&s.defaultView||window,i.getSelection){i=i.getSelection();var f=a.textContent.length,m=Math.min(u.start,f);u=u.end===void 0?m:Math.min(u.end,f),!i.extend&&m>u&&(f=u,u=m,m=f),f=Jd(a,m);var y=Jd(a,u);f&&y&&(i.rangeCount!==1||i.anchorNode!==f.node||i.anchorOffset!==f.offset||i.focusNode!==y.node||i.focusOffset!==y.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),i.removeAllRanges(),m>u?(i.addRange(s),i.extend(y.node,y.offset)):(s.setEnd(y.node,y.offset),i.addRange(s)))}}for(s=[],i=a;i=i.parentNode;)i.nodeType===1&&s.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)i=s[a],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var J0=h&&"documentMode"in document&&11>=document.documentMode,ts=null,Bl=null,en=null,Il=!1;function tf(i,s,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Il||ts==null||ts!==Ee(u)||(u=ts,"selectionStart"in u&&jl(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),en&&Zs(en,u)||(en=u,u=Po(Bl,"onSelect"),0<u.length&&(s=new Pl("onSelect","select",null,s,a),i.push({event:s,listeners:u}),s.target=ts)))}function Co(i,s){var a={};return a[i.toLowerCase()]=s.toLowerCase(),a["Webkit"+i]="webkit"+s,a["Moz"+i]="moz"+s,a}var rs={animationend:Co("Animation","AnimationEnd"),animationiteration:Co("Animation","AnimationIteration"),animationstart:Co("Animation","AnimationStart"),transitionend:Co("Transition","TransitionEnd")},Al={},rf={};h&&(rf=document.createElement("div").style,"AnimationEvent"in window||(delete rs.animationend.animation,delete rs.animationiteration.animation,delete rs.animationstart.animation),"TransitionEvent"in window||delete rs.transitionend.transition);function ko(i){if(Al[i])return Al[i];if(!rs[i])return i;var s=rs[i],a;for(a in s)if(s.hasOwnProperty(a)&&a in rf)return Al[i]=s[a];return i}var sf=ko("animationend"),nf=ko("animationiteration"),of=ko("animationstart"),af=ko("transitionend"),lf=new Map,cf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jr(i,s){lf.set(i,s),l(s,[i])}for(var Fl=0;Fl<cf.length;Fl++){var zl=cf[Fl],Z0=zl.toLowerCase(),ey=zl[0].toUpperCase()+zl.slice(1);Jr(Z0,"on"+ey)}Jr(sf,"onAnimationEnd"),Jr(nf,"onAnimationIteration"),Jr(of,"onAnimationStart"),Jr("dblclick","onDoubleClick"),Jr("focusin","onFocus"),Jr("focusout","onBlur"),Jr(af,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ty=new Set("cancel close invalid load scroll toggle".split(" ").concat(tn));function uf(i,s,a){var u=i.type||"unknown-event";i.currentTarget=a,Zv(u,s,void 0,i),i.currentTarget=null}function hf(i,s){s=(s&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],f=u.event;u=u.listeners;e:{var m=void 0;if(s)for(var y=u.length-1;0<=y;y--){var k=u[y],R=k.instance,I=k.currentTarget;if(k=k.listener,R!==m&&f.isPropagationStopped())break e;uf(f,k,I),m=R}else for(y=0;y<u.length;y++){if(k=u[y],R=k.instance,I=k.currentTarget,k=k.listener,R!==m&&f.isPropagationStopped())break e;uf(f,k,I),m=R}}}if(lo)throw i=_l,lo=!1,_l=null,i}function je(i,s){var a=s[Ql];a===void 0&&(a=s[Ql]=new Set);var u=i+"__bubble";a.has(u)||(df(s,i,2,!1),a.add(u))}function Hl(i,s,a){var u=0;s&&(u|=4),df(a,i,u,s)}var Eo="_reactListening"+Math.random().toString(36).slice(2);function rn(i){if(!i[Eo]){i[Eo]=!0,n.forEach(function(a){a!=="selectionchange"&&(ty.has(a)||Hl(a,!1,i),Hl(a,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Eo]||(s[Eo]=!0,Hl("selectionchange",!1,s))}}function df(i,s,a,u){switch(Td(s)){case 1:var f=m0;break;case 4:f=g0;break;default:f=Cl}a=f.bind(null,s,a,i),f=void 0,!gl||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?i.addEventListener(s,a,{capture:!0,passive:f}):i.addEventListener(s,a,!0):f!==void 0?i.addEventListener(s,a,{passive:f}):i.addEventListener(s,a,!1)}function $l(i,s,a,u,f){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var y=u.tag;if(y===3||y===4){var k=u.stateNode.containerInfo;if(k===f||k.nodeType===8&&k.parentNode===f)break;if(y===4)for(y=u.return;y!==null;){var R=y.tag;if((R===3||R===4)&&(R=y.stateNode.containerInfo,R===f||R.nodeType===8&&R.parentNode===f))return;y=y.return}for(;k!==null;){if(y=bi(k),y===null)return;if(R=y.tag,R===5||R===6){u=m=y;continue e}k=k.parentNode}}u=u.return}gd(function(){var I=m,Z=fl(a),ee=[];e:{var J=lf.get(i);if(J!==void 0){var ae=Pl,ue=i;switch(i){case"keypress":if(So(a)===0)break e;case"keydown":case"keyup":ae=D0;break;case"focusin":ue="focus",ae=Ll;break;case"focusout":ue="blur",ae=Ll;break;case"beforeblur":case"afterblur":ae=Ll;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Id;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=y0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=T0;break;case sf:case nf:case of:ae=x0;break;case af:ae=B0;break;case"scroll":ae=_0;break;case"wheel":ae=A0;break;case"copy":case"cut":case"paste":ae=C0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Fd}var he=(s&4)!==0,Ge=!he&&i==="scroll",T=he?J!==null?J+"Capture":null:J;he=[];for(var L=I,j;L!==null;){j=L;var ie=j.stateNode;if(j.tag===5&&ie!==null&&(j=ie,T!==null&&(ie=As(L,T),ie!=null&&he.push(sn(L,ie,j)))),Ge)break;L=L.return}0<he.length&&(J=new ae(J,ue,null,a,Z),ee.push({event:J,listeners:he}))}}if((s&7)===0){e:{if(J=i==="mouseover"||i==="pointerover",ae=i==="mouseout"||i==="pointerout",J&&a!==dl&&(ue=a.relatedTarget||a.fromElement)&&(bi(ue)||ue[Lr]))break e;if((ae||J)&&(J=Z.window===Z?Z:(J=Z.ownerDocument)?J.defaultView||J.parentWindow:window,ae?(ue=a.relatedTarget||a.toElement,ae=I,ue=ue?bi(ue):null,ue!==null&&(Ge=xi(ue),ue!==Ge||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(ae=null,ue=I),ae!==ue)){if(he=Id,ie="onMouseLeave",T="onMouseEnter",L="mouse",(i==="pointerout"||i==="pointerover")&&(he=Fd,ie="onPointerLeave",T="onPointerEnter",L="pointer"),Ge=ae==null?J:ns(ae),j=ue==null?J:ns(ue),J=new he(ie,L+"leave",ae,a,Z),J.target=Ge,J.relatedTarget=j,ie=null,bi(Z)===I&&(he=new he(T,L+"enter",ue,a,Z),he.target=j,he.relatedTarget=Ge,ie=he),Ge=ie,ae&&ue)t:{for(he=ae,T=ue,L=0,j=he;j;j=is(j))L++;for(j=0,ie=T;ie;ie=is(ie))j++;for(;0<L-j;)he=is(he),L--;for(;0<j-L;)T=is(T),j--;for(;L--;){if(he===T||T!==null&&he===T.alternate)break t;he=is(he),T=is(T)}he=null}else he=null;ae!==null&&ff(ee,J,ae,he,!1),ue!==null&&Ge!==null&&ff(ee,Ge,ue,he,!0)}}e:{if(J=I?ns(I):window,ae=J.nodeName&&J.nodeName.toLowerCase(),ae==="select"||ae==="input"&&J.type==="file")var de=K0;else if(Kd(J))if(qd)de=Y0;else{de=q0;var pe=V0}else(ae=J.nodeName)&&ae.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(de=Q0);if(de&&(de=de(i,I))){Vd(ee,de,a,Z);break e}pe&&pe(i,J,I),i==="focusout"&&(pe=J._wrapperState)&&pe.controlled&&J.type==="number"&&al(J,"number",J.value)}switch(pe=I?ns(I):window,i){case"focusin":(Kd(pe)||pe.contentEditable==="true")&&(ts=pe,Bl=I,en=null);break;case"focusout":en=Bl=ts=null;break;case"mousedown":Il=!0;break;case"contextmenu":case"mouseup":case"dragend":Il=!1,tf(ee,a,Z);break;case"selectionchange":if(J0)break;case"keydown":case"keyup":tf(ee,a,Z)}var me;if(Ml)e:{switch(i){case"compositionstart":var ge="onCompositionStart";break e;case"compositionend":ge="onCompositionEnd";break e;case"compositionupdate":ge="onCompositionUpdate";break e}ge=void 0}else es?Wd(i,a)&&(ge="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(ge="onCompositionStart");ge&&(zd&&a.locale!=="ko"&&(es||ge!=="onCompositionStart"?ge==="onCompositionEnd"&&es&&(me=jd()):(Xr=Z,El="value"in Xr?Xr.value:Xr.textContent,es=!0)),pe=Po(I,ge),0<pe.length&&(ge=new Ad(ge,i,null,a,Z),ee.push({event:ge,listeners:pe}),me?ge.data=me:(me=Ud(a),me!==null&&(ge.data=me)))),(me=z0?H0(i,a):$0(i,a))&&(I=Po(I,"onBeforeInput"),0<I.length&&(Z=new Ad("onBeforeInput","beforeinput",null,a,Z),ee.push({event:Z,listeners:I}),Z.data=me))}hf(ee,s)})}function sn(i,s,a){return{instance:i,listener:s,currentTarget:a}}function Po(i,s){for(var a=s+"Capture",u=[];i!==null;){var f=i,m=f.stateNode;f.tag===5&&m!==null&&(f=m,m=As(i,a),m!=null&&u.unshift(sn(i,m,f)),m=As(i,s),m!=null&&u.push(sn(i,m,f))),i=i.return}return u}function is(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function ff(i,s,a,u,f){for(var m=s._reactName,y=[];a!==null&&a!==u;){var k=a,R=k.alternate,I=k.stateNode;if(R!==null&&R===u)break;k.tag===5&&I!==null&&(k=I,f?(R=As(a,m),R!=null&&y.unshift(sn(a,R,k))):f||(R=As(a,m),R!=null&&y.push(sn(a,R,k)))),a=a.return}y.length!==0&&i.push({event:s,listeners:y})}var ry=/\r\n?/g,iy=/\u0000|\uFFFD/g;function pf(i){return(typeof i=="string"?i:""+i).replace(ry,`
`).replace(iy,"")}function Ro(i,s,a){if(s=pf(s),pf(i)!==s&&a)throw Error(r(425))}function No(){}var Wl=null,Ul=null;function Kl(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Vl=typeof setTimeout=="function"?setTimeout:void 0,sy=typeof clearTimeout=="function"?clearTimeout:void 0,mf=typeof Promise=="function"?Promise:void 0,ny=typeof queueMicrotask=="function"?queueMicrotask:typeof mf<"u"?function(i){return mf.resolve(null).then(i).catch(oy)}:Vl;function oy(i){setTimeout(function(){throw i})}function ql(i,s){var a=s,u=0;do{var f=a.nextSibling;if(i.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(u===0){i.removeChild(f),qs(s);return}u--}else a!=="$"&&a!=="$?"&&a!=="$!"||u++;a=f}while(a);qs(s)}function Zr(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return i}function gf(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return i;s--}else a==="/$"&&s++}i=i.previousSibling}return null}var ss=Math.random().toString(36).slice(2),vr="__reactFiber$"+ss,nn="__reactProps$"+ss,Lr="__reactContainer$"+ss,Ql="__reactEvents$"+ss,ay="__reactListeners$"+ss,ly="__reactHandles$"+ss;function bi(i){var s=i[vr];if(s)return s;for(var a=i.parentNode;a;){if(s=a[Lr]||a[vr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(i=gf(i);i!==null;){if(a=i[vr])return a;i=gf(i)}return s}i=a,a=i.parentNode}return null}function on(i){return i=i[vr]||i[Lr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ns(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(r(33))}function Lo(i){return i[nn]||null}var Yl=[],os=-1;function ei(i){return{current:i}}function Be(i){0>os||(i.current=Yl[os],Yl[os]=null,os--)}function Te(i,s){os++,Yl[os]=i.current,i.current=s}var ti={},yt=ei(ti),Dt=ei(!1),Ci=ti;function as(i,s){var a=i.type.contextTypes;if(!a)return ti;var u=i.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===s)return u.__reactInternalMemoizedMaskedChildContext;var f={},m;for(m in a)f[m]=s[m];return u&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=s,i.__reactInternalMemoizedMaskedChildContext=f),f}function Mt(i){return i=i.childContextTypes,i!=null}function Do(){Be(Dt),Be(yt)}function _f(i,s,a){if(yt.current!==ti)throw Error(r(168));Te(yt,s),Te(Dt,a)}function vf(i,s,a){var u=i.stateNode;if(s=s.childContextTypes,typeof u.getChildContext!="function")return a;u=u.getChildContext();for(var f in u)if(!(f in s))throw Error(r(108,ke(i)||"Unknown",f));return Y({},a,u)}function Mo(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ti,Ci=yt.current,Te(yt,i),Te(Dt,Dt.current),!0}function yf(i,s,a){var u=i.stateNode;if(!u)throw Error(r(169));a?(i=vf(i,s,Ci),u.__reactInternalMemoizedMergedChildContext=i,Be(Dt),Be(yt),Te(yt,i)):Be(Dt),Te(Dt,a)}var Dr=null,Oo=!1,Gl=!1;function Sf(i){Dr===null?Dr=[i]:Dr.push(i)}function cy(i){Oo=!0,Sf(i)}function ri(){if(!Gl&&Dr!==null){Gl=!0;var i=0,s=Me;try{var a=Dr;for(Me=1;i<a.length;i++){var u=a[i];do u=u(!0);while(u!==null)}Dr=null,Oo=!1}catch(f){throw Dr!==null&&(Dr=Dr.slice(i+1)),wd(vl,ri),f}finally{Me=s,Gl=!1}}return null}var ls=[],cs=0,To=null,jo=0,Qt=[],Yt=0,ki=null,Mr=1,Or="";function Ei(i,s){ls[cs++]=jo,ls[cs++]=To,To=i,jo=s}function wf(i,s,a){Qt[Yt++]=Mr,Qt[Yt++]=Or,Qt[Yt++]=ki,ki=i;var u=Mr;i=Or;var f=32-lr(u)-1;u&=~(1<<f),a+=1;var m=32-lr(s)+f;if(30<m){var y=f-f%5;m=(u&(1<<y)-1).toString(32),u>>=y,f-=y,Mr=1<<32-lr(s)+f|a<<f|u,Or=m+i}else Mr=1<<m|a<<f|u,Or=i}function Xl(i){i.return!==null&&(Ei(i,1),wf(i,1,0))}function Jl(i){for(;i===To;)To=ls[--cs],ls[cs]=null,jo=ls[--cs],ls[cs]=null;for(;i===ki;)ki=Qt[--Yt],Qt[Yt]=null,Or=Qt[--Yt],Qt[Yt]=null,Mr=Qt[--Yt],Qt[Yt]=null}var Ft=null,zt=null,Ae=!1,ur=null;function xf(i,s){var a=Zt(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=i,s=i.deletions,s===null?(i.deletions=[a],i.flags|=16):s.push(a)}function bf(i,s){switch(i.tag){case 5:var a=i.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(i.stateNode=s,Ft=i,zt=Zr(s.firstChild),!0):!1;case 6:return s=i.pendingProps===""||s.nodeType!==3?null:s,s!==null?(i.stateNode=s,Ft=i,zt=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=ki!==null?{id:Mr,overflow:Or}:null,i.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Zt(18,null,null,0),a.stateNode=s,a.return=i,i.child=a,Ft=i,zt=null,!0):!1;default:return!1}}function Zl(i){return(i.mode&1)!==0&&(i.flags&128)===0}function ec(i){if(Ae){var s=zt;if(s){var a=s;if(!bf(i,s)){if(Zl(i))throw Error(r(418));s=Zr(a.nextSibling);var u=Ft;s&&bf(i,s)?xf(u,a):(i.flags=i.flags&-4097|2,Ae=!1,Ft=i)}}else{if(Zl(i))throw Error(r(418));i.flags=i.flags&-4097|2,Ae=!1,Ft=i}}}function Cf(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Ft=i}function Bo(i){if(i!==Ft)return!1;if(!Ae)return Cf(i),Ae=!0,!1;var s;if((s=i.tag!==3)&&!(s=i.tag!==5)&&(s=i.type,s=s!=="head"&&s!=="body"&&!Kl(i.type,i.memoizedProps)),s&&(s=zt)){if(Zl(i))throw kf(),Error(r(418));for(;s;)xf(i,s),s=Zr(s.nextSibling)}if(Cf(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"){if(s===0){zt=Zr(i.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}i=i.nextSibling}zt=null}}else zt=Ft?Zr(i.stateNode.nextSibling):null;return!0}function kf(){for(var i=zt;i;)i=Zr(i.nextSibling)}function us(){zt=Ft=null,Ae=!1}function tc(i){ur===null?ur=[i]:ur.push(i)}var uy=A.ReactCurrentBatchConfig;function an(i,s,a){if(i=a.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(r(309));var u=a.stateNode}if(!u)throw Error(r(147,i));var f=u,m=""+i;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===m?s.ref:(s=function(y){var k=f.refs;y===null?delete k[m]:k[m]=y},s._stringRef=m,s)}if(typeof i!="string")throw Error(r(284));if(!a._owner)throw Error(r(290,i))}return i}function Io(i,s){throw i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i))}function Ef(i){var s=i._init;return s(i._payload)}function Pf(i){function s(T,L){if(i){var j=T.deletions;j===null?(T.deletions=[L],T.flags|=16):j.push(L)}}function a(T,L){if(!i)return null;for(;L!==null;)s(T,L),L=L.sibling;return null}function u(T,L){for(T=new Map;L!==null;)L.key!==null?T.set(L.key,L):T.set(L.index,L),L=L.sibling;return T}function f(T,L){return T=ui(T,L),T.index=0,T.sibling=null,T}function m(T,L,j){return T.index=j,i?(j=T.alternate,j!==null?(j=j.index,j<L?(T.flags|=2,L):j):(T.flags|=2,L)):(T.flags|=1048576,L)}function y(T){return i&&T.alternate===null&&(T.flags|=2),T}function k(T,L,j,ie){return L===null||L.tag!==6?(L=Vc(j,T.mode,ie),L.return=T,L):(L=f(L,j),L.return=T,L)}function R(T,L,j,ie){var de=j.type;return de===te?Z(T,L,j.props.children,ie,j.key):L!==null&&(L.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===D&&Ef(de)===L.type)?(ie=f(L,j.props),ie.ref=an(T,L,j),ie.return=T,ie):(ie=aa(j.type,j.key,j.props,null,T.mode,ie),ie.ref=an(T,L,j),ie.return=T,ie)}function I(T,L,j,ie){return L===null||L.tag!==4||L.stateNode.containerInfo!==j.containerInfo||L.stateNode.implementation!==j.implementation?(L=qc(j,T.mode,ie),L.return=T,L):(L=f(L,j.children||[]),L.return=T,L)}function Z(T,L,j,ie,de){return L===null||L.tag!==7?(L=Ti(j,T.mode,ie,de),L.return=T,L):(L=f(L,j),L.return=T,L)}function ee(T,L,j){if(typeof L=="string"&&L!==""||typeof L=="number")return L=Vc(""+L,T.mode,j),L.return=T,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case K:return j=aa(L.type,L.key,L.props,null,T.mode,j),j.ref=an(T,null,L),j.return=T,j;case X:return L=qc(L,T.mode,j),L.return=T,L;case D:var ie=L._init;return ee(T,ie(L._payload),j)}if(js(L)||G(L))return L=Ti(L,T.mode,j,null),L.return=T,L;Io(T,L)}return null}function J(T,L,j,ie){var de=L!==null?L.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return de!==null?null:k(T,L,""+j,ie);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case K:return j.key===de?R(T,L,j,ie):null;case X:return j.key===de?I(T,L,j,ie):null;case D:return de=j._init,J(T,L,de(j._payload),ie)}if(js(j)||G(j))return de!==null?null:Z(T,L,j,ie,null);Io(T,j)}return null}function ae(T,L,j,ie,de){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return T=T.get(j)||null,k(L,T,""+ie,de);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case K:return T=T.get(ie.key===null?j:ie.key)||null,R(L,T,ie,de);case X:return T=T.get(ie.key===null?j:ie.key)||null,I(L,T,ie,de);case D:var pe=ie._init;return ae(T,L,j,pe(ie._payload),de)}if(js(ie)||G(ie))return T=T.get(j)||null,Z(L,T,ie,de,null);Io(L,ie)}return null}function ue(T,L,j,ie){for(var de=null,pe=null,me=L,ge=L=0,ut=null;me!==null&&ge<j.length;ge++){me.index>ge?(ut=me,me=null):ut=me.sibling;var De=J(T,me,j[ge],ie);if(De===null){me===null&&(me=ut);break}i&&me&&De.alternate===null&&s(T,me),L=m(De,L,ge),pe===null?de=De:pe.sibling=De,pe=De,me=ut}if(ge===j.length)return a(T,me),Ae&&Ei(T,ge),de;if(me===null){for(;ge<j.length;ge++)me=ee(T,j[ge],ie),me!==null&&(L=m(me,L,ge),pe===null?de=me:pe.sibling=me,pe=me);return Ae&&Ei(T,ge),de}for(me=u(T,me);ge<j.length;ge++)ut=ae(me,T,ge,j[ge],ie),ut!==null&&(i&&ut.alternate!==null&&me.delete(ut.key===null?ge:ut.key),L=m(ut,L,ge),pe===null?de=ut:pe.sibling=ut,pe=ut);return i&&me.forEach(function(hi){return s(T,hi)}),Ae&&Ei(T,ge),de}function he(T,L,j,ie){var de=G(j);if(typeof de!="function")throw Error(r(150));if(j=de.call(j),j==null)throw Error(r(151));for(var pe=de=null,me=L,ge=L=0,ut=null,De=j.next();me!==null&&!De.done;ge++,De=j.next()){me.index>ge?(ut=me,me=null):ut=me.sibling;var hi=J(T,me,De.value,ie);if(hi===null){me===null&&(me=ut);break}i&&me&&hi.alternate===null&&s(T,me),L=m(hi,L,ge),pe===null?de=hi:pe.sibling=hi,pe=hi,me=ut}if(De.done)return a(T,me),Ae&&Ei(T,ge),de;if(me===null){for(;!De.done;ge++,De=j.next())De=ee(T,De.value,ie),De!==null&&(L=m(De,L,ge),pe===null?de=De:pe.sibling=De,pe=De);return Ae&&Ei(T,ge),de}for(me=u(T,me);!De.done;ge++,De=j.next())De=ae(me,T,ge,De.value,ie),De!==null&&(i&&De.alternate!==null&&me.delete(De.key===null?ge:De.key),L=m(De,L,ge),pe===null?de=De:pe.sibling=De,pe=De);return i&&me.forEach(function(Wy){return s(T,Wy)}),Ae&&Ei(T,ge),de}function Ge(T,L,j,ie){if(typeof j=="object"&&j!==null&&j.type===te&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case K:e:{for(var de=j.key,pe=L;pe!==null;){if(pe.key===de){if(de=j.type,de===te){if(pe.tag===7){a(T,pe.sibling),L=f(pe,j.props.children),L.return=T,T=L;break e}}else if(pe.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===D&&Ef(de)===pe.type){a(T,pe.sibling),L=f(pe,j.props),L.ref=an(T,pe,j),L.return=T,T=L;break e}a(T,pe);break}else s(T,pe);pe=pe.sibling}j.type===te?(L=Ti(j.props.children,T.mode,ie,j.key),L.return=T,T=L):(ie=aa(j.type,j.key,j.props,null,T.mode,ie),ie.ref=an(T,L,j),ie.return=T,T=ie)}return y(T);case X:e:{for(pe=j.key;L!==null;){if(L.key===pe)if(L.tag===4&&L.stateNode.containerInfo===j.containerInfo&&L.stateNode.implementation===j.implementation){a(T,L.sibling),L=f(L,j.children||[]),L.return=T,T=L;break e}else{a(T,L);break}else s(T,L);L=L.sibling}L=qc(j,T.mode,ie),L.return=T,T=L}return y(T);case D:return pe=j._init,Ge(T,L,pe(j._payload),ie)}if(js(j))return ue(T,L,j,ie);if(G(j))return he(T,L,j,ie);Io(T,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,L!==null&&L.tag===6?(a(T,L.sibling),L=f(L,j),L.return=T,T=L):(a(T,L),L=Vc(j,T.mode,ie),L.return=T,T=L),y(T)):a(T,L)}return Ge}var hs=Pf(!0),Rf=Pf(!1),Ao=ei(null),Fo=null,ds=null,rc=null;function ic(){rc=ds=Fo=null}function sc(i){var s=Ao.current;Be(Ao),i._currentValue=s}function nc(i,s,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===a)break;i=i.return}}function fs(i,s){Fo=i,rc=ds=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&s)!==0&&(Ot=!0),i.firstContext=null)}function Gt(i){var s=i._currentValue;if(rc!==i)if(i={context:i,memoizedValue:s,next:null},ds===null){if(Fo===null)throw Error(r(308));ds=i,Fo.dependencies={lanes:0,firstContext:i}}else ds=ds.next=i;return s}var Pi=null;function oc(i){Pi===null?Pi=[i]:Pi.push(i)}function Nf(i,s,a,u){var f=s.interleaved;return f===null?(a.next=a,oc(s)):(a.next=f.next,f.next=a),s.interleaved=a,Tr(i,u)}function Tr(i,s){i.lanes|=s;var a=i.alternate;for(a!==null&&(a.lanes|=s),a=i,i=i.return;i!==null;)i.childLanes|=s,a=i.alternate,a!==null&&(a.childLanes|=s),a=i,i=i.return;return a.tag===3?a.stateNode:null}var ii=!1;function ac(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lf(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function jr(i,s){return{eventTime:i,lane:s,tag:0,payload:null,callback:null,next:null}}function si(i,s,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Ne&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,Tr(i,a)}return f=u.interleaved,f===null?(s.next=s,oc(u)):(s.next=f.next,f.next=s),u.interleaved=s,Tr(i,a)}function zo(i,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var u=s.lanes;u&=i.pendingLanes,a|=u,s.lanes=a,wl(i,a)}}function Df(i,s){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var y={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?f=m=y:m=m.next=y,a=a.next}while(a!==null);m===null?f=m=s:m=m.next=s}else f=m=s;a={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,effects:u.effects},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=s:i.next=s,a.lastBaseUpdate=s}function Ho(i,s,a,u){var f=i.updateQueue;ii=!1;var m=f.firstBaseUpdate,y=f.lastBaseUpdate,k=f.shared.pending;if(k!==null){f.shared.pending=null;var R=k,I=R.next;R.next=null,y===null?m=I:y.next=I,y=R;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,k=Z.lastBaseUpdate,k!==y&&(k===null?Z.firstBaseUpdate=I:k.next=I,Z.lastBaseUpdate=R))}if(m!==null){var ee=f.baseState;y=0,Z=I=R=null,k=m;do{var J=k.lane,ae=k.eventTime;if((u&J)===J){Z!==null&&(Z=Z.next={eventTime:ae,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var ue=i,he=k;switch(J=s,ae=a,he.tag){case 1:if(ue=he.payload,typeof ue=="function"){ee=ue.call(ae,ee,J);break e}ee=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=he.payload,J=typeof ue=="function"?ue.call(ae,ee,J):ue,J==null)break e;ee=Y({},ee,J);break e;case 2:ii=!0}}k.callback!==null&&k.lane!==0&&(i.flags|=64,J=f.effects,J===null?f.effects=[k]:J.push(k))}else ae={eventTime:ae,lane:J,tag:k.tag,payload:k.payload,callback:k.callback,next:null},Z===null?(I=Z=ae,R=ee):Z=Z.next=ae,y|=J;if(k=k.next,k===null){if(k=f.shared.pending,k===null)break;J=k,k=J.next,J.next=null,f.lastBaseUpdate=J,f.shared.pending=null}}while(!0);if(Z===null&&(R=ee),f.baseState=R,f.firstBaseUpdate=I,f.lastBaseUpdate=Z,s=f.shared.interleaved,s!==null){f=s;do y|=f.lane,f=f.next;while(f!==s)}else m===null&&(f.shared.lanes=0);Li|=y,i.lanes=y,i.memoizedState=ee}}function Mf(i,s,a){if(i=s.effects,s.effects=null,i!==null)for(s=0;s<i.length;s++){var u=i[s],f=u.callback;if(f!==null){if(u.callback=null,u=a,typeof f!="function")throw Error(r(191,f));f.call(u)}}}var ln={},yr=ei(ln),cn=ei(ln),un=ei(ln);function Ri(i){if(i===ln)throw Error(r(174));return i}function lc(i,s){switch(Te(un,s),Te(cn,i),Te(yr,ln),i=s.nodeType,i){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:cl(null,"");break;default:i=i===8?s.parentNode:s,s=i.namespaceURI||null,i=i.tagName,s=cl(s,i)}Be(yr),Te(yr,s)}function ps(){Be(yr),Be(cn),Be(un)}function Of(i){Ri(un.current);var s=Ri(yr.current),a=cl(s,i.type);s!==a&&(Te(cn,i),Te(yr,a))}function cc(i){cn.current===i&&(Be(yr),Be(cn))}var He=ei(0);function $o(i){for(var s=i;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var uc=[];function hc(){for(var i=0;i<uc.length;i++)uc[i]._workInProgressVersionPrimary=null;uc.length=0}var Wo=A.ReactCurrentDispatcher,dc=A.ReactCurrentBatchConfig,Ni=0,$e=null,tt=null,lt=null,Uo=!1,hn=!1,dn=0,hy=0;function St(){throw Error(r(321))}function fc(i,s){if(s===null)return!1;for(var a=0;a<s.length&&a<i.length;a++)if(!cr(i[a],s[a]))return!1;return!0}function pc(i,s,a,u,f,m){if(Ni=m,$e=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Wo.current=i===null||i.memoizedState===null?my:gy,i=a(u,f),hn){m=0;do{if(hn=!1,dn=0,25<=m)throw Error(r(301));m+=1,lt=tt=null,s.updateQueue=null,Wo.current=_y,i=a(u,f)}while(hn)}if(Wo.current=qo,s=tt!==null&&tt.next!==null,Ni=0,lt=tt=$e=null,Uo=!1,s)throw Error(r(300));return i}function mc(){var i=dn!==0;return dn=0,i}function Sr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?$e.memoizedState=lt=i:lt=lt.next=i,lt}function Xt(){if(tt===null){var i=$e.alternate;i=i!==null?i.memoizedState:null}else i=tt.next;var s=lt===null?$e.memoizedState:lt.next;if(s!==null)lt=s,tt=i;else{if(i===null)throw Error(r(310));tt=i,i={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},lt===null?$e.memoizedState=lt=i:lt=lt.next=i}return lt}function fn(i,s){return typeof s=="function"?s(i):s}function gc(i){var s=Xt(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=i;var u=tt,f=u.baseQueue,m=a.pending;if(m!==null){if(f!==null){var y=f.next;f.next=m.next,m.next=y}u.baseQueue=f=m,a.pending=null}if(f!==null){m=f.next,u=u.baseState;var k=y=null,R=null,I=m;do{var Z=I.lane;if((Ni&Z)===Z)R!==null&&(R=R.next={lane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),u=I.hasEagerState?I.eagerState:i(u,I.action);else{var ee={lane:Z,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null};R===null?(k=R=ee,y=u):R=R.next=ee,$e.lanes|=Z,Li|=Z}I=I.next}while(I!==null&&I!==m);R===null?y=u:R.next=k,cr(u,s.memoizedState)||(Ot=!0),s.memoizedState=u,s.baseState=y,s.baseQueue=R,a.lastRenderedState=u}if(i=a.interleaved,i!==null){f=i;do m=f.lane,$e.lanes|=m,Li|=m,f=f.next;while(f!==i)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function _c(i){var s=Xt(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=i;var u=a.dispatch,f=a.pending,m=s.memoizedState;if(f!==null){a.pending=null;var y=f=f.next;do m=i(m,y.action),y=y.next;while(y!==f);cr(m,s.memoizedState)||(Ot=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,u]}function Tf(){}function jf(i,s){var a=$e,u=Xt(),f=s(),m=!cr(u.memoizedState,f);if(m&&(u.memoizedState=f,Ot=!0),u=u.queue,vc(Af.bind(null,a,u,i),[i]),u.getSnapshot!==s||m||lt!==null&&lt.memoizedState.tag&1){if(a.flags|=2048,pn(9,If.bind(null,a,u,f,s),void 0,null),ct===null)throw Error(r(349));(Ni&30)!==0||Bf(a,s,f)}return f}function Bf(i,s,a){i.flags|=16384,i={getSnapshot:s,value:a},s=$e.updateQueue,s===null?(s={lastEffect:null,stores:null},$e.updateQueue=s,s.stores=[i]):(a=s.stores,a===null?s.stores=[i]:a.push(i))}function If(i,s,a,u){s.value=a,s.getSnapshot=u,Ff(s)&&zf(i)}function Af(i,s,a){return a(function(){Ff(s)&&zf(i)})}function Ff(i){var s=i.getSnapshot;i=i.value;try{var a=s();return!cr(i,a)}catch{return!0}}function zf(i){var s=Tr(i,1);s!==null&&pr(s,i,1,-1)}function Hf(i){var s=Sr();return typeof i=="function"&&(i=i()),s.memoizedState=s.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fn,lastRenderedState:i},s.queue=i,i=i.dispatch=py.bind(null,$e,i),[s.memoizedState,i]}function pn(i,s,a,u){return i={tag:i,create:s,destroy:a,deps:u,next:null},s=$e.updateQueue,s===null?(s={lastEffect:null,stores:null},$e.updateQueue=s,s.lastEffect=i.next=i):(a=s.lastEffect,a===null?s.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,s.lastEffect=i)),i}function $f(){return Xt().memoizedState}function Ko(i,s,a,u){var f=Sr();$e.flags|=i,f.memoizedState=pn(1|s,a,void 0,u===void 0?null:u)}function Vo(i,s,a,u){var f=Xt();u=u===void 0?null:u;var m=void 0;if(tt!==null){var y=tt.memoizedState;if(m=y.destroy,u!==null&&fc(u,y.deps)){f.memoizedState=pn(s,a,m,u);return}}$e.flags|=i,f.memoizedState=pn(1|s,a,m,u)}function Wf(i,s){return Ko(8390656,8,i,s)}function vc(i,s){return Vo(2048,8,i,s)}function Uf(i,s){return Vo(4,2,i,s)}function Kf(i,s){return Vo(4,4,i,s)}function Vf(i,s){if(typeof s=="function")return i=i(),s(i),function(){s(null)};if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function qf(i,s,a){return a=a!=null?a.concat([i]):null,Vo(4,4,Vf.bind(null,s,i),a)}function yc(){}function Qf(i,s){var a=Xt();s=s===void 0?null:s;var u=a.memoizedState;return u!==null&&s!==null&&fc(s,u[1])?u[0]:(a.memoizedState=[i,s],i)}function Yf(i,s){var a=Xt();s=s===void 0?null:s;var u=a.memoizedState;return u!==null&&s!==null&&fc(s,u[1])?u[0]:(i=i(),a.memoizedState=[i,s],i)}function Gf(i,s,a){return(Ni&21)===0?(i.baseState&&(i.baseState=!1,Ot=!0),i.memoizedState=a):(cr(a,s)||(a=kd(),$e.lanes|=a,Li|=a,i.baseState=!0),s)}function dy(i,s){var a=Me;Me=a!==0&&4>a?a:4,i(!0);var u=dc.transition;dc.transition={};try{i(!1),s()}finally{Me=a,dc.transition=u}}function Xf(){return Xt().memoizedState}function fy(i,s,a){var u=li(i);if(a={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null},Jf(i))Zf(s,a);else if(a=Nf(i,s,a,u),a!==null){var f=kt();pr(a,i,u,f),ep(a,s,u)}}function py(i,s,a){var u=li(i),f={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null};if(Jf(i))Zf(s,f);else{var m=i.alternate;if(i.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var y=s.lastRenderedState,k=m(y,a);if(f.hasEagerState=!0,f.eagerState=k,cr(k,y)){var R=s.interleaved;R===null?(f.next=f,oc(s)):(f.next=R.next,R.next=f),s.interleaved=f;return}}catch{}finally{}a=Nf(i,s,f,u),a!==null&&(f=kt(),pr(a,i,u,f),ep(a,s,u))}}function Jf(i){var s=i.alternate;return i===$e||s!==null&&s===$e}function Zf(i,s){hn=Uo=!0;var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}function ep(i,s,a){if((a&4194240)!==0){var u=s.lanes;u&=i.pendingLanes,a|=u,s.lanes=a,wl(i,a)}}var qo={readContext:Gt,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},my={readContext:Gt,useCallback:function(i,s){return Sr().memoizedState=[i,s===void 0?null:s],i},useContext:Gt,useEffect:Wf,useImperativeHandle:function(i,s,a){return a=a!=null?a.concat([i]):null,Ko(4194308,4,Vf.bind(null,s,i),a)},useLayoutEffect:function(i,s){return Ko(4194308,4,i,s)},useInsertionEffect:function(i,s){return Ko(4,2,i,s)},useMemo:function(i,s){var a=Sr();return s=s===void 0?null:s,i=i(),a.memoizedState=[i,s],i},useReducer:function(i,s,a){var u=Sr();return s=a!==void 0?a(s):s,u.memoizedState=u.baseState=s,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:s},u.queue=i,i=i.dispatch=fy.bind(null,$e,i),[u.memoizedState,i]},useRef:function(i){var s=Sr();return i={current:i},s.memoizedState=i},useState:Hf,useDebugValue:yc,useDeferredValue:function(i){return Sr().memoizedState=i},useTransition:function(){var i=Hf(!1),s=i[0];return i=dy.bind(null,i[1]),Sr().memoizedState=i,[s,i]},useMutableSource:function(){},useSyncExternalStore:function(i,s,a){var u=$e,f=Sr();if(Ae){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),ct===null)throw Error(r(349));(Ni&30)!==0||Bf(u,s,a)}f.memoizedState=a;var m={value:a,getSnapshot:s};return f.queue=m,Wf(Af.bind(null,u,m,i),[i]),u.flags|=2048,pn(9,If.bind(null,u,m,a,s),void 0,null),a},useId:function(){var i=Sr(),s=ct.identifierPrefix;if(Ae){var a=Or,u=Mr;a=(u&~(1<<32-lr(u)-1)).toString(32)+a,s=":"+s+"R"+a,a=dn++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=hy++,s=":"+s+"r"+a.toString(32)+":";return i.memoizedState=s},unstable_isNewReconciler:!1},gy={readContext:Gt,useCallback:Qf,useContext:Gt,useEffect:vc,useImperativeHandle:qf,useInsertionEffect:Uf,useLayoutEffect:Kf,useMemo:Yf,useReducer:gc,useRef:$f,useState:function(){return gc(fn)},useDebugValue:yc,useDeferredValue:function(i){var s=Xt();return Gf(s,tt.memoizedState,i)},useTransition:function(){var i=gc(fn)[0],s=Xt().memoizedState;return[i,s]},useMutableSource:Tf,useSyncExternalStore:jf,useId:Xf,unstable_isNewReconciler:!1},_y={readContext:Gt,useCallback:Qf,useContext:Gt,useEffect:vc,useImperativeHandle:qf,useInsertionEffect:Uf,useLayoutEffect:Kf,useMemo:Yf,useReducer:_c,useRef:$f,useState:function(){return _c(fn)},useDebugValue:yc,useDeferredValue:function(i){var s=Xt();return tt===null?s.memoizedState=i:Gf(s,tt.memoizedState,i)},useTransition:function(){var i=_c(fn)[0],s=Xt().memoizedState;return[i,s]},useMutableSource:Tf,useSyncExternalStore:jf,useId:Xf,unstable_isNewReconciler:!1};function hr(i,s){if(i&&i.defaultProps){s=Y({},s),i=i.defaultProps;for(var a in i)s[a]===void 0&&(s[a]=i[a]);return s}return s}function Sc(i,s,a,u){s=i.memoizedState,a=a(u,s),a=a==null?s:Y({},s,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var Qo={isMounted:function(i){return(i=i._reactInternals)?xi(i)===i:!1},enqueueSetState:function(i,s,a){i=i._reactInternals;var u=kt(),f=li(i),m=jr(u,f);m.payload=s,a!=null&&(m.callback=a),s=si(i,m,f),s!==null&&(pr(s,i,f,u),zo(s,i,f))},enqueueReplaceState:function(i,s,a){i=i._reactInternals;var u=kt(),f=li(i),m=jr(u,f);m.tag=1,m.payload=s,a!=null&&(m.callback=a),s=si(i,m,f),s!==null&&(pr(s,i,f,u),zo(s,i,f))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var a=kt(),u=li(i),f=jr(a,u);f.tag=2,s!=null&&(f.callback=s),s=si(i,f,u),s!==null&&(pr(s,i,u,a),zo(s,i,u))}};function tp(i,s,a,u,f,m,y){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,m,y):s.prototype&&s.prototype.isPureReactComponent?!Zs(a,u)||!Zs(f,m):!0}function rp(i,s,a){var u=!1,f=ti,m=s.contextType;return typeof m=="object"&&m!==null?m=Gt(m):(f=Mt(s)?Ci:yt.current,u=s.contextTypes,m=(u=u!=null)?as(i,f):ti),s=new s(a,m),i.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Qo,i.stateNode=s,s._reactInternals=i,u&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=f,i.__reactInternalMemoizedMaskedChildContext=m),s}function ip(i,s,a,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,u),s.state!==i&&Qo.enqueueReplaceState(s,s.state,null)}function wc(i,s,a,u){var f=i.stateNode;f.props=a,f.state=i.memoizedState,f.refs={},ac(i);var m=s.contextType;typeof m=="object"&&m!==null?f.context=Gt(m):(m=Mt(s)?Ci:yt.current,f.context=as(i,m)),f.state=i.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(Sc(i,s,m,a),f.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Qo.enqueueReplaceState(f,f.state,null),Ho(i,a,f,u),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308)}function ms(i,s){try{var a="",u=s;do a+=Se(u),u=u.return;while(u);var f=a}catch(m){f=`
Error generating stack: `+m.message+`
`+m.stack}return{value:i,source:s,stack:f,digest:null}}function xc(i,s,a){return{value:i,source:null,stack:a??null,digest:s??null}}function bc(i,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var vy=typeof WeakMap=="function"?WeakMap:Map;function sp(i,s,a){a=jr(-1,a),a.tag=3,a.payload={element:null};var u=s.value;return a.callback=function(){ta||(ta=!0,Ac=u),bc(i,s)},a}function np(i,s,a){a=jr(-1,a),a.tag=3;var u=i.type.getDerivedStateFromError;if(typeof u=="function"){var f=s.value;a.payload=function(){return u(f)},a.callback=function(){bc(i,s)}}var m=i.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){bc(i,s),typeof u!="function"&&(oi===null?oi=new Set([this]):oi.add(this));var y=s.stack;this.componentDidCatch(s.value,{componentStack:y!==null?y:""})}),a}function op(i,s,a){var u=i.pingCache;if(u===null){u=i.pingCache=new vy;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(a)||(f.add(a),i=My.bind(null,i,s,a),s.then(i,i))}function ap(i){do{var s;if((s=i.tag===13)&&(s=i.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return i;i=i.return}while(i!==null);return null}function lp(i,s,a,u,f){return(i.mode&1)===0?(i===s?i.flags|=65536:(i.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=jr(-1,1),s.tag=2,si(a,s,1))),a.lanes|=1),i):(i.flags|=65536,i.lanes=f,i)}var yy=A.ReactCurrentOwner,Ot=!1;function Ct(i,s,a,u){s.child=i===null?Rf(s,null,a,u):hs(s,i.child,a,u)}function cp(i,s,a,u,f){a=a.render;var m=s.ref;return fs(s,f),u=pc(i,s,a,u,m,f),a=mc(),i!==null&&!Ot?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~f,Br(i,s,f)):(Ae&&a&&Xl(s),s.flags|=1,Ct(i,s,u,f),s.child)}function up(i,s,a,u,f){if(i===null){var m=a.type;return typeof m=="function"&&!Kc(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=m,hp(i,s,m,u,f)):(i=aa(a.type,null,u,s,s.mode,f),i.ref=s.ref,i.return=s,s.child=i)}if(m=i.child,(i.lanes&f)===0){var y=m.memoizedProps;if(a=a.compare,a=a!==null?a:Zs,a(y,u)&&i.ref===s.ref)return Br(i,s,f)}return s.flags|=1,i=ui(m,u),i.ref=s.ref,i.return=s,s.child=i}function hp(i,s,a,u,f){if(i!==null){var m=i.memoizedProps;if(Zs(m,u)&&i.ref===s.ref)if(Ot=!1,s.pendingProps=u=m,(i.lanes&f)!==0)(i.flags&131072)!==0&&(Ot=!0);else return s.lanes=i.lanes,Br(i,s,f)}return Cc(i,s,a,u,f)}function dp(i,s,a){var u=s.pendingProps,f=u.children,m=i!==null?i.memoizedState:null;if(u.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(_s,Ht),Ht|=a;else{if((a&1073741824)===0)return i=m!==null?m.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:i,cachePool:null,transitions:null},s.updateQueue=null,Te(_s,Ht),Ht|=i,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=m!==null?m.baseLanes:a,Te(_s,Ht),Ht|=u}else m!==null?(u=m.baseLanes|a,s.memoizedState=null):u=a,Te(_s,Ht),Ht|=u;return Ct(i,s,f,a),s.child}function fp(i,s){var a=s.ref;(i===null&&a!==null||i!==null&&i.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Cc(i,s,a,u,f){var m=Mt(a)?Ci:yt.current;return m=as(s,m),fs(s,f),a=pc(i,s,a,u,m,f),u=mc(),i!==null&&!Ot?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~f,Br(i,s,f)):(Ae&&u&&Xl(s),s.flags|=1,Ct(i,s,a,f),s.child)}function pp(i,s,a,u,f){if(Mt(a)){var m=!0;Mo(s)}else m=!1;if(fs(s,f),s.stateNode===null)Go(i,s),rp(s,a,u),wc(s,a,u,f),u=!0;else if(i===null){var y=s.stateNode,k=s.memoizedProps;y.props=k;var R=y.context,I=a.contextType;typeof I=="object"&&I!==null?I=Gt(I):(I=Mt(a)?Ci:yt.current,I=as(s,I));var Z=a.getDerivedStateFromProps,ee=typeof Z=="function"||typeof y.getSnapshotBeforeUpdate=="function";ee||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(k!==u||R!==I)&&ip(s,y,u,I),ii=!1;var J=s.memoizedState;y.state=J,Ho(s,u,y,f),R=s.memoizedState,k!==u||J!==R||Dt.current||ii?(typeof Z=="function"&&(Sc(s,a,Z,u),R=s.memoizedState),(k=ii||tp(s,a,k,u,J,R,I))?(ee||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=R),y.props=u,y.state=R,y.context=I,u=k):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{y=s.stateNode,Lf(i,s),k=s.memoizedProps,I=s.type===s.elementType?k:hr(s.type,k),y.props=I,ee=s.pendingProps,J=y.context,R=a.contextType,typeof R=="object"&&R!==null?R=Gt(R):(R=Mt(a)?Ci:yt.current,R=as(s,R));var ae=a.getDerivedStateFromProps;(Z=typeof ae=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(k!==ee||J!==R)&&ip(s,y,u,R),ii=!1,J=s.memoizedState,y.state=J,Ho(s,u,y,f);var ue=s.memoizedState;k!==ee||J!==ue||Dt.current||ii?(typeof ae=="function"&&(Sc(s,a,ae,u),ue=s.memoizedState),(I=ii||tp(s,a,I,u,J,ue,R)||!1)?(Z||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,ue,R),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,ue,R)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||k===i.memoizedProps&&J===i.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||k===i.memoizedProps&&J===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=ue),y.props=u,y.state=ue,y.context=R,u=I):(typeof y.componentDidUpdate!="function"||k===i.memoizedProps&&J===i.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||k===i.memoizedProps&&J===i.memoizedState||(s.flags|=1024),u=!1)}return kc(i,s,a,u,m,f)}function kc(i,s,a,u,f,m){fp(i,s);var y=(s.flags&128)!==0;if(!u&&!y)return f&&yf(s,a,!1),Br(i,s,m);u=s.stateNode,yy.current=s;var k=y&&typeof a.getDerivedStateFromError!="function"?null:u.render();return s.flags|=1,i!==null&&y?(s.child=hs(s,i.child,null,m),s.child=hs(s,null,k,m)):Ct(i,s,k,m),s.memoizedState=u.state,f&&yf(s,a,!0),s.child}function mp(i){var s=i.stateNode;s.pendingContext?_f(i,s.pendingContext,s.pendingContext!==s.context):s.context&&_f(i,s.context,!1),lc(i,s.containerInfo)}function gp(i,s,a,u,f){return us(),tc(f),s.flags|=256,Ct(i,s,a,u),s.child}var Ec={dehydrated:null,treeContext:null,retryLane:0};function Pc(i){return{baseLanes:i,cachePool:null,transitions:null}}function _p(i,s,a){var u=s.pendingProps,f=He.current,m=!1,y=(s.flags&128)!==0,k;if((k=y)||(k=i!==null&&i.memoizedState===null?!1:(f&2)!==0),k?(m=!0,s.flags&=-129):(i===null||i.memoizedState!==null)&&(f|=1),Te(He,f&1),i===null)return ec(s),i=s.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((s.mode&1)===0?s.lanes=1:i.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(y=u.children,i=u.fallback,m?(u=s.mode,m=s.child,y={mode:"hidden",children:y},(u&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=y):m=la(y,u,0,null),i=Ti(i,u,a,null),m.return=s,i.return=s,m.sibling=i,s.child=m,s.child.memoizedState=Pc(a),s.memoizedState=Ec,i):Rc(s,y));if(f=i.memoizedState,f!==null&&(k=f.dehydrated,k!==null))return Sy(i,s,y,u,k,f,a);if(m){m=u.fallback,y=s.mode,f=i.child,k=f.sibling;var R={mode:"hidden",children:u.children};return(y&1)===0&&s.child!==f?(u=s.child,u.childLanes=0,u.pendingProps=R,s.deletions=null):(u=ui(f,R),u.subtreeFlags=f.subtreeFlags&14680064),k!==null?m=ui(k,m):(m=Ti(m,y,a,null),m.flags|=2),m.return=s,u.return=s,u.sibling=m,s.child=u,u=m,m=s.child,y=i.child.memoizedState,y=y===null?Pc(a):{baseLanes:y.baseLanes|a,cachePool:null,transitions:y.transitions},m.memoizedState=y,m.childLanes=i.childLanes&~a,s.memoizedState=Ec,u}return m=i.child,i=m.sibling,u=ui(m,{mode:"visible",children:u.children}),(s.mode&1)===0&&(u.lanes=a),u.return=s,u.sibling=null,i!==null&&(a=s.deletions,a===null?(s.deletions=[i],s.flags|=16):a.push(i)),s.child=u,s.memoizedState=null,u}function Rc(i,s){return s=la({mode:"visible",children:s},i.mode,0,null),s.return=i,i.child=s}function Yo(i,s,a,u){return u!==null&&tc(u),hs(s,i.child,null,a),i=Rc(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function Sy(i,s,a,u,f,m,y){if(a)return s.flags&256?(s.flags&=-257,u=xc(Error(r(422))),Yo(i,s,y,u)):s.memoizedState!==null?(s.child=i.child,s.flags|=128,null):(m=u.fallback,f=s.mode,u=la({mode:"visible",children:u.children},f,0,null),m=Ti(m,f,y,null),m.flags|=2,u.return=s,m.return=s,u.sibling=m,s.child=u,(s.mode&1)!==0&&hs(s,i.child,null,y),s.child.memoizedState=Pc(y),s.memoizedState=Ec,m);if((s.mode&1)===0)return Yo(i,s,y,null);if(f.data==="$!"){if(u=f.nextSibling&&f.nextSibling.dataset,u)var k=u.dgst;return u=k,m=Error(r(419)),u=xc(m,u,void 0),Yo(i,s,y,u)}if(k=(y&i.childLanes)!==0,Ot||k){if(u=ct,u!==null){switch(y&-y){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(u.suspendedLanes|y))!==0?0:f,f!==0&&f!==m.retryLane&&(m.retryLane=f,Tr(i,f),pr(u,i,f,-1))}return Uc(),u=xc(Error(r(421))),Yo(i,s,y,u)}return f.data==="$?"?(s.flags|=128,s.child=i.child,s=Oy.bind(null,i),f._reactRetry=s,null):(i=m.treeContext,zt=Zr(f.nextSibling),Ft=s,Ae=!0,ur=null,i!==null&&(Qt[Yt++]=Mr,Qt[Yt++]=Or,Qt[Yt++]=ki,Mr=i.id,Or=i.overflow,ki=s),s=Rc(s,u.children),s.flags|=4096,s)}function vp(i,s,a){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),nc(i.return,s,a)}function Nc(i,s,a,u,f){var m=i.memoizedState;m===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:f}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=a,m.tailMode=f)}function yp(i,s,a){var u=s.pendingProps,f=u.revealOrder,m=u.tail;if(Ct(i,s,u.children,a),u=He.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&vp(i,a,s);else if(i.tag===19)vp(i,a,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}if(Te(He,u),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)i=a.alternate,i!==null&&$o(i)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Nc(s,!1,f,a,m);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(i=f.alternate,i!==null&&$o(i)===null){s.child=f;break}i=f.sibling,f.sibling=a,a=f,f=i}Nc(s,!0,a,null,m);break;case"together":Nc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Go(i,s){(s.mode&1)===0&&i!==null&&(i.alternate=null,s.alternate=null,s.flags|=2)}function Br(i,s,a){if(i!==null&&(s.dependencies=i.dependencies),Li|=s.lanes,(a&s.childLanes)===0)return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,a=ui(i,i.pendingProps),s.child=a,a.return=s;i.sibling!==null;)i=i.sibling,a=a.sibling=ui(i,i.pendingProps),a.return=s;a.sibling=null}return s.child}function wy(i,s,a){switch(s.tag){case 3:mp(s),us();break;case 5:Of(s);break;case 1:Mt(s.type)&&Mo(s);break;case 4:lc(s,s.stateNode.containerInfo);break;case 10:var u=s.type._context,f=s.memoizedProps.value;Te(Ao,u._currentValue),u._currentValue=f;break;case 13:if(u=s.memoizedState,u!==null)return u.dehydrated!==null?(Te(He,He.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?_p(i,s,a):(Te(He,He.current&1),i=Br(i,s,a),i!==null?i.sibling:null);Te(He,He.current&1);break;case 19:if(u=(a&s.childLanes)!==0,(i.flags&128)!==0){if(u)return yp(i,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Te(He,He.current),u)break;return null;case 22:case 23:return s.lanes=0,dp(i,s,a)}return Br(i,s,a)}var Sp,Lc,wp,xp;Sp=function(i,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)i.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Lc=function(){},wp=function(i,s,a,u){var f=i.memoizedProps;if(f!==u){i=s.stateNode,Ri(yr.current);var m=null;switch(a){case"input":f=wi(i,f),u=wi(i,u),m=[];break;case"select":f=Y({},f,{value:void 0}),u=Y({},u,{value:void 0}),m=[];break;case"textarea":f=ll(i,f),u=ll(i,u),m=[];break;default:typeof f.onClick!="function"&&typeof u.onClick=="function"&&(i.onclick=No)}ul(a,u);var y;a=null;for(I in f)if(!u.hasOwnProperty(I)&&f.hasOwnProperty(I)&&f[I]!=null)if(I==="style"){var k=f[I];for(y in k)k.hasOwnProperty(y)&&(a||(a={}),a[y]="")}else I!=="dangerouslySetInnerHTML"&&I!=="children"&&I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(o.hasOwnProperty(I)?m||(m=[]):(m=m||[]).push(I,null));for(I in u){var R=u[I];if(k=f?.[I],u.hasOwnProperty(I)&&R!==k&&(R!=null||k!=null))if(I==="style")if(k){for(y in k)!k.hasOwnProperty(y)||R&&R.hasOwnProperty(y)||(a||(a={}),a[y]="");for(y in R)R.hasOwnProperty(y)&&k[y]!==R[y]&&(a||(a={}),a[y]=R[y])}else a||(m||(m=[]),m.push(I,a)),a=R;else I==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,k=k?k.__html:void 0,R!=null&&k!==R&&(m=m||[]).push(I,R)):I==="children"?typeof R!="string"&&typeof R!="number"||(m=m||[]).push(I,""+R):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&(o.hasOwnProperty(I)?(R!=null&&I==="onScroll"&&je("scroll",i),m||k===R||(m=[])):(m=m||[]).push(I,R))}a&&(m=m||[]).push("style",a);var I=m;(s.updateQueue=I)&&(s.flags|=4)}},xp=function(i,s,a,u){a!==u&&(s.flags|=4)};function mn(i,s){if(!Ae)switch(i.tailMode){case"hidden":s=i.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function wt(i){var s=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(s)for(var f=i.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags&14680064,u|=f.flags&14680064,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=u,i.childLanes=a,s}function xy(i,s,a){var u=s.pendingProps;switch(Jl(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(s),null;case 1:return Mt(s.type)&&Do(),wt(s),null;case 3:return u=s.stateNode,ps(),Be(Dt),Be(yt),hc(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(Bo(s)?s.flags|=4:i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ur!==null&&(Hc(ur),ur=null))),Lc(i,s),wt(s),null;case 5:cc(s);var f=Ri(un.current);if(a=s.type,i!==null&&s.stateNode!=null)wp(i,s,a,u,f),i.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!u){if(s.stateNode===null)throw Error(r(166));return wt(s),null}if(i=Ri(yr.current),Bo(s)){u=s.stateNode,a=s.type;var m=s.memoizedProps;switch(u[vr]=s,u[nn]=m,i=(s.mode&1)!==0,a){case"dialog":je("cancel",u),je("close",u);break;case"iframe":case"object":case"embed":je("load",u);break;case"video":case"audio":for(f=0;f<tn.length;f++)je(tn[f],u);break;case"source":je("error",u);break;case"img":case"image":case"link":je("error",u),je("load",u);break;case"details":je("toggle",u);break;case"input":td(u,m),je("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!m.multiple},je("invalid",u);break;case"textarea":sd(u,m),je("invalid",u)}ul(a,m),f=null;for(var y in m)if(m.hasOwnProperty(y)){var k=m[y];y==="children"?typeof k=="string"?u.textContent!==k&&(m.suppressHydrationWarning!==!0&&Ro(u.textContent,k,i),f=["children",k]):typeof k=="number"&&u.textContent!==""+k&&(m.suppressHydrationWarning!==!0&&Ro(u.textContent,k,i),f=["children",""+k]):o.hasOwnProperty(y)&&k!=null&&y==="onScroll"&&je("scroll",u)}switch(a){case"input":gr(u),id(u,m,!0);break;case"textarea":gr(u),od(u);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(u.onclick=No)}u=f,s.updateQueue=u,u!==null&&(s.flags|=4)}else{y=f.nodeType===9?f:f.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=ad(a)),i==="http://www.w3.org/1999/xhtml"?a==="script"?(i=y.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof u.is=="string"?i=y.createElement(a,{is:u.is}):(i=y.createElement(a),a==="select"&&(y=i,u.multiple?y.multiple=!0:u.size&&(y.size=u.size))):i=y.createElementNS(i,a),i[vr]=s,i[nn]=u,Sp(i,s,!1,!1),s.stateNode=i;e:{switch(y=hl(a,u),a){case"dialog":je("cancel",i),je("close",i),f=u;break;case"iframe":case"object":case"embed":je("load",i),f=u;break;case"video":case"audio":for(f=0;f<tn.length;f++)je(tn[f],i);f=u;break;case"source":je("error",i),f=u;break;case"img":case"image":case"link":je("error",i),je("load",i),f=u;break;case"details":je("toggle",i),f=u;break;case"input":td(i,u),f=wi(i,u),je("invalid",i);break;case"option":f=u;break;case"select":i._wrapperState={wasMultiple:!!u.multiple},f=Y({},u,{value:void 0}),je("invalid",i);break;case"textarea":sd(i,u),f=ll(i,u),je("invalid",i);break;default:f=u}ul(a,f),k=f;for(m in k)if(k.hasOwnProperty(m)){var R=k[m];m==="style"?ud(i,R):m==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&ld(i,R)):m==="children"?typeof R=="string"?(a!=="textarea"||R!=="")&&Bs(i,R):typeof R=="number"&&Bs(i,""+R):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?R!=null&&m==="onScroll"&&je("scroll",i):R!=null&&W(i,m,R,y))}switch(a){case"input":gr(i),id(i,u,!1);break;case"textarea":gr(i),od(i);break;case"option":u.value!=null&&i.setAttribute("value",""+Pe(u.value));break;case"select":i.multiple=!!u.multiple,m=u.value,m!=null?Yi(i,!!u.multiple,m,!1):u.defaultValue!=null&&Yi(i,!!u.multiple,u.defaultValue,!0);break;default:typeof f.onClick=="function"&&(i.onclick=No)}switch(a){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return wt(s),null;case 6:if(i&&s.stateNode!=null)xp(i,s,i.memoizedProps,u);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(a=Ri(un.current),Ri(yr.current),Bo(s)){if(u=s.stateNode,a=s.memoizedProps,u[vr]=s,(m=u.nodeValue!==a)&&(i=Ft,i!==null))switch(i.tag){case 3:Ro(u.nodeValue,a,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Ro(u.nodeValue,a,(i.mode&1)!==0)}m&&(s.flags|=4)}else u=(a.nodeType===9?a:a.ownerDocument).createTextNode(u),u[vr]=s,s.stateNode=u}return wt(s),null;case 13:if(Be(He),u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Ae&&zt!==null&&(s.mode&1)!==0&&(s.flags&128)===0)kf(),us(),s.flags|=98560,m=!1;else if(m=Bo(s),u!==null&&u.dehydrated!==null){if(i===null){if(!m)throw Error(r(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[vr]=s}else us(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;wt(s),m=!1}else ur!==null&&(Hc(ur),ur=null),m=!0;if(!m)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(u=u!==null,u!==(i!==null&&i.memoizedState!==null)&&u&&(s.child.flags|=8192,(s.mode&1)!==0&&(i===null||(He.current&1)!==0?rt===0&&(rt=3):Uc())),s.updateQueue!==null&&(s.flags|=4),wt(s),null);case 4:return ps(),Lc(i,s),i===null&&rn(s.stateNode.containerInfo),wt(s),null;case 10:return sc(s.type._context),wt(s),null;case 17:return Mt(s.type)&&Do(),wt(s),null;case 19:if(Be(He),m=s.memoizedState,m===null)return wt(s),null;if(u=(s.flags&128)!==0,y=m.rendering,y===null)if(u)mn(m,!1);else{if(rt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(y=$o(i),y!==null){for(s.flags|=128,mn(m,!1),u=y.updateQueue,u!==null&&(s.updateQueue=u,s.flags|=4),s.subtreeFlags=0,u=a,a=s.child;a!==null;)m=a,i=u,m.flags&=14680066,y=m.alternate,y===null?(m.childLanes=0,m.lanes=i,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=y.childLanes,m.lanes=y.lanes,m.child=y.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=y.memoizedProps,m.memoizedState=y.memoizedState,m.updateQueue=y.updateQueue,m.type=y.type,i=y.dependencies,m.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),a=a.sibling;return Te(He,He.current&1|2),s.child}i=i.sibling}m.tail!==null&&Ye()>vs&&(s.flags|=128,u=!0,mn(m,!1),s.lanes=4194304)}else{if(!u)if(i=$o(y),i!==null){if(s.flags|=128,u=!0,a=i.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),mn(m,!0),m.tail===null&&m.tailMode==="hidden"&&!y.alternate&&!Ae)return wt(s),null}else 2*Ye()-m.renderingStartTime>vs&&a!==1073741824&&(s.flags|=128,u=!0,mn(m,!1),s.lanes=4194304);m.isBackwards?(y.sibling=s.child,s.child=y):(a=m.last,a!==null?a.sibling=y:s.child=y,m.last=y)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=Ye(),s.sibling=null,a=He.current,Te(He,u?a&1|2:a&1),s):(wt(s),null);case 22:case 23:return Wc(),u=s.memoizedState!==null,i!==null&&i.memoizedState!==null!==u&&(s.flags|=8192),u&&(s.mode&1)!==0?(Ht&1073741824)!==0&&(wt(s),s.subtreeFlags&6&&(s.flags|=8192)):wt(s),null;case 24:return null;case 25:return null}throw Error(r(156,s.tag))}function by(i,s){switch(Jl(s),s.tag){case 1:return Mt(s.type)&&Do(),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return ps(),Be(Dt),Be(yt),hc(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 5:return cc(s),null;case 13:if(Be(He),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));us()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return Be(He),null;case 4:return ps(),null;case 10:return sc(s.type._context),null;case 22:case 23:return Wc(),null;case 24:return null;default:return null}}var Xo=!1,xt=!1,Cy=typeof WeakSet=="function"?WeakSet:Set,ce=null;function gs(i,s){var a=i.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(u){Ve(i,s,u)}else a.current=null}function Dc(i,s,a){try{a()}catch(u){Ve(i,s,u)}}var bp=!1;function ky(i,s){if(Wl=_o,i=ef(),jl(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var y=0,k=-1,R=-1,I=0,Z=0,ee=i,J=null;t:for(;;){for(var ae;ee!==a||f!==0&&ee.nodeType!==3||(k=y+f),ee!==m||u!==0&&ee.nodeType!==3||(R=y+u),ee.nodeType===3&&(y+=ee.nodeValue.length),(ae=ee.firstChild)!==null;)J=ee,ee=ae;for(;;){if(ee===i)break t;if(J===a&&++I===f&&(k=y),J===m&&++Z===u&&(R=y),(ae=ee.nextSibling)!==null)break;ee=J,J=ee.parentNode}ee=ae}a=k===-1||R===-1?null:{start:k,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ul={focusedElem:i,selectionRange:a},_o=!1,ce=s;ce!==null;)if(s=ce,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,ce=i;else for(;ce!==null;){s=ce;try{var ue=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var he=ue.memoizedProps,Ge=ue.memoizedState,T=s.stateNode,L=T.getSnapshotBeforeUpdate(s.elementType===s.type?he:hr(s.type,he),Ge);T.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var j=s.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ie){Ve(s,s.return,ie)}if(i=s.sibling,i!==null){i.return=s.return,ce=i;break}ce=s.return}return ue=bp,bp=!1,ue}function gn(i,s,a){var u=s.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var f=u=u.next;do{if((f.tag&i)===i){var m=f.destroy;f.destroy=void 0,m!==void 0&&Dc(s,a,m)}f=f.next}while(f!==u)}}function Jo(i,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&i)===i){var u=a.create;a.destroy=u()}a=a.next}while(a!==s)}}function Mc(i){var s=i.ref;if(s!==null){var a=i.stateNode;switch(i.tag){case 5:i=a;break;default:i=a}typeof s=="function"?s(i):s.current=i}}function Cp(i){var s=i.alternate;s!==null&&(i.alternate=null,Cp(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&(delete s[vr],delete s[nn],delete s[Ql],delete s[ay],delete s[ly])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function kp(i){return i.tag===5||i.tag===3||i.tag===4}function Ep(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||kp(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Oc(i,s,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(i,s):a.insertBefore(i,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(i,a)):(s=a,s.appendChild(i)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=No));else if(u!==4&&(i=i.child,i!==null))for(Oc(i,s,a),i=i.sibling;i!==null;)Oc(i,s,a),i=i.sibling}function Tc(i,s,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?a.insertBefore(i,s):a.appendChild(i);else if(u!==4&&(i=i.child,i!==null))for(Tc(i,s,a),i=i.sibling;i!==null;)Tc(i,s,a),i=i.sibling}var gt=null,dr=!1;function ni(i,s,a){for(a=a.child;a!==null;)Pp(i,s,a),a=a.sibling}function Pp(i,s,a){if(_r&&typeof _r.onCommitFiberUnmount=="function")try{_r.onCommitFiberUnmount(uo,a)}catch{}switch(a.tag){case 5:xt||gs(a,s);case 6:var u=gt,f=dr;gt=null,ni(i,s,a),gt=u,dr=f,gt!==null&&(dr?(i=gt,a=a.stateNode,i.nodeType===8?i.parentNode.removeChild(a):i.removeChild(a)):gt.removeChild(a.stateNode));break;case 18:gt!==null&&(dr?(i=gt,a=a.stateNode,i.nodeType===8?ql(i.parentNode,a):i.nodeType===1&&ql(i,a),qs(i)):ql(gt,a.stateNode));break;case 4:u=gt,f=dr,gt=a.stateNode.containerInfo,dr=!0,ni(i,s,a),gt=u,dr=f;break;case 0:case 11:case 14:case 15:if(!xt&&(u=a.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){f=u=u.next;do{var m=f,y=m.destroy;m=m.tag,y!==void 0&&((m&2)!==0||(m&4)!==0)&&Dc(a,s,y),f=f.next}while(f!==u)}ni(i,s,a);break;case 1:if(!xt&&(gs(a,s),u=a.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=a.memoizedProps,u.state=a.memoizedState,u.componentWillUnmount()}catch(k){Ve(a,s,k)}ni(i,s,a);break;case 21:ni(i,s,a);break;case 22:a.mode&1?(xt=(u=xt)||a.memoizedState!==null,ni(i,s,a),xt=u):ni(i,s,a);break;default:ni(i,s,a)}}function Rp(i){var s=i.updateQueue;if(s!==null){i.updateQueue=null;var a=i.stateNode;a===null&&(a=i.stateNode=new Cy),s.forEach(function(u){var f=Ty.bind(null,i,u);a.has(u)||(a.add(u),u.then(f,f))})}}function fr(i,s){var a=s.deletions;if(a!==null)for(var u=0;u<a.length;u++){var f=a[u];try{var m=i,y=s,k=y;e:for(;k!==null;){switch(k.tag){case 5:gt=k.stateNode,dr=!1;break e;case 3:gt=k.stateNode.containerInfo,dr=!0;break e;case 4:gt=k.stateNode.containerInfo,dr=!0;break e}k=k.return}if(gt===null)throw Error(r(160));Pp(m,y,f),gt=null,dr=!1;var R=f.alternate;R!==null&&(R.return=null),f.return=null}catch(I){Ve(f,s,I)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Np(s,i),s=s.sibling}function Np(i,s){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(fr(s,i),wr(i),u&4){try{gn(3,i,i.return),Jo(3,i)}catch(he){Ve(i,i.return,he)}try{gn(5,i,i.return)}catch(he){Ve(i,i.return,he)}}break;case 1:fr(s,i),wr(i),u&512&&a!==null&&gs(a,a.return);break;case 5:if(fr(s,i),wr(i),u&512&&a!==null&&gs(a,a.return),i.flags&32){var f=i.stateNode;try{Bs(f,"")}catch(he){Ve(i,i.return,he)}}if(u&4&&(f=i.stateNode,f!=null)){var m=i.memoizedProps,y=a!==null?a.memoizedProps:m,k=i.type,R=i.updateQueue;if(i.updateQueue=null,R!==null)try{k==="input"&&m.type==="radio"&&m.name!=null&&rd(f,m),hl(k,y);var I=hl(k,m);for(y=0;y<R.length;y+=2){var Z=R[y],ee=R[y+1];Z==="style"?ud(f,ee):Z==="dangerouslySetInnerHTML"?ld(f,ee):Z==="children"?Bs(f,ee):W(f,Z,ee,I)}switch(k){case"input":ol(f,m);break;case"textarea":nd(f,m);break;case"select":var J=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!m.multiple;var ae=m.value;ae!=null?Yi(f,!!m.multiple,ae,!1):J!==!!m.multiple&&(m.defaultValue!=null?Yi(f,!!m.multiple,m.defaultValue,!0):Yi(f,!!m.multiple,m.multiple?[]:"",!1))}f[nn]=m}catch(he){Ve(i,i.return,he)}}break;case 6:if(fr(s,i),wr(i),u&4){if(i.stateNode===null)throw Error(r(162));f=i.stateNode,m=i.memoizedProps;try{f.nodeValue=m}catch(he){Ve(i,i.return,he)}}break;case 3:if(fr(s,i),wr(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{qs(s.containerInfo)}catch(he){Ve(i,i.return,he)}break;case 4:fr(s,i),wr(i);break;case 13:fr(s,i),wr(i),f=i.child,f.flags&8192&&(m=f.memoizedState!==null,f.stateNode.isHidden=m,!m||f.alternate!==null&&f.alternate.memoizedState!==null||(Ic=Ye())),u&4&&Rp(i);break;case 22:if(Z=a!==null&&a.memoizedState!==null,i.mode&1?(xt=(I=xt)||Z,fr(s,i),xt=I):fr(s,i),wr(i),u&8192){if(I=i.memoizedState!==null,(i.stateNode.isHidden=I)&&!Z&&(i.mode&1)!==0)for(ce=i,Z=i.child;Z!==null;){for(ee=ce=Z;ce!==null;){switch(J=ce,ae=J.child,J.tag){case 0:case 11:case 14:case 15:gn(4,J,J.return);break;case 1:gs(J,J.return);var ue=J.stateNode;if(typeof ue.componentWillUnmount=="function"){u=J,a=J.return;try{s=u,ue.props=s.memoizedProps,ue.state=s.memoizedState,ue.componentWillUnmount()}catch(he){Ve(u,a,he)}}break;case 5:gs(J,J.return);break;case 22:if(J.memoizedState!==null){Mp(ee);continue}}ae!==null?(ae.return=J,ce=ae):Mp(ee)}Z=Z.sibling}e:for(Z=null,ee=i;;){if(ee.tag===5){if(Z===null){Z=ee;try{f=ee.stateNode,I?(m=f.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(k=ee.stateNode,R=ee.memoizedProps.style,y=R!=null&&R.hasOwnProperty("display")?R.display:null,k.style.display=cd("display",y))}catch(he){Ve(i,i.return,he)}}}else if(ee.tag===6){if(Z===null)try{ee.stateNode.nodeValue=I?"":ee.memoizedProps}catch(he){Ve(i,i.return,he)}}else if((ee.tag!==22&&ee.tag!==23||ee.memoizedState===null||ee===i)&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===i)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===i)break e;Z===ee&&(Z=null),ee=ee.return}Z===ee&&(Z=null),ee.sibling.return=ee.return,ee=ee.sibling}}break;case 19:fr(s,i),wr(i),u&4&&Rp(i);break;case 21:break;default:fr(s,i),wr(i)}}function wr(i){var s=i.flags;if(s&2){try{e:{for(var a=i.return;a!==null;){if(kp(a)){var u=a;break e}a=a.return}throw Error(r(160))}switch(u.tag){case 5:var f=u.stateNode;u.flags&32&&(Bs(f,""),u.flags&=-33);var m=Ep(i);Tc(i,m,f);break;case 3:case 4:var y=u.stateNode.containerInfo,k=Ep(i);Oc(i,k,y);break;default:throw Error(r(161))}}catch(R){Ve(i,i.return,R)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Ey(i,s,a){ce=i,Lp(i)}function Lp(i,s,a){for(var u=(i.mode&1)!==0;ce!==null;){var f=ce,m=f.child;if(f.tag===22&&u){var y=f.memoizedState!==null||Xo;if(!y){var k=f.alternate,R=k!==null&&k.memoizedState!==null||xt;k=Xo;var I=xt;if(Xo=y,(xt=R)&&!I)for(ce=f;ce!==null;)y=ce,R=y.child,y.tag===22&&y.memoizedState!==null?Op(f):R!==null?(R.return=y,ce=R):Op(f);for(;m!==null;)ce=m,Lp(m),m=m.sibling;ce=f,Xo=k,xt=I}Dp(i)}else(f.subtreeFlags&8772)!==0&&m!==null?(m.return=f,ce=m):Dp(i)}}function Dp(i){for(;ce!==null;){var s=ce;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:xt||Jo(5,s);break;case 1:var u=s.stateNode;if(s.flags&4&&!xt)if(a===null)u.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:hr(s.type,a.memoizedProps);u.componentDidUpdate(f,a.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var m=s.updateQueue;m!==null&&Mf(s,m,u);break;case 3:var y=s.updateQueue;if(y!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Mf(s,y,a)}break;case 5:var k=s.stateNode;if(a===null&&s.flags&4){a=k;var R=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&a.focus();break;case"img":R.src&&(a.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var I=s.alternate;if(I!==null){var Z=I.memoizedState;if(Z!==null){var ee=Z.dehydrated;ee!==null&&qs(ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}xt||s.flags&512&&Mc(s)}catch(J){Ve(s,s.return,J)}}if(s===i){ce=null;break}if(a=s.sibling,a!==null){a.return=s.return,ce=a;break}ce=s.return}}function Mp(i){for(;ce!==null;){var s=ce;if(s===i){ce=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ce=a;break}ce=s.return}}function Op(i){for(;ce!==null;){var s=ce;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Jo(4,s)}catch(R){Ve(s,a,R)}break;case 1:var u=s.stateNode;if(typeof u.componentDidMount=="function"){var f=s.return;try{u.componentDidMount()}catch(R){Ve(s,f,R)}}var m=s.return;try{Mc(s)}catch(R){Ve(s,m,R)}break;case 5:var y=s.return;try{Mc(s)}catch(R){Ve(s,y,R)}}}catch(R){Ve(s,s.return,R)}if(s===i){ce=null;break}var k=s.sibling;if(k!==null){k.return=s.return,ce=k;break}ce=s.return}}var Py=Math.ceil,Zo=A.ReactCurrentDispatcher,jc=A.ReactCurrentOwner,Jt=A.ReactCurrentBatchConfig,Ne=0,ct=null,Je=null,_t=0,Ht=0,_s=ei(0),rt=0,_n=null,Li=0,ea=0,Bc=0,vn=null,Tt=null,Ic=0,vs=1/0,Ir=null,ta=!1,Ac=null,oi=null,ra=!1,ai=null,ia=0,yn=0,Fc=null,sa=-1,na=0;function kt(){return(Ne&6)!==0?Ye():sa!==-1?sa:sa=Ye()}function li(i){return(i.mode&1)===0?1:(Ne&2)!==0&&_t!==0?_t&-_t:uy.transition!==null?(na===0&&(na=kd()),na):(i=Me,i!==0||(i=window.event,i=i===void 0?16:Td(i.type)),i)}function pr(i,s,a,u){if(50<yn)throw yn=0,Fc=null,Error(r(185));$s(i,a,u),((Ne&2)===0||i!==ct)&&(i===ct&&((Ne&2)===0&&(ea|=a),rt===4&&ci(i,_t)),jt(i,u),a===1&&Ne===0&&(s.mode&1)===0&&(vs=Ye()+500,Oo&&ri()))}function jt(i,s){var a=i.callbackNode;u0(i,s);var u=po(i,i===ct?_t:0);if(u===0)a!==null&&xd(a),i.callbackNode=null,i.callbackPriority=0;else if(s=u&-u,i.callbackPriority!==s){if(a!=null&&xd(a),s===1)i.tag===0?cy(jp.bind(null,i)):Sf(jp.bind(null,i)),ny(function(){(Ne&6)===0&&ri()}),a=null;else{switch(Ed(u)){case 1:a=vl;break;case 4:a=bd;break;case 16:a=co;break;case 536870912:a=Cd;break;default:a=co}a=Wp(a,Tp.bind(null,i))}i.callbackPriority=s,i.callbackNode=a}}function Tp(i,s){if(sa=-1,na=0,(Ne&6)!==0)throw Error(r(327));var a=i.callbackNode;if(ys()&&i.callbackNode!==a)return null;var u=po(i,i===ct?_t:0);if(u===0)return null;if((u&30)!==0||(u&i.expiredLanes)!==0||s)s=oa(i,u);else{s=u;var f=Ne;Ne|=2;var m=Ip();(ct!==i||_t!==s)&&(Ir=null,vs=Ye()+500,Mi(i,s));do try{Ly();break}catch(k){Bp(i,k)}while(!0);ic(),Zo.current=m,Ne=f,Je!==null?s=0:(ct=null,_t=0,s=rt)}if(s!==0){if(s===2&&(f=yl(i),f!==0&&(u=f,s=zc(i,f))),s===1)throw a=_n,Mi(i,0),ci(i,u),jt(i,Ye()),a;if(s===6)ci(i,u);else{if(f=i.current.alternate,(u&30)===0&&!Ry(f)&&(s=oa(i,u),s===2&&(m=yl(i),m!==0&&(u=m,s=zc(i,m))),s===1))throw a=_n,Mi(i,0),ci(i,u),jt(i,Ye()),a;switch(i.finishedWork=f,i.finishedLanes=u,s){case 0:case 1:throw Error(r(345));case 2:Oi(i,Tt,Ir);break;case 3:if(ci(i,u),(u&130023424)===u&&(s=Ic+500-Ye(),10<s)){if(po(i,0)!==0)break;if(f=i.suspendedLanes,(f&u)!==u){kt(),i.pingedLanes|=i.suspendedLanes&f;break}i.timeoutHandle=Vl(Oi.bind(null,i,Tt,Ir),s);break}Oi(i,Tt,Ir);break;case 4:if(ci(i,u),(u&4194240)===u)break;for(s=i.eventTimes,f=-1;0<u;){var y=31-lr(u);m=1<<y,y=s[y],y>f&&(f=y),u&=~m}if(u=f,u=Ye()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Py(u/1960))-u,10<u){i.timeoutHandle=Vl(Oi.bind(null,i,Tt,Ir),u);break}Oi(i,Tt,Ir);break;case 5:Oi(i,Tt,Ir);break;default:throw Error(r(329))}}}return jt(i,Ye()),i.callbackNode===a?Tp.bind(null,i):null}function zc(i,s){var a=vn;return i.current.memoizedState.isDehydrated&&(Mi(i,s).flags|=256),i=oa(i,s),i!==2&&(s=Tt,Tt=a,s!==null&&Hc(s)),i}function Hc(i){Tt===null?Tt=i:Tt.push.apply(Tt,i)}function Ry(i){for(var s=i;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var u=0;u<a.length;u++){var f=a[u],m=f.getSnapshot;f=f.value;try{if(!cr(m(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ci(i,s){for(s&=~Bc,s&=~ea,i.suspendedLanes|=s,i.pingedLanes&=~s,i=i.expirationTimes;0<s;){var a=31-lr(s),u=1<<a;i[a]=-1,s&=~u}}function jp(i){if((Ne&6)!==0)throw Error(r(327));ys();var s=po(i,0);if((s&1)===0)return jt(i,Ye()),null;var a=oa(i,s);if(i.tag!==0&&a===2){var u=yl(i);u!==0&&(s=u,a=zc(i,u))}if(a===1)throw a=_n,Mi(i,0),ci(i,s),jt(i,Ye()),a;if(a===6)throw Error(r(345));return i.finishedWork=i.current.alternate,i.finishedLanes=s,Oi(i,Tt,Ir),jt(i,Ye()),null}function $c(i,s){var a=Ne;Ne|=1;try{return i(s)}finally{Ne=a,Ne===0&&(vs=Ye()+500,Oo&&ri())}}function Di(i){ai!==null&&ai.tag===0&&(Ne&6)===0&&ys();var s=Ne;Ne|=1;var a=Jt.transition,u=Me;try{if(Jt.transition=null,Me=1,i)return i()}finally{Me=u,Jt.transition=a,Ne=s,(Ne&6)===0&&ri()}}function Wc(){Ht=_s.current,Be(_s)}function Mi(i,s){i.finishedWork=null,i.finishedLanes=0;var a=i.timeoutHandle;if(a!==-1&&(i.timeoutHandle=-1,sy(a)),Je!==null)for(a=Je.return;a!==null;){var u=a;switch(Jl(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Do();break;case 3:ps(),Be(Dt),Be(yt),hc();break;case 5:cc(u);break;case 4:ps();break;case 13:Be(He);break;case 19:Be(He);break;case 10:sc(u.type._context);break;case 22:case 23:Wc()}a=a.return}if(ct=i,Je=i=ui(i.current,null),_t=Ht=s,rt=0,_n=null,Bc=ea=Li=0,Tt=vn=null,Pi!==null){for(s=0;s<Pi.length;s++)if(a=Pi[s],u=a.interleaved,u!==null){a.interleaved=null;var f=u.next,m=a.pending;if(m!==null){var y=m.next;m.next=f,u.next=y}a.pending=u}Pi=null}return i}function Bp(i,s){do{var a=Je;try{if(ic(),Wo.current=qo,Uo){for(var u=$e.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}Uo=!1}if(Ni=0,lt=tt=$e=null,hn=!1,dn=0,jc.current=null,a===null||a.return===null){rt=1,_n=s,Je=null;break}e:{var m=i,y=a.return,k=a,R=s;if(s=_t,k.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var I=R,Z=k,ee=Z.tag;if((Z.mode&1)===0&&(ee===0||ee===11||ee===15)){var J=Z.alternate;J?(Z.updateQueue=J.updateQueue,Z.memoizedState=J.memoizedState,Z.lanes=J.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var ae=ap(y);if(ae!==null){ae.flags&=-257,lp(ae,y,k,m,s),ae.mode&1&&op(m,I,s),s=ae,R=I;var ue=s.updateQueue;if(ue===null){var he=new Set;he.add(R),s.updateQueue=he}else ue.add(R);break e}else{if((s&1)===0){op(m,I,s),Uc();break e}R=Error(r(426))}}else if(Ae&&k.mode&1){var Ge=ap(y);if(Ge!==null){(Ge.flags&65536)===0&&(Ge.flags|=256),lp(Ge,y,k,m,s),tc(ms(R,k));break e}}m=R=ms(R,k),rt!==4&&(rt=2),vn===null?vn=[m]:vn.push(m),m=y;do{switch(m.tag){case 3:m.flags|=65536,s&=-s,m.lanes|=s;var T=sp(m,R,s);Df(m,T);break e;case 1:k=R;var L=m.type,j=m.stateNode;if((m.flags&128)===0&&(typeof L.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(oi===null||!oi.has(j)))){m.flags|=65536,s&=-s,m.lanes|=s;var ie=np(m,k,s);Df(m,ie);break e}}m=m.return}while(m!==null)}Fp(a)}catch(de){s=de,Je===a&&a!==null&&(Je=a=a.return);continue}break}while(!0)}function Ip(){var i=Zo.current;return Zo.current=qo,i===null?qo:i}function Uc(){(rt===0||rt===3||rt===2)&&(rt=4),ct===null||(Li&268435455)===0&&(ea&268435455)===0||ci(ct,_t)}function oa(i,s){var a=Ne;Ne|=2;var u=Ip();(ct!==i||_t!==s)&&(Ir=null,Mi(i,s));do try{Ny();break}catch(f){Bp(i,f)}while(!0);if(ic(),Ne=a,Zo.current=u,Je!==null)throw Error(r(261));return ct=null,_t=0,rt}function Ny(){for(;Je!==null;)Ap(Je)}function Ly(){for(;Je!==null&&!t0();)Ap(Je)}function Ap(i){var s=$p(i.alternate,i,Ht);i.memoizedProps=i.pendingProps,s===null?Fp(i):Je=s,jc.current=null}function Fp(i){var s=i;do{var a=s.alternate;if(i=s.return,(s.flags&32768)===0){if(a=xy(a,s,Ht),a!==null){Je=a;return}}else{if(a=by(a,s),a!==null){a.flags&=32767,Je=a;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{rt=6,Je=null;return}}if(s=s.sibling,s!==null){Je=s;return}Je=s=i}while(s!==null);rt===0&&(rt=5)}function Oi(i,s,a){var u=Me,f=Jt.transition;try{Jt.transition=null,Me=1,Dy(i,s,a,u)}finally{Jt.transition=f,Me=u}return null}function Dy(i,s,a,u){do ys();while(ai!==null);if((Ne&6)!==0)throw Error(r(327));a=i.finishedWork;var f=i.finishedLanes;if(a===null)return null;if(i.finishedWork=null,i.finishedLanes=0,a===i.current)throw Error(r(177));i.callbackNode=null,i.callbackPriority=0;var m=a.lanes|a.childLanes;if(h0(i,m),i===ct&&(Je=ct=null,_t=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||ra||(ra=!0,Wp(co,function(){return ys(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=Jt.transition,Jt.transition=null;var y=Me;Me=1;var k=Ne;Ne|=4,jc.current=null,ky(i,a),Np(a,i),X0(Ul),_o=!!Wl,Ul=Wl=null,i.current=a,Ey(a),r0(),Ne=k,Me=y,Jt.transition=m}else i.current=a;if(ra&&(ra=!1,ai=i,ia=f),m=i.pendingLanes,m===0&&(oi=null),n0(a.stateNode),jt(i,Ye()),s!==null)for(u=i.onRecoverableError,a=0;a<s.length;a++)f=s[a],u(f.value,{componentStack:f.stack,digest:f.digest});if(ta)throw ta=!1,i=Ac,Ac=null,i;return(ia&1)!==0&&i.tag!==0&&ys(),m=i.pendingLanes,(m&1)!==0?i===Fc?yn++:(yn=0,Fc=i):yn=0,ri(),null}function ys(){if(ai!==null){var i=Ed(ia),s=Jt.transition,a=Me;try{if(Jt.transition=null,Me=16>i?16:i,ai===null)var u=!1;else{if(i=ai,ai=null,ia=0,(Ne&6)!==0)throw Error(r(331));var f=Ne;for(Ne|=4,ce=i.current;ce!==null;){var m=ce,y=m.child;if((ce.flags&16)!==0){var k=m.deletions;if(k!==null){for(var R=0;R<k.length;R++){var I=k[R];for(ce=I;ce!==null;){var Z=ce;switch(Z.tag){case 0:case 11:case 15:gn(8,Z,m)}var ee=Z.child;if(ee!==null)ee.return=Z,ce=ee;else for(;ce!==null;){Z=ce;var J=Z.sibling,ae=Z.return;if(Cp(Z),Z===I){ce=null;break}if(J!==null){J.return=ae,ce=J;break}ce=ae}}}var ue=m.alternate;if(ue!==null){var he=ue.child;if(he!==null){ue.child=null;do{var Ge=he.sibling;he.sibling=null,he=Ge}while(he!==null)}}ce=m}}if((m.subtreeFlags&2064)!==0&&y!==null)y.return=m,ce=y;else e:for(;ce!==null;){if(m=ce,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:gn(9,m,m.return)}var T=m.sibling;if(T!==null){T.return=m.return,ce=T;break e}ce=m.return}}var L=i.current;for(ce=L;ce!==null;){y=ce;var j=y.child;if((y.subtreeFlags&2064)!==0&&j!==null)j.return=y,ce=j;else e:for(y=L;ce!==null;){if(k=ce,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:Jo(9,k)}}catch(de){Ve(k,k.return,de)}if(k===y){ce=null;break e}var ie=k.sibling;if(ie!==null){ie.return=k.return,ce=ie;break e}ce=k.return}}if(Ne=f,ri(),_r&&typeof _r.onPostCommitFiberRoot=="function")try{_r.onPostCommitFiberRoot(uo,i)}catch{}u=!0}return u}finally{Me=a,Jt.transition=s}}return!1}function zp(i,s,a){s=ms(a,s),s=sp(i,s,1),i=si(i,s,1),s=kt(),i!==null&&($s(i,1,s),jt(i,s))}function Ve(i,s,a){if(i.tag===3)zp(i,i,a);else for(;s!==null;){if(s.tag===3){zp(s,i,a);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(oi===null||!oi.has(u))){i=ms(a,i),i=np(s,i,1),s=si(s,i,1),i=kt(),s!==null&&($s(s,1,i),jt(s,i));break}}s=s.return}}function My(i,s,a){var u=i.pingCache;u!==null&&u.delete(s),s=kt(),i.pingedLanes|=i.suspendedLanes&a,ct===i&&(_t&a)===a&&(rt===4||rt===3&&(_t&130023424)===_t&&500>Ye()-Ic?Mi(i,0):Bc|=a),jt(i,s)}function Hp(i,s){s===0&&((i.mode&1)===0?s=1:(s=fo,fo<<=1,(fo&130023424)===0&&(fo=4194304)));var a=kt();i=Tr(i,s),i!==null&&($s(i,s,a),jt(i,a))}function Oy(i){var s=i.memoizedState,a=0;s!==null&&(a=s.retryLane),Hp(i,a)}function Ty(i,s){var a=0;switch(i.tag){case 13:var u=i.stateNode,f=i.memoizedState;f!==null&&(a=f.retryLane);break;case 19:u=i.stateNode;break;default:throw Error(r(314))}u!==null&&u.delete(s),Hp(i,a)}var $p;$p=function(i,s,a){if(i!==null)if(i.memoizedProps!==s.pendingProps||Dt.current)Ot=!0;else{if((i.lanes&a)===0&&(s.flags&128)===0)return Ot=!1,wy(i,s,a);Ot=(i.flags&131072)!==0}else Ot=!1,Ae&&(s.flags&1048576)!==0&&wf(s,jo,s.index);switch(s.lanes=0,s.tag){case 2:var u=s.type;Go(i,s),i=s.pendingProps;var f=as(s,yt.current);fs(s,a),f=pc(null,s,u,i,f,a);var m=mc();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Mt(u)?(m=!0,Mo(s)):m=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,ac(s),f.updater=Qo,s.stateNode=f,f._reactInternals=s,wc(s,u,i,a),s=kc(null,s,u,!0,m,a)):(s.tag=0,Ae&&m&&Xl(s),Ct(null,s,f,a),s=s.child),s;case 16:u=s.elementType;e:{switch(Go(i,s),i=s.pendingProps,f=u._init,u=f(u._payload),s.type=u,f=s.tag=By(u),i=hr(u,i),f){case 0:s=Cc(null,s,u,i,a);break e;case 1:s=pp(null,s,u,i,a);break e;case 11:s=cp(null,s,u,i,a);break e;case 14:s=up(null,s,u,hr(u.type,i),a);break e}throw Error(r(306,u,""))}return s;case 0:return u=s.type,f=s.pendingProps,f=s.elementType===u?f:hr(u,f),Cc(i,s,u,f,a);case 1:return u=s.type,f=s.pendingProps,f=s.elementType===u?f:hr(u,f),pp(i,s,u,f,a);case 3:e:{if(mp(s),i===null)throw Error(r(387));u=s.pendingProps,m=s.memoizedState,f=m.element,Lf(i,s),Ho(s,u,null,a);var y=s.memoizedState;if(u=y.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){f=ms(Error(r(423)),s),s=gp(i,s,u,a,f);break e}else if(u!==f){f=ms(Error(r(424)),s),s=gp(i,s,u,a,f);break e}else for(zt=Zr(s.stateNode.containerInfo.firstChild),Ft=s,Ae=!0,ur=null,a=Rf(s,null,u,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(us(),u===f){s=Br(i,s,a);break e}Ct(i,s,u,a)}s=s.child}return s;case 5:return Of(s),i===null&&ec(s),u=s.type,f=s.pendingProps,m=i!==null?i.memoizedProps:null,y=f.children,Kl(u,f)?y=null:m!==null&&Kl(u,m)&&(s.flags|=32),fp(i,s),Ct(i,s,y,a),s.child;case 6:return i===null&&ec(s),null;case 13:return _p(i,s,a);case 4:return lc(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=hs(s,null,u,a):Ct(i,s,u,a),s.child;case 11:return u=s.type,f=s.pendingProps,f=s.elementType===u?f:hr(u,f),cp(i,s,u,f,a);case 7:return Ct(i,s,s.pendingProps,a),s.child;case 8:return Ct(i,s,s.pendingProps.children,a),s.child;case 12:return Ct(i,s,s.pendingProps.children,a),s.child;case 10:e:{if(u=s.type._context,f=s.pendingProps,m=s.memoizedProps,y=f.value,Te(Ao,u._currentValue),u._currentValue=y,m!==null)if(cr(m.value,y)){if(m.children===f.children&&!Dt.current){s=Br(i,s,a);break e}}else for(m=s.child,m!==null&&(m.return=s);m!==null;){var k=m.dependencies;if(k!==null){y=m.child;for(var R=k.firstContext;R!==null;){if(R.context===u){if(m.tag===1){R=jr(-1,a&-a),R.tag=2;var I=m.updateQueue;if(I!==null){I=I.shared;var Z=I.pending;Z===null?R.next=R:(R.next=Z.next,Z.next=R),I.pending=R}}m.lanes|=a,R=m.alternate,R!==null&&(R.lanes|=a),nc(m.return,a,s),k.lanes|=a;break}R=R.next}}else if(m.tag===10)y=m.type===s.type?null:m.child;else if(m.tag===18){if(y=m.return,y===null)throw Error(r(341));y.lanes|=a,k=y.alternate,k!==null&&(k.lanes|=a),nc(y,a,s),y=m.sibling}else y=m.child;if(y!==null)y.return=m;else for(y=m;y!==null;){if(y===s){y=null;break}if(m=y.sibling,m!==null){m.return=y.return,y=m;break}y=y.return}m=y}Ct(i,s,f.children,a),s=s.child}return s;case 9:return f=s.type,u=s.pendingProps.children,fs(s,a),f=Gt(f),u=u(f),s.flags|=1,Ct(i,s,u,a),s.child;case 14:return u=s.type,f=hr(u,s.pendingProps),f=hr(u.type,f),up(i,s,u,f,a);case 15:return hp(i,s,s.type,s.pendingProps,a);case 17:return u=s.type,f=s.pendingProps,f=s.elementType===u?f:hr(u,f),Go(i,s),s.tag=1,Mt(u)?(i=!0,Mo(s)):i=!1,fs(s,a),rp(s,u,f),wc(s,u,f,a),kc(null,s,u,!0,i,a);case 19:return yp(i,s,a);case 22:return dp(i,s,a)}throw Error(r(156,s.tag))};function Wp(i,s){return wd(i,s)}function jy(i,s,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zt(i,s,a,u){return new jy(i,s,a,u)}function Kc(i){return i=i.prototype,!(!i||!i.isReactComponent)}function By(i){if(typeof i=="function")return Kc(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Q)return 11;if(i===O)return 14}return 2}function ui(i,s){var a=i.alternate;return a===null?(a=Zt(i.tag,s,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=s,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&14680064,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,s=i.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a}function aa(i,s,a,u,f,m){var y=2;if(u=i,typeof i=="function")Kc(i)&&(y=1);else if(typeof i=="string")y=5;else e:switch(i){case te:return Ti(a.children,f,m,s);case ne:y=8,f|=8;break;case re:return i=Zt(12,a,s,f|2),i.elementType=re,i.lanes=m,i;case $:return i=Zt(13,a,s,f),i.elementType=$,i.lanes=m,i;case H:return i=Zt(19,a,s,f),i.elementType=H,i.lanes=m,i;case U:return la(a,f,m,s);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case F:y=10;break e;case V:y=9;break e;case Q:y=11;break e;case O:y=14;break e;case D:y=16,u=null;break e}throw Error(r(130,i==null?i:typeof i,""))}return s=Zt(y,a,s,f),s.elementType=i,s.type=u,s.lanes=m,s}function Ti(i,s,a,u){return i=Zt(7,i,u,s),i.lanes=a,i}function la(i,s,a,u){return i=Zt(22,i,u,s),i.elementType=U,i.lanes=a,i.stateNode={isHidden:!1},i}function Vc(i,s,a){return i=Zt(6,i,null,s),i.lanes=a,i}function qc(i,s,a){return s=Zt(4,i.children!==null?i.children:[],i.key,s),s.lanes=a,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}function Iy(i,s,a,u,f){this.tag=s,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sl(0),this.expirationTimes=Sl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sl(0),this.identifierPrefix=u,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Qc(i,s,a,u,f,m,y,k,R){return i=new Iy(i,s,a,k,R),s===1?(s=1,m===!0&&(s|=8)):s=0,m=Zt(3,null,null,s),i.current=m,m.stateNode=i,m.memoizedState={element:u,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},ac(m),i}function Ay(i,s,a){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:X,key:u==null?null:""+u,children:i,containerInfo:s,implementation:a}}function Up(i){if(!i)return ti;i=i._reactInternals;e:{if(xi(i)!==i||i.tag!==1)throw Error(r(170));var s=i;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Mt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(r(171))}if(i.tag===1){var a=i.type;if(Mt(a))return vf(i,a,s)}return s}function Kp(i,s,a,u,f,m,y,k,R){return i=Qc(a,u,!0,i,f,m,y,k,R),i.context=Up(null),a=i.current,u=kt(),f=li(a),m=jr(u,f),m.callback=s??null,si(a,m,f),i.current.lanes=f,$s(i,f,u),jt(i,u),i}function ca(i,s,a,u){var f=s.current,m=kt(),y=li(f);return a=Up(a),s.context===null?s.context=a:s.pendingContext=a,s=jr(m,y),s.payload={element:i},u=u===void 0?null:u,u!==null&&(s.callback=u),i=si(f,s,y),i!==null&&(pr(i,f,y,m),zo(i,f,y)),y}function ua(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Vp(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<s?a:s}}function Yc(i,s){Vp(i,s),(i=i.alternate)&&Vp(i,s)}function Fy(){return null}var qp=typeof reportError=="function"?reportError:function(i){console.error(i)};function Gc(i){this._internalRoot=i}ha.prototype.render=Gc.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));ca(i,s,null,null)},ha.prototype.unmount=Gc.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;Di(function(){ca(null,i,null,null)}),s[Lr]=null}};function ha(i){this._internalRoot=i}ha.prototype.unstable_scheduleHydration=function(i){if(i){var s=Nd();i={blockedOn:null,target:i,priority:s};for(var a=0;a<Gr.length&&s!==0&&s<Gr[a].priority;a++);Gr.splice(a,0,i),a===0&&Md(i)}};function Xc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function da(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Qp(){}function zy(i,s,a,u,f){if(f){if(typeof u=="function"){var m=u;u=function(){var I=ua(y);m.call(I)}}var y=Kp(s,u,i,0,null,!1,!1,"",Qp);return i._reactRootContainer=y,i[Lr]=y.current,rn(i.nodeType===8?i.parentNode:i),Di(),y}for(;f=i.lastChild;)i.removeChild(f);if(typeof u=="function"){var k=u;u=function(){var I=ua(R);k.call(I)}}var R=Qc(i,0,!1,null,null,!1,!1,"",Qp);return i._reactRootContainer=R,i[Lr]=R.current,rn(i.nodeType===8?i.parentNode:i),Di(function(){ca(s,R,a,u)}),R}function fa(i,s,a,u,f){var m=a._reactRootContainer;if(m){var y=m;if(typeof f=="function"){var k=f;f=function(){var R=ua(y);k.call(R)}}ca(s,y,i,f)}else y=zy(a,s,i,f,u);return ua(y)}Pd=function(i){switch(i.tag){case 3:var s=i.stateNode;if(s.current.memoizedState.isDehydrated){var a=Hs(s.pendingLanes);a!==0&&(wl(s,a|1),jt(s,Ye()),(Ne&6)===0&&(vs=Ye()+500,ri()))}break;case 13:Di(function(){var u=Tr(i,1);if(u!==null){var f=kt();pr(u,i,1,f)}}),Yc(i,1)}},xl=function(i){if(i.tag===13){var s=Tr(i,134217728);if(s!==null){var a=kt();pr(s,i,134217728,a)}Yc(i,134217728)}},Rd=function(i){if(i.tag===13){var s=li(i),a=Tr(i,s);if(a!==null){var u=kt();pr(a,i,s,u)}Yc(i,s)}},Nd=function(){return Me},Ld=function(i,s){var a=Me;try{return Me=i,s()}finally{Me=a}},pl=function(i,s,a){switch(s){case"input":if(ol(i,a),s=a.name,a.type==="radio"&&s!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var u=a[s];if(u!==i&&u.form===i.form){var f=Lo(u);if(!f)throw Error(r(90));ar(u),ol(u,f)}}}break;case"textarea":nd(i,a);break;case"select":s=a.value,s!=null&&Yi(i,!!a.multiple,s,!1)}},pd=$c,md=Di;var Hy={usingClientEntryPoint:!1,Events:[on,ns,Lo,dd,fd,$c]},Sn={findFiberByHostInstance:bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$y={bundleType:Sn.bundleType,version:Sn.version,rendererPackageName:Sn.rendererPackageName,rendererConfig:Sn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=yd(i),i===null?null:i.stateNode},findFiberByHostInstance:Sn.findFiberByHostInstance||Fy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pa.isDisabled&&pa.supportsFiber)try{uo=pa.inject($y),_r=pa}catch{}}return Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hy,Bt.createPortal=function(i,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xc(s))throw Error(r(200));return Ay(i,s,null,a)},Bt.createRoot=function(i,s){if(!Xc(i))throw Error(r(299));var a=!1,u="",f=qp;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Qc(i,1,!1,null,null,a,!1,u,f),i[Lr]=s.current,rn(i.nodeType===8?i.parentNode:i),new Gc(s)},Bt.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=yd(s),i=i===null?null:i.stateNode,i},Bt.flushSync=function(i){return Di(i)},Bt.hydrate=function(i,s,a){if(!da(s))throw Error(r(200));return fa(null,i,s,!0,a)},Bt.hydrateRoot=function(i,s,a){if(!Xc(i))throw Error(r(405));var u=a!=null&&a.hydratedSources||null,f=!1,m="",y=qp;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),s=Kp(s,null,i,1,a??null,f,!1,m,y),i[Lr]=s.current,rn(i),u)for(i=0;i<u.length;i++)a=u[i],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new ha(s)},Bt.render=function(i,s,a){if(!da(s))throw Error(r(200));return fa(null,i,s,!1,a)},Bt.unmountComponentAtNode=function(i){if(!da(i))throw Error(r(40));return i._reactRootContainer?(Di(function(){fa(null,null,i,!1,function(){i._reactRootContainer=null,i[Lr]=null})}),!0):!1},Bt.unstable_batchedUpdates=$c,Bt.unstable_renderSubtreeIntoContainer=function(i,s,a,u){if(!da(a))throw Error(r(200));if(i==null||i._reactInternals===void 0)throw Error(r(38));return fa(i,s,a,!1,u)},Bt.version="18.3.1-next-f1338f8080-20240426",Bt}var rm;function Gy(){if(rm)return eu.exports;rm=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),eu.exports=Yy(),eu.exports}var im;function Xy(){if(im)return ma;im=1;var e=Gy();return ma.createRoot=e.createRoot,ma.hydrateRoot=e.hydrateRoot,ma}var Jy=Xy();const Zy=qg(Jy);var Ns=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},eS={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},tS=class{#e=eS;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},Ai=new tS;function rS(e){setTimeout(e,0)}var $i=typeof window>"u"||"Deno"in globalThis;function Pt(){}function iS(e,t){return typeof e=="function"?e(t):e}function Du(e){return typeof e=="number"&&e>=0&&e!==1/0}function Qg(e,t){return Math.max(e+(t||0)-Date.now(),0)}function _i(e,t){return typeof e=="function"?e(t):e}function rr(e,t){return typeof e=="function"?e(t):e}function sm(e,t){const{type:r="all",exact:n,fetchStatus:o,predicate:l,queryKey:c,stale:h}=e;if(c){if(n){if(t.queryHash!==Ph(c,t.options))return!1}else if(!Hn(t.queryKey,c))return!1}if(r!=="all"){const p=t.isActive();if(r==="active"&&!p||r==="inactive"&&p)return!1}return!(typeof h=="boolean"&&t.isStale()!==h||o&&o!==t.state.fetchStatus||l&&!l(t))}function nm(e,t){const{exact:r,status:n,predicate:o,mutationKey:l}=e;if(l){if(!t.options.mutationKey)return!1;if(r){if(Wi(t.options.mutationKey)!==Wi(l))return!1}else if(!Hn(t.options.mutationKey,l))return!1}return!(n&&t.state.status!==n||o&&!o(t))}function Ph(e,t){return(t?.queryKeyHashFn||Wi)(e)}function Wi(e){return JSON.stringify(e,(t,r)=>Mu(r)?Object.keys(r).sort().reduce((n,o)=>(n[o]=r[o],n),{}):r)}function Hn(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Hn(e[r],t[r])):!1}var sS=Object.prototype.hasOwnProperty;function Yg(e,t){if(e===t)return e;const r=om(e)&&om(t);if(!r&&!(Mu(e)&&Mu(t)))return t;const o=(r?e:Object.keys(e)).length,l=r?t:Object.keys(t),c=l.length,h=r?new Array(c):{};let p=0;for(let d=0;d<c;d++){const v=r?d:l[d],_=e[v],S=t[v];if(_===S){h[v]=_,(r?d<o:sS.call(e,v))&&p++;continue}if(_===null||S===null||typeof _!="object"||typeof S!="object"){h[v]=S;continue}const x=Yg(_,S);h[v]=x,x===_&&p++}return o===c&&p===o?e:h}function Ia(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function om(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Mu(e){if(!am(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!am(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function am(e){return Object.prototype.toString.call(e)==="[object Object]"}function nS(e){return new Promise(t=>{Ai.setTimeout(t,e)})}function Ou(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Yg(e,t):t}function oS(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function aS(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var Rh=Symbol();function Gg(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===Rh?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Nh(e,t){return typeof e=="function"?e(...t):!!e}function lS(e,t,r){let n=!1,o;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(o??=t(),n||(n=!0,o.aborted?r():o.addEventListener("abort",r,{once:!0})),o)}),e}var cS=class extends Ns{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!$i&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Lh=new cS;function Tu(){let e,t;const r=new Promise((o,l)=>{e=o,t=l});r.status="pending",r.catch(()=>{});function n(o){Object.assign(r,o),delete r.resolve,delete r.reject}return r.resolve=o=>{n({status:"fulfilled",value:o}),e(o)},r.reject=o=>{n({status:"rejected",reason:o}),t(o)},r}var uS=rS;function hS(){let e=[],t=0,r=h=>{h()},n=h=>{h()},o=uS;const l=h=>{t?e.push(h):o(()=>{r(h)})},c=()=>{const h=e;e=[],h.length&&o(()=>{n(()=>{h.forEach(p=>{r(p)})})})};return{batch:h=>{let p;t++;try{p=h()}finally{t--,t||c()}return p},batchCalls:h=>(...p)=>{l(()=>{h(...p)})},schedule:l,setNotifyFunction:h=>{r=h},setBatchNotifyFunction:h=>{n=h},setScheduler:h=>{o=h}}}var nt=hS(),dS=class extends Ns{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!$i&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},Aa=new dS;function fS(e){return Math.min(1e3*2**e,3e4)}function Xg(e){return(e??"online")==="online"?Aa.isOnline():!0}var ju=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Jg(e){let t=!1,r=0,n;const o=Tu(),l=()=>o.status!=="pending",c=b=>{if(!l()){const E=new ju(b);S(E),e.onCancel?.(E)}},h=()=>{t=!0},p=()=>{t=!1},d=()=>Lh.isFocused()&&(e.networkMode==="always"||Aa.isOnline())&&e.canRun(),v=()=>Xg(e.networkMode)&&e.canRun(),_=b=>{l()||(n?.(),o.resolve(b))},S=b=>{l()||(n?.(),o.reject(b))},x=()=>new Promise(b=>{n=E=>{(l()||d())&&b(E)},e.onPause?.()}).then(()=>{n=void 0,l()||e.onContinue?.()}),w=()=>{if(l())return;let b;const E=r===0?e.initialPromise:void 0;try{b=E??e.fn()}catch(M){b=Promise.reject(M)}Promise.resolve(b).then(_).catch(M=>{if(l())return;const B=e.retry??($i?0:3),W=e.retryDelay??fS,A=typeof W=="function"?W(r,M):W,K=B===!0||typeof B=="number"&&r<B||typeof B=="function"&&B(r,M);if(t||!K){S(M);return}r++,e.onFail?.(r,M),nS(A).then(()=>d()?void 0:x()).then(()=>{t?S(M):w()})})};return{promise:o,status:()=>o.status,cancel:c,continue:()=>(n?.(),o),cancelRetry:h,continueRetry:p,canStart:v,start:()=>(v()?w():x().then(w),o)}}var Zg=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Du(this.gcTime)&&(this.#e=Ai.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??($i?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Ai.clearTimeout(this.#e),this.#e=void 0)}},pS=class extends Zg{#e;#t;#r;#s;#i;#o;#a;constructor(e){super(),this.#a=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.client,this.#r=this.#s.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=cm(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(e){if(this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=cm(this.options);t.data!==void 0&&(this.setState(lm(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=Ou(this.state.data,e,this.options);return this.#n({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#n({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#i?.promise;return this.#i?.cancel(e),t?t.then(Pt).catch(Pt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>rr(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Rh||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>_i(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Qg(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#i&&(this.#a?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#n({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#i?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(p=>p.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,n=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(this.#a=!0,r.signal)})},o=()=>{const h=Gg(this.options,t),d=(()=>{const v={client:this.#s,queryKey:this.queryKey,meta:this.meta};return n(v),v})();return this.#a=!1,this.options.persister?this.options.persister(h,d,this):h(d)},c=(()=>{const h={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:o};return n(h),h})();this.options.behavior?.onFetch(c,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==c.fetchOptions?.meta)&&this.#n({type:"fetch",meta:c.fetchOptions?.meta}),this.#i=Jg({initialPromise:t?.initialPromise,fn:c.fetchFn,onCancel:h=>{h instanceof ju&&h.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(h,p)=>{this.#n({type:"failed",failureCount:h,error:p})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0});try{const h=await this.#i.start();if(h===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(h),this.#r.config.onSuccess?.(h,this),this.#r.config.onSettled?.(h,this.state.error,this),h}catch(h){if(h instanceof ju){if(h.silent)return this.#i.promise;if(h.revert){if(this.state.data===void 0)throw h;return this.state.data}}throw this.#n({type:"error",error:h}),this.#r.config.onError?.(h,this),this.#r.config.onSettled?.(this.state.data,h,this),h}finally{this.scheduleGc()}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...e_(r.data,this.options),fetchMeta:e.meta??null};case"success":const n={...r,...lm(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?n:void 0,n;case"error":const o=e.error;return{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),nt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function e_(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Xg(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function lm(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function cm(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var mS=class extends Ns{constructor(e,t){super(),this.options=t,this.#e=e,this.#n=null,this.#a=Tu(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#s=void 0;#i;#o;#a;#n;#m;#d;#f;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),um(this.#t,this.options)?this.#h():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Bu(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Bu(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#S(),this.#w(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof rr(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#x(),this.#t.setOptions(this.options),t._defaulted&&!Ia(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const n=this.hasListeners();n&&hm(this.#t,r,this.options,t)&&this.#h(),this.updateResult(),n&&(this.#t!==r||rr(this.options.enabled,this.#t)!==rr(t.enabled,this.#t)||_i(this.options.staleTime,this.#t)!==_i(t.staleTime,this.#t))&&this.#g();const o=this.#_();n&&(this.#t!==r||rr(this.options.enabled,this.#t)!==rr(t.enabled,this.#t)||o!==this.#l)&&this.#v(o)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return _S(this,r)&&(this.#s=r,this.#o=this.options,this.#i=this.#t.state),r}getCurrentResult(){return this.#s}trackResult(e,t){return new Proxy(e,{get:(r,n)=>(this.trackProp(n),t?.(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,n))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#h({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#h(e){this.#x();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Pt)),t}#g(){this.#S();const e=_i(this.options.staleTime,this.#t);if($i||this.#s.isStale||!Du(e))return;const r=Qg(this.#s.dataUpdatedAt,e)+1;this.#c=Ai.setTimeout(()=>{this.#s.isStale||this.updateResult()},r)}#_(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(e){this.#w(),this.#l=e,!($i||rr(this.options.enabled,this.#t)===!1||!Du(this.#l)||this.#l===0)&&(this.#u=Ai.setInterval(()=>{(this.options.refetchIntervalInBackground||Lh.isFocused())&&this.#h()},this.#l))}#y(){this.#g(),this.#v(this.#_())}#S(){this.#c&&(Ai.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#u&&(Ai.clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const r=this.#t,n=this.options,o=this.#s,l=this.#i,c=this.#o,p=e!==r?e.state:this.#r,{state:d}=e;let v={...d},_=!1,S;if(t._optimisticResults){const ne=this.hasListeners(),re=!ne&&um(e,t),F=ne&&hm(e,r,t,n);(re||F)&&(v={...v,...e_(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(v.fetchStatus="idle")}let{error:x,errorUpdatedAt:w,status:b}=v;S=v.data;let E=!1;if(t.placeholderData!==void 0&&S===void 0&&b==="pending"){let ne;o?.isPlaceholderData&&t.placeholderData===c?.placeholderData?(ne=o.data,E=!0):ne=typeof t.placeholderData=="function"?t.placeholderData(this.#f?.state.data,this.#f):t.placeholderData,ne!==void 0&&(b="success",S=Ou(o?.data,ne,t),_=!0)}if(t.select&&S!==void 0&&!E)if(o&&S===l?.data&&t.select===this.#m)S=this.#d;else try{this.#m=t.select,S=t.select(S),S=Ou(o?.data,S,t),this.#d=S,this.#n=null}catch(ne){this.#n=ne}this.#n&&(x=this.#n,S=this.#d,w=Date.now(),b="error");const M=v.fetchStatus==="fetching",B=b==="pending",W=b==="error",A=B&&M,K=S!==void 0,te={status:b,fetchStatus:v.fetchStatus,isPending:B,isSuccess:b==="success",isError:W,isInitialLoading:A,isLoading:A,data:S,dataUpdatedAt:v.dataUpdatedAt,error:x,errorUpdatedAt:w,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>p.dataUpdateCount||v.errorUpdateCount>p.errorUpdateCount,isFetching:M,isRefetching:M&&!B,isLoadingError:W&&!K,isPaused:v.fetchStatus==="paused",isPlaceholderData:_,isRefetchError:W&&K,isStale:Dh(e,t),refetch:this.refetch,promise:this.#a,isEnabled:rr(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const ne=V=>{te.status==="error"?V.reject(te.error):te.data!==void 0&&V.resolve(te.data)},re=()=>{const V=this.#a=te.promise=Tu();ne(V)},F=this.#a;switch(F.status){case"pending":e.queryHash===r.queryHash&&ne(F);break;case"fulfilled":(te.status==="error"||te.data!==F.value)&&re();break;case"rejected":(te.status!=="error"||te.error!==F.reason)&&re();break}}return te}updateResult(){const e=this.#s,t=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#o=this.options,this.#i.data!==void 0&&(this.#f=this.#t),Ia(t,e))return;this.#s=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,o=typeof n=="function"?n():n;if(o==="all"||!o&&!this.#p.size)return!0;const l=new Set(o??this.#p);return this.options.throwOnError&&l.add("error"),Object.keys(this.#s).some(c=>{const h=c;return this.#s[h]!==e[h]&&l.has(h)})};this.#b({listeners:r()})}#x(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#b(e){nt.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function gS(e,t){return rr(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function um(e,t){return gS(e,t)||e.state.data!==void 0&&Bu(e,t,t.refetchOnMount)}function Bu(e,t,r){if(rr(t.enabled,e)!==!1&&_i(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&Dh(e,t)}return!1}function hm(e,t,r,n){return(e!==t||rr(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Dh(e,r)}function Dh(e,t){return rr(t.enabled,e)!==!1&&e.isStaleByTime(_i(t.staleTime,e))}function _S(e,t){return!Ia(e.getCurrentResult(),t)}function dm(e){return{onFetch:(t,r)=>{const n=t.options,o=t.fetchOptions?.meta?.fetchMore?.direction,l=t.state.data?.pages||[],c=t.state.data?.pageParams||[];let h={pages:[],pageParams:[]},p=0;const d=async()=>{let v=!1;const _=w=>{lS(w,()=>t.signal,()=>v=!0)},S=Gg(t.options,t.fetchOptions),x=async(w,b,E)=>{if(v)return Promise.reject();if(b==null&&w.pages.length)return Promise.resolve(w);const B=(()=>{const X={client:t.client,queryKey:t.queryKey,pageParam:b,direction:E?"backward":"forward",meta:t.options.meta};return _(X),X})(),W=await S(B),{maxPages:A}=t.options,K=E?aS:oS;return{pages:K(w.pages,W,A),pageParams:K(w.pageParams,b,A)}};if(o&&l.length){const w=o==="backward",b=w?vS:fm,E={pages:l,pageParams:c},M=b(n,E);h=await x(E,M,w)}else{const w=e??l.length;do{const b=p===0?c[0]??n.initialPageParam:fm(n,h);if(p>0&&b==null)break;h=await x(h,b),p++}while(p<w)}return h};t.options.persister?t.fetchFn=()=>t.options.persister?.(d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=d}}}function fm(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function vS(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var yS=class extends Zg{#e;#t;#r;#s;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||t_(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#i({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=Jg({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(l,c)=>{this.#i({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#i({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const n=this.state.status==="pending",o=!this.#s.canStart();try{if(n)t();else{this.#i({type:"pending",variables:e,isPaused:o}),await this.#r.config.onMutate?.(e,this,r);const c=await this.options.onMutate?.(e,r);c!==this.state.context&&this.#i({type:"pending",context:c,variables:e,isPaused:o})}const l=await this.#s.start();return await this.#r.config.onSuccess?.(l,e,this.state.context,this,r),await this.options.onSuccess?.(l,e,this.state.context,r),await this.#r.config.onSettled?.(l,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(l,null,e,this.state.context,r),this.#i({type:"success",data:l}),l}catch(l){try{await this.#r.config.onError?.(l,e,this.state.context,this,r)}catch(c){Promise.reject(c)}try{await this.options.onError?.(l,e,this.state.context,r)}catch(c){Promise.reject(c)}try{await this.#r.config.onSettled?.(void 0,l,this.state.variables,this.state.context,this,r)}catch(c){Promise.reject(c)}try{await this.options.onSettled?.(void 0,l,e,this.state.context,r)}catch(c){Promise.reject(c)}throw this.#i({type:"error",error:l}),l}finally{this.#r.runNext(this)}}#i(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),nt.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function t_(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var SS=class extends Ns{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,r){const n=new yS({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){this.#e.add(e);const t=ga(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=ga(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const n=r.indexOf(e);n!==-1&&r.splice(n,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=ga(e);if(typeof t=="string"){const n=this.#t.get(t)?.find(o=>o.state.status==="pending");return!n||n===e}else return!0}runNext(e){const t=ga(e);return typeof t=="string"?this.#t.get(t)?.find(n=>n!==e&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){nt.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>nm(t,r))}findAll(e={}){return this.getAll().filter(t=>nm(e,t))}notify(e){nt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return nt.batch(()=>Promise.all(e.map(t=>t.continue().catch(Pt))))}};function ga(e){return e.options.scope?.id}var wS=class extends Ns{#e;#t=void 0;#r;#s;constructor(t,r){super(),this.#e=t,this.setOptions(r),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#e.defaultMutationOptions(t),Ia(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&Wi(r.mutationKey)!==Wi(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#i(),this.#o(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#i(),this.#o()}mutate(t,r){return this.#s=r,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#i(){const t=this.#r?.state??t_();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#o(t){nt.batch(()=>{if(this.#s&&this.hasListeners()){const r=this.#t.variables,n=this.#t.context,o={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#s.onSuccess?.(t.data,r,n,o)}catch(l){Promise.reject(l)}try{this.#s.onSettled?.(t.data,null,r,n,o)}catch(l){Promise.reject(l)}}else if(t?.type==="error"){try{this.#s.onError?.(t.error,r,n,o)}catch(l){Promise.reject(l)}try{this.#s.onSettled?.(void 0,t.error,r,n,o)}catch(l){Promise.reject(l)}}}this.listeners.forEach(r=>{r(this.#t)})})}},xS=class extends Ns{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const n=t.queryKey,o=t.queryHash??Ph(n,t);let l=this.get(o);return l||(l=new pS({client:e,queryKey:n,queryHash:o,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(l)),l}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){nt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>sm(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>sm(e,r)):t}notify(e){nt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){nt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){nt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},bS=class{#e;#t;#r;#s;#i;#o;#a;#n;constructor(e={}){this.#e=e.queryCache||new xS,this.#t=e.mutationCache||new SS,this.#r=e.defaultOptions||{},this.#s=new Map,this.#i=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=Lh.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#n=Aa.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#n?.(),this.#n=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(_i(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),l=this.#e.get(n.queryHash)?.state.data,c=iS(t,l);if(c!==void 0)return this.#e.build(this,n).setData(c,{...r,manual:!0})}setQueriesData(e,t,r){return nt.batch(()=>this.#e.findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;nt.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return nt.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=nt.batch(()=>this.#e.findAll(e).map(o=>o.cancel(r)));return Promise.all(n).then(Pt).catch(Pt)}invalidateQueries(e,t={}){return nt.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=nt.batch(()=>this.#e.findAll(e).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let l=o.fetch(void 0,r);return r.throwOnError||(l=l.catch(Pt)),o.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(n).then(Pt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(_i(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Pt).catch(Pt)}fetchInfiniteQuery(e){return e.behavior=dm(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Pt).catch(Pt)}ensureInfiniteQueryData(e){return e.behavior=dm(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Aa.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#s.set(Wi(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#s.values()],r={};return t.forEach(n=>{Hn(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){this.#i.set(Wi(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#i.values()],r={};return t.forEach(n=>{Hn(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Ph(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Rh&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},r_=C.createContext(void 0),qi=e=>{const t=C.useContext(r_);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},CS=({client:e,children:t})=>(C.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),g.jsx(r_.Provider,{value:e,children:t})),i_=C.createContext(!1),kS=()=>C.useContext(i_);i_.Provider;function ES(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var PS=C.createContext(ES()),RS=()=>C.useContext(PS),NS=(e,t,r)=>{const n=r?.state.error&&typeof e.throwOnError=="function"?Nh(e.throwOnError,[r.state.error,r]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||n)&&(t.isReset()||(e.retryOnMount=!1))},LS=e=>{C.useEffect(()=>{e.clearReset()},[e])},DS=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:o})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(o&&e.data===void 0||Nh(r,[e.error,n])),MS=e=>{if(e.suspense){const r=o=>o==="static"?o:Math.max(o??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...o)=>r(n(...o)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},OS=(e,t)=>e.isLoading&&e.isFetching&&!t,TS=(e,t)=>e?.suspense&&t.isPending,pm=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function jS(e,t,r){const n=kS(),o=RS(),l=qi(),c=l.defaultQueryOptions(e);l.getDefaultOptions().queries?._experimental_beforeQuery?.(c);const h=l.getQueryCache().get(c.queryHash);c._optimisticResults=n?"isRestoring":"optimistic",MS(c),NS(c,o,h),LS(o);const p=!l.getQueryCache().get(c.queryHash),[d]=C.useState(()=>new t(l,c)),v=d.getOptimisticResult(c),_=!n&&e.subscribed!==!1;if(C.useSyncExternalStore(C.useCallback(S=>{const x=_?d.subscribe(nt.batchCalls(S)):Pt;return d.updateResult(),x},[d,_]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),C.useEffect(()=>{d.setOptions(c)},[c,d]),TS(c,v))throw pm(c,d,o);if(DS({result:v,errorResetBoundary:o,throwOnError:c.throwOnError,query:h,suspense:c.suspense}))throw v.error;return l.getDefaultOptions().queries?._experimental_afterQuery?.(c,v),c.experimental_prefetchInRender&&!$i&&OS(v,n)&&(p?pm(c,d,o):h?.promise)?.catch(Pt).finally(()=>{d.updateResult()}),c.notifyOnChangeProps?v:d.trackResult(v)}function Vt(e,t){return jS(e,mS)}function Si(e,t){const r=qi(),[n]=C.useState(()=>new wS(r,e));C.useEffect(()=>{n.setOptions(e)},[n,e]);const o=C.useSyncExternalStore(C.useCallback(c=>n.subscribe(nt.batchCalls(c)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),l=C.useCallback((c,h)=>{n.mutate(c,h).catch(Pt)},[n]);if(o.error&&Nh(n.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:l,mutateAsync:o.mutate}}/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var mm="popstate";function BS(e={}){function t(n,o){let{pathname:l,search:c,hash:h}=n.location;return Iu("",{pathname:l,search:c,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(n,o){return typeof o=="string"?o:$n(o)}return AS(t,r,null,e)}function Fe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function nr(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function IS(){return Math.random().toString(36).substring(2,10)}function gm(e,t){return{usr:e.state,key:e.key,idx:t}}function Iu(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ls(t):t,state:r,key:t&&t.key||n||IS()}}function $n({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ls(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function AS(e,t,r,n={}){let{window:o=document.defaultView,v5Compat:l=!1}=n,c=o.history,h="POP",p=null,d=v();d==null&&(d=0,c.replaceState({...c.state,idx:d},""));function v(){return(c.state||{idx:null}).idx}function _(){h="POP";let E=v(),M=E==null?null:E-d;d=E,p&&p({action:h,location:b.location,delta:M})}function S(E,M){h="PUSH";let B=Iu(b.location,E,M);d=v()+1;let W=gm(B,d),A=b.createHref(B);try{c.pushState(W,"",A)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;o.location.assign(A)}l&&p&&p({action:h,location:b.location,delta:1})}function x(E,M){h="REPLACE";let B=Iu(b.location,E,M);d=v();let W=gm(B,d),A=b.createHref(B);c.replaceState(W,"",A),l&&p&&p({action:h,location:b.location,delta:0})}function w(E){return FS(E)}let b={get action(){return h},get location(){return e(o,c)},listen(E){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(mm,_),p=E,()=>{o.removeEventListener(mm,_),p=null}},createHref(E){return t(o,E)},createURL:w,encodeLocation(E){let M=w(E);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:S,replace:x,go(E){return c.go(E)}};return b}function FS(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Fe(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:$n(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function s_(e,t,r="/"){return zS(e,t,r,!1)}function zS(e,t,r,n){let o=typeof t=="string"?Ls(t):t,l=Wr(o.pathname||"/",r);if(l==null)return null;let c=n_(e);HS(c);let h=null;for(let p=0;h==null&&p<c.length;++p){let d=JS(l);h=GS(c[p],d,n)}return h}function n_(e,t=[],r=[],n="",o=!1){let l=(c,h,p=o,d)=>{let v={relativePath:d===void 0?c.path||"":d,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(n)&&p)return;Fe(v.relativePath.startsWith(n),`Absolute route path "${v.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(n.length)}let _=Hr([n,v.relativePath]),S=r.concat(v);c.children&&c.children.length>0&&(Fe(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),n_(c.children,t,S,_,p)),!(c.path==null&&!c.index)&&t.push({path:_,score:QS(_,c.index),routesMeta:S})};return e.forEach((c,h)=>{if(c.path===""||!c.path?.includes("?"))l(c,h);else for(let p of o_(c.path))l(c,h,!0,p)}),t}function o_(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,o=r.endsWith("?"),l=r.replace(/\?$/,"");if(n.length===0)return o?[l,""]:[l];let c=o_(n.join("/")),h=[];return h.push(...c.map(p=>p===""?l:[l,p].join("/"))),o&&h.push(...c),h.map(p=>e.startsWith("/")&&p===""?"/":p)}function HS(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:YS(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var $S=/^:[\w-]+$/,WS=3,US=2,KS=1,VS=10,qS=-2,_m=e=>e==="*";function QS(e,t){let r=e.split("/"),n=r.length;return r.some(_m)&&(n+=qS),t&&(n+=US),r.filter(o=>!_m(o)).reduce((o,l)=>o+($S.test(l)?WS:l===""?KS:VS),n)}function YS(e,t){return e.length===t.length&&e.slice(0,-1).every((n,o)=>n===t[o])?e[e.length-1]-t[t.length-1]:0}function GS(e,t,r=!1){let{routesMeta:n}=e,o={},l="/",c=[];for(let h=0;h<n.length;++h){let p=n[h],d=h===n.length-1,v=l==="/"?t:t.slice(l.length)||"/",_=Fa({path:p.relativePath,caseSensitive:p.caseSensitive,end:d},v),S=p.route;if(!_&&d&&r&&!n[n.length-1].route.index&&(_=Fa({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!_)return null;Object.assign(o,_.params),c.push({params:o,pathname:Hr([l,_.pathname]),pathnameBase:rw(Hr([l,_.pathnameBase])),route:S}),_.pathnameBase!=="/"&&(l=Hr([l,_.pathnameBase]))}return c}function Fa(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=XS(e.path,e.caseSensitive,e.end),o=t.match(r);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:n.reduce((d,{paramName:v,isOptional:_},S)=>{if(v==="*"){let w=h[S]||"";c=l.slice(0,l.length-w.length).replace(/(.)\/+$/,"$1")}const x=h[S];return _&&!x?d[v]=void 0:d[v]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:c,pattern:e}}function XS(e,t=!1,r=!0){nr(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,p)=>(n.push({paramName:h,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),n]}function JS(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return nr(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Wr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var a_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ZS=e=>a_.test(e);function ew(e,t="/"){let{pathname:r,search:n="",hash:o=""}=typeof e=="string"?Ls(e):e,l;if(r)if(ZS(r))l=r;else{if(r.includes("//")){let c=r;r=r.replace(/\/\/+/g,"/"),nr(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${r}`)}r.startsWith("/")?l=vm(r.substring(1),"/"):l=vm(r,t)}else l=t;return{pathname:l,search:iw(n),hash:sw(o)}}function vm(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function iu(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function tw(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Mh(e){let t=tw(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function Oh(e,t,r,n=!1){let o;typeof e=="string"?o=Ls(e):(o={...e},Fe(!o.pathname||!o.pathname.includes("?"),iu("?","pathname","search",o)),Fe(!o.pathname||!o.pathname.includes("#"),iu("#","pathname","hash",o)),Fe(!o.search||!o.search.includes("#"),iu("#","search","hash",o)));let l=e===""||o.pathname==="",c=l?"/":o.pathname,h;if(c==null)h=r;else{let _=t.length-1;if(!n&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),_-=1;o.pathname=S.join("/")}h=_>=0?t[_]:"/"}let p=ew(o,h),d=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&r.endsWith("/");return!p.pathname.endsWith("/")&&(d||v)&&(p.pathname+="/"),p}var Hr=e=>e.join("/").replace(/\/\/+/g,"/"),rw=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),iw=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,sw=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,nw=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function ow(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function aw(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var l_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function c_(e,t){let r=e;if(typeof r!="string"||!a_.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let n=r,o=!1;if(l_)try{let l=new URL(window.location.href),c=r.startsWith("//")?new URL(l.protocol+r):new URL(r),h=Wr(c.pathname,t);c.origin===l.origin&&h!=null?r=h+c.search+c.hash:o=!0}catch{nr(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:o,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var u_=["POST","PUT","PATCH","DELETE"];new Set(u_);var lw=["GET",...u_];new Set(lw);var Ds=C.createContext(null);Ds.displayName="DataRouter";var Ja=C.createContext(null);Ja.displayName="DataRouterState";var cw=C.createContext(!1),h_=C.createContext({isTransitioning:!1});h_.displayName="ViewTransition";var uw=C.createContext(new Map);uw.displayName="Fetchers";var hw=C.createContext(null);hw.displayName="Await";var qt=C.createContext(null);qt.displayName="Navigation";var Jn=C.createContext(null);Jn.displayName="Location";var mr=C.createContext({outlet:null,matches:[],isDataRoute:!1});mr.displayName="Route";var Th=C.createContext(null);Th.displayName="RouteError";var d_="REACT_ROUTER_ERROR",dw="REDIRECT",fw="ROUTE_ERROR_RESPONSE";function pw(e){if(e.startsWith(`${d_}:${dw}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function mw(e){if(e.startsWith(`${d_}:${fw}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new nw(t.status,t.statusText,t.data)}catch{}}function gw(e,{relative:t}={}){Fe(Ms(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=C.useContext(qt),{hash:o,pathname:l,search:c}=Zn(e,{relative:t}),h=l;return r!=="/"&&(h=l==="/"?r:Hr([r,l])),n.createHref({pathname:h,search:c,hash:o})}function Ms(){return C.useContext(Jn)!=null}function Ur(){return Fe(Ms(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(Jn).location}var f_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function p_(e){C.useContext(qt).static||C.useLayoutEffect(e)}function jh(){let{isDataRoute:e}=C.useContext(mr);return e?Lw():_w()}function _w(){Fe(Ms(),"useNavigate() may be used only in the context of a <Router> component.");let e=C.useContext(Ds),{basename:t,navigator:r}=C.useContext(qt),{matches:n}=C.useContext(mr),{pathname:o}=Ur(),l=JSON.stringify(Mh(n)),c=C.useRef(!1);return p_(()=>{c.current=!0}),C.useCallback((p,d={})=>{if(nr(c.current,f_),!c.current)return;if(typeof p=="number"){r.go(p);return}let v=Oh(p,JSON.parse(l),o,d.relative==="path");e==null&&t!=="/"&&(v.pathname=v.pathname==="/"?t:Hr([t,v.pathname])),(d.replace?r.replace:r.push)(v,d.state,d)},[t,r,l,o,e])}C.createContext(null);function vw(){let{matches:e}=C.useContext(mr),t=e[e.length-1];return t?t.params:{}}function Zn(e,{relative:t}={}){let{matches:r}=C.useContext(mr),{pathname:n}=Ur(),o=JSON.stringify(Mh(r));return C.useMemo(()=>Oh(e,JSON.parse(o),n,t==="path"),[e,o,n,t])}function yw(e,t){return m_(e,t)}function m_(e,t,r,n,o){Fe(Ms(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=C.useContext(qt),{matches:c}=C.useContext(mr),h=c[c.length-1],p=h?h.params:{},d=h?h.pathname:"/",v=h?h.pathnameBase:"/",_=h&&h.route;{let B=_&&_.path||"";__(d,!_||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let S=Ur(),x;if(t){let B=typeof t=="string"?Ls(t):t;Fe(v==="/"||B.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${B.pathname}" was given in the \`location\` prop.`),x=B}else x=S;let w=x.pathname||"/",b=w;if(v!=="/"){let B=v.replace(/^\//,"").split("/");b="/"+w.replace(/^\//,"").split("/").slice(B.length).join("/")}let E=s_(e,{pathname:b});nr(_||E!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),nr(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=Cw(E&&E.map(B=>Object.assign({},B,{params:Object.assign({},p,B.params),pathname:Hr([v,l.encodeLocation?l.encodeLocation(B.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?v:Hr([v,l.encodeLocation?l.encodeLocation(B.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathnameBase])})),c,r,n,o);return t&&M?C.createElement(Jn.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},M):M}function Sw(){let e=Nw(),t=ow(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:n},l={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:l},"ErrorBoundary")," or"," ",C.createElement("code",{style:l},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},t),r?C.createElement("pre",{style:o},r):null,c)}var ww=C.createElement(Sw,null),g_=class extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const r=mw(e.digest);r&&(e=r)}let t=e!==void 0?C.createElement(mr.Provider,{value:this.props.routeContext},C.createElement(Th.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?C.createElement(xw,{error:e},t):t}};g_.contextType=cw;var su=new WeakMap;function xw({children:e,error:t}){let{basename:r}=C.useContext(qt);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let n=pw(t.digest);if(n){let o=su.get(t);if(o)throw o;let l=c_(n.location,r);if(l_&&!su.get(t))if(l.isExternal||n.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:n.replace}));throw su.set(t,c),c}return C.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return e}function bw({routeContext:e,match:t,children:r}){let n=C.useContext(Ds);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),C.createElement(mr.Provider,{value:e},r)}function Cw(e,t=[],r=null,n=null,o=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,c=r?.errors;if(c!=null){let v=l.findIndex(_=>_.route.id&&c?.[_.route.id]!==void 0);Fe(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,v+1))}let h=!1,p=-1;if(r)for(let v=0;v<l.length;v++){let _=l[v];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(p=v),_.route.id){let{loaderData:S,errors:x}=r,w=_.route.loader&&!S.hasOwnProperty(_.route.id)&&(!x||x[_.route.id]===void 0);if(_.route.lazy||w){h=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let d=r&&n?(v,_)=>{n(v,{location:r.location,params:r.matches?.[0]?.params??{},unstable_pattern:aw(r.matches),errorInfo:_})}:void 0;return l.reduceRight((v,_,S)=>{let x,w=!1,b=null,E=null;r&&(x=c&&_.route.id?c[_.route.id]:void 0,b=_.route.errorElement||ww,h&&(p<0&&S===0?(__("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,E=null):p===S&&(w=!0,E=_.route.hydrateFallbackElement||null)));let M=t.concat(l.slice(0,S+1)),B=()=>{let W;return x?W=b:w?W=E:_.route.Component?W=C.createElement(_.route.Component,null):_.route.element?W=_.route.element:W=v,C.createElement(bw,{match:_,routeContext:{outlet:v,matches:M,isDataRoute:r!=null},children:W})};return r&&(_.route.ErrorBoundary||_.route.errorElement||S===0)?C.createElement(g_,{location:r.location,revalidation:r.revalidation,component:b,error:x,children:B(),routeContext:{outlet:null,matches:M,isDataRoute:!0},onError:d}):B()},null)}function Bh(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kw(e){let t=C.useContext(Ds);return Fe(t,Bh(e)),t}function Ew(e){let t=C.useContext(Ja);return Fe(t,Bh(e)),t}function Pw(e){let t=C.useContext(mr);return Fe(t,Bh(e)),t}function Ih(e){let t=Pw(e),r=t.matches[t.matches.length-1];return Fe(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function Rw(){return Ih("useRouteId")}function Nw(){let e=C.useContext(Th),t=Ew("useRouteError"),r=Ih("useRouteError");return e!==void 0?e:t.errors?.[r]}function Lw(){let{router:e}=kw("useNavigate"),t=Ih("useNavigate"),r=C.useRef(!1);return p_(()=>{r.current=!0}),C.useCallback(async(o,l={})=>{nr(r.current,f_),r.current&&(typeof o=="number"?await e.navigate(o):await e.navigate(o,{fromRouteId:t,...l}))},[e,t])}var ym={};function __(e,t,r){!t&&!ym[e]&&(ym[e]=!0,nr(!1,r))}C.memo(Dw);function Dw({routes:e,future:t,state:r,onError:n}){return m_(e,void 0,r,n,t)}function nu({to:e,replace:t,state:r,relative:n}){Fe(Ms(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=C.useContext(qt);nr(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=C.useContext(mr),{pathname:c}=Ur(),h=jh(),p=Oh(e,Mh(l),c,n==="path"),d=JSON.stringify(p);return C.useEffect(()=>{h(JSON.parse(d),{replace:t,state:r,relative:n})},[h,d,n,t,r]),null}function Cr(e){Fe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Mw({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:o,static:l=!1,unstable_useTransitions:c}){Fe(!Ms(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=e.replace(/^\/*/,"/"),p=C.useMemo(()=>({basename:h,navigator:o,static:l,unstable_useTransitions:c,future:{}}),[h,o,l,c]);typeof r=="string"&&(r=Ls(r));let{pathname:d="/",search:v="",hash:_="",state:S=null,key:x="default"}=r,w=C.useMemo(()=>{let b=Wr(d,h);return b==null?null:{location:{pathname:b,search:v,hash:_,state:S,key:x},navigationType:n}},[h,d,v,_,S,x,n]);return nr(w!=null,`<Router basename="${h}"> is not able to match the URL "${d}${v}${_}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:C.createElement(qt.Provider,{value:p},C.createElement(Jn.Provider,{children:t,value:w}))}function Sm({children:e,location:t}){return yw(Au(e),t)}function Au(e,t=[]){let r=[];return C.Children.forEach(e,(n,o)=>{if(!C.isValidElement(n))return;let l=[...t,o];if(n.type===C.Fragment){r.push.apply(r,Au(n.props.children,l));return}Fe(n.type===Cr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Fe(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=Au(n.props.children,l)),r.push(c)}),r}var Pa="get",Ra="application/x-www-form-urlencoded";function Za(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function Ow(e){return Za(e)&&e.tagName.toLowerCase()==="button"}function Tw(e){return Za(e)&&e.tagName.toLowerCase()==="form"}function jw(e){return Za(e)&&e.tagName.toLowerCase()==="input"}function Bw(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Iw(e,t){return e.button===0&&(!t||t==="_self")&&!Bw(e)}var _a=null;function Aw(){if(_a===null)try{new FormData(document.createElement("form"),0),_a=!1}catch{_a=!0}return _a}var Fw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ou(e){return e!=null&&!Fw.has(e)?(nr(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ra}"`),null):e}function zw(e,t){let r,n,o,l,c;if(Tw(e)){let h=e.getAttribute("action");n=h?Wr(h,t):null,r=e.getAttribute("method")||Pa,o=ou(e.getAttribute("enctype"))||Ra,l=new FormData(e)}else if(Ow(e)||jw(e)&&(e.type==="submit"||e.type==="image")){let h=e.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=e.getAttribute("formaction")||h.getAttribute("action");if(n=p?Wr(p,t):null,r=e.getAttribute("formmethod")||h.getAttribute("method")||Pa,o=ou(e.getAttribute("formenctype"))||ou(h.getAttribute("enctype"))||Ra,l=new FormData(h,e),!Aw()){let{name:d,type:v,value:_}=e;if(v==="image"){let S=d?`${d}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else d&&l.append(d,_)}}else{if(Za(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Pa,n=null,o=Ra,c=e}return l&&o==="text/plain"&&(c=l,l=void 0),{action:n,method:r.toLowerCase(),encType:o,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ah(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Hw(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Wr(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function $w(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ww(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Uw(e,t,r){let n=await Promise.all(e.map(async o=>{let l=t.routes[o.route.id];if(l){let c=await $w(l,r);return c.links?c.links():[]}return[]}));return Qw(n.flat(1).filter(Ww).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function wm(e,t,r,n,o,l){let c=(p,d)=>r[d]?p.route.id!==r[d].route.id:!0,h=(p,d)=>r[d].pathname!==p.pathname||r[d].route.path?.endsWith("*")&&r[d].params["*"]!==p.params["*"];return l==="assets"?t.filter((p,d)=>c(p,d)||h(p,d)):l==="data"?t.filter((p,d)=>{let v=n.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(c(p,d)||h(p,d))return!0;if(p.route.shouldRevalidate){let _=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function Kw(e,t,{includeHydrateFallback:r}={}){return Vw(e.map(n=>{let o=t.routes[n.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),r&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function Vw(e){return[...new Set(e)]}function qw(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function Qw(e,t){let r=new Set;return new Set(t),e.reduce((n,o)=>{let l=JSON.stringify(qw(o));return r.has(l)||(r.add(l),n.push({key:l,link:o})),n},[])}function v_(){let e=C.useContext(Ds);return Ah(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Yw(){let e=C.useContext(Ja);return Ah(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Fh=C.createContext(void 0);Fh.displayName="FrameworkContext";function y_(){let e=C.useContext(Fh);return Ah(e,"You must render this element inside a <HydratedRouter> element"),e}function Gw(e,t){let r=C.useContext(Fh),[n,o]=C.useState(!1),[l,c]=C.useState(!1),{onFocus:h,onBlur:p,onMouseEnter:d,onMouseLeave:v,onTouchStart:_}=t,S=C.useRef(null);C.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let b=M=>{M.forEach(B=>{c(B.isIntersecting)})},E=new IntersectionObserver(b,{threshold:.5});return S.current&&E.observe(S.current),()=>{E.disconnect()}}},[e]),C.useEffect(()=>{if(n){let b=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(b)}}},[n]);let x=()=>{o(!0)},w=()=>{o(!1),c(!1)};return r?e!=="intent"?[l,S,{}]:[l,S,{onFocus:xn(h,x),onBlur:xn(p,w),onMouseEnter:xn(d,x),onMouseLeave:xn(v,w),onTouchStart:xn(_,x)}]:[!1,S,{}]}function xn(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function Xw({page:e,...t}){let{router:r}=v_(),n=C.useMemo(()=>s_(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?C.createElement(Zw,{page:e,matches:n,...t}):null}function Jw(e){let{manifest:t,routeModules:r}=y_(),[n,o]=C.useState([]);return C.useEffect(()=>{let l=!1;return Uw(e,t,r).then(c=>{l||o(c)}),()=>{l=!0}},[e,t,r]),n}function Zw({page:e,matches:t,...r}){let n=Ur(),{manifest:o,routeModules:l}=y_(),{basename:c}=v_(),{loaderData:h,matches:p}=Yw(),d=C.useMemo(()=>wm(e,t,p,o,n,"data"),[e,t,p,o,n]),v=C.useMemo(()=>wm(e,t,p,o,n,"assets"),[e,t,p,o,n]),_=C.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let w=new Set,b=!1;if(t.forEach(M=>{let B=o.routes[M.route.id];!B||!B.hasLoader||(!d.some(W=>W.route.id===M.route.id)&&M.route.id in h&&l[M.route.id]?.shouldRevalidate||B.hasClientLoader?b=!0:w.add(M.route.id))}),w.size===0)return[];let E=Hw(e,c,"data");return b&&w.size>0&&E.searchParams.set("_routes",t.filter(M=>w.has(M.route.id)).map(M=>M.route.id).join(",")),[E.pathname+E.search]},[c,h,n,o,d,t,e,l]),S=C.useMemo(()=>Kw(v,o),[v,o]),x=Jw(v);return C.createElement(C.Fragment,null,_.map(w=>C.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...r})),S.map(w=>C.createElement("link",{key:w,rel:"modulepreload",href:w,...r})),x.map(({key:w,link:b})=>C.createElement("link",{key:w,nonce:r.nonce,...b})))}function e1(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var t1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{t1&&(window.__reactRouterVersion="7.11.0")}catch{}function r1({basename:e,children:t,unstable_useTransitions:r,window:n}){let o=C.useRef();o.current==null&&(o.current=BS({window:n,v5Compat:!0}));let l=o.current,[c,h]=C.useState({action:l.action,location:l.location}),p=C.useCallback(d=>{r===!1?h(d):C.startTransition(()=>h(d))},[r]);return C.useLayoutEffect(()=>l.listen(p),[l,p]),C.createElement(Mw,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:r})}var S_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wn=C.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:o,reloadDocument:l,replace:c,state:h,target:p,to:d,preventScrollReset:v,viewTransition:_,unstable_defaultShouldRevalidate:S,...x},w){let{basename:b,unstable_useTransitions:E}=C.useContext(qt),M=typeof d=="string"&&S_.test(d),B=c_(d,b);d=B.to;let W=gw(d,{relative:o}),[A,K,X]=Gw(n,x),te=o1(d,{replace:c,state:h,target:p,preventScrollReset:v,relative:o,viewTransition:_,unstable_defaultShouldRevalidate:S,unstable_useTransitions:E});function ne(F){t&&t(F),F.defaultPrevented||te(F)}let re=C.createElement("a",{...x,...X,href:B.absoluteURL||W,onClick:B.isExternal||l?t:ne,ref:e1(w,K),target:p,"data-discover":!M&&r==="render"?"true":void 0});return A&&!M?C.createElement(C.Fragment,null,re,C.createElement(Xw,{page:W})):re});Wn.displayName="Link";var i1=C.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:o=!1,style:l,to:c,viewTransition:h,children:p,...d},v){let _=Zn(c,{relative:d.relative}),S=Ur(),x=C.useContext(Ja),{navigator:w,basename:b}=C.useContext(qt),E=x!=null&&h1(_)&&h===!0,M=w.encodeLocation?w.encodeLocation(_).pathname:_.pathname,B=S.pathname,W=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(B=B.toLowerCase(),W=W?W.toLowerCase():null,M=M.toLowerCase()),W&&b&&(W=Wr(W,b)||W);const A=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let K=B===M||!o&&B.startsWith(M)&&B.charAt(A)==="/",X=W!=null&&(W===M||!o&&W.startsWith(M)&&W.charAt(M.length)==="/"),te={isActive:K,isPending:X,isTransitioning:E},ne=K?t:void 0,re;typeof n=="function"?re=n(te):re=[n,K?"active":null,X?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let F=typeof l=="function"?l(te):l;return C.createElement(Wn,{...d,"aria-current":ne,className:re,ref:v,style:F,to:c,viewTransition:h},typeof p=="function"?p(te):p)});i1.displayName="NavLink";var s1=C.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:o,state:l,method:c=Pa,action:h,onSubmit:p,relative:d,preventScrollReset:v,viewTransition:_,unstable_defaultShouldRevalidate:S,...x},w)=>{let{unstable_useTransitions:b}=C.useContext(qt),E=c1(),M=u1(h,{relative:d}),B=c.toLowerCase()==="get"?"get":"post",W=typeof h=="string"&&S_.test(h),A=K=>{if(p&&p(K),K.defaultPrevented)return;K.preventDefault();let X=K.nativeEvent.submitter,te=X?.getAttribute("formmethod")||c,ne=()=>E(X||K.currentTarget,{fetcherKey:t,method:te,navigate:r,replace:o,state:l,relative:d,preventScrollReset:v,viewTransition:_,unstable_defaultShouldRevalidate:S});b&&r!==!1?C.startTransition(()=>ne()):ne()};return C.createElement("form",{ref:w,method:B,action:M,onSubmit:n?p:A,...x,"data-discover":!W&&e==="render"?"true":void 0})});s1.displayName="Form";function n1(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function w_(e){let t=C.useContext(Ds);return Fe(t,n1(e)),t}function o1(e,{target:t,replace:r,state:n,preventScrollReset:o,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:h,unstable_useTransitions:p}={}){let d=jh(),v=Ur(),_=Zn(e,{relative:l});return C.useCallback(S=>{if(Iw(S,t)){S.preventDefault();let x=r!==void 0?r:$n(v)===$n(_),w=()=>d(e,{replace:x,state:n,preventScrollReset:o,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:h});p?C.startTransition(()=>w()):w()}},[v,d,_,r,n,t,e,o,l,c,h,p])}var a1=0,l1=()=>`__${String(++a1)}__`;function c1(){let{router:e}=w_("useSubmit"),{basename:t}=C.useContext(qt),r=Rw(),n=e.fetch,o=e.navigate;return C.useCallback(async(l,c={})=>{let{action:h,method:p,encType:d,formData:v,body:_}=zw(l,t);if(c.navigate===!1){let S=c.fetcherKey||l1();await n(S,r,c.action||h,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:_,formMethod:c.method||p,formEncType:c.encType||d,flushSync:c.flushSync})}else await o(c.action||h,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:_,formMethod:c.method||p,formEncType:c.encType||d,replace:c.replace,state:c.state,fromRouteId:r,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,o,t,r])}function u1(e,{relative:t}={}){let{basename:r}=C.useContext(qt),n=C.useContext(mr);Fe(n,"useFormAction must be used inside a RouteContext");let[o]=n.matches.slice(-1),l={...Zn(e||".",{relative:t})},c=Ur();if(e==null){l.search=c.search;let h=new URLSearchParams(l.search),p=h.getAll("index");if(p.some(v=>v==="")){h.delete("index"),p.filter(_=>_).forEach(_=>h.append("index",_));let v=h.toString();l.search=v?`?${v}`:""}}return(!e||e===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(l.pathname=l.pathname==="/"?r:Hr([r,l.pathname])),$n(l)}function h1(e,{relative:t}={}){let r=C.useContext(h_);Fe(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=w_("useViewTransitionState"),o=Zn(e,{relative:t});if(!r.isTransitioning)return!1;let l=Wr(r.currentLocation.pathname,n)||r.currentLocation.pathname,c=Wr(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Fa(o.pathname,c)!=null||Fa(o.pathname,l)!=null}const ve=e=>typeof e=="string",bn=()=>{let e,t;const r=new Promise((n,o)=>{e=n,t=o});return r.resolve=e,r.reject=t,r},xm=e=>e==null?"":""+e,d1=(e,t,r)=>{e.forEach(n=>{t[n]&&(r[n]=t[n])})},f1=/###/g,bm=e=>e&&e.indexOf("###")>-1?e.replace(f1,"."):e,Cm=e=>!e||ve(e),Bn=(e,t,r)=>{const n=ve(t)?t.split("."):t;let o=0;for(;o<n.length-1;){if(Cm(e))return{};const l=bm(n[o]);!e[l]&&r&&(e[l]=new r),Object.prototype.hasOwnProperty.call(e,l)?e=e[l]:e={},++o}return Cm(e)?{}:{obj:e,k:bm(n[o])}},km=(e,t,r)=>{const{obj:n,k:o}=Bn(e,t,Object);if(n!==void 0||t.length===1){n[o]=r;return}let l=t[t.length-1],c=t.slice(0,t.length-1),h=Bn(e,c,Object);for(;h.obj===void 0&&c.length;)l=`${c[c.length-1]}.${l}`,c=c.slice(0,c.length-1),h=Bn(e,c,Object),h?.obj&&typeof h.obj[`${h.k}.${l}`]<"u"&&(h.obj=void 0);h.obj[`${h.k}.${l}`]=r},p1=(e,t,r,n)=>{const{obj:o,k:l}=Bn(e,t,Object);o[l]=o[l]||[],o[l].push(r)},za=(e,t)=>{const{obj:r,k:n}=Bn(e,t);if(r&&Object.prototype.hasOwnProperty.call(r,n))return r[n]},m1=(e,t,r)=>{const n=za(e,r);return n!==void 0?n:za(t,r)},x_=(e,t,r)=>{for(const n in t)n!=="__proto__"&&n!=="constructor"&&(n in e?ve(e[n])||e[n]instanceof String||ve(t[n])||t[n]instanceof String?r&&(e[n]=t[n]):x_(e[n],t[n],r):e[n]=t[n]);return e},Ss=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var g1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const _1=e=>ve(e)?e.replace(/[&<>"'\/]/g,t=>g1[t]):e;class v1{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const r=this.regExpMap.get(t);if(r!==void 0)return r;const n=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,n),this.regExpQueue.push(t),n}}const y1=[" ",",","?","!",";"],S1=new v1(20),w1=(e,t,r)=>{t=t||"",r=r||"";const n=y1.filter(c=>t.indexOf(c)<0&&r.indexOf(c)<0);if(n.length===0)return!0;const o=S1.getRegExp(`(${n.map(c=>c==="?"?"\\?":c).join("|")})`);let l=!o.test(e);if(!l){const c=e.indexOf(r);c>0&&!o.test(e.substring(0,c))&&(l=!0)}return l},Fu=(e,t,r=".")=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const n=t.split(r);let o=e;for(let l=0;l<n.length;){if(!o||typeof o!="object")return;let c,h="";for(let p=l;p<n.length;++p)if(p!==l&&(h+=r),h+=n[p],c=o[h],c!==void 0){if(["string","number","boolean"].indexOf(typeof c)>-1&&p<n.length-1)continue;l+=p-l+1;break}o=c}return o},Un=e=>e?.replace("_","-"),x1={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};class Ha{constructor(t,r={}){this.init(t,r)}init(t,r={}){this.prefix=r.prefix||"i18next:",this.logger=t||x1,this.options=r,this.debug=r.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,r,n,o){return o&&!this.debug?null:(ve(t[0])&&(t[0]=`${n}${this.prefix} ${t[0]}`),this.logger[r](t))}create(t){return new Ha(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Ha(this.logger,t)}}var Er=new Ha;class el{constructor(){this.observers={}}on(t,r){return t.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const o=this.observers[n].get(r)||0;this.observers[n].set(r,o+1)}),this}off(t,r){if(this.observers[t]){if(!r){delete this.observers[t];return}this.observers[t].delete(r)}}emit(t,...r){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([o,l])=>{for(let c=0;c<l;c++)o(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([o,l])=>{for(let c=0;c<l;c++)o.apply(o,[t,...r])})}}class Em extends el{constructor(t,r={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const r=this.options.ns.indexOf(t);r>-1&&this.options.ns.splice(r,1)}getResource(t,r,n,o={}){const l=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,c=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure;let h;t.indexOf(".")>-1?h=t.split("."):(h=[t,r],n&&(Array.isArray(n)?h.push(...n):ve(n)&&l?h.push(...n.split(l)):h.push(n)));const p=za(this.data,h);return!p&&!r&&!n&&t.indexOf(".")>-1&&(t=h[0],r=h[1],n=h.slice(2).join(".")),p||!c||!ve(n)?p:Fu(this.data?.[t]?.[r],n,l)}addResource(t,r,n,o,l={silent:!1}){const c=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator;let h=[t,r];n&&(h=h.concat(c?n.split(c):n)),t.indexOf(".")>-1&&(h=t.split("."),o=r,r=h[1]),this.addNamespaces(r),km(this.data,h,o),l.silent||this.emit("added",t,r,n,o)}addResources(t,r,n,o={silent:!1}){for(const l in n)(ve(n[l])||Array.isArray(n[l]))&&this.addResource(t,r,l,n[l],{silent:!0});o.silent||this.emit("added",t,r,n)}addResourceBundle(t,r,n,o,l,c={silent:!1,skipCopy:!1}){let h=[t,r];t.indexOf(".")>-1&&(h=t.split("."),o=n,n=r,r=h[1]),this.addNamespaces(r);let p=za(this.data,h)||{};c.skipCopy||(n=JSON.parse(JSON.stringify(n))),o?x_(p,n,l):p={...p,...n},km(this.data,h,p),c.silent||this.emit("added",t,r,n)}removeResourceBundle(t,r){this.hasResourceBundle(t,r)&&delete this.data[t][r],this.removeNamespaces(r),this.emit("removed",t,r)}hasResourceBundle(t,r){return this.getResource(t,r)!==void 0}getResourceBundle(t,r){return r||(r=this.options.defaultNS),this.getResource(t,r)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const r=this.getDataByLanguage(t);return!!(r&&Object.keys(r)||[]).find(o=>r[o]&&Object.keys(r[o]).length>0)}toJSON(){return this.data}}var b_={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,r,n,o){return e.forEach(l=>{t=this.processors[l]?.process(t,r,n,o)??t}),t}};const C_=Symbol("i18next/PATH_KEY");function b1(){const e=[],t=Object.create(null);let r;return t.get=(n,o)=>(r?.revoke?.(),o===C_?e:(e.push(o),r=Proxy.revocable(n,t),r.proxy)),Proxy.revocable(Object.create(null),t).proxy}function zu(e,t){const{[C_]:r}=e(b1());return r.join(t?.keySeparator??".")}const Pm={},au=e=>!ve(e)&&typeof e!="boolean"&&typeof e!="number";class $a extends el{constructor(t,r={}){super(),d1(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Er.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,r={interpolation:{}}){const n={...r};if(t==null)return!1;const o=this.resolve(t,n);if(o?.res===void 0)return!1;const l=au(o.res);return!(n.returnObjects===!1&&l)}extractFromKey(t,r){let n=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let l=r.ns||this.options.defaultNS||[];const c=n&&t.indexOf(n)>-1,h=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!w1(t,n,o);if(c&&!h){const p=t.match(this.interpolator.nestingRegexp);if(p&&p.length>0)return{key:t,namespaces:ve(l)?[l]:l};const d=t.split(n);(n!==o||n===o&&this.options.ns.indexOf(d[0])>-1)&&(l=d.shift()),t=d.join(o)}return{key:t,namespaces:ve(l)?[l]:l}}translate(t,r,n){let o=typeof r=="object"?{...r}:r;if(typeof o!="object"&&this.options.overloadTranslationOptionHandler&&(o=this.options.overloadTranslationOptionHandler(arguments)),typeof o=="object"&&(o={...o}),o||(o={}),t==null)return"";typeof t=="function"&&(t=zu(t,{...this.options,...o})),Array.isArray(t)||(t=[String(t)]);const l=o.returnDetails!==void 0?o.returnDetails:this.options.returnDetails,c=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,{key:h,namespaces:p}=this.extractFromKey(t[t.length-1],o),d=p[p.length-1];let v=o.nsSeparator!==void 0?o.nsSeparator:this.options.nsSeparator;v===void 0&&(v=":");const _=o.lng||this.language,S=o.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(_?.toLowerCase()==="cimode")return S?l?{res:`${d}${v}${h}`,usedKey:h,exactUsedKey:h,usedLng:_,usedNS:d,usedParams:this.getUsedParamsDetails(o)}:`${d}${v}${h}`:l?{res:h,usedKey:h,exactUsedKey:h,usedLng:_,usedNS:d,usedParams:this.getUsedParamsDetails(o)}:h;const x=this.resolve(t,o);let w=x?.res;const b=x?.usedKey||h,E=x?.exactUsedKey||h,M=["[object Number]","[object Function]","[object RegExp]"],B=o.joinArrays!==void 0?o.joinArrays:this.options.joinArrays,W=!this.i18nFormat||this.i18nFormat.handleAsObject,A=o.count!==void 0&&!ve(o.count),K=$a.hasDefaultValue(o),X=A?this.pluralResolver.getSuffix(_,o.count,o):"",te=o.ordinal&&A?this.pluralResolver.getSuffix(_,o.count,{ordinal:!1}):"",ne=A&&!o.ordinal&&o.count===0,re=ne&&o[`defaultValue${this.options.pluralSeparator}zero`]||o[`defaultValue${X}`]||o[`defaultValue${te}`]||o.defaultValue;let F=w;W&&!w&&K&&(F=re);const V=au(F),Q=Object.prototype.toString.apply(F);if(W&&F&&V&&M.indexOf(Q)<0&&!(ve(B)&&Array.isArray(F))){if(!o.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const $=this.options.returnedObjectHandler?this.options.returnedObjectHandler(b,F,{...o,ns:p}):`key '${h} (${this.language})' returned an object instead of string.`;return l?(x.res=$,x.usedParams=this.getUsedParamsDetails(o),x):$}if(c){const $=Array.isArray(F),H=$?[]:{},O=$?E:b;for(const D in F)if(Object.prototype.hasOwnProperty.call(F,D)){const U=`${O}${c}${D}`;K&&!w?H[D]=this.translate(U,{...o,defaultValue:au(re)?re[D]:void 0,joinArrays:!1,ns:p}):H[D]=this.translate(U,{...o,joinArrays:!1,ns:p}),H[D]===U&&(H[D]=F[D])}w=H}}else if(W&&ve(B)&&Array.isArray(w))w=w.join(B),w&&(w=this.extendTranslation(w,t,o,n));else{let $=!1,H=!1;!this.isValidLookup(w)&&K&&($=!0,w=re),this.isValidLookup(w)||(H=!0,w=h);const D=(o.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&H?void 0:w,U=K&&re!==w&&this.options.updateMissing;if(H||$||U){if(this.logger.log(U?"updateKey":"missingKey",_,d,h,U?re:w),c){const P=this.resolve(h,{...o,keySeparator:!1});P&&P.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let N=[];const G=this.languageUtils.getFallbackCodes(this.options.fallbackLng,o.lng||this.language);if(this.options.saveMissingTo==="fallback"&&G&&G[0])for(let P=0;P<G.length;P++)N.push(G[P]);else this.options.saveMissingTo==="all"?N=this.languageUtils.toResolveHierarchy(o.lng||this.language):N.push(o.lng||this.language);const Y=(P,z,le)=>{const fe=K&&le!==w?le:D;this.options.missingKeyHandler?this.options.missingKeyHandler(P,d,z,fe,U,o):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(P,d,z,fe,U,o),this.emit("missingKey",P,d,z,w)};this.options.saveMissing&&(this.options.saveMissingPlurals&&A?N.forEach(P=>{const z=this.pluralResolver.getSuffixes(P,o);ne&&o[`defaultValue${this.options.pluralSeparator}zero`]&&z.indexOf(`${this.options.pluralSeparator}zero`)<0&&z.push(`${this.options.pluralSeparator}zero`),z.forEach(le=>{Y([P],h+le,o[`defaultValue${le}`]||re)})}):Y(N,h,re))}w=this.extendTranslation(w,t,o,x,n),H&&w===h&&this.options.appendNamespaceToMissingKey&&(w=`${d}${v}${h}`),(H||$)&&this.options.parseMissingKeyHandler&&(w=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}${v}${h}`:h,$?w:void 0,o))}return l?(x.res=w,x.usedParams=this.getUsedParamsDetails(o),x):w}extendTranslation(t,r,n,o,l){if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const p=ve(t)&&(n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(p){const _=t.match(this.interpolator.nestingRegexp);d=_&&_.length}let v=n.replace&&!ve(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(v={...this.options.interpolation.defaultVariables,...v}),t=this.interpolator.interpolate(t,v,n.lng||this.language||o.usedLng,n),p){const _=t.match(this.interpolator.nestingRegexp),S=_&&_.length;d<S&&(n.nest=!1)}!n.lng&&o&&o.res&&(n.lng=this.language||o.usedLng),n.nest!==!1&&(t=this.interpolator.nest(t,(..._)=>l?.[0]===_[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${_[0]} in key: ${r[0]}`),null):this.translate(..._,r),n)),n.interpolation&&this.interpolator.reset()}const c=n.postProcess||this.options.postProcess,h=ve(c)?[c]:c;return t!=null&&h?.length&&n.applyPostProcessor!==!1&&(t=b_.handle(h,t,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),t}resolve(t,r={}){let n,o,l,c,h;return ve(t)&&(t=[t]),t.forEach(p=>{if(this.isValidLookup(n))return;const d=this.extractFromKey(p,r),v=d.key;o=v;let _=d.namespaces;this.options.fallbackNS&&(_=_.concat(this.options.fallbackNS));const S=r.count!==void 0&&!ve(r.count),x=S&&!r.ordinal&&r.count===0,w=r.context!==void 0&&(ve(r.context)||typeof r.context=="number")&&r.context!=="",b=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);_.forEach(E=>{this.isValidLookup(n)||(h=E,!Pm[`${b[0]}-${E}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(h)&&(Pm[`${b[0]}-${E}`]=!0,this.logger.warn(`key "${o}" for languages "${b.join(", ")}" won't get resolved as namespace "${h}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),b.forEach(M=>{if(this.isValidLookup(n))return;c=M;const B=[v];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(B,v,M,E,r);else{let A;S&&(A=this.pluralResolver.getSuffix(M,r.count,r));const K=`${this.options.pluralSeparator}zero`,X=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(S&&(r.ordinal&&A.indexOf(X)===0&&B.push(v+A.replace(X,this.options.pluralSeparator)),B.push(v+A),x&&B.push(v+K)),w){const te=`${v}${this.options.contextSeparator||"_"}${r.context}`;B.push(te),S&&(r.ordinal&&A.indexOf(X)===0&&B.push(te+A.replace(X,this.options.pluralSeparator)),B.push(te+A),x&&B.push(te+K))}}let W;for(;W=B.pop();)this.isValidLookup(n)||(l=W,n=this.getResource(M,E,W,r))}))})}),{res:n,usedKey:o,exactUsedKey:l,usedLng:c,usedNS:h}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,r,n,o={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,r,n,o):this.resourceStore.getResource(t,r,n,o)}getUsedParamsDetails(t={}){const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=t.replace&&!ve(t.replace);let o=n?t.replace:t;if(n&&typeof t.count<"u"&&(o.count=t.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!n){o={...o};for(const l of r)delete o[l]}return o}static hasDefaultValue(t){const r="defaultValue";for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r===n.substring(0,r.length)&&t[n]!==void 0)return!0;return!1}}class Rm{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Er.create("languageUtils")}getScriptPartFromCode(t){if(t=Un(t),!t||t.indexOf("-")<0)return null;const r=t.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(t){if(t=Un(t),!t||t.indexOf("-")<0)return t;const r=t.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(t){if(ve(t)&&t.indexOf("-")>-1){let r;try{r=Intl.getCanonicalLocales(t)[0]}catch{}return r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let r;return t.forEach(n=>{if(r)return;const o=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(o))&&(r=o)}),!r&&this.options.supportedLngs&&t.forEach(n=>{if(r)return;const o=this.getScriptPartFromCode(n);if(this.isSupportedCode(o))return r=o;const l=this.getLanguagePartFromCode(n);if(this.isSupportedCode(l))return r=l;r=this.options.supportedLngs.find(c=>{if(c===l)return c;if(!(c.indexOf("-")<0&&l.indexOf("-")<0)&&(c.indexOf("-")>0&&l.indexOf("-")<0&&c.substring(0,c.indexOf("-"))===l||c.indexOf(l)===0&&l.length>1))return c})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(t,r){if(!t)return[];if(typeof t=="function"&&(t=t(r)),ve(t)&&(t=[t]),Array.isArray(t))return t;if(!r)return t.default||[];let n=t[r];return n||(n=t[this.getScriptPartFromCode(r)]),n||(n=t[this.formatLanguageCode(r)]),n||(n=t[this.getLanguagePartFromCode(r)]),n||(n=t.default),n||[]}toResolveHierarchy(t,r){const n=this.getFallbackCodes((r===!1?[]:r)||this.options.fallbackLng||[],t),o=[],l=c=>{c&&(this.isSupportedCode(c)?o.push(c):this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`))};return ve(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&l(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&l(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&l(this.getLanguagePartFromCode(t))):ve(t)&&l(this.formatLanguageCode(t)),n.forEach(c=>{o.indexOf(c)<0&&l(this.formatLanguageCode(c))}),o}}const Nm={zero:0,one:1,two:2,few:3,many:4,other:5},Lm={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class C1{constructor(t,r={}){this.languageUtils=t,this.options=r,this.logger=Er.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,r){this.rules[t]=r}clearCache(){this.pluralRulesCache={}}getRule(t,r={}){const n=Un(t==="dev"?"en":t),o=r.ordinal?"ordinal":"cardinal",l=JSON.stringify({cleanedCode:n,type:o});if(l in this.pluralRulesCache)return this.pluralRulesCache[l];let c;try{c=new Intl.PluralRules(n,{type:o})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Lm;if(!t.match(/-|_/))return Lm;const p=this.languageUtils.getLanguagePartFromCode(t);c=this.getRule(p,r)}return this.pluralRulesCache[l]=c,c}needsPlural(t,r={}){let n=this.getRule(t,r);return n||(n=this.getRule("dev",r)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,r,n={}){return this.getSuffixes(t,n).map(o=>`${r}${o}`)}getSuffixes(t,r={}){let n=this.getRule(t,r);return n||(n=this.getRule("dev",r)),n?n.resolvedOptions().pluralCategories.sort((o,l)=>Nm[o]-Nm[l]).map(o=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${o}`):[]}getSuffix(t,r,n={}){const o=this.getRule(t,n);return o?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${o.select(r)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",r,n))}}const Dm=(e,t,r,n=".",o=!0)=>{let l=m1(e,t,r);return!l&&o&&ve(r)&&(l=Fu(e,r,n),l===void 0&&(l=Fu(t,r,n))),l},lu=e=>e.replace(/\$/g,"$$$$");class Mm{constructor(t={}){this.logger=Er.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(r=>r),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:r,escapeValue:n,useRawValueToEscape:o,prefix:l,prefixEscaped:c,suffix:h,suffixEscaped:p,formatSeparator:d,unescapeSuffix:v,unescapePrefix:_,nestingPrefix:S,nestingPrefixEscaped:x,nestingSuffix:w,nestingSuffixEscaped:b,nestingOptionsSeparator:E,maxReplaces:M,alwaysFormat:B}=t.interpolation;this.escape=r!==void 0?r:_1,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=o!==void 0?o:!1,this.prefix=l?Ss(l):c||"{{",this.suffix=h?Ss(h):p||"}}",this.formatSeparator=d||",",this.unescapePrefix=v?"":_||"-",this.unescapeSuffix=this.unescapePrefix?"":v||"",this.nestingPrefix=S?Ss(S):x||Ss("$t("),this.nestingSuffix=w?Ss(w):b||Ss(")"),this.nestingOptionsSeparator=E||",",this.maxReplaces=M||1e3,this.alwaysFormat=B!==void 0?B:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(r,n)=>r?.source===n?(r.lastIndex=0,r):new RegExp(n,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,r,n,o){let l,c,h;const p=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=x=>{if(x.indexOf(this.formatSeparator)<0){const M=Dm(r,p,x,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(M,void 0,n,{...o,...r,interpolationkey:x}):M}const w=x.split(this.formatSeparator),b=w.shift().trim(),E=w.join(this.formatSeparator).trim();return this.format(Dm(r,p,b,this.options.keySeparator,this.options.ignoreJSONStructure),E,n,{...o,...r,interpolationkey:b})};this.resetRegExp();const v=o?.missingInterpolationHandler||this.options.missingInterpolationHandler,_=o?.interpolation?.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:x=>lu(x)},{regex:this.regexp,safeValue:x=>this.escapeValue?lu(this.escape(x)):lu(x)}].forEach(x=>{for(h=0;l=x.regex.exec(t);){const w=l[1].trim();if(c=d(w),c===void 0)if(typeof v=="function"){const E=v(t,l,o);c=ve(E)?E:""}else if(o&&Object.prototype.hasOwnProperty.call(o,w))c="";else if(_){c=l[0];continue}else this.logger.warn(`missed to pass in variable ${w} for interpolating ${t}`),c="";else!ve(c)&&!this.useRawValueToEscape&&(c=xm(c));const b=x.safeValue(c);if(t=t.replace(l[0],b),_?(x.regex.lastIndex+=c.length,x.regex.lastIndex-=l[0].length):x.regex.lastIndex=0,h++,h>=this.maxReplaces)break}}),t}nest(t,r,n={}){let o,l,c;const h=(p,d)=>{const v=this.nestingOptionsSeparator;if(p.indexOf(v)<0)return p;const _=p.split(new RegExp(`${v}[ ]*{`));let S=`{${_[1]}`;p=_[0],S=this.interpolate(S,c);const x=S.match(/'/g),w=S.match(/"/g);((x?.length??0)%2===0&&!w||w.length%2!==0)&&(S=S.replace(/'/g,'"'));try{c=JSON.parse(S),d&&(c={...d,...c})}catch(b){return this.logger.warn(`failed parsing options string in nesting for key ${p}`,b),`${p}${v}${S}`}return c.defaultValue&&c.defaultValue.indexOf(this.prefix)>-1&&delete c.defaultValue,p};for(;o=this.nestingRegexp.exec(t);){let p=[];c={...n},c=c.replace&&!ve(c.replace)?c.replace:c,c.applyPostProcessor=!1,delete c.defaultValue;const d=/{.*}/.test(o[1])?o[1].lastIndexOf("}")+1:o[1].indexOf(this.formatSeparator);if(d!==-1&&(p=o[1].slice(d).split(this.formatSeparator).map(v=>v.trim()).filter(Boolean),o[1]=o[1].slice(0,d)),l=r(h.call(this,o[1].trim(),c),c),l&&o[0]===t&&!ve(l))return l;ve(l)||(l=xm(l)),l||(this.logger.warn(`missed to resolve ${o[1]} for nesting ${t}`),l=""),p.length&&(l=p.reduce((v,_)=>this.format(v,_,n.lng,{...n,interpolationkey:o[1].trim()}),l.trim())),t=t.replace(o[0],l),this.regexp.lastIndex=0}return t}}const k1=e=>{let t=e.toLowerCase().trim();const r={};if(e.indexOf("(")>-1){const n=e.split("(");t=n[0].toLowerCase().trim();const o=n[1].substring(0,n[1].length-1);t==="currency"&&o.indexOf(":")<0?r.currency||(r.currency=o.trim()):t==="relativetime"&&o.indexOf(":")<0?r.range||(r.range=o.trim()):o.split(";").forEach(c=>{if(c){const[h,...p]=c.split(":"),d=p.join(":").trim().replace(/^'+|'+$/g,""),v=h.trim();r[v]||(r[v]=d),d==="false"&&(r[v]=!1),d==="true"&&(r[v]=!0),isNaN(d)||(r[v]=parseInt(d,10))}})}return{formatName:t,formatOptions:r}},Om=e=>{const t={};return(r,n,o)=>{let l=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(l={...l,[o.interpolationkey]:void 0});const c=n+JSON.stringify(l);let h=t[c];return h||(h=e(Un(n),o),t[c]=h),h(r)}},E1=e=>(t,r,n)=>e(Un(r),n)(t);class P1{constructor(t={}){this.logger=Er.create("formatter"),this.options=t,this.init(t)}init(t,r={interpolation:{}}){this.formatSeparator=r.interpolation.formatSeparator||",";const n=r.cacheInBuiltFormats?Om:E1;this.formats={number:n((o,l)=>{const c=new Intl.NumberFormat(o,{...l});return h=>c.format(h)}),currency:n((o,l)=>{const c=new Intl.NumberFormat(o,{...l,style:"currency"});return h=>c.format(h)}),datetime:n((o,l)=>{const c=new Intl.DateTimeFormat(o,{...l});return h=>c.format(h)}),relativetime:n((o,l)=>{const c=new Intl.RelativeTimeFormat(o,{...l});return h=>c.format(h,l.range||"day")}),list:n((o,l)=>{const c=new Intl.ListFormat(o,{...l});return h=>c.format(h)})}}add(t,r){this.formats[t.toLowerCase().trim()]=r}addCached(t,r){this.formats[t.toLowerCase().trim()]=Om(r)}format(t,r,n,o={}){const l=r.split(this.formatSeparator);if(l.length>1&&l[0].indexOf("(")>1&&l[0].indexOf(")")<0&&l.find(h=>h.indexOf(")")>-1)){const h=l.findIndex(p=>p.indexOf(")")>-1);l[0]=[l[0],...l.splice(1,h)].join(this.formatSeparator)}return l.reduce((h,p)=>{const{formatName:d,formatOptions:v}=k1(p);if(this.formats[d]){let _=h;try{const S=o?.formatParams?.[o.interpolationkey]||{},x=S.locale||S.lng||o.locale||o.lng||n;_=this.formats[d](h,x,{...v,...o,...S})}catch(S){this.logger.warn(S)}return _}else this.logger.warn(`there was no format function for ${d}`);return h},t)}}const R1=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class N1 extends el{constructor(t,r,n,o={}){super(),this.backend=t,this.store=r,this.services=n,this.languageUtils=n.languageUtils,this.options=o,this.logger=Er.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,o.backend,o)}queueLoad(t,r,n,o){const l={},c={},h={},p={};return t.forEach(d=>{let v=!0;r.forEach(_=>{const S=`${d}|${_}`;!n.reload&&this.store.hasResourceBundle(d,_)?this.state[S]=2:this.state[S]<0||(this.state[S]===1?c[S]===void 0&&(c[S]=!0):(this.state[S]=1,v=!1,c[S]===void 0&&(c[S]=!0),l[S]===void 0&&(l[S]=!0),p[_]===void 0&&(p[_]=!0)))}),v||(h[d]=!0)}),(Object.keys(l).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(l),pending:Object.keys(c),toLoadLanguages:Object.keys(h),toLoadNamespaces:Object.keys(p)}}loaded(t,r,n){const o=t.split("|"),l=o[0],c=o[1];r&&this.emit("failedLoading",l,c,r),!r&&n&&this.store.addResourceBundle(l,c,n,void 0,void 0,{skipCopy:!0}),this.state[t]=r?-1:2,r&&n&&(this.state[t]=0);const h={};this.queue.forEach(p=>{p1(p.loaded,[l],c),R1(p,t),r&&p.errors.push(r),p.pendingCount===0&&!p.done&&(Object.keys(p.loaded).forEach(d=>{h[d]||(h[d]={});const v=p.loaded[d];v.length&&v.forEach(_=>{h[d][_]===void 0&&(h[d][_]=!0)})}),p.done=!0,p.errors.length?p.callback(p.errors):p.callback())}),this.emit("loaded",h),this.queue=this.queue.filter(p=>!p.done)}read(t,r,n,o=0,l=this.retryTimeout,c){if(!t.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:r,fcName:n,tried:o,wait:l,callback:c});return}this.readingCalls++;const h=(d,v)=>{if(this.readingCalls--,this.waitingReads.length>0){const _=this.waitingReads.shift();this.read(_.lng,_.ns,_.fcName,_.tried,_.wait,_.callback)}if(d&&v&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,t,r,n,o+1,l*2,c)},l);return}c(d,v)},p=this.backend[n].bind(this.backend);if(p.length===2){try{const d=p(t,r);d&&typeof d.then=="function"?d.then(v=>h(null,v)).catch(h):h(null,d)}catch(d){h(d)}return}return p(t,r,h)}prepareLoading(t,r,n={},o){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();ve(t)&&(t=this.languageUtils.toResolveHierarchy(t)),ve(r)&&(r=[r]);const l=this.queueLoad(t,r,n,o);if(!l.toLoad.length)return l.pending.length||o(),null;l.toLoad.forEach(c=>{this.loadOne(c)})}load(t,r,n){this.prepareLoading(t,r,{},n)}reload(t,r,n){this.prepareLoading(t,r,{reload:!0},n)}loadOne(t,r=""){const n=t.split("|"),o=n[0],l=n[1];this.read(o,l,"read",void 0,void 0,(c,h)=>{c&&this.logger.warn(`${r}loading namespace ${l} for language ${o} failed`,c),!c&&h&&this.logger.log(`${r}loaded namespace ${l} for language ${o}`,h),this.loaded(t,c,h)})}saveMissing(t,r,n,o,l,c={},h=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${n}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend?.create){const p={...c,isUpdate:l},d=this.backend.create.bind(this.backend);if(d.length<6)try{let v;d.length===5?v=d(t,r,n,o,p):v=d(t,r,n,o),v&&typeof v.then=="function"?v.then(_=>h(null,_)).catch(h):h(null,v)}catch(v){h(v)}else d(t,r,n,o,h,p)}!t||!t[0]||this.store.addResource(t[0],r,n,o)}}}const Tm=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),ve(e[1])&&(t.defaultValue=e[1]),ve(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const r=e[3]||e[2];Object.keys(r).forEach(n=>{t[n]=r[n]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),jm=e=>(ve(e.ns)&&(e.ns=[e.ns]),ve(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),ve(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e),va=()=>{},L1=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(r=>{typeof e[r]=="function"&&(e[r]=e[r].bind(e))})};class In extends el{constructor(t={},r){if(super(),this.options=jm(t),this.services={},this.logger=Er,this.modules={external:[]},L1(this),r&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,r),this;setTimeout(()=>{this.init(t,r)},0)}}init(t={},r){this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),t.defaultNS==null&&t.ns&&(ve(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const n=Tm();this.options={...n,...this.options,...jm(t)},this.options.interpolation={...n.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=n.overloadTranslationOptionHandler);const o=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?Er.init(o(this.modules.logger),this.options):Er.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=P1;const v=new Rm(this.options);this.store=new Em(this.options.resources,this.options);const _=this.services;_.logger=Er,_.resourceStore=this.store,_.languageUtils=v,_.pluralResolver=new C1(v,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),d&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(_.formatter=o(d),_.formatter.init&&_.formatter.init(_,this.options),this.options.interpolation.format=_.formatter.format.bind(_.formatter)),_.interpolator=new Mm(this.options),_.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},_.backendConnector=new N1(o(this.modules.backend),_.resourceStore,_,this.options),_.backendConnector.on("*",(x,...w)=>{this.emit(x,...w)}),this.modules.languageDetector&&(_.languageDetector=o(this.modules.languageDetector),_.languageDetector.init&&_.languageDetector.init(_,this.options.detection,this.options)),this.modules.i18nFormat&&(_.i18nFormat=o(this.modules.i18nFormat),_.i18nFormat.init&&_.i18nFormat.init(this)),this.translator=new $a(this.services,this.options),this.translator.on("*",(x,...w)=>{this.emit(x,...w)}),this.modules.external.forEach(x=>{x.init&&x.init(this)})}if(this.format=this.options.interpolation.format,r||(r=va),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=(...v)=>this.store[d](...v)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=(...v)=>(this.store[d](...v),this)});const h=bn(),p=()=>{const d=(v,_)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),h.resolve(_),r(v,_)};if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initAsync?p():setTimeout(p,0),h}loadResources(t,r=va){let n=r;const o=ve(t)?t:this.language;if(typeof t=="function"&&(n=t),!this.options.resources||this.options.partialBundledLanguages){if(o?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const l=[],c=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(d=>{d!=="cimode"&&l.indexOf(d)<0&&l.push(d)})};o?c(o):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(p=>c(p)),this.options.preload?.forEach?.(h=>c(h)),this.services.backendConnector.load(l,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(h)})}else n(null)}reloadResources(t,r,n){const o=bn();return typeof t=="function"&&(n=t,t=void 0),typeof r=="function"&&(n=r,r=void 0),t||(t=this.languages),r||(r=this.options.ns),n||(n=va),this.services.backendConnector.reload(t,r,l=>{o.resolve(),n(l)}),o}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&b_.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let r=0;r<this.languages.length;r++){const n=this.languages[r];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,r){this.isLanguageChangingTo=t;const n=bn();this.emit("languageChanging",t);const o=h=>{this.language=h,this.languages=this.services.languageUtils.toResolveHierarchy(h),this.resolvedLanguage=void 0,this.setResolvedLanguage(h)},l=(h,p)=>{p?this.isLanguageChangingTo===t&&(o(p),this.translator.changeLanguage(p),this.isLanguageChangingTo=void 0,this.emit("languageChanged",p),this.logger.log("languageChanged",p)):this.isLanguageChangingTo=void 0,n.resolve((...d)=>this.t(...d)),r&&r(h,(...d)=>this.t(...d))},c=h=>{!t&&!h&&this.services.languageDetector&&(h=[]);const p=ve(h)?h:h&&h[0],d=this.store.hasLanguageSomeTranslations(p)?p:this.services.languageUtils.getBestMatchFromCodes(ve(h)?[h]:h);d&&(this.language||o(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector?.cacheUserLanguage?.(d)),this.loadResources(d,v=>{l(v,d)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(t),n}getFixedT(t,r,n){const o=(l,c,...h)=>{let p;typeof c!="object"?p=this.options.overloadTranslationOptionHandler([l,c].concat(h)):p={...c},p.lng=p.lng||o.lng,p.lngs=p.lngs||o.lngs,p.ns=p.ns||o.ns,p.keyPrefix!==""&&(p.keyPrefix=p.keyPrefix||n||o.keyPrefix);const d=this.options.keySeparator||".";let v;return p.keyPrefix&&Array.isArray(l)?v=l.map(_=>(typeof _=="function"&&(_=zu(_,{...this.options,...c})),`${p.keyPrefix}${d}${_}`)):(typeof l=="function"&&(l=zu(l,{...this.options,...c})),v=p.keyPrefix?`${p.keyPrefix}${d}${l}`:l),this.t(v,p)};return ve(t)?o.lng=t:o.lngs=t,o.ns=r,o.keyPrefix=n,o}t(...t){return this.translator?.translate(...t)}exists(...t){return this.translator?.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,r={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=r.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,l=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const c=(h,p)=>{const d=this.services.backendConnector.state[`${h}|${p}`];return d===-1||d===0||d===2};if(r.precheck){const h=r.precheck(this,c);if(h!==void 0)return h}return!!(this.hasResourceBundle(n,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(n,t)&&(!o||c(l,t)))}loadNamespaces(t,r){const n=bn();return this.options.ns?(ve(t)&&(t=[t]),t.forEach(o=>{this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}),this.loadResources(o=>{n.resolve(),r&&r(o)}),n):(r&&r(),Promise.resolve())}loadLanguages(t,r){const n=bn();ve(t)&&(t=[t]);const o=this.options.preload||[],l=t.filter(c=>o.indexOf(c)<0&&this.services.languageUtils.isSupportedCode(c));return l.length?(this.options.preload=o.concat(l),this.loadResources(c=>{n.resolve(),r&&r(c)}),n):(r&&r(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";try{const o=new Intl.Locale(t);if(o&&o.getTextInfo){const l=o.getTextInfo();if(l&&l.direction)return l.direction}}catch{}const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services?.languageUtils||new Rm(Tm());return t.toLowerCase().indexOf("-latn")>1?"ltr":r.indexOf(n.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},r){const n=new In(t,r);return n.createInstance=In.createInstance,n}cloneInstance(t={},r=va){const n=t.forkResourceStore;n&&delete t.forkResourceStore;const o={...this.options,...t,isClone:!0},l=new In(o);if((t.debug!==void 0||t.prefix!==void 0)&&(l.logger=l.logger.clone(t)),["store","services","language"].forEach(h=>{l[h]=this[h]}),l.services={...this.services},l.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},n){const h=Object.keys(this.store.data).reduce((p,d)=>(p[d]={...this.store.data[d]},p[d]=Object.keys(p[d]).reduce((v,_)=>(v[_]={...p[d][_]},v),p[d]),p),{});l.store=new Em(h,o),l.services.resourceStore=l.store}return t.interpolation&&(l.services.interpolator=new Mm(o)),l.translator=new $a(l.services,o),l.translator.on("*",(h,...p)=>{l.emit(h,...p)}),l.init(o,r),l.translator.options=o,l.translator.backendConnector.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Rt=In.createInstance();Rt.createInstance;Rt.dir;Rt.init;Rt.loadResources;Rt.reloadResources;Rt.use;Rt.changeLanguage;Rt.getFixedT;Rt.t;Rt.exists;Rt.setDefaultNamespace;Rt.hasLoadedNamespace;Rt.loadNamespaces;Rt.loadLanguages;const D1=(e,t,r,n)=>{const o=[r,{code:t,...n||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(o,"warn","react-i18next::",!0);Ui(o[0])&&(o[0]=`react-i18next:: ${o[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...o):console?.warn&&console.warn(...o)},Bm={},k_=(e,t,r,n)=>{Ui(r)&&Bm[r]||(Ui(r)&&(Bm[r]=new Date),D1(e,t,r,n))},E_=(e,t)=>()=>{if(e.isInitialized)t();else{const r=()=>{setTimeout(()=>{e.off("initialized",r)},0),t()};e.on("initialized",r)}},Hu=(e,t,r)=>{e.loadNamespaces(t,E_(e,r))},Im=(e,t,r,n)=>{if(Ui(r)&&(r=[r]),e.options.preload&&e.options.preload.indexOf(t)>-1)return Hu(e,r,n);r.forEach(o=>{e.options.ns.indexOf(o)<0&&e.options.ns.push(o)}),e.loadLanguages(t,E_(e,n))},M1=(e,t,r={})=>!t.languages||!t.languages.length?(k_(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:r.lng,precheck:(n,o)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!o(n.isLanguageChangingTo,e))return!1}}),Ui=e=>typeof e=="string",O1=e=>typeof e=="object"&&e!==null,T1=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,j1={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},B1=e=>j1[e],I1=e=>e.replace(T1,B1);let $u={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:I1,transDefaultProps:void 0};const A1=(e={})=>{$u={...$u,...e}},F1=()=>$u;let P_;const z1=e=>{P_=e},H1=()=>P_,$1={type:"3rdParty",init(e){A1(e.options.react),z1(e)}},W1=C.createContext();class U1{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var cu={exports:{}},uu={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Am;function K1(){if(Am)return uu;Am=1;var e=Xa();function t(_,S){return _===S&&(_!==0||1/_===1/S)||_!==_&&S!==S}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,o=e.useEffect,l=e.useLayoutEffect,c=e.useDebugValue;function h(_,S){var x=S(),w=n({inst:{value:x,getSnapshot:S}}),b=w[0].inst,E=w[1];return l(function(){b.value=x,b.getSnapshot=S,p(b)&&E({inst:b})},[_,x,S]),o(function(){return p(b)&&E({inst:b}),_(function(){p(b)&&E({inst:b})})},[_]),c(x),x}function p(_){var S=_.getSnapshot;_=_.value;try{var x=S();return!r(_,x)}catch{return!0}}function d(_,S){return S()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:h;return uu.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:v,uu}var Fm;function V1(){return Fm||(Fm=1,cu.exports=K1()),cu.exports}var q1=V1();const Q1=(e,t)=>Ui(t)?t:O1(t)&&Ui(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,Y1={t:Q1,ready:!1},G1=()=>()=>{},eo=(e,t={})=>{const{i18n:r}=t,{i18n:n,defaultNS:o}=C.useContext(W1)||{},l=r||n||H1();l&&!l.reportNamespaces&&(l.reportNamespaces=new U1),l||k_(l,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const c=C.useMemo(()=>({...F1(),...l?.options?.react,...t}),[l,t]),{useSuspense:h,keyPrefix:p}=c,d=o||l?.options?.defaultNS,v=Ui(d)?[d]:d||["translation"],_=C.useMemo(()=>v,v);l?.reportNamespaces?.addUsedNamespaces?.(_);const S=C.useRef(0),x=C.useCallback(re=>{if(!l)return G1;const{bindI18n:F,bindI18nStore:V}=c,Q=()=>{S.current+=1,re()};return F&&l.on(F,Q),V&&l.store.on(V,Q),()=>{F&&F.split(" ").forEach($=>l.off($,Q)),V&&V.split(" ").forEach($=>l.store.off($,Q))}},[l,c]),w=C.useRef(),b=C.useCallback(()=>{if(!l)return Y1;const re=!!(l.isInitialized||l.initializedStoreOnce)&&_.every(O=>M1(O,l,c)),F=t.lng||l.language,V=S.current,Q=w.current;if(Q&&Q.ready===re&&Q.lng===F&&Q.keyPrefix===p&&Q.revision===V)return Q;const H={t:l.getFixedT(F,c.nsMode==="fallback"?_:_[0],p),ready:re,lng:F,keyPrefix:p,revision:V};return w.current=H,H},[l,_,p,c,t.lng]),[E,M]=C.useState(0),{t:B,ready:W}=q1.useSyncExternalStore(x,b,b);C.useEffect(()=>{if(l&&!W&&!h){const re=()=>M(F=>F+1);t.lng?Im(l,t.lng,_,re):Hu(l,_,re)}},[l,t.lng,_,W,h,E]);const A=l||{},K=C.useRef(null),X=C.useRef(),te=re=>{const F=Object.getOwnPropertyDescriptors(re);F.__original&&delete F.__original;const V=Object.create(Object.getPrototypeOf(re),F);if(!Object.prototype.hasOwnProperty.call(V,"__original"))try{Object.defineProperty(V,"__original",{value:re,writable:!1,enumerable:!1,configurable:!1})}catch{}return V},ne=C.useMemo(()=>{const re=A,F=re?.language;let V=re;re&&(K.current&&K.current.__original===re?X.current!==F?(V=te(re),K.current=V,X.current=F):V=K.current:(V=te(re),K.current=V,X.current=F));const Q=[B,V,W];return Q.t=B,Q.i18n=V,Q.ready=W,Q},[B,A,W,A.resolvedLanguage,A.language,A.languages]);if(l&&h&&!W)throw new Promise(re=>{const F=()=>re();t.lng?Im(l,t.lng,_,F):Hu(l,_,F)});return ne};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),R_=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var J1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=C.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:o="",children:l,iconNode:c,...h},p)=>C.createElement("svg",{ref:p,...J1,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:R_("lucide",o),...h},[...c.map(([d,v])=>C.createElement(d,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=(e,t)=>{const r=C.forwardRef(({className:n,...o},l)=>C.createElement(Z1,{ref:l,iconNode:t,className:R_(`lucide-${X1(e)}`,n),...o}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=we("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=we("AppWindow",[["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}],["path",{d:"M10 4v4",key:"pp8u80"}],["path",{d:"M2 8h20",key:"d11cs7"}],["path",{d:"M6 4v4",key:"1svtjw"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=we("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=we("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=we("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=we("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=we("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=we("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=we("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=we("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=we("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=we("Columns2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=we("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=we("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=we("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=we("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=we("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=we("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=we("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=we("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=we("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=we("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=we("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=we("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=we("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=we("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=we("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=we("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=we("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=we("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=we("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=we("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=we("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=we("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=we("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=we("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=we("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=we("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=we("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=we("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=we("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Ke="";async function yx(){const e=await fetch(`${Ke}/api/runs`);if(!e.ok)throw new Error("Failed to fetch runs");return e.json()}async function B_(e){const t=await fetch(`${Ke}/api/runs/${e}`);if(!t.ok)throw new Error("Failed to fetch run");return t.json()}async function I_(e,t){const r=typeof e=="string"?{goal:e,repoPath:t}:e,n=await fetch(`${Ke}/api/runs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({goal:r.goal,repo_path:r.repoPath,project_id:r.projectId})});if(!n.ok)throw new Error("Failed to create run");return n.json()}async function A_(){const e=await fetch(`${Ke}/api/projects`);if(!e.ok)throw new Error("Failed to fetch projects");return e.json()}async function Sx(e){const t=await fetch(`${Ke}/api/projects/${e}`);if(!t.ok)throw new Error("Failed to fetch project");return t.json()}async function wx(e){const t=await fetch(`${Ke}/api/projects`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create project");return t.json()}async function xx(e){if(!(await fetch(`${Ke}/api/projects/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete project")}async function Wu(e,t){const r=new URL(`${Ke}/api/logs/${e}`,window.location.origin),n=await fetch(r.toString());if(!n.ok)throw new Error("Failed to fetch logs");return n.json()}async function bx(){const e=await fetch(`${Ke}/api/sessions/orphaned`);if(!e.ok)throw new Error("Failed to fetch orphaned sessions");return e.json()}async function Cx(e){if(!(await fetch(`${Ke}/api/sessions/orphaned/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete orphaned session")}async function F_(){const e=await fetch(`${Ke}/health`);if(!e.ok)throw new Error("Failed to fetch health");return e.json()}function kx(e,t,r){const n=new URL(`${Ke}/api/events`,window.location.origin);e&&n.searchParams.set("run_id",e);const o=new EventSource(n.toString());return o.onmessage=l=>{try{const c=JSON.parse(l.data);c.type!=="connected"&&t(c)}catch(c){console.error("Failed to parse SSE message:",c)}},o.onerror=l=>{console.error("SSE error:",l)},()=>o.close()}async function z_(){const e=await fetch(`${Ke}/api/settings`);if(!e.ok)throw new Error("Failed to fetch settings");return e.json()}async function H_(e){const t=await fetch(`${Ke}/api/settings`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update settings");return t.json()}async function $_(){const e=await fetch(`${Ke}/api/copilot/status`);if(!e.ok)throw new Error("Failed to fetch copilot status");return e.json()}async function Ex(){const e=await fetch(`${Ke}/api/copilot/models`);if(!e.ok)throw new Error("Failed to fetch copilot models");return e.json()}async function Px(e,t,r=!1){const n=await fetch(`${Ke}/api/files/list`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,cwd:t,recursive:r})});if(!n.ok)throw new Error("Failed to list files");return n.json()}async function Rx(e,t){const r=await fetch(`${Ke}/api/files/read`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,cwd:t})});if(!r.ok)throw new Error("Failed to read file");return r.json()}async function zm(e,t,r){const n=await fetch(`${Ke}/api/files/write`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,content:t,cwd:r})});if(!n.ok)throw new Error("Failed to write file");return n.json()}async function Nx(e,t){const r=await fetch(`${Ke}/api/files/mkdir`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,cwd:t})});if(!r.ok)throw new Error("Failed to create directory");return r.json()}async function Lx(e,t){const r=await fetch(`${Ke}/api/files/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,cwd:t})});if(!r.ok)throw new Error("Failed to delete file");return r.json()}async function Dx(){const e=await fetch(`${Ke}/api/desktop/applications`);if(!e.ok)throw new Error("Failed to fetch applications");return e.json()}async function Mx(e){const t=await fetch(`${Ke}/api/desktop/applications/${e}/focus`,{method:"POST"});if(!t.ok)throw new Error("Failed to focus application");return t.json()}function W_(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=W_(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Le(){for(var e,t,r=0,n="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=W_(e))&&(n&&(n+=" "),n+=t);return n}const Hm=[{path:"/projects",labelKey:"nav.projects",icon:Hh},{path:"/agents",labelKey:"nav.agents",icon:Wa},{path:"/shell",labelKey:"nav.shell",icon:qn},{path:"/settings",labelKey:"nav.settings",icon:gx}];function Ox({children:e}){const{t}=eo(),r=Ur(),{data:n}=Vt({queryKey:["health"],queryFn:F_,refetchInterval:3e4});return g.jsxs("div",{className:"min-h-screen bg-slate-50",children:[g.jsxs("aside",{className:"hidden lg:block fixed top-0 left-0 h-full w-64 bg-white border-r border-slate-200 z-40",children:[g.jsxs("div",{className:"h-14 flex items-center px-4 border-b border-slate-200",children:[g.jsx(ex,{className:"text-primary-600",size:24}),g.jsx("h1",{className:"ml-2 font-bold text-slate-800",children:"Tako Agent"})]}),g.jsx("nav",{className:"p-4 space-y-1",children:Hm.map(({path:o,labelKey:l,icon:c})=>g.jsxs(Wn,{to:o,className:Le("flex items-center gap-3 px-3 py-2 rounded-lg transition-colors",r.pathname.startsWith(o)?"bg-primary-50 text-primary-700":"text-slate-600 hover:bg-slate-100"),children:[g.jsx(c,{size:18}),g.jsx("span",{children:t(l)})]},o))}),g.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-slate-200",children:g.jsxs("div",{className:"text-xs text-slate-500 space-y-1",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:Le("w-2 h-2 rounded-full",n?.status==="ok"?"bg-green-500":"bg-red-500")}),g.jsxs("span",{children:["Backend: ",n?.status??"disconnected"]})]}),g.jsxs("div",{className:"text-slate-400",children:["v",n?.version??"?"]})]})})]}),g.jsx("main",{className:"lg:ml-64 pb-16 lg:pb-0 min-h-screen",children:e}),g.jsx("nav",{className:"lg:hidden fixed bottom-0 left-0 right-0 h-14 bg-white border-t border-slate-200 z-50 flex items-center justify-around px-4 safe-area-pb",children:Hm.map(({path:o,icon:l})=>{const c=r.pathname.startsWith(o);return g.jsx(Wn,{to:o,className:Le("flex items-center justify-center p-3 rounded-full transition-colors",c?"text-primary-600 bg-primary-50":"text-slate-400 active:bg-slate-100"),children:g.jsx(l,{size:24,strokeWidth:c?2.5:2})},o)})})]})}const Tx="modulepreload",jx=function(e){return"/"+e},$m={},Bx=function(t,r,n){let o=Promise.resolve();if(r&&r.length>0){let c=function(d){return Promise.all(d.map(v=>Promise.resolve(v).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),p=h?.nonce||h?.getAttribute("nonce");o=c(r.map(d=>{if(d=jx(d),d in $m)return;$m[d]=!0;const v=d.endsWith(".css"),_=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${_}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":Tx,v||(S.as="script"),S.crossOrigin="",S.href=d,p&&S.setAttribute("nonce",p),document.head.appendChild(S),v)return new Promise((x,w)=>{S.addEventListener("load",x),S.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${d}`)))})}))}function l(c){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c}return o.then(c=>{for(const h of c||[])h.status==="rejected"&&l(h.reason);return t().catch(l)})},Uh=typeof window<"u"&&"__TAURI__"in window;let fu=null;async function Ix(){if(Uh&&!fu)try{fu=await Bx(()=>import("./index-ZqTJLjwd.js"),[])}catch{console.warn("Failed to load Tauri dialog plugin")}return fu}async function Ax(){if(!Uh)return null;const e=await Ix();if(!e)return null;try{return await e.open({directory:!0,multiple:!1,title:"Select Project Folder"})}catch(t){return console.error("Failed to open folder dialog:",t),null}}function Fx({project:e,onDelete:t}){const{t:r}=eo();return g.jsx(Wn,{to:`/projects/${e.project_id}`,className:"block bg-white rounded-xl border border-slate-200 p-4 sm:p-5 hover:shadow-lg hover:border-primary-300 active:bg-slate-50 transition-all group",children:g.jsxs("div",{className:"flex items-start justify-between gap-2 sm:gap-3",children:[g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.jsx(Hh,{size:20,className:"text-primary-500 flex-shrink-0"}),g.jsx("h3",{className:"font-semibold text-slate-800 truncate text-base sm:text-lg",children:e.name})]}),e.description&&g.jsx("p",{className:"text-sm text-slate-500 line-clamp-2 mb-3",children:e.description}),g.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4 text-xs text-slate-400",children:[g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx(ax,{size:12}),g.jsx("span",{className:"truncate max-w-[150px] sm:max-w-[200px]",title:e.repo_path,children:e.repo_path.split(/[/\\]/).pop()})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx(ix,{size:12}),g.jsx("span",{children:new Date(e.created_at).toLocaleDateString()})]})]})]}),g.jsx("button",{onClick:n=>{n.preventDefault(),n.stopPropagation(),t()},className:"p-2.5 sm:p-2 text-slate-400 sm:text-slate-300 hover:text-red-500 hover:bg-red-50 active:bg-red-100 rounded-lg transition-colors sm:opacity-0 sm:group-hover:opacity-100",title:r("common.delete"),children:g.jsx($h,{size:18,className:"sm:w-4 sm:h-4"})})]})})}function zx(){const{t:e}=eo(),t=qi(),[r,n]=C.useState(!1),[o,l]=C.useState(""),[c,h]=C.useState(""),[p,d]=C.useState(""),{data:v,isLoading:_,error:S}=Vt({queryKey:["projects"],queryFn:A_,refetchInterval:1e4}),x=Si({mutationFn:({name:E,description:M,repo_path:B})=>wx({name:E,description:M,repo_path:B}),onSuccess:()=>{t.invalidateQueries({queryKey:["projects"]}),n(!1),l(""),h(""),d("")}}),w=Si({mutationFn:xx,onSuccess:()=>{t.invalidateQueries({queryKey:["projects"]})}}),b=async()=>{const E=await Ax();if(E&&(d(E),!o)){const M=E.split(/[/\\]/).pop()||"";l(M)}};return g.jsxs("div",{className:"mx-auto max-w-4xl px-4 sm:px-6 py-4 sm:py-6",children:[g.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6 sm:mb-8",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-slate-800",children:e("projects.title")}),g.jsx("p",{className:"text-slate-500 mt-1 text-sm sm:text-base",children:e("projects.subtitle")})]}),g.jsxs("button",{onClick:()=>n(!0),className:"flex items-center justify-center gap-2 px-4 py-3 sm:py-2.5 bg-primary-600 text-white rounded-xl hover:bg-primary-700 active:bg-primary-800 transition-colors shadow-sm w-full sm:w-auto",children:[g.jsx(Ps,{size:18}),e("projects.newProject")]})]}),r&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-end sm:items-center justify-center z-50 p-0 sm:p-4",children:g.jsxs("div",{className:"bg-white rounded-t-2xl sm:rounded-2xl shadow-xl w-full sm:max-w-md p-5 sm:p-6 max-h-[90vh] overflow-y-auto",children:[g.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-4",children:e("projects.newProject")}),g.jsxs("form",{onSubmit:E=>{E.preventDefault(),o.trim()&&p.trim()&&x.mutate({name:o.trim(),description:c.trim()||void 0,repo_path:p.trim()})},children:[g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:e("projects.name")}),g.jsx("input",{type:"text",value:o,onChange:E=>l(E.target.value),placeholder:e("projects.namePlaceholder"),className:"w-full px-4 py-3 text-base border border-slate-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500",autoFocus:!0,required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:e("projects.description")}),g.jsx("textarea",{value:c,onChange:E=>h(E.target.value),placeholder:e("projects.descriptionPlaceholder"),className:"w-full px-4 py-3 text-base border border-slate-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 resize-none",rows:2})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[g.jsx(Kn,{size:14,className:"inline mr-1.5"}),e("projects.repoPath")]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"text",value:p,onChange:E=>d(E.target.value),placeholder:e("projects.repoPathPlaceholder"),className:"flex-1 px-4 py-3 text-base border border-slate-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0}),Uh&&g.jsx("button",{type:"button",onClick:b,className:"px-4 py-3 bg-slate-100 text-slate-700 rounded-xl hover:bg-slate-200 active:bg-slate-300 transition-colors",title:e("projects.browse"),children:g.jsx(Kn,{size:18})})]})]})]}),g.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-3 mt-6",children:[g.jsx("button",{type:"button",onClick:()=>{n(!1),l(""),h(""),d("")},className:"px-4 py-3 sm:py-2.5 text-slate-600 hover:bg-slate-100 active:bg-slate-200 rounded-xl transition-colors",children:e("common.cancel")}),g.jsxs("button",{type:"submit",disabled:x.isPending||!o.trim()||!p.trim(),className:"flex items-center justify-center gap-2 px-5 py-3 sm:py-2.5 bg-primary-600 text-white rounded-xl hover:bg-primary-700 active:bg-primary-800 disabled:opacity-50 transition-colors",children:[x.isPending&&g.jsx(or,{size:18,className:"animate-spin"}),e("common.create")]})]})]})]})}),_?g.jsx("div",{className:"flex items-center justify-center py-16",children:g.jsx(or,{size:32,className:"animate-spin text-primary-600"})}):S?g.jsxs("div",{className:"text-center py-16 text-red-600",children:[e("common.error"),": ",S.message]}):v?.projects.length===0?g.jsxs("div",{className:"text-center py-16",children:[g.jsx(Hh,{size:48,className:"mx-auto text-slate-300 mb-4"}),g.jsx("p",{className:"text-slate-500 mb-2",children:e("projects.noProjects")}),g.jsx("p",{className:"text-sm text-slate-400",children:e("projects.createFirst")})]}):g.jsx("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2",children:v?.projects.map(E=>g.jsx(Fx,{project:E,onDelete:()=>w.mutate(E.project_id)},E.project_id))})]})}function Wm(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Hx(e){if(Array.isArray(e))return e}function $x(e,t,r){return(t=Yx(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wx(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,l,c,h=[],p=!0,d=!1;try{if(l=(r=r.call(e)).next,t!==0)for(;!(p=(n=l.call(r)).done)&&(h.push(n.value),h.length!==t);p=!0);}catch(v){d=!0,o=v}finally{try{if(!p&&r.return!=null&&(c=r.return(),Object(c)!==c))return}finally{if(d)throw o}}return h}}function Ux(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Um(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Km(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Um(Object(r),!0).forEach(function(n){$x(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Um(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kx(e,t){if(e==null)return{};var r,n,o=Vx(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Vx(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function qx(e,t){return Hx(e)||Wx(e,t)||Gx(e,t)||Ux()}function Qx(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yx(e){var t=Qx(e,"string");return typeof t=="symbol"?t:t+""}function Gx(e,t){if(e){if(typeof e=="string")return Wm(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wm(e,t):void 0}}function Xx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function qm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vm(Object(r),!0).forEach(function(n){Xx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jx(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return t.reduceRight(function(o,l){return l(o)},n)}}function Ln(e){return function t(){for(var r=this,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return o.length>=e.length?e.apply(this,o):function(){for(var c=arguments.length,h=new Array(c),p=0;p<c;p++)h[p]=arguments[p];return t.apply(r,[].concat(o,h))}}}function Ua(e){return{}.toString.call(e).includes("Object")}function Zx(e){return!Object.keys(e).length}function Qn(e){return typeof e=="function"}function eb(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function tb(e,t){return Ua(t)||vi("changeType"),Object.keys(t).some(function(r){return!eb(e,r)})&&vi("changeField"),t}function rb(e){Qn(e)||vi("selectorType")}function ib(e){Qn(e)||Ua(e)||vi("handlerType"),Ua(e)&&Object.values(e).some(function(t){return!Qn(t)})&&vi("handlersType")}function sb(e){e||vi("initialIsRequired"),Ua(e)||vi("initialType"),Zx(e)&&vi("initialContent")}function nb(e,t){throw new Error(e[t]||e.default)}var ob={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},vi=Ln(nb)(ob),ya={changes:tb,selector:rb,handler:ib,initial:sb};function ab(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ya.initial(e),ya.handler(t);var r={current:e},n=Ln(ub)(r,t),o=Ln(cb)(r),l=Ln(ya.changes)(e),c=Ln(lb)(r);function h(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(v){return v};return ya.selector(d),d(r.current)}function p(d){Jx(n,o,l,c)(d)}return[h,p]}function lb(e,t){return Qn(t)?t(e.current):t}function cb(e,t){return e.current=qm(qm({},e.current),t),t}function ub(e,t,r){return Qn(t)?t(e.current):Object.keys(r).forEach(function(n){var o;return(o=t[n])===null||o===void 0?void 0:o.call(t,e.current[n])}),r}var hb={create:ab},db={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function fb(e){return function t(){for(var r=this,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return o.length>=e.length?e.apply(this,o):function(){for(var c=arguments.length,h=new Array(c),p=0;p<c;p++)h[p]=arguments[p];return t.apply(r,[].concat(o,h))}}}function pb(e){return{}.toString.call(e).includes("Object")}function mb(e){return e||Qm("configIsRequired"),pb(e)||Qm("configType"),e.urls?(gb(),{paths:{vs:e.urls.monacoBase}}):e}function gb(){console.warn(U_.deprecation)}function _b(e,t){throw new Error(e[t]||e.default)}var U_={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Qm=fb(_b)(U_),vb={config:mb},yb=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(o){return r.reduceRight(function(l,c){return c(l)},o)}};function K_(e,t){return Object.keys(t).forEach(function(r){t[r]instanceof Object&&e[r]&&Object.assign(t[r],K_(e[r],t[r]))}),Km(Km({},e),t)}var Sb={type:"cancelation",msg:"operation is manually canceled"};function pu(e){var t=!1,r=new Promise(function(n,o){e.then(function(l){return t?o(Sb):n(l)}),e.catch(o)});return r.cancel=function(){return t=!0},r}var wb=["monaco"],xb=hb.create({config:db,isInitialized:!1,resolve:null,reject:null,monaco:null}),V_=qx(xb,2),to=V_[0],tl=V_[1];function bb(e){var t=vb.config(e),r=t.monaco,n=Kx(t,wb);tl(function(o){return{config:K_(o.config,n),monaco:r}})}function Cb(){var e=to(function(t){var r=t.monaco,n=t.isInitialized,o=t.resolve;return{monaco:r,isInitialized:n,resolve:o}});if(!e.isInitialized){if(tl({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),pu(mu);if(window.monaco&&window.monaco.editor)return q_(window.monaco),e.resolve(window.monaco),pu(mu);yb(kb,Pb)(Rb)}return pu(mu)}function kb(e){return document.body.appendChild(e)}function Eb(e){var t=document.createElement("script");return e&&(t.src=e),t}function Pb(e){var t=to(function(n){var o=n.config,l=n.reject;return{config:o,reject:l}}),r=Eb("".concat(t.config.paths.vs,"/loader.js"));return r.onload=function(){return e()},r.onerror=t.reject,r}function Rb(){var e=to(function(r){var n=r.config,o=r.resolve,l=r.reject;return{config:n,resolve:o,reject:l}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(r){var n=r.m||r;q_(n),e.resolve(n)},function(r){e.reject(r)})}function q_(e){to().monaco||tl({monaco:e})}function Nb(){return to(function(e){var t=e.monaco;return t})}var mu=new Promise(function(e,t){return tl({resolve:e,reject:t})}),Q_={config:bb,init:Cb,__getMonacoInstance:Nb},Lb={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},gu=Lb,Db={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Mb=Db;function Ob({children:e}){return zi.createElement("div",{style:Mb.container},e)}var Tb=Ob,jb=Tb;function Bb({width:e,height:t,isEditorReady:r,loading:n,_ref:o,className:l,wrapperProps:c}){return zi.createElement("section",{style:{...gu.wrapper,width:e,height:t},...c},!r&&zi.createElement(jb,null,n),zi.createElement("div",{ref:o,style:{...gu.fullWidth,...!r&&gu.hide},className:l}))}var Ib=Bb,Y_=C.memo(Ib);function Ab(e){C.useEffect(e,[])}var G_=Ab;function Fb(e,t,r=!0){let n=C.useRef(!0);C.useEffect(n.current||!r?()=>{n.current=!1}:e,t)}var Kt=Fb;function Fn(){}function ks(e,t,r,n){return zb(e,n)||Hb(e,t,r,n)}function zb(e,t){return e.editor.getModel(X_(e,t))}function Hb(e,t,r,n){return e.editor.createModel(t,r,n?X_(e,n):void 0)}function X_(e,t){return e.Uri.parse(t)}function $b({original:e,modified:t,language:r,originalLanguage:n,modifiedLanguage:o,originalModelPath:l,modifiedModelPath:c,keepCurrentOriginalModel:h=!1,keepCurrentModifiedModel:p=!1,theme:d="light",loading:v="Loading...",options:_={},height:S="100%",width:x="100%",className:w,wrapperProps:b={},beforeMount:E=Fn,onMount:M=Fn}){let[B,W]=C.useState(!1),[A,K]=C.useState(!0),X=C.useRef(null),te=C.useRef(null),ne=C.useRef(null),re=C.useRef(M),F=C.useRef(E),V=C.useRef(!1);G_(()=>{let O=Q_.init();return O.then(D=>(te.current=D)&&K(!1)).catch(D=>D?.type!=="cancelation"&&console.error("Monaco initialization: error:",D)),()=>X.current?H():O.cancel()}),Kt(()=>{if(X.current&&te.current){let O=X.current.getOriginalEditor(),D=ks(te.current,e||"",n||r||"text",l||"");D!==O.getModel()&&O.setModel(D)}},[l],B),Kt(()=>{if(X.current&&te.current){let O=X.current.getModifiedEditor(),D=ks(te.current,t||"",o||r||"text",c||"");D!==O.getModel()&&O.setModel(D)}},[c],B),Kt(()=>{let O=X.current.getModifiedEditor();O.getOption(te.current.editor.EditorOption.readOnly)?O.setValue(t||""):t!==O.getValue()&&(O.executeEdits("",[{range:O.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),O.pushUndoStop())},[t],B),Kt(()=>{X.current?.getModel()?.original.setValue(e||"")},[e],B),Kt(()=>{let{original:O,modified:D}=X.current.getModel();te.current.editor.setModelLanguage(O,n||r||"text"),te.current.editor.setModelLanguage(D,o||r||"text")},[r,n,o],B),Kt(()=>{te.current?.editor.setTheme(d)},[d],B),Kt(()=>{X.current?.updateOptions(_)},[_],B);let Q=C.useCallback(()=>{if(!te.current)return;F.current(te.current);let O=ks(te.current,e||"",n||r||"text",l||""),D=ks(te.current,t||"",o||r||"text",c||"");X.current?.setModel({original:O,modified:D})},[r,t,o,e,n,l,c]),$=C.useCallback(()=>{!V.current&&ne.current&&(X.current=te.current.editor.createDiffEditor(ne.current,{automaticLayout:!0,..._}),Q(),te.current?.editor.setTheme(d),W(!0),V.current=!0)},[_,d,Q]);C.useEffect(()=>{B&&re.current(X.current,te.current)},[B]),C.useEffect(()=>{!A&&!B&&$()},[A,B,$]);function H(){let O=X.current?.getModel();h||O?.original?.dispose(),p||O?.modified?.dispose(),X.current?.dispose()}return zi.createElement(Y_,{width:x,height:S,isEditorReady:B,loading:v,_ref:ne,className:w,wrapperProps:b})}var Wb=$b;C.memo(Wb);function Ub(e){let t=C.useRef();return C.useEffect(()=>{t.current=e},[e]),t.current}var Kb=Ub,Sa=new Map;function Vb({defaultValue:e,defaultLanguage:t,defaultPath:r,value:n,language:o,path:l,theme:c="light",line:h,loading:p="Loading...",options:d={},overrideServices:v={},saveViewState:_=!0,keepCurrentModel:S=!1,width:x="100%",height:w="100%",className:b,wrapperProps:E={},beforeMount:M=Fn,onMount:B=Fn,onChange:W,onValidate:A=Fn}){let[K,X]=C.useState(!1),[te,ne]=C.useState(!0),re=C.useRef(null),F=C.useRef(null),V=C.useRef(null),Q=C.useRef(B),$=C.useRef(M),H=C.useRef(),O=C.useRef(n),D=Kb(l),U=C.useRef(!1),N=C.useRef(!1);G_(()=>{let P=Q_.init();return P.then(z=>(re.current=z)&&ne(!1)).catch(z=>z?.type!=="cancelation"&&console.error("Monaco initialization: error:",z)),()=>F.current?Y():P.cancel()}),Kt(()=>{let P=ks(re.current,e||n||"",t||o||"",l||r||"");P!==F.current?.getModel()&&(_&&Sa.set(D,F.current?.saveViewState()),F.current?.setModel(P),_&&F.current?.restoreViewState(Sa.get(l)))},[l],K),Kt(()=>{F.current?.updateOptions(d)},[d],K),Kt(()=>{!F.current||n===void 0||(F.current.getOption(re.current.editor.EditorOption.readOnly)?F.current.setValue(n):n!==F.current.getValue()&&(N.current=!0,F.current.executeEdits("",[{range:F.current.getModel().getFullModelRange(),text:n,forceMoveMarkers:!0}]),F.current.pushUndoStop(),N.current=!1))},[n],K),Kt(()=>{let P=F.current?.getModel();P&&o&&re.current?.editor.setModelLanguage(P,o)},[o],K),Kt(()=>{h!==void 0&&F.current?.revealLine(h)},[h],K),Kt(()=>{re.current?.editor.setTheme(c)},[c],K);let G=C.useCallback(()=>{if(!(!V.current||!re.current)&&!U.current){$.current(re.current);let P=l||r,z=ks(re.current,n||e||"",t||o||"",P||"");F.current=re.current?.editor.create(V.current,{model:z,automaticLayout:!0,...d},v),_&&F.current.restoreViewState(Sa.get(P)),re.current.editor.setTheme(c),h!==void 0&&F.current.revealLine(h),X(!0),U.current=!0}},[e,t,r,n,o,l,d,v,_,c,h]);C.useEffect(()=>{K&&Q.current(F.current,re.current)},[K]),C.useEffect(()=>{!te&&!K&&G()},[te,K,G]),O.current=n,C.useEffect(()=>{K&&W&&(H.current?.dispose(),H.current=F.current?.onDidChangeModelContent(P=>{N.current||W(F.current.getValue(),P)}))},[K,W]),C.useEffect(()=>{if(K){let P=re.current.editor.onDidChangeMarkers(z=>{let le=F.current.getModel()?.uri;if(le&&z.find(fe=>fe.path===le.path)){let fe=re.current.editor.getModelMarkers({resource:le});A?.(fe)}});return()=>{P?.dispose()}}return()=>{}},[K,A]);function Y(){H.current?.dispose(),S?_&&Sa.set(l,F.current.saveViewState()):F.current.getModel()?.dispose(),F.current.dispose()}return zi.createElement(Y_,{width:x,height:w,isEditorReady:K,loading:p,_ref:V,className:b,wrapperProps:E})}var qb=Vb,Qb=C.memo(qb),Yb=Qb;function Gb(e){const t=e.split(".").pop()?.toLowerCase()||"";return{ts:"typescript",tsx:"typescript",js:"javascript",jsx:"javascript",json:"json",md:"markdown",html:"html",css:"css",scss:"scss",less:"less",py:"python",rb:"ruby",go:"go",rs:"rust",java:"java",c:"c",cpp:"cpp",h:"c",hpp:"cpp",sh:"shell",bash:"shell",zsh:"shell",yml:"yaml",yaml:"yaml",xml:"xml",sql:"sql",graphql:"graphql",vue:"vue",svelte:"svelte",dockerfile:"dockerfile",makefile:"makefile",gitignore:"plaintext",env:"plaintext"}[t]||"plaintext"}function J_(e){if(e.isDirectory)return g.jsx(An,{size:14,className:"text-amber-500 shrink-0"});const t=e.name.split(".").pop()?.toLowerCase()||"",r={ts:"text-blue-500",tsx:"text-blue-500",js:"text-yellow-500",jsx:"text-yellow-500",json:"text-yellow-600",md:"text-slate-500",html:"text-orange-500",css:"text-blue-400",py:"text-green-500",go:"text-cyan-500",rs:"text-orange-600"};return g.jsx(M_,{size:14,className:Le("shrink-0",r[t]||"text-slate-400")})}function Z_({nodes:e,onSelect:t,onToggle:r,selectedPath:n,onRefresh:o,onNewFile:l,onNewFolder:c,onDelete:h,level:p=0}){return g.jsx("div",{className:"text-sm",children:e.map(d=>g.jsxs("div",{children:[g.jsxs("div",{className:Le("flex items-center gap-1 px-2 py-1 cursor-pointer hover:bg-slate-100 group",n===d.entry.path&&"bg-primary-50 text-primary-700"),style:{paddingLeft:`${p*12+8}px`},onClick:()=>{d.entry.isDirectory?r(d.entry):t(d.entry)},children:[d.entry.isDirectory&&g.jsx("span",{className:"w-4 h-4 flex items-center justify-center shrink-0",children:d.isLoading?g.jsx(or,{size:12,className:"animate-spin text-slate-400"}):d.isExpanded?g.jsx($r,{size:12,className:"text-slate-400"}):g.jsx(zh,{size:12,className:"text-slate-400"})}),!d.entry.isDirectory&&g.jsx("span",{className:"w-4 shrink-0"}),J_(d.entry),g.jsx("span",{className:"truncate flex-1 text-slate-700",children:d.entry.name}),g.jsxs("div",{className:"hidden group-hover:flex items-center gap-0.5 shrink-0",children:[d.entry.isDirectory&&g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:v=>{v.stopPropagation(),l(d.entry.path)},className:"p-0.5 hover:bg-slate-200 rounded text-slate-500",title:"New File",children:g.jsx(O_,{size:12})}),g.jsx("button",{onClick:v=>{v.stopPropagation(),c(d.entry.path)},className:"p-0.5 hover:bg-slate-200 rounded text-slate-500",title:"New Folder",children:g.jsx(An,{size:12})}),g.jsx("button",{onClick:v=>{v.stopPropagation(),o(d.entry.path)},className:"p-0.5 hover:bg-slate-200 rounded text-slate-500",title:"Refresh",children:g.jsx(Vn,{size:12})})]}),g.jsx("button",{onClick:v=>{v.stopPropagation(),h(d.entry)},className:"p-0.5 hover:bg-red-100 text-red-500 rounded",title:"Delete",children:g.jsx($h,{size:12})})]})]}),d.entry.isDirectory&&d.isExpanded&&d.children&&g.jsx(Z_,{nodes:d.children,onSelect:t,onToggle:r,selectedPath:n,onRefresh:o,onNewFile:l,onNewFolder:c,onDelete:h,level:p+1})]},d.entry.path))})}function Xb({files:e,activeFile:t,onSelect:r,onClose:n}){return g.jsx("div",{className:"flex bg-slate-100 border-b border-slate-200 overflow-x-auto",children:e.map(o=>g.jsxs("div",{className:Le("flex items-center gap-2 px-3 py-2 cursor-pointer min-w-0 max-w-[200px] group border-b-2",t===o.path?"bg-white text-slate-800 border-b-primary-500":"bg-slate-50 text-slate-500 hover:bg-slate-100 border-b-transparent"),onClick:()=>r(o.path),children:[J_({name:o.name,isDirectory:!1}),g.jsx("span",{className:"truncate text-sm",children:o.name}),o.isDirty&&g.jsx("span",{className:"w-2 h-2 rounded-full bg-primary-500 shrink-0",title:"Unsaved changes"}),g.jsx("button",{onClick:l=>{l.stopPropagation(),n(o.path)},className:"p-0.5 hover:bg-slate-200 rounded opacity-0 group-hover:opacity-100 transition-opacity shrink-0",children:g.jsx(Wh,{size:12})})]},o.path))})}function Jb(){const{projectId:e}=vw(),t=jh(),[r,n]=C.useState([]),[o,l]=C.useState(null),[c,h]=C.useState([]),[p,d]=C.useState(null),[v]=C.useState(240),[_,S]=C.useState(null),[x,w]=C.useState(""),b=C.useRef(null),{data:E,isLoading:M,error:B}=Vt({queryKey:["project",e],queryFn:()=>Sx(e),enabled:!!e}),W=C.useCallback(async(D,U)=>{try{return[...(await Px(D,U)).entries].sort((Y,P)=>Y.isDirectory!==P.isDirectory?Y.isDirectory?-1:1:Y.name.localeCompare(P.name)).map(Y=>({entry:Y,isExpanded:!1,children:Y.isDirectory?[]:void 0}))}catch(N){return console.error("Failed to load directory:",N),[]}},[]);C.useEffect(()=>{E?.repo_path&&W(".",E.repo_path).then(n)},[E?.repo_path,W]);const A=C.useCallback(async D=>{if(!E?.repo_path)return;n(G=>{const Y=P=>P.map(z=>z.entry.path===D.path?z.isExpanded?{...z,isExpanded:!1}:z.children?.length?{...z,isExpanded:!0}:{...z,isLoading:!0}:z.children?{...z,children:Y(z.children)}:z);return Y(G)});const U=(G,Y)=>{for(const P of G){if(P.entry.path===Y)return P;if(P.children){const z=U(P.children,Y);if(z)return z}}return null},N=U(r,D.path);if(!N?.isExpanded&&!N?.children?.length){const G=await W(D.path,E.repo_path);n(Y=>{const P=z=>z.map(le=>le.entry.path===D.path?{...le,isExpanded:!0,isLoading:!1,children:G}:le.children?{...le,children:P(le.children)}:le);return P(Y)})}},[E?.repo_path,r,W]),K=C.useCallback(async D=>{if(!E?.repo_path||D.isDirectory)return;if(c.find(N=>N.path===D.path)){d(D.path),l(D.path);return}try{const N=await Rx(D.path,E.repo_path),G={path:D.path,name:D.name,content:N.content,originalContent:N.content,language:Gb(D.path),isDirty:!1};h(Y=>[...Y,G]),d(D.path),l(D.path)}catch(N){console.error("Failed to open file:",N)}},[E?.repo_path,c]),X=C.useCallback(D=>{if(!(c.find(N=>N.path===D)?.isDirty&&!confirm("You have unsaved changes. Close anyway?"))&&(h(N=>N.filter(G=>G.path!==D)),p===D)){const N=c.filter(G=>G.path!==D);d(N.length>0?N[N.length-1].path:null)}},[c,p]),te=C.useCallback(D=>{!p||D===void 0||h(U=>U.map(N=>N.path===p?{...N,content:D,isDirty:D!==N.originalContent}:N))},[p]),ne=Si({mutationFn:async({path:D,content:U})=>{if(!E?.repo_path)throw new Error("No repo path");return zm(D,U,E.repo_path)},onSuccess:(D,U)=>{h(N=>N.map(G=>G.path===U.path?{...G,originalContent:U.content,isDirty:!1}:G))}}),re=C.useCallback(()=>{const D=c.find(U=>U.path===p);!D||!D.isDirty||ne.mutate({path:D.path,content:D.content})},[c,p,ne]);C.useEffect(()=>{const D=U=>{(U.ctrlKey||U.metaKey)&&U.key==="s"&&(U.preventDefault(),re())};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[re]);const F=C.useCallback(async D=>{if(!E?.repo_path)return;const U=await W(D,E.repo_path);n(N=>{const G=Y=>Y.map(P=>P.entry.path===D?{...P,children:U,isExpanded:!0}:P.children?{...P,children:G(P.children)}:P);return D==="."?U:G(N)})},[E?.repo_path,W]),V=C.useCallback(async()=>{if(!_||!x.trim()||!E?.repo_path)return;const D=_.parentPath==="."?x:`${_.parentPath}/${x}`;try{_.type==="folder"?await Nx(D,E.repo_path):await zm(D,"",E.repo_path),await F(_.parentPath),S(null),w("")}catch(U){console.error("Failed to create item:",U)}},[_,x,E?.repo_path,F]),Q=Si({mutationFn:async D=>{if(!E?.repo_path)throw new Error("No repo path");return Lx(D.path,E.repo_path)},onSuccess:(D,U)=>{c.some(G=>G.path===U.path)&&X(U.path);const N=U.path.includes("/")?U.path.substring(0,U.path.lastIndexOf("/")):".";F(N)}}),$=C.useCallback(D=>{confirm(`Delete "${D.name}"?`)&&Q.mutate(D)},[Q]);C.useEffect(()=>{_&&b.current&&b.current.focus()},[_]);const H=C.useCallback(()=>{c.some(U=>U.isDirty)&&!confirm("You have unsaved changes. Leave anyway?")||t("/projects")},[c,t]),O=c.find(D=>D.path===p);return M?g.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:g.jsx(or,{className:"animate-spin text-primary-600",size:32})}):B||!E?g.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-50",children:[g.jsx(D_,{className:"text-red-400 mb-4",size:48}),g.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Project not found"}),g.jsx("button",{onClick:()=>t("/projects"),className:"text-primary-600 hover:underline text-sm",children:"Go back"})]}):g.jsxs("div",{className:"h-screen flex flex-col bg-slate-50",children:[g.jsxs("header",{className:"h-14 bg-white border-b border-slate-200 flex items-center px-4 shrink-0",children:[g.jsxs("button",{onClick:H,className:"flex items-center gap-2 px-3 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:[g.jsx(N_,{size:18}),g.jsx("span",{className:"text-sm font-medium",children:"Back"})]}),g.jsx("div",{className:"mx-4 h-6 w-px bg-slate-200"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("h1",{className:"text-sm font-semibold text-slate-800 truncate",children:E.name}),g.jsx("p",{className:"text-xs text-slate-400 font-mono truncate",children:E.repo_path})]}),O?.isDirty&&g.jsxs("button",{onClick:re,disabled:ne.isPending,className:"flex items-center gap-1.5 px-3 py-1.5 bg-primary-600 hover:bg-primary-700 text-white text-sm font-medium rounded-lg transition-colors disabled:opacity-50",children:[ne.isPending?g.jsx(or,{size:14,className:"animate-spin"}):null,"Save"]})]}),g.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[g.jsxs("aside",{className:"bg-white border-r border-slate-200 flex flex-col shrink-0",style:{width:v},children:[g.jsxs("div",{className:"h-10 px-4 flex items-center justify-between text-xs font-semibold text-slate-500 uppercase tracking-wider border-b border-slate-100",children:[g.jsx("span",{children:"Explorer"}),g.jsxs("div",{className:"flex items-center gap-0.5",children:[g.jsx("button",{onClick:()=>S({type:"file",parentPath:"."}),className:"p-1 hover:bg-slate-100 rounded text-slate-500",title:"New File",children:g.jsx(Ps,{size:14})}),g.jsx("button",{onClick:()=>S({type:"folder",parentPath:"."}),className:"p-1 hover:bg-slate-100 rounded text-slate-500",title:"New Folder",children:g.jsx(An,{size:14})}),g.jsx("button",{onClick:()=>F("."),className:"p-1 hover:bg-slate-100 rounded text-slate-500",title:"Refresh",children:g.jsx(Vn,{size:14})})]})]}),g.jsxs("div",{className:"flex-1 overflow-y-auto",children:[_?.parentPath==="."&&g.jsxs("div",{className:"px-2 py-1 flex items-center gap-1",style:{paddingLeft:"8px"},children:[_.type==="folder"?g.jsx(An,{size:14,className:"text-amber-500 shrink-0"}):g.jsx(M_,{size:14,className:"text-slate-400 shrink-0"}),g.jsx("input",{ref:b,type:"text",value:x,onChange:D=>w(D.target.value),onKeyDown:D=>{D.key==="Enter"&&V(),D.key==="Escape"&&(S(null),w(""))},onBlur:()=>{x.trim()?V():S(null)},className:"flex-1 bg-white border border-primary-500 rounded px-2 py-1 text-sm text-slate-700 outline-none focus:ring-1 focus:ring-primary-500",placeholder:_.type==="folder"?"folder name":"file name"})]}),g.jsx(Z_,{nodes:r,onSelect:K,onToggle:A,selectedPath:o,onRefresh:F,onNewFile:D=>S({type:"file",parentPath:D}),onNewFolder:D=>S({type:"folder",parentPath:D}),onDelete:$}),r.length===0&&g.jsxs("div",{className:"text-center py-8 text-slate-400",children:[g.jsx(An,{size:32,className:"mx-auto mb-2 opacity-50"}),g.jsx("p",{className:"text-xs",children:"No files found"})]})]})]}),g.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden bg-white",children:[c.length>0&&g.jsx(Xb,{files:c,activeFile:p,onSelect:d,onClose:X}),g.jsx("div",{className:"flex-1 overflow-hidden",children:O?g.jsx(Yb,{height:"100%",language:O.language,value:O.content,onChange:te,theme:"vs",options:{fontSize:14,fontFamily:"'Cascadia Code', 'Fira Code', Consolas, 'Courier New', monospace",minimap:{enabled:!0},scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,wordWrap:"off",lineNumbers:"on",renderLineHighlight:"all",smoothScrolling:!0,cursorBlinking:"smooth",cursorSmoothCaretAnimation:"on",padding:{top:8,bottom:8}}}):g.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[g.jsx(O_,{size:64,className:"mb-4 opacity-30"}),g.jsx("p",{className:"text-sm",children:"Select a file to start editing"})]})})]})]}),g.jsxs("div",{className:"h-6 bg-primary-600 flex items-center px-4 text-white text-xs shrink-0",children:[g.jsx("span",{children:O?.language||"Plain Text"}),g.jsx("div",{className:"flex-1"}),O?.isDirty&&g.jsx("span",{className:"mr-4",children:"Modified"}),g.jsx("span",{className:"opacity-75",children:"Ctrl+S to save"})]})]})}function Zb({name:e,className:t}){const r=t||"w-4 h-4",n=e.toLowerCase();return n.includes("read")||n.includes("glob")||n.includes("grep")?g.jsx(Na,{className:r}):n.includes("write")||n.includes("edit")?g.jsx(fx,{className:r}):n.includes("bash")||n.includes("shell")?g.jsx(qn,{className:r}):n.includes("search")?g.jsx(px,{className:r}):g.jsx(vx,{className:r})}function eC({message:e}){return g.jsxs("div",{className:"flex gap-3 px-4 py-4",children:[g.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center shrink-0",children:g.jsx(j_,{size:16,className:"text-blue-600"})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"You"}),g.jsx("div",{className:"text-slate-800 whitespace-pre-wrap",children:e.content})]})]})}function tC({message:e}){const t=e.isThinking||e.type==="thinking",r=e.executor==="codex"?"text-green-600":"text-purple-600",n=e.executor==="codex"?"bg-green-100":"bg-purple-100",o=e.executor==="codex"?"Codex":"Claude";return g.jsxs("div",{className:"flex gap-3 px-4 py-4 bg-slate-50",children:[g.jsx("div",{className:Le("w-8 h-8 rounded-full flex items-center justify-center shrink-0",n),children:t?g.jsx(rx,{size:16,className:r}):g.jsx(Wa,{size:16,className:r})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[g.jsx("span",{className:"text-xs text-slate-400",children:o}),t&&g.jsxs("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:[g.jsx(or,{size:10,className:"animate-spin"}),"Thinking..."]})]}),g.jsx("div",{className:Le("whitespace-pre-wrap",t?"text-slate-500 italic":"text-slate-800"),children:e.content||(t?"Processing...":"")})]})]})}function rC({message:e}){const[t,r]=C.useState(!1),n=e.toolName||"Unknown Tool",o=e.toolInput?JSON.stringify(e.toolInput,null,2):"",l=e.toolInput?Object.entries(e.toolInput).slice(0,2).map(([c,h])=>`${c}: ${typeof h=="string"?h.slice(0,30):JSON.stringify(h).slice(0,30)}`).join(", "):"";return g.jsx("div",{className:"px-4 py-2 ml-11",children:g.jsxs("div",{className:"border border-amber-200 bg-amber-50 rounded-lg overflow-hidden",children:[g.jsxs("button",{onClick:()=>r(!t),className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-amber-100 transition-colors",children:[g.jsx(Zb,{name:n,className:"w-4 h-4 text-amber-600"}),g.jsx("span",{className:"font-medium text-sm text-amber-800",children:n}),g.jsx("span",{className:"text-xs text-amber-600 truncate flex-1 text-left font-mono",children:l&&l.length>50?l.slice(0,50)+"...":l}),t?g.jsx($r,{size:14,className:"text-amber-600"}):g.jsx(zh,{size:14,className:"text-amber-600"})]}),t&&o&&g.jsx("div",{className:"px-3 pb-3 border-t border-amber-200",children:g.jsx("pre",{className:"mt-2 bg-white rounded p-2 text-xs font-mono text-slate-700 overflow-x-auto max-h-48 overflow-y-auto",children:o})})]})})}function iC({message:e}){const[t,r]=C.useState(!1),n=e.isError,o=e.content||e.toolOutput||"",l=o.length>80?o.slice(0,80)+"...":o;return g.jsx("div",{className:"px-4 py-2 ml-11",children:g.jsxs("div",{className:Le("border rounded-lg overflow-hidden",n?"border-red-200 bg-red-50":"border-green-200 bg-green-50"),children:[g.jsxs("button",{onClick:()=>r(!t),className:Le("w-full flex items-center gap-2 px-3 py-2 transition-colors",n?"hover:bg-red-100":"hover:bg-green-100"),children:[n?g.jsx(D_,{size:14,className:"text-red-500 shrink-0"}):g.jsx(L_,{size:14,className:"text-green-500 shrink-0"}),g.jsx("span",{className:Le("font-medium text-sm",n?"text-red-700":"text-green-700"),children:n?"Error":"Result"}),g.jsx("span",{className:"text-xs text-slate-600 truncate flex-1 text-left",children:l}),o.length>80&&(t?g.jsx($r,{size:14,className:"text-slate-400"}):g.jsx(zh,{size:14,className:"text-slate-400"}))]}),t&&g.jsx("div",{className:Le("px-3 pb-3 border-t",n?"border-red-200":"border-green-200"),children:g.jsx("pre",{className:"mt-2 bg-white rounded p-2 text-xs font-mono text-slate-700 overflow-x-auto max-h-64 overflow-y-auto whitespace-pre-wrap",children:o})})]})})}function sC({message:e}){const t=e.executor==="codex"?"text-green-600":"text-purple-600",r=e.executor==="codex"?"bg-green-50":"bg-purple-50",n=e.executor==="codex"?"border-green-200":"border-purple-200";return g.jsxs("div",{className:"flex gap-3 px-4 py-4",children:[g.jsx("div",{className:Le("w-8 h-8 rounded-full flex items-center justify-center shrink-0",e.executor==="codex"?"bg-green-100":"bg-purple-100"),children:g.jsx(L_,{size:16,className:t})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:"text-xs text-slate-400 mb-2",children:"Task Completed"}),g.jsx("div",{className:Le("rounded-lg border p-3",r,n),children:g.jsx("div",{className:"text-slate-800 whitespace-pre-wrap",children:e.content})})]})]})}function nC({message:e}){const t=e.content.includes("Codex")||e.content.includes(""),r=e.content.includes("Claude")||e.content.includes("");return g.jsx("div",{className:"px-4 py-2",children:g.jsxs("div",{className:Le("flex items-center justify-center gap-2 text-xs",t?"text-green-600":r?"text-purple-600":"text-slate-400"),children:[g.jsx("div",{className:Le("h-px flex-1",t?"bg-green-200":r?"bg-purple-200":"bg-slate-200")}),g.jsx(nx,{size:12}),g.jsx("span",{children:e.content}),g.jsx("div",{className:Le("h-px flex-1",t?"bg-green-200":r?"bg-purple-200":"bg-slate-200")})]})})}function _u({message:e}){const t=e.type==="user",r=e.status==="error"||e.isError;return g.jsx("div",{className:Le("px-2 py-1.5 text-xs rounded",t?"bg-blue-50 text-blue-800":r?"bg-red-50 text-red-700":"bg-slate-50 text-slate-700"),children:g.jsxs("div",{className:"flex items-start gap-1.5",children:[t?g.jsx(j_,{size:12,className:"text-blue-500 shrink-0 mt-0.5"}):e.executor==="codex"?g.jsx(Wa,{size:12,className:"text-green-500 shrink-0 mt-0.5"}):g.jsx(Wa,{size:12,className:"text-purple-500 shrink-0 mt-0.5"}),g.jsx("span",{className:"break-words",children:e.content})]})})}function oC({message:e,compact:t}){if(t)return g.jsx(_u,{message:e});if(e.type==="agent")return g.jsx(_u,{message:e,compact:!0});switch(e.type){case"user":return g.jsx(eC,{message:e});case"assistant":case"thinking":return g.jsx(tC,{message:e});case"tool_use":return g.jsx(rC,{message:e});case"tool_result":return g.jsx(iC,{message:e});case"result":return g.jsx(sC,{message:e});case"system":return g.jsx(nC,{message:e});default:return g.jsx(_u,{message:e})}}function ev({session:e,projects:t,onUpdate:r,onClose:n,onBack:o,showViewToggle:l=!0,availableModels:c,selectedModel:h,onModelChange:p,executorMode:d,onExecutorModeChange:v}){const _=qi(),S=C.useRef(null),[x,w]=C.useState(!1),[b,E]=C.useState(!1),[M,B]=C.useState(!1),[W,A]=C.useState("chat"),K=t.find(F=>F.project_id===e.projectId);C.useEffect(()=>{e.status==="running"&&S.current?.scrollIntoView({behavior:"smooth"})},[e.messages.length,e.logs.length,e.status]),C.useEffect(()=>!e.runId||e.status!=="running"?void 0:kx(e.runId,V=>{r({logs:[...e.logs,V]});const Q=V.metadata,$=V.source==="claude"||V.source==="codex"?V.source:void 0;if(V.level==="info"||V.level==="warn"||V.level==="error"){const H={id:`${V.timestamp}-${Math.random()}`,type:"agent",content:V.message,timestamp:V.timestamp,status:V.level==="error"?"error":"success",executor:$,metadata:Q};r({messages:[...e.messages,H]})}V.message.includes(" Run completed")||V.message.includes("Run completed successfully")?r({status:"completed"}):(V.message.includes(" Run failed")||V.message.includes("Run failed"))&&r({status:"failed"})}),[e.runId,e.status,e.id]),C.useEffect(()=>{if(!e.runId||e.messages.length>0)return;(async()=>{try{const V=await B_(e.runId);if(V.status==="running"||V.status==="pending"){r({status:"running"});const{logs:Q}=await Wu(e.runId),$=Q.filter(H=>H.level==="info"||H.level==="warn"||H.level==="error").map(H=>({id:`${H.timestamp}-${Math.random()}`,type:"agent",content:H.message,timestamp:H.timestamp,status:H.level==="error"?"error":"success"}));r({messages:$,logs:Q})}else V.status==="completed"?r({status:"completed"}):V.status==="failed"&&r({status:"failed"})}catch{r({runId:null,status:"idle"})}})()},[e.runId]);const X=Si({mutationFn:F=>I_(F),onSuccess:F=>{r({runId:F.run_id,status:"running",messages:[...e.messages,{id:`user-${Date.now()}`,type:"user",content:e.input,timestamp:new Date().toISOString()}],input:""}),_.invalidateQueries({queryKey:["runs"]})}}),te=()=>{!e.input.trim()||!e.projectId||!K||X.mutate({goal:e.input,repoPath:K.repo_path,projectId:e.projectId})},ne=F=>{F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),te())},re=()=>{r({status:"idle"})};return g.jsxs("div",{className:Le("flex flex-col h-full bg-white",n&&"border-r border-slate-200 w-[320px] min-w-[280px] max-w-[400px] flex-shrink-0"),children:[g.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-slate-200 bg-slate-50",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[o&&g.jsx("button",{onClick:o,className:"p-1.5 text-slate-500 hover:text-slate-700 hover:bg-slate-100 rounded-lg transition-colors",children:g.jsx(N_,{size:20})}),g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:()=>w(!x),disabled:e.status==="running",className:"flex items-center gap-2 px-3 py-1.5 text-sm text-slate-700 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50",children:[g.jsx(Kn,{size:16}),g.jsx("span",{className:"truncate max-w-[200px]",children:K?.name||"Select Project"}),g.jsx($r,{size:14})]}),x&&g.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 min-w-[250px] max-h-[300px] overflow-y-auto z-50",children:t.map(F=>g.jsxs("button",{onClick:()=>{r({projectId:F.project_id}),w(!1)},className:Le("w-full text-left px-3 py-2 text-sm hover:bg-slate-50",F.project_id===e.projectId&&"bg-primary-50 text-primary-600"),children:[g.jsx("div",{className:"font-medium truncate",children:F.name}),g.jsx("div",{className:"text-xs text-slate-400 truncate",children:F.repo_path})]},F.project_id))})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[e.status==="running"&&g.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium bg-yellow-100 text-yellow-700 rounded-full",children:[g.jsx(or,{size:10,className:"animate-spin"}),""]}),e.status==="completed"&&g.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-green-100 text-green-700 rounded-full",children:""}),e.status==="failed"&&g.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-red-100 text-red-700 rounded-full",children:""}),n&&g.jsx("button",{onClick:n,className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:g.jsx(Wh,{size:18})})]})]}),l&&g.jsxs("div",{className:"flex border-b border-slate-200",children:[g.jsxs("button",{onClick:()=>A("chat"),className:Le("flex-1 px-4 py-2 text-sm font-medium transition-colors",W==="chat"?"text-primary-600 border-b-2 border-primary-600":"text-slate-500 hover:text-slate-700"),children:[g.jsx(dx,{size:14,className:"inline mr-2"}),"Chat"]}),g.jsxs("button",{onClick:()=>A("logs"),className:Le("flex-1 px-4 py-2 text-sm font-medium transition-colors",W==="logs"?"text-primary-600 border-b-2 border-primary-600":"text-slate-500 hover:text-slate-700"),children:[g.jsx(qn,{size:14,className:"inline mr-2"}),"Logs"]})]}),g.jsx("div",{className:"flex-1 overflow-y-auto",children:W==="chat"?g.jsxs("div",{className:"max-w-3xl mx-auto p-4 space-y-3",children:[e.messages.length===0?g.jsx("div",{className:"text-center text-slate-400 text-sm py-16",children:e.projectId?"":""}):e.messages.map(F=>g.jsx(oC,{message:F},F.id)),g.jsx("div",{ref:S})]}):g.jsxs("div",{className:"font-mono text-xs",children:[e.logs.length===0?g.jsx("div",{className:"text-center text-slate-400 text-sm py-16",children:""}):e.logs.map((F,V)=>g.jsxs("div",{className:Le("px-4 py-1.5 border-b border-slate-100",F.level==="error"&&"bg-red-50",F.level==="warn"&&"bg-amber-50"),children:[g.jsx("span",{className:"text-slate-400",children:new Date(F.timestamp).toLocaleTimeString()}),g.jsxs("span",{className:Le("ml-2",F.level==="error"&&"text-red-600",F.level==="warn"&&"text-amber-600",F.level==="info"&&"text-primary-600",F.level==="debug"&&"text-slate-400"),children:["[",F.source,"]"]}),g.jsx("span",{className:"ml-2 text-slate-700",children:F.message})]},`${F.timestamp}-${V}`)),g.jsx("div",{ref:S})]})}),g.jsx("div",{className:"border-t border-slate-200 p-4 bg-white",children:g.jsxs("div",{className:"max-w-3xl mx-auto",children:[(c||d)&&g.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[c&&h&&p&&g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:()=>E(!b),disabled:e.status==="running",className:"flex items-center gap-1 px-2 py-1 text-xs text-slate-500 hover:bg-slate-100 rounded transition-colors disabled:opacity-50",children:[g.jsx("span",{children:h}),g.jsx($r,{size:12})]}),b&&c.length>0&&g.jsx("div",{className:"absolute bottom-full left-0 mb-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 min-w-[150px] max-h-[200px] overflow-y-auto z-50",children:c.map(F=>g.jsx("button",{onClick:()=>{p(F),E(!1)},className:Le("w-full text-left px-3 py-1.5 text-xs hover:bg-slate-50",F===h&&"bg-primary-50 text-primary-600"),children:F},F))})]}),d&&v&&g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:()=>B(!M),className:Le("flex items-center gap-1.5 px-2 py-1 text-xs rounded transition-colors",d==="codex_only"&&"bg-green-100 text-green-700",d==="claude_only"&&"bg-purple-100 text-purple-700",d==="agent"&&"bg-slate-100 text-slate-500 hover:bg-slate-200"),children:[g.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:d==="codex_only"?"#22c55e":d==="claude_only"?"#a855f7":"#94a3b8"}}),g.jsx("span",{children:d==="codex_only"?"Codex":d==="claude_only"?"Claude":"Agent"}),g.jsx($r,{size:12})]}),M&&g.jsx("div",{className:"absolute bottom-full left-0 mb-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 min-w-[140px] z-50",children:[{value:"agent",label:"Agent",color:"#94a3b8"},{value:"codex_only",label:"Codex",color:"#22c55e"},{value:"claude_only",label:"Claude",color:"#a855f7"}].map(F=>g.jsxs("button",{onClick:()=>{v(F.value),B(!1)},className:Le("w-full text-left px-3 py-1.5 text-xs hover:bg-slate-50 flex items-center gap-2",F.value===d&&"bg-primary-50"),children:[g.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:F.color}}),F.label]},F.value))})]})]}),g.jsxs("div",{className:"relative",children:[g.jsx("textarea",{value:e.input,onChange:F=>r({input:F.target.value}),onKeyDown:ne,placeholder:e.projectId?"...":"",disabled:!e.projectId||e.status==="running",className:"w-full resize-none border border-slate-200 rounded-lg px-4 py-3 pr-14 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 min-h-[80px] disabled:bg-slate-50",rows:3}),g.jsx("div",{className:"absolute right-2 bottom-2",children:e.status==="running"?g.jsx("button",{onClick:re,className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:g.jsx(_x,{size:16})}):g.jsx("button",{onClick:te,disabled:!e.input.trim()||!e.projectId,className:Le("p-2 rounded-lg transition-colors",e.input.trim()&&e.projectId?"bg-primary-500 text-white hover:bg-primary-600":"bg-slate-100 text-slate-400"),children:g.jsx(T_,{size:16})})})]})]})})]})}function aC({sessions:e,projects:t,onUpdateSession:r,onAddSession:n,onRemoveSession:o,onSwitchToTimeline:l}){return g.jsxs("div",{className:"flex flex-col h-full bg-slate-100",children:[g.jsxs("div",{className:"flex items-center justify-between p-2 bg-white border-b border-slate-200",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("h1",{className:"text-sm font-semibold text-slate-700",children:"Parallel Agents"}),g.jsxs("span",{className:"text-xs text-slate-400",children:["(",e.length,")"]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{onClick:n,className:"flex items-center gap-1 px-2 py-1 text-xs text-primary-600 hover:bg-primary-50 rounded transition-colors",children:[g.jsx(Ps,{size:14}),""]}),g.jsxs("button",{onClick:l,className:"flex items-center gap-1 px-2 py-1 text-xs text-slate-500 hover:bg-slate-100 rounded transition-colors",children:[g.jsx(hx,{size:14}),""]})]})]}),g.jsxs("div",{className:"flex-1 flex overflow-x-auto",children:[e.length===0?g.jsx("div",{className:"flex-1 flex items-center justify-center",children:g.jsxs("button",{onClick:n,className:"flex flex-col items-center gap-2 p-6 text-slate-400 hover:text-slate-600 hover:bg-white rounded-lg border-2 border-dashed border-slate-300 hover:border-slate-400 transition-colors",children:[g.jsx(Ps,{size:24}),g.jsx("span",{className:"text-sm",children:""})]})}):e.map(c=>g.jsx(ev,{session:c,projects:t,onUpdate:h=>r(c.id,h),onClose:()=>o(c.id)},c.id)),e.length>0&&g.jsx("button",{onClick:n,className:"flex items-center justify-center min-w-[100px] text-slate-400 hover:text-slate-600 hover:bg-white rounded-lg border-2 border-dashed border-slate-300 hover:border-slate-400 transition-colors",children:g.jsx(Ps,{size:20})})]})]})}function lC({projects:e,onStartNew:t,onOpenRun:r,onOpenOrphaned:n,onSwitchToParallel:o,selectedModel:l,availableModels:c,onModelChange:h,executorMode:p,onExecutorModeChange:d}){const v=qi(),[_,S]=C.useState(""),[x,w]=C.useState(null),[b,E]=C.useState(!1),[M,B]=C.useState(!1),[W,A]=C.useState(!1),{data:K,isLoading:X}=Vt({queryKey:["runs"],queryFn:yx,refetchInterval:5e3}),te=K?.runs||[],{data:ne}=Vt({queryKey:["orphanedSessions"],queryFn:bx,refetchInterval:1e4}),re=ne?.sessions||[],F=async(O,D)=>{D.stopPropagation(),await Cx(O),v.invalidateQueries({queryKey:["orphanedSessions"]})},V=e.find(O=>O.project_id===x),Q=()=>{!_.trim()||!x||(t(x,_),S(""))},$=O=>{O.key==="Enter"&&!O.shiftKey&&(O.preventDefault(),Q())},H=O=>{switch(O){case"running":return g.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium bg-yellow-100 text-yellow-700 rounded-full",children:[g.jsx(or,{size:10,className:"animate-spin"}),""]});case"completed":return g.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-green-100 text-green-700 rounded-full",children:""});case"failed":return g.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-red-100 text-red-700 rounded-full",children:""});case"interrupted":return g.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-orange-100 text-orange-700 rounded-full",children:""});default:return g.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-slate-100 text-slate-500 rounded-full",children:""})}};return g.jsxs("div",{className:"flex-1 flex flex-col bg-slate-50",children:[g.jsx("div",{className:"p-4 bg-white border-b border-slate-200",children:g.jsxs("div",{className:"max-w-2xl mx-auto space-y-3",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("h1",{className:"text-lg font-semibold text-slate-800",children:"Agents"}),g.jsxs("button",{onClick:o,className:"flex items-center gap-1 px-2 py-1 text-xs text-slate-500 hover:bg-slate-100 rounded transition-colors",children:[g.jsx(sx,{size:14}),""]})]}),g.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[g.jsxs("div",{className:"relative flex-1",children:[g.jsxs("button",{onClick:()=>E(!b),className:"flex items-center gap-2 px-3 py-2.5 text-sm text-slate-700 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors w-full border border-slate-200",children:[g.jsx(Kn,{size:16}),g.jsx("span",{className:"truncate flex-1 text-left",children:V?.name||""}),g.jsx($r,{size:16})]}),b&&g.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 w-full max-h-[250px] overflow-y-auto z-50",children:e.map(O=>g.jsxs("button",{onClick:()=>{w(O.project_id),E(!1)},className:Le("w-full text-left px-3 py-2 text-sm hover:bg-slate-50",O.project_id===x&&"bg-primary-50 text-primary-600"),children:[g.jsx("div",{className:"font-medium truncate",children:O.name}),g.jsx("div",{className:"text-xs text-slate-400 truncate",children:O.repo_path})]},O.project_id))})]}),g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:()=>B(!M),className:"flex items-center gap-1 px-3 py-2.5 text-xs text-slate-500 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors border border-slate-200",children:[g.jsx("span",{children:l}),g.jsx($r,{size:14})]}),M&&c.length>0&&g.jsx("div",{className:"absolute top-full right-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 min-w-[150px] max-h-[200px] overflow-y-auto z-50",children:c.map(O=>g.jsx("button",{onClick:()=>{h(O),B(!1)},className:Le("w-full text-left px-3 py-1.5 text-xs hover:bg-slate-50",O===l&&"bg-primary-50 text-primary-600"),children:O},O))})]})]}),g.jsxs("div",{className:"relative",children:[g.jsx("textarea",{value:_,onChange:O=>S(O.target.value),onKeyDown:$,placeholder:x?"...":"",disabled:!x,className:"w-full resize-none border border-slate-200 rounded-lg px-4 py-3 pb-12 pr-14 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 min-h-[100px] disabled:bg-slate-50 disabled:text-slate-400",rows:3}),g.jsxs("div",{className:"absolute left-2 right-2 bottom-2 flex items-center justify-between",children:[g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:()=>A(!W),className:Le("flex items-center gap-1.5 px-2 py-1 text-xs rounded-md transition-colors",p==="codex_only"&&"bg-green-100 text-green-700",p==="claude_only"&&"bg-purple-100 text-purple-700",p==="agent"&&"bg-slate-100 text-slate-500 hover:bg-slate-200"),children:[g.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:p==="codex_only"?"#22c55e":p==="claude_only"?"#a855f7":"#94a3b8"}}),g.jsx("span",{children:p==="codex_only"?"Codex":p==="claude_only"?"Claude":"Agent"}),g.jsx($r,{size:12})]}),W&&g.jsx("div",{className:"absolute bottom-full left-0 mb-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 min-w-[140px] z-50",children:[{value:"agent",label:"Agent",color:"#94a3b8"},{value:"codex_only",label:"Codex",color:"#22c55e"},{value:"claude_only",label:"Claude",color:"#a855f7"}].map(O=>g.jsxs("button",{onClick:()=>{d(O.value),A(!1)},className:Le("w-full text-left px-3 py-1.5 text-xs hover:bg-slate-50 flex items-center gap-2",O.value===p&&"bg-primary-50"),children:[g.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:O.color}}),O.label]},O.value))})]}),g.jsx("button",{onClick:Q,disabled:!_.trim()||!x,className:Le("p-2 rounded-lg transition-colors",_.trim()&&x?"bg-primary-500 text-white hover:bg-primary-600":"bg-slate-100 text-slate-400"),children:g.jsx(T_,{size:18})})]})]})]})}),g.jsx("div",{className:"flex-1 overflow-y-auto",children:g.jsxs("div",{className:"max-w-2xl mx-auto py-4 px-2",children:[re.length>0&&g.jsxs("div",{className:"mb-6",children:[g.jsx("h3",{className:"px-3 text-xs font-semibold text-orange-600 uppercase tracking-wider mb-2",children:""}),g.jsx("div",{className:"bg-white rounded-lg border border-orange-200 divide-y divide-orange-100",children:re.map(O=>g.jsx("div",{onClick:()=>n(O.run_id,O.first_message),className:"px-4 py-3 hover:bg-orange-50 cursor-pointer",children:g.jsxs("div",{className:"flex items-start justify-between gap-3",children:[g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[H("interrupted"),g.jsxs("span",{className:"text-xs text-slate-400",children:[O.log_count," "]})]}),g.jsx("p",{className:"text-sm text-slate-600 line-clamp-2",children:O.first_message||"()"}),g.jsx("p",{className:"text-xs text-slate-400 mt-1",children:new Date(O.last_log).toLocaleString()})]}),g.jsx("button",{onClick:D=>F(O.run_id,D),className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg",children:g.jsx($h,{size:16})})]})},O.run_id))})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"px-3 text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2",children:""}),X?g.jsxs("div",{className:"text-center text-slate-400 text-sm py-12 bg-white rounded-lg border border-slate-200",children:[g.jsx(or,{size:20,className:"animate-spin mx-auto mb-2"}),"..."]}):te.length===0?g.jsx("div",{className:"text-center text-slate-400 text-sm py-12 bg-white rounded-lg border border-slate-200",children:""}):g.jsx("div",{className:"bg-white rounded-lg border border-slate-200 divide-y divide-slate-100",children:te.map(O=>{const D=e.find(U=>U.project_id===O.project_id);return g.jsx("div",{onClick:()=>r(O.run_id,O.project_id,O.user_goal),className:"px-4 py-3 hover:bg-slate-50 cursor-pointer",children:g.jsx("div",{className:"flex items-start justify-between gap-3",children:g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[g.jsx("span",{className:"font-medium text-slate-700 truncate",children:D?.name||"Unknown Project"}),H(O.status)]}),g.jsx("p",{className:"text-sm text-slate-600 line-clamp-2",children:O.user_goal||"(no goal)"}),g.jsx("p",{className:"text-xs text-slate-400 mt-1",children:new Date(O.created_at).toLocaleString()})]})})},O.run_id)})})]})]})})]})}function cC(){const[e,t]=C.useState("timeline"),[r,n]=C.useState(null),[o,l]=C.useState([]),[c,h]=C.useState("gpt-4.1"),[p,d]=C.useState("agent"),{data:v}=Vt({queryKey:["projects"],queryFn:A_}),_=v?.projects||[],{data:S}=Vt({queryKey:["copilotStatus"],queryFn:$_,refetchInterval:1e4}),{data:x}=Vt({queryKey:["copilotModels"],queryFn:Ex,enabled:S?.running&&S?.healthy,staleTime:6e4}),{data:w}=Vt({queryKey:["settings"],queryFn:z_}),b=Si({mutationFn:H_}),E=(x?.models??[]).map(H=>H.id);C.useEffect(()=>{w?.dag_model&&h(w.dag_model)},[w?.dag_model]),C.useEffect(()=>{w?.executor_mode&&d(w.executor_mode)},[w?.executor_mode]);const M=H=>{h(H),b.mutate({dag_model:H})},B=H=>{d(H),b.mutate({executor_mode:H})},W=qi(),A=Si({mutationFn:H=>I_(H)}),K=(H,O)=>{const D=_.find(N=>N.project_id===H);if(!D)return;const U={id:`session-${Date.now()}`,projectId:H,runId:null,status:"idle",input:"",messages:[],logs:[]};A.mutate({goal:O,repoPath:D.repo_path,projectId:H},{onSuccess:N=>{n({...U,runId:N.run_id,status:"running",messages:[{id:`user-${Date.now()}`,type:"user",content:O,timestamp:new Date().toISOString()}]}),t("single"),W.invalidateQueries({queryKey:["runs"]})}})},X=async(H,O,D)=>{try{const U=await B_(H),N=U.status==="running"||U.status==="pending"?"running":U.status==="completed"?"completed":U.status==="failed"?"failed":U.status==="interrupted"?"interrupted":"idle",{logs:G}=await Wu(H),Y=[{id:`user-${Date.now()}`,type:"user",content:D,timestamp:U.created_at},...G.filter(P=>P.level==="info"||P.level==="warn"||P.level==="error").map(P=>({id:`${P.timestamp}-${Math.random()}`,type:"agent",content:P.message,timestamp:P.timestamp,status:P.level==="error"?"error":"success",executor:P.source==="claude"||P.source==="codex"?P.source:void 0}))];n({id:`session-${Date.now()}`,projectId:O||null,runId:H,status:N,input:"",messages:Y,logs:G}),t("single")}catch(U){console.error("Failed to open run:",U)}},te=async(H,O)=>{try{const{logs:D}=await Wu(H),U=D.filter(N=>N.level==="info"||N.level==="warn"||N.level==="error").map(N=>({id:`${N.timestamp}-${Math.random()}`,type:"agent",content:N.message,timestamp:N.timestamp,status:N.level==="error"?"error":"success",executor:N.source==="claude"||N.source==="codex"?N.source:void 0}));n({id:`session-${Date.now()}`,projectId:null,runId:null,status:"interrupted",input:"",messages:U,logs:D}),t("single")}catch(D){console.error("Failed to open orphaned session:",D)}},ne=H=>{r&&n({...r,...H})},re=()=>{const H={id:`session-${Date.now()}`,projectId:null,runId:null,status:"idle",input:"",messages:[],logs:[]};l([...o,H])},F=H=>{l(o.filter(O=>O.id!==H))},V=(H,O)=>{l(o.map(D=>D.id===H?{...D,...O}:D))},Q=()=>{t("columns"),o.length===0&&re()},$=()=>{t("timeline"),n(null)};return g.jsx("div",{className:"h-[calc(100vh-64px)] lg:h-screen flex flex-col",children:e==="single"&&r?g.jsx(ev,{session:r,projects:_,onUpdate:ne,onBack:()=>{n(null),t("timeline")},availableModels:E,selectedModel:c,onModelChange:M,executorMode:p,onExecutorModeChange:B}):e==="columns"?g.jsx(aC,{sessions:o,projects:_,onUpdateSession:V,onAddSession:re,onRemoveSession:F,onSwitchToTimeline:$}):g.jsx(lC,{projects:_,onStartNew:K,onOpenRun:X,onOpenOrphaned:te,onSwitchToParallel:Q,selectedModel:c,availableModels:E,onModelChange:M,executorMode:p,onExecutorModeChange:B})})}/**
 * Copyright (c) 2014-2024 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * @license MIT
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 */var tv=Object.defineProperty,uC=Object.getOwnPropertyDescriptor,hC=(e,t)=>{for(var r in t)tv(e,r,{get:t[r],enumerable:!0})},Qe=(e,t,r,n)=>{for(var o=n>1?void 0:n?uC(t,r):t,l=e.length-1,c;l>=0;l--)(c=e[l])&&(o=(n?c(t,r,o):c(o))||o);return n&&o&&tv(t,r,o),o},oe=(e,t)=>(r,n)=>t(r,n,e),Ym="Terminal input",Uu={get:()=>Ym,set:e=>Ym=e},Gm="Too much output to announce, navigate to rows manually to read",Ku={get:()=>Gm,set:e=>Gm=e};function dC(e){return e.replace(/\r?\n/g,"\r")}function fC(e,t){return t?"\x1B[200~"+e+"\x1B[201~":e}function pC(e,t){e.clipboardData&&e.clipboardData.setData("text/plain",t.selectionText),e.preventDefault()}function mC(e,t,r,n){if(e.stopPropagation(),e.clipboardData){let o=e.clipboardData.getData("text/plain");rv(o,t,r,n)}}function rv(e,t,r,n){e=dC(e),e=fC(e,r.decPrivateModes.bracketedPasteMode&&n.rawOptions.ignoreBracketedPasteMode!==!0),r.triggerDataEvent(e,!0),t.value=""}function iv(e,t,r){let n=r.getBoundingClientRect(),o=e.clientX-n.left-10,l=e.clientY-n.top-10;t.style.width="20px",t.style.height="20px",t.style.left=`${o}px`,t.style.top=`${l}px`,t.style.zIndex="1000",t.focus()}function Xm(e,t,r,n,o){iv(e,t,r),o&&n.rightClickSelect(e),t.value=n.selectionText,t.select()}function mi(e){return e>65535?(e-=65536,String.fromCharCode((e>>10)+55296)+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)}function rl(e,t=0,r=e.length){let n="";for(let o=t;o<r;++o){let l=e[o];l>65535?(l-=65536,n+=String.fromCharCode((l>>10)+55296)+String.fromCharCode(l%1024+56320)):n+=String.fromCharCode(l)}return n}var gC=class{constructor(){this._interim=0}clear(){this._interim=0}decode(e,t){let r=e.length;if(!r)return 0;let n=0,o=0;if(this._interim){let l=e.charCodeAt(o++);56320<=l&&l<=57343?t[n++]=(this._interim-55296)*1024+l-56320+65536:(t[n++]=this._interim,t[n++]=l),this._interim=0}for(let l=o;l<r;++l){let c=e.charCodeAt(l);if(55296<=c&&c<=56319){if(++l>=r)return this._interim=c,n;let h=e.charCodeAt(l);56320<=h&&h<=57343?t[n++]=(c-55296)*1024+h-56320+65536:(t[n++]=c,t[n++]=h);continue}c!==65279&&(t[n++]=c)}return n}},_C=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(e,t){let r=e.length;if(!r)return 0;let n=0,o,l,c,h,p=0,d=0;if(this.interim[0]){let S=!1,x=this.interim[0];x&=(x&224)===192?31:(x&240)===224?15:7;let w=0,b;for(;(b=this.interim[++w]&63)&&w<4;)x<<=6,x|=b;let E=(this.interim[0]&224)===192?2:(this.interim[0]&240)===224?3:4,M=E-w;for(;d<M;){if(d>=r)return 0;if(b=e[d++],(b&192)!==128){d--,S=!0;break}else this.interim[w++]=b,x<<=6,x|=b&63}S||(E===2?x<128?d--:t[n++]=x:E===3?x<2048||x>=55296&&x<=57343||x===65279||(t[n++]=x):x<65536||x>1114111||(t[n++]=x)),this.interim.fill(0)}let v=r-4,_=d;for(;_<r;){for(;_<v&&!((o=e[_])&128)&&!((l=e[_+1])&128)&&!((c=e[_+2])&128)&&!((h=e[_+3])&128);)t[n++]=o,t[n++]=l,t[n++]=c,t[n++]=h,_+=4;if(o=e[_++],o<128)t[n++]=o;else if((o&224)===192){if(_>=r)return this.interim[0]=o,n;if(l=e[_++],(l&192)!==128){_--;continue}if(p=(o&31)<<6|l&63,p<128){_--;continue}t[n++]=p}else if((o&240)===224){if(_>=r)return this.interim[0]=o,n;if(l=e[_++],(l&192)!==128){_--;continue}if(_>=r)return this.interim[0]=o,this.interim[1]=l,n;if(c=e[_++],(c&192)!==128){_--;continue}if(p=(o&15)<<12|(l&63)<<6|c&63,p<2048||p>=55296&&p<=57343||p===65279)continue;t[n++]=p}else if((o&248)===240){if(_>=r)return this.interim[0]=o,n;if(l=e[_++],(l&192)!==128){_--;continue}if(_>=r)return this.interim[0]=o,this.interim[1]=l,n;if(c=e[_++],(c&192)!==128){_--;continue}if(_>=r)return this.interim[0]=o,this.interim[1]=l,this.interim[2]=c,n;if(h=e[_++],(h&192)!==128){_--;continue}if(p=(o&7)<<18|(l&63)<<12|(c&63)<<6|h&63,p<65536||p>1114111)continue;t[n++]=p}}return n}},sv="",gi=" ",ro=class nv{constructor(){this.fg=0,this.bg=0,this.extended=new Ka}static toColorRGB(t){return[t>>>16&255,t>>>8&255,t&255]}static fromColorRGB(t){return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255}clone(){let t=new nv;return t.fg=this.fg,t.bg=this.bg,t.extended=this.extended.clone(),t}isInverse(){return this.fg&67108864}isBold(){return this.fg&134217728}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:this.fg&268435456}isBlink(){return this.fg&536870912}isInvisible(){return this.fg&1073741824}isItalic(){return this.bg&67108864}isDim(){return this.bg&134217728}isStrikethrough(){return this.fg&2147483648}isProtected(){return this.bg&536870912}isOverline(){return this.bg&1073741824}getFgColorMode(){return this.fg&50331648}getBgColorMode(){return this.bg&50331648}isFgRGB(){return(this.fg&50331648)===50331648}isBgRGB(){return(this.bg&50331648)===50331648}isFgPalette(){return(this.fg&50331648)===16777216||(this.fg&50331648)===33554432}isBgPalette(){return(this.bg&50331648)===16777216||(this.bg&50331648)===33554432}isFgDefault(){return(this.fg&50331648)===0}isBgDefault(){return(this.bg&50331648)===0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(this.fg&50331648){case 16777216:case 33554432:return this.fg&255;case 50331648:return this.fg&16777215;default:return-1}}getBgColor(){switch(this.bg&50331648){case 16777216:case 33554432:return this.bg&255;case 50331648:return this.bg&16777215;default:return-1}}hasExtendedAttrs(){return this.bg&268435456}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(this.bg&268435456&&~this.extended.underlineColor)switch(this.extended.underlineColor&50331648){case 16777216:case 33554432:return this.extended.underlineColor&255;case 50331648:return this.extended.underlineColor&16777215;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return this.bg&268435456&&~this.extended.underlineColor?this.extended.underlineColor&50331648:this.getFgColorMode()}isUnderlineColorRGB(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===50331648:this.isFgRGB()}isUnderlineColorPalette(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===16777216||(this.extended.underlineColor&50331648)===33554432:this.isFgPalette()}isUnderlineColorDefault(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===0:this.isFgDefault()}getUnderlineStyle(){return this.fg&268435456?this.bg&268435456?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}},Ka=class ov{constructor(t=0,r=0){this._ext=0,this._urlId=0,this._ext=t,this._urlId=r}get ext(){return this._urlId?this._ext&-469762049|this.underlineStyle<<26:this._ext}set ext(t){this._ext=t}get underlineStyle(){return this._urlId?5:(this._ext&469762048)>>26}set underlineStyle(t){this._ext&=-469762049,this._ext|=t<<26&469762048}get underlineColor(){return this._ext&67108863}set underlineColor(t){this._ext&=-67108864,this._ext|=t&67108863}get urlId(){return this._urlId}set urlId(t){this._urlId=t}get underlineVariantOffset(){let t=(this._ext&3758096384)>>29;return t<0?t^4294967288:t}set underlineVariantOffset(t){this._ext&=536870911,this._ext|=t<<29&3758096384}clone(){return new ov(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}},sr=class av extends ro{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new Ka,this.combinedData=""}static fromCharData(t){let r=new av;return r.setFromCharData(t),r}isCombined(){return this.content&2097152}getWidth(){return this.content>>22}getChars(){return this.content&2097152?this.combinedData:this.content&2097151?mi(this.content&2097151):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):this.content&2097151}setFromCharData(t){this.fg=t[0],this.bg=0;let r=!1;if(t[1].length>2)r=!0;else if(t[1].length===2){let n=t[1].charCodeAt(0);if(55296<=n&&n<=56319){let o=t[1].charCodeAt(1);56320<=o&&o<=57343?this.content=(n-55296)*1024+o-56320+65536|t[2]<<22:r=!0}else r=!0}else this.content=t[1].charCodeAt(0)|t[2]<<22;r&&(this.combinedData=t[1],this.content=2097152|t[2]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},Jm="di$target",Vu="di$dependencies",vu=new Map;function vC(e){return e[Vu]||[]}function mt(e){if(vu.has(e))return vu.get(e);let t=function(r,n,o){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");yC(t,r,o)};return t._id=e,vu.set(e,t),t}function yC(e,t,r){t[Jm]===t?t[Vu].push({id:e,index:r}):(t[Vu]=[{id:e,index:r}],t[Jm]=t)}var Nt=mt("BufferService"),lv=mt("CoreMouseService"),Qi=mt("CoreService"),SC=mt("CharsetService"),Kh=mt("InstantiationService"),cv=mt("LogService"),Lt=mt("OptionsService"),uv=mt("OscLinkService"),wC=mt("UnicodeService"),io=mt("DecorationService"),qu=class{constructor(e,t,r){this._bufferService=e,this._optionsService=t,this._oscLinkService=r}provideLinks(e,t){let r=this._bufferService.buffer.lines.get(e-1);if(!r){t(void 0);return}let n=[],o=this._optionsService.rawOptions.linkHandler,l=new sr,c=r.getTrimmedLength(),h=-1,p=-1,d=!1;for(let v=0;v<c;v++)if(!(p===-1&&!r.hasContent(v))){if(r.loadCell(v,l),l.hasExtendedAttrs()&&l.extended.urlId)if(p===-1){p=v,h=l.extended.urlId;continue}else d=l.extended.urlId!==h;else p!==-1&&(d=!0);if(d||p!==-1&&v===c-1){let _=this._oscLinkService.getLinkData(h)?.uri;if(_){let S={start:{x:p+1,y:e},end:{x:v+(!d&&v===c-1?1:0),y:e}},x=!1;if(!o?.allowNonHttpProtocols)try{let w=new URL(_);["http:","https:"].includes(w.protocol)||(x=!0)}catch{x=!0}x||n.push({text:_,range:S,activate:(w,b)=>o?o.activate(w,b,S):xC(w,b),hover:(w,b)=>o?.hover?.(w,b,S),leave:(w,b)=>o?.leave?.(w,b,S)})}d=!1,l.hasExtendedAttrs()&&l.extended.urlId?(p=v,h=l.extended.urlId):(p=-1,h=-1)}}t(n)}};qu=Qe([oe(0,Nt),oe(1,Lt),oe(2,uv)],qu);function xC(e,t){if(confirm(`Do you want to navigate to ${t}?

WARNING: This link could potentially be dangerous`)){let r=window.open();if(r){try{r.opener=null}catch{}r.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}}var il=mt("CharSizeService"),Kr=mt("CoreBrowserService"),Vh=mt("MouseService"),Vr=mt("RenderService"),bC=mt("SelectionService"),hv=mt("CharacterJoinerService"),Os=mt("ThemeService"),dv=mt("LinkProviderService"),CC=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?Zm.isErrorNoTelemetry(e)?new Zm(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},kC=new CC;function La(e){EC(e)||kC.onUnexpectedError(e)}var Qu="Canceled";function EC(e){return e instanceof PC?!0:e instanceof Error&&e.name===Qu&&e.message===Qu}var PC=class extends Error{constructor(){super(Qu),this.name=this.message}};function RC(e){return new Error(`Illegal argument: ${e}`)}var Zm=class Yu extends Error{constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof Yu)return t;let r=new Yu;return r.message=t.message,r.stack=t.stack,r}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}},Gu=class fv extends Error{constructor(t){super(t||"An unexpected bug occurred."),Object.setPrototypeOf(this,fv.prototype)}};function $t(e,t=0){return e[e.length-(1+t)]}var NC;(e=>{function t(l){return l<0}e.isLessThan=t;function r(l){return l<=0}e.isLessThanOrEqual=r;function n(l){return l>0}e.isGreaterThan=n;function o(l){return l===0}e.isNeitherLessOrGreaterThan=o,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(NC||={});function LC(e,t){let r=this,n=!1,o;return function(){return n||(n=!0,t||(o=e.apply(r,arguments))),o}}var pv;(e=>{function t(A){return A&&typeof A=="object"&&typeof A[Symbol.iterator]=="function"}e.is=t;let r=Object.freeze([]);function n(){return r}e.empty=n;function*o(A){yield A}e.single=o;function l(A){return t(A)?A:o(A)}e.wrap=l;function c(A){return A||r}e.from=c;function*h(A){for(let K=A.length-1;K>=0;K--)yield A[K]}e.reverse=h;function p(A){return!A||A[Symbol.iterator]().next().done===!0}e.isEmpty=p;function d(A){return A[Symbol.iterator]().next().value}e.first=d;function v(A,K){let X=0;for(let te of A)if(K(te,X++))return!0;return!1}e.some=v;function _(A,K){for(let X of A)if(K(X))return X}e.find=_;function*S(A,K){for(let X of A)K(X)&&(yield X)}e.filter=S;function*x(A,K){let X=0;for(let te of A)yield K(te,X++)}e.map=x;function*w(A,K){let X=0;for(let te of A)yield*K(te,X++)}e.flatMap=w;function*b(...A){for(let K of A)yield*K}e.concat=b;function E(A,K,X){let te=X;for(let ne of A)te=K(te,ne);return te}e.reduce=E;function*M(A,K,X=A.length){for(K<0&&(K+=A.length),X<0?X+=A.length:X>A.length&&(X=A.length);K<X;K++)yield A[K]}e.slice=M;function B(A,K=Number.POSITIVE_INFINITY){let X=[];if(K===0)return[X,A];let te=A[Symbol.iterator]();for(let ne=0;ne<K;ne++){let re=te.next();if(re.done)return[X,e.empty()];X.push(re.value)}return[X,{[Symbol.iterator](){return te}}]}e.consume=B;async function W(A){let K=[];for await(let X of A)K.push(X);return Promise.resolve(K)}e.asyncToArray=W})(pv||={});function Ki(e){if(pv.is(e)){let t=[];for(let r of e)if(r)try{r.dispose()}catch(n){t.push(n)}if(t.length===1)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function DC(...e){return ze(()=>Ki(e))}function ze(e){return{dispose:LC(()=>{e()})}}var mv=class gv{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{Ki(this._toDispose)}finally{this._toDispose.clear()}}add(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?gv.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(t),t}delete(t){if(t){if(t===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(t),t.dispose()}}deleteAndLeak(t){t&&this._toDispose.has(t)&&(this._toDispose.delete(t),void 0)}};mv.DISABLE_DISPOSED_WARNING=!1;var yi=mv,be=class{constructor(){this._store=new yi,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};be.None=Object.freeze({dispose(){}});var Rs=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){this._isDisposed||e===this._value||(this._value?.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}clearAndLeak(){let e=this._value;return this._value=void 0,e}},zr=typeof window=="object"?window:globalThis,Xu=class Ju{constructor(t){this.element=t,this.next=Ju.Undefined,this.prev=Ju.Undefined}};Xu.Undefined=new Xu(void 0);var We=Xu,eg=class{constructor(){this._first=We.Undefined,this._last=We.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===We.Undefined}clear(){let e=this._first;for(;e!==We.Undefined;){let t=e.next;e.prev=We.Undefined,e.next=We.Undefined,e=t}this._first=We.Undefined,this._last=We.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){let r=new We(e);if(this._first===We.Undefined)this._first=r,this._last=r;else if(t){let o=this._last;this._last=r,r.prev=o,o.next=r}else{let o=this._first;this._first=r,r.next=o,o.prev=r}this._size+=1;let n=!1;return()=>{n||(n=!0,this._remove(r))}}shift(){if(this._first!==We.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==We.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==We.Undefined&&e.next!==We.Undefined){let t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===We.Undefined&&e.next===We.Undefined?(this._first=We.Undefined,this._last=We.Undefined):e.next===We.Undefined?(this._last=this._last.prev,this._last.next=We.Undefined):e.prev===We.Undefined&&(this._first=this._first.next,this._first.prev=We.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==We.Undefined;)yield e.element,e=e.next}},MC=globalThis.performance&&typeof globalThis.performance.now=="function",OC=class _v{static create(t){return new _v(t)}constructor(t){this._now=MC&&t===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}},vt;(e=>{e.None=()=>be.None;function t(Q,$){return _(Q,()=>{},0,void 0,!0,void 0,$)}e.defer=t;function r(Q){return($,H=null,O)=>{let D=!1,U;return U=Q(N=>{if(!D)return U?U.dispose():D=!0,$.call(H,N)},null,O),D&&U.dispose(),U}}e.once=r;function n(Q,$,H){return d((O,D=null,U)=>Q(N=>O.call(D,$(N)),null,U),H)}e.map=n;function o(Q,$,H){return d((O,D=null,U)=>Q(N=>{$(N),O.call(D,N)},null,U),H)}e.forEach=o;function l(Q,$,H){return d((O,D=null,U)=>Q(N=>$(N)&&O.call(D,N),null,U),H)}e.filter=l;function c(Q){return Q}e.signal=c;function h(...Q){return($,H=null,O)=>{let D=DC(...Q.map(U=>U(N=>$.call(H,N))));return v(D,O)}}e.any=h;function p(Q,$,H,O){let D=H;return n(Q,U=>(D=$(D,U),D),O)}e.reduce=p;function d(Q,$){let H,O={onWillAddFirstListener(){H=Q(D.fire,D)},onDidRemoveLastListener(){H?.dispose()}},D=new se(O);return $?.add(D),D.event}function v(Q,$){return $ instanceof Array?$.push(Q):$&&$.add(Q),Q}function _(Q,$,H=100,O=!1,D=!1,U,N){let G,Y,P,z=0,le,fe={leakWarningThreshold:U,onWillAddFirstListener(){G=Q(ye=>{z++,Y=$(Y,ye),O&&!P&&(Se.fire(Y),Y=void 0),le=()=>{let ke=Y;Y=void 0,P=void 0,(!O||z>1)&&Se.fire(ke),z=0},typeof H=="number"?(clearTimeout(P),P=setTimeout(le,H)):P===void 0&&(P=0,queueMicrotask(le))})},onWillRemoveListener(){D&&z>0&&le?.()},onDidRemoveLastListener(){le=void 0,G.dispose()}},Se=new se(fe);return N?.add(Se),Se.event}e.debounce=_;function S(Q,$=0,H){return e.debounce(Q,(O,D)=>O?(O.push(D),O):[D],$,void 0,!0,void 0,H)}e.accumulate=S;function x(Q,$=(O,D)=>O===D,H){let O=!0,D;return l(Q,U=>{let N=O||!$(U,D);return O=!1,D=U,N},H)}e.latch=x;function w(Q,$,H){return[e.filter(Q,$,H),e.filter(Q,O=>!$(O),H)]}e.split=w;function b(Q,$=!1,H=[],O){let D=H.slice(),U=Q(Y=>{D?D.push(Y):G.fire(Y)});O&&O.add(U);let N=()=>{D?.forEach(Y=>G.fire(Y)),D=null},G=new se({onWillAddFirstListener(){U||(U=Q(Y=>G.fire(Y)),O&&O.add(U))},onDidAddFirstListener(){D&&($?setTimeout(N):N())},onDidRemoveLastListener(){U&&U.dispose(),U=null}});return O&&O.add(G),G.event}e.buffer=b;function E(Q,$){return(H,O,D)=>{let U=$(new B);return Q(function(N){let G=U.evaluate(N);G!==M&&H.call(O,G)},void 0,D)}}e.chain=E;let M=Symbol("HaltChainable");class B{constructor(){this.steps=[]}map($){return this.steps.push($),this}forEach($){return this.steps.push(H=>($(H),H)),this}filter($){return this.steps.push(H=>$(H)?H:M),this}reduce($,H){let O=H;return this.steps.push(D=>(O=$(O,D),O)),this}latch($=(H,O)=>H===O){let H=!0,O;return this.steps.push(D=>{let U=H||!$(D,O);return H=!1,O=D,U?D:M}),this}evaluate($){for(let H of this.steps)if($=H($),$===M)break;return $}}function W(Q,$,H=O=>O){let O=(...G)=>N.fire(H(...G)),D=()=>Q.on($,O),U=()=>Q.removeListener($,O),N=new se({onWillAddFirstListener:D,onDidRemoveLastListener:U});return N.event}e.fromNodeEventEmitter=W;function A(Q,$,H=O=>O){let O=(...G)=>N.fire(H(...G)),D=()=>Q.addEventListener($,O),U=()=>Q.removeEventListener($,O),N=new se({onWillAddFirstListener:D,onDidRemoveLastListener:U});return N.event}e.fromDOMEventEmitter=A;function K(Q){return new Promise($=>r(Q)($))}e.toPromise=K;function X(Q){let $=new se;return Q.then(H=>{$.fire(H)},()=>{$.fire(void 0)}).finally(()=>{$.dispose()}),$.event}e.fromPromise=X;function te(Q,$){return Q(H=>$.fire(H))}e.forward=te;function ne(Q,$,H){return $(H),Q(O=>$(O))}e.runAndSubscribe=ne;class re{constructor($,H){this._observable=$,this._counter=0,this._hasChanged=!1;let O={onWillAddFirstListener:()=>{$.addObserver(this)},onDidRemoveLastListener:()=>{$.removeObserver(this)}};this.emitter=new se(O),H&&H.add(this.emitter)}beginUpdate($){this._counter++}handlePossibleChange($){}handleChange($,H){this._hasChanged=!0}endUpdate($){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function F(Q,$){return new re(Q,$).emitter.event}e.fromObservable=F;function V(Q){return($,H,O)=>{let D=0,U=!1,N={beginUpdate(){D++},endUpdate(){D--,D===0&&(Q.reportChanges(),U&&(U=!1,$.call(H)))},handlePossibleChange(){},handleChange(){U=!0}};Q.addObserver(N),Q.reportChanges();let G={dispose(){Q.removeObserver(N)}};return O instanceof yi?O.add(G):Array.isArray(O)&&O.push(G),G}}e.fromObservableLight=V})(vt||={});var Zu=class eh{constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${t}_${eh._idPool++}`,eh.all.add(this)}start(t){this._stopWatch=new OC,this.listenerCount=t}stop(){if(this._stopWatch){let t=this._stopWatch.elapsed();this.durations.push(t),this.elapsedOverall+=t,this.invocationCount+=1,this._stopWatch=void 0}}};Zu.all=new Set,Zu._idPool=0;var TC=Zu,jC=-1,vv=class yv{constructor(t,r,n=(yv._idPool++).toString(16).padStart(3,"0")){this._errorHandler=t,this.threshold=r,this.name=n,this._warnCountdown=0}dispose(){this._stacks?.clear()}check(t,r){let n=this.threshold;if(n<=0||r<n)return;this._stacks||(this._stacks=new Map);let o=this._stacks.get(t.value)||0;if(this._stacks.set(t.value,o+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let[l,c]=this.getMostFrequentStack(),h=`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${c}):`;console.warn(h),console.warn(l);let p=new AC(h,l);this._errorHandler(p)}return()=>{let l=this._stacks.get(t.value)||0;this._stacks.set(t.value,l-1)}}getMostFrequentStack(){if(!this._stacks)return;let t,r=0;for(let[n,o]of this._stacks)(!t||r<o)&&(t=[n,o],r=o);return t}};vv._idPool=1;var BC=vv,IC=class Sv{constructor(t){this.value=t}static create(){let t=new Error;return new Sv(t.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},AC=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},FC=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},zC=0,yu=class{constructor(e){this.value=e,this.id=zC++}},HC=2,$C,se=class{constructor(t){this._size=0,this._options=t,this._leakageMon=this._options?.leakWarningThreshold?new BC(t?.onListenerError??La,this._options?.leakWarningThreshold??jC):void 0,this._perfMon=this._options?._profName?new TC(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){this._disposed||(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose())}get event(){return this._event??=(t,r,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let h=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(h);let p=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],d=new FC(`${h}. HINT: Stack shows most frequent listener (${p[1]}-times)`,p[0]);return(this._options?.onListenerError||La)(d),be.None}if(this._disposed)return be.None;r&&(t=t.bind(r));let o=new yu(t),l;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(o.stack=IC.create(),l=this._leakageMon.check(o.stack,this._size+1)),this._listeners?this._listeners instanceof yu?(this._deliveryQueue??=new WC,this._listeners=[this._listeners,o]):this._listeners.push(o):(this._options?.onWillAddFirstListener?.(this),this._listeners=o,this._options?.onDidAddFirstListener?.(this)),this._size++;let c=ze(()=>{l?.(),this._removeListener(o)});return n instanceof yi?n.add(c):Array.isArray(n)&&n.push(c),c},this._event}_removeListener(t){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let r=this._listeners,n=r.indexOf(t);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,r[n]=void 0;let o=this._deliveryQueue.current===this;if(this._size*HC<=r.length){let l=0;for(let c=0;c<r.length;c++)r[c]?r[l++]=r[c]:o&&(this._deliveryQueue.end--,l<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=l}}_deliver(t,r){if(!t)return;let n=this._options?.onListenerError||La;if(!n){t.value(r);return}try{t.value(r)}catch(o){n(o)}}_deliverQueue(t){let r=t.current._listeners;for(;t.i<t.end;)this._deliver(r[t.i++],t.value);t.reset()}fire(t){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof yu)this._deliver(this._listeners,t);else{let r=this._deliveryQueue;r.enqueue(this,t,this._listeners.length),this._deliverQueue(r)}this._perfMon?.stop()}hasListeners(){return this._size>0}},WC=class{constructor(){this.i=-1,this.end=0}enqueue(e,t,r){this.i=0,this.end=r,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},th=class{constructor(){this.mapWindowIdToZoomLevel=new Map,this._onDidChangeZoomLevel=new se,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this.mapWindowIdToZoomFactor=new Map,this._onDidChangeFullscreen=new se,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event,this.mapWindowIdToFullScreen=new Map}getZoomLevel(t){return this.mapWindowIdToZoomLevel.get(this.getWindowId(t))??0}setZoomLevel(t,r){if(this.getZoomLevel(r)===t)return;let n=this.getWindowId(r);this.mapWindowIdToZoomLevel.set(n,t),this._onDidChangeZoomLevel.fire(n)}getZoomFactor(t){return this.mapWindowIdToZoomFactor.get(this.getWindowId(t))??1}setZoomFactor(t,r){this.mapWindowIdToZoomFactor.set(this.getWindowId(r),t)}setFullscreen(t,r){if(this.isFullscreen(r)===t)return;let n=this.getWindowId(r);this.mapWindowIdToFullScreen.set(n,t),this._onDidChangeFullscreen.fire(n)}isFullscreen(t){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(t))}getWindowId(t){return t.vscodeWindowId}};th.INSTANCE=new th;var qh=th;function UC(e,t,r){typeof t=="string"&&(t=e.matchMedia(t)),t.addEventListener("change",r)}qh.INSTANCE.onDidChangeZoomLevel;function KC(e){return qh.INSTANCE.getZoomFactor(e)}qh.INSTANCE.onDidChangeFullscreen;var Ts=typeof navigator=="object"?navigator.userAgent:"",rh=Ts.indexOf("Firefox")>=0,VC=Ts.indexOf("AppleWebKit")>=0,Qh=Ts.indexOf("Chrome")>=0,qC=!Qh&&Ts.indexOf("Safari")>=0;Ts.indexOf("Electron/")>=0;Ts.indexOf("Android")>=0;var Su=!1;if(typeof zr.matchMedia=="function"){let e=zr.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),t=zr.matchMedia("(display-mode: fullscreen)");Su=e.matches,UC(zr,e,({matches:r})=>{Su&&t.matches||(Su=r)})}var Es="en",ih=!1,sh=!1,Da=!1,wv=!1,wa,Ma=Es,tg=Es,QC,Fr,Hi=globalThis,Ut;typeof Hi.vscode<"u"&&typeof Hi.vscode.process<"u"?Ut=Hi.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Ut=process);var YC=typeof Ut?.versions?.electron=="string",GC=YC&&Ut?.type==="renderer";if(typeof Ut=="object"){ih=Ut.platform==="win32",sh=Ut.platform==="darwin",Da=Ut.platform==="linux",Da&&Ut.env.SNAP&&Ut.env.SNAP_REVISION,Ut.env.CI||Ut.env.BUILD_ARTIFACTSTAGINGDIRECTORY,wa=Es,Ma=Es;let e=Ut.env.VSCODE_NLS_CONFIG;if(e)try{let t=JSON.parse(e);wa=t.userLocale,tg=t.osLocale,Ma=t.resolvedLanguage||Es,QC=t.languagePack?.translationsConfigFile}catch{}wv=!0}else typeof navigator=="object"&&!GC?(Fr=navigator.userAgent,ih=Fr.indexOf("Windows")>=0,sh=Fr.indexOf("Macintosh")>=0,(Fr.indexOf("Macintosh")>=0||Fr.indexOf("iPad")>=0||Fr.indexOf("iPhone")>=0)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Da=Fr.indexOf("Linux")>=0,Fr?.indexOf("Mobi")>=0,Ma=globalThis._VSCODE_NLS_LANGUAGE||Es,wa=navigator.language.toLowerCase(),tg=wa):console.error("Unable to resolve platform.");var xv=ih,Rr=sh,XC=Da,rg=wv,Nr=Fr,di=Ma,JC;(e=>{function t(){return di}e.value=t;function r(){return di.length===2?di==="en":di.length>=3?di[0]==="e"&&di[1]==="n"&&di[2]==="-":!1}e.isDefaultVariant=r;function n(){return di==="en"}e.isDefault=n})(JC||={});var ZC=typeof Hi.postMessage=="function"&&!Hi.importScripts;(()=>{if(ZC){let e=[];Hi.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,o=e.length;n<o;n++){let l=e[n];if(l.id===r.data.vscodeScheduleAsyncWork){e.splice(n,1),l.callback();return}}});let t=0;return r=>{let n=++t;e.push({id:n,callback:r}),Hi.postMessage({vscodeScheduleAsyncWork:n},"*")}}return e=>setTimeout(e)})();var ek=!!(Nr&&Nr.indexOf("Chrome")>=0);Nr&&Nr.indexOf("Firefox")>=0;!ek&&Nr&&Nr.indexOf("Safari")>=0;Nr&&Nr.indexOf("Edg/")>=0;Nr&&Nr.indexOf("Android")>=0;var ws=typeof navigator=="object"?navigator:{};rg||document.queryCommandSupported&&document.queryCommandSupported("copy")||ws&&ws.clipboard&&ws.clipboard.writeText,rg||ws&&ws.clipboard&&ws.clipboard.readText;var Yh=class{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}},wu=new Yh,ig=new Yh,sg=new Yh,tk=new Array(230),bv;(e=>{function t(h){return wu.keyCodeToStr(h)}e.toString=t;function r(h){return wu.strToKeyCode(h)}e.fromString=r;function n(h){return ig.keyCodeToStr(h)}e.toUserSettingsUS=n;function o(h){return sg.keyCodeToStr(h)}e.toUserSettingsGeneral=o;function l(h){return ig.strToKeyCode(h)||sg.strToKeyCode(h)}e.fromUserSettings=l;function c(h){if(h>=98&&h<=113)return null;switch(h){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return wu.keyCodeToStr(h)}e.toElectronAccelerator=c})(bv||={});var rk=class Cv{constructor(t,r,n,o,l){this.ctrlKey=t,this.shiftKey=r,this.altKey=n,this.metaKey=o,this.keyCode=l}equals(t){return t instanceof Cv&&this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode}getHashCode(){let t=this.ctrlKey?"1":"0",r=this.shiftKey?"1":"0",n=this.altKey?"1":"0",o=this.metaKey?"1":"0";return`K${t}${r}${n}${o}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new ik([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},ik=class{constructor(e){if(e.length===0)throw RC("chords");this.chords=e}getHashCode(){let e="";for(let t=0,r=this.chords.length;t<r;t++)t!==0&&(e+=";"),e+=this.chords[t].getHashCode();return e}equals(e){if(e===null||this.chords.length!==e.chords.length)return!1;for(let t=0;t<this.chords.length;t++)if(!this.chords[t].equals(e.chords[t]))return!1;return!0}};function sk(e){if(e.charCode){let r=String.fromCharCode(e.charCode).toUpperCase();return bv.fromString(r)}let t=e.keyCode;if(t===3)return 7;if(rh)switch(t){case 59:return 85;case 60:if(XC)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(Rr)return 57;break}else if(VC&&(Rr&&t===93||!Rr&&t===92))return 57;return tk[t]||0}var nk=Rr?256:2048,ok=512,ak=1024,lk=Rr?2048:256,ng=class{constructor(e){this._standardKeyboardEventBrand=!0;let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=t.getModifierState?.("AltGraph"),this.keyCode=sk(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=nk),this.altKey&&(t|=ok),this.shiftKey&&(t|=ak),this.metaKey&&(t|=lk),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new rk(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}},og=new WeakMap;function ck(e){if(!e.parent||e.parent===e)return null;try{let t=e.location,r=e.parent.location;if(t.origin!=="null"&&r.origin!=="null"&&t.origin!==r.origin)return null}catch{return null}return e.parent}var uk=class{static getSameOriginWindowChain(e){let t=og.get(e);if(!t){t=[],og.set(e,t);let r=e,n;do n=ck(r),n?t.push({window:new WeakRef(r),iframeElement:r.frameElement||null}):t.push({window:new WeakRef(r),iframeElement:null}),r=n;while(r)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let r=0,n=0,o=this.getSameOriginWindowChain(e);for(let l of o){let c=l.window.deref();if(r+=c?.scrollY??0,n+=c?.scrollX??0,c===t||!l.iframeElement)break;let h=l.iframeElement.getBoundingClientRect();r+=h.top,n+=h.left}return{top:r,left:n}}},xa=class{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let r=uk.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=r.left,this.posy-=r.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}},ag=class{constructor(e,t=0,r=0){this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=r,this.deltaX=t;let n=!1;if(Qh){let o=navigator.userAgent.match(/Chrome\/(\d+)/);n=(o?parseInt(o[1]):123)<=122}if(e){let o=e,l=e,c=e.view?.devicePixelRatio||1;if(typeof o.wheelDeltaY<"u")n?this.deltaY=o.wheelDeltaY/(120*c):this.deltaY=o.wheelDeltaY/120;else if(typeof l.VERTICAL_AXIS<"u"&&l.axis===l.VERTICAL_AXIS)this.deltaY=-l.detail/3;else if(e.type==="wheel"){let h=e;h.deltaMode===h.DOM_DELTA_LINE?rh&&!Rr?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof o.wheelDeltaX<"u")qC&&xv?this.deltaX=-(o.wheelDeltaX/120):n?this.deltaX=o.wheelDeltaX/(120*c):this.deltaX=o.wheelDeltaX/120;else if(typeof l.HORIZONTAL_AXIS<"u"&&l.axis===l.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){let h=e;h.deltaMode===h.DOM_DELTA_LINE?rh&&!Rr?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(n?this.deltaY=e.wheelDelta/(120*c):this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}},kv=Object.freeze(function(e,t){let r=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(r)}}}),hk;(e=>{function t(r){return r===e.None||r===e.Cancelled||r instanceof dk?!0:!r||typeof r!="object"?!1:typeof r.isCancellationRequested=="boolean"&&typeof r.onCancellationRequested=="function"}e.isCancellationToken=t,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:vt.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:kv})})(hk||={});var dk=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?kv:(this._emitter||(this._emitter=new se),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},Gh=class{constructor(e,t){this._isDisposed=!1,this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new Gu("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new Gu("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}},fk=class{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(e,t,r=globalThis){if(this.isDisposed)throw new Gu("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let n=r.setInterval(()=>{e()},t);this.disposable=ze(()=>{r.clearInterval(n),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},pk;(e=>{async function t(n){let o,l=await Promise.all(n.map(c=>c.then(h=>h,h=>{o||(o=h)})));if(typeof o<"u")throw o;return l}e.settled=t;function r(n){return new Promise(async(o,l)=>{try{await n(o,l)}catch(c){l(c)}})}e.withAsyncBody=r})(pk||={});var lg=class tr{static fromArray(t){return new tr(r=>{r.emitMany(t)})}static fromPromise(t){return new tr(async r=>{r.emitMany(await t)})}static fromPromises(t){return new tr(async r=>{await Promise.all(t.map(async n=>r.emitOne(await n)))})}static merge(t){return new tr(async r=>{await Promise.all(t.map(async n=>{for await(let o of n)r.emitOne(o)}))})}constructor(t,r){this._state=0,this._results=[],this._error=null,this._onReturn=r,this._onStateChanged=new se,queueMicrotask(async()=>{let n={emitOne:o=>this.emitOne(o),emitMany:o=>this.emitMany(o),reject:o=>this.reject(o)};try{await Promise.resolve(t(n)),this.resolve()}catch(o){this.reject(o)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(t<this._results.length)return{done:!1,value:this._results[t++]};if(this._state===1)return{done:!0,value:void 0};await vt.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(t,r){return new tr(async n=>{for await(let o of t)n.emitOne(r(o))})}map(t){return tr.map(this,t)}static filter(t,r){return new tr(async n=>{for await(let o of t)r(o)&&n.emitOne(o)})}filter(t){return tr.filter(this,t)}static coalesce(t){return tr.filter(t,r=>!!r)}coalesce(){return tr.coalesce(this)}static async toPromise(t){let r=[];for await(let n of t)r.push(n);return r}toPromise(){return tr.toPromise(this)}emitOne(t){this._state===0&&(this._results.push(t),this._onStateChanged.fire())}emitMany(t){this._state===0&&(this._results=this._results.concat(t),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(t){this._state===0&&(this._state=2,this._error=t,this._onStateChanged.fire())}};lg.EMPTY=lg.fromArray([]);var{getWindow:Pr,getWindowId:mk,onDidRegisterWindow:gk}=(function(){let e=new Map,t={window:zr,disposables:new yi};e.set(zr.vscodeWindowId,t);let r=new se,n=new se,o=new se;function l(c,h){return(typeof c=="number"?e.get(c):void 0)??(h?t:void 0)}return{onDidRegisterWindow:r.event,onWillUnregisterWindow:o.event,onDidUnregisterWindow:n.event,registerWindow(c){if(e.has(c.vscodeWindowId))return be.None;let h=new yi,p={window:c,disposables:h.add(new yi)};return e.set(c.vscodeWindowId,p),h.add(ze(()=>{e.delete(c.vscodeWindowId),n.fire(c)})),h.add(_e(c,ht.BEFORE_UNLOAD,()=>{o.fire(c)})),r.fire(p),h},getWindows(){return e.values()},getWindowsCount(){return e.size},getWindowId(c){return c.vscodeWindowId},hasWindow(c){return e.has(c)},getWindowById:l,getWindow(c){let h=c;if(h?.ownerDocument?.defaultView)return h.ownerDocument.defaultView.window;let p=c;return p?.view?p.view.window:zr},getDocument(c){return Pr(c).document}}})(),_k=class{constructor(e,t,r,n){this._node=e,this._type=t,this._handler=r,this._options=n||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function _e(e,t,r,n){return new _k(e,t,r,n)}var cg=function(e,t,r,n){return _e(e,t,r,n)},Xh,vk=class extends fk{constructor(e){super(),this.defaultTarget=e&&Pr(e)}cancelAndSet(e,t,r){return super.cancelAndSet(e,t,r??this.defaultTarget)}},ug=class{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){La(e)}}static sort(e,t){return t.priority-e.priority}};(function(){let e=new Map,t=new Map,r=new Map,n=new Map,o=l=>{r.set(l,!1);let c=e.get(l)??[];for(t.set(l,c),e.set(l,[]),n.set(l,!0);c.length>0;)c.sort(ug.sort),c.shift().execute();n.set(l,!1)};Xh=(l,c,h=0)=>{let p=mk(l),d=new ug(c,h),v=e.get(p);return v||(v=[],e.set(p,v)),v.push(d),r.get(p)||(r.set(p,!0),l.requestAnimationFrame(()=>o(p))),d}})();function yk(e){let t=e.getBoundingClientRect(),r=Pr(e);return{left:t.left+r.scrollX,top:t.top+r.scrollY,width:t.width,height:t.height}}var ht={CLICK:"click",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",KEY_DOWN:"keydown",KEY_UP:"keyup",BEFORE_UNLOAD:"beforeunload",CHANGE:"change",FOCUS:"focus",BLUR:"blur",INPUT:"input"},Sk=class{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingTop="",this._paddingLeft="",this._paddingBottom="",this._paddingRight="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){let t=It(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){let t=It(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){let t=It(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){let t=It(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){let t=It(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){let t=It(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){let t=It(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingTop(e){let t=It(e);this._paddingTop!==t&&(this._paddingTop=t,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(e){let t=It(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(e){let t=It(e);this._paddingBottom!==t&&(this._paddingBottom=t,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(e){let t=It(e);this._paddingRight!==t&&(this._paddingRight=t,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){let t=It(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){let t=It(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){let t=It(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}};function It(e){return typeof e=="number"?`${e}px`:e}function zn(e){return new Sk(e)}var Ev=class{constructor(){this._hooks=new yi,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let r=this._onStopCallback;this._onStopCallback=null,e&&r&&r(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,r,n,o){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=n,this._onStopCallback=o;let l=e;try{e.setPointerCapture(t),this._hooks.add(ze(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{l=Pr(e)}this._hooks.add(_e(l,ht.POINTER_MOVE,c=>{if(c.buttons!==r){this.stopMonitoring(!0);return}c.preventDefault(),this._pointerMoveCallback(c)})),this._hooks.add(_e(l,ht.POINTER_UP,c=>this.stopMonitoring(!0)))}};function wk(e,t,r){let n=null,o=null;if(typeof r.value=="function"?(n="value",o=r.value,o.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof r.get=="function"&&(n="get",o=r.get),!o)throw new Error("not supported");let l=`$memoize$${t}`;r[n]=function(...c){return this.hasOwnProperty(l)||Object.defineProperty(this,l,{configurable:!1,enumerable:!1,writable:!1,value:o.apply(this,c)}),this[l]}}var kr;(e=>(e.Tap="-xterm-gesturetap",e.Change="-xterm-gesturechange",e.Start="-xterm-gesturestart",e.End="-xterm-gesturesend",e.Contextmenu="-xterm-gesturecontextmenu"))(kr||={});var Dn=class bt extends be{constructor(){super(),this.dispatched=!1,this.targets=new eg,this.ignoreTargets=new eg,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(vt.runAndSubscribe(gk,({window:t,disposables:r})=>{r.add(_e(t.document,"touchstart",n=>this.onTouchStart(n),{passive:!1})),r.add(_e(t.document,"touchend",n=>this.onTouchEnd(t,n))),r.add(_e(t.document,"touchmove",n=>this.onTouchMove(n),{passive:!1}))},{window:zr,disposables:this._store}))}static addTarget(t){if(!bt.isTouchDevice())return be.None;bt.INSTANCE||(bt.INSTANCE=new bt);let r=bt.INSTANCE.targets.push(t);return ze(r)}static ignoreTarget(t){if(!bt.isTouchDevice())return be.None;bt.INSTANCE||(bt.INSTANCE=new bt);let r=bt.INSTANCE.ignoreTargets.push(t);return ze(r)}static isTouchDevice(){return"ontouchstart"in zr||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(t){let r=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,o=t.targetTouches.length;n<o;n++){let l=t.targetTouches.item(n);this.activeTouches[l.identifier]={id:l.identifier,initialTarget:l.target,initialTimeStamp:r,initialPageX:l.pageX,initialPageY:l.pageY,rollingTimestamps:[r],rollingPageX:[l.pageX],rollingPageY:[l.pageY]};let c=this.newGestureEvent(kr.Start,l.target);c.pageX=l.pageX,c.pageY=l.pageY,this.dispatchEvent(c)}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}onTouchEnd(t,r){let n=Date.now(),o=Object.keys(this.activeTouches).length;for(let l=0,c=r.changedTouches.length;l<c;l++){let h=r.changedTouches.item(l);if(!this.activeTouches.hasOwnProperty(String(h.identifier))){console.warn("move of an UNKNOWN touch",h);continue}let p=this.activeTouches[h.identifier],d=Date.now()-p.initialTimeStamp;if(d<bt.HOLD_DELAY&&Math.abs(p.initialPageX-$t(p.rollingPageX))<30&&Math.abs(p.initialPageY-$t(p.rollingPageY))<30){let v=this.newGestureEvent(kr.Tap,p.initialTarget);v.pageX=$t(p.rollingPageX),v.pageY=$t(p.rollingPageY),this.dispatchEvent(v)}else if(d>=bt.HOLD_DELAY&&Math.abs(p.initialPageX-$t(p.rollingPageX))<30&&Math.abs(p.initialPageY-$t(p.rollingPageY))<30){let v=this.newGestureEvent(kr.Contextmenu,p.initialTarget);v.pageX=$t(p.rollingPageX),v.pageY=$t(p.rollingPageY),this.dispatchEvent(v)}else if(o===1){let v=$t(p.rollingPageX),_=$t(p.rollingPageY),S=$t(p.rollingTimestamps)-p.rollingTimestamps[0],x=v-p.rollingPageX[0],w=_-p.rollingPageY[0],b=[...this.targets].filter(E=>p.initialTarget instanceof Node&&E.contains(p.initialTarget));this.inertia(t,b,n,Math.abs(x)/S,x>0?1:-1,v,Math.abs(w)/S,w>0?1:-1,_)}this.dispatchEvent(this.newGestureEvent(kr.End,p.initialTarget)),delete this.activeTouches[h.identifier]}this.dispatched&&(r.preventDefault(),r.stopPropagation(),this.dispatched=!1)}newGestureEvent(t,r){let n=document.createEvent("CustomEvent");return n.initEvent(t,!1,!0),n.initialTarget=r,n.tapCount=0,n}dispatchEvent(t){if(t.type===kr.Tap){let r=new Date().getTime(),n=0;r-this._lastSetTapCountTime>bt.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=r,t.tapCount=n}else(t.type===kr.Change||t.type===kr.Contextmenu)&&(this._lastSetTapCountTime=0);if(t.initialTarget instanceof Node){for(let n of this.ignoreTargets)if(n.contains(t.initialTarget))return;let r=[];for(let n of this.targets)if(n.contains(t.initialTarget)){let o=0,l=t.initialTarget;for(;l&&l!==n;)o++,l=l.parentElement;r.push([o,n])}r.sort((n,o)=>n[0]-o[0]);for(let[n,o]of r)o.dispatchEvent(t),this.dispatched=!0}}inertia(t,r,n,o,l,c,h,p,d){this.handle=Xh(t,()=>{let v=Date.now(),_=v-n,S=0,x=0,w=!0;o+=bt.SCROLL_FRICTION*_,h+=bt.SCROLL_FRICTION*_,o>0&&(w=!1,S=l*o*_),h>0&&(w=!1,x=p*h*_);let b=this.newGestureEvent(kr.Change);b.translationX=S,b.translationY=x,r.forEach(E=>E.dispatchEvent(b)),w||this.inertia(t,r,v,o,l,c+S,h,p,d+x)})}onTouchMove(t){let r=Date.now();for(let n=0,o=t.changedTouches.length;n<o;n++){let l=t.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(l.identifier))){console.warn("end of an UNKNOWN touch",l);continue}let c=this.activeTouches[l.identifier],h=this.newGestureEvent(kr.Change,c.initialTarget);h.translationX=l.pageX-$t(c.rollingPageX),h.translationY=l.pageY-$t(c.rollingPageY),h.pageX=l.pageX,h.pageY=l.pageY,this.dispatchEvent(h),c.rollingPageX.length>3&&(c.rollingPageX.shift(),c.rollingPageY.shift(),c.rollingTimestamps.shift()),c.rollingPageX.push(l.pageX),c.rollingPageY.push(l.pageY),c.rollingTimestamps.push(r)}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}};Dn.SCROLL_FRICTION=-.005,Dn.HOLD_DELAY=700,Dn.CLEAR_TAP_COUNT_TIME=400,Qe([wk],Dn,"isTouchDevice",1);var xk=Dn,Jh=class extends be{onclick(e,t){this._register(_e(e,ht.CLICK,r=>t(new xa(Pr(e),r))))}onmousedown(e,t){this._register(_e(e,ht.MOUSE_DOWN,r=>t(new xa(Pr(e),r))))}onmouseover(e,t){this._register(_e(e,ht.MOUSE_OVER,r=>t(new xa(Pr(e),r))))}onmouseleave(e,t){this._register(_e(e,ht.MOUSE_LEAVE,r=>t(new xa(Pr(e),r))))}onkeydown(e,t){this._register(_e(e,ht.KEY_DOWN,r=>t(new ng(r))))}onkeyup(e,t){this._register(_e(e,ht.KEY_UP,r=>t(new ng(r))))}oninput(e,t){this._register(_e(e,ht.INPUT,t))}onblur(e,t){this._register(_e(e,ht.BLUR,t))}onfocus(e,t){this._register(_e(e,ht.FOCUS,t))}onchange(e,t){this._register(_e(e,ht.CHANGE,t))}ignoreGesture(e){return xk.ignoreTarget(e)}},hg=11,bk=class extends Jh{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.style.position="absolute",this.domNode.style.width=hg+"px",this.domNode.style.height=hg+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new Ev),this._register(cg(this.bgDomNode,ht.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(cg(this.domNode,ht.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new vk),this._pointerdownScheduleRepeatTimer=this._register(new Gh)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,Pr(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}},Ck=class nh{constructor(t,r,n,o,l,c,h){this._forceIntegerValues=t,this._scrollStateBrand=void 0,this._forceIntegerValues&&(r=r|0,n=n|0,o=o|0,l=l|0,c=c|0,h=h|0),this.rawScrollLeft=o,this.rawScrollTop=h,r<0&&(r=0),o+r>n&&(o=n-r),o<0&&(o=0),l<0&&(l=0),h+l>c&&(h=c-l),h<0&&(h=0),this.width=r,this.scrollWidth=n,this.scrollLeft=o,this.height=l,this.scrollHeight=c,this.scrollTop=h}equals(t){return this.rawScrollLeft===t.rawScrollLeft&&this.rawScrollTop===t.rawScrollTop&&this.width===t.width&&this.scrollWidth===t.scrollWidth&&this.scrollLeft===t.scrollLeft&&this.height===t.height&&this.scrollHeight===t.scrollHeight&&this.scrollTop===t.scrollTop}withScrollDimensions(t,r){return new nh(this._forceIntegerValues,typeof t.width<"u"?t.width:this.width,typeof t.scrollWidth<"u"?t.scrollWidth:this.scrollWidth,r?this.rawScrollLeft:this.scrollLeft,typeof t.height<"u"?t.height:this.height,typeof t.scrollHeight<"u"?t.scrollHeight:this.scrollHeight,r?this.rawScrollTop:this.scrollTop)}withScrollPosition(t){return new nh(this._forceIntegerValues,this.width,this.scrollWidth,typeof t.scrollLeft<"u"?t.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof t.scrollTop<"u"?t.scrollTop:this.rawScrollTop)}createScrollEvent(t,r){let n=this.width!==t.width,o=this.scrollWidth!==t.scrollWidth,l=this.scrollLeft!==t.scrollLeft,c=this.height!==t.height,h=this.scrollHeight!==t.scrollHeight,p=this.scrollTop!==t.scrollTop;return{inSmoothScrolling:r,oldWidth:t.width,oldScrollWidth:t.scrollWidth,oldScrollLeft:t.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:t.height,oldScrollHeight:t.scrollHeight,oldScrollTop:t.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:o,scrollLeftChanged:l,heightChanged:c,scrollHeightChanged:h,scrollTopChanged:p}}},kk=class extends be{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new se),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new Ck(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){let r=this._state.withScrollDimensions(e,t);this._setState(r,!!this._smoothScrolling),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){let t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};let r=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===r.scrollLeft&&this._smoothScrolling.to.scrollTop===r.scrollTop)return;let n;t?n=new fg(this._smoothScrolling.from,r,this._smoothScrolling.startTime,this._smoothScrolling.duration):n=this._smoothScrolling.combine(this._state,r,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=n}else{let r=this._state.withScrollPosition(e);this._smoothScrolling=fg.start(this._state,r,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){let r=this._state;r.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(r,t)))}},dg=class{constructor(e,t,r){this.scrollLeft=e,this.scrollTop=t,this.isDone=r}};function xu(e,t){let r=t-e;return function(n){return e+r*Rk(n)}}function Ek(e,t,r){return function(n){return n<r?e(n/r):t((n-r)/(1-r))}}var fg=class oh{constructor(t,r,n,o){this.from=t,this.to=r,this.duration=o,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(t,r,n){if(Math.abs(t-r)>2.5*n){let o,l;return t<r?(o=t+.75*n,l=r-.75*n):(o=t-.75*n,l=r+.75*n),Ek(xu(t,o),xu(l,r),.33)}return xu(t,r)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(t){this.to=t.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(t){let r=(t-this.startTime)/this.duration;if(r<1){let n=this.scrollLeft(r),o=this.scrollTop(r);return new dg(n,o,!1)}return new dg(this.to.scrollLeft,this.to.scrollTop,!0)}combine(t,r,n){return oh.start(t,r,n)}static start(t,r,n){n=n+10;let o=Date.now()-10;return new oh(t,r,o,n)}};function Pk(e){return Math.pow(e,3)}function Rk(e){return 1-Pk(1-e)}var Nk=class extends be{constructor(e,t,r){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=r,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Gh)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode?.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(e?" fade":"")))}},Lk=140,Pv=class extends Jh{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new Nk(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new Ev),this._shouldRender=!0,this.domNode=zn(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(_e(this.domNode.domNode,ht.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){let t=this._register(new bk(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,r,n){this.slider=zn(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof r=="number"&&this.slider.setWidth(r),typeof n=="number"&&this.slider.setHeight(n),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(_e(this.slider.domNode,ht.POINTER_DOWN,o=>{o.button===0&&(o.preventDefault(),this._sliderPointerDown(o))})),this.onclick(this.slider.domNode,o=>{o.leftButton&&o.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){let t=this.domNode.domNode.getClientRects()[0].top,r=t+this._scrollbarState.getSliderPosition(),n=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),o=this._sliderPointerPosition(e);r<=o&&o<=n?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,r;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,r=e.offsetY;else{let o=yk(this.domNode.domNode);t=e.pageX-o.left,r=e.pageY-o.top}let n=this._pointerDownRelativePosition(t,r);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(n):this._scrollbarState.getDesiredScrollPositionFromOffset(n)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=this._sliderPointerPosition(e),r=this._sliderOrthogonalPointerPosition(e),n=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>{let l=this._sliderOrthogonalPointerPosition(o),c=Math.abs(l-r);if(xv&&c>Lk){this._setDesiredScrollPositionNow(n.getScrollPosition());return}let h=this._sliderPointerPosition(o)-t;this._setDesiredScrollPositionNow(n.getDesiredScrollPositionFromDelta(h))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){let t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}},Rv=class ah{constructor(t,r,n,o,l,c){this._scrollbarSize=Math.round(r),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(t),this._visibleSize=o,this._scrollSize=l,this._scrollPosition=c,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new ah(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(t){let r=Math.round(t);return this._visibleSize!==r?(this._visibleSize=r,this._refreshComputedValues(),!0):!1}setScrollSize(t){let r=Math.round(t);return this._scrollSize!==r?(this._scrollSize=r,this._refreshComputedValues(),!0):!1}setScrollPosition(t){let r=Math.round(t);return this._scrollPosition!==r?(this._scrollPosition=r,this._refreshComputedValues(),!0):!1}setScrollbarSize(t){this._scrollbarSize=Math.round(t)}setOppositeScrollbarSize(t){this._oppositeScrollbarSize=Math.round(t)}static _computeValues(t,r,n,o,l){let c=Math.max(0,n-t),h=Math.max(0,c-2*r),p=o>0&&o>n;if(!p)return{computedAvailableSize:Math.round(c),computedIsNeeded:p,computedSliderSize:Math.round(h),computedSliderRatio:0,computedSliderPosition:0};let d=Math.round(Math.max(20,Math.floor(n*h/o))),v=(h-d)/(o-n),_=l*v;return{computedAvailableSize:Math.round(c),computedIsNeeded:p,computedSliderSize:Math.round(d),computedSliderRatio:v,computedSliderPosition:Math.round(_)}}_refreshComputedValues(){let t=ah._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=t.computedAvailableSize,this._computedIsNeeded=t.computedIsNeeded,this._computedSliderSize=t.computedSliderSize,this._computedSliderRatio=t.computedSliderRatio,this._computedSliderPosition=t.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(t){if(!this._computedIsNeeded)return 0;let r=t-this._arrowSize-this._computedSliderSize/2;return Math.round(r/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(t){if(!this._computedIsNeeded)return 0;let r=t-this._arrowSize,n=this._scrollPosition;return r<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(t){if(!this._computedIsNeeded)return 0;let r=this._computedSliderPosition+t;return Math.round(r/this._computedSliderRatio)}},Dk=class extends Pv{constructor(e,t,r){let n=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:r,scrollbarState:new Rv(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,n.width,n.scrollWidth,o.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}},Mk=class extends Pv{constructor(e,t,r){let n=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:r,scrollbarState:new Rv(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,n.height,n.scrollHeight,o.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}},Ok=500,pg=50,Tk=class{constructor(e,t,r){this.timestamp=e,this.deltaX=t,this.deltaY=r,this.score=0}},lh=class{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let t=1,r=0,n=1,o=this._rear;do{let l=o===this._front?t:Math.pow(2,-n);if(t-=l,r+=this._memory[o].score*l,o===this._front)break;o=(this._capacity+o-1)%this._capacity,n++}while(!0);return r<=.5}acceptStandardWheelEvent(t){if(Qh){let r=Pr(t.browserEvent),n=KC(r);this.accept(Date.now(),t.deltaX*n,t.deltaY*n)}else this.accept(Date.now(),t.deltaX,t.deltaY)}accept(t,r,n){let o=null,l=new Tk(t,r,n);this._front===-1&&this._rear===-1?(this._memory[0]=l,this._front=0,this._rear=0):(o=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=l),l.score=this._computeScore(l,o)}_computeScore(t,r){if(Math.abs(t.deltaX)>0&&Math.abs(t.deltaY)>0)return 1;let n=.5;if((!this._isAlmostInt(t.deltaX)||!this._isAlmostInt(t.deltaY))&&(n+=.25),r){let o=Math.abs(t.deltaX),l=Math.abs(t.deltaY),c=Math.abs(r.deltaX),h=Math.abs(r.deltaY),p=Math.max(Math.min(o,c),1),d=Math.max(Math.min(l,h),1),v=Math.max(o,c),_=Math.max(l,h);v%p===0&&_%d===0&&(n-=.5)}return Math.min(Math.max(n,0),1)}_isAlmostInt(t){return Math.abs(Math.round(t)-t)<.01}};lh.INSTANCE=new lh;var jk=lh,Bk=class extends Jh{constructor(e,t,r){super(),this._onScroll=this._register(new se),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new se),this.onWillScroll=this._onWillScroll.event,this._options=Ak(t),this._scrollable=r,this._register(this._scrollable.onScroll(o=>{this._onWillScroll.fire(o),this._onDidScroll(o),this._onScroll.fire(o)}));let n={onMouseWheel:o=>this._onMouseWheel(o),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new Mk(this._scrollable,this._options,n)),this._horizontalScrollbar=this._register(new Dk(this._scrollable,this._options,n)),this._domNode=document.createElement("div"),this._domNode.className="xterm-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=zn(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=zn(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=zn(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,o=>this._onMouseOver(o)),this.onmouseleave(this._listenOnDomNode,o=>this._onMouseLeave(o)),this._hideTimeout=this._register(new Gh),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=Ki(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Rr&&(this._options.className+=" mac"),this._domNode.className="xterm-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(e){this._revealOnScroll=e}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new ag(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=Ki(this._mouseWheelToDispose),e)){let t=r=>{this._onMouseWheel(new ag(r))};this._mouseWheelToDispose.push(_e(this._listenOnDomNode,ht.MOUSE_WHEEL,t,{passive:!1}))}}_onMouseWheel(e){if(e.browserEvent?.defaultPrevented)return;let t=jk.INSTANCE;t.acceptStandardWheelEvent(e);let r=!1;if(e.deltaY||e.deltaX){let o=e.deltaY*this._options.mouseWheelScrollSensitivity,l=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&l+o===0?l=o=0:Math.abs(o)>=Math.abs(l)?l=0:o=0),this._options.flipAxes&&([o,l]=[l,o]);let c=!Rr&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||c)&&!l&&(l=o,o=0),e.browserEvent&&e.browserEvent.altKey&&(l=l*this._options.fastScrollSensitivity,o=o*this._options.fastScrollSensitivity);let h=this._scrollable.getFutureScrollPosition(),p={};if(o){let d=pg*o,v=h.scrollTop-(d<0?Math.floor(d):Math.ceil(d));this._verticalScrollbar.writeScrollPosition(p,v)}if(l){let d=pg*l,v=h.scrollLeft-(d<0?Math.floor(d):Math.ceil(d));this._horizontalScrollbar.writeScrollPosition(p,v)}p=this._scrollable.validateScrollPosition(p),(h.scrollLeft!==p.scrollLeft||h.scrollTop!==p.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(p):this._scrollable.setScrollPositionNow(p),r=!0)}let n=r;!n&&this._options.alwaysConsumeMouseWheel&&(n=!0),!n&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(n=!0),n&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,r=e.scrollLeft>0,n=r?" left":"",o=t?" top":"",l=r||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${n}`),this._topShadowDomNode.setClassName(`shadow${o}`),this._topLeftShadowDomNode.setClassName(`shadow${l}${o}${n}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),Ok)}},Ik=class extends Bk{constructor(e,t,r){super(e,t,r)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}};function Ak(e){let t={lazyRender:typeof e.lazyRender<"u"?e.lazyRender:!1,className:typeof e.className<"u"?e.className:"",useShadows:typeof e.useShadows<"u"?e.useShadows:!0,handleMouseWheel:typeof e.handleMouseWheel<"u"?e.handleMouseWheel:!0,flipAxes:typeof e.flipAxes<"u"?e.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof e.consumeMouseWheelIfScrollbarIsNeeded<"u"?e.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof e.alwaysConsumeMouseWheel<"u"?e.alwaysConsumeMouseWheel:!1,scrollYToX:typeof e.scrollYToX<"u"?e.scrollYToX:!1,mouseWheelScrollSensitivity:typeof e.mouseWheelScrollSensitivity<"u"?e.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof e.fastScrollSensitivity<"u"?e.fastScrollSensitivity:5,scrollPredominantAxis:typeof e.scrollPredominantAxis<"u"?e.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof e.mouseWheelSmoothScroll<"u"?e.mouseWheelSmoothScroll:!0,arrowSize:typeof e.arrowSize<"u"?e.arrowSize:11,listenOnDomNode:typeof e.listenOnDomNode<"u"?e.listenOnDomNode:null,horizontal:typeof e.horizontal<"u"?e.horizontal:1,horizontalScrollbarSize:typeof e.horizontalScrollbarSize<"u"?e.horizontalScrollbarSize:10,horizontalSliderSize:typeof e.horizontalSliderSize<"u"?e.horizontalSliderSize:0,horizontalHasArrows:typeof e.horizontalHasArrows<"u"?e.horizontalHasArrows:!1,vertical:typeof e.vertical<"u"?e.vertical:1,verticalScrollbarSize:typeof e.verticalScrollbarSize<"u"?e.verticalScrollbarSize:10,verticalHasArrows:typeof e.verticalHasArrows<"u"?e.verticalHasArrows:!1,verticalSliderSize:typeof e.verticalSliderSize<"u"?e.verticalSliderSize:0,scrollByPage:typeof e.scrollByPage<"u"?e.scrollByPage:!1};return t.horizontalSliderSize=typeof e.horizontalSliderSize<"u"?e.horizontalSliderSize:t.horizontalScrollbarSize,t.verticalSliderSize=typeof e.verticalSliderSize<"u"?e.verticalSliderSize:t.verticalScrollbarSize,Rr&&(t.className+=" mac"),t}var ch=class extends be{constructor(e,t,r,n,o,l,c,h){super(),this._bufferService=r,this._optionsService=c,this._renderService=h,this._onRequestScrollLines=this._register(new se),this.onRequestScrollLines=this._onRequestScrollLines.event,this._isSyncing=!1,this._isHandlingScroll=!1,this._suppressOnScrollHandler=!1;let p=this._register(new kk({forceIntegerValues:!1,smoothScrollDuration:this._optionsService.rawOptions.smoothScrollDuration,scheduleAtNextAnimationFrame:d=>Xh(n.window,d)}));this._register(this._optionsService.onSpecificOptionChange("smoothScrollDuration",()=>{p.setSmoothScrollDuration(this._optionsService.rawOptions.smoothScrollDuration)})),this._scrollableElement=this._register(new Ik(t,{vertical:1,horizontal:2,useShadows:!1,mouseWheelSmoothScroll:!0,...this._getChangeOptions()},p)),this._register(this._optionsService.onMultipleOptionChange(["scrollSensitivity","fastScrollSensitivity","overviewRuler"],()=>this._scrollableElement.updateOptions(this._getChangeOptions()))),this._register(o.onProtocolChange(d=>{this._scrollableElement.updateOptions({handleMouseWheel:!(d&16)})})),this._scrollableElement.setScrollDimensions({height:0,scrollHeight:0}),this._register(vt.runAndSubscribe(l.onChangeColors,()=>{this._scrollableElement.getDomNode().style.backgroundColor=l.colors.background.css})),e.appendChild(this._scrollableElement.getDomNode()),this._register(ze(()=>this._scrollableElement.getDomNode().remove())),this._styleElement=n.mainDocument.createElement("style"),t.appendChild(this._styleElement),this._register(ze(()=>this._styleElement.remove())),this._register(vt.runAndSubscribe(l.onChangeColors,()=>{this._styleElement.textContent=[".xterm .xterm-scrollable-element > .scrollbar > .slider {",`  background: ${l.colors.scrollbarSliderBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider:hover {",`  background: ${l.colors.scrollbarSliderHoverBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider.active {",`  background: ${l.colors.scrollbarSliderActiveBackground.css};`,"}"].join(`
`)})),this._register(this._bufferService.onResize(()=>this.queueSync())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._latestYDisp=void 0,this.queueSync()})),this._register(this._bufferService.onScroll(()=>this._sync())),this._register(this._scrollableElement.onScroll(d=>this._handleScroll(d)))}scrollLines(e){let t=this._scrollableElement.getScrollPosition();this._scrollableElement.setScrollPosition({reuseAnimation:!0,scrollTop:t.scrollTop+e*this._renderService.dimensions.css.cell.height})}scrollToLine(e,t){t&&(this._latestYDisp=e),this._scrollableElement.setScrollPosition({reuseAnimation:!t,scrollTop:e*this._renderService.dimensions.css.cell.height})}_getChangeOptions(){return{mouseWheelScrollSensitivity:this._optionsService.rawOptions.scrollSensitivity,fastScrollSensitivity:this._optionsService.rawOptions.fastScrollSensitivity,verticalScrollbarSize:this._optionsService.rawOptions.overviewRuler?.width||14}}queueSync(e){e!==void 0&&(this._latestYDisp=e),this._queuedAnimationFrame===void 0&&(this._queuedAnimationFrame=this._renderService.addRefreshCallback(()=>{this._queuedAnimationFrame=void 0,this._sync(this._latestYDisp)}))}_sync(e=this._bufferService.buffer.ydisp){!this._renderService||this._isSyncing||(this._isSyncing=!0,this._suppressOnScrollHandler=!0,this._scrollableElement.setScrollDimensions({height:this._renderService.dimensions.css.canvas.height,scrollHeight:this._renderService.dimensions.css.cell.height*this._bufferService.buffer.lines.length}),this._suppressOnScrollHandler=!1,e!==this._latestYDisp&&this._scrollableElement.setScrollPosition({scrollTop:e*this._renderService.dimensions.css.cell.height}),this._isSyncing=!1)}_handleScroll(e){if(!this._renderService||this._isHandlingScroll||this._suppressOnScrollHandler)return;this._isHandlingScroll=!0;let t=Math.round(e.scrollTop/this._renderService.dimensions.css.cell.height),r=t-this._bufferService.buffer.ydisp;r!==0&&(this._latestYDisp=t,this._onRequestScrollLines.fire(r)),this._isHandlingScroll=!1}};ch=Qe([oe(2,Nt),oe(3,Kr),oe(4,lv),oe(5,Os),oe(6,Lt),oe(7,Vr)],ch);var uh=class extends be{constructor(e,t,r,n,o){super(),this._screenElement=e,this._bufferService=t,this._coreBrowserService=r,this._decorationService=n,this._renderService=o,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this._register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this._register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this._register(this._decorationService.onDecorationRemoved(l=>this._removeDecoration(l))),this._register(ze(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let e of this._decorationService.decorations)this._renderDecoration(e);this._dimensionsChanged=!1}_renderDecoration(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)}_createElement(e){let t=this._coreBrowserService.mainDocument.createElement("div");t.classList.add("xterm-decoration"),t.classList.toggle("xterm-decoration-top-layer",e?.options?.layer==="top"),t.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,t.style.height=`${(e.options.height||1)*this._renderService.dimensions.css.cell.height}px`,t.style.top=`${(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height}px`,t.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let r=e.options.x??0;return r&&r>this._bufferService.cols&&(t.style.display="none"),this._refreshXPosition(e,t),t}_refreshStyle(e){let t=e.marker.line-this._bufferService.buffers.active.ydisp;if(t<0||t>=this._bufferService.rows)e.element&&(e.element.style.display="none",e.onRenderEmitter.fire(e.element));else{let r=this._decorationElements.get(e);r||(r=this._createElement(e),e.element=r,this._decorationElements.set(e,r),this._container.appendChild(r),e.onDispose(()=>{this._decorationElements.delete(e),r.remove()})),r.style.display=this._altBufferIsActive?"none":"block",this._altBufferIsActive||(r.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,r.style.height=`${(e.options.height||1)*this._renderService.dimensions.css.cell.height}px`,r.style.top=`${t*this._renderService.dimensions.css.cell.height}px`,r.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`),e.onRenderEmitter.fire(r)}}_refreshXPosition(e,t=e.element){if(!t)return;let r=e.options.x??0;(e.options.anchor||"left")==="right"?t.style.right=r?`${r*this._renderService.dimensions.css.cell.width}px`:"":t.style.left=r?`${r*this._renderService.dimensions.css.cell.width}px`:""}_removeDecoration(e){this._decorationElements.get(e)?.remove(),this._decorationElements.delete(e),e.dispose()}};uh=Qe([oe(1,Nt),oe(2,Kr),oe(3,io),oe(4,Vr)],uh);var Fk=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(e){if(e.options.overviewRulerOptions){for(let t of this._zones)if(t.color===e.options.overviewRulerOptions.color&&t.position===e.options.overviewRulerOptions.position){if(this._lineIntersectsZone(t,e.marker.line))return;if(this._lineAdjacentToZone(t,e.marker.line,e.options.overviewRulerOptions.position)){this._addLineToZone(t,e.marker.line);return}}if(this._zonePoolIndex<this._zonePool.length){this._zonePool[this._zonePoolIndex].color=e.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=e.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=e.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=e.marker.line,this._zones.push(this._zonePool[this._zonePoolIndex++]);return}this._zones.push({color:e.options.overviewRulerOptions.color,position:e.options.overviewRulerOptions.position,startBufferLine:e.marker.line,endBufferLine:e.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(e){this._linePadding=e}_lineIntersectsZone(e,t){return t>=e.startBufferLine&&t<=e.endBufferLine}_lineAdjacentToZone(e,t,r){return t>=e.startBufferLine-this._linePadding[r||"full"]&&t<=e.endBufferLine+this._linePadding[r||"full"]}_addLineToZone(e,t){e.startBufferLine=Math.min(e.startBufferLine,t),e.endBufferLine=Math.max(e.endBufferLine,t)}},xr={full:0,left:0,center:0,right:0},fi={full:0,left:0,center:0,right:0},Cn={full:0,left:0,center:0,right:0},Va=class extends be{constructor(e,t,r,n,o,l,c,h){super(),this._viewportElement=e,this._screenElement=t,this._bufferService=r,this._decorationService=n,this._renderService=o,this._optionsService=l,this._themeService=c,this._coreBrowserService=h,this._colorZoneStore=new Fk,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement),this._register(ze(()=>this._canvas?.remove()));let p=this._canvas.getContext("2d");if(p)this._ctx=p;else throw new Error("Ctx cannot be null");this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this._register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0))),this._register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this._register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})),this._register(this._renderService.onRender(()=>{(!this._containerHeight||this._containerHeight!==this._screenElement.clientHeight)&&(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._register(this._optionsService.onSpecificOptionChange("overviewRuler",()=>this._queueRefresh(!0))),this._register(this._themeService.onChangeColors(()=>this._queueRefresh())),this._queueRefresh(!0)}get _width(){return this._optionsService.options.overviewRuler?.width||0}_refreshDrawConstants(){let e=Math.floor((this._canvas.width-1)/3),t=Math.ceil((this._canvas.width-1)/3);fi.full=this._canvas.width,fi.left=e,fi.center=t,fi.right=e,this._refreshDrawHeightConstants(),Cn.full=1,Cn.left=1,Cn.center=1+fi.left,Cn.right=1+fi.left+fi.center}_refreshDrawHeightConstants(){xr.full=Math.round(2*this._coreBrowserService.dpr);let e=this._canvas.height/this._bufferService.buffer.lines.length,t=Math.round(Math.max(Math.min(e,12),6)*this._coreBrowserService.dpr);xr.left=t,xr.center=t,xr.right=t}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*xr.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*xr.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*xr.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*xr.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let t of this._decorationService.decorations)this._colorZoneStore.addDecoration(t);this._ctx.lineWidth=1,this._renderRulerOutline();let e=this._colorZoneStore.zones;for(let t of e)t.position!=="full"&&this._renderColorZone(t);for(let t of e)t.position==="full"&&this._renderColorZone(t);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderRulerOutline(){this._ctx.fillStyle=this._themeService.colors.overviewRulerBorder.css,this._ctx.fillRect(0,0,1,this._canvas.height),this._optionsService.rawOptions.overviewRuler.showTopBorder&&this._ctx.fillRect(1,0,this._canvas.width-1,1),this._optionsService.rawOptions.overviewRuler.showBottomBorder&&this._ctx.fillRect(1,this._canvas.height-1,this._canvas.width-1,this._canvas.height)}_renderColorZone(e){this._ctx.fillStyle=e.color,this._ctx.fillRect(Cn[e.position||"full"],Math.round((this._canvas.height-1)*(e.startBufferLine/this._bufferService.buffers.active.lines.length)-xr[e.position||"full"]/2),fi[e.position||"full"],Math.round((this._canvas.height-1)*((e.endBufferLine-e.startBufferLine)/this._bufferService.buffers.active.lines.length)+xr[e.position||"full"]))}_queueRefresh(e,t){this._shouldUpdateDimensions=e||this._shouldUpdateDimensions,this._shouldUpdateAnchor=t||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};Va=Qe([oe(2,Nt),oe(3,io),oe(4,Vr),oe(5,Lt),oe(6,Os),oe(7,Kr)],Va);var q;(e=>(e.NUL="\0",e.SOH="",e.STX="",e.ETX="",e.EOT="",e.ENQ="",e.ACK="",e.BEL="\x07",e.BS="\b",e.HT="	",e.LF=`
`,e.VT="\v",e.FF="\f",e.CR="\r",e.SO="",e.SI="",e.DLE="",e.DC1="",e.DC2="",e.DC3="",e.DC4="",e.NAK="",e.SYN="",e.ETB="",e.CAN="",e.EM="",e.SUB="",e.ESC="\x1B",e.FS="",e.GS="",e.RS="",e.US="",e.SP=" ",e.DEL=""))(q||={});var Oa;(e=>(e.PAD="",e.HOP="",e.BPH="",e.NBH="",e.IND="",e.NEL="",e.SSA="",e.ESA="",e.HTS="",e.HTJ="",e.VTS="",e.PLD="",e.PLU="",e.RI="",e.SS2="",e.SS3="",e.DCS="",e.PU1="",e.PU2="",e.STS="",e.CCH="",e.MW="",e.SPA="",e.EPA="",e.SOS="",e.SGCI="",e.SCI="",e.CSI="",e.ST="",e.OSC="",e.PM="",e.APC=""))(Oa||={});var Nv;(e=>e.ST=`${q.ESC}\\`)(Nv||={});var hh=class{constructor(e,t,r,n,o,l){this._textarea=e,this._compositionView=t,this._bufferService=r,this._optionsService=n,this._coreService=o,this._renderService=l,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(e){this._compositionView.textContent=e.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(e){if(this._isComposing||this._isSendingComposition){if(e.keyCode===20||e.keyCode===229||e.keyCode===16||e.keyCode===17||e.keyCode===18)return!1;this._finalizeComposition(!1)}return e.keyCode===229?(this._handleAnyTextareaChanges(),!1):!0}_finalizeComposition(e){if(this._compositionView.classList.remove("active"),this._isComposing=!1,e){let t={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){this._isSendingComposition=!1;let r;t.start+=this._dataAlreadySent.length,this._isComposing?r=this._textarea.value.substring(t.start,this._compositionPosition.start):r=this._textarea.value.substring(t.start),r.length>0&&this._coreService.triggerDataEvent(r,!0)}},0)}else{this._isSendingComposition=!1;let t=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(t,!0)}}_handleAnyTextareaChanges(){let e=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let t=this._textarea.value,r=t.replace(e,"");this._dataAlreadySent=r,t.length>e.length?this._coreService.triggerDataEvent(r,!0):t.length<e.length?this._coreService.triggerDataEvent(`${q.DEL}`,!0):t.length===e.length&&t!==e&&this._coreService.triggerDataEvent(t,!0)}},0)}updateCompositionElements(e){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let t=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),r=this._renderService.dimensions.css.cell.height,n=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,o=t*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=o+"px",this._compositionView.style.top=n+"px",this._compositionView.style.height=r+"px",this._compositionView.style.lineHeight=r+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let l=this._compositionView.getBoundingClientRect();this._textarea.style.left=o+"px",this._textarea.style.top=n+"px",this._textarea.style.width=Math.max(l.width,1)+"px",this._textarea.style.height=Math.max(l.height,1)+"px",this._textarea.style.lineHeight=l.height+"px"}e||setTimeout(()=>this.updateCompositionElements(!0),0)}}};hh=Qe([oe(2,Nt),oe(3,Lt),oe(4,Qi),oe(5,Vr)],hh);var dt=0,ft=0,pt=0,qe=0,mg={css:"#00000000",rgba:0},et;(e=>{function t(o,l,c,h){return h!==void 0?`#${ji(o)}${ji(l)}${ji(c)}${ji(h)}`:`#${ji(o)}${ji(l)}${ji(c)}`}e.toCss=t;function r(o,l,c,h=255){return(o<<24|l<<16|c<<8|h)>>>0}e.toRgba=r;function n(o,l,c,h){return{css:e.toCss(o,l,c,h),rgba:e.toRgba(o,l,c,h)}}e.toColor=n})(et||={});var Ie;(e=>{function t(p,d){if(qe=(d.rgba&255)/255,qe===1)return{css:d.css,rgba:d.rgba};let v=d.rgba>>24&255,_=d.rgba>>16&255,S=d.rgba>>8&255,x=p.rgba>>24&255,w=p.rgba>>16&255,b=p.rgba>>8&255;dt=x+Math.round((v-x)*qe),ft=w+Math.round((_-w)*qe),pt=b+Math.round((S-b)*qe);let E=et.toCss(dt,ft,pt),M=et.toRgba(dt,ft,pt);return{css:E,rgba:M}}e.blend=t;function r(p){return(p.rgba&255)===255}e.isOpaque=r;function n(p,d,v){let _=Ta.ensureContrastRatio(p.rgba,d.rgba,v);if(_)return et.toColor(_>>24&255,_>>16&255,_>>8&255)}e.ensureContrastRatio=n;function o(p){let d=(p.rgba|255)>>>0;return[dt,ft,pt]=Ta.toChannels(d),{css:et.toCss(dt,ft,pt),rgba:d}}e.opaque=o;function l(p,d){return qe=Math.round(d*255),[dt,ft,pt]=Ta.toChannels(p.rgba),{css:et.toCss(dt,ft,pt,qe),rgba:et.toRgba(dt,ft,pt,qe)}}e.opacity=l;function c(p,d){return qe=p.rgba&255,l(p,qe*d/255)}e.multiplyOpacity=c;function h(p){return[p.rgba>>24&255,p.rgba>>16&255,p.rgba>>8&255]}e.toColorRGB=h})(Ie||={});var Ue;(e=>{let t,r;try{let o=document.createElement("canvas");o.width=1,o.height=1;let l=o.getContext("2d",{willReadFrequently:!0});l&&(t=l,t.globalCompositeOperation="copy",r=t.createLinearGradient(0,0,1,1))}catch{}function n(o){if(o.match(/#[\da-f]{3,8}/i))switch(o.length){case 4:return dt=parseInt(o.slice(1,2).repeat(2),16),ft=parseInt(o.slice(2,3).repeat(2),16),pt=parseInt(o.slice(3,4).repeat(2),16),et.toColor(dt,ft,pt);case 5:return dt=parseInt(o.slice(1,2).repeat(2),16),ft=parseInt(o.slice(2,3).repeat(2),16),pt=parseInt(o.slice(3,4).repeat(2),16),qe=parseInt(o.slice(4,5).repeat(2),16),et.toColor(dt,ft,pt,qe);case 7:return{css:o,rgba:(parseInt(o.slice(1),16)<<8|255)>>>0};case 9:return{css:o,rgba:parseInt(o.slice(1),16)>>>0}}let l=o.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(l)return dt=parseInt(l[1]),ft=parseInt(l[2]),pt=parseInt(l[3]),qe=Math.round((l[5]===void 0?1:parseFloat(l[5]))*255),et.toColor(dt,ft,pt,qe);if(!t||!r)throw new Error("css.toColor: Unsupported css format");if(t.fillStyle=r,t.fillStyle=o,typeof t.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(t.fillRect(0,0,1,1),[dt,ft,pt,qe]=t.getImageData(0,0,1,1).data,qe!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:et.toRgba(dt,ft,pt,qe),css:o}}e.toColor=n})(Ue||={});var Et;(e=>{function t(n){return r(n>>16&255,n>>8&255,n&255)}e.relativeLuminance=t;function r(n,o,l){let c=n/255,h=o/255,p=l/255,d=c<=.03928?c/12.92:Math.pow((c+.055)/1.055,2.4),v=h<=.03928?h/12.92:Math.pow((h+.055)/1.055,2.4),_=p<=.03928?p/12.92:Math.pow((p+.055)/1.055,2.4);return d*.2126+v*.7152+_*.0722}e.relativeLuminance2=r})(Et||={});var Ta;(e=>{function t(c,h){if(qe=(h&255)/255,qe===1)return h;let p=h>>24&255,d=h>>16&255,v=h>>8&255,_=c>>24&255,S=c>>16&255,x=c>>8&255;return dt=_+Math.round((p-_)*qe),ft=S+Math.round((d-S)*qe),pt=x+Math.round((v-x)*qe),et.toRgba(dt,ft,pt)}e.blend=t;function r(c,h,p){let d=Et.relativeLuminance(c>>8),v=Et.relativeLuminance(h>>8);if(Ar(d,v)<p){if(v<d){let x=n(c,h,p),w=Ar(d,Et.relativeLuminance(x>>8));if(w<p){let b=o(c,h,p),E=Ar(d,Et.relativeLuminance(b>>8));return w>E?x:b}return x}let _=o(c,h,p),S=Ar(d,Et.relativeLuminance(_>>8));if(S<p){let x=n(c,h,p),w=Ar(d,Et.relativeLuminance(x>>8));return S>w?_:x}return _}}e.ensureContrastRatio=r;function n(c,h,p){let d=c>>24&255,v=c>>16&255,_=c>>8&255,S=h>>24&255,x=h>>16&255,w=h>>8&255,b=Ar(Et.relativeLuminance2(S,x,w),Et.relativeLuminance2(d,v,_));for(;b<p&&(S>0||x>0||w>0);)S-=Math.max(0,Math.ceil(S*.1)),x-=Math.max(0,Math.ceil(x*.1)),w-=Math.max(0,Math.ceil(w*.1)),b=Ar(Et.relativeLuminance2(S,x,w),Et.relativeLuminance2(d,v,_));return(S<<24|x<<16|w<<8|255)>>>0}e.reduceLuminance=n;function o(c,h,p){let d=c>>24&255,v=c>>16&255,_=c>>8&255,S=h>>24&255,x=h>>16&255,w=h>>8&255,b=Ar(Et.relativeLuminance2(S,x,w),Et.relativeLuminance2(d,v,_));for(;b<p&&(S<255||x<255||w<255);)S=Math.min(255,S+Math.ceil((255-S)*.1)),x=Math.min(255,x+Math.ceil((255-x)*.1)),w=Math.min(255,w+Math.ceil((255-w)*.1)),b=Ar(Et.relativeLuminance2(S,x,w),Et.relativeLuminance2(d,v,_));return(S<<24|x<<16|w<<8|255)>>>0}e.increaseLuminance=o;function l(c){return[c>>24&255,c>>16&255,c>>8&255,c&255]}e.toChannels=l})(Ta||={});function ji(e){let t=e.toString(16);return t.length<2?"0"+t:t}function Ar(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}var zk=class extends ro{constructor(e,t,r){super(),this.content=0,this.combinedData="",this.fg=e.fg,this.bg=e.bg,this.combinedData=t,this._width=r}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},qa=class{constructor(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new sr}register(e){let t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id}deregister(e){for(let t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1}getJoinedCharacters(e){if(this._characterJoiners.length===0)return[];let t=this._bufferService.buffer.lines.get(e);if(!t||t.length===0)return[];let r=[],n=t.translateToString(!0),o=0,l=0,c=0,h=t.getFg(0),p=t.getBg(0);for(let d=0;d<t.getTrimmedLength();d++)if(t.loadCell(d,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==h||this._workCell.bg!==p){if(d-o>1){let v=this._getJoinedRanges(n,c,l,t,o);for(let _=0;_<v.length;_++)r.push(v[_])}o=d,c=l,h=this._workCell.fg,p=this._workCell.bg}l+=this._workCell.getChars().length||gi.length}if(this._bufferService.cols-o>1){let d=this._getJoinedRanges(n,c,l,t,o);for(let v=0;v<d.length;v++)r.push(d[v])}return r}_getJoinedRanges(e,t,r,n,o){let l=e.substring(t,r),c=[];try{c=this._characterJoiners[0].handler(l)}catch(h){console.error(h)}for(let h=1;h<this._characterJoiners.length;h++)try{let p=this._characterJoiners[h].handler(l);for(let d=0;d<p.length;d++)qa._mergeRanges(c,p[d])}catch(p){console.error(p)}return this._stringRangesToCellRanges(c,n,o),c}_stringRangesToCellRanges(e,t,r){let n=0,o=!1,l=0,c=e[n];if(c){for(let h=r;h<this._bufferService.cols;h++){let p=t.getWidth(h),d=t.getString(h).length||gi.length;if(p!==0){if(!o&&c[0]<=l&&(c[0]=h,o=!0),c[1]<=l){if(c[1]=h,c=e[++n],!c)break;c[0]<=l?(c[0]=h,o=!0):o=!1}l+=d}}c&&(c[1]=this._bufferService.cols)}}static _mergeRanges(e,t){let r=!1;for(let n=0;n<e.length;n++){let o=e[n];if(r){if(t[1]<=o[0])return e[n-1][1]=t[1],e;if(t[1]<=o[1])return e[n-1][1]=Math.max(t[1],o[1]),e.splice(n,1),e;e.splice(n,1),n--}else{if(t[1]<=o[0])return e.splice(n,0,t),e;if(t[1]<=o[1])return o[0]=Math.min(t[0],o[0]),e;t[0]<o[1]&&(o[0]=Math.min(t[0],o[0]),r=!0);continue}}return r?e[e.length-1][1]=t[1]:e.push(t),e}};qa=Qe([oe(0,Nt)],qa);function Hk(e){return 57508<=e&&e<=57558}function $k(e){return 9472<=e&&e<=9631}function Wk(e){return Hk(e)||$k(e)}function Uk(){return{css:{canvas:ba(),cell:ba()},device:{canvas:ba(),cell:ba(),char:{width:0,height:0,left:0,top:0}}}}function ba(){return{width:0,height:0}}var dh=class{constructor(e,t,r,n,o,l,c){this._document=e,this._characterJoinerService=t,this._optionsService=r,this._coreBrowserService=n,this._coreService=o,this._decorationService=l,this._themeService=c,this._workCell=new sr,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(e,t,r){this._selectionStart=e,this._selectionEnd=t,this._columnSelectMode=r}createRow(e,t,r,n,o,l,c,h,p,d,v){let _=[],S=this._characterJoinerService.getJoinedCharacters(t),x=this._themeService.colors,w=e.getNoBgTrimmedLength();r&&w<l+1&&(w=l+1);let b,E=0,M="",B=0,W=0,A=0,K=0,X=!1,te=0,ne=!1,re=0,F=0,V=[],Q=d!==-1&&v!==-1;for(let $=0;$<w;$++){e.loadCell($,this._workCell);let H=this._workCell.getWidth();if(H===0)continue;let O=!1,D=$>=F,U=$,N=this._workCell;if(S.length>0&&$===S[0][0]&&D){let Ee=S.shift(),wi=this._isCellInSelection(Ee[0],t);for(B=Ee[0]+1;B<Ee[1];B++)D&&=wi===this._isCellInSelection(B,t);D&&=!r||l<Ee[0]||l>=Ee[1],D?(O=!0,N=new zk(this._workCell,e.translateToString(!0,Ee[0],Ee[1]),Ee[1]-Ee[0]),U=Ee[1]-1,H=N.getWidth()):F=Ee[1]}let G=this._isCellInSelection($,t),Y=r&&$===l,P=Q&&$>=d&&$<=v,z=!1;this._decorationService.forEachDecorationAtCell($,t,void 0,Ee=>{z=!0});let le=N.getChars()||gi;if(le===" "&&(N.isUnderline()||N.isOverline())&&(le=""),re=H*h-p.get(le,N.isBold(),N.isItalic()),!b)b=this._document.createElement("span");else if(E&&(G&&ne||!G&&!ne&&N.bg===W)&&(G&&ne&&x.selectionForeground||N.fg===A)&&N.extended.ext===K&&P===X&&re===te&&!Y&&!O&&!z&&D){N.isInvisible()?M+=gi:M+=le,E++;continue}else E&&(b.textContent=M),b=this._document.createElement("span"),E=0,M="";if(W=N.bg,A=N.fg,K=N.extended.ext,X=P,te=re,ne=G,O&&l>=$&&l<=U&&(l=$),!this._coreService.isCursorHidden&&Y&&this._coreService.isCursorInitialized){if(V.push("xterm-cursor"),this._coreBrowserService.isFocused)c&&V.push("xterm-cursor-blink"),V.push(n==="bar"?"xterm-cursor-bar":n==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(o)switch(o){case"outline":V.push("xterm-cursor-outline");break;case"block":V.push("xterm-cursor-block");break;case"bar":V.push("xterm-cursor-bar");break;case"underline":V.push("xterm-cursor-underline");break}}if(N.isBold()&&V.push("xterm-bold"),N.isItalic()&&V.push("xterm-italic"),N.isDim()&&V.push("xterm-dim"),N.isInvisible()?M=gi:M=N.getChars()||gi,N.isUnderline()&&(V.push(`xterm-underline-${N.extended.underlineStyle}`),M===" "&&(M=""),!N.isUnderlineColorDefault()))if(N.isUnderlineColorRGB())b.style.textDecorationColor=`rgb(${ro.toColorRGB(N.getUnderlineColor()).join(",")})`;else{let Ee=N.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&N.isBold()&&Ee<8&&(Ee+=8),b.style.textDecorationColor=x.ansi[Ee].css}N.isOverline()&&(V.push("xterm-overline"),M===" "&&(M="")),N.isStrikethrough()&&V.push("xterm-strikethrough"),P&&(b.style.textDecoration="underline");let fe=N.getFgColor(),Se=N.getFgColorMode(),ye=N.getBgColor(),ke=N.getBgColorMode(),Pe=!!N.isInverse();if(Pe){let Ee=fe;fe=ye,ye=Ee;let wi=Se;Se=ke,ke=wi}let Re,at,gr=!1;this._decorationService.forEachDecorationAtCell($,t,void 0,Ee=>{Ee.options.layer!=="top"&&gr||(Ee.backgroundColorRGB&&(ke=50331648,ye=Ee.backgroundColorRGB.rgba>>8&16777215,Re=Ee.backgroundColorRGB),Ee.foregroundColorRGB&&(Se=50331648,fe=Ee.foregroundColorRGB.rgba>>8&16777215,at=Ee.foregroundColorRGB),gr=Ee.options.layer==="top")}),!gr&&G&&(Re=this._coreBrowserService.isFocused?x.selectionBackgroundOpaque:x.selectionInactiveBackgroundOpaque,ye=Re.rgba>>8&16777215,ke=50331648,gr=!0,x.selectionForeground&&(Se=50331648,fe=x.selectionForeground.rgba>>8&16777215,at=x.selectionForeground)),gr&&V.push("xterm-decoration-top");let ar;switch(ke){case 16777216:case 33554432:ar=x.ansi[ye],V.push(`xterm-bg-${ye}`);break;case 50331648:ar=et.toColor(ye>>16,ye>>8&255,ye&255),this._addStyle(b,`background-color:#${gg((ye>>>0).toString(16),"0",6)}`);break;case 0:default:Pe?(ar=x.foreground,V.push("xterm-bg-257")):ar=x.background}switch(Re||N.isDim()&&(Re=Ie.multiplyOpacity(ar,.5)),Se){case 16777216:case 33554432:N.isBold()&&fe<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(fe+=8),this._applyMinimumContrast(b,ar,x.ansi[fe],N,Re,void 0)||V.push(`xterm-fg-${fe}`);break;case 50331648:let Ee=et.toColor(fe>>16&255,fe>>8&255,fe&255);this._applyMinimumContrast(b,ar,Ee,N,Re,at)||this._addStyle(b,`color:#${gg(fe.toString(16),"0",6)}`);break;case 0:default:this._applyMinimumContrast(b,ar,x.foreground,N,Re,at)||Pe&&V.push("xterm-fg-257")}V.length&&(b.className=V.join(" "),V.length=0),!Y&&!O&&!z&&D?E++:b.textContent=M,re!==this.defaultSpacing&&(b.style.letterSpacing=`${re}px`),_.push(b),$=U}return b&&E&&(b.textContent=M),_}_applyMinimumContrast(e,t,r,n,o,l){if(this._optionsService.rawOptions.minimumContrastRatio===1||Wk(n.getCode()))return!1;let c=this._getContrastCache(n),h;if(!o&&!l&&(h=c.getColor(t.rgba,r.rgba)),h===void 0){let p=this._optionsService.rawOptions.minimumContrastRatio/(n.isDim()?2:1);h=Ie.ensureContrastRatio(o||t,l||r,p),c.setColor((o||t).rgba,(l||r).rgba,h??null)}return h?(this._addStyle(e,`color:${h.css}`),!0):!1}_getContrastCache(e){return e.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(e,t){e.setAttribute("style",`${e.getAttribute("style")||""}${t};`)}_isCellInSelection(e,t){let r=this._selectionStart,n=this._selectionEnd;return!r||!n?!1:this._columnSelectMode?r[0]<=n[0]?e>=r[0]&&t>=r[1]&&e<n[0]&&t<=n[1]:e<r[0]&&t>=r[1]&&e>=n[0]&&t<=n[1]:t>r[1]&&t<n[1]||r[1]===n[1]&&t===r[1]&&e>=r[0]&&e<n[0]||r[1]<n[1]&&t===n[1]&&e<n[0]||r[1]<n[1]&&t===r[1]&&e>=r[0]}};dh=Qe([oe(1,hv),oe(2,Lt),oe(3,Kr),oe(4,Qi),oe(5,io),oe(6,Os)],dh);function gg(e,t,r){for(;e.length<r;)e=t+e;return e}var Kk=class{constructor(e,t){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=e.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let r=e.createElement("span");r.classList.add("xterm-char-measure-element");let n=e.createElement("span");n.classList.add("xterm-char-measure-element"),n.style.fontWeight="bold";let o=e.createElement("span");o.classList.add("xterm-char-measure-element"),o.style.fontStyle="italic";let l=e.createElement("span");l.classList.add("xterm-char-measure-element"),l.style.fontWeight="bold",l.style.fontStyle="italic",this._measureElements=[r,n,o,l],this._container.appendChild(r),this._container.appendChild(n),this._container.appendChild(o),this._container.appendChild(l),t.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(e,t,r,n){e===this._font&&t===this._fontSize&&r===this._weight&&n===this._weightBold||(this._font=e,this._fontSize=t,this._weight=r,this._weightBold=n,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${r}`,this._measureElements[1].style.fontWeight=`${n}`,this._measureElements[2].style.fontWeight=`${r}`,this._measureElements[3].style.fontWeight=`${n}`,this.clear())}get(e,t,r){let n=0;if(!t&&!r&&e.length===1&&(n=e.charCodeAt(0))<256){if(this._flat[n]!==-9999)return this._flat[n];let c=this._measure(e,0);return c>0&&(this._flat[n]=c),c}let o=e;t&&(o+="B"),r&&(o+="I");let l=this._holey.get(o);if(l===void 0){let c=0;t&&(c|=1),r&&(c|=2),l=this._measure(e,c),l>0&&this._holey.set(o,l)}return l}_measure(e,t){let r=this._measureElements[t];return r.textContent=e.repeat(32),r.offsetWidth/32}},Vk=class{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(e,t,r,n=!1){if(this.selectionStart=t,this.selectionEnd=r,!t||!r||t[0]===r[0]&&t[1]===r[1]){this.clear();return}let o=e.buffers.active.ydisp,l=t[1]-o,c=r[1]-o,h=Math.max(l,0),p=Math.min(c,e.rows-1);if(h>=e.rows||p<0){this.clear();return}this.hasSelection=!0,this.columnSelectMode=n,this.viewportStartRow=l,this.viewportEndRow=c,this.viewportCappedStartRow=h,this.viewportCappedEndRow=p,this.startCol=t[0],this.endCol=r[0]}isCellSelected(e,t,r){return this.hasSelection?(r-=e.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?t>=this.startCol&&r>=this.viewportCappedStartRow&&t<this.endCol&&r<=this.viewportCappedEndRow:t<this.startCol&&r>=this.viewportCappedStartRow&&t>=this.endCol&&r<=this.viewportCappedEndRow:r>this.viewportStartRow&&r<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&r===this.viewportStartRow&&t>=this.startCol&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&r===this.viewportEndRow&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&r===this.viewportStartRow&&t>=this.startCol):!1}};function qk(){return new Vk}var bu="xterm-dom-renderer-owner-",er="xterm-rows",Ca="xterm-fg-",_g="xterm-bg-",kn="xterm-focus",ka="xterm-selection",Qk=1,fh=class extends be{constructor(e,t,r,n,o,l,c,h,p,d,v,_,S,x){super(),this._terminal=e,this._document=t,this._element=r,this._screenElement=n,this._viewportElement=o,this._helperContainer=l,this._linkifier2=c,this._charSizeService=p,this._optionsService=d,this._bufferService=v,this._coreService=_,this._coreBrowserService=S,this._themeService=x,this._terminalClass=Qk++,this._rowElements=[],this._selectionRenderModel=qk(),this.onRequestRedraw=this._register(new se).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(er),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(ka),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=Uk(),this._updateDimensions(),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._themeService.onChangeColors(w=>this._injectCss(w))),this._injectCss(this._themeService.colors),this._rowFactory=h.createInstance(dh,document),this._element.classList.add(bu+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this._register(this._linkifier2.onShowLinkUnderline(w=>this._handleLinkHover(w))),this._register(this._linkifier2.onHideLinkUnderline(w=>this._handleLinkLeave(w))),this._register(ze(()=>{this._element.classList.remove(bu+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new Kk(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let e=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*e,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*e),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/e),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/e),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let r of this._rowElements)r.style.width=`${this.dimensions.css.canvas.width}px`,r.style.height=`${this.dimensions.css.cell.height}px`,r.style.lineHeight=`${this.dimensions.css.cell.height}px`,r.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let t=`${this._terminalSelector} .${er} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=t,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(e){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let t=`${this._terminalSelector} .${er} { pointer-events: none; color: ${e.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;t+=`${this._terminalSelector} .${er} .xterm-dim { color: ${Ie.multiplyOpacity(e.foreground,.5).css};}`,t+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let r=`blink_underline_${this._terminalClass}`,n=`blink_bar_${this._terminalClass}`,o=`blink_block_${this._terminalClass}`;t+=`@keyframes ${r} { 50% {  border-bottom-style: hidden; }}`,t+=`@keyframes ${n} { 50% {  box-shadow: none; }}`,t+=`@keyframes ${o} { 0% {  background-color: ${e.cursor.css};  color: ${e.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${e.cursor.css}; }}`,t+=`${this._terminalSelector} .${er}.${kn} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${r} 1s step-end infinite;}${this._terminalSelector} .${er}.${kn} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${n} 1s step-end infinite;}${this._terminalSelector} .${er}.${kn} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${o} 1s step-end infinite;}${this._terminalSelector} .${er} .xterm-cursor.xterm-cursor-block { background-color: ${e.cursor.css}; color: ${e.cursorAccent.css};}${this._terminalSelector} .${er} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${e.cursor.css} !important; color: ${e.cursorAccent.css} !important;}${this._terminalSelector} .${er} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${e.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${er} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${e.cursor.css} inset;}${this._terminalSelector} .${er} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${e.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,t+=`${this._terminalSelector} .${ka} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${ka} div { position: absolute; background-color: ${e.selectionBackgroundOpaque.css};}${this._terminalSelector} .${ka} div { position: absolute; background-color: ${e.selectionInactiveBackgroundOpaque.css};}`;for(let[l,c]of e.ansi.entries())t+=`${this._terminalSelector} .${Ca}${l} { color: ${c.css}; }${this._terminalSelector} .${Ca}${l}.xterm-dim { color: ${Ie.multiplyOpacity(c,.5).css}; }${this._terminalSelector} .${_g}${l} { background-color: ${c.css}; }`;t+=`${this._terminalSelector} .${Ca}257 { color: ${Ie.opaque(e.background).css}; }${this._terminalSelector} .${Ca}257.xterm-dim { color: ${Ie.multiplyOpacity(Ie.opaque(e.background),.5).css}; }${this._terminalSelector} .${_g}257 { background-color: ${e.foreground.css}; }`,this._themeStyleElement.textContent=t}_setDefaultSpacing(){let e=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${e}px`,this._rowFactory.defaultSpacing=e}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(e,t){for(let r=this._rowElements.length;r<=t;r++){let n=this._document.createElement("div");this._rowContainer.appendChild(n),this._rowElements.push(n)}for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(e,t){this._refreshRowElements(e,t),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(kn),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(kn),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(e,t,r){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(e,t,r),this.renderRows(0,this._bufferService.rows-1),!e||!t||(this._selectionRenderModel.update(this._terminal,e,t,r),!this._selectionRenderModel.hasSelection))return;let n=this._selectionRenderModel.viewportStartRow,o=this._selectionRenderModel.viewportEndRow,l=this._selectionRenderModel.viewportCappedStartRow,c=this._selectionRenderModel.viewportCappedEndRow,h=this._document.createDocumentFragment();if(r){let p=e[0]>t[0];h.appendChild(this._createSelectionElement(l,p?t[0]:e[0],p?e[0]:t[0],c-l+1))}else{let p=n===l?e[0]:0,d=l===o?t[0]:this._bufferService.cols;h.appendChild(this._createSelectionElement(l,p,d));let v=c-l-1;if(h.appendChild(this._createSelectionElement(l+1,0,this._bufferService.cols,v)),l!==c){let _=o===c?t[0]:this._bufferService.cols;h.appendChild(this._createSelectionElement(c,0,_))}}this._selectionContainer.appendChild(h)}_createSelectionElement(e,t,r,n=1){let o=this._document.createElement("div"),l=t*this.dimensions.css.cell.width,c=this.dimensions.css.cell.width*(r-t);return l+c>this.dimensions.css.canvas.width&&(c=this.dimensions.css.canvas.width-l),o.style.height=`${n*this.dimensions.css.cell.height}px`,o.style.top=`${e*this.dimensions.css.cell.height}px`,o.style.left=`${l}px`,o.style.width=`${c}px`,o}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let e of this._rowElements)e.replaceChildren()}renderRows(e,t){let r=this._bufferService.buffer,n=r.ybase+r.y,o=Math.min(r.x,this._bufferService.cols-1),l=this._coreService.decPrivateModes.cursorBlink??this._optionsService.rawOptions.cursorBlink,c=this._coreService.decPrivateModes.cursorStyle??this._optionsService.rawOptions.cursorStyle,h=this._optionsService.rawOptions.cursorInactiveStyle;for(let p=e;p<=t;p++){let d=p+r.ydisp,v=this._rowElements[p],_=r.lines.get(d);if(!v||!_)break;v.replaceChildren(...this._rowFactory.createRow(_,d,d===n,c,h,o,l,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${bu}${this._terminalClass}`}_handleLinkHover(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)}_handleLinkLeave(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)}_setCellUnderline(e,t,r,n,o,l){r<0&&(e=0),n<0&&(t=0);let c=this._bufferService.rows-1;r=Math.max(Math.min(r,c),0),n=Math.max(Math.min(n,c),0),o=Math.min(o,this._bufferService.cols);let h=this._bufferService.buffer,p=h.ybase+h.y,d=Math.min(h.x,o-1),v=this._optionsService.rawOptions.cursorBlink,_=this._optionsService.rawOptions.cursorStyle,S=this._optionsService.rawOptions.cursorInactiveStyle;for(let x=r;x<=n;++x){let w=x+h.ydisp,b=this._rowElements[x],E=h.lines.get(w);if(!b||!E)break;b.replaceChildren(...this._rowFactory.createRow(E,w,w===p,_,S,d,v,this.dimensions.css.cell.width,this._widthCache,l?x===r?e:0:-1,l?(x===n?t:o)-1:-1))}}};fh=Qe([oe(7,Kh),oe(8,il),oe(9,Lt),oe(10,Nt),oe(11,Qi),oe(12,Kr),oe(13,Os)],fh);var ph=class extends be{constructor(e,t,r){super(),this._optionsService=r,this.width=0,this.height=0,this._onCharSizeChange=this._register(new se),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this._register(new Gk(this._optionsService))}catch{this._measureStrategy=this._register(new Yk(e,t,this._optionsService))}this._register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){let e=this._measureStrategy.measure();(e.width!==this.width||e.height!==this.height)&&(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};ph=Qe([oe(2,Lt)],ph);var Lv=class extends be{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(e,t){e!==void 0&&e>0&&t!==void 0&&t>0&&(this._result.width=e,this._result.height=t)}},Yk=class extends Lv{constructor(e,t,r){super(),this._document=e,this._parentElement=t,this._optionsService=r,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}},Gk=class extends Lv{constructor(e){super(),this._optionsService=e,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let t=this._ctx.measureText("W");if(!("width"in t&&"fontBoundingBoxAscent"in t&&"fontBoundingBoxDescent"in t))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let e=this._ctx.measureText("W");return this._validateAndSet(e.width,e.fontBoundingBoxAscent+e.fontBoundingBoxDescent),this._result}},Xk=class extends be{constructor(e,t,r){super(),this._textarea=e,this._window=t,this.mainDocument=r,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=this._register(new Jk(this._window)),this._onDprChange=this._register(new se),this.onDprChange=this._onDprChange.event,this._onWindowChange=this._register(new se),this.onWindowChange=this._onWindowChange.event,this._register(this.onWindowChange(n=>this._screenDprMonitor.setWindow(n))),this._register(vt.forward(this._screenDprMonitor.onDprChange,this._onDprChange)),this._register(_e(this._textarea,"focus",()=>this._isFocused=!0)),this._register(_e(this._textarea,"blur",()=>this._isFocused=!1))}get window(){return this._window}set window(e){this._window!==e&&(this._window=e,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}},Jk=class extends be{constructor(e){super(),this._parentWindow=e,this._windowResizeListener=this._register(new Rs),this._onDprChange=this._register(new se),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this._register(ze(()=>this.clearListener()))}setWindow(e){this._parentWindow=e,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=_e(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){!this._resolutionMediaMatchList||!this._outerListener||(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}},Zk=class extends be{constructor(){super(),this.linkProviders=[],this._register(ze(()=>this.linkProviders.length=0))}registerLinkProvider(e){return this.linkProviders.push(e),{dispose:()=>{let t=this.linkProviders.indexOf(e);t!==-1&&this.linkProviders.splice(t,1)}}}};function Zh(e,t,r){let n=r.getBoundingClientRect(),o=e.getComputedStyle(r),l=parseInt(o.getPropertyValue("padding-left")),c=parseInt(o.getPropertyValue("padding-top"));return[t.clientX-n.left-l,t.clientY-n.top-c]}function e2(e,t,r,n,o,l,c,h,p){if(!l)return;let d=Zh(e,t,r);if(d)return d[0]=Math.ceil((d[0]+(p?c/2:0))/c),d[1]=Math.ceil(d[1]/h),d[0]=Math.min(Math.max(d[0],1),n+(p?1:0)),d[1]=Math.min(Math.max(d[1],1),o),d}var mh=class{constructor(e,t){this._renderService=e,this._charSizeService=t}getCoords(e,t,r,n,o){return e2(window,e,t,r,n,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,o)}getMouseReportCoords(e,t){let r=Zh(window,e,t);if(this._charSizeService.hasValidSize)return r[0]=Math.min(Math.max(r[0],0),this._renderService.dimensions.css.canvas.width-1),r[1]=Math.min(Math.max(r[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(r[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(r[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(r[0]),y:Math.floor(r[1])}}};mh=Qe([oe(0,Vr),oe(1,il)],mh);var t2=class{constructor(t,r){this._renderCallback=t,this._coreBrowserService=r,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(t){return this._refreshCallbacks.push(t),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(t,r,n){this._rowCount=n,t=t!==void 0?t:0,r=r!==void 0?r:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,t):t,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,r):r,!this._animationFrame&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0){this._runRefreshCallbacks();return}let t=Math.max(this._rowStart,0),r=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(t,r),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let t of this._refreshCallbacks)t(0);this._refreshCallbacks=[]}},Dv={};hC(Dv,{getSafariVersion:()=>i2,isChromeOS:()=>jv,isFirefox:()=>Mv,isIpad:()=>s2,isIphone:()=>n2,isLegacyEdge:()=>r2,isLinux:()=>ed,isMac:()=>Qa,isNode:()=>sl,isSafari:()=>Ov,isWindows:()=>Tv});var sl=typeof process<"u"&&"title"in process,so=sl?"node":navigator.userAgent,no=sl?"node":navigator.platform,Mv=so.includes("Firefox"),r2=so.includes("Edge"),Ov=/^((?!chrome|android).)*safari/i.test(so);function i2(){if(!Ov)return 0;let e=so.match(/Version\/(\d+)/);return e===null||e.length<2?0:parseInt(e[1])}var Qa=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(no),s2=no==="iPad",n2=no==="iPhone",Tv=["Windows","Win16","Win32","WinCE"].includes(no),ed=no.indexOf("Linux")>=0,jv=/\bCrOS\b/.test(so),Bv=class{constructor(){this._tasks=[],this._i=0}enqueue(e){this._tasks.push(e),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(e){this._idleCallback=void 0;let t=0,r=0,n=e.timeRemaining(),o=0;for(;this._i<this._tasks.length;){if(t=performance.now(),this._tasks[this._i]()||this._i++,t=Math.max(1,performance.now()-t),r=Math.max(t,r),o=e.timeRemaining(),r*1.5>o){n-t<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-t))}ms`),this._start();return}n=o}this.clear()}},o2=class extends Bv{_requestCallback(e){return setTimeout(()=>e(this._createDeadline(16)))}_cancelCallback(e){clearTimeout(e)}_createDeadline(e){let t=performance.now()+e;return{timeRemaining:()=>Math.max(0,t-performance.now())}}},a2=class extends Bv{_requestCallback(e){return requestIdleCallback(e)}_cancelCallback(e){cancelIdleCallback(e)}},Ya=!sl&&"requestIdleCallback"in window?a2:o2,l2=class{constructor(){this._queue=new Ya}set(e){this._queue.clear(),this._queue.enqueue(e)}flush(){this._queue.flush()}},gh=class extends be{constructor(e,t,r,n,o,l,c,h,p){super(),this._rowCount=e,this._optionsService=r,this._charSizeService=n,this._coreService=o,this._coreBrowserService=h,this._renderer=this._register(new Rs),this._pausedResizeTask=new l2,this._observerDisposable=this._register(new Rs),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this._register(new se),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this._register(new se),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this._register(new se),this.onRender=this._onRender.event,this._onRefreshRequest=this._register(new se),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new t2((d,v)=>this._renderRows(d,v),this._coreBrowserService),this._register(this._renderDebouncer),this._syncOutputHandler=new c2(this._coreBrowserService,this._coreService,()=>this._fullRefresh()),this._register(ze(()=>this._syncOutputHandler.dispose())),this._register(this._coreBrowserService.onDprChange(()=>this.handleDevicePixelRatioChange())),this._register(c.onResize(()=>this._fullRefresh())),this._register(c.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this._register(l.onDecorationRegistered(()=>this._fullRefresh())),this._register(l.onDecorationRemoved(()=>this._fullRefresh())),this._register(this._optionsService.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(c.cols,c.rows),this._fullRefresh()})),this._register(this._optionsService.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(c.buffer.y,c.buffer.y,!0))),this._register(p.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(this._coreBrowserService.window,t),this._register(this._coreBrowserService.onWindowChange(d=>this._registerIntersectionObserver(d,t)))}get dimensions(){return this._renderer.value.dimensions}_registerIntersectionObserver(e,t){if("IntersectionObserver"in e){let r=new e.IntersectionObserver(n=>this._handleIntersectionChange(n[n.length-1]),{threshold:0});r.observe(t),this._observerDisposable.value=ze(()=>r.disconnect())}}_handleIntersectionChange(e){this._isPaused=e.isIntersecting===void 0?e.intersectionRatio===0:!e.isIntersecting,!this._isPaused&&!this._charSizeService.hasValidSize&&this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(e,t,r=!1){if(this._isPaused){this._needsFullRefresh=!0;return}if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(e,t);return}let n=this._syncOutputHandler.flush();n&&(e=Math.min(e,n.start),t=Math.max(t,n.end)),r||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,t,this._rowCount)}_renderRows(e,t){if(this._renderer.value){if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(e,t);return}e=Math.min(e,this._rowCount-1),t=Math.min(t,this._rowCount-1),this._renderer.value.renderRows(e,t),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:t}),this._onRender.fire({start:e,end:t}),this._isNextRenderRedrawOnly=!0}}resize(e,t){this._rowCount=t,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(e){this._renderer.value=e,this._renderer.value&&(this._renderer.value.onRequestRedraw(t=>this.refreshRows(t.start,t.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(e){return this._renderDebouncer.addRefreshCallback(e)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(e,t){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(e,t)):this._renderer.value.handleResize(e,t),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(e,t,r){this._selectionState.start=e,this._selectionState.end=t,this._selectionState.columnSelectMode=r,this._renderer.value?.handleSelectionChanged(e,t,r)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};gh=Qe([oe(2,Lt),oe(3,il),oe(4,Qi),oe(5,io),oe(6,Nt),oe(7,Kr),oe(8,Os)],gh);var c2=class{constructor(e,t,r){this._coreBrowserService=e,this._coreService=t,this._onTimeout=r,this._start=0,this._end=0,this._isBuffering=!1}bufferRows(e,t){this._isBuffering?(this._start=Math.min(this._start,e),this._end=Math.max(this._end,t)):(this._start=e,this._end=t,this._isBuffering=!0),this._timeout===void 0&&(this._timeout=this._coreBrowserService.window.setTimeout(()=>{this._timeout=void 0,this._coreService.decPrivateModes.synchronizedOutput=!1,this._onTimeout()},1e3))}flush(){if(this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0),!this._isBuffering)return;let e={start:this._start,end:this._end};return this._isBuffering=!1,e}dispose(){this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0)}};function u2(e,t,r,n){let o=r.buffer.x,l=r.buffer.y;if(!r.buffer.hasScrollback)return f2(o,l,e,t,r,n)+nl(l,t,r,n)+p2(o,l,e,t,r,n);let c;if(l===t)return c=o>e?"D":"C",Gn(Math.abs(o-e),Yn(c,n));c=l>t?"D":"C";let h=Math.abs(l-t),p=d2(l>t?e:o,r)+(h-1)*r.cols+1+h2(l>t?o:e);return Gn(p,Yn(c,n))}function h2(e,t){return e-1}function d2(e,t){return t.cols-e}function f2(e,t,r,n,o,l){return nl(t,n,o,l).length===0?"":Gn(Av(e,t,e,t-Vi(t,o),!1,o).length,Yn("D",l))}function nl(e,t,r,n){let o=e-Vi(e,r),l=t-Vi(t,r),c=Math.abs(o-l)-m2(e,t,r);return Gn(c,Yn(Iv(e,t),n))}function p2(e,t,r,n,o,l){let c;nl(t,n,o,l).length>0?c=n-Vi(n,o):c=t;let h=n,p=g2(e,t,r,n,o,l);return Gn(Av(e,c,r,h,p==="C",o).length,Yn(p,l))}function m2(e,t,r){let n=0,o=e-Vi(e,r),l=t-Vi(t,r);for(let c=0;c<Math.abs(o-l);c++){let h=Iv(e,t)==="A"?-1:1;r.buffer.lines.get(o+h*c)?.isWrapped&&n++}return n}function Vi(e,t){let r=0,n=t.buffer.lines.get(e),o=n?.isWrapped;for(;o&&e>=0&&e<t.rows;)r++,n=t.buffer.lines.get(--e),o=n?.isWrapped;return r}function g2(e,t,r,n,o,l){let c;return nl(r,n,o,l).length>0?c=n-Vi(n,o):c=t,e<r&&c<=n||e>=r&&c<n?"C":"D"}function Iv(e,t){return e>t?"A":"B"}function Av(e,t,r,n,o,l){let c=e,h=t,p="";for(;(c!==r||h!==n)&&h>=0&&h<l.buffer.lines.length;)c+=o?1:-1,o&&c>l.cols-1?(p+=l.buffer.translateBufferLineToString(h,!1,e,c),c=0,e=0,h++):!o&&c<0&&(p+=l.buffer.translateBufferLineToString(h,!1,0,e+1),c=l.cols-1,e=c,h--);return p+l.buffer.translateBufferLineToString(h,!1,e,c)}function Yn(e,t){let r=t?"O":"[";return q.ESC+r+e}function Gn(e,t){e=Math.floor(e);let r="";for(let n=0;n<e;n++)r+=t;return r}var _2=class{constructor(e){this._bufferService=e,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:!this.selectionEnd||!this.selectionStart?this.selectionStart:this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?e%this._bufferService.cols===0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)-1]:[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[e,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[Math.max(e,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let e=this.selectionStart,t=this.selectionEnd;return!e||!t?!1:e[1]>t[1]||e[1]===t[1]&&e[0]>t[0]}handleTrim(e){return this.selectionStart&&(this.selectionStart[1]-=e),this.selectionEnd&&(this.selectionEnd[1]-=e),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}};function vg(e,t){if(e.start.y>e.end.y)throw new Error(`Buffer range end (${e.end.x}, ${e.end.y}) cannot be before start (${e.start.x}, ${e.start.y})`);return t*(e.end.y-e.start.y)+(e.end.x-e.start.x+1)}var Cu=50,v2=15,y2=50,S2=500,w2="",x2=new RegExp(w2,"g"),_h=class extends be{constructor(e,t,r,n,o,l,c,h,p){super(),this._element=e,this._screenElement=t,this._linkifier=r,this._bufferService=n,this._coreService=o,this._mouseService=l,this._optionsService=c,this._renderService=h,this._coreBrowserService=p,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new sr,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this._register(new se),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this._register(new se),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this._register(new se),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this._register(new se),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=d=>this._handleMouseMove(d),this._mouseUpListener=d=>this._handleMouseUp(d),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(d=>this._handleTrim(d)),this._register(this._bufferService.buffers.onBufferActivate(d=>this._handleBufferActivate(d))),this.enable(),this._model=new _2(this._bufferService),this._activeSelectionMode=0,this._register(ze(()=>{this._removeMouseDownListeners()})),this._register(this._bufferService.onResize(d=>{d.rowsChanged&&this.clearSelection()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;return!e||!t?!1:e[0]!==t[0]||e[1]!==t[1]}get selectionText(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;if(!e||!t)return"";let r=this._bufferService.buffer,n=[];if(this._activeSelectionMode===3){if(e[0]===t[0])return"";let o=e[0]<t[0]?e[0]:t[0],l=e[0]<t[0]?t[0]:e[0];for(let c=e[1];c<=t[1];c++){let h=r.translateBufferLineToString(c,!0,o,l);n.push(h)}}else{let o=e[1]===t[1]?t[0]:void 0;n.push(r.translateBufferLineToString(e[1],!0,e[0],o));for(let l=e[1]+1;l<=t[1]-1;l++){let c=r.lines.get(l),h=r.translateBufferLineToString(l,!0);c?.isWrapped?n[n.length-1]+=h:n.push(h)}if(e[1]!==t[1]){let l=r.lines.get(t[1]),c=r.translateBufferLineToString(t[1],!0,0,t[0]);l&&l.isWrapped?n[n.length-1]+=c:n.push(c)}}return n.map(o=>o.replace(x2," ")).join(Tv?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(e){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),ed&&e&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(e){let t=this._getMouseBufferCoords(e),r=this._model.finalSelectionStart,n=this._model.finalSelectionEnd;return!r||!n||!t?!1:this._areCoordsInSelection(t,r,n)}isCellInSelection(e,t){let r=this._model.finalSelectionStart,n=this._model.finalSelectionEnd;return!r||!n?!1:this._areCoordsInSelection([e,t],r,n)}_areCoordsInSelection(e,t,r){return e[1]>t[1]&&e[1]<r[1]||t[1]===r[1]&&e[1]===t[1]&&e[0]>=t[0]&&e[0]<r[0]||t[1]<r[1]&&e[1]===r[1]&&e[0]<r[0]||t[1]<r[1]&&e[1]===t[1]&&e[0]>=t[0]}_selectWordAtCursor(e,t){let r=this._linkifier.currentLink?.link?.range;if(r)return this._model.selectionStart=[r.start.x-1,r.start.y-1],this._model.selectionStartLength=vg(r,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let n=this._getMouseBufferCoords(e);return n?(this._selectWordAt(n,t),this._model.selectionEnd=void 0,!0):!1}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(e,t){this._model.clearSelection(),e=Math.max(e,0),t=Math.min(t,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._bufferService.cols,t],this.refresh(),this._onSelectionChange.fire()}_handleTrim(e){this._model.handleTrim(e)&&this.refresh()}_getMouseBufferCoords(e){let t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(t)return t[0]--,t[1]--,t[1]+=this._bufferService.buffer.ydisp,t}_getMouseEventScrollAmount(e){let t=Zh(this._coreBrowserService.window,e,this._screenElement)[1],r=this._renderService.dimensions.css.canvas.height;return t>=0&&t<=r?0:(t>r&&(t-=r),t=Math.min(Math.max(t,-Cu),Cu),t/=Cu,t/Math.abs(t)+Math.round(t*(v2-1)))}shouldForceSelection(e){return Qa?e.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:e.shiftKey}handleMouseDown(e){if(this._mouseDownTimeStamp=e.timeStamp,!(e.button===2&&this.hasSelection)&&e.button===0){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._handleIncrementalClick(e):e.detail===1?this._handleSingleClick(e):e.detail===2?this._handleDoubleClick(e):e.detail===3&&this._handleTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),y2)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))}_handleSingleClick(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?3:0,this._model.selectionStart=this._getMouseBufferCoords(e),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let t=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);t&&t.length!==this._model.selectionStart[0]&&t.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(e){this._selectWordAtCursor(e,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(e){let t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=2,this._selectLineAt(t[1]))}shouldColumnSelect(e){return e.altKey&&!(Qa&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(e){if(e.stopImmediatePropagation(),!this._model.selectionStart)return;let t=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),!this._model.selectionEnd){this.refresh(!0);return}this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let r=this._bufferService.buffer;if(this._model.selectionEnd[1]<r.lines.length){let n=r.lines.get(this._model.selectionEnd[1]);n&&n.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}(!t||t[0]!==this._model.selectionEnd[0]||t[1]!==this._model.selectionEnd[1])&&this.refresh(!0)}_dragScroll(){if(!(!this._model.selectionEnd||!this._model.selectionStart)&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let e=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(e.ydisp+this._bufferService.rows,e.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=e.ydisp),this.refresh()}}_handleMouseUp(e){let t=e.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&t<S2&&e.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let r=this._mouseService.getCoords(e,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(r&&r[0]!==void 0&&r[1]!==void 0){let n=u2(r[0]-1,r[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(n,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd,r=!!e&&!!t&&(e[0]!==t[0]||e[1]!==t[1]);if(!r){this._oldHasSelection&&this._fireOnSelectionChange(e,t,r);return}!e||!t||(!this._oldSelectionStart||!this._oldSelectionEnd||e[0]!==this._oldSelectionStart[0]||e[1]!==this._oldSelectionStart[1]||t[0]!==this._oldSelectionEnd[0]||t[1]!==this._oldSelectionEnd[1])&&this._fireOnSelectionChange(e,t,r)}_fireOnSelectionChange(e,t,r){this._oldSelectionStart=e,this._oldSelectionEnd=t,this._oldHasSelection=r,this._onSelectionChange.fire()}_handleBufferActivate(e){this.clearSelection(),this._trimListener.dispose(),this._trimListener=e.activeBuffer.lines.onTrim(t=>this._handleTrim(t))}_convertViewportColToCharacterIndex(e,t){let r=t;for(let n=0;t>=n;n++){let o=e.loadCell(n,this._workCell).getChars().length;this._workCell.getWidth()===0?r--:o>1&&t!==n&&(r+=o-1)}return r}setSelection(e,t,r){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,t],this._model.selectionStartLength=r,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(e){this._isClickInSelection(e)||(this._selectWordAtCursor(e,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(e,t,r=!0,n=!0){if(e[0]>=this._bufferService.cols)return;let o=this._bufferService.buffer,l=o.lines.get(e[1]);if(!l)return;let c=o.translateBufferLineToString(e[1],!1),h=this._convertViewportColToCharacterIndex(l,e[0]),p=h,d=e[0]-h,v=0,_=0,S=0,x=0;if(c.charAt(h)===" "){for(;h>0&&c.charAt(h-1)===" ";)h--;for(;p<c.length&&c.charAt(p+1)===" ";)p++}else{let E=e[0],M=e[0];l.getWidth(E)===0&&(v++,E--),l.getWidth(M)===2&&(_++,M++);let B=l.getString(M).length;for(B>1&&(x+=B-1,p+=B-1);E>0&&h>0&&!this._isCharWordSeparator(l.loadCell(E-1,this._workCell));){l.loadCell(E-1,this._workCell);let W=this._workCell.getChars().length;this._workCell.getWidth()===0?(v++,E--):W>1&&(S+=W-1,h-=W-1),h--,E--}for(;M<l.length&&p+1<c.length&&!this._isCharWordSeparator(l.loadCell(M+1,this._workCell));){l.loadCell(M+1,this._workCell);let W=this._workCell.getChars().length;this._workCell.getWidth()===2?(_++,M++):W>1&&(x+=W-1,p+=W-1),p++,M++}}p++;let w=h+d-v+S,b=Math.min(this._bufferService.cols,p-h+v+_-S-x);if(!(!t&&c.slice(h,p).trim()==="")){if(r&&w===0&&l.getCodePoint(0)!==32){let E=o.lines.get(e[1]-1);if(E&&l.isWrapped&&E.getCodePoint(this._bufferService.cols-1)!==32){let M=this._getWordAt([this._bufferService.cols-1,e[1]-1],!1,!0,!1);if(M){let B=this._bufferService.cols-M.start;w-=B,b+=B}}}if(n&&w+b===this._bufferService.cols&&l.getCodePoint(this._bufferService.cols-1)!==32){let E=o.lines.get(e[1]+1);if(E?.isWrapped&&E.getCodePoint(0)!==32){let M=this._getWordAt([0,e[1]+1],!1,!1,!0);M&&(b+=M.length)}}return{start:w,length:b}}}_selectWordAt(e,t){let r=this._getWordAt(e,t);if(r){for(;r.start<0;)r.start+=this._bufferService.cols,e[1]--;this._model.selectionStart=[r.start,e[1]],this._model.selectionStartLength=r.length}}_selectToWordAt(e){let t=this._getWordAt(e,!0);if(t){let r=e[1];for(;t.start<0;)t.start+=this._bufferService.cols,r--;if(!this._model.areSelectionValuesReversed())for(;t.start+t.length>this._bufferService.cols;)t.length-=this._bufferService.cols,r++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?t.start:t.start+t.length,r]}}_isCharWordSeparator(e){return e.getWidth()===0?!1:this._optionsService.rawOptions.wordSeparator.indexOf(e.getChars())>=0}_selectLineAt(e){let t=this._bufferService.buffer.getWrappedRangeForLine(e),r={start:{x:0,y:t.first},end:{x:this._bufferService.cols-1,y:t.last}};this._model.selectionStart=[0,t.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=vg(r,this._bufferService.cols)}};_h=Qe([oe(3,Nt),oe(4,Qi),oe(5,Vh),oe(6,Lt),oe(7,Vr),oe(8,Kr)],_h);var yg=class{constructor(){this._data={}}set(e,t,r){this._data[e]||(this._data[e]={}),this._data[e][t]=r}get(e,t){return this._data[e]?this._data[e][t]:void 0}clear(){this._data={}}},Sg=class{constructor(){this._color=new yg,this._css=new yg}setCss(e,t,r){this._css.set(e,t,r)}getCss(e,t){return this._css.get(e,t)}setColor(e,t,r){this._color.set(e,t,r)}getColor(e,t){return this._color.get(e,t)}clear(){this._color.clear(),this._css.clear()}},it=Object.freeze((()=>{let e=[Ue.toColor("#2e3436"),Ue.toColor("#cc0000"),Ue.toColor("#4e9a06"),Ue.toColor("#c4a000"),Ue.toColor("#3465a4"),Ue.toColor("#75507b"),Ue.toColor("#06989a"),Ue.toColor("#d3d7cf"),Ue.toColor("#555753"),Ue.toColor("#ef2929"),Ue.toColor("#8ae234"),Ue.toColor("#fce94f"),Ue.toColor("#729fcf"),Ue.toColor("#ad7fa8"),Ue.toColor("#34e2e2"),Ue.toColor("#eeeeec")],t=[0,95,135,175,215,255];for(let r=0;r<216;r++){let n=t[r/36%6|0],o=t[r/6%6|0],l=t[r%6];e.push({css:et.toCss(n,o,l),rgba:et.toRgba(n,o,l)})}for(let r=0;r<24;r++){let n=8+r*10;e.push({css:et.toCss(n,n,n),rgba:et.toRgba(n,n,n)})}return e})()),Bi=Ue.toColor("#ffffff"),Mn=Ue.toColor("#000000"),wg=Ue.toColor("#ffffff"),xg=Mn,En={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117},b2=Bi,vh=class extends be{constructor(e){super(),this._optionsService=e,this._contrastCache=new Sg,this._halfContrastCache=new Sg,this._onChangeColors=this._register(new se),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:Bi,background:Mn,cursor:wg,cursorAccent:xg,selectionForeground:void 0,selectionBackgroundTransparent:En,selectionBackgroundOpaque:Ie.blend(Mn,En),selectionInactiveBackgroundTransparent:En,selectionInactiveBackgroundOpaque:Ie.blend(Mn,En),scrollbarSliderBackground:Ie.opacity(Bi,.2),scrollbarSliderHoverBackground:Ie.opacity(Bi,.4),scrollbarSliderActiveBackground:Ie.opacity(Bi,.5),overviewRulerBorder:Bi,ansi:it.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this._register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this._register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(e={}){let t=this._colors;if(t.foreground=Oe(e.foreground,Bi),t.background=Oe(e.background,Mn),t.cursor=Ie.blend(t.background,Oe(e.cursor,wg)),t.cursorAccent=Ie.blend(t.background,Oe(e.cursorAccent,xg)),t.selectionBackgroundTransparent=Oe(e.selectionBackground,En),t.selectionBackgroundOpaque=Ie.blend(t.background,t.selectionBackgroundTransparent),t.selectionInactiveBackgroundTransparent=Oe(e.selectionInactiveBackground,t.selectionBackgroundTransparent),t.selectionInactiveBackgroundOpaque=Ie.blend(t.background,t.selectionInactiveBackgroundTransparent),t.selectionForeground=e.selectionForeground?Oe(e.selectionForeground,mg):void 0,t.selectionForeground===mg&&(t.selectionForeground=void 0),Ie.isOpaque(t.selectionBackgroundTransparent)&&(t.selectionBackgroundTransparent=Ie.opacity(t.selectionBackgroundTransparent,.3)),Ie.isOpaque(t.selectionInactiveBackgroundTransparent)&&(t.selectionInactiveBackgroundTransparent=Ie.opacity(t.selectionInactiveBackgroundTransparent,.3)),t.scrollbarSliderBackground=Oe(e.scrollbarSliderBackground,Ie.opacity(t.foreground,.2)),t.scrollbarSliderHoverBackground=Oe(e.scrollbarSliderHoverBackground,Ie.opacity(t.foreground,.4)),t.scrollbarSliderActiveBackground=Oe(e.scrollbarSliderActiveBackground,Ie.opacity(t.foreground,.5)),t.overviewRulerBorder=Oe(e.overviewRulerBorder,b2),t.ansi=it.slice(),t.ansi[0]=Oe(e.black,it[0]),t.ansi[1]=Oe(e.red,it[1]),t.ansi[2]=Oe(e.green,it[2]),t.ansi[3]=Oe(e.yellow,it[3]),t.ansi[4]=Oe(e.blue,it[4]),t.ansi[5]=Oe(e.magenta,it[5]),t.ansi[6]=Oe(e.cyan,it[6]),t.ansi[7]=Oe(e.white,it[7]),t.ansi[8]=Oe(e.brightBlack,it[8]),t.ansi[9]=Oe(e.brightRed,it[9]),t.ansi[10]=Oe(e.brightGreen,it[10]),t.ansi[11]=Oe(e.brightYellow,it[11]),t.ansi[12]=Oe(e.brightBlue,it[12]),t.ansi[13]=Oe(e.brightMagenta,it[13]),t.ansi[14]=Oe(e.brightCyan,it[14]),t.ansi[15]=Oe(e.brightWhite,it[15]),e.extendedAnsi){let r=Math.min(t.ansi.length-16,e.extendedAnsi.length);for(let n=0;n<r;n++)t.ansi[n+16]=Oe(e.extendedAnsi[n],it[n+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(e){this._restoreColor(e),this._onChangeColors.fire(this.colors)}_restoreColor(e){if(e===void 0){for(let t=0;t<this._restoreColors.ansi.length;++t)this._colors.ansi[t]=this._restoreColors.ansi[t];return}switch(e){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[e]=this._restoreColors.ansi[e]}}modifyColors(e){e(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};vh=Qe([oe(0,Lt)],vh);function Oe(e,t){if(e!==void 0)try{return Ue.toColor(e)}catch{}return t}var C2=class{constructor(...e){this._entries=new Map;for(let[t,r]of e)this.set(t,r)}set(e,t){let r=this._entries.get(e);return this._entries.set(e,t),r}forEach(e){for(let[t,r]of this._entries.entries())e(t,r)}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}},k2=class{constructor(){this._services=new C2,this._services.set(Kh,this)}setService(e,t){this._services.set(e,t)}getService(e){return this._services.get(e)}createInstance(e,...t){let r=vC(e).sort((l,c)=>l.index-c.index),n=[];for(let l of r){let c=this._services.get(l.id);if(!c)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${l.id._id}.`);n.push(c)}let o=r.length>0?r[0].index:t.length;if(t.length!==o)throw new Error(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);return new e(...t,...n)}},E2={trace:0,debug:1,info:2,warn:3,error:4,off:5},P2="xterm.js: ",yh=class extends be{constructor(e){super(),this._optionsService=e,this._logLevel=5,this._updateLogLevel(),this._register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}get logLevel(){return this._logLevel}_updateLogLevel(){this._logLevel=E2[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(e){for(let t=0;t<e.length;t++)typeof e[t]=="function"&&(e[t]=e[t]())}_log(e,t,r){this._evalLazyOptionalParams(r),e.call(console,(this._optionsService.options.logger?"":P2)+t,...r)}trace(e,...t){this._logLevel<=0&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,e,t)}debug(e,...t){this._logLevel<=1&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,e,t)}info(e,...t){this._logLevel<=2&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,e,t)}warn(e,...t){this._logLevel<=3&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,e,t)}error(e,...t){this._logLevel<=4&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,e,t)}};yh=Qe([oe(0,Lt)],yh);var bg=class extends be{constructor(e){super(),this._maxLength=e,this.onDeleteEmitter=this._register(new se),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this._register(new se),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this._register(new se),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(e){if(this._maxLength===e)return;let t=new Array(e);for(let r=0;r<Math.min(e,this.length);r++)t[r]=this._array[this._getCyclicIndex(r)];this._array=t,this._maxLength=e,this._startIndex=0}get length(){return this._length}set length(e){if(e>this._length)for(let t=this._length;t<e;t++)this._array[t]=void 0;this._length=e}get(e){return this._array[this._getCyclicIndex(e)]}set(e,t){this._array[this._getCyclicIndex(e)]=t}push(e){this._array[this._getCyclicIndex(this._length)]=e,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(e,t,...r){if(t){for(let n=e;n<this._length-t;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+t)];this._length-=t,this.onDeleteEmitter.fire({index:e,amount:t})}for(let n=this._length-1;n>=e;n--)this._array[this._getCyclicIndex(n+r.length)]=this._array[this._getCyclicIndex(n)];for(let n=0;n<r.length;n++)this._array[this._getCyclicIndex(e+n)]=r[n];if(r.length&&this.onInsertEmitter.fire({index:e,amount:r.length}),this._length+r.length>this._maxLength){let n=this._length+r.length-this._maxLength;this._startIndex+=n,this._length=this._maxLength,this.onTrimEmitter.fire(n)}else this._length+=r.length}trimStart(e){e>this._length&&(e=this._length),this._startIndex+=e,this._length-=e,this.onTrimEmitter.fire(e)}shiftElements(e,t,r){if(!(t<=0)){if(e<0||e>=this._length)throw new Error("start argument out of range");if(e+r<0)throw new Error("Cannot shift elements in list beyond index 0");if(r>0){for(let o=t-1;o>=0;o--)this.set(e+o+r,this.get(e+o));let n=e+t+r-this._length;if(n>0)for(this._length+=n;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let n=0;n<t;n++)this.set(e+n+r,this.get(e+n))}}_getCyclicIndex(e){return(this._startIndex+e)%this._maxLength}},xe=3,Ze=Object.freeze(new ro),Ea=0,ku=2,On=class Fv{constructor(t,r,n=!1){this.isWrapped=n,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(t*xe);let o=r||sr.fromCharData([0,sv,1,0]);for(let l=0;l<t;++l)this.setCell(l,o);this.length=t}get(t){let r=this._data[t*xe+0],n=r&2097151;return[this._data[t*xe+1],r&2097152?this._combined[t]:n?mi(n):"",r>>22,r&2097152?this._combined[t].charCodeAt(this._combined[t].length-1):n]}set(t,r){this._data[t*xe+1]=r[0],r[1].length>1?(this._combined[t]=r[1],this._data[t*xe+0]=t|2097152|r[2]<<22):this._data[t*xe+0]=r[1].charCodeAt(0)|r[2]<<22}getWidth(t){return this._data[t*xe+0]>>22}hasWidth(t){return this._data[t*xe+0]&12582912}getFg(t){return this._data[t*xe+1]}getBg(t){return this._data[t*xe+2]}hasContent(t){return this._data[t*xe+0]&4194303}getCodePoint(t){let r=this._data[t*xe+0];return r&2097152?this._combined[t].charCodeAt(this._combined[t].length-1):r&2097151}isCombined(t){return this._data[t*xe+0]&2097152}getString(t){let r=this._data[t*xe+0];return r&2097152?this._combined[t]:r&2097151?mi(r&2097151):""}isProtected(t){return this._data[t*xe+2]&536870912}loadCell(t,r){return Ea=t*xe,r.content=this._data[Ea+0],r.fg=this._data[Ea+1],r.bg=this._data[Ea+2],r.content&2097152&&(r.combinedData=this._combined[t]),r.bg&268435456&&(r.extended=this._extendedAttrs[t]),r}setCell(t,r){r.content&2097152&&(this._combined[t]=r.combinedData),r.bg&268435456&&(this._extendedAttrs[t]=r.extended),this._data[t*xe+0]=r.content,this._data[t*xe+1]=r.fg,this._data[t*xe+2]=r.bg}setCellFromCodepoint(t,r,n,o){o.bg&268435456&&(this._extendedAttrs[t]=o.extended),this._data[t*xe+0]=r|n<<22,this._data[t*xe+1]=o.fg,this._data[t*xe+2]=o.bg}addCodepointToCell(t,r,n){let o=this._data[t*xe+0];o&2097152?this._combined[t]+=mi(r):o&2097151?(this._combined[t]=mi(o&2097151)+mi(r),o&=-2097152,o|=2097152):o=r|1<<22,n&&(o&=-12582913,o|=n<<22),this._data[t*xe+0]=o}insertCells(t,r,n){if(t%=this.length,t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,n),r<this.length-t){let o=new sr;for(let l=this.length-t-r-1;l>=0;--l)this.setCell(t+r+l,this.loadCell(t+l,o));for(let l=0;l<r;++l)this.setCell(t+l,n)}else for(let o=t;o<this.length;++o)this.setCell(o,n);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,n)}deleteCells(t,r,n){if(t%=this.length,r<this.length-t){let o=new sr;for(let l=0;l<this.length-t-r;++l)this.setCell(t+l,this.loadCell(t+r+l,o));for(let l=this.length-r;l<this.length;++l)this.setCell(l,n)}else for(let o=t;o<this.length;++o)this.setCell(o,n);t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,n),this.getWidth(t)===0&&!this.hasContent(t)&&this.setCellFromCodepoint(t,0,1,n)}replaceCells(t,r,n,o=!1){if(o){for(t&&this.getWidth(t-1)===2&&!this.isProtected(t-1)&&this.setCellFromCodepoint(t-1,0,1,n),r<this.length&&this.getWidth(r-1)===2&&!this.isProtected(r)&&this.setCellFromCodepoint(r,0,1,n);t<r&&t<this.length;)this.isProtected(t)||this.setCell(t,n),t++;return}for(t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,n),r<this.length&&this.getWidth(r-1)===2&&this.setCellFromCodepoint(r,0,1,n);t<r&&t<this.length;)this.setCell(t++,n)}resize(t,r){if(t===this.length)return this._data.length*4*ku<this._data.buffer.byteLength;let n=t*xe;if(t>this.length){if(this._data.buffer.byteLength>=n*4)this._data=new Uint32Array(this._data.buffer,0,n);else{let o=new Uint32Array(n);o.set(this._data),this._data=o}for(let o=this.length;o<t;++o)this.setCell(o,r)}else{this._data=this._data.subarray(0,n);let o=Object.keys(this._combined);for(let c=0;c<o.length;c++){let h=parseInt(o[c],10);h>=t&&delete this._combined[h]}let l=Object.keys(this._extendedAttrs);for(let c=0;c<l.length;c++){let h=parseInt(l[c],10);h>=t&&delete this._extendedAttrs[h]}}return this.length=t,n*4*ku<this._data.buffer.byteLength}cleanupMemory(){if(this._data.length*4*ku<this._data.buffer.byteLength){let t=new Uint32Array(this._data.length);return t.set(this._data),this._data=t,1}return 0}fill(t,r=!1){if(r){for(let n=0;n<this.length;++n)this.isProtected(n)||this.setCell(n,t);return}this._combined={},this._extendedAttrs={};for(let n=0;n<this.length;++n)this.setCell(n,t)}copyFrom(t){this.length!==t.length?this._data=new Uint32Array(t._data):this._data.set(t._data),this.length=t.length,this._combined={};for(let r in t._combined)this._combined[r]=t._combined[r];this._extendedAttrs={};for(let r in t._extendedAttrs)this._extendedAttrs[r]=t._extendedAttrs[r];this.isWrapped=t.isWrapped}clone(){let t=new Fv(0);t._data=new Uint32Array(this._data),t.length=this.length;for(let r in this._combined)t._combined[r]=this._combined[r];for(let r in this._extendedAttrs)t._extendedAttrs[r]=this._extendedAttrs[r];return t.isWrapped=this.isWrapped,t}getTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(this._data[t*xe+0]&4194303)return t+(this._data[t*xe+0]>>22);return 0}getNoBgTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(this._data[t*xe+0]&4194303||this._data[t*xe+2]&50331648)return t+(this._data[t*xe+0]>>22);return 0}copyCellsFrom(t,r,n,o,l){let c=t._data;if(l)for(let p=o-1;p>=0;p--){for(let d=0;d<xe;d++)this._data[(n+p)*xe+d]=c[(r+p)*xe+d];c[(r+p)*xe+2]&268435456&&(this._extendedAttrs[n+p]=t._extendedAttrs[r+p])}else for(let p=0;p<o;p++){for(let d=0;d<xe;d++)this._data[(n+p)*xe+d]=c[(r+p)*xe+d];c[(r+p)*xe+2]&268435456&&(this._extendedAttrs[n+p]=t._extendedAttrs[r+p])}let h=Object.keys(t._combined);for(let p=0;p<h.length;p++){let d=parseInt(h[p],10);d>=r&&(this._combined[d-r+n]=t._combined[d])}}translateToString(t,r,n,o){r=r??0,n=n??this.length,t&&(n=Math.min(n,this.getTrimmedLength())),o&&(o.length=0);let l="";for(;r<n;){let c=this._data[r*xe+0],h=c&2097151,p=c&2097152?this._combined[r]:h?mi(h):gi;if(l+=p,o)for(let d=0;d<p.length;++d)o.push(r);r+=c>>22||1}return o&&o.push(r),l}};function R2(e,t,r,n,o,l){let c=[];for(let h=0;h<e.length-1;h++){let p=h,d=e.get(++p);if(!d.isWrapped)continue;let v=[e.get(h)];for(;p<e.length&&d.isWrapped;)v.push(d),d=e.get(++p);if(!l&&n>=h&&n<p){h+=v.length-1;continue}let _=0,S=Xn(v,_,t),x=1,w=0;for(;x<v.length;){let E=Xn(v,x,t),M=E-w,B=r-S,W=Math.min(M,B);v[_].copyCellsFrom(v[x],w,S,W,!1),S+=W,S===r&&(_++,S=0),w+=W,w===E&&(x++,w=0),S===0&&_!==0&&v[_-1].getWidth(r-1)===2&&(v[_].copyCellsFrom(v[_-1],r-1,S++,1,!1),v[_-1].setCell(r-1,o))}v[_].replaceCells(S,r,o);let b=0;for(let E=v.length-1;E>0&&(E>_||v[E].getTrimmedLength()===0);E--)b++;b>0&&(c.push(h+v.length-b),c.push(b)),h+=v.length-1}return c}function N2(e,t){let r=[],n=0,o=t[n],l=0;for(let c=0;c<e.length;c++)if(o===c){let h=t[++n];e.onDeleteEmitter.fire({index:c-l,amount:h}),c+=h-1,l+=h,o=t[++n]}else r.push(c);return{layout:r,countRemoved:l}}function L2(e,t){let r=[];for(let n=0;n<t.length;n++)r.push(e.get(t[n]));for(let n=0;n<r.length;n++)e.set(n,r[n]);e.length=t.length}function D2(e,t,r){let n=[],o=e.map((p,d)=>Xn(e,d,t)).reduce((p,d)=>p+d),l=0,c=0,h=0;for(;h<o;){if(o-h<r){n.push(o-h);break}l+=r;let p=Xn(e,c,t);l>p&&(l-=p,c++);let d=e[c].getWidth(l-1)===2;d&&l--;let v=d?r-1:r;n.push(v),h+=v}return n}function Xn(e,t,r){if(t===e.length-1)return e[t].getTrimmedLength();let n=!e[t].hasContent(r-1)&&e[t].getWidth(r-1)===1,o=e[t+1].getWidth(0)===2;return n&&o?r-1:r}var zv=class Hv{constructor(t){this.line=t,this.isDisposed=!1,this._disposables=[],this._id=Hv._nextId++,this._onDispose=this.register(new se),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),Ki(this._disposables),this._disposables.length=0)}register(t){return this._disposables.push(t),t}};zv._nextId=1;var M2=zv,ot={},Ii=ot.B;ot[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""};ot.A={"#":""};ot.B=void 0;ot[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""};ot.C=ot[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};ot.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};ot.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};ot.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};ot.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""};ot.E=ot[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};ot.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""};ot.H=ot[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};ot["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""};var Cg=4294967295,kg=class{constructor(e,t,r){this._hasScrollback=e,this._optionsService=t,this._bufferService=r,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=Ze.clone(),this.savedCharset=Ii,this.markers=[],this._nullCell=sr.fromCharData([0,sv,1,0]),this._whitespaceCell=sr.fromCharData([0,gi,1,32]),this._isClearing=!1,this._memoryCleanupQueue=new Ya,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new bg(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new Ka),this._nullCell}getWhitespaceCell(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new Ka),this._whitespaceCell}getBlankLine(e,t){return new On(this._bufferService.cols,this.getNullCell(e),t)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows}_getCorrectBufferLength(e){if(!this._hasScrollback)return e;let t=e+this._optionsService.rawOptions.scrollback;return t>Cg?Cg:t}fillViewportRows(e){if(this.lines.length===0){e===void 0&&(e=Ze);let t=this._rows;for(;t--;)this.lines.push(this.getBlankLine(e))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new bg(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(e,t){let r=this.getNullCell(Ze),n=0,o=this._getCorrectBufferLength(t);if(o>this.lines.maxLength&&(this.lines.maxLength=o),this.lines.length>0){if(this._cols<e)for(let c=0;c<this.lines.length;c++)n+=+this.lines.get(c).resize(e,r);let l=0;if(this._rows<t)for(let c=this._rows;c<t;c++)this.lines.length<t+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new On(e,r)):this.ybase>0&&this.lines.length<=this.ybase+this.y+l+1?(this.ybase--,l++,this.ydisp>0&&this.ydisp--):this.lines.push(new On(e,r)));else for(let c=this._rows;c>t;c--)this.lines.length>t+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(o<this.lines.maxLength){let c=this.lines.length-o;c>0&&(this.lines.trimStart(c),this.ybase=Math.max(this.ybase-c,0),this.ydisp=Math.max(this.ydisp-c,0),this.savedY=Math.max(this.savedY-c,0)),this.lines.maxLength=o}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,t-1),l&&(this.y+=l),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=t-1,this._isReflowEnabled&&(this._reflow(e,t),this._cols>e))for(let l=0;l<this.lines.length;l++)n+=+this.lines.get(l).resize(e,r);this._cols=e,this._rows=t,this._memoryCleanupQueue.clear(),n>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let e=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,e=!1);let t=0;for(;this._memoryCleanupPosition<this.lines.length;)if(t+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),t>100)return!0;return e}get _isReflowEnabled(){let e=this._optionsService.rawOptions.windowsPty;return e&&e.buildNumber?this._hasScrollback&&e.backend==="conpty"&&e.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(e,t){this._cols!==e&&(e>this._cols?this._reflowLarger(e,t):this._reflowSmaller(e,t))}_reflowLarger(e,t){let r=this._optionsService.rawOptions.reflowCursorLine,n=R2(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(Ze),r);if(n.length>0){let o=N2(this.lines,n);L2(this.lines,o.layout),this._reflowLargerAdjustViewport(e,t,o.countRemoved)}}_reflowLargerAdjustViewport(e,t,r){let n=this.getNullCell(Ze),o=r;for(;o-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<t&&this.lines.push(new On(e,n))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-r,0)}_reflowSmaller(e,t){let r=this._optionsService.rawOptions.reflowCursorLine,n=this.getNullCell(Ze),o=[],l=0;for(let c=this.lines.length-1;c>=0;c--){let h=this.lines.get(c);if(!h||!h.isWrapped&&h.getTrimmedLength()<=e)continue;let p=[h];for(;h.isWrapped&&c>0;)h=this.lines.get(--c),p.unshift(h);if(!r){let W=this.ybase+this.y;if(W>=c&&W<c+p.length)continue}let d=p[p.length-1].getTrimmedLength(),v=D2(p,this._cols,e),_=v.length-p.length,S;this.ybase===0&&this.y!==this.lines.length-1?S=Math.max(0,this.y-this.lines.maxLength+_):S=Math.max(0,this.lines.length-this.lines.maxLength+_);let x=[];for(let W=0;W<_;W++){let A=this.getBlankLine(Ze,!0);x.push(A)}x.length>0&&(o.push({start:c+p.length+l,newLines:x}),l+=x.length),p.push(...x);let w=v.length-1,b=v[w];b===0&&(w--,b=v[w]);let E=p.length-_-1,M=d;for(;E>=0;){let W=Math.min(M,b);if(p[w]===void 0)break;if(p[w].copyCellsFrom(p[E],M-W,b-W,W,!0),b-=W,b===0&&(w--,b=v[w]),M-=W,M===0){E--;let A=Math.max(E,0);M=Xn(p,A,this._cols)}}for(let W=0;W<p.length;W++)v[W]<e&&p[W].setCell(v[W],n);let B=_-S;for(;B-- >0;)this.ybase===0?this.y<t-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+l)-t&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+_,this.ybase+t-1)}if(o.length>0){let c=[],h=[];for(let b=0;b<this.lines.length;b++)h.push(this.lines.get(b));let p=this.lines.length,d=p-1,v=0,_=o[v];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+l);let S=0;for(let b=Math.min(this.lines.maxLength-1,p+l-1);b>=0;b--)if(_&&_.start>d+S){for(let E=_.newLines.length-1;E>=0;E--)this.lines.set(b--,_.newLines[E]);b++,c.push({index:d+1,amount:_.newLines.length}),S+=_.newLines.length,_=o[++v]}else this.lines.set(b,h[d--]);let x=0;for(let b=c.length-1;b>=0;b--)c[b].index+=x,this.lines.onInsertEmitter.fire(c[b]),x+=c[b].amount;let w=Math.max(0,p+l-this.lines.maxLength);w>0&&this.lines.onTrimEmitter.fire(w)}}translateBufferLineToString(e,t,r=0,n){let o=this.lines.get(e);return o?o.translateToString(t,r,n):""}getWrappedRangeForLine(e){let t=e,r=e;for(;t>0&&this.lines.get(t).isWrapped;)t--;for(;r+1<this.lines.length&&this.lines.get(r+1).isWrapped;)r++;return{first:t,last:r}}setupTabStops(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0}prevStop(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e}nextStop(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e}clearMarkers(e){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].line===e&&(this.markers[t].dispose(),this.markers.splice(t--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].dispose();this.markers.length=0,this._isClearing=!1}addMarker(e){let t=new M2(e);return this.markers.push(t),t.register(this.lines.onTrim(r=>{t.line-=r,t.line<0&&t.dispose()})),t.register(this.lines.onInsert(r=>{t.line>=r.index&&(t.line+=r.amount)})),t.register(this.lines.onDelete(r=>{t.line>=r.index&&t.line<r.index+r.amount&&t.dispose(),t.line>r.index&&(t.line-=r.amount)})),t.register(t.onDispose(()=>this._removeMarker(t))),t}_removeMarker(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)}},O2=class extends be{constructor(e,t){super(),this._optionsService=e,this._bufferService=t,this._onBufferActivate=this._register(new se),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this._register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this._register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new kg(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new kg(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(e,t){this._normal.resize(e,t),this._alt.resize(e,t),this.setupTabStops(e)}setupTabStops(e){this._normal.setupTabStops(e),this._alt.setupTabStops(e)}},$v=2,Wv=1,Sh=class extends be{constructor(e){super(),this.isUserScrolling=!1,this._onResize=this._register(new se),this.onResize=this._onResize.event,this._onScroll=this._register(new se),this.onScroll=this._onScroll.event,this.cols=Math.max(e.rawOptions.cols||0,$v),this.rows=Math.max(e.rawOptions.rows||0,Wv),this.buffers=this._register(new O2(e,this)),this._register(this.buffers.onBufferActivate(t=>{this._onScroll.fire(t.activeBuffer.ydisp)}))}get buffer(){return this.buffers.active}resize(e,t){let r=this.cols!==e,n=this.rows!==t;this.cols=e,this.rows=t,this.buffers.resize(e,t),this._onResize.fire({cols:e,rows:t,colsChanged:r,rowsChanged:n})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(e,t=!1){let r=this.buffer,n;n=this._cachedBlankLine,(!n||n.length!==this.cols||n.getFg(0)!==e.fg||n.getBg(0)!==e.bg)&&(n=r.getBlankLine(e,t),this._cachedBlankLine=n),n.isWrapped=t;let o=r.ybase+r.scrollTop,l=r.ybase+r.scrollBottom;if(r.scrollTop===0){let c=r.lines.isFull;l===r.lines.length-1?c?r.lines.recycle().copyFrom(n):r.lines.push(n.clone()):r.lines.splice(l+1,0,n.clone()),c?this.isUserScrolling&&(r.ydisp=Math.max(r.ydisp-1,0)):(r.ybase++,this.isUserScrolling||r.ydisp++)}else{let c=l-o+1;r.lines.shiftElements(o+1,c-1,-1),r.lines.set(l,n.clone())}this.isUserScrolling||(r.ydisp=r.ybase),this._onScroll.fire(r.ydisp)}scrollLines(e,t){let r=this.buffer;if(e<0){if(r.ydisp===0)return;this.isUserScrolling=!0}else e+r.ydisp>=r.ybase&&(this.isUserScrolling=!1);let n=r.ydisp;r.ydisp=Math.max(Math.min(r.ydisp+e,r.ybase),0),n!==r.ydisp&&(t||this._onScroll.fire(r.ydisp))}};Sh=Qe([oe(0,Lt)],Sh);var xs={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnEraseInDisplay:!1,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},reflowCursorLine:!1,rescaleOverlappingGlyphs:!1,rightClickSelectsWord:Qa,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRuler:{}},T2=["normal","bold","100","200","300","400","500","600","700","800","900"],j2=class extends be{constructor(e){super(),this._onOptionChange=this._register(new se),this.onOptionChange=this._onOptionChange.event;let t={...xs};for(let r in e)if(r in t)try{let n=e[r];t[r]=this._sanitizeAndValidateOption(r,n)}catch(n){console.error(n)}this.rawOptions=t,this.options={...t},this._setupOptions(),this._register(ze(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(e,t){return this.onOptionChange(r=>{r===e&&t(this.rawOptions[e])})}onMultipleOptionChange(e,t){return this.onOptionChange(r=>{e.indexOf(r)!==-1&&t()})}_setupOptions(){let e=r=>{if(!(r in xs))throw new Error(`No option with key "${r}"`);return this.rawOptions[r]},t=(r,n)=>{if(!(r in xs))throw new Error(`No option with key "${r}"`);n=this._sanitizeAndValidateOption(r,n),this.rawOptions[r]!==n&&(this.rawOptions[r]=n,this._onOptionChange.fire(r))};for(let r in this.rawOptions){let n={get:e.bind(this,r),set:t.bind(this,r)};Object.defineProperty(this.options,r,n)}}_sanitizeAndValidateOption(e,t){switch(e){case"cursorStyle":if(t||(t=xs[e]),!B2(t))throw new Error(`"${t}" is not a valid value for ${e}`);break;case"wordSeparator":t||(t=xs[e]);break;case"fontWeight":case"fontWeightBold":if(typeof t=="number"&&1<=t&&t<=1e3)break;t=T2.includes(t)?t:xs[e];break;case"cursorWidth":t=Math.floor(t);case"lineHeight":case"tabStopWidth":if(t<1)throw new Error(`${e} cannot be less than 1, value: ${t}`);break;case"minimumContrastRatio":t=Math.max(1,Math.min(21,Math.round(t*10)/10));break;case"scrollback":if(t=Math.min(t,4294967295),t<0)throw new Error(`${e} cannot be less than 0, value: ${t}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(t<=0)throw new Error(`${e} cannot be less than or equal to 0, value: ${t}`);break;case"rows":case"cols":if(!t&&t!==0)throw new Error(`${e} must be numeric, value: ${t}`);break;case"windowsPty":t=t??{};break}return t}};function B2(e){return e==="block"||e==="underline"||e==="bar"}function Tn(e,t=5){if(typeof e!="object")return e;let r=Array.isArray(e)?[]:{};for(let n in e)r[n]=t<=1?e[n]:e[n]&&Tn(e[n],t-1);return r}var Eg=Object.freeze({insertMode:!1}),Pg=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,cursorBlink:void 0,cursorStyle:void 0,origin:!1,reverseWraparound:!1,sendFocus:!1,synchronizedOutput:!1,wraparound:!0}),wh=class extends be{constructor(e,t,r){super(),this._bufferService=e,this._logService=t,this._optionsService=r,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this._register(new se),this.onData=this._onData.event,this._onUserInput=this._register(new se),this.onUserInput=this._onUserInput.event,this._onBinary=this._register(new se),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this._register(new se),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=Tn(Eg),this.decPrivateModes=Tn(Pg)}reset(){this.modes=Tn(Eg),this.decPrivateModes=Tn(Pg)}triggerDataEvent(e,t=!1){if(this._optionsService.rawOptions.disableStdin)return;let r=this._bufferService.buffer;t&&this._optionsService.rawOptions.scrollOnUserInput&&r.ybase!==r.ydisp&&this._onRequestScrollToBottom.fire(),t&&this._onUserInput.fire(),this._logService.debug(`sending data "${e}"`),this._logService.trace("sending data (codes)",()=>e.split("").map(n=>n.charCodeAt(0))),this._onData.fire(e)}triggerBinaryEvent(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${e}"`),this._logService.trace("sending binary (codes)",()=>e.split("").map(t=>t.charCodeAt(0))),this._onBinary.fire(e))}};wh=Qe([oe(0,Nt),oe(1,cv),oe(2,Lt)],wh);var Rg={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:e=>e.button===4||e.action!==1?!1:(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)},VT200:{events:19,restrict:e=>e.action!==32},DRAG:{events:23,restrict:e=>!(e.action===32&&e.button===3)},ANY:{events:31,restrict:e=>!0}};function Eu(e,t){let r=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return e.button===4?(r|=64,r|=e.action):(r|=e.button&3,e.button&4&&(r|=64),e.button&8&&(r|=128),e.action===32?r|=32:e.action===0&&!t&&(r|=3)),r}var Pu=String.fromCharCode,Ng={DEFAULT:e=>{let t=[Eu(e,!1)+32,e.col+32,e.row+32];return t[0]>255||t[1]>255||t[2]>255?"":`\x1B[M${Pu(t[0])}${Pu(t[1])}${Pu(t[2])}`},SGR:e=>{let t=e.action===0&&e.button!==4?"m":"M";return`\x1B[<${Eu(e,!0)};${e.col};${e.row}${t}`},SGR_PIXELS:e=>{let t=e.action===0&&e.button!==4?"m":"M";return`\x1B[<${Eu(e,!0)};${e.x};${e.y}${t}`}},xh=class extends be{constructor(e,t,r){super(),this._bufferService=e,this._coreService=t,this._optionsService=r,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._wheelPartialScroll=0,this._onProtocolChange=this._register(new se),this.onProtocolChange=this._onProtocolChange.event;for(let n of Object.keys(Rg))this.addProtocol(n,Rg[n]);for(let n of Object.keys(Ng))this.addEncoding(n,Ng[n]);this.reset()}addProtocol(e,t){this._protocols[e]=t}addEncoding(e,t){this._encodings[e]=t}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(e){if(!this._protocols[e])throw new Error(`unknown protocol "${e}"`);this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(e){if(!this._encodings[e])throw new Error(`unknown encoding "${e}"`);this._activeEncoding=e}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null,this._wheelPartialScroll=0}consumeWheelEvent(e,t,r){if(e.deltaY===0||e.shiftKey||t===void 0||r===void 0)return 0;let n=t/r,o=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(o/=n+0,Math.abs(e.deltaY)<50&&(o*=.3),this._wheelPartialScroll+=o,o=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._bufferService.rows),o}_applyScrollModifier(e,t){return t.altKey||t.ctrlKey||t.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity}triggerMouseEvent(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows||e.button===4&&e.action===32||e.button===3&&e.action!==32||e.button!==4&&(e.action===2||e.action===3)||(e.col++,e.row++,e.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,e,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(e))return!1;let t=this._encodings[this._activeEncoding](e);return t&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=e,!0}explainEvents(e){return{down:!!(e&1),up:!!(e&2),drag:!!(e&4),move:!!(e&8),wheel:!!(e&16)}}_equalEvents(e,t,r){if(r){if(e.x!==t.x||e.y!==t.y)return!1}else if(e.col!==t.col||e.row!==t.row)return!1;return!(e.button!==t.button||e.action!==t.action||e.ctrl!==t.ctrl||e.alt!==t.alt||e.shift!==t.shift)}};xh=Qe([oe(0,Nt),oe(1,Qi),oe(2,Lt)],xh);var Ru=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],I2=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],st;function A2(e,t){let r=0,n=t.length-1,o;if(e<t[0][0]||e>t[n][1])return!1;for(;n>=r;)if(o=r+n>>1,e>t[o][1])r=o+1;else if(e<t[o][0])n=o-1;else return!0;return!1}var F2=class{constructor(){if(this.version="6",!st){st=new Uint8Array(65536),st.fill(1),st[0]=0,st.fill(0,1,32),st.fill(0,127,160),st.fill(2,4352,4448),st[9001]=2,st[9002]=2,st.fill(2,11904,42192),st[12351]=1,st.fill(2,44032,55204),st.fill(2,63744,64256),st.fill(2,65040,65050),st.fill(2,65072,65136),st.fill(2,65280,65377),st.fill(2,65504,65511);for(let e=0;e<Ru.length;++e)st.fill(0,Ru[e][0],Ru[e][1]+1)}}wcwidth(e){return e<32?0:e<127?1:e<65536?st[e]:A2(e,I2)?0:e>=131072&&e<=196605||e>=196608&&e<=262141?2:1}charProperties(e,t){let r=this.wcwidth(e),n=r===0&&t!==0;if(n){let o=Fi.extractWidth(t);o===0?n=!1:o>r&&(r=o)}return Fi.createPropertyValue(0,r,n)}},Fi=class ja{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new se,this.onChange=this._onChange.event;let t=new F2;this.register(t),this._active=t.version,this._activeProvider=t}static extractShouldJoin(t){return(t&1)!==0}static extractWidth(t){return t>>1&3}static extractCharKind(t){return t>>3}static createPropertyValue(t,r,n=!1){return(t&16777215)<<3|(r&3)<<1|(n?1:0)}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(t){if(!this._providers[t])throw new Error(`unknown Unicode version "${t}"`);this._active=t,this._activeProvider=this._providers[t],this._onChange.fire(t)}register(t){this._providers[t.version]=t}wcwidth(t){return this._activeProvider.wcwidth(t)}getStringCellWidth(t){let r=0,n=0,o=t.length;for(let l=0;l<o;++l){let c=t.charCodeAt(l);if(55296<=c&&c<=56319){if(++l>=o)return r+this.wcwidth(c);let d=t.charCodeAt(l);56320<=d&&d<=57343?c=(c-55296)*1024+d-56320+65536:r+=this.wcwidth(d)}let h=this.charProperties(c,n),p=ja.extractWidth(h);ja.extractShouldJoin(h)&&(p-=ja.extractWidth(n)),r+=p,n=h}return r}charProperties(t,r){return this._activeProvider.charProperties(t,r)}},z2=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(e){this.glevel=e,this.charset=this._charsets[e]}setgCharset(e,t){this._charsets[e]=t,this.glevel===e&&(this.charset=t)}};function Lg(e){let t=e.buffer.lines.get(e.buffer.ybase+e.buffer.y-1)?.get(e.cols-1),r=e.buffer.lines.get(e.buffer.ybase+e.buffer.y);r&&t&&(r.isWrapped=t[3]!==0&&t[3]!==32)}var Pn=2147483647,H2=256,Uv=class bh{constructor(t=32,r=32){if(this.maxLength=t,this.maxSubParamsLength=r,r>H2)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(t),this.length=0,this._subParams=new Int32Array(r),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(t),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(t){let r=new bh;if(!t.length)return r;for(let n=Array.isArray(t[0])?1:0;n<t.length;++n){let o=t[n];if(Array.isArray(o))for(let l=0;l<o.length;++l)r.addSubParam(o[l]);else r.addParam(o)}return r}clone(){let t=new bh(this.maxLength,this.maxSubParamsLength);return t.params.set(this.params),t.length=this.length,t._subParams.set(this._subParams),t._subParamsLength=this._subParamsLength,t._subParamsIdx.set(this._subParamsIdx),t._rejectDigits=this._rejectDigits,t._rejectSubDigits=this._rejectSubDigits,t._digitIsSub=this._digitIsSub,t}toArray(){let t=[];for(let r=0;r<this.length;++r){t.push(this.params[r]);let n=this._subParamsIdx[r]>>8,o=this._subParamsIdx[r]&255;o-n>0&&t.push(Array.prototype.slice.call(this._subParams,n,o))}return t}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(t){if(this._digitIsSub=!1,this.length>=this.maxLength){this._rejectDigits=!0;return}if(t<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=t>Pn?Pn:t}addSubParam(t){if(this._digitIsSub=!0,!!this.length){if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength){this._rejectSubDigits=!0;return}if(t<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=t>Pn?Pn:t,this._subParamsIdx[this.length-1]++}}hasSubParams(t){return(this._subParamsIdx[t]&255)-(this._subParamsIdx[t]>>8)>0}getSubParams(t){let r=this._subParamsIdx[t]>>8,n=this._subParamsIdx[t]&255;return n-r>0?this._subParams.subarray(r,n):null}getSubParamsAll(){let t={};for(let r=0;r<this.length;++r){let n=this._subParamsIdx[r]>>8,o=this._subParamsIdx[r]&255;o-n>0&&(t[r]=this._subParams.slice(n,o))}return t}addDigit(t){let r;if(this._rejectDigits||!(r=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let n=this._digitIsSub?this._subParams:this.params,o=n[r-1];n[r-1]=~o?Math.min(o*10+t,Pn):t}},Rn=[],$2=class{constructor(){this._state=0,this._active=Rn,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(e,t){this._handlers[e]===void 0&&(this._handlers[e]=[]);let r=this._handlers[e];return r.push(t),{dispose:()=>{let n=r.indexOf(t);n!==-1&&r.splice(n,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=Rn}reset(){if(this._state===2)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].end(!1);this._stack.paused=!1,this._active=Rn,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||Rn,!this._active.length)this._handlerFb(this._id,"START");else for(let e=this._active.length-1;e>=0;e--)this._active[e].start()}_put(e,t,r){if(!this._active.length)this._handlerFb(this._id,"PUT",rl(e,t,r));else for(let n=this._active.length-1;n>=0;n--)this._active[n].put(e,t,r)}start(){this.reset(),this._state=1}put(e,t,r){if(this._state!==3){if(this._state===1)for(;t<r;){let n=e[t++];if(n===59){this._state=2,this._start();break}if(n<48||57<n){this._state=3;return}this._id===-1&&(this._id=0),this._id=this._id*10+n-48}this._state===2&&r-t>0&&this._put(e,t,r)}}end(e,t=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),!this._active.length)this._handlerFb(this._id,"END",e);else{let r=!1,n=this._active.length-1,o=!1;if(this._stack.paused&&(n=this._stack.loopPosition-1,r=t,o=this._stack.fallThrough,this._stack.paused=!1),!o&&r===!1){for(;n>=0&&(r=this._active[n].end(e),r!==!0);n--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!1,r;n--}for(;n>=0;n--)if(r=this._active[n].end(!1),r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!0,r}this._active=Rn,this._id=-1,this._state=0}}},Wt=class{constructor(e){this._handler=e,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(e,t,r){this._hitLimit||(this._data+=rl(e,t,r),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}end(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data),t instanceof Promise))return t.then(r=>(this._data="",this._hitLimit=!1,r));return this._data="",this._hitLimit=!1,t}},Nn=[],W2=class{constructor(){this._handlers=Object.create(null),this._active=Nn,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=Nn}registerHandler(e,t){this._handlers[e]===void 0&&(this._handlers[e]=[]);let r=this._handlers[e];return r.push(t),{dispose:()=>{let n=r.indexOf(t);n!==-1&&r.splice(n,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}reset(){if(this._active.length)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].unhook(!1);this._stack.paused=!1,this._active=Nn,this._ident=0}hook(e,t){if(this.reset(),this._ident=e,this._active=this._handlers[e]||Nn,!this._active.length)this._handlerFb(this._ident,"HOOK",t);else for(let r=this._active.length-1;r>=0;r--)this._active[r].hook(t)}put(e,t,r){if(!this._active.length)this._handlerFb(this._ident,"PUT",rl(e,t,r));else for(let n=this._active.length-1;n>=0;n--)this._active[n].put(e,t,r)}unhook(e,t=!0){if(!this._active.length)this._handlerFb(this._ident,"UNHOOK",e);else{let r=!1,n=this._active.length-1,o=!1;if(this._stack.paused&&(n=this._stack.loopPosition-1,r=t,o=this._stack.fallThrough,this._stack.paused=!1),!o&&r===!1){for(;n>=0&&(r=this._active[n].unhook(e),r!==!0);n--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!1,r;n--}for(;n>=0;n--)if(r=this._active[n].unhook(!1),r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!0,r}this._active=Nn,this._ident=0}},jn=new Uv;jn.addParam(0);var Dg=class{constructor(e){this._handler=e,this._data="",this._params=jn,this._hitLimit=!1}hook(e){this._params=e.length>1||e.params[0]?e.clone():jn,this._data="",this._hitLimit=!1}put(e,t,r){this._hitLimit||(this._data+=rl(e,t,r),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}unhook(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data,this._params),t instanceof Promise))return t.then(r=>(this._params=jn,this._data="",this._hitLimit=!1,r));return this._params=jn,this._data="",this._hitLimit=!1,t}},U2=class{constructor(e){this.table=new Uint8Array(e)}setDefault(e,t){this.table.fill(e<<4|t)}add(e,t,r,n){this.table[t<<8|e]=r<<4|n}addMany(e,t,r,n){for(let o=0;o<e.length;o++)this.table[t<<8|e[o]]=r<<4|n}},ir=160,K2=(function(){let e=new U2(4095),t=Array.apply(null,Array(256)).map((h,p)=>p),r=(h,p)=>t.slice(h,p),n=r(32,127),o=r(0,24);o.push(25),o.push.apply(o,r(28,32));let l=r(0,14),c;e.setDefault(1,0),e.addMany(n,0,2,0);for(c in l)e.addMany([24,26,153,154],c,3,0),e.addMany(r(128,144),c,3,0),e.addMany(r(144,152),c,3,0),e.add(156,c,0,0),e.add(27,c,11,1),e.add(157,c,4,8),e.addMany([152,158,159],c,0,7),e.add(155,c,11,3),e.add(144,c,11,9);return e.addMany(o,0,3,0),e.addMany(o,1,3,1),e.add(127,1,0,1),e.addMany(o,8,0,8),e.addMany(o,3,3,3),e.add(127,3,0,3),e.addMany(o,4,3,4),e.add(127,4,0,4),e.addMany(o,6,3,6),e.addMany(o,5,3,5),e.add(127,5,0,5),e.addMany(o,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(n,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(r(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(n,7,0,7),e.addMany(o,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(r(64,127),3,7,0),e.addMany(r(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(r(48,60),4,8,4),e.addMany(r(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(r(32,64),6,0,6),e.add(127,6,0,6),e.addMany(r(64,127),6,0,0),e.addMany(r(32,48),3,9,5),e.addMany(r(32,48),5,9,5),e.addMany(r(48,64),5,0,6),e.addMany(r(64,127),5,7,0),e.addMany(r(32,48),4,9,5),e.addMany(r(32,48),1,9,2),e.addMany(r(32,48),2,9,2),e.addMany(r(48,127),2,10,0),e.addMany(r(48,80),1,10,0),e.addMany(r(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(r(96,127),1,10,0),e.add(80,1,11,9),e.addMany(o,9,0,9),e.add(127,9,0,9),e.addMany(r(28,32),9,0,9),e.addMany(r(32,48),9,9,12),e.addMany(r(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(o,11,0,11),e.addMany(r(32,128),11,0,11),e.addMany(r(28,32),11,0,11),e.addMany(o,10,0,10),e.add(127,10,0,10),e.addMany(r(28,32),10,0,10),e.addMany(r(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(r(32,48),10,9,12),e.addMany(o,12,0,12),e.add(127,12,0,12),e.addMany(r(28,32),12,0,12),e.addMany(r(32,48),12,9,12),e.addMany(r(48,64),12,0,11),e.addMany(r(64,127),12,12,13),e.addMany(r(64,127),10,12,13),e.addMany(r(64,127),9,12,13),e.addMany(o,13,13,13),e.addMany(n,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(ir,0,2,0),e.add(ir,8,5,8),e.add(ir,6,0,6),e.add(ir,11,0,11),e.add(ir,13,13,13),e})(),V2=class extends be{constructor(e=K2){super(),this._transitions=e,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new Uv,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(t,r,n)=>{},this._executeHandlerFb=t=>{},this._csiHandlerFb=(t,r)=>{},this._escHandlerFb=t=>{},this._errorHandlerFb=t=>t,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this._register(ze(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this._register(new $2),this._dcsParser=this._register(new W2),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(e,t=[64,126]){let r=0;if(e.prefix){if(e.prefix.length>1)throw new Error("only one byte as prefix supported");if(r=e.prefix.charCodeAt(0),r&&60>r||r>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(e.intermediates){if(e.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let o=0;o<e.intermediates.length;++o){let l=e.intermediates.charCodeAt(o);if(32>l||l>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");r<<=8,r|=l}}if(e.final.length!==1)throw new Error("final must be a single byte");let n=e.final.charCodeAt(0);if(t[0]>n||n>t[1])throw new Error(`final must be in range ${t[0]} .. ${t[1]}`);return r<<=8,r|=n,r}identToString(e){let t=[];for(;e;)t.push(String.fromCharCode(e&255)),e>>=8;return t.reverse().join("")}setPrintHandler(e){this._printHandler=e}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(e,t){let r=this._identifier(e,[48,126]);this._escHandlers[r]===void 0&&(this._escHandlers[r]=[]);let n=this._escHandlers[r];return n.push(t),{dispose:()=>{let o=n.indexOf(t);o!==-1&&n.splice(o,1)}}}clearEscHandler(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]}setEscHandlerFallback(e){this._escHandlerFb=e}setExecuteHandler(e,t){this._executeHandlers[e.charCodeAt(0)]=t}clearExecuteHandler(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]}setExecuteHandlerFallback(e){this._executeHandlerFb=e}registerCsiHandler(e,t){let r=this._identifier(e);this._csiHandlers[r]===void 0&&(this._csiHandlers[r]=[]);let n=this._csiHandlers[r];return n.push(t),{dispose:()=>{let o=n.indexOf(t);o!==-1&&n.splice(o,1)}}}clearCsiHandler(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]}setCsiHandlerFallback(e){this._csiHandlerFb=e}registerDcsHandler(e,t){return this._dcsParser.registerHandler(this._identifier(e),t)}clearDcsHandler(e){this._dcsParser.clearHandler(this._identifier(e))}setDcsHandlerFallback(e){this._dcsParser.setHandlerFallback(e)}registerOscHandler(e,t){return this._oscParser.registerHandler(e,t)}clearOscHandler(e){this._oscParser.clearHandler(e)}setOscHandlerFallback(e){this._oscParser.setHandlerFallback(e)}setErrorHandler(e){this._errorHandler=e}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(e,t,r,n,o){this._parseStack.state=e,this._parseStack.handlers=t,this._parseStack.handlerPos=r,this._parseStack.transition=n,this._parseStack.chunkPos=o}parse(e,t,r){let n=0,o=0,l=0,c;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,l=this._parseStack.chunkPos+1;else{if(r===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let h=this._parseStack.handlers,p=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(r===!1&&p>-1){for(;p>=0&&(c=h[p](this._params),c!==!0);p--)if(c instanceof Promise)return this._parseStack.handlerPos=p,c}this._parseStack.handlers=[];break;case 4:if(r===!1&&p>-1){for(;p>=0&&(c=h[p](),c!==!0);p--)if(c instanceof Promise)return this._parseStack.handlerPos=p,c}this._parseStack.handlers=[];break;case 6:if(n=e[this._parseStack.chunkPos],c=this._dcsParser.unhook(n!==24&&n!==26,r),c)return c;n===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(n=e[this._parseStack.chunkPos],c=this._oscParser.end(n!==24&&n!==26,r),c)return c;n===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break}this._parseStack.state=0,l=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=this._parseStack.transition&15}for(let h=l;h<t;++h){switch(n=e[h],o=this._transitions.table[this.currentState<<8|(n<160?n:ir)],o>>4){case 2:for(let S=h+1;;++S){if(S>=t||(n=e[S])<32||n>126&&n<ir){this._printHandler(e,h,S),h=S-1;break}if(++S>=t||(n=e[S])<32||n>126&&n<ir){this._printHandler(e,h,S),h=S-1;break}if(++S>=t||(n=e[S])<32||n>126&&n<ir){this._printHandler(e,h,S),h=S-1;break}if(++S>=t||(n=e[S])<32||n>126&&n<ir){this._printHandler(e,h,S),h=S-1;break}}break;case 3:this._executeHandlers[n]?this._executeHandlers[n]():this._executeHandlerFb(n),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:h,code:n,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let p=this._csiHandlers[this._collect<<8|n],d=p?p.length-1:-1;for(;d>=0&&(c=p[d](this._params),c!==!0);d--)if(c instanceof Promise)return this._preserveStack(3,p,d,o,h),c;d<0&&this._csiHandlerFb(this._collect<<8|n,this._params),this.precedingJoinState=0;break;case 8:do switch(n){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(n-48)}while(++h<t&&(n=e[h])>47&&n<60);h--;break;case 9:this._collect<<=8,this._collect|=n;break;case 10:let v=this._escHandlers[this._collect<<8|n],_=v?v.length-1:-1;for(;_>=0&&(c=v[_](),c!==!0);_--)if(c instanceof Promise)return this._preserveStack(4,v,_,o,h),c;_<0&&this._escHandlerFb(this._collect<<8|n),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|n,this._params);break;case 13:for(let S=h+1;;++S)if(S>=t||(n=e[S])===24||n===26||n===27||n>127&&n<ir){this._dcsParser.put(e,h,S),h=S-1;break}break;case 14:if(c=this._dcsParser.unhook(n!==24&&n!==26),c)return this._preserveStack(6,[],0,o,h),c;n===27&&(o|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let S=h+1;;S++)if(S>=t||(n=e[S])<32||n>127&&n<ir){this._oscParser.put(e,h,S),h=S-1;break}break;case 6:if(c=this._oscParser.end(n!==24&&n!==26),c)return this._preserveStack(5,[],0,o,h),c;n===27&&(o|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break}this.currentState=o&15}}},q2=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,Q2=/^[\da-f]+$/;function Mg(e){if(!e)return;let t=e.toLowerCase();if(t.indexOf("rgb:")===0){t=t.slice(4);let r=q2.exec(t);if(r){let n=r[1]?15:r[4]?255:r[7]?4095:65535;return[Math.round(parseInt(r[1]||r[4]||r[7]||r[10],16)/n*255),Math.round(parseInt(r[2]||r[5]||r[8]||r[11],16)/n*255),Math.round(parseInt(r[3]||r[6]||r[9]||r[12],16)/n*255)]}}else if(t.indexOf("#")===0&&(t=t.slice(1),Q2.exec(t)&&[3,6,9,12].includes(t.length))){let r=t.length/3,n=[0,0,0];for(let o=0;o<3;++o){let l=parseInt(t.slice(r*o,r*o+r),16);n[o]=r===1?l<<4:r===2?l:r===3?l>>4:l>>8}return n}}function Nu(e,t){let r=e.toString(16),n=r.length<2?"0"+r:r;switch(t){case 4:return r[0];case 8:return n;case 12:return(n+n).slice(0,3);default:return n+n}}function Y2(e,t=16){let[r,n,o]=e;return`rgb:${Nu(r,t)}/${Nu(n,t)}/${Nu(o,t)}`}var G2={"(":0,")":1,"*":2,"+":3,"-":1,".":2},pi=131072,Og=10;function Tg(e,t){if(e>24)return t.setWinLines||!1;switch(e){case 1:return!!t.restoreWin;case 2:return!!t.minimizeWin;case 3:return!!t.setWinPosition;case 4:return!!t.setWinSizePixels;case 5:return!!t.raiseWin;case 6:return!!t.lowerWin;case 7:return!!t.refreshWin;case 8:return!!t.setWinSizeChars;case 9:return!!t.maximizeWin;case 10:return!!t.fullscreenWin;case 11:return!!t.getWinState;case 13:return!!t.getWinPosition;case 14:return!!t.getWinSizePixels;case 15:return!!t.getScreenSizePixels;case 16:return!!t.getCellSizePixels;case 18:return!!t.getWinSizeChars;case 19:return!!t.getScreenSizeChars;case 20:return!!t.getIconTitle;case 21:return!!t.getWinTitle;case 22:return!!t.pushTitle;case 23:return!!t.popTitle;case 24:return!!t.setWinLines}return!1}var jg=5e3,Bg=0,X2=class extends be{constructor(e,t,r,n,o,l,c,h,p=new V2){super(),this._bufferService=e,this._charsetService=t,this._coreService=r,this._logService=n,this._optionsService=o,this._oscLinkService=l,this._coreMouseService=c,this._unicodeService=h,this._parser=p,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new gC,this._utf8Decoder=new _C,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=Ze.clone(),this._eraseAttrDataInternal=Ze.clone(),this._onRequestBell=this._register(new se),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this._register(new se),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this._register(new se),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this._register(new se),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this._register(new se),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this._register(new se),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this._register(new se),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this._register(new se),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this._register(new se),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this._register(new se),this.onLineFeed=this._onLineFeed.event,this._onScroll=this._register(new se),this.onScroll=this._onScroll.event,this._onTitleChange=this._register(new se),this.onTitleChange=this._onTitleChange.event,this._onColor=this._register(new se),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this._register(this._parser),this._dirtyRowTracker=new Ch(this._bufferService),this._activeBuffer=this._bufferService.buffer,this._register(this._bufferService.buffers.onBufferActivate(d=>this._activeBuffer=d.activeBuffer)),this._parser.setCsiHandlerFallback((d,v)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(d),params:v.toArray()})}),this._parser.setEscHandlerFallback(d=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(d)})}),this._parser.setExecuteHandlerFallback(d=>{this._logService.debug("Unknown EXECUTE code: ",{code:d})}),this._parser.setOscHandlerFallback((d,v,_)=>{this._logService.debug("Unknown OSC code: ",{identifier:d,action:v,data:_})}),this._parser.setDcsHandlerFallback((d,v,_)=>{v==="HOOK"&&(_=_.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(d),action:v,payload:_})}),this._parser.setPrintHandler((d,v,_)=>this.print(d,v,_)),this._parser.registerCsiHandler({final:"@"},d=>this.insertChars(d)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},d=>this.scrollLeft(d)),this._parser.registerCsiHandler({final:"A"},d=>this.cursorUp(d)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},d=>this.scrollRight(d)),this._parser.registerCsiHandler({final:"B"},d=>this.cursorDown(d)),this._parser.registerCsiHandler({final:"C"},d=>this.cursorForward(d)),this._parser.registerCsiHandler({final:"D"},d=>this.cursorBackward(d)),this._parser.registerCsiHandler({final:"E"},d=>this.cursorNextLine(d)),this._parser.registerCsiHandler({final:"F"},d=>this.cursorPrecedingLine(d)),this._parser.registerCsiHandler({final:"G"},d=>this.cursorCharAbsolute(d)),this._parser.registerCsiHandler({final:"H"},d=>this.cursorPosition(d)),this._parser.registerCsiHandler({final:"I"},d=>this.cursorForwardTab(d)),this._parser.registerCsiHandler({final:"J"},d=>this.eraseInDisplay(d,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},d=>this.eraseInDisplay(d,!0)),this._parser.registerCsiHandler({final:"K"},d=>this.eraseInLine(d,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},d=>this.eraseInLine(d,!0)),this._parser.registerCsiHandler({final:"L"},d=>this.insertLines(d)),this._parser.registerCsiHandler({final:"M"},d=>this.deleteLines(d)),this._parser.registerCsiHandler({final:"P"},d=>this.deleteChars(d)),this._parser.registerCsiHandler({final:"S"},d=>this.scrollUp(d)),this._parser.registerCsiHandler({final:"T"},d=>this.scrollDown(d)),this._parser.registerCsiHandler({final:"X"},d=>this.eraseChars(d)),this._parser.registerCsiHandler({final:"Z"},d=>this.cursorBackwardTab(d)),this._parser.registerCsiHandler({final:"`"},d=>this.charPosAbsolute(d)),this._parser.registerCsiHandler({final:"a"},d=>this.hPositionRelative(d)),this._parser.registerCsiHandler({final:"b"},d=>this.repeatPrecedingCharacter(d)),this._parser.registerCsiHandler({final:"c"},d=>this.sendDeviceAttributesPrimary(d)),this._parser.registerCsiHandler({prefix:">",final:"c"},d=>this.sendDeviceAttributesSecondary(d)),this._parser.registerCsiHandler({final:"d"},d=>this.linePosAbsolute(d)),this._parser.registerCsiHandler({final:"e"},d=>this.vPositionRelative(d)),this._parser.registerCsiHandler({final:"f"},d=>this.hVPosition(d)),this._parser.registerCsiHandler({final:"g"},d=>this.tabClear(d)),this._parser.registerCsiHandler({final:"h"},d=>this.setMode(d)),this._parser.registerCsiHandler({prefix:"?",final:"h"},d=>this.setModePrivate(d)),this._parser.registerCsiHandler({final:"l"},d=>this.resetMode(d)),this._parser.registerCsiHandler({prefix:"?",final:"l"},d=>this.resetModePrivate(d)),this._parser.registerCsiHandler({final:"m"},d=>this.charAttributes(d)),this._parser.registerCsiHandler({final:"n"},d=>this.deviceStatus(d)),this._parser.registerCsiHandler({prefix:"?",final:"n"},d=>this.deviceStatusPrivate(d)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},d=>this.softReset(d)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},d=>this.setCursorStyle(d)),this._parser.registerCsiHandler({final:"r"},d=>this.setScrollRegion(d)),this._parser.registerCsiHandler({final:"s"},d=>this.saveCursor(d)),this._parser.registerCsiHandler({final:"t"},d=>this.windowOptions(d)),this._parser.registerCsiHandler({final:"u"},d=>this.restoreCursor(d)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},d=>this.insertColumns(d)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},d=>this.deleteColumns(d)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},d=>this.selectProtected(d)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},d=>this.requestMode(d,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},d=>this.requestMode(d,!1)),this._parser.setExecuteHandler(q.BEL,()=>this.bell()),this._parser.setExecuteHandler(q.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(q.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(q.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(q.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(q.BS,()=>this.backspace()),this._parser.setExecuteHandler(q.HT,()=>this.tab()),this._parser.setExecuteHandler(q.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(q.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(Oa.IND,()=>this.index()),this._parser.setExecuteHandler(Oa.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(Oa.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new Wt(d=>(this.setTitle(d),this.setIconName(d),!0))),this._parser.registerOscHandler(1,new Wt(d=>this.setIconName(d))),this._parser.registerOscHandler(2,new Wt(d=>this.setTitle(d))),this._parser.registerOscHandler(4,new Wt(d=>this.setOrReportIndexedColor(d))),this._parser.registerOscHandler(8,new Wt(d=>this.setHyperlink(d))),this._parser.registerOscHandler(10,new Wt(d=>this.setOrReportFgColor(d))),this._parser.registerOscHandler(11,new Wt(d=>this.setOrReportBgColor(d))),this._parser.registerOscHandler(12,new Wt(d=>this.setOrReportCursorColor(d))),this._parser.registerOscHandler(104,new Wt(d=>this.restoreIndexedColor(d))),this._parser.registerOscHandler(110,new Wt(d=>this.restoreFgColor(d))),this._parser.registerOscHandler(111,new Wt(d=>this.restoreBgColor(d))),this._parser.registerOscHandler(112,new Wt(d=>this.restoreCursorColor(d))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let d in ot)this._parser.registerEscHandler({intermediates:"(",final:d},()=>this.selectCharset("("+d)),this._parser.registerEscHandler({intermediates:")",final:d},()=>this.selectCharset(")"+d)),this._parser.registerEscHandler({intermediates:"*",final:d},()=>this.selectCharset("*"+d)),this._parser.registerEscHandler({intermediates:"+",final:d},()=>this.selectCharset("+"+d)),this._parser.registerEscHandler({intermediates:"-",final:d},()=>this.selectCharset("-"+d)),this._parser.registerEscHandler({intermediates:".",final:d},()=>this.selectCharset("."+d)),this._parser.registerEscHandler({intermediates:"/",final:d},()=>this.selectCharset("/"+d));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(d=>(this._logService.error("Parsing error: ",d),d)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new Dg((d,v)=>this.requestStatusString(d,v)))}getAttrData(){return this._curAttrData}_preserveStack(e,t,r,n){this._parseStack.paused=!0,this._parseStack.cursorStartX=e,this._parseStack.cursorStartY=t,this._parseStack.decodedLength=r,this._parseStack.position=n}_logSlowResolvingAsync(e){this._logService.logLevel<=3&&Promise.race([e,new Promise((t,r)=>setTimeout(()=>r("#SLOW_TIMEOUT"),jg))]).catch(t=>{if(t!=="#SLOW_TIMEOUT")throw t;console.warn(`async parser handler taking longer than ${jg} ms`)})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(e,t){let r,n=this._activeBuffer.x,o=this._activeBuffer.y,l=0,c=this._parseStack.paused;if(c){if(r=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,t))return this._logSlowResolvingAsync(r),r;n=this._parseStack.cursorStartX,o=this._parseStack.cursorStartY,this._parseStack.paused=!1,e.length>pi&&(l=this._parseStack.position+pi)}if(this._logService.logLevel<=1&&this._logService.debug(`parsing data ${typeof e=="string"?` "${e}"`:` "${Array.prototype.map.call(e,d=>String.fromCharCode(d)).join("")}"`}`),this._logService.logLevel===0&&this._logService.trace("parsing data (codes)",typeof e=="string"?e.split("").map(d=>d.charCodeAt(0)):e),this._parseBuffer.length<e.length&&this._parseBuffer.length<pi&&(this._parseBuffer=new Uint32Array(Math.min(e.length,pi))),c||this._dirtyRowTracker.clearRange(),e.length>pi)for(let d=l;d<e.length;d+=pi){let v=d+pi<e.length?d+pi:e.length,_=typeof e=="string"?this._stringDecoder.decode(e.substring(d,v),this._parseBuffer):this._utf8Decoder.decode(e.subarray(d,v),this._parseBuffer);if(r=this._parser.parse(this._parseBuffer,_))return this._preserveStack(n,o,_,d),this._logSlowResolvingAsync(r),r}else if(!c){let d=typeof e=="string"?this._stringDecoder.decode(e,this._parseBuffer):this._utf8Decoder.decode(e,this._parseBuffer);if(r=this._parser.parse(this._parseBuffer,d))return this._preserveStack(n,o,d,0),this._logSlowResolvingAsync(r),r}(this._activeBuffer.x!==n||this._activeBuffer.y!==o)&&this._onCursorMove.fire();let h=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),p=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);p<this._bufferService.rows&&this._onRequestRefreshRows.fire({start:Math.min(p,this._bufferService.rows-1),end:Math.min(h,this._bufferService.rows-1)})}print(e,t,r){let n,o,l=this._charsetService.charset,c=this._optionsService.rawOptions.screenReaderMode,h=this._bufferService.cols,p=this._coreService.decPrivateModes.wraparound,d=this._coreService.modes.insertMode,v=this._curAttrData,_=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&r-t>0&&_.getWidth(this._activeBuffer.x-1)===2&&_.setCellFromCodepoint(this._activeBuffer.x-1,0,1,v);let S=this._parser.precedingJoinState;for(let x=t;x<r;++x){if(n=e[x],n<127&&l){let M=l[String.fromCharCode(n)];M&&(n=M.charCodeAt(0))}let w=this._unicodeService.charProperties(n,S);o=Fi.extractWidth(w);let b=Fi.extractShouldJoin(w),E=b?Fi.extractWidth(S):0;if(S=w,c&&this._onA11yChar.fire(mi(n)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+o-E>h){if(p){let M=_,B=this._activeBuffer.x-E;for(this._activeBuffer.x=E,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),_=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),E>0&&_ instanceof On&&_.copyCellsFrom(M,B,0,E,!1);B<h;)M.setCellFromCodepoint(B++,0,1,v)}else if(this._activeBuffer.x=h-1,o===2)continue}if(b&&this._activeBuffer.x){let M=_.getWidth(this._activeBuffer.x-1)?1:2;_.addCodepointToCell(this._activeBuffer.x-M,n,o);for(let B=o-E;--B>=0;)_.setCellFromCodepoint(this._activeBuffer.x++,0,0,v);continue}if(d&&(_.insertCells(this._activeBuffer.x,o-E,this._activeBuffer.getNullCell(v)),_.getWidth(h-1)===2&&_.setCellFromCodepoint(h-1,0,1,v)),_.setCellFromCodepoint(this._activeBuffer.x++,n,o,v),o>0)for(;--o;)_.setCellFromCodepoint(this._activeBuffer.x++,0,0,v)}this._parser.precedingJoinState=S,this._activeBuffer.x<h&&r-t>0&&_.getWidth(this._activeBuffer.x)===0&&!_.hasContent(this._activeBuffer.x)&&_.setCellFromCodepoint(this._activeBuffer.x,0,1,v),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(e,t){return e.final==="t"&&!e.prefix&&!e.intermediates?this._parser.registerCsiHandler(e,r=>Tg(r.params[0],this._optionsService.rawOptions.windowOptions)?t(r):!0):this._parser.registerCsiHandler(e,t)}registerDcsHandler(e,t){return this._parser.registerDcsHandler(e,new Dg(t))}registerEscHandler(e,t){return this._parser.registerEscHandler(e,t)}registerOscHandler(e,t){return this._parser.registerOscHandler(e,new Wt(t))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);e.hasWidth(this._activeBuffer.x)&&!e.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let e=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-e),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(e=this._bufferService.cols-1){this._activeBuffer.x=Math.min(e,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(e,t){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=e,this._activeBuffer.y=this._activeBuffer.scrollTop+t):(this._activeBuffer.x=e,this._activeBuffer.y=t),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(e,t){this._restrictCursor(),this._setCursor(this._activeBuffer.x+e,this._activeBuffer.y+t)}cursorUp(e){let t=this._activeBuffer.y-this._activeBuffer.scrollTop;return t>=0?this._moveCursor(0,-Math.min(t,e.params[0]||1)):this._moveCursor(0,-(e.params[0]||1)),!0}cursorDown(e){let t=this._activeBuffer.scrollBottom-this._activeBuffer.y;return t>=0?this._moveCursor(0,Math.min(t,e.params[0]||1)):this._moveCursor(0,e.params[0]||1),!0}cursorForward(e){return this._moveCursor(e.params[0]||1,0),!0}cursorBackward(e){return this._moveCursor(-(e.params[0]||1),0),!0}cursorNextLine(e){return this.cursorDown(e),this._activeBuffer.x=0,!0}cursorPrecedingLine(e){return this.cursorUp(e),this._activeBuffer.x=0,!0}cursorCharAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(e){return this._setCursor(e.length>=2?(e.params[1]||1)-1:0,(e.params[0]||1)-1),!0}charPosAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(e){return this._moveCursor(e.params[0]||1,0),!0}linePosAbsolute(e){return this._setCursor(this._activeBuffer.x,(e.params[0]||1)-1),!0}vPositionRelative(e){return this._moveCursor(0,e.params[0]||1),!0}hVPosition(e){return this.cursorPosition(e),!0}tabClear(e){let t=e.params[0];return t===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:t===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(e){let t=e.params[0];return t===1&&(this._curAttrData.bg|=536870912),(t===2||t===0)&&(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(e,t,r,n=!1,o=!1){let l=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);l.replaceCells(t,r,this._activeBuffer.getNullCell(this._eraseAttrData()),o),n&&(l.isWrapped=!1)}_resetBufferLine(e,t=!1){let r=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);r&&(r.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),t),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+e),r.isWrapped=!1)}eraseInDisplay(e,t=!1){this._restrictCursor(this._bufferService.cols);let r;switch(e.params[0]){case 0:for(r=this._activeBuffer.y,this._dirtyRowTracker.markDirty(r),this._eraseInBufferLine(r++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,t);r<this._bufferService.rows;r++)this._resetBufferLine(r,t);this._dirtyRowTracker.markDirty(r);break;case 1:for(r=this._activeBuffer.y,this._dirtyRowTracker.markDirty(r),this._eraseInBufferLine(r,0,this._activeBuffer.x+1,!0,t),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(r+1).isWrapped=!1);r--;)this._resetBufferLine(r,t);this._dirtyRowTracker.markDirty(0);break;case 2:if(this._optionsService.rawOptions.scrollOnEraseInDisplay){for(r=this._bufferService.rows,this._dirtyRowTracker.markRangeDirty(0,r-1);r--&&!this._activeBuffer.lines.get(this._activeBuffer.ybase+r)?.getTrimmedLength(););for(;r>=0;r--)this._bufferService.scroll(this._eraseAttrData())}else{for(r=this._bufferService.rows,this._dirtyRowTracker.markDirty(r-1);r--;)this._resetBufferLine(r,t);this._dirtyRowTracker.markDirty(0)}break;case 3:let n=this._activeBuffer.lines.length-this._bufferService.rows;n>0&&(this._activeBuffer.lines.trimStart(n),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-n,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-n,0),this._onScroll.fire(0));break}return!0}eraseInLine(e,t=!1){switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,t);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,t);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,t);break}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let r=this._activeBuffer.ybase+this._activeBuffer.y,n=this._bufferService.rows-1-this._activeBuffer.scrollBottom,o=this._bufferService.rows-1+this._activeBuffer.ybase-n+1;for(;t--;)this._activeBuffer.lines.splice(o-1,1),this._activeBuffer.lines.splice(r,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let r=this._activeBuffer.ybase+this._activeBuffer.y,n;for(n=this._bufferService.rows-1-this._activeBuffer.scrollBottom,n=this._bufferService.rows-1+this._activeBuffer.ybase-n;t--;)this._activeBuffer.lines.splice(r,1),this._activeBuffer.lines.splice(n,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.insertCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.deleteCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(Ze));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);n.deleteCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData())),n.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);n.insertCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData())),n.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);n.insertCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData())),n.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);n.deleteCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData())),n.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(e.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(e){let t=this._parser.precedingJoinState;if(!t)return!0;let r=e.params[0]||1,n=Fi.extractWidth(t),o=this._activeBuffer.x-n,l=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(o),c=new Uint32Array(l.length*r),h=0;for(let d=0;d<l.length;){let v=l.codePointAt(d)||0;c[h++]=v,d+=v>65535?2:1}let p=h;for(let d=1;d<r;++d)c.copyWithin(p,0,h),p+=h;return this.print(c,0,p),!0}sendDeviceAttributesPrimary(e){return e.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(q.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(q.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(e){return e.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(q.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(q.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(e.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(q.ESC+"[>83;40003;0c")),!0}_is(e){return(this._optionsService.rawOptions.termName+"").indexOf(e)===0}setMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0;break}return!0}setModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,Ii),this._charsetService.setgCharset(1,Ii),this._charsetService.setgCharset(2,Ii),this._charsetService.setgCharset(3,Ii);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!0;break}return!0}resetMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1;break}return!0}resetModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),e.params[t]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!1,this._onRequestRefreshRows.fire(void 0);break}return!0}requestMode(e,t){let r;(b=>(b[b.NOT_RECOGNIZED=0]="NOT_RECOGNIZED",b[b.SET=1]="SET",b[b.RESET=2]="RESET",b[b.PERMANENTLY_SET=3]="PERMANENTLY_SET",b[b.PERMANENTLY_RESET=4]="PERMANENTLY_RESET"))(r||={});let n=this._coreService.decPrivateModes,{activeProtocol:o,activeEncoding:l}=this._coreMouseService,c=this._coreService,{buffers:h,cols:p}=this._bufferService,{active:d,alt:v}=h,_=this._optionsService.rawOptions,S=(b,E)=>(c.triggerDataEvent(`${q.ESC}[${t?"":"?"}${b};${E}$y`),!0),x=b=>b?1:2,w=e.params[0];return t?w===2?S(w,4):w===4?S(w,x(c.modes.insertMode)):w===12?S(w,3):w===20?S(w,x(_.convertEol)):S(w,0):w===1?S(w,x(n.applicationCursorKeys)):w===3?S(w,_.windowOptions.setWinLines?p===80?2:p===132?1:0:0):w===6?S(w,x(n.origin)):w===7?S(w,x(n.wraparound)):w===8?S(w,3):w===9?S(w,x(o==="X10")):w===12?S(w,x(_.cursorBlink)):w===25?S(w,x(!c.isCursorHidden)):w===45?S(w,x(n.reverseWraparound)):w===66?S(w,x(n.applicationKeypad)):w===67?S(w,4):w===1e3?S(w,x(o==="VT200")):w===1002?S(w,x(o==="DRAG")):w===1003?S(w,x(o==="ANY")):w===1004?S(w,x(n.sendFocus)):w===1005?S(w,4):w===1006?S(w,x(l==="SGR")):w===1015?S(w,4):w===1016?S(w,x(l==="SGR_PIXELS")):w===1048?S(w,1):w===47||w===1047||w===1049?S(w,x(d===v)):w===2004?S(w,x(n.bracketedPasteMode)):w===2026?S(w,x(n.synchronizedOutput)):S(w,0)}_updateAttrColor(e,t,r,n,o){return t===2?(e|=50331648,e&=-16777216,e|=ro.fromColorRGB([r,n,o])):t===5&&(e&=-50331904,e|=33554432|r&255),e}_extractColor(e,t,r){let n=[0,0,-1,0,0,0],o=0,l=0;do{if(n[l+o]=e.params[t+l],e.hasSubParams(t+l)){let c=e.getSubParams(t+l),h=0;do n[1]===5&&(o=1),n[l+h+1+o]=c[h];while(++h<c.length&&h+l+1+o<n.length);break}if(n[1]===5&&l+o>=2||n[1]===2&&l+o>=5)break;n[1]&&(o=1)}while(++l+t<e.length&&l+o<n.length);for(let c=2;c<n.length;++c)n[c]===-1&&(n[c]=0);switch(n[0]){case 38:r.fg=this._updateAttrColor(r.fg,n[1],n[3],n[4],n[5]);break;case 48:r.bg=this._updateAttrColor(r.bg,n[1],n[3],n[4],n[5]);break;case 58:r.extended=r.extended.clone(),r.extended.underlineColor=this._updateAttrColor(r.extended.underlineColor,n[1],n[3],n[4],n[5])}return l}_processUnderline(e,t){t.extended=t.extended.clone(),(!~e||e>5)&&(e=1),t.extended.underlineStyle=e,t.fg|=268435456,e===0&&(t.fg&=-268435457),t.updateExtended()}_processSGR0(e){e.fg=Ze.fg,e.bg=Ze.bg,e.extended=e.extended.clone(),e.extended.underlineStyle=0,e.extended.underlineColor&=-67108864,e.updateExtended()}charAttributes(e){if(e.length===1&&e.params[0]===0)return this._processSGR0(this._curAttrData),!0;let t=e.length,r,n=this._curAttrData;for(let o=0;o<t;o++)r=e.params[o],r>=30&&r<=37?(n.fg&=-50331904,n.fg|=16777216|r-30):r>=40&&r<=47?(n.bg&=-50331904,n.bg|=16777216|r-40):r>=90&&r<=97?(n.fg&=-50331904,n.fg|=16777216|r-90|8):r>=100&&r<=107?(n.bg&=-50331904,n.bg|=16777216|r-100|8):r===0?this._processSGR0(n):r===1?n.fg|=134217728:r===3?n.bg|=67108864:r===4?(n.fg|=268435456,this._processUnderline(e.hasSubParams(o)?e.getSubParams(o)[0]:1,n)):r===5?n.fg|=536870912:r===7?n.fg|=67108864:r===8?n.fg|=1073741824:r===9?n.fg|=2147483648:r===2?n.bg|=134217728:r===21?this._processUnderline(2,n):r===22?(n.fg&=-134217729,n.bg&=-134217729):r===23?n.bg&=-67108865:r===24?(n.fg&=-268435457,this._processUnderline(0,n)):r===25?n.fg&=-536870913:r===27?n.fg&=-67108865:r===28?n.fg&=-1073741825:r===29?n.fg&=2147483647:r===39?(n.fg&=-67108864,n.fg|=Ze.fg&16777215):r===49?(n.bg&=-67108864,n.bg|=Ze.bg&16777215):r===38||r===48||r===58?o+=this._extractColor(e,o,n):r===53?n.bg|=1073741824:r===55?n.bg&=-1073741825:r===59?(n.extended=n.extended.clone(),n.extended.underlineColor=-1,n.updateExtended()):r===100?(n.fg&=-67108864,n.fg|=Ze.fg&16777215,n.bg&=-67108864,n.bg|=Ze.bg&16777215):this._logService.debug("Unknown SGR attribute: %d.",r);return!0}deviceStatus(e){switch(e.params[0]){case 5:this._coreService.triggerDataEvent(`${q.ESC}[0n`);break;case 6:let t=this._activeBuffer.y+1,r=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${q.ESC}[${t};${r}R`);break}return!0}deviceStatusPrivate(e){switch(e.params[0]){case 6:let t=this._activeBuffer.y+1,r=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${q.ESC}[?${t};${r}R`);break}return!0}softReset(e){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=Ze.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(e){let t=e.length===0?1:e.params[0];if(t===0)this._coreService.decPrivateModes.cursorStyle=void 0,this._coreService.decPrivateModes.cursorBlink=void 0;else{switch(t){case 1:case 2:this._coreService.decPrivateModes.cursorStyle="block";break;case 3:case 4:this._coreService.decPrivateModes.cursorStyle="underline";break;case 5:case 6:this._coreService.decPrivateModes.cursorStyle="bar";break}let r=t%2===1;this._coreService.decPrivateModes.cursorBlink=r}return!0}setScrollRegion(e){let t=e.params[0]||1,r;return(e.length<2||(r=e.params[1])>this._bufferService.rows||r===0)&&(r=this._bufferService.rows),r>t&&(this._activeBuffer.scrollTop=t-1,this._activeBuffer.scrollBottom=r-1,this._setCursor(0,0)),!0}windowOptions(e){if(!Tg(e.params[0],this._optionsService.rawOptions.windowOptions))return!0;let t=e.length>1?e.params[1]:0;switch(e.params[0]){case 14:t!==2&&this._onRequestWindowsOptionsReport.fire(0);break;case 16:this._onRequestWindowsOptionsReport.fire(1);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${q.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:(t===0||t===2)&&(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>Og&&this._windowTitleStack.shift()),(t===0||t===1)&&(this._iconNameStack.push(this._iconName),this._iconNameStack.length>Og&&this._iconNameStack.shift());break;case 23:(t===0||t===2)&&this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),(t===0||t===1)&&this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop());break}return!0}saveCursor(e){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(e){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(e){return this._windowTitle=e,this._onTitleChange.fire(e),!0}setIconName(e){return this._iconName=e,!0}setOrReportIndexedColor(e){let t=[],r=e.split(";");for(;r.length>1;){let n=r.shift(),o=r.shift();if(/^\d+$/.exec(n)){let l=parseInt(n);if(Ig(l))if(o==="?")t.push({type:0,index:l});else{let c=Mg(o);c&&t.push({type:1,index:l,color:c})}}}return t.length&&this._onColor.fire(t),!0}setHyperlink(e){let t=e.indexOf(";");if(t===-1)return!0;let r=e.slice(0,t).trim(),n=e.slice(t+1);return n?this._createHyperlink(r,n):r.trim()?!1:this._finishHyperlink()}_createHyperlink(e,t){this._getCurrentLinkId()&&this._finishHyperlink();let r=e.split(":"),n,o=r.findIndex(l=>l.startsWith("id="));return o!==-1&&(n=r[o].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:n,uri:t}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(e,t){let r=e.split(";");for(let n=0;n<r.length&&!(t>=this._specialColors.length);++n,++t)if(r[n]==="?")this._onColor.fire([{type:0,index:this._specialColors[t]}]);else{let o=Mg(r[n]);o&&this._onColor.fire([{type:1,index:this._specialColors[t],color:o}])}return!0}setOrReportFgColor(e){return this._setOrReportSpecialColor(e,0)}setOrReportBgColor(e){return this._setOrReportSpecialColor(e,1)}setOrReportCursorColor(e){return this._setOrReportSpecialColor(e,2)}restoreIndexedColor(e){if(!e)return this._onColor.fire([{type:2}]),!0;let t=[],r=e.split(";");for(let n=0;n<r.length;++n)if(/^\d+$/.exec(r[n])){let o=parseInt(r[n]);Ig(o)&&t.push({type:2,index:o})}return t.length&&this._onColor.fire(t),!0}restoreFgColor(e){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(e){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(e){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,Ii),!0}selectCharset(e){return e.length!==2?(this.selectDefaultCharset(),!0):(e[0]==="/"||this._charsetService.setgCharset(G2[e[0]],ot[e[1]]||Ii),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let e=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,e,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=Ze.clone(),this._eraseAttrDataInternal=Ze.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=this._curAttrData.bg&67108863,this._eraseAttrDataInternal}setgLevel(e){return this._charsetService.setgLevel(e),!0}screenAlignmentPattern(){let e=new sr;e.content=1<<22|69,e.fg=this._curAttrData.fg,e.bg=this._curAttrData.bg,this._setCursor(0,0);for(let t=0;t<this._bufferService.rows;++t){let r=this._activeBuffer.ybase+this._activeBuffer.y+t,n=this._activeBuffer.lines.get(r);n&&(n.fill(e),n.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(e,t){let r=c=>(this._coreService.triggerDataEvent(`${q.ESC}${c}${q.ESC}\\`),!0),n=this._bufferService.buffer,o=this._optionsService.rawOptions;return r(e==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:e==='"p'?'P1$r61;1"p':e==="r"?`P1$r${n.scrollTop+1};${n.scrollBottom+1}r`:e==="m"?"P1$r0m":e===" q"?`P1$r${{block:2,underline:4,bar:6}[o.cursorStyle]-(o.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(e,t){this._dirtyRowTracker.markRangeDirty(e,t)}},Ch=class{constructor(e){this._bufferService=e,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(e){e<this.start?this.start=e:e>this.end&&(this.end=e)}markRangeDirty(e,t){e>t&&(Bg=e,e=t,t=Bg),e<this.start&&(this.start=e),t>this.end&&(this.end=t)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};Ch=Qe([oe(0,Nt)],Ch);function Ig(e){return 0<=e&&e<256}var J2=5e7,Ag=12,Z2=50,eE=class extends be{constructor(e){super(),this._action=e,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this._register(new se),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(e,t){if(t!==void 0&&this._syncCalls>t){this._syncCalls=0;return}if(this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;this._isSyncWriting=!0;let r;for(;r=this._writeBuffer.shift();){this._action(r);let n=this._callbacks.shift();n&&n()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(e,t){if(this._pendingData>J2)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput){this._didUserInput=!1,this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t),this._innerWrite();return}setTimeout(()=>this._innerWrite())}this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t)}_innerWrite(e=0,t=!0){let r=e||performance.now();for(;this._writeBuffer.length>this._bufferOffset;){let n=this._writeBuffer[this._bufferOffset],o=this._action(n,t);if(o){let c=h=>performance.now()-r>=Ag?setTimeout(()=>this._innerWrite(0,h)):this._innerWrite(r,h);o.catch(h=>(queueMicrotask(()=>{throw h}),Promise.resolve(!1))).then(c);return}let l=this._callbacks[this._bufferOffset];if(l&&l(),this._bufferOffset++,this._pendingData-=n.length,performance.now()-r>=Ag)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>Z2&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}},kh=class{constructor(e){this._bufferService=e,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(e){let t=this._bufferService.buffer;if(e.id===void 0){let h=t.addMarker(t.ybase+t.y),p={data:e,id:this._nextId++,lines:[h]};return h.onDispose(()=>this._removeMarkerFromLink(p,h)),this._dataByLinkId.set(p.id,p),p.id}let r=e,n=this._getEntryIdKey(r),o=this._entriesWithId.get(n);if(o)return this.addLineToLink(o.id,t.ybase+t.y),o.id;let l=t.addMarker(t.ybase+t.y),c={id:this._nextId++,key:this._getEntryIdKey(r),data:r,lines:[l]};return l.onDispose(()=>this._removeMarkerFromLink(c,l)),this._entriesWithId.set(c.key,c),this._dataByLinkId.set(c.id,c),c.id}addLineToLink(e,t){let r=this._dataByLinkId.get(e);if(r&&r.lines.every(n=>n.line!==t)){let n=this._bufferService.buffer.addMarker(t);r.lines.push(n),n.onDispose(()=>this._removeMarkerFromLink(r,n))}}getLinkData(e){return this._dataByLinkId.get(e)?.data}_getEntryIdKey(e){return`${e.id};;${e.uri}`}_removeMarkerFromLink(e,t){let r=e.lines.indexOf(t);r!==-1&&(e.lines.splice(r,1),e.lines.length===0&&(e.data.id!==void 0&&this._entriesWithId.delete(e.key),this._dataByLinkId.delete(e.id)))}};kh=Qe([oe(0,Nt)],kh);var Fg=!1,tE=class extends be{constructor(e){super(),this._windowsWrappingHeuristics=this._register(new Rs),this._onBinary=this._register(new se),this.onBinary=this._onBinary.event,this._onData=this._register(new se),this.onData=this._onData.event,this._onLineFeed=this._register(new se),this.onLineFeed=this._onLineFeed.event,this._onResize=this._register(new se),this.onResize=this._onResize.event,this._onWriteParsed=this._register(new se),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this._register(new se),this._instantiationService=new k2,this.optionsService=this._register(new j2(e)),this._instantiationService.setService(Lt,this.optionsService),this._bufferService=this._register(this._instantiationService.createInstance(Sh)),this._instantiationService.setService(Nt,this._bufferService),this._logService=this._register(this._instantiationService.createInstance(yh)),this._instantiationService.setService(cv,this._logService),this.coreService=this._register(this._instantiationService.createInstance(wh)),this._instantiationService.setService(Qi,this.coreService),this.coreMouseService=this._register(this._instantiationService.createInstance(xh)),this._instantiationService.setService(lv,this.coreMouseService),this.unicodeService=this._register(this._instantiationService.createInstance(Fi)),this._instantiationService.setService(wC,this.unicodeService),this._charsetService=this._instantiationService.createInstance(z2),this._instantiationService.setService(SC,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(kh),this._instantiationService.setService(uv,this._oscLinkService),this._inputHandler=this._register(new X2(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this._register(vt.forward(this._inputHandler.onLineFeed,this._onLineFeed)),this._register(this._inputHandler),this._register(vt.forward(this._bufferService.onResize,this._onResize)),this._register(vt.forward(this.coreService.onData,this._onData)),this._register(vt.forward(this.coreService.onBinary,this._onBinary)),this._register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom(!0))),this._register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this._register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this._register(this._bufferService.onScroll(()=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this._register(new eE((t,r)=>this._inputHandler.parse(t,r))),this._register(vt.forward(this._writeBuffer.onWriteParsed,this._onWriteParsed))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this._register(new se),this._onScroll.event(e=>{this._onScrollApi?.fire(e.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(e){for(let t in e)this.optionsService.options[t]=e[t]}write(e,t){this._writeBuffer.write(e,t)}writeSync(e,t){this._logService.logLevel<=3&&!Fg&&(this._logService.warn("writeSync is unreliable and will be removed soon."),Fg=!0),this._writeBuffer.writeSync(e,t)}input(e,t=!0){this.coreService.triggerDataEvent(e,t)}resize(e,t){isNaN(e)||isNaN(t)||(e=Math.max(e,$v),t=Math.max(t,Wv),this._bufferService.resize(e,t))}scroll(e,t=!1){this._bufferService.scroll(e,t)}scrollLines(e,t){this._bufferService.scrollLines(e,t)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(e){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){let t=e-this._bufferService.buffer.ydisp;t!==0&&this.scrollLines(t)}registerEscHandler(e,t){return this._inputHandler.registerEscHandler(e,t)}registerDcsHandler(e,t){return this._inputHandler.registerDcsHandler(e,t)}registerCsiHandler(e,t){return this._inputHandler.registerCsiHandler(e,t)}registerOscHandler(e,t){return this._inputHandler.registerOscHandler(e,t)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let e=!1,t=this.optionsService.rawOptions.windowsPty;t&&t.buildNumber!==void 0&&t.buildNumber!==void 0?e=t.backend==="conpty"&&t.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(e=!0),e?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let e=[];e.push(this.onLineFeed(Lg.bind(null,this._bufferService))),e.push(this.registerCsiHandler({final:"H"},()=>(Lg(this._bufferService),!1))),this._windowsWrappingHeuristics.value=ze(()=>{for(let t of e)t.dispose()})}}},rE={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};function iE(e,t,r,n){let o={type:0,cancel:!1,key:void 0},l=(e.shiftKey?1:0)|(e.altKey?2:0)|(e.ctrlKey?4:0)|(e.metaKey?8:0);switch(e.keyCode){case 0:e.key==="UIKeyInputUpArrow"?t?o.key=q.ESC+"OA":o.key=q.ESC+"[A":e.key==="UIKeyInputLeftArrow"?t?o.key=q.ESC+"OD":o.key=q.ESC+"[D":e.key==="UIKeyInputRightArrow"?t?o.key=q.ESC+"OC":o.key=q.ESC+"[C":e.key==="UIKeyInputDownArrow"&&(t?o.key=q.ESC+"OB":o.key=q.ESC+"[B");break;case 8:o.key=e.ctrlKey?"\b":q.DEL,e.altKey&&(o.key=q.ESC+o.key);break;case 9:if(e.shiftKey){o.key=q.ESC+"[Z";break}o.key=q.HT,o.cancel=!0;break;case 13:o.key=e.altKey?q.ESC+q.CR:q.CR,o.cancel=!0;break;case 27:o.key=q.ESC,e.altKey&&(o.key=q.ESC+q.ESC),o.cancel=!0;break;case 37:if(e.metaKey)break;l?o.key=q.ESC+"[1;"+(l+1)+"D":t?o.key=q.ESC+"OD":o.key=q.ESC+"[D";break;case 39:if(e.metaKey)break;l?o.key=q.ESC+"[1;"+(l+1)+"C":t?o.key=q.ESC+"OC":o.key=q.ESC+"[C";break;case 38:if(e.metaKey)break;l?o.key=q.ESC+"[1;"+(l+1)+"A":t?o.key=q.ESC+"OA":o.key=q.ESC+"[A";break;case 40:if(e.metaKey)break;l?o.key=q.ESC+"[1;"+(l+1)+"B":t?o.key=q.ESC+"OB":o.key=q.ESC+"[B";break;case 45:!e.shiftKey&&!e.ctrlKey&&(o.key=q.ESC+"[2~");break;case 46:l?o.key=q.ESC+"[3;"+(l+1)+"~":o.key=q.ESC+"[3~";break;case 36:l?o.key=q.ESC+"[1;"+(l+1)+"H":t?o.key=q.ESC+"OH":o.key=q.ESC+"[H";break;case 35:l?o.key=q.ESC+"[1;"+(l+1)+"F":t?o.key=q.ESC+"OF":o.key=q.ESC+"[F";break;case 33:e.shiftKey?o.type=2:e.ctrlKey?o.key=q.ESC+"[5;"+(l+1)+"~":o.key=q.ESC+"[5~";break;case 34:e.shiftKey?o.type=3:e.ctrlKey?o.key=q.ESC+"[6;"+(l+1)+"~":o.key=q.ESC+"[6~";break;case 112:l?o.key=q.ESC+"[1;"+(l+1)+"P":o.key=q.ESC+"OP";break;case 113:l?o.key=q.ESC+"[1;"+(l+1)+"Q":o.key=q.ESC+"OQ";break;case 114:l?o.key=q.ESC+"[1;"+(l+1)+"R":o.key=q.ESC+"OR";break;case 115:l?o.key=q.ESC+"[1;"+(l+1)+"S":o.key=q.ESC+"OS";break;case 116:l?o.key=q.ESC+"[15;"+(l+1)+"~":o.key=q.ESC+"[15~";break;case 117:l?o.key=q.ESC+"[17;"+(l+1)+"~":o.key=q.ESC+"[17~";break;case 118:l?o.key=q.ESC+"[18;"+(l+1)+"~":o.key=q.ESC+"[18~";break;case 119:l?o.key=q.ESC+"[19;"+(l+1)+"~":o.key=q.ESC+"[19~";break;case 120:l?o.key=q.ESC+"[20;"+(l+1)+"~":o.key=q.ESC+"[20~";break;case 121:l?o.key=q.ESC+"[21;"+(l+1)+"~":o.key=q.ESC+"[21~";break;case 122:l?o.key=q.ESC+"[23;"+(l+1)+"~":o.key=q.ESC+"[23~";break;case 123:l?o.key=q.ESC+"[24;"+(l+1)+"~":o.key=q.ESC+"[24~";break;default:if(e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey)e.keyCode>=65&&e.keyCode<=90?o.key=String.fromCharCode(e.keyCode-64):e.keyCode===32?o.key=q.NUL:e.keyCode>=51&&e.keyCode<=55?o.key=String.fromCharCode(e.keyCode-51+27):e.keyCode===56?o.key=q.DEL:e.keyCode===219?o.key=q.ESC:e.keyCode===220?o.key=q.FS:e.keyCode===221&&(o.key=q.GS);else if((!r||n)&&e.altKey&&!e.metaKey){let c=rE[e.keyCode]?.[e.shiftKey?1:0];if(c)o.key=q.ESC+c;else if(e.keyCode>=65&&e.keyCode<=90){let h=e.ctrlKey?e.keyCode-64:e.keyCode+32,p=String.fromCharCode(h);e.shiftKey&&(p=p.toUpperCase()),o.key=q.ESC+p}else if(e.keyCode===32)o.key=q.ESC+(e.ctrlKey?q.NUL:" ");else if(e.key==="Dead"&&e.code.startsWith("Key")){let h=e.code.slice(3,4);e.shiftKey||(h=h.toLowerCase()),o.key=q.ESC+h,o.cancel=!0}}else r&&!e.altKey&&!e.ctrlKey&&!e.shiftKey&&e.metaKey?e.keyCode===65&&(o.type=1):e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.keyCode>=48&&e.key.length===1?o.key=e.key:e.key&&e.ctrlKey&&(e.key==="_"&&(o.key=q.US),e.key==="@"&&(o.key=q.NUL));break}return o}var Xe=0,sE=class{constructor(e){this._getKey=e,this._array=[],this._insertedValues=[],this._flushInsertedTask=new Ya,this._isFlushingInserted=!1,this._deletedIndices=[],this._flushDeletedTask=new Ya,this._isFlushingDeleted=!1}clear(){this._array.length=0,this._insertedValues.length=0,this._flushInsertedTask.clear(),this._isFlushingInserted=!1,this._deletedIndices.length=0,this._flushDeletedTask.clear(),this._isFlushingDeleted=!1}insert(e){this._flushCleanupDeleted(),this._insertedValues.length===0&&this._flushInsertedTask.enqueue(()=>this._flushInserted()),this._insertedValues.push(e)}_flushInserted(){let e=this._insertedValues.sort((o,l)=>this._getKey(o)-this._getKey(l)),t=0,r=0,n=new Array(this._array.length+this._insertedValues.length);for(let o=0;o<n.length;o++)r>=this._array.length||this._getKey(e[t])<=this._getKey(this._array[r])?(n[o]=e[t],t++):n[o]=this._array[r++];this._array=n,this._insertedValues.length=0}_flushCleanupInserted(){!this._isFlushingInserted&&this._insertedValues.length>0&&this._flushInsertedTask.flush()}delete(e){if(this._flushCleanupInserted(),this._array.length===0)return!1;let t=this._getKey(e);if(t===void 0||(Xe=this._search(t),Xe===-1)||this._getKey(this._array[Xe])!==t)return!1;do if(this._array[Xe]===e)return this._deletedIndices.length===0&&this._flushDeletedTask.enqueue(()=>this._flushDeleted()),this._deletedIndices.push(Xe),!0;while(++Xe<this._array.length&&this._getKey(this._array[Xe])===t);return!1}_flushDeleted(){this._isFlushingDeleted=!0;let e=this._deletedIndices.sort((o,l)=>o-l),t=0,r=new Array(this._array.length-e.length),n=0;for(let o=0;o<this._array.length;o++)e[t]===o?t++:r[n++]=this._array[o];this._array=r,this._deletedIndices.length=0,this._isFlushingDeleted=!1}_flushCleanupDeleted(){!this._isFlushingDeleted&&this._deletedIndices.length>0&&this._flushDeletedTask.flush()}*getKeyIterator(e){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(Xe=this._search(e),!(Xe<0||Xe>=this._array.length)&&this._getKey(this._array[Xe])===e))do yield this._array[Xe];while(++Xe<this._array.length&&this._getKey(this._array[Xe])===e)}forEachByKey(e,t){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(Xe=this._search(e),!(Xe<0||Xe>=this._array.length)&&this._getKey(this._array[Xe])===e))do t(this._array[Xe]);while(++Xe<this._array.length&&this._getKey(this._array[Xe])===e)}values(){return this._flushCleanupInserted(),this._flushCleanupDeleted(),[...this._array].values()}_search(e){let t=0,r=this._array.length-1;for(;r>=t;){let n=t+r>>1,o=this._getKey(this._array[n]);if(o>e)r=n-1;else if(o<e)t=n+1;else{for(;n>0&&this._getKey(this._array[n-1])===e;)n--;return n}}return t}},Lu=0,zg=0,nE=class extends be{constructor(){super(),this._decorations=new sE(e=>e?.marker.line),this._onDecorationRegistered=this._register(new se),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this._register(new se),this.onDecorationRemoved=this._onDecorationRemoved.event,this._register(ze(()=>this.reset()))}get decorations(){return this._decorations.values()}registerDecoration(e){if(e.marker.isDisposed)return;let t=new oE(e);if(t){let r=t.marker.onDispose(()=>t.dispose()),n=t.onDispose(()=>{n.dispose(),t&&(this._decorations.delete(t)&&this._onDecorationRemoved.fire(t),r.dispose())});this._decorations.insert(t),this._onDecorationRegistered.fire(t)}return t}reset(){for(let e of this._decorations.values())e.dispose();this._decorations.clear()}*getDecorationsAtCell(e,t,r){let n=0,o=0;for(let l of this._decorations.getKeyIterator(t))n=l.options.x??0,o=n+(l.options.width??1),e>=n&&e<o&&(!r||(l.options.layer??"bottom")===r)&&(yield l)}forEachDecorationAtCell(e,t,r,n){this._decorations.forEachByKey(t,o=>{Lu=o.options.x??0,zg=Lu+(o.options.width??1),e>=Lu&&e<zg&&(!r||(o.options.layer??"bottom")===r)&&n(o)})}},oE=class extends yi{constructor(e){super(),this.options=e,this.onRenderEmitter=this.add(new se),this.onRender=this.onRenderEmitter.event,this._onDispose=this.add(new se),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=e.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=Ue.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=Ue.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}},aE=1e3,lE=class{constructor(e,t=aE){this._renderCallback=e,this._debounceThresholdMS=t,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(e,t,r){this._rowCount=r,e=e!==void 0?e:0,t=t!==void 0?t:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,e):e,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,t):t;let n=performance.now();if(n-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=n,this._innerRefresh();else if(!this._additionalRefreshRequested){let o=n-this._lastRefreshMs,l=this._debounceThresholdMS-o;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=performance.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},l)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t)}},Hg=20,Ga=class extends be{constructor(e,t,r,n){super(),this._terminal=e,this._coreBrowserService=r,this._renderService=n,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="";let o=this._coreBrowserService.mainDocument;this._accessibilityContainer=o.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=o.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let l=0;l<this._terminal.rows;l++)this._rowElements[l]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[l]);if(this._topBoundaryFocusListener=l=>this._handleBoundaryFocus(l,0),this._bottomBoundaryFocusListener=l=>this._handleBoundaryFocus(l,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=o.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this._register(new lE(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this._register(this._terminal.onResize(l=>this._handleResize(l.rows))),this._register(this._terminal.onRender(l=>this._refreshRows(l.start,l.end))),this._register(this._terminal.onScroll(()=>this._refreshRows())),this._register(this._terminal.onA11yChar(l=>this._handleChar(l))),this._register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this._register(this._terminal.onA11yTab(l=>this._handleTab(l))),this._register(this._terminal.onKey(l=>this._handleKey(l.key))),this._register(this._terminal.onBlur(()=>this._clearLiveRegion())),this._register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._register(_e(o,"selectionchange",()=>this._handleSelectionChange())),this._register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRowsDimensions(),this._refreshRows(),this._register(ze(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(e){for(let t=0;t<e;t++)this._handleChar(" ")}_handleChar(e){this._liveRegionLineCount<Hg+1&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,e===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===Hg+1&&(this._liveRegion.textContent+=Ku.get())))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(e){this._clearLiveRegion(),/\p{Control}/u.test(e)||this._charsToConsume.push(e)}_refreshRows(e,t){this._liveRegionDebouncer.refresh(e,t,this._terminal.rows)}_renderRows(e,t){let r=this._terminal.buffer,n=r.lines.length.toString();for(let o=e;o<=t;o++){let l=r.lines.get(r.ydisp+o),c=[],h=l?.translateToString(!0,void 0,void 0,c)||"",p=(r.ydisp+o+1).toString(),d=this._rowElements[o];d&&(h.length===0?(d.textContent="",this._rowColumns.set(d,[0,1])):(d.textContent=h,this._rowColumns.set(d,c)),d.setAttribute("aria-posinset",p),d.setAttribute("aria-setsize",n),this._alignRowWidth(d))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(e,t){let r=e.target,n=this._rowElements[t===0?1:this._rowElements.length-2],o=r.getAttribute("aria-posinset"),l=t===0?"1":`${this._terminal.buffer.lines.length}`;if(o===l||e.relatedTarget!==n)return;let c,h;if(t===0?(c=r,h=this._rowElements.pop(),this._rowContainer.removeChild(h)):(c=this._rowElements.shift(),h=r,this._rowContainer.removeChild(c)),c.removeEventListener("focus",this._topBoundaryFocusListener),h.removeEventListener("focus",this._bottomBoundaryFocusListener),t===0){let p=this._createAccessibilityTreeNode();this._rowElements.unshift(p),this._rowContainer.insertAdjacentElement("afterbegin",p)}else{let p=this._createAccessibilityTreeNode();this._rowElements.push(p),this._rowContainer.appendChild(p)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(t===0?-1:1),this._rowElements[t===0?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;let e=this._coreBrowserService.mainDocument.getSelection();if(!e)return;if(e.isCollapsed){this._rowContainer.contains(e.anchorNode)&&this._terminal.clearSelection();return}if(!e.anchorNode||!e.focusNode){console.error("anchorNode and/or focusNode are null");return}let t={node:e.anchorNode,offset:e.anchorOffset},r={node:e.focusNode,offset:e.focusOffset};if((t.node.compareDocumentPosition(r.node)&Node.DOCUMENT_POSITION_PRECEDING||t.node===r.node&&t.offset>r.offset)&&([t,r]=[r,t]),t.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(t={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(t.node))return;let n=this._rowElements.slice(-1)[0];if(r.node.compareDocumentPosition(n)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(r={node:n,offset:n.textContent?.length??0}),!this._rowContainer.contains(r.node))return;let o=({node:h,offset:p})=>{let d=h instanceof Text?h.parentNode:h,v=parseInt(d?.getAttribute("aria-posinset"),10)-1;if(isNaN(v))return console.warn("row is invalid. Race condition?"),null;let _=this._rowColumns.get(d);if(!_)return console.warn("columns is null. Race condition?"),null;let S=p<_.length?_[p]:_.slice(-1)[0]+1;return S>=this._terminal.cols&&(++v,S=0),{row:v,column:S}},l=o(t),c=o(r);if(!(!l||!c)){if(l.row>c.row||l.row===c.row&&l.column>=c.column)throw new Error("invalid range");this._terminal.select(l.column,l.row,(c.row-l.row)*this._terminal.cols-l.column+c.column)}}_handleResize(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let t=this._rowContainer.children.length;t<this._terminal.rows;t++)this._rowElements[t]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[t]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let e=this._coreBrowserService.mainDocument.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){Object.assign(this._accessibilityContainer.style,{width:`${this._renderService.dimensions.css.canvas.width}px`,fontSize:`${this._terminal.options.fontSize}px`}),this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e]),this._alignRowWidth(this._rowElements[e])}}_refreshRowDimensions(e){e.style.height=`${this._renderService.dimensions.css.cell.height}px`}_alignRowWidth(e){e.style.transform="";let t=e.getBoundingClientRect().width,r=this._rowColumns.get(e)?.slice(-1)?.[0];if(!r)return;let n=r*this._renderService.dimensions.css.cell.width;e.style.transform=`scaleX(${n/t})`}};Ga=Qe([oe(1,Kh),oe(2,Kr),oe(3,Vr)],Ga);var Eh=class extends be{constructor(e,t,r,n,o){super(),this._element=e,this._mouseService=t,this._renderService=r,this._bufferService=n,this._linkProviderService=o,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this._register(new se),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this._register(new se),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this._register(ze(()=>{Ki(this._linkCacheDisposables),this._linkCacheDisposables.length=0,this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this._register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this._register(_e(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this._register(_e(this._element,"mousemove",this._handleMouseMove.bind(this))),this._register(_e(this._element,"mousedown",this._handleMouseDown.bind(this))),this._register(_e(this._element,"mouseup",this._handleMouseUp.bind(this)))}get currentLink(){return this._currentLink}_handleMouseMove(e){this._lastMouseEvent=e;let t=this._positionFromMouseEvent(e,this._element,this._mouseService);if(!t)return;this._isMouseOut=!1;let r=e.composedPath();for(let n=0;n<r.length;n++){let o=r[n];if(o.classList.contains("xterm"))break;if(o.classList.contains("xterm-hover"))return}(!this._lastBufferCell||t.x!==this._lastBufferCell.x||t.y!==this._lastBufferCell.y)&&(this._handleHover(t),this._lastBufferCell=t)}_handleHover(e){if(this._activeLine!==e.y||this._wasResized){this._clearCurrentLink(),this._askForLink(e,!1),this._wasResized=!1;return}this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))}_askForLink(e,t){(!this._activeProviderReplies||!t)&&(this._activeProviderReplies?.forEach(n=>{n?.forEach(o=>{o.link.dispose&&o.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);let r=!1;for(let[n,o]of this._linkProviderService.linkProviders.entries())t?this._activeProviderReplies?.get(n)&&(r=this._checkLinkProviderResult(n,e,r)):o.provideLinks(e.y,l=>{if(this._isMouseOut)return;let c=l?.map(h=>({link:h}));this._activeProviderReplies?.set(n,c),r=this._checkLinkProviderResult(n,e,r),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(e.y,this._activeProviderReplies)})}_removeIntersectingLinks(e,t){let r=new Set;for(let n=0;n<t.size;n++){let o=t.get(n);if(o)for(let l=0;l<o.length;l++){let c=o[l],h=c.link.range.start.y<e?0:c.link.range.start.x,p=c.link.range.end.y>e?this._bufferService.cols:c.link.range.end.x;for(let d=h;d<=p;d++){if(r.has(d)){o.splice(l--,1);break}r.add(d)}}}}_checkLinkProviderResult(e,t,r){if(!this._activeProviderReplies)return r;let n=this._activeProviderReplies.get(e),o=!1;for(let l=0;l<e;l++)(!this._activeProviderReplies.has(l)||this._activeProviderReplies.get(l))&&(o=!0);if(!o&&n){let l=n.find(c=>this._linkAtPosition(c.link,t));l&&(r=!0,this._handleNewLink(l))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!r)for(let l=0;l<this._activeProviderReplies.size;l++){let c=this._activeProviderReplies.get(l)?.find(h=>this._linkAtPosition(h.link,t));if(c){r=!0,this._handleNewLink(c);break}}return r}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(e){if(!this._currentLink)return;let t=this._positionFromMouseEvent(e,this._element,this._mouseService);t&&this._mouseDownLink&&cE(this._mouseDownLink.link,this._currentLink.link)&&this._linkAtPosition(this._currentLink.link,t)&&this._currentLink.link.activate(e,this._currentLink.link.text)}_clearCurrentLink(e,t){!this._currentLink||!this._lastMouseEvent||(!e||!t||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=t)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,Ki(this._linkCacheDisposables),this._linkCacheDisposables.length=0)}_handleNewLink(e){if(!this._lastMouseEvent)return;let t=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);t&&this._linkAtPosition(e.link,t)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0?!0:e.link.decorations.underline,pointerCursor:e.link.decorations===void 0?!0:e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:r=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==r&&(this._currentLink.state.decorations.pointerCursor=r,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",r))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:r=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==r&&(this._currentLink.state.decorations.underline=r,this._currentLink.state.isHovered&&this._fireUnderlineEvent(e.link,r))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(r=>{if(!this._currentLink)return;let n=r.start===0?0:r.start+1+this._bufferService.buffer.ydisp,o=this._bufferService.buffer.ydisp+1+r.end;if(this._currentLink.link.range.start.y>=n&&this._currentLink.link.range.end.y<=o&&(this._clearCurrentLink(n,o),this._lastMouseEvent)){let l=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);l&&this._askForLink(l,!1)}})))}_linkHover(e,t,r){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),t.hover&&t.hover(r,t.text)}_fireUnderlineEvent(e,t){let r=e.range,n=this._bufferService.buffer.ydisp,o=this._createLinkUnderlineEvent(r.start.x-1,r.start.y-n-1,r.end.x,r.end.y-n-1,void 0);(t?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(o)}_linkLeave(e,t,r){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),t.leave&&t.leave(r,t.text)}_linkAtPosition(e,t){let r=e.range.start.y*this._bufferService.cols+e.range.start.x,n=e.range.end.y*this._bufferService.cols+e.range.end.x,o=t.y*this._bufferService.cols+t.x;return r<=o&&o<=n}_positionFromMouseEvent(e,t,r){let n=r.getCoords(e,t,this._bufferService.cols,this._bufferService.rows);if(n)return{x:n[0],y:n[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(e,t,r,n,o){return{x1:e,y1:t,x2:r,y2:n,cols:this._bufferService.cols,fg:o}}};Eh=Qe([oe(1,Vh),oe(2,Vr),oe(3,Nt),oe(4,dv)],Eh);function cE(e,t){return e.text===t.text&&e.range.start.x===t.range.start.x&&e.range.start.y===t.range.start.y&&e.range.end.x===t.range.end.x&&e.range.end.y===t.range.end.y}var uE=class extends tE{constructor(e={}){super(e),this._linkifier=this._register(new Rs),this.browser=Dv,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this._register(new Rs),this._onCursorMove=this._register(new se),this.onCursorMove=this._onCursorMove.event,this._onKey=this._register(new se),this.onKey=this._onKey.event,this._onRender=this._register(new se),this.onRender=this._onRender.event,this._onSelectionChange=this._register(new se),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this._register(new se),this.onTitleChange=this._onTitleChange.event,this._onBell=this._register(new se),this.onBell=this._onBell.event,this._onFocus=this._register(new se),this._onBlur=this._register(new se),this._onA11yCharEmitter=this._register(new se),this._onA11yTabEmitter=this._register(new se),this._onWillOpen=this._register(new se),this._setup(),this._decorationService=this._instantiationService.createInstance(nE),this._instantiationService.setService(io,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(Zk),this._instantiationService.setService(dv,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(qu)),this._register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this._register(this._inputHandler.onRequestRefreshRows(t=>this.refresh(t?.start??0,t?.end??this.rows-1))),this._register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this._register(this._inputHandler.onRequestReset(()=>this.reset())),this._register(this._inputHandler.onRequestWindowsOptionsReport(t=>this._reportWindowsOptions(t))),this._register(this._inputHandler.onColor(t=>this._handleColorEvent(t))),this._register(vt.forward(this._inputHandler.onCursorMove,this._onCursorMove)),this._register(vt.forward(this._inputHandler.onTitleChange,this._onTitleChange)),this._register(vt.forward(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this._register(vt.forward(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this._register(this._bufferService.onResize(t=>this._afterResize(t.cols,t.rows))),this._register(ze(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}get linkifier(){return this._linkifier.value}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(e){if(this._themeService)for(let t of e){let r,n="";switch(t.index){case 256:r="foreground",n="10";break;case 257:r="background",n="11";break;case 258:r="cursor",n="12";break;default:r="ansi",n="4;"+t.index}switch(t.type){case 0:let o=Ie.toColorRGB(r==="ansi"?this._themeService.colors.ansi[t.index]:this._themeService.colors[r]);this.coreService.triggerDataEvent(`${q.ESC}]${n};${Y2(o)}${Nv.ST}`);break;case 1:if(r==="ansi")this._themeService.modifyColors(l=>l.ansi[t.index]=et.toColor(...t.color));else{let l=r;this._themeService.modifyColors(c=>c[l]=et.toColor(...t.color))}break;case 2:this._themeService.restoreColor(t.index);break}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(e){e?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(Ga,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(e){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(q.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(q.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let e=this.buffer.ybase+this.buffer.y,t=this.buffer.lines.get(e);if(!t)return;let r=Math.min(this.buffer.x,this.cols-1),n=this._renderService.dimensions.css.cell.height,o=t.getWidth(r),l=this._renderService.dimensions.css.cell.width*o,c=this.buffer.y*this._renderService.dimensions.css.cell.height,h=r*this._renderService.dimensions.css.cell.width;this.textarea.style.left=h+"px",this.textarea.style.top=c+"px",this.textarea.style.width=l+"px",this.textarea.style.height=n+"px",this.textarea.style.lineHeight=n+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this._register(_e(this.element,"copy",t=>{this.hasSelection()&&pC(t,this._selectionService)}));let e=t=>mC(t,this.textarea,this.coreService,this.optionsService);this._register(_e(this.textarea,"paste",e)),this._register(_e(this.element,"paste",e)),Mv?this._register(_e(this.element,"mousedown",t=>{t.button===2&&Xm(t,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this._register(_e(this.element,"contextmenu",t=>{Xm(t,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),ed&&this._register(_e(this.element,"auxclick",t=>{t.button===1&&iv(t,this.textarea,this.screenElement)}))}_bindKeys(){this._register(_e(this.textarea,"keyup",e=>this._keyUp(e),!0)),this._register(_e(this.textarea,"keydown",e=>this._keyDown(e),!0)),this._register(_e(this.textarea,"keypress",e=>this._keyPress(e),!0)),this._register(_e(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this._register(_e(this.textarea,"compositionupdate",e=>this._compositionHelper.compositionupdate(e))),this._register(_e(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this._register(_e(this.textarea,"input",e=>this._inputEvent(e),!0)),this._register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(e){if(!e)throw new Error("Terminal requires a parent element.");if(e.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService){this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView);return}this._document=e.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),e.appendChild(this.element);let t=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),t.appendChild(this._viewportElement),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._register(_e(this.screenElement,"mousemove",o=>this.updateCursorStyle(o))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),t.appendChild(this.screenElement);let r=this.textarea=this._document.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",Uu.get()),jv||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._register(this.optionsService.onSpecificOptionChange("disableStdin",()=>r.readOnly=this.optionsService.rawOptions.disableStdin)),this.textarea.readOnly=this.optionsService.rawOptions.disableStdin,this._coreBrowserService=this._register(this._instantiationService.createInstance(Xk,this.textarea,e.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(Kr,this._coreBrowserService),this._register(_e(this.textarea,"focus",o=>this._handleTextAreaFocus(o))),this._register(_e(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(ph,this._document,this._helperContainer),this._instantiationService.setService(il,this._charSizeService),this._themeService=this._instantiationService.createInstance(vh),this._instantiationService.setService(Os,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(qa),this._instantiationService.setService(hv,this._characterJoinerService),this._renderService=this._register(this._instantiationService.createInstance(gh,this.rows,this.screenElement)),this._instantiationService.setService(Vr,this._renderService),this._register(this._renderService.onRenderedViewportChange(o=>this._onRender.fire(o))),this.onResize(o=>this._renderService.resize(o.cols,o.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(hh,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(mh),this._instantiationService.setService(Vh,this._mouseService);let n=this._linkifier.value=this._register(this._instantiationService.createInstance(Eh,this.screenElement));this.element.appendChild(t);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this._register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this._register(this.onBlur(()=>this._renderService.handleBlur())),this._register(this.onFocus(()=>this._renderService.handleFocus())),this._viewport=this._register(this._instantiationService.createInstance(ch,this.element,this.screenElement)),this._register(this._viewport.onRequestScrollLines(o=>{super.scrollLines(o,!1),this.refresh(0,this.rows-1)})),this._selectionService=this._register(this._instantiationService.createInstance(_h,this.element,this.screenElement,n)),this._instantiationService.setService(bC,this._selectionService),this._register(this._selectionService.onRequestScrollLines(o=>this.scrollLines(o.amount,o.suppressScrollEvent))),this._register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this._register(this._selectionService.onRequestRedraw(o=>this._renderService.handleSelectionChanged(o.start,o.end,o.columnSelectMode))),this._register(this._selectionService.onLinuxMouseSelection(o=>{this.textarea.value=o,this.textarea.focus(),this.textarea.select()})),this._register(vt.any(this._onScroll.event,this._inputHandler.onScroll)(()=>{this._selectionService.refresh(),this._viewport?.queueSync()})),this._register(this._instantiationService.createInstance(uh,this.screenElement)),this._register(_e(this.element,"mousedown",o=>this._selectionService.handleMouseDown(o))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(Ga,this)),this._register(this.optionsService.onSpecificOptionChange("screenReaderMode",o=>this._handleScreenReaderModeOptionChange(o))),this.options.overviewRuler.width&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(Va,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRuler",o=>{!this._overviewRulerRenderer&&o&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(Va,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(fh,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let e=this,t=this.element;function r(l){let c=e._mouseService.getMouseReportCoords(l,e.screenElement);if(!c)return!1;let h,p;switch(l.overrideType||l.type){case"mousemove":p=32,l.buttons===void 0?(h=3,l.button!==void 0&&(h=l.button<3?l.button:3)):h=l.buttons&1?0:l.buttons&4?1:l.buttons&2?2:3;break;case"mouseup":p=0,h=l.button<3?l.button:3;break;case"mousedown":p=1,h=l.button<3?l.button:3;break;case"wheel":if(e._customWheelEventHandler&&e._customWheelEventHandler(l)===!1)return!1;let d=l.deltaY;if(d===0||e.coreMouseService.consumeWheelEvent(l,e._renderService?.dimensions?.device?.cell?.height,e._coreBrowserService?.dpr)===0)return!1;p=d<0?0:1,h=4;break;default:return!1}return p===void 0||h===void 0||h>4?!1:e.coreMouseService.triggerMouseEvent({col:c.col,row:c.row,x:c.x,y:c.y,button:h,action:p,ctrl:l.ctrlKey,alt:l.altKey,shift:l.shiftKey})}let n={mouseup:null,wheel:null,mousedrag:null,mousemove:null},o={mouseup:l=>(r(l),l.buttons||(this._document.removeEventListener("mouseup",n.mouseup),n.mousedrag&&this._document.removeEventListener("mousemove",n.mousedrag)),this.cancel(l)),wheel:l=>(r(l),this.cancel(l,!0)),mousedrag:l=>{l.buttons&&r(l)},mousemove:l=>{l.buttons||r(l)}};this._register(this.coreMouseService.onProtocolChange(l=>{l?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(l)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),l&8?n.mousemove||(t.addEventListener("mousemove",o.mousemove),n.mousemove=o.mousemove):(t.removeEventListener("mousemove",n.mousemove),n.mousemove=null),l&16?n.wheel||(t.addEventListener("wheel",o.wheel,{passive:!1}),n.wheel=o.wheel):(t.removeEventListener("wheel",n.wheel),n.wheel=null),l&2?n.mouseup||(n.mouseup=o.mouseup):(this._document.removeEventListener("mouseup",n.mouseup),n.mouseup=null),l&4?n.mousedrag||(n.mousedrag=o.mousedrag):(this._document.removeEventListener("mousemove",n.mousedrag),n.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this._register(_e(t,"mousedown",l=>{if(l.preventDefault(),this.focus(),!(!this.coreMouseService.areMouseEventsActive||this._selectionService.shouldForceSelection(l)))return r(l),n.mouseup&&this._document.addEventListener("mouseup",n.mouseup),n.mousedrag&&this._document.addEventListener("mousemove",n.mousedrag),this.cancel(l)})),this._register(_e(t,"wheel",l=>{if(!n.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(l)===!1)return!1;if(!this.buffer.hasScrollback){if(l.deltaY===0)return!1;if(e.coreMouseService.consumeWheelEvent(l,e._renderService?.dimensions?.device?.cell?.height,e._coreBrowserService?.dpr)===0)return this.cancel(l,!0);let c=q.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(l.deltaY<0?"A":"B");return this.coreService.triggerDataEvent(c,!0),this.cancel(l,!0)}}},{passive:!1}))}refresh(e,t){this._renderService?.refreshRows(e,t)}updateCursorStyle(e){this._selectionService?.shouldColumnSelect(e)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(e,t){this._viewport?this._viewport.scrollLines(e):super.scrollLines(e,t),this.refresh(0,this.rows-1)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(e){e&&this._viewport?this._viewport.scrollToLine(this.buffer.ybase,!0):this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){let t=e-this._bufferService.buffer.ydisp;t!==0&&this.scrollLines(t)}paste(e){rv(e,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(e){this._customKeyEventHandler=e}attachCustomWheelEventHandler(e){this._customWheelEventHandler=e}registerLinkProvider(e){return this._linkProviderService.registerLinkProvider(e)}registerCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let t=this._characterJoinerService.register(e);return this.refresh(0,this.rows-1),t}deregisterCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(e)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(e){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)}registerDecoration(e){return this._decorationService.registerDecoration(e)}hasSelection(){return this._selectionService?this._selectionService.hasSelection:!1}select(e,t,r){this._selectionService.setSelection(e,t,r)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(!(!this._selectionService||!this._selectionService.hasSelection))return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(e,t){this._selectionService?.selectLines(e,t)}_keyDown(e){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)return!1;let t=this.browser.isMac&&this.options.macOptionIsMeta&&e.altKey;if(!t&&!this._compositionHelper.keydown(e))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(!0),!1;!t&&(e.key==="Dead"||e.key==="AltGraph")&&(this._unprocessedDeadKey=!0);let r=iE(e,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),r.type===3||r.type===2){let n=this.rows-1;return this.scrollLines(r.type===2?-n:n),this.cancel(e,!0)}if(r.type===1&&this.selectAll(),this._isThirdLevelShift(this.browser,e)||(r.cancel&&this.cancel(e,!0),!r.key)||e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.key.length===1&&e.key.charCodeAt(0)>=65&&e.key.charCodeAt(0)<=90)return!0;if(this._unprocessedDeadKey)return this._unprocessedDeadKey=!1,!0;if((r.key===q.ETX||r.key===q.CR)&&(this.textarea.value=""),this._onKey.fire({key:r.key,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(r.key,!0),!this.optionsService.rawOptions.screenReaderMode||e.altKey||e.ctrlKey)return this.cancel(e,!0);this._keyDownHandled=!0}_isThirdLevelShift(e,t){let r=e.isMac&&!this.options.macOptionIsMeta&&t.altKey&&!t.ctrlKey&&!t.metaKey||e.isWindows&&t.altKey&&t.ctrlKey&&!t.metaKey||e.isWindows&&t.getModifierState("AltGraph");return t.type==="keypress"?r:r&&(!t.keyCode||t.keyCode>47)}_keyUp(e){this._keyDownSeen=!1,!(this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)&&(hE(e)||this.focus(),this.updateCursorStyle(e),this._keyPressHandled=!1)}_keyPress(e){let t;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)return!1;if(this.cancel(e),e.charCode)t=e.charCode;else if(e.which===null||e.which===void 0)t=e.keyCode;else if(e.which!==0&&e.charCode!==0)t=e.which;else return!1;return!t||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e)?!1:(t=String.fromCharCode(t),this._onKey.fire({key:t,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(t,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,!0)}_inputEvent(e){if(e.data&&e.inputType==="insertText"&&(!e.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let t=e.data;return this.coreService.triggerDataEvent(t,!0),this.cancel(e),!0}return!1}resize(e,t){if(e===this.cols&&t===this.rows){this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure();return}super.resize(e,t)}_afterResize(e,t){this._charSizeService?.measure()}clear(){if(!(this.buffer.ybase===0&&this.buffer.y===0)){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let e=1;e<this.rows;e++)this.buffer.lines.push(this.buffer.getBlankLine(Ze));this._onScroll.fire({position:this.buffer.ydisp}),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;let e=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this._customKeyEventHandler=e,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(q.ESC+"[I"):this.coreService.triggerDataEvent(q.ESC+"[O")}_reportWindowsOptions(e){if(this._renderService)switch(e){case 0:let t=this._renderService.dimensions.css.canvas.width.toFixed(0),r=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${q.ESC}[4;${r};${t}t`);break;case 1:let n=this._renderService.dimensions.css.cell.width.toFixed(0),o=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${q.ESC}[6;${o};${n}t`);break}}cancel(e,t){if(!(!this.options.cancelEvents&&!t))return e.preventDefault(),e.stopPropagation(),!1}};function hE(e){return e.keyCode===16||e.keyCode===17||e.keyCode===18}var dE=class{constructor(){this._addons=[]}dispose(){for(let e=this._addons.length-1;e>=0;e--)this._addons[e].instance.dispose()}loadAddon(e,t){let r={instance:t,dispose:t.dispose,isDisposed:!1};this._addons.push(r),t.dispose=()=>this._wrappedAddonDispose(r),t.activate(e)}_wrappedAddonDispose(e){if(e.isDisposed)return;let t=-1;for(let r=0;r<this._addons.length;r++)if(this._addons[r]===e){t=r;break}if(t===-1)throw new Error("Could not dispose an addon that has not been loaded");e.isDisposed=!0,e.dispose.apply(e.instance),this._addons.splice(t,1)}},fE=class{constructor(e){this._line=e}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(e,t){if(!(e<0||e>=this._line.length))return t?(this._line.loadCell(e,t),t):this._line.loadCell(e,new sr)}translateToString(e,t,r){return this._line.translateToString(e,t,r)}},$g=class{constructor(e,t){this._buffer=e,this.type=t}init(e){return this._buffer=e,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(e){let t=this._buffer.lines.get(e);if(t)return new fE(t)}getNullCell(){return new sr}},pE=class extends be{constructor(e){super(),this._core=e,this._onBufferChange=this._register(new se),this.onBufferChange=this._onBufferChange.event,this._normal=new $g(this._core.buffers.normal,"normal"),this._alternate=new $g(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}},mE=class{constructor(e){this._core=e}registerCsiHandler(e,t){return this._core.registerCsiHandler(e,r=>t(r.toArray()))}addCsiHandler(e,t){return this.registerCsiHandler(e,t)}registerDcsHandler(e,t){return this._core.registerDcsHandler(e,(r,n)=>t(r,n.toArray()))}addDcsHandler(e,t){return this.registerDcsHandler(e,t)}registerEscHandler(e,t){return this._core.registerEscHandler(e,t)}addEscHandler(e,t){return this.registerEscHandler(e,t)}registerOscHandler(e,t){return this._core.registerOscHandler(e,t)}addOscHandler(e,t){return this.registerOscHandler(e,t)}},gE=class{constructor(e){this._core=e}register(e){this._core.unicodeService.register(e)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(e){this._core.unicodeService.activeVersion=e}},_E=["cols","rows"],br=0,vE=class extends be{constructor(e){super(),this._core=this._register(new uE(e)),this._addonManager=this._register(new dE),this._publicOptions={...this._core.options};let t=n=>this._core.options[n],r=(n,o)=>{this._checkReadonlyOptions(n),this._core.options[n]=o};for(let n in this._core.options){let o={get:t.bind(this,n),set:r.bind(this,n)};Object.defineProperty(this._publicOptions,n,o)}}_checkReadonlyOptions(e){if(_E.includes(e))throw new Error(`Option "${e}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new mE(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new gE(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this._register(new pE(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let e=this._core.coreService.decPrivateModes,t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any";break}return{applicationCursorKeysMode:e.applicationCursorKeys,applicationKeypadMode:e.applicationKeypad,bracketedPasteMode:e.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:e.origin,reverseWraparoundMode:e.reverseWraparound,sendFocusMode:e.sendFocus,synchronizedOutputMode:e.synchronizedOutput,wraparoundMode:e.wraparound}}get options(){return this._publicOptions}set options(e){for(let t in e)this._publicOptions[t]=e[t]}blur(){this._core.blur()}focus(){this._core.focus()}input(e,t=!0){this._core.input(e,t)}resize(e,t){this._verifyIntegers(e,t),this._core.resize(e,t)}open(e){this._core.open(e)}attachCustomKeyEventHandler(e){this._core.attachCustomKeyEventHandler(e)}attachCustomWheelEventHandler(e){this._core.attachCustomWheelEventHandler(e)}registerLinkProvider(e){return this._core.registerLinkProvider(e)}registerCharacterJoiner(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)}deregisterCharacterJoiner(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)}registerMarker(e=0){return this._verifyIntegers(e),this._core.registerMarker(e)}registerDecoration(e){return this._checkProposedApi(),this._verifyPositiveIntegers(e.x??0,e.width??0,e.height??0),this._core.registerDecoration(e)}hasSelection(){return this._core.hasSelection()}select(e,t,r){this._verifyIntegers(e,t,r),this._core.select(e,t,r)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(e,t){this._verifyIntegers(e,t),this._core.selectLines(e,t)}dispose(){super.dispose()}scrollLines(e){this._verifyIntegers(e),this._core.scrollLines(e)}scrollPages(e){this._verifyIntegers(e),this._core.scrollPages(e)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(e){this._verifyIntegers(e),this._core.scrollToLine(e)}clear(){this._core.clear()}write(e,t){this._core.write(e,t)}writeln(e,t){this._core.write(e),this._core.write(`\r
`,t)}paste(e){this._core.paste(e)}refresh(e,t){this._verifyIntegers(e,t),this._core.refresh(e,t)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(e){this._addonManager.loadAddon(this,e)}static get strings(){return{get promptLabel(){return Uu.get()},set promptLabel(e){Uu.set(e)},get tooMuchOutput(){return Ku.get()},set tooMuchOutput(e){Ku.set(e)}}}_verifyIntegers(...e){for(br of e)if(br===1/0||isNaN(br)||br%1!==0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...e){for(br of e)if(br&&(br===1/0||isNaN(br)||br%1!==0||br<0))throw new Error("This API only accepts positive integers")}};/**
 * Copyright (c) 2014-2024 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * @license MIT
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 */var yE=2,SE=1,wE=class{activate(e){this._terminal=e}dispose(){}fit(){let e=this.proposeDimensions();if(!e||!this._terminal||isNaN(e.cols)||isNaN(e.rows))return;let t=this._terminal._core;(this._terminal.rows!==e.rows||this._terminal.cols!==e.cols)&&(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let e=this._terminal._core._renderService.dimensions;if(e.css.cell.width===0||e.css.cell.height===0)return;let t=this._terminal.options.scrollback===0?0:this._terminal.options.overviewRuler?.width||14,r=window.getComputedStyle(this._terminal.element.parentElement),n=parseInt(r.getPropertyValue("height")),o=Math.max(0,parseInt(r.getPropertyValue("width"))),l=window.getComputedStyle(this._terminal.element),c={top:parseInt(l.getPropertyValue("padding-top")),bottom:parseInt(l.getPropertyValue("padding-bottom")),right:parseInt(l.getPropertyValue("padding-right")),left:parseInt(l.getPropertyValue("padding-left"))},h=c.top+c.bottom,p=c.right+c.left,d=n-h,v=o-p-t;return{cols:Math.max(yE,Math.floor(v/e.css.cell.width)),rows:Math.max(SE,Math.floor(d/e.css.cell.height))}}};/**
 * Copyright (c) 2014-2024 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * @license MIT
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 */var xE=class{constructor(e,t,r,n={}){this._terminal=e,this._regex=t,this._handler=r,this._options=n}provideLinks(e,t){let r=CE.computeLink(e,this._regex,this._terminal,this._handler);t(this._addCallbacks(r))}_addCallbacks(e){return e.map(t=>(t.leave=this._options.leave,t.hover=(r,n)=>{if(this._options.hover){let{range:o}=t;this._options.hover(r,n,o)}},t))}};function bE(e){try{let t=new URL(e),r=t.password&&t.username?`${t.protocol}//${t.username}:${t.password}@${t.host}`:t.username?`${t.protocol}//${t.username}@${t.host}`:`${t.protocol}//${t.host}`;return e.toLocaleLowerCase().startsWith(r.toLocaleLowerCase())}catch{return!1}}var CE=class Ba{static computeLink(t,r,n,o){let l=new RegExp(r.source,(r.flags||"")+"g"),[c,h]=Ba._getWindowedLineStrings(t-1,n),p=c.join(""),d,v=[];for(;d=l.exec(p);){let _=d[0];if(!bE(_))continue;let[S,x]=Ba._mapStrIdx(n,h,0,d.index),[w,b]=Ba._mapStrIdx(n,S,x,_.length);if(S===-1||x===-1||w===-1||b===-1)continue;let E={start:{x:x+1,y:S+1},end:{x:b,y:w+1}};v.push({range:E,text:_,activate:o})}return v}static _getWindowedLineStrings(t,r){let n,o=t,l=t,c=0,h="",p=[];if(n=r.buffer.active.getLine(t)){let d=n.translateToString(!0);if(n.isWrapped&&d[0]!==" "){for(c=0;(n=r.buffer.active.getLine(--o))&&c<2048&&(h=n.translateToString(!0),c+=h.length,p.push(h),!(!n.isWrapped||h.indexOf(" ")!==-1)););p.reverse()}for(p.push(d),c=0;(n=r.buffer.active.getLine(++l))&&n.isWrapped&&c<2048&&(h=n.translateToString(!0),c+=h.length,p.push(h),h.indexOf(" ")===-1););}return[p,o]}static _mapStrIdx(t,r,n,o){let l=t.buffer.active,c=l.getNullCell(),h=n;for(;o;){let p=l.getLine(r);if(!p)return[-1,-1];for(let d=h;d<p.length;++d){p.getCell(d,c);let v=c.getChars();if(c.getWidth()&&(o-=v.length||1,d===p.length-1&&v==="")){let _=l.getLine(r+1);_&&_.isWrapped&&(_.getCell(0,c),c.getWidth()===2&&(o+=1))}if(o<0)return[r,d]}r++,h=0}return[r,h]}},kE=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function EE(e,t){let r=window.open();if(r){try{r.opener=null}catch{}r.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}var PE=class{constructor(e=EE,t={}){this._handler=e,this._options=t}activate(e){this._terminal=e;let t=this._options,r=t.urlRegex||kE;this._linkProvider=this._terminal.registerLinkProvider(new xE(this._terminal,r,this._handler,t))}dispose(){this._linkProvider?.dispose()}};function RE(){const{t:e}=eo(),[t,r]=C.useState([]),[n,o]=C.useState(null),[l,c]=C.useState(""),h=C.useRef(new Map),p=C.useRef(null),d=C.useCallback(S=>{const x=`tab-${Date.now()}`,w=S||l||"",b={id:x,title:w&&w.split(/[/\\]/).pop()||"Terminal",cwd:w};r(E=>[...E,b]),o(x),setTimeout(()=>v(x,w),0)},[l]),v=C.useCallback((S,x)=>{const w=document.getElementById(`terminal-${S}`);if(!w)return;const b=new vE({cursorBlink:!0,fontSize:14,fontFamily:'Consolas, "Courier New", monospace',theme:{background:"#1e1e2e",foreground:"#cdd6f4",cursor:"#f5e0dc",cursorAccent:"#1e1e2e",selectionBackground:"#585b70",black:"#45475a",red:"#f38ba8",green:"#a6e3a1",yellow:"#f9e2af",blue:"#89b4fa",magenta:"#f5c2e7",cyan:"#94e2d5",white:"#bac2de",brightBlack:"#585b70",brightRed:"#f38ba8",brightGreen:"#a6e3a1",brightYellow:"#f9e2af",brightBlue:"#89b4fa",brightMagenta:"#f5c2e7",brightCyan:"#94e2d5",brightWhite:"#a6adc8"},allowProposedApi:!0}),E=new wE;b.loadAddon(E),b.loadAddon(new PE),b.open(w),E.fit();const M=window.location.protocol==="https:"?"wss:":"ws:",B=window.location.host,W=`${M}//${B}/api/terminal?cwd=${encodeURIComponent(x)}&cols=${b.cols}&rows=${b.rows}`,A=new WebSocket(W);A.onopen=()=>{b.writeln(`\x1B[32m Connected to terminal\x1B[0m\r
`)},A.onmessage=K=>{try{const X=JSON.parse(K.data);switch(X.type){case"output":b.write(X.data);break;case"session":r(te=>te.map(ne=>ne.id===S?{...ne,title:X.cwd.split(/[/\\]/).pop()||X.shell}:ne));break;case"exit":b.writeln(`\r
\x1B[33m Process exited with code ${X.exitCode}\x1B[0m`);break}}catch{b.write(K.data)}},A.onclose=()=>{b.writeln(`\r
\x1B[31m Disconnected from terminal\x1B[0m`)},A.onerror=()=>{b.writeln(`\r
\x1B[31m Connection error\x1B[0m`)},b.onData(K=>{A.readyState===WebSocket.OPEN&&A.send(JSON.stringify({type:"input",data:K}))}),b.onResize(({cols:K,rows:X})=>{A.readyState===WebSocket.OPEN&&A.send(JSON.stringify({type:"resize",cols:K,rows:X}))}),h.current.set(S,{terminal:b,ws:A,fitAddon:E}),b.focus()},[]),_=C.useCallback(S=>{const x=h.current.get(S);x&&(x.ws.close(),x.terminal.dispose(),h.current.delete(S)),r(w=>{const b=w.filter(E=>E.id!==S);return n===S&&b.length>0?o(b[b.length-1].id):b.length===0&&o(null),b})},[n]);return C.useEffect(()=>{const S=()=>{if(n){const x=h.current.get(n);x&&x.fitAddon.fit()}};return window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[n]),C.useEffect(()=>{if(n){const S=h.current.get(n);S&&setTimeout(()=>{S.fitAddon.fit(),S.terminal.focus()},0)}},[n]),C.useEffect(()=>{t.length===0&&d()},[]),g.jsxs("div",{className:"h-full flex flex-col",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:e("shell.title")}),g.jsx("p",{className:"text-slate-500",children:e("shell.subtitle")})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Kn,{size:18,className:"text-slate-500"}),g.jsx("input",{type:"text",value:l,onChange:S=>c(S.target.value),placeholder:e("shell.workingDirectoryPlaceholder"),className:"w-64 px-3 py-1.5 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),g.jsxs("button",{onClick:()=>d(),className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[g.jsx(Ps,{size:18}),e("shell.newTab")]})]})]}),t.length>0&&g.jsx("div",{className:"flex items-center gap-1 bg-slate-800 rounded-t-lg px-2 pt-2",children:t.map(S=>g.jsxs("div",{onClick:()=>o(S.id),className:`flex items-center gap-2 px-3 py-1.5 rounded-t-lg cursor-pointer transition-colors ${n===S.id?"bg-[#1e1e2e] text-white":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:[g.jsx(qn,{size:14}),g.jsx("span",{className:"text-sm max-w-32 truncate",children:S.title}),g.jsx("button",{onClick:x=>{x.stopPropagation(),_(S.id)},className:"p-0.5 hover:bg-slate-600 rounded",children:g.jsx(Wh,{size:14})})]},S.id))}),g.jsx("div",{ref:p,className:"flex-1 bg-[#1e1e2e] rounded-b-lg overflow-hidden",style:{minHeight:"400px"},children:t.length===0?g.jsx("div",{className:"h-full flex items-center justify-center text-slate-500",children:g.jsxs("div",{className:"text-center",children:[g.jsx(qn,{size:48,className:"mx-auto mb-4 opacity-50"}),g.jsx("p",{children:e("shell.noTerminals")}),g.jsx("button",{onClick:()=>d(),className:"mt-4 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:e("shell.newTab")})]})}):t.map(S=>g.jsx("div",{id:`terminal-${S.id}`,className:`h-full w-full p-2 ${n===S.id?"":"hidden"}`},S.id))}),g.jsx("p",{className:"mt-4 text-sm text-slate-500",children:e("shell.tip")})]})}const{slice:NE,forEach:LE}=[];function DE(e){return LE.call(NE.call(arguments,1),t=>{if(t)for(const r in t)e[r]===void 0&&(e[r]=t[r])}),e}function ME(e){return typeof e!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(r=>r.test(e))}const Wg=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,OE=function(e,t){const n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},o=encodeURIComponent(t);let l=`${e}=${o}`;if(n.maxAge>0){const c=n.maxAge-0;if(Number.isNaN(c))throw new Error("maxAge should be a Number");l+=`; Max-Age=${Math.floor(c)}`}if(n.domain){if(!Wg.test(n.domain))throw new TypeError("option domain is invalid");l+=`; Domain=${n.domain}`}if(n.path){if(!Wg.test(n.path))throw new TypeError("option path is invalid");l+=`; Path=${n.path}`}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");l+=`; Expires=${n.expires.toUTCString()}`}if(n.httpOnly&&(l+="; HttpOnly"),n.secure&&(l+="; Secure"),n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"strict":l+="; SameSite=Strict";break;case"none":l+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(l+="; Partitioned"),l},Ug={create(e,t,r,n){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(o.expires=new Date,o.expires.setTime(o.expires.getTime()+r*60*1e3)),n&&(o.domain=n),document.cookie=OE(e,t,o)},read(e){const t=`${e}=`,r=document.cookie.split(";");for(let n=0;n<r.length;n++){let o=r[n];for(;o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(t)===0)return o.substring(t.length,o.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var TE={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return Ug.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:r,cookieMinutes:n,cookieDomain:o,cookieOptions:l}=t;r&&typeof document<"u"&&Ug.create(r,e,n,o,l)}},jE={name:"querystring",lookup(e){let{lookupQuerystring:t}=e,r;if(typeof window<"u"){let{search:n}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));const l=n.substring(1).split("&");for(let c=0;c<l.length;c++){const h=l[c].indexOf("=");h>0&&l[c].substring(0,h)===t&&(r=l[c].substring(h+1))}}return r}},BE={name:"hash",lookup(e){let{lookupHash:t,lookupFromHashIndex:r}=e,n;if(typeof window<"u"){const{hash:o}=window.location;if(o&&o.length>2){const l=o.substring(1);if(t){const c=l.split("&");for(let h=0;h<c.length;h++){const p=c[h].indexOf("=");p>0&&c[h].substring(0,p)===t&&(n=c[h].substring(p+1))}}if(n)return n;if(!n&&r>-1){const c=o.match(/\/([a-zA-Z-]*)/g);return Array.isArray(c)?c[typeof r=="number"?r:0]?.replace("/",""):void 0}}}return n}};let bs=null;const Kg=()=>{if(bs!==null)return bs;try{if(bs=typeof window<"u"&&window.localStorage!==null,!bs)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{bs=!1}return bs};var IE={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&Kg())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:r}=t;r&&Kg()&&window.localStorage.setItem(r,e)}};let Cs=null;const Vg=()=>{if(Cs!==null)return Cs;try{if(Cs=typeof window<"u"&&window.sessionStorage!==null,!Cs)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{Cs=!1}return Cs};var AE={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&Vg())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:r}=t;r&&Vg()&&window.sessionStorage.setItem(r,e)}},FE={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:r,userLanguage:n,language:o}=navigator;if(r)for(let l=0;l<r.length;l++)t.push(r[l]);n&&t.push(n),o&&t.push(o)}return t.length>0?t:void 0}},zE={name:"htmlTag",lookup(e){let{htmlTag:t}=e,r;const n=t||(typeof document<"u"?document.documentElement:null);return n&&typeof n.getAttribute=="function"&&(r=n.getAttribute("lang")),r}},HE={name:"path",lookup(e){let{lookupFromPathIndex:t}=e;if(typeof window>"u")return;const r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(r)?r[typeof t=="number"?t:0]?.replace("/",""):void 0}},$E={name:"subdomain",lookup(e){let{lookupFromSubdomainIndex:t}=e;const r=typeof t=="number"?t+1:1,n=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(n)return n[r]}};let Kv=!1;try{document.cookie,Kv=!0}catch{}const Vv=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Kv||Vv.splice(1,1);const WE=()=>({order:Vv,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e});class qv{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,r)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=DE(r,this.options||{},WE()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=o=>o.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(TE),this.addDetector(jE),this.addDetector(IE),this.addDetector(AE),this.addDetector(FE),this.addDetector(zE),this.addDetector(HE),this.addDetector($E),this.addDetector(BE)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,r=[];return t.forEach(n=>{if(this.detectors[n]){let o=this.detectors[n].lookup(this.options);o&&typeof o=="string"&&(o=[o]),o&&(r=r.concat(o))}}),r=r.filter(n=>n!=null&&!ME(n)).map(n=>this.options.convertDetectedLanguage(n)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?r:r.length>0?r[0]:null}cacheUserLanguage(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||r.forEach(n=>{this.detectors[n]&&this.detectors[n].cacheUserLanguage(t,this.options)}))}}qv.type="languageDetector";const UE={loading:"Loading...",error:"Error",save:"Save",cancel:"Cancel",delete:"Delete",create:"Create",edit:"Edit",close:"Close",confirm:"Confirm",back:"Back",clear:"Clear",execute:"Execute",refresh:"Refresh",start:"Start",stop:"Stop",pause:"Pause",resume:"Resume"},KE={projects:"Projects",agents:"Agents",shell:"Shell",settings:"Settings"},VE={title:"Projects",subtitle:"Manage AI agent projects",newProject:"New Project",noProjects:"No projects yet. Create one to get started!",untitled:"Untitled Project",noDescription:"No description",name:"Project Name",namePlaceholder:"Enter project name...",goal:"Goal",goalPlaceholder:"Describe what you want to accomplish...",repoPath:"Repository Path",repoPathPlaceholder:"/path/to/your/project",browse:"Browse",runs:"Runs",noRuns:"No runs yet",startRun:"Start Run",specs:"Specifications",specsMeta:"Meta & Constraints",specsOverview:"Overview",specsGlossary:"Glossary",specsRequirements:"Specification",specsInterfaces:"Implementation Status",specsDecisions:"Decisions",specsEmpty:"No specifications yet",specsListHint:"One per line",specsMetaPlaceholder:"Constraints, scope, non-goals...",specsOverviewPlaceholder:"Intent, background, goals, success criteria...",specsGlossaryPlaceholder:"Term: definition",specsRequirementsPlaceholder:"Specification details...",specsInterfacesPlaceholder:"Implementation status, progress, gaps...",specsDecisionsPlaceholder:"- Decision and rationale",status:{planning:"Planning",planned:"Planned",pending:"Pending",running:"Running",verifying:"Verifying",debugging:"Debugging",completed:"Completed",failed:"Failed",needs_input:"Needs Input"},detail:{title:"Project Details",backToProjects:"Back to projects",viewReport:"View Report",hideReport:"Hide Report",finalReport:"Final Report",information:"Information",created:"Created",updated:"Updated",verification:"Verification",verificationPassed:"Verification Passed",verificationFailed:"Verification Failed"},logs:{title:"Logs",noLogs:"No logs yet...",autoScroll:"Auto-scroll"},plan:{title:"Plan",subtitle:"Plan tasks before execution",noPlan:"No plan yet",createPlan:"Create Plan",editPlan:"Edit Plan",approvePlan:"Approve Plan",rejectPlan:"Reject Plan",regeneratePlan:"Regenerate Plan",tasks:"Tasks",addTask:"Add Task",taskName:"Task Name",taskDescription:"Task Description",estimatedEffort:"Estimated Effort",dependencies:"Dependencies",priority:"Priority",high:"High",medium:"Medium",low:"Low",status:{draft:"Draft",pending_approval:"Pending Approval",approved:"Approved",rejected:"Rejected"},aiGenerate:"Generate Plan with AI",generating:"Generating plan..."},execution:{title:"Execution",startExecution:"Start Execution",stopExecution:"Stop Execution",executionHistory:"Execution History"},specsCount:"{{count}} items",specsBulkEdit:"Bulk edit",specsInlineEdit:"Inline edit",specsExpand:"Expand",specsCollapse:"Collapse",specsSpecification:"Specification",specsImplementationStatus:"Implementation Status",specsMarkdownHint:"Markdown supported",specsFiles:"Files",specsAddFile:"Add file",specsAddFolder:"Add folder",specsNoFiles:"No files yet",specsSelectFile:"Select a file to preview",specsFolderSelected:"Folder selected",specsRename:"Rename",specsNamePlaceholder:"Name...",specsFileNamePlaceholder:"new-file.md",specsFolderNamePlaceholder:"new-folder",specsSpecificationPlaceholder:"Specification details, scope, constraints...",specsImplementationStatusPlaceholder:"Implementation status, progress, gaps..."},qE={title:"Terminal",subtitle:"Full-featured terminal emulator",workingDirectory:"Working Directory (optional)",workingDirectoryPlaceholder:"/path/to/directory",commandPlaceholder:"Enter command...",noCommands:"Enter a command below to get started",tip:"Tip: Full terminal support with tab completion, colors, and interactive programs",newTab:"New Tab",noTerminals:"No terminal sessions. Click the button below to start one."},QE={title:"Settings",subtitle:"Configure Supervisor Agent",backendStatus:"Backend Status",status:"Status",version:"Version",apiUsage:"API Usage",premiumRequests:"Premium Requests",copilotNotConfigured:"Copilot API not configured",configuration:"Configuration",defaultRepoPath:"Default Repository Path",apiBaseUrl:"API Base URL",copilotApiUrl:"Copilot API URL",maxDebugIterations:"Max Debug Iterations",saveSettings:"Save Settings",language:"Language",selectLanguage:"Select Language"},YE={settings:"Settings",repoPath:"Repository Path",repoPathPlaceholder:"/path/to/your/project",agentModel:"Agent Model",maxIterations:"Max Iterations",welcome:"Welcome to your project",welcomeDescription:"What would you like to accomplish? I can help with fixing bugs, adding features, running tests, and more.",inputPlaceholder:"Type a message...",inputHint:"Press Enter to send, Shift+Enter for new line",thinking:"Thinking...",readyToHelp:"Ready to help. What would you like to do?",suggestions:{runTests:"Run tests",fixBug:"Fix a bug",addFeature:"Add a feature"}},GE={common:UE,nav:KE,projects:VE,shell:qE,settings:QE,chat:YE},XE={loading:"...",error:"",save:"",cancel:"",delete:"",create:"",edit:"",close:"",confirm:"",back:"",clear:"",execute:"",refresh:"",start:"",stop:"",pause:"",resume:""},JE={projects:"",agents:"",shell:"",settings:""},ZE={title:"",subtitle:"AI ",newProject:"",noProjects:"",createFirst:"",untitled:"",noDescription:"",name:"",namePlaceholder:"...",description:"",descriptionPlaceholder:"",goal:"",goalPlaceholder:"...",repoPath:"",repoPathPlaceholder:"/path/to/your/project",browse:"",runs:"",noRuns:"",startRun:"",specs:"",specsMeta:"",specsOverview:"",specsGlossary:"",specsRequirements:"",specsInterfaces:"",specsDecisions:"",specsEmpty:"",specsListHint:"11",specsMetaPlaceholder:"...",specsOverviewPlaceholder:"/...",specsGlossaryPlaceholder:": ",specsRequirementsPlaceholder:"...",specsInterfacesPlaceholder:"...",specsDecisionsPlaceholder:"- ",specsCount:"{{count}} ",specsBulkEdit:"",specsInlineEdit:"",specsExpand:"",specsCollapse:"",requirements:"",acceptanceCriteria:"",notes:"",status:{planning:"",planned:"",pending:"",running:"",verifying:"",debugging:"",completed:"",failed:"",needs_input:""},detail:{title:"",backToProjects:"",viewReport:"",hideReport:"",finalReport:"",information:"",created:"",updated:"",verification:"",verificationPassed:"",verificationFailed:""},logs:{title:"",noLogs:"...",autoScroll:""},plan:{title:"",subtitle:"",noPlan:"",createPlan:"",editPlan:"",approvePlan:"",rejectPlan:"",regeneratePlan:"",tasks:"",addTask:"",taskName:"",taskDescription:"",estimatedEffort:"",dependencies:"",priority:"",high:"",medium:"",low:"",status:{draft:"",pending_approval:"",approved:"",rejected:""},aiGenerate:"AI ",generating:"..."},execution:{title:"",startExecution:"",stopExecution:"",executionHistory:""},specsSpecification:"",specsImplementationStatus:"",specsMarkdownHint:"",specsFiles:"",specsAddFile:"",specsAddFolder:"",specsNoFiles:"",specsSelectFile:"",specsFolderSelected:"",specsRename:"",specsNamePlaceholder:"...",specsFileNamePlaceholder:"new-file.md",specsFolderNamePlaceholder:"new-folder",specsSpecificationPlaceholder:"...",specsImplementationStatusPlaceholder:"..."},eP={title:"",subtitle:"",workingDirectory:"",workingDirectoryPlaceholder:"/path/to/directory",commandPlaceholder:"...",noCommands:"",tip:": ",newTab:"",noTerminals:""},tP={title:"",subtitle:"Supervisor Agent ",backendStatus:"",status:"",version:"",apiUsage:"API ",premiumRequests:"",copilotNotConfigured:"Copilot API ",configuration:"",defaultRepoPath:"",apiBaseUrl:"API  URL",copilotApiUrl:"Copilot API URL",maxDebugIterations:"",saveSettings:"",language:"",selectLanguage:""},rP={settings:"",repoPath:"",repoPathPlaceholder:"/path/to/your/project",agentModel:"",maxIterations:"",welcome:"",welcomeDescription:"",inputPlaceholder:"...",inputHint:"Enter Shift+Enter ",thinking:"...",readyToHelp:"",suggestions:{runTests:"",fixBug:"",addFeature:""}},iP={common:XE,nav:JE,projects:ZE,shell:eP,settings:tP,chat:rP},sP={en:{translation:GE},ja:{translation:iP}};Rt.use(qv).use($1).init({resources:sP,fallbackLng:"en",supportedLngs:["en","ja"],interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator","htmlTag"],caches:["localStorage"]}});const nP=[{code:"en",name:"English",nativeName:"English"},{code:"ja",name:"Japanese",nativeName:""}];function oP(){const{t:e,i18n:t}=eo(),r=qi(),[n,o]=C.useState(""),[l,c]=C.useState(""),[h,p]=C.useState(!1),[d,v]=C.useState(!1),[_,S]=C.useState(""),[x,w]=C.useState(!1),{data:b,refetch:E}=Vt({queryKey:["health"],queryFn:F_}),{data:M,refetch:B}=Vt({queryKey:["settings"],queryFn:z_}),{data:W}=Vt({queryKey:["copilotStatus"],queryFn:$_,refetchInterval:5e3}),A=Si({mutationFn:H_,onSuccess:()=>{r.invalidateQueries({queryKey:["settings"]}),r.invalidateQueries({queryKey:["copilotStatus"]}),o(""),c(""),S("")}}),K=()=>{const V={};n&&(V.openai_api_key=n),l&&(V.anthropic_api_key=l),Object.keys(V).length>0&&A.mutate(V)},X=()=>{_&&A.mutate({github_token:_})},te=()=>{A.mutate({openai_api_key:""})},ne=()=>{A.mutate({anthropic_api_key:""})},re=()=>{A.mutate({github_token:""})},F=V=>{t.changeLanguage(V)};return g.jsxs("div",{className:"px-4 sm:px-6 py-4 sm:py-6",children:[g.jsxs("div",{className:"mb-4 sm:mb-6",children:[g.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-slate-800",children:e("settings.title")}),g.jsx("p",{className:"text-slate-500 text-sm sm:text-base",children:e("settings.subtitle")})]}),g.jsxs("div",{className:"grid gap-4 sm:gap-6 lg:grid-cols-2",children:[g.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4 sm:p-6 lg:col-span-2",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("h2",{className:"text-base sm:text-lg font-semibold text-slate-800 flex items-center gap-2",children:[g.jsx(ux,{size:20}),"API Keys"]}),g.jsx("button",{onClick:()=>B(),className:"p-2.5 sm:p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 active:bg-slate-200 rounded-lg transition-colors",children:g.jsx(Vn,{size:16})})]}),g.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Configure API keys for AI services. Keys are stored securely and take precedence over environment variables."}),g.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2",children:[g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:["OpenAI API Key",M?.openai_api_key_set&&g.jsxs("span",{className:"ml-2 text-xs text-green-600 font-normal",children:[g.jsx(hu,{size:12,className:"inline mr-1"}),"Configured (",M.openai_api_key,")"]})]}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:h?"text":"password",value:n,onChange:V=>o(V.target.value),placeholder:M?.openai_api_key_set?"Enter new key to update":"sk-...",className:"w-full px-3 py-3 sm:py-2 pr-20 text-base border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),g.jsx("button",{type:"button",onClick:()=>p(!h),className:"absolute right-10 top-1/2 -translate-y-1/2 p-1 text-slate-400 hover:text-slate-600 active:text-slate-800",children:h?g.jsx(du,{size:18}):g.jsx(Na,{size:18})}),M?.openai_api_key_set&&g.jsx("button",{type:"button",onClick:te,className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-red-400 hover:text-red-600 active:text-red-800 text-xs",children:"Clear"})]})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:["Anthropic API Key",M?.anthropic_api_key_set&&g.jsxs("span",{className:"ml-2 text-xs text-green-600 font-normal",children:[g.jsx(hu,{size:12,className:"inline mr-1"}),"Configured (",M.anthropic_api_key,")"]})]}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:d?"text":"password",value:l,onChange:V=>c(V.target.value),placeholder:M?.anthropic_api_key_set?"Enter new key to update":"sk-ant-...",className:"w-full px-3 py-3 sm:py-2 pr-20 text-base border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),g.jsx("button",{type:"button",onClick:()=>v(!d),className:"absolute right-10 top-1/2 -translate-y-1/2 p-1 text-slate-400 hover:text-slate-600 active:text-slate-800",children:d?g.jsx(du,{size:18}):g.jsx(Na,{size:18})}),M?.anthropic_api_key_set&&g.jsx("button",{type:"button",onClick:ne,className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-red-400 hover:text-red-600 active:text-red-800 text-xs",children:"Clear"})]})]})]}),g.jsx("div",{className:"mt-4",children:g.jsxs("button",{onClick:K,disabled:!n&&!l||A.isPending,className:"w-full sm:w-auto px-4 py-3 sm:py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 active:bg-primary-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[A.isPending&&g.jsx(or,{size:16,className:"animate-spin"}),"Save API Keys"]})})]}),g.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4 sm:p-6 lg:col-span-2",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("h2",{className:"text-base sm:text-lg font-semibold text-slate-800 flex items-center gap-2",children:[g.jsx(lx,{size:20}),"GitHub Copilot API"]}),M?.github_token_set&&g.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[g.jsx("span",{className:`w-2 h-2 rounded-full ${W?.running&&W?.healthy?"bg-green-500":W?.running?"bg-yellow-500 animate-pulse":"bg-red-500"}`}),g.jsx("span",{className:"text-slate-500",children:W?.running&&W?.healthy?"Running":W?.running?"Starting...":"Not running"})]})]}),W?.error&&M?.github_token_set&&g.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:W.error}),g.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Use GitHub Copilot as an OpenAI-compatible API proxy. Set your GitHub token below and the proxy will start automatically."}),g.jsxs("div",{className:"max-w-md",children:[g.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["GitHub Token",M?.github_token_set&&g.jsxs("span",{className:"ml-2 text-xs text-green-600 font-normal",children:[g.jsx(hu,{size:12,className:"inline mr-1"}),"Configured (",M.github_token,")"]})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("div",{className:"relative flex-1",children:[g.jsx("input",{type:x?"text":"password",value:_,onChange:V=>S(V.target.value),placeholder:M?.github_token_set?"Enter new token to update":"ghp_...",className:"w-full px-3 py-2 pr-10 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),g.jsx("button",{type:"button",onClick:()=>w(!x),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:x?g.jsx(du,{size:18}):g.jsx(Na,{size:18})})]}),g.jsxs("button",{onClick:X,disabled:!_||A.isPending,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[A.isPending&&g.jsx(or,{size:16,className:"animate-spin"}),"Save"]}),M?.github_token_set&&g.jsx("button",{onClick:re,className:"px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:"Clear"})]}),g.jsxs("p",{className:"text-xs text-slate-400 mt-2",children:["Get your token from"," ",g.jsx("a",{href:"https://github.com/settings/tokens",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:"GitHub Settings  Tokens"})]})]})]}),g.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4 sm:p-6",children:[g.jsxs("h2",{className:"text-base sm:text-lg font-semibold text-slate-800 flex items-center gap-2 mb-4",children:[g.jsx(cx,{size:20}),e("settings.language")]}),g.jsx("div",{className:"space-y-2",children:nP.map(V=>g.jsxs("button",{onClick:()=>F(V.code),className:`w-full text-left px-4 py-3.5 sm:py-3 rounded-lg border transition-colors active:scale-[0.98] ${t.language===V.code?"border-primary-500 bg-primary-50 text-primary-700":"border-slate-200 hover:bg-slate-50 active:bg-slate-100"}`,children:[g.jsx("span",{className:"font-medium",children:V.nativeName}),g.jsxs("span",{className:"text-slate-500 ml-2",children:["(",V.name,")"]})]},V.code))})]}),g.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4 sm:p-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("h2",{className:"text-base sm:text-lg font-semibold text-slate-800 flex items-center gap-2",children:[g.jsx(mx,{size:20}),e("settings.backendStatus")]}),g.jsx("button",{onClick:()=>E(),className:"p-2.5 sm:p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 active:bg-slate-200 rounded-lg transition-colors",children:g.jsx(Vn,{size:16})})]}),g.jsxs("dl",{className:"space-y-3",children:[g.jsxs("div",{className:"flex justify-between",children:[g.jsx("dt",{className:"text-slate-500",children:e("settings.status")}),g.jsxs("dd",{className:"flex items-center gap-2",children:[g.jsx("span",{className:`w-2 h-2 rounded-full ${b?.status==="ok"?"bg-green-500":"bg-red-500"}`}),b?.status??"Unknown"]})]}),g.jsxs("div",{className:"flex justify-between",children:[g.jsx("dt",{className:"text-slate-500",children:e("settings.version")}),g.jsx("dd",{className:"font-mono text-sm",children:b?.version??"-"})]})]})]}),g.jsx(aP,{})]})]})}function aP(){const{data:e,isLoading:t,refetch:r}=Vt({queryKey:["applications"],queryFn:Dx,refetchInterval:5e3}),n=async l=>{try{await Mx(l)}catch(c){console.error("Failed to focus application:",c)}},o=e?.applications||[];return g.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4 sm:p-6 lg:col-span-2",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("h2",{className:"text-base sm:text-lg font-semibold text-slate-800 flex items-center gap-2",children:[g.jsx(tx,{size:20}),""]}),g.jsx("button",{onClick:()=>r(),className:"p-2.5 sm:p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 active:bg-slate-200 rounded-lg transition-colors",children:g.jsx(Vn,{size:16,className:t?"animate-spin":""})})]}),t&&o.length===0?g.jsx("div",{className:"flex items-center justify-center py-8 text-slate-400",children:g.jsx(or,{size:24,className:"animate-spin"})}):o.length===0?g.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:""}):g.jsx("div",{className:"space-y-1 max-h-[300px] overflow-y-auto",children:o.map(l=>g.jsxs("div",{className:"flex items-center justify-between px-3 py-2 hover:bg-slate-50 rounded-lg group",children:[g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"font-medium text-sm text-slate-700 truncate",children:l.title||l.name}),g.jsxs("span",{className:"text-xs text-slate-400",children:["(",l.name,")"]})]}),l.path&&g.jsx("div",{className:"text-xs text-slate-400 truncate",children:l.path})]}),g.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[g.jsxs("span",{className:"text-xs text-slate-400",children:["PID: ",l.pid]}),g.jsx("button",{onClick:()=>n(l.pid),className:"p-1.5 text-slate-400 hover:text-primary-600 hover:bg-primary-50 rounded transition-colors",title:"",children:g.jsx(ox,{size:14})})]})]},l.pid))})]})}function lP(){return g.jsxs(Sm,{children:[g.jsx(Cr,{path:"/projects/:projectId",element:g.jsx(Jb,{})}),g.jsx(Cr,{path:"*",element:g.jsx(Ox,{children:g.jsxs(Sm,{children:[g.jsx(Cr,{path:"/",element:g.jsx(nu,{to:"/projects",replace:!0})}),g.jsx(Cr,{path:"/projects",element:g.jsx(zx,{})}),g.jsx(Cr,{path:"/agents",element:g.jsx(cC,{})}),g.jsx(Cr,{path:"/runs",element:g.jsx(nu,{to:"/projects",replace:!0})}),g.jsx(Cr,{path:"/runs/:runId",element:g.jsx(nu,{to:"/projects/:runId",replace:!0})}),g.jsx(Cr,{path:"/shell",element:g.jsx(RE,{})}),g.jsx(Cr,{path:"/settings",element:g.jsx(oP,{})})]})})})]})}const cP=new bS({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}});Zy.createRoot(document.getElementById("root")).render(g.jsx(zi.StrictMode,{children:g.jsx(CS,{client:cP,children:g.jsx(r1,{children:g.jsx(lP,{})})})}));
