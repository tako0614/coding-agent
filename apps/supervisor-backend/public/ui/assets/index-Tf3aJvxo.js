var qm=e=>{throw TypeError(e)};var Vc=(e,t,i)=>t.has(e)||qm("Cannot "+i);var R=(e,t,i)=>(Vc(e,t,"read from private field"),i?i.call(e):t.get(e)),Se=(e,t,i)=>t.has(e)?qm("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),ne=(e,t,i,n)=>(Vc(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),Re=(e,t,i)=>(Vc(e,t,"access private method"),i);var ul=(e,t,i,n)=>({set _(o){ne(e,t,o,i)},get _(){return R(e,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function i(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(o){if(o.ep)return;o.ep=!0;const l=i(o);fetch(o.href,l)}})();function ev(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var qc={exports:{}},yo={},Yc={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ym;function IS(){if(Ym)return Ne;Ym=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),g=Symbol.iterator;function y(E){return E===null||typeof E!="object"?null:(E=g&&E[g]||E["@@iterator"],typeof E=="function"?E:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,C={};function k(E,M,Q){this.props=E,this.context=M,this.refs=C,this.updater=Q||w}k.prototype.isReactComponent={},k.prototype.setState=function(E,M){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,M,"setState")},k.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function L(){}L.prototype=k.prototype;function W(E,M,Q){this.props=E,this.context=M,this.refs=C,this.updater=Q||w}var O=W.prototype=new L;O.constructor=W,x(O,k.prototype),O.isPureReactComponent=!0;var T=Array.isArray,$=Object.prototype.hasOwnProperty,G={current:null},le={key:!0,ref:!0,__self:!0,__source:!0};function ue(E,M,Q){var he,_e={},pe=null,Ee=null;if(M!=null)for(he in M.ref!==void 0&&(Ee=M.ref),M.key!==void 0&&(pe=""+M.key),M)$.call(M,he)&&!le.hasOwnProperty(he)&&(_e[he]=M[he]);var de=arguments.length-2;if(de===1)_e.children=Q;else if(1<de){for(var ge=Array(de),Ve=0;Ve<de;Ve++)ge[Ve]=arguments[Ve+2];_e.children=ge}if(E&&E.defaultProps)for(he in de=E.defaultProps,de)_e[he]===void 0&&(_e[he]=de[he]);return{$$typeof:e,type:E,key:pe,ref:Ee,props:_e,_owner:G.current}}function ye(E,M){return{$$typeof:e,type:E.type,key:M,ref:E.ref,props:E.props,_owner:E._owner}}function ie(E){return typeof E=="object"&&E!==null&&E.$$typeof===e}function se(E){var M={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(Q){return M[Q]})}var z=/\/+/g;function j(E,M){return typeof E=="object"&&E!==null&&E.key!=null?se(""+E.key):M.toString(36)}function U(E,M,Q,he,_e){var pe=typeof E;(pe==="undefined"||pe==="boolean")&&(E=null);var Ee=!1;if(E===null)Ee=!0;else switch(pe){case"string":case"number":Ee=!0;break;case"object":switch(E.$$typeof){case e:case t:Ee=!0}}if(Ee)return Ee=E,_e=_e(Ee),E=he===""?"."+j(Ee,0):he,T(_e)?(Q="",E!=null&&(Q=E.replace(z,"$&/")+"/"),U(_e,M,Q,"",function(Ve){return Ve})):_e!=null&&(ie(_e)&&(_e=ye(_e,Q+(!_e.key||Ee&&Ee.key===_e.key?"":(""+_e.key).replace(z,"$&/")+"/")+E)),M.push(_e)),1;if(Ee=0,he=he===""?".":he+":",T(E))for(var de=0;de<E.length;de++){pe=E[de];var ge=he+j(pe,de);Ee+=U(pe,M,Q,ge,_e)}else if(ge=y(E),typeof ge=="function")for(E=ge.call(E),de=0;!(pe=E.next()).done;)pe=pe.value,ge=he+j(pe,de++),Ee+=U(pe,M,Q,ge,_e);else if(pe==="object")throw M=String(E),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return Ee}function V(E,M,Q){if(E==null)return E;var he=[],_e=0;return U(E,he,"","",function(pe){return M.call(Q,pe,_e++)}),he}function K(E){if(E._status===-1){var M=E._result;M=M(),M.then(function(Q){(E._status===0||E._status===-1)&&(E._status=1,E._result=Q)},function(Q){(E._status===0||E._status===-1)&&(E._status=2,E._result=Q)}),E._status===-1&&(E._status=0,E._result=M)}if(E._status===1)return E._result.default;throw E._result}var te={current:null},A={transition:null},re={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:A,ReactCurrentOwner:G};function Z(){throw Error("act(...) is not supported in production builds of React.")}return Ne.Children={map:V,forEach:function(E,M,Q){V(E,function(){M.apply(this,arguments)},Q)},count:function(E){var M=0;return V(E,function(){M++}),M},toArray:function(E){return V(E,function(M){return M})||[]},only:function(E){if(!ie(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},Ne.Component=k,Ne.Fragment=i,Ne.Profiler=o,Ne.PureComponent=W,Ne.StrictMode=n,Ne.Suspense=p,Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,Ne.act=Z,Ne.cloneElement=function(E,M,Q){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var he=x({},E.props),_e=E.key,pe=E.ref,Ee=E._owner;if(M!=null){if(M.ref!==void 0&&(pe=M.ref,Ee=G.current),M.key!==void 0&&(_e=""+M.key),E.type&&E.type.defaultProps)var de=E.type.defaultProps;for(ge in M)$.call(M,ge)&&!le.hasOwnProperty(ge)&&(he[ge]=M[ge]===void 0&&de!==void 0?de[ge]:M[ge])}var ge=arguments.length-2;if(ge===1)he.children=Q;else if(1<ge){de=Array(ge);for(var Ve=0;Ve<ge;Ve++)de[Ve]=arguments[Ve+2];he.children=de}return{$$typeof:e,type:E.type,key:_e,ref:pe,props:he,_owner:Ee}},Ne.createContext=function(E){return E={$$typeof:h,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:l,_context:E},E.Consumer=E},Ne.createElement=ue,Ne.createFactory=function(E){var M=ue.bind(null,E);return M.type=E,M},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(E){return{$$typeof:u,render:E}},Ne.isValidElement=ie,Ne.lazy=function(E){return{$$typeof:_,_payload:{_status:-1,_result:E},_init:K}},Ne.memo=function(E,M){return{$$typeof:d,type:E,compare:M===void 0?null:M}},Ne.startTransition=function(E){var M=A.transition;A.transition={};try{E()}finally{A.transition=M}},Ne.unstable_act=Z,Ne.useCallback=function(E,M){return te.current.useCallback(E,M)},Ne.useContext=function(E){return te.current.useContext(E)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(E){return te.current.useDeferredValue(E)},Ne.useEffect=function(E,M){return te.current.useEffect(E,M)},Ne.useId=function(){return te.current.useId()},Ne.useImperativeHandle=function(E,M,Q){return te.current.useImperativeHandle(E,M,Q)},Ne.useInsertionEffect=function(E,M){return te.current.useInsertionEffect(E,M)},Ne.useLayoutEffect=function(E,M){return te.current.useLayoutEffect(E,M)},Ne.useMemo=function(E,M){return te.current.useMemo(E,M)},Ne.useReducer=function(E,M,Q){return te.current.useReducer(E,M,Q)},Ne.useRef=function(E){return te.current.useRef(E)},Ne.useState=function(E){return te.current.useState(E)},Ne.useSyncExternalStore=function(E,M,Q){return te.current.useSyncExternalStore(E,M,Q)},Ne.useTransition=function(){return te.current.useTransition()},Ne.version="18.3.1",Ne}var Qm;function Vl(){return Qm||(Qm=1,Yc.exports=IS()),Yc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gm;function AS(){if(Gm)return yo;Gm=1;var e=Vl(),t=Symbol.for("react.element"),i=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(u,p,d){var _,g={},y=null,w=null;d!==void 0&&(y=""+d),p.key!==void 0&&(y=""+p.key),p.ref!==void 0&&(w=p.ref);for(_ in p)n.call(p,_)&&!l.hasOwnProperty(_)&&(g[_]=p[_]);if(u&&u.defaultProps)for(_ in p=u.defaultProps,p)g[_]===void 0&&(g[_]=p[_]);return{$$typeof:t,type:u,key:y,ref:w,props:g,_owner:o.current}}return yo.Fragment=i,yo.jsx=h,yo.jsxs=h,yo}var Xm;function jS(){return Xm||(Xm=1,qc.exports=AS()),qc.exports}var S=jS(),N=Vl();const FS=ev(N);var dl={},Qc={exports:{}},Qt={},Gc={exports:{}},Xc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jm;function zS(){return Jm||(Jm=1,(function(e){function t(A,re){var Z=A.length;A.push(re);e:for(;0<Z;){var E=Z-1>>>1,M=A[E];if(0<o(M,re))A[E]=re,A[Z]=M,Z=E;else break e}}function i(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var re=A[0],Z=A.pop();if(Z!==re){A[0]=Z;e:for(var E=0,M=A.length,Q=M>>>1;E<Q;){var he=2*(E+1)-1,_e=A[he],pe=he+1,Ee=A[pe];if(0>o(_e,Z))pe<M&&0>o(Ee,_e)?(A[E]=Ee,A[pe]=Z,E=pe):(A[E]=_e,A[he]=Z,E=he);else if(pe<M&&0>o(Ee,Z))A[E]=Ee,A[pe]=Z,E=pe;else break e}}return re}function o(A,re){var Z=A.sortIndex-re.sortIndex;return Z!==0?Z:A.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var h=Date,u=h.now();e.unstable_now=function(){return h.now()-u}}var p=[],d=[],_=1,g=null,y=3,w=!1,x=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(A){for(var re=i(d);re!==null;){if(re.callback===null)n(d);else if(re.startTime<=A)n(d),re.sortIndex=re.expirationTime,t(p,re);else break;re=i(d)}}function T(A){if(C=!1,O(A),!x)if(i(p)!==null)x=!0,K($);else{var re=i(d);re!==null&&te(T,re.startTime-A)}}function $(A,re){x=!1,C&&(C=!1,L(ue),ue=-1),w=!0;var Z=y;try{for(O(re),g=i(p);g!==null&&(!(g.expirationTime>re)||A&&!se());){var E=g.callback;if(typeof E=="function"){g.callback=null,y=g.priorityLevel;var M=E(g.expirationTime<=re);re=e.unstable_now(),typeof M=="function"?g.callback=M:g===i(p)&&n(p),O(re)}else n(p);g=i(p)}if(g!==null)var Q=!0;else{var he=i(d);he!==null&&te(T,he.startTime-re),Q=!1}return Q}finally{g=null,y=Z,w=!1}}var G=!1,le=null,ue=-1,ye=5,ie=-1;function se(){return!(e.unstable_now()-ie<ye)}function z(){if(le!==null){var A=e.unstable_now();ie=A;var re=!0;try{re=le(!0,A)}finally{re?j():(G=!1,le=null)}}else G=!1}var j;if(typeof W=="function")j=function(){W(z)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,V=U.port2;U.port1.onmessage=z,j=function(){V.postMessage(null)}}else j=function(){k(z,0)};function K(A){le=A,G||(G=!0,j())}function te(A,re){ue=k(function(){A(e.unstable_now())},re)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){x||w||(x=!0,K($))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ye=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return i(p)},e.unstable_next=function(A){switch(y){case 1:case 2:case 3:var re=3;break;default:re=y}var Z=y;y=re;try{return A()}finally{y=Z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,re){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var Z=y;y=A;try{return re()}finally{y=Z}},e.unstable_scheduleCallback=function(A,re,Z){var E=e.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?E+Z:E):Z=E,A){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=Z+M,A={id:_++,callback:re,priorityLevel:A,startTime:Z,expirationTime:M,sortIndex:-1},Z>E?(A.sortIndex=Z,t(d,A),i(p)===null&&A===i(d)&&(C?(L(ue),ue=-1):C=!0,te(T,Z-E))):(A.sortIndex=M,t(p,A),x||w||(x=!0,K($))),A},e.unstable_shouldYield=se,e.unstable_wrapCallback=function(A){var re=y;return function(){var Z=y;y=re;try{return A.apply(this,arguments)}finally{y=Z}}}})(Xc)),Xc}var Zm;function HS(){return Zm||(Zm=1,Gc.exports=zS()),Gc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eg;function $S(){if(eg)return Qt;eg=1;var e=Vl(),t=HS();function i(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,o={};function l(r,s){h(r,s),h(r+"Capture",s)}function h(r,s){for(o[r]=s,r=0;r<s.length;r++)n.add(s[r])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},g={};function y(r){return p.call(g,r)?!0:p.call(_,r)?!1:d.test(r)?g[r]=!0:(_[r]=!0,!1)}function w(r,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function x(r,s,a,c){if(s===null||typeof s>"u"||w(r,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function C(r,s,a,c,f,m,v){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=m,this.removeEmptyString=v}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){k[r]=new C(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];k[s]=new C(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){k[r]=new C(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){k[r]=new C(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){k[r]=new C(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){k[r]=new C(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){k[r]=new C(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){k[r]=new C(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){k[r]=new C(r,5,!1,r.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function W(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(L,W);k[s]=new C(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(L,W);k[s]=new C(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(L,W);k[s]=new C(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){k[r]=new C(r,1,!1,r.toLowerCase(),null,!1,!1)}),k.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){k[r]=new C(r,1,!1,r.toLowerCase(),null,!0,!0)});function O(r,s,a,c){var f=k.hasOwnProperty(s)?k[s]:null;(f!==null?f.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(x(s,a,f,c)&&(a=null),c||f===null?y(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):f.mustUseProperty?r[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,c=f.attributeNamespace,a===null?r.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,c?r.setAttributeNS(c,s,a):r.setAttribute(s,a))))}var T=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),G=Symbol.for("react.portal"),le=Symbol.for("react.fragment"),ue=Symbol.for("react.strict_mode"),ye=Symbol.for("react.profiler"),ie=Symbol.for("react.provider"),se=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),A=Symbol.iterator;function re(r){return r===null||typeof r!="object"?null:(r=A&&r[A]||r["@@iterator"],typeof r=="function"?r:null)}var Z=Object.assign,E;function M(r){if(E===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);E=s&&s[1]||""}return`
`+E+r}var Q=!1;function he(r,s){if(!r||Q)return"";Q=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(F){var c=F}Reflect.construct(r,[],s)}else{try{s.call()}catch(F){c=F}r.call(s.prototype)}else{try{throw Error()}catch(F){c=F}r()}}catch(F){if(F&&c&&typeof F.stack=="string"){for(var f=F.stack.split(`
`),m=c.stack.split(`
`),v=f.length-1,b=m.length-1;1<=v&&0<=b&&f[v]!==m[b];)b--;for(;1<=v&&0<=b;v--,b--)if(f[v]!==m[b]){if(v!==1||b!==1)do if(v--,b--,0>b||f[v]!==m[b]){var P=`
`+f[v].replace(" at new "," at ");return r.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",r.displayName)),P}while(1<=v&&0<=b);break}}}finally{Q=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?M(r):""}function _e(r){switch(r.tag){case 5:return M(r.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return r=he(r.type,!1),r;case 11:return r=he(r.type.render,!1),r;case 1:return r=he(r.type,!0),r;default:return""}}function pe(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case le:return"Fragment";case G:return"Portal";case ye:return"Profiler";case ue:return"StrictMode";case j:return"Suspense";case U:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case se:return(r.displayName||"Context")+".Consumer";case ie:return(r._context.displayName||"Context")+".Provider";case z:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case V:return s=r.displayName||null,s!==null?s:pe(r.type)||"Memo";case K:s=r._payload,r=r._init;try{return pe(r(s))}catch{}}return null}function Ee(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(s);case 8:return s===ue?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function de(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ge(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ve(r){var s=ge(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),c=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,m=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(v){c=""+v,m.call(this,v)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Ct(r){r._valueTracker||(r._valueTracker=Ve(r))}function Ot(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return r&&(c=ge(r)?r.checked?"true":"false":r.value),r=c,r!==a?(s.setValue(r),!0):!1}function Te(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Xr(r,s){var a=s.checked;return Z({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function Zd(r,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=de(s.value!=null?s.value:a),r._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ef(r,s){s=s.checked,s!=null&&O(r,"checked",s,!1)}function eh(r,s){ef(r,s);var a=de(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(c==="submit"||c==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?th(r,s.type,a):s.hasOwnProperty("defaultValue")&&th(r,s.type,de(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function tf(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function th(r,s,a){(s!=="number"||Te(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var Tn=Array.isArray;function Ms(r,s,a,c){if(r=r.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<r.length;a++)f=s.hasOwnProperty("$"+r[a].value),r[a].selected!==f&&(r[a].selected=f),f&&c&&(r[a].defaultSelected=!0)}else{for(a=""+de(a),s=null,f=0;f<r.length;f++){if(r[f].value===a){r[f].selected=!0,c&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function ih(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(i(91));return Z({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function rf(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(i(92));if(Tn(a)){if(1<a.length)throw Error(i(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:de(a)}}function sf(r,s){var a=de(s.value),c=de(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),c!=null&&(r.defaultValue=""+c)}function nf(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function of(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rh(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?of(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var ra,af=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,f){MSApp.execUnsafeLocalFunction(function(){return r(s,a,c,f)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(ra=ra||document.createElement("div"),ra.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=ra.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function On(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var Bn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},z0=["Webkit","ms","Moz","O"];Object.keys(Bn).forEach(function(r){z0.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Bn[s]=Bn[r]})});function lf(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Bn.hasOwnProperty(r)&&Bn[r]?(""+s).trim():s+"px"}function hf(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,f=lf(a,s[a],c);a==="float"&&(a="cssFloat"),c?r.setProperty(a,f):r[a]=f}}var H0=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sh(r,s){if(s){if(H0[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(i(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(i(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(i(61))}if(s.style!=null&&typeof s.style!="object")throw Error(i(62))}}function nh(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oh=null;function ah(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var lh=null,Ts=null,Os=null;function cf(r){if(r=ro(r)){if(typeof lh!="function")throw Error(i(280));var s=r.stateNode;s&&(s=Ea(s),lh(r.stateNode,r.type,s))}}function uf(r){Ts?Os?Os.push(r):Os=[r]:Ts=r}function df(){if(Ts){var r=Ts,s=Os;if(Os=Ts=null,cf(r),s)for(r=0;r<s.length;r++)cf(s[r])}}function ff(r,s){return r(s)}function pf(){}var hh=!1;function mf(r,s,a){if(hh)return r(s,a);hh=!0;try{return ff(r,s,a)}finally{hh=!1,(Ts!==null||Os!==null)&&(pf(),df())}}function In(r,s){var a=r.stateNode;if(a===null)return null;var c=Ea(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var ch=!1;if(u)try{var An={};Object.defineProperty(An,"passive",{get:function(){ch=!0}}),window.addEventListener("test",An,An),window.removeEventListener("test",An,An)}catch{ch=!1}function $0(r,s,a,c,f,m,v,b,P){var F=Array.prototype.slice.call(arguments,3);try{s.apply(a,F)}catch(Y){this.onError(Y)}}var jn=!1,sa=null,na=!1,uh=null,W0={onError:function(r){jn=!0,sa=r}};function U0(r,s,a,c,f,m,v,b,P){jn=!1,sa=null,$0.apply(W0,arguments)}function K0(r,s,a,c,f,m,v,b,P){if(U0.apply(this,arguments),jn){if(jn){var F=sa;jn=!1,sa=null}else throw Error(i(198));na||(na=!0,uh=F)}}function Jr(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function gf(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function _f(r){if(Jr(r)!==r)throw Error(i(188))}function V0(r){var s=r.alternate;if(!s){if(s=Jr(r),s===null)throw Error(i(188));return s!==r?null:r}for(var a=r,c=s;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return _f(f),r;if(m===c)return _f(f),s;m=m.sibling}throw Error(i(188))}if(a.return!==c.return)a=f,c=m;else{for(var v=!1,b=f.child;b;){if(b===a){v=!0,a=f,c=m;break}if(b===c){v=!0,c=f,a=m;break}b=b.sibling}if(!v){for(b=m.child;b;){if(b===a){v=!0,a=m,c=f;break}if(b===c){v=!0,c=m,a=f;break}b=b.sibling}if(!v)throw Error(i(189))}}if(a.alternate!==c)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?r:s}function vf(r){return r=V0(r),r!==null?yf(r):null}function yf(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=yf(r);if(s!==null)return s;r=r.sibling}return null}var Sf=t.unstable_scheduleCallback,wf=t.unstable_cancelCallback,q0=t.unstable_shouldYield,Y0=t.unstable_requestPaint,it=t.unstable_now,Q0=t.unstable_getCurrentPriorityLevel,dh=t.unstable_ImmediatePriority,xf=t.unstable_UserBlockingPriority,oa=t.unstable_NormalPriority,G0=t.unstable_LowPriority,Cf=t.unstable_IdlePriority,aa=null,Ni=null;function X0(r){if(Ni&&typeof Ni.onCommitFiberRoot=="function")try{Ni.onCommitFiberRoot(aa,r,void 0,(r.current.flags&128)===128)}catch{}}var yi=Math.clz32?Math.clz32:ey,J0=Math.log,Z0=Math.LN2;function ey(r){return r>>>=0,r===0?32:31-(J0(r)/Z0|0)|0}var la=64,ha=4194304;function Fn(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function ca(r,s){var a=r.pendingLanes;if(a===0)return 0;var c=0,f=r.suspendedLanes,m=r.pingedLanes,v=a&268435455;if(v!==0){var b=v&~f;b!==0?c=Fn(b):(m&=v,m!==0&&(c=Fn(m)))}else v=a&~f,v!==0?c=Fn(v):m!==0&&(c=Fn(m));if(c===0)return 0;if(s!==0&&s!==c&&(s&f)===0&&(f=c&-c,m=s&-s,f>=m||f===16&&(m&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=c;0<s;)a=31-yi(s),f=1<<a,c|=r[a],s&=~f;return c}function ty(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iy(r,s){for(var a=r.suspendedLanes,c=r.pingedLanes,f=r.expirationTimes,m=r.pendingLanes;0<m;){var v=31-yi(m),b=1<<v,P=f[v];P===-1?((b&a)===0||(b&c)!==0)&&(f[v]=ty(b,s)):P<=s&&(r.expiredLanes|=b),m&=~b}}function fh(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function bf(){var r=la;return la<<=1,(la&4194240)===0&&(la=64),r}function ph(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function zn(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-yi(s),r[s]=a}function ry(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var c=r.eventTimes;for(r=r.expirationTimes;0<a;){var f=31-yi(a),m=1<<f;s[f]=0,c[f]=-1,r[f]=-1,a&=~m}}function mh(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var c=31-yi(a),f=1<<c;f&s|r[c]&s&&(r[c]|=s),a&=~f}}var Ae=0;function kf(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Ef,gh,Rf,Pf,Lf,_h=!1,ua=[],pr=null,mr=null,gr=null,Hn=new Map,$n=new Map,_r=[],sy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nf(r,s){switch(r){case"focusin":case"focusout":pr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":gr=null;break;case"pointerover":case"pointerout":Hn.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":$n.delete(s.pointerId)}}function Wn(r,s,a,c,f,m){return r===null||r.nativeEvent!==m?(r={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},s!==null&&(s=ro(s),s!==null&&gh(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function ny(r,s,a,c,f){switch(s){case"focusin":return pr=Wn(pr,r,s,a,c,f),!0;case"dragenter":return mr=Wn(mr,r,s,a,c,f),!0;case"mouseover":return gr=Wn(gr,r,s,a,c,f),!0;case"pointerover":var m=f.pointerId;return Hn.set(m,Wn(Hn.get(m)||null,r,s,a,c,f)),!0;case"gotpointercapture":return m=f.pointerId,$n.set(m,Wn($n.get(m)||null,r,s,a,c,f)),!0}return!1}function Df(r){var s=Zr(r.target);if(s!==null){var a=Jr(s);if(a!==null){if(s=a.tag,s===13){if(s=gf(a),s!==null){r.blockedOn=s,Lf(r.priority,function(){Rf(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function da(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=yh(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var c=new a.constructor(a.type,a);oh=c,a.target.dispatchEvent(c),oh=null}else return s=ro(a),s!==null&&gh(s),r.blockedOn=a,!1;s.shift()}return!0}function Mf(r,s,a){da(r)&&a.delete(s)}function oy(){_h=!1,pr!==null&&da(pr)&&(pr=null),mr!==null&&da(mr)&&(mr=null),gr!==null&&da(gr)&&(gr=null),Hn.forEach(Mf),$n.forEach(Mf)}function Un(r,s){r.blockedOn===s&&(r.blockedOn=null,_h||(_h=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,oy)))}function Kn(r){function s(f){return Un(f,r)}if(0<ua.length){Un(ua[0],r);for(var a=1;a<ua.length;a++){var c=ua[a];c.blockedOn===r&&(c.blockedOn=null)}}for(pr!==null&&Un(pr,r),mr!==null&&Un(mr,r),gr!==null&&Un(gr,r),Hn.forEach(s),$n.forEach(s),a=0;a<_r.length;a++)c=_r[a],c.blockedOn===r&&(c.blockedOn=null);for(;0<_r.length&&(a=_r[0],a.blockedOn===null);)Df(a),a.blockedOn===null&&_r.shift()}var Bs=T.ReactCurrentBatchConfig,fa=!0;function ay(r,s,a,c){var f=Ae,m=Bs.transition;Bs.transition=null;try{Ae=1,vh(r,s,a,c)}finally{Ae=f,Bs.transition=m}}function ly(r,s,a,c){var f=Ae,m=Bs.transition;Bs.transition=null;try{Ae=4,vh(r,s,a,c)}finally{Ae=f,Bs.transition=m}}function vh(r,s,a,c){if(fa){var f=yh(r,s,a,c);if(f===null)Ih(r,s,c,pa,a),Nf(r,c);else if(ny(f,r,s,a,c))c.stopPropagation();else if(Nf(r,c),s&4&&-1<sy.indexOf(r)){for(;f!==null;){var m=ro(f);if(m!==null&&Ef(m),m=yh(r,s,a,c),m===null&&Ih(r,s,c,pa,a),m===f)break;f=m}f!==null&&c.stopPropagation()}else Ih(r,s,c,null,a)}}var pa=null;function yh(r,s,a,c){if(pa=null,r=ah(c),r=Zr(r),r!==null)if(s=Jr(r),s===null)r=null;else if(a=s.tag,a===13){if(r=gf(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return pa=r,null}function Tf(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Q0()){case dh:return 1;case xf:return 4;case oa:case G0:return 16;case Cf:return 536870912;default:return 16}default:return 16}}var vr=null,Sh=null,ma=null;function Of(){if(ma)return ma;var r,s=Sh,a=s.length,c,f="value"in vr?vr.value:vr.textContent,m=f.length;for(r=0;r<a&&s[r]===f[r];r++);var v=a-r;for(c=1;c<=v&&s[a-c]===f[m-c];c++);return ma=f.slice(r,1<c?1-c:void 0)}function ga(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function _a(){return!0}function Bf(){return!1}function Zt(r){function s(a,c,f,m,v){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var b in r)r.hasOwnProperty(b)&&(a=r[b],this[b]=a?a(m):m[b]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?_a:Bf,this.isPropagationStopped=Bf,this}return Z(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=_a)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=_a)},persist:function(){},isPersistent:_a}),s}var Is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wh=Zt(Is),Vn=Z({},Is,{view:0,detail:0}),hy=Zt(Vn),xh,Ch,qn,va=Z({},Vn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kh,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==qn&&(qn&&r.type==="mousemove"?(xh=r.screenX-qn.screenX,Ch=r.screenY-qn.screenY):Ch=xh=0,qn=r),xh)},movementY:function(r){return"movementY"in r?r.movementY:Ch}}),If=Zt(va),cy=Z({},va,{dataTransfer:0}),uy=Zt(cy),dy=Z({},Vn,{relatedTarget:0}),bh=Zt(dy),fy=Z({},Is,{animationName:0,elapsedTime:0,pseudoElement:0}),py=Zt(fy),my=Z({},Is,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),gy=Zt(my),_y=Z({},Is,{data:0}),Af=Zt(_y),vy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wy(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Sy[r])?!!s[r]:!1}function kh(){return wy}var xy=Z({},Vn,{key:function(r){if(r.key){var s=vy[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=ga(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?yy[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kh,charCode:function(r){return r.type==="keypress"?ga(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ga(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Cy=Zt(xy),by=Z({},va,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jf=Zt(by),ky=Z({},Vn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kh}),Ey=Zt(ky),Ry=Z({},Is,{propertyName:0,elapsedTime:0,pseudoElement:0}),Py=Zt(Ry),Ly=Z({},va,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ny=Zt(Ly),Dy=[9,13,27,32],Eh=u&&"CompositionEvent"in window,Yn=null;u&&"documentMode"in document&&(Yn=document.documentMode);var My=u&&"TextEvent"in window&&!Yn,Ff=u&&(!Eh||Yn&&8<Yn&&11>=Yn),zf=" ",Hf=!1;function $f(r,s){switch(r){case"keyup":return Dy.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wf(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var As=!1;function Ty(r,s){switch(r){case"compositionend":return Wf(s);case"keypress":return s.which!==32?null:(Hf=!0,zf);case"textInput":return r=s.data,r===zf&&Hf?null:r;default:return null}}function Oy(r,s){if(As)return r==="compositionend"||!Eh&&$f(r,s)?(r=Of(),ma=Sh=vr=null,As=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ff&&s.locale!=="ko"?null:s.data;default:return null}}var By={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uf(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!By[r.type]:s==="textarea"}function Kf(r,s,a,c){uf(c),s=Ca(s,"onChange"),0<s.length&&(a=new wh("onChange","change",null,a,c),r.push({event:a,listeners:s}))}var Qn=null,Gn=null;function Iy(r){hp(r,0)}function ya(r){var s=$s(r);if(Ot(s))return r}function Ay(r,s){if(r==="change")return s}var Vf=!1;if(u){var Rh;if(u){var Ph="oninput"in document;if(!Ph){var qf=document.createElement("div");qf.setAttribute("oninput","return;"),Ph=typeof qf.oninput=="function"}Rh=Ph}else Rh=!1;Vf=Rh&&(!document.documentMode||9<document.documentMode)}function Yf(){Qn&&(Qn.detachEvent("onpropertychange",Qf),Gn=Qn=null)}function Qf(r){if(r.propertyName==="value"&&ya(Gn)){var s=[];Kf(s,Gn,r,ah(r)),mf(Iy,s)}}function jy(r,s,a){r==="focusin"?(Yf(),Qn=s,Gn=a,Qn.attachEvent("onpropertychange",Qf)):r==="focusout"&&Yf()}function Fy(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ya(Gn)}function zy(r,s){if(r==="click")return ya(s)}function Hy(r,s){if(r==="input"||r==="change")return ya(s)}function $y(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Si=typeof Object.is=="function"?Object.is:$y;function Xn(r,s){if(Si(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!p.call(s,f)||!Si(r[f],s[f]))return!1}return!0}function Gf(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Xf(r,s){var a=Gf(r);r=0;for(var c;a;){if(a.nodeType===3){if(c=r+a.textContent.length,r<=s&&c>=s)return{node:a,offset:s-r};r=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Gf(a)}}function Jf(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Jf(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Zf(){for(var r=window,s=Te();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=Te(r.document)}return s}function Lh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function Wy(r){var s=Zf(),a=r.focusedElem,c=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&Jf(a.ownerDocument.documentElement,a)){if(c!==null&&Lh(a)){if(s=c.start,r=c.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=a.textContent.length,m=Math.min(c.start,f);c=c.end===void 0?m:Math.min(c.end,f),!r.extend&&m>c&&(f=c,c=m,m=f),f=Xf(a,m);var v=Xf(a,c);f&&v&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==v.node||r.focusOffset!==v.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),m>c?(r.addRange(s),r.extend(v.node,v.offset)):(s.setEnd(v.node,v.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var Uy=u&&"documentMode"in document&&11>=document.documentMode,js=null,Nh=null,Jn=null,Dh=!1;function ep(r,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Dh||js==null||js!==Te(c)||(c=js,"selectionStart"in c&&Lh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Jn&&Xn(Jn,c)||(Jn=c,c=Ca(Nh,"onSelect"),0<c.length&&(s=new wh("onSelect","select",null,s,a),r.push({event:s,listeners:c}),s.target=js)))}function Sa(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var Fs={animationend:Sa("Animation","AnimationEnd"),animationiteration:Sa("Animation","AnimationIteration"),animationstart:Sa("Animation","AnimationStart"),transitionend:Sa("Transition","TransitionEnd")},Mh={},tp={};u&&(tp=document.createElement("div").style,"AnimationEvent"in window||(delete Fs.animationend.animation,delete Fs.animationiteration.animation,delete Fs.animationstart.animation),"TransitionEvent"in window||delete Fs.transitionend.transition);function wa(r){if(Mh[r])return Mh[r];if(!Fs[r])return r;var s=Fs[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in tp)return Mh[r]=s[a];return r}var ip=wa("animationend"),rp=wa("animationiteration"),sp=wa("animationstart"),np=wa("transitionend"),op=new Map,ap="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yr(r,s){op.set(r,s),l(s,[r])}for(var Th=0;Th<ap.length;Th++){var Oh=ap[Th],Ky=Oh.toLowerCase(),Vy=Oh[0].toUpperCase()+Oh.slice(1);yr(Ky,"on"+Vy)}yr(ip,"onAnimationEnd"),yr(rp,"onAnimationIteration"),yr(sp,"onAnimationStart"),yr("dblclick","onDoubleClick"),yr("focusin","onFocus"),yr("focusout","onBlur"),yr(np,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zn));function lp(r,s,a){var c=r.type||"unknown-event";r.currentTarget=a,K0(c,s,void 0,r),r.currentTarget=null}function hp(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var c=r[a],f=c.event;c=c.listeners;e:{var m=void 0;if(s)for(var v=c.length-1;0<=v;v--){var b=c[v],P=b.instance,F=b.currentTarget;if(b=b.listener,P!==m&&f.isPropagationStopped())break e;lp(f,b,F),m=P}else for(v=0;v<c.length;v++){if(b=c[v],P=b.instance,F=b.currentTarget,b=b.listener,P!==m&&f.isPropagationStopped())break e;lp(f,b,F),m=P}}}if(na)throw r=uh,na=!1,uh=null,r}function ze(r,s){var a=s[$h];a===void 0&&(a=s[$h]=new Set);var c=r+"__bubble";a.has(c)||(cp(s,r,2,!1),a.add(c))}function Bh(r,s,a){var c=0;s&&(c|=4),cp(a,r,c,s)}var xa="_reactListening"+Math.random().toString(36).slice(2);function eo(r){if(!r[xa]){r[xa]=!0,n.forEach(function(a){a!=="selectionchange"&&(qy.has(a)||Bh(a,!1,r),Bh(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[xa]||(s[xa]=!0,Bh("selectionchange",!1,s))}}function cp(r,s,a,c){switch(Tf(s)){case 1:var f=ay;break;case 4:f=ly;break;default:f=vh}a=f.bind(null,s,a,r),f=void 0,!ch||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?r.addEventListener(s,a,{capture:!0,passive:f}):r.addEventListener(s,a,!0):f!==void 0?r.addEventListener(s,a,{passive:f}):r.addEventListener(s,a,!1)}function Ih(r,s,a,c,f){var m=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var b=c.stateNode.containerInfo;if(b===f||b.nodeType===8&&b.parentNode===f)break;if(v===4)for(v=c.return;v!==null;){var P=v.tag;if((P===3||P===4)&&(P=v.stateNode.containerInfo,P===f||P.nodeType===8&&P.parentNode===f))return;v=v.return}for(;b!==null;){if(v=Zr(b),v===null)return;if(P=v.tag,P===5||P===6){c=m=v;continue e}b=b.parentNode}}c=c.return}mf(function(){var F=m,Y=ah(a),X=[];e:{var q=op.get(r);if(q!==void 0){var ae=wh,fe=r;switch(r){case"keypress":if(ga(a)===0)break e;case"keydown":case"keyup":ae=Cy;break;case"focusin":fe="focus",ae=bh;break;case"focusout":fe="blur",ae=bh;break;case"beforeblur":case"afterblur":ae=bh;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=If;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=uy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=Ey;break;case ip:case rp:case sp:ae=py;break;case np:ae=Py;break;case"scroll":ae=hy;break;case"wheel":ae=Ny;break;case"copy":case"cut":case"paste":ae=gy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=jf}var me=(s&4)!==0,rt=!me&&r==="scroll",B=me?q!==null?q+"Capture":null:q;me=[];for(var D=F,I;D!==null;){I=D;var J=I.stateNode;if(I.tag===5&&J!==null&&(I=J,B!==null&&(J=In(D,B),J!=null&&me.push(to(D,J,I)))),rt)break;D=D.return}0<me.length&&(q=new ae(q,fe,null,a,Y),X.push({event:q,listeners:me}))}}if((s&7)===0){e:{if(q=r==="mouseover"||r==="pointerover",ae=r==="mouseout"||r==="pointerout",q&&a!==oh&&(fe=a.relatedTarget||a.fromElement)&&(Zr(fe)||fe[qi]))break e;if((ae||q)&&(q=Y.window===Y?Y:(q=Y.ownerDocument)?q.defaultView||q.parentWindow:window,ae?(fe=a.relatedTarget||a.toElement,ae=F,fe=fe?Zr(fe):null,fe!==null&&(rt=Jr(fe),fe!==rt||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ae=null,fe=F),ae!==fe)){if(me=If,J="onMouseLeave",B="onMouseEnter",D="mouse",(r==="pointerout"||r==="pointerover")&&(me=jf,J="onPointerLeave",B="onPointerEnter",D="pointer"),rt=ae==null?q:$s(ae),I=fe==null?q:$s(fe),q=new me(J,D+"leave",ae,a,Y),q.target=rt,q.relatedTarget=I,J=null,Zr(Y)===F&&(me=new me(B,D+"enter",fe,a,Y),me.target=I,me.relatedTarget=rt,J=me),rt=J,ae&&fe)t:{for(me=ae,B=fe,D=0,I=me;I;I=zs(I))D++;for(I=0,J=B;J;J=zs(J))I++;for(;0<D-I;)me=zs(me),D--;for(;0<I-D;)B=zs(B),I--;for(;D--;){if(me===B||B!==null&&me===B.alternate)break t;me=zs(me),B=zs(B)}me=null}else me=null;ae!==null&&up(X,q,ae,me,!1),fe!==null&&rt!==null&&up(X,rt,fe,me,!0)}}e:{if(q=F?$s(F):window,ae=q.nodeName&&q.nodeName.toLowerCase(),ae==="select"||ae==="input"&&q.type==="file")var ve=Ay;else if(Uf(q))if(Vf)ve=Hy;else{ve=Fy;var we=jy}else(ae=q.nodeName)&&ae.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(ve=zy);if(ve&&(ve=ve(r,F))){Kf(X,ve,a,Y);break e}we&&we(r,q,F),r==="focusout"&&(we=q._wrapperState)&&we.controlled&&q.type==="number"&&th(q,"number",q.value)}switch(we=F?$s(F):window,r){case"focusin":(Uf(we)||we.contentEditable==="true")&&(js=we,Nh=F,Jn=null);break;case"focusout":Jn=Nh=js=null;break;case"mousedown":Dh=!0;break;case"contextmenu":case"mouseup":case"dragend":Dh=!1,ep(X,a,Y);break;case"selectionchange":if(Uy)break;case"keydown":case"keyup":ep(X,a,Y)}var xe;if(Eh)e:{switch(r){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else As?$f(r,a)&&(Ce="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Ce="onCompositionStart");Ce&&(Ff&&a.locale!=="ko"&&(As||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&As&&(xe=Of()):(vr=Y,Sh="value"in vr?vr.value:vr.textContent,As=!0)),we=Ca(F,Ce),0<we.length&&(Ce=new Af(Ce,r,null,a,Y),X.push({event:Ce,listeners:we}),xe?Ce.data=xe:(xe=Wf(a),xe!==null&&(Ce.data=xe)))),(xe=My?Ty(r,a):Oy(r,a))&&(F=Ca(F,"onBeforeInput"),0<F.length&&(Y=new Af("onBeforeInput","beforeinput",null,a,Y),X.push({event:Y,listeners:F}),Y.data=xe))}hp(X,s)})}function to(r,s,a){return{instance:r,listener:s,currentTarget:a}}function Ca(r,s){for(var a=s+"Capture",c=[];r!==null;){var f=r,m=f.stateNode;f.tag===5&&m!==null&&(f=m,m=In(r,a),m!=null&&c.unshift(to(r,m,f)),m=In(r,s),m!=null&&c.push(to(r,m,f))),r=r.return}return c}function zs(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function up(r,s,a,c,f){for(var m=s._reactName,v=[];a!==null&&a!==c;){var b=a,P=b.alternate,F=b.stateNode;if(P!==null&&P===c)break;b.tag===5&&F!==null&&(b=F,f?(P=In(a,m),P!=null&&v.unshift(to(a,P,b))):f||(P=In(a,m),P!=null&&v.push(to(a,P,b)))),a=a.return}v.length!==0&&r.push({event:s,listeners:v})}var Yy=/\r\n?/g,Qy=/\u0000|\uFFFD/g;function dp(r){return(typeof r=="string"?r:""+r).replace(Yy,`
`).replace(Qy,"")}function ba(r,s,a){if(s=dp(s),dp(r)!==s&&a)throw Error(i(425))}function ka(){}var Ah=null,jh=null;function Fh(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var zh=typeof setTimeout=="function"?setTimeout:void 0,Gy=typeof clearTimeout=="function"?clearTimeout:void 0,fp=typeof Promise=="function"?Promise:void 0,Xy=typeof queueMicrotask=="function"?queueMicrotask:typeof fp<"u"?function(r){return fp.resolve(null).then(r).catch(Jy)}:zh;function Jy(r){setTimeout(function(){throw r})}function Hh(r,s){var a=s,c=0;do{var f=a.nextSibling;if(r.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(c===0){r.removeChild(f),Kn(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=f}while(a);Kn(s)}function Sr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function pp(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var Hs=Math.random().toString(36).slice(2),Di="__reactFiber$"+Hs,io="__reactProps$"+Hs,qi="__reactContainer$"+Hs,$h="__reactEvents$"+Hs,Zy="__reactListeners$"+Hs,eS="__reactHandles$"+Hs;function Zr(r){var s=r[Di];if(s)return s;for(var a=r.parentNode;a;){if(s=a[qi]||a[Di]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=pp(r);r!==null;){if(a=r[Di])return a;r=pp(r)}return s}r=a,a=r.parentNode}return null}function ro(r){return r=r[Di]||r[qi],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function $s(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(i(33))}function Ea(r){return r[io]||null}var Wh=[],Ws=-1;function wr(r){return{current:r}}function He(r){0>Ws||(r.current=Wh[Ws],Wh[Ws]=null,Ws--)}function Fe(r,s){Ws++,Wh[Ws]=r.current,r.current=s}var xr={},Pt=wr(xr),Ut=wr(!1),es=xr;function Us(r,s){var a=r.type.contextTypes;if(!a)return xr;var c=r.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var f={},m;for(m in a)f[m]=s[m];return c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function Kt(r){return r=r.childContextTypes,r!=null}function Ra(){He(Ut),He(Pt)}function mp(r,s,a){if(Pt.current!==xr)throw Error(i(168));Fe(Pt,s),Fe(Ut,a)}function gp(r,s,a){var c=r.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var f in c)if(!(f in s))throw Error(i(108,Ee(r)||"Unknown",f));return Z({},a,c)}function Pa(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||xr,es=Pt.current,Fe(Pt,r),Fe(Ut,Ut.current),!0}function _p(r,s,a){var c=r.stateNode;if(!c)throw Error(i(169));a?(r=gp(r,s,es),c.__reactInternalMemoizedMergedChildContext=r,He(Ut),He(Pt),Fe(Pt,r)):He(Ut),Fe(Ut,a)}var Yi=null,La=!1,Uh=!1;function vp(r){Yi===null?Yi=[r]:Yi.push(r)}function tS(r){La=!0,vp(r)}function Cr(){if(!Uh&&Yi!==null){Uh=!0;var r=0,s=Ae;try{var a=Yi;for(Ae=1;r<a.length;r++){var c=a[r];do c=c(!0);while(c!==null)}Yi=null,La=!1}catch(f){throw Yi!==null&&(Yi=Yi.slice(r+1)),Sf(dh,Cr),f}finally{Ae=s,Uh=!1}}return null}var Ks=[],Vs=0,Na=null,Da=0,oi=[],ai=0,ts=null,Qi=1,Gi="";function is(r,s){Ks[Vs++]=Da,Ks[Vs++]=Na,Na=r,Da=s}function yp(r,s,a){oi[ai++]=Qi,oi[ai++]=Gi,oi[ai++]=ts,ts=r;var c=Qi;r=Gi;var f=32-yi(c)-1;c&=~(1<<f),a+=1;var m=32-yi(s)+f;if(30<m){var v=f-f%5;m=(c&(1<<v)-1).toString(32),c>>=v,f-=v,Qi=1<<32-yi(s)+f|a<<f|c,Gi=m+r}else Qi=1<<m|a<<f|c,Gi=r}function Kh(r){r.return!==null&&(is(r,1),yp(r,1,0))}function Vh(r){for(;r===Na;)Na=Ks[--Vs],Ks[Vs]=null,Da=Ks[--Vs],Ks[Vs]=null;for(;r===ts;)ts=oi[--ai],oi[ai]=null,Gi=oi[--ai],oi[ai]=null,Qi=oi[--ai],oi[ai]=null}var ei=null,ti=null,We=!1,wi=null;function Sp(r,s){var a=ui(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function wp(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,ei=r,ti=Sr(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,ei=r,ti=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=ts!==null?{id:Qi,overflow:Gi}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=ui(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,ei=r,ti=null,!0):!1;default:return!1}}function qh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Yh(r){if(We){var s=ti;if(s){var a=s;if(!wp(r,s)){if(qh(r))throw Error(i(418));s=Sr(a.nextSibling);var c=ei;s&&wp(r,s)?Sp(c,a):(r.flags=r.flags&-4097|2,We=!1,ei=r)}}else{if(qh(r))throw Error(i(418));r.flags=r.flags&-4097|2,We=!1,ei=r}}}function xp(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;ei=r}function Ma(r){if(r!==ei)return!1;if(!We)return xp(r),We=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!Fh(r.type,r.memoizedProps)),s&&(s=ti)){if(qh(r))throw Cp(),Error(i(418));for(;s;)Sp(r,s),s=Sr(s.nextSibling)}if(xp(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){ti=Sr(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}ti=null}}else ti=ei?Sr(r.stateNode.nextSibling):null;return!0}function Cp(){for(var r=ti;r;)r=Sr(r.nextSibling)}function qs(){ti=ei=null,We=!1}function Qh(r){wi===null?wi=[r]:wi.push(r)}var iS=T.ReactCurrentBatchConfig;function so(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(i(309));var c=a.stateNode}if(!c)throw Error(i(147,r));var f=c,m=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===m?s.ref:(s=function(v){var b=f.refs;v===null?delete b[m]:b[m]=v},s._stringRef=m,s)}if(typeof r!="string")throw Error(i(284));if(!a._owner)throw Error(i(290,r))}return r}function Ta(r,s){throw r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function bp(r){var s=r._init;return s(r._payload)}function kp(r){function s(B,D){if(r){var I=B.deletions;I===null?(B.deletions=[D],B.flags|=16):I.push(D)}}function a(B,D){if(!r)return null;for(;D!==null;)s(B,D),D=D.sibling;return null}function c(B,D){for(B=new Map;D!==null;)D.key!==null?B.set(D.key,D):B.set(D.index,D),D=D.sibling;return B}function f(B,D){return B=Dr(B,D),B.index=0,B.sibling=null,B}function m(B,D,I){return B.index=I,r?(I=B.alternate,I!==null?(I=I.index,I<D?(B.flags|=2,D):I):(B.flags|=2,D)):(B.flags|=1048576,D)}function v(B){return r&&B.alternate===null&&(B.flags|=2),B}function b(B,D,I,J){return D===null||D.tag!==6?(D=zc(I,B.mode,J),D.return=B,D):(D=f(D,I),D.return=B,D)}function P(B,D,I,J){var ve=I.type;return ve===le?Y(B,D,I.props.children,J,I.key):D!==null&&(D.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===K&&bp(ve)===D.type)?(J=f(D,I.props),J.ref=so(B,D,I),J.return=B,J):(J=rl(I.type,I.key,I.props,null,B.mode,J),J.ref=so(B,D,I),J.return=B,J)}function F(B,D,I,J){return D===null||D.tag!==4||D.stateNode.containerInfo!==I.containerInfo||D.stateNode.implementation!==I.implementation?(D=Hc(I,B.mode,J),D.return=B,D):(D=f(D,I.children||[]),D.return=B,D)}function Y(B,D,I,J,ve){return D===null||D.tag!==7?(D=cs(I,B.mode,J,ve),D.return=B,D):(D=f(D,I),D.return=B,D)}function X(B,D,I){if(typeof D=="string"&&D!==""||typeof D=="number")return D=zc(""+D,B.mode,I),D.return=B,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case $:return I=rl(D.type,D.key,D.props,null,B.mode,I),I.ref=so(B,null,D),I.return=B,I;case G:return D=Hc(D,B.mode,I),D.return=B,D;case K:var J=D._init;return X(B,J(D._payload),I)}if(Tn(D)||re(D))return D=cs(D,B.mode,I,null),D.return=B,D;Ta(B,D)}return null}function q(B,D,I,J){var ve=D!==null?D.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return ve!==null?null:b(B,D,""+I,J);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case $:return I.key===ve?P(B,D,I,J):null;case G:return I.key===ve?F(B,D,I,J):null;case K:return ve=I._init,q(B,D,ve(I._payload),J)}if(Tn(I)||re(I))return ve!==null?null:Y(B,D,I,J,null);Ta(B,I)}return null}function ae(B,D,I,J,ve){if(typeof J=="string"&&J!==""||typeof J=="number")return B=B.get(I)||null,b(D,B,""+J,ve);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case $:return B=B.get(J.key===null?I:J.key)||null,P(D,B,J,ve);case G:return B=B.get(J.key===null?I:J.key)||null,F(D,B,J,ve);case K:var we=J._init;return ae(B,D,I,we(J._payload),ve)}if(Tn(J)||re(J))return B=B.get(I)||null,Y(D,B,J,ve,null);Ta(D,J)}return null}function fe(B,D,I,J){for(var ve=null,we=null,xe=D,Ce=D=0,gt=null;xe!==null&&Ce<I.length;Ce++){xe.index>Ce?(gt=xe,xe=null):gt=xe.sibling;var Be=q(B,xe,I[Ce],J);if(Be===null){xe===null&&(xe=gt);break}r&&xe&&Be.alternate===null&&s(B,xe),D=m(Be,D,Ce),we===null?ve=Be:we.sibling=Be,we=Be,xe=gt}if(Ce===I.length)return a(B,xe),We&&is(B,Ce),ve;if(xe===null){for(;Ce<I.length;Ce++)xe=X(B,I[Ce],J),xe!==null&&(D=m(xe,D,Ce),we===null?ve=xe:we.sibling=xe,we=xe);return We&&is(B,Ce),ve}for(xe=c(B,xe);Ce<I.length;Ce++)gt=ae(xe,B,Ce,I[Ce],J),gt!==null&&(r&&gt.alternate!==null&&xe.delete(gt.key===null?Ce:gt.key),D=m(gt,D,Ce),we===null?ve=gt:we.sibling=gt,we=gt);return r&&xe.forEach(function(Mr){return s(B,Mr)}),We&&is(B,Ce),ve}function me(B,D,I,J){var ve=re(I);if(typeof ve!="function")throw Error(i(150));if(I=ve.call(I),I==null)throw Error(i(151));for(var we=ve=null,xe=D,Ce=D=0,gt=null,Be=I.next();xe!==null&&!Be.done;Ce++,Be=I.next()){xe.index>Ce?(gt=xe,xe=null):gt=xe.sibling;var Mr=q(B,xe,Be.value,J);if(Mr===null){xe===null&&(xe=gt);break}r&&xe&&Mr.alternate===null&&s(B,xe),D=m(Mr,D,Ce),we===null?ve=Mr:we.sibling=Mr,we=Mr,xe=gt}if(Be.done)return a(B,xe),We&&is(B,Ce),ve;if(xe===null){for(;!Be.done;Ce++,Be=I.next())Be=X(B,Be.value,J),Be!==null&&(D=m(Be,D,Ce),we===null?ve=Be:we.sibling=Be,we=Be);return We&&is(B,Ce),ve}for(xe=c(B,xe);!Be.done;Ce++,Be=I.next())Be=ae(xe,B,Ce,Be.value,J),Be!==null&&(r&&Be.alternate!==null&&xe.delete(Be.key===null?Ce:Be.key),D=m(Be,D,Ce),we===null?ve=Be:we.sibling=Be,we=Be);return r&&xe.forEach(function(BS){return s(B,BS)}),We&&is(B,Ce),ve}function rt(B,D,I,J){if(typeof I=="object"&&I!==null&&I.type===le&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case $:e:{for(var ve=I.key,we=D;we!==null;){if(we.key===ve){if(ve=I.type,ve===le){if(we.tag===7){a(B,we.sibling),D=f(we,I.props.children),D.return=B,B=D;break e}}else if(we.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===K&&bp(ve)===we.type){a(B,we.sibling),D=f(we,I.props),D.ref=so(B,we,I),D.return=B,B=D;break e}a(B,we);break}else s(B,we);we=we.sibling}I.type===le?(D=cs(I.props.children,B.mode,J,I.key),D.return=B,B=D):(J=rl(I.type,I.key,I.props,null,B.mode,J),J.ref=so(B,D,I),J.return=B,B=J)}return v(B);case G:e:{for(we=I.key;D!==null;){if(D.key===we)if(D.tag===4&&D.stateNode.containerInfo===I.containerInfo&&D.stateNode.implementation===I.implementation){a(B,D.sibling),D=f(D,I.children||[]),D.return=B,B=D;break e}else{a(B,D);break}else s(B,D);D=D.sibling}D=Hc(I,B.mode,J),D.return=B,B=D}return v(B);case K:return we=I._init,rt(B,D,we(I._payload),J)}if(Tn(I))return fe(B,D,I,J);if(re(I))return me(B,D,I,J);Ta(B,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,D!==null&&D.tag===6?(a(B,D.sibling),D=f(D,I),D.return=B,B=D):(a(B,D),D=zc(I,B.mode,J),D.return=B,B=D),v(B)):a(B,D)}return rt}var Ys=kp(!0),Ep=kp(!1),Oa=wr(null),Ba=null,Qs=null,Gh=null;function Xh(){Gh=Qs=Ba=null}function Jh(r){var s=Oa.current;He(Oa),r._currentValue=s}function Zh(r,s,a){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===a)break;r=r.return}}function Gs(r,s){Ba=r,Gh=Qs=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(Vt=!0),r.firstContext=null)}function li(r){var s=r._currentValue;if(Gh!==r)if(r={context:r,memoizedValue:s,next:null},Qs===null){if(Ba===null)throw Error(i(308));Qs=r,Ba.dependencies={lanes:0,firstContext:r}}else Qs=Qs.next=r;return s}var rs=null;function ec(r){rs===null?rs=[r]:rs.push(r)}function Rp(r,s,a,c){var f=s.interleaved;return f===null?(a.next=a,ec(s)):(a.next=f.next,f.next=a),s.interleaved=a,Xi(r,c)}function Xi(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var br=!1;function tc(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pp(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Ji(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function kr(r,s,a){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(Oe&2)!==0){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,Xi(r,a)}return f=c.interleaved,f===null?(s.next=s,ec(c)):(s.next=f.next,f.next=s),c.interleaved=s,Xi(r,a)}function Ia(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,mh(r,a)}}function Lp(r,s){var a=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?f=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?f=m=s:m=m.next=s}else f=m=s;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,effects:c.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function Aa(r,s,a,c){var f=r.updateQueue;br=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var P=b,F=P.next;P.next=null,v===null?m=F:v.next=F,v=P;var Y=r.alternate;Y!==null&&(Y=Y.updateQueue,b=Y.lastBaseUpdate,b!==v&&(b===null?Y.firstBaseUpdate=F:b.next=F,Y.lastBaseUpdate=P))}if(m!==null){var X=f.baseState;v=0,Y=F=P=null,b=m;do{var q=b.lane,ae=b.eventTime;if((c&q)===q){Y!==null&&(Y=Y.next={eventTime:ae,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var fe=r,me=b;switch(q=s,ae=a,me.tag){case 1:if(fe=me.payload,typeof fe=="function"){X=fe.call(ae,X,q);break e}X=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=me.payload,q=typeof fe=="function"?fe.call(ae,X,q):fe,q==null)break e;X=Z({},X,q);break e;case 2:br=!0}}b.callback!==null&&b.lane!==0&&(r.flags|=64,q=f.effects,q===null?f.effects=[b]:q.push(b))}else ae={eventTime:ae,lane:q,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Y===null?(F=Y=ae,P=X):Y=Y.next=ae,v|=q;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;q=b,b=q.next,q.next=null,f.lastBaseUpdate=q,f.shared.pending=null}}while(!0);if(Y===null&&(P=X),f.baseState=P,f.firstBaseUpdate=F,f.lastBaseUpdate=Y,s=f.shared.interleaved,s!==null){f=s;do v|=f.lane,f=f.next;while(f!==s)}else m===null&&(f.shared.lanes=0);os|=v,r.lanes=v,r.memoizedState=X}}function Np(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var c=r[s],f=c.callback;if(f!==null){if(c.callback=null,c=a,typeof f!="function")throw Error(i(191,f));f.call(c)}}}var no={},Mi=wr(no),oo=wr(no),ao=wr(no);function ss(r){if(r===no)throw Error(i(174));return r}function ic(r,s){switch(Fe(ao,s),Fe(oo,r),Fe(Mi,no),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:rh(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=rh(s,r)}He(Mi),Fe(Mi,s)}function Xs(){He(Mi),He(oo),He(ao)}function Dp(r){ss(ao.current);var s=ss(Mi.current),a=rh(s,r.type);s!==a&&(Fe(oo,r),Fe(Mi,a))}function rc(r){oo.current===r&&(He(Mi),He(oo))}var qe=wr(0);function ja(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var sc=[];function nc(){for(var r=0;r<sc.length;r++)sc[r]._workInProgressVersionPrimary=null;sc.length=0}var Fa=T.ReactCurrentDispatcher,oc=T.ReactCurrentBatchConfig,ns=0,Ye=null,lt=null,pt=null,za=!1,lo=!1,ho=0,rS=0;function Lt(){throw Error(i(321))}function ac(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!Si(r[a],s[a]))return!1;return!0}function lc(r,s,a,c,f,m){if(ns=m,Ye=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Fa.current=r===null||r.memoizedState===null?aS:lS,r=a(c,f),lo){m=0;do{if(lo=!1,ho=0,25<=m)throw Error(i(301));m+=1,pt=lt=null,s.updateQueue=null,Fa.current=hS,r=a(c,f)}while(lo)}if(Fa.current=Wa,s=lt!==null&&lt.next!==null,ns=0,pt=lt=Ye=null,za=!1,s)throw Error(i(300));return r}function hc(){var r=ho!==0;return ho=0,r}function Ti(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?Ye.memoizedState=pt=r:pt=pt.next=r,pt}function hi(){if(lt===null){var r=Ye.alternate;r=r!==null?r.memoizedState:null}else r=lt.next;var s=pt===null?Ye.memoizedState:pt.next;if(s!==null)pt=s,lt=r;else{if(r===null)throw Error(i(310));lt=r,r={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},pt===null?Ye.memoizedState=pt=r:pt=pt.next=r}return pt}function co(r,s){return typeof s=="function"?s(r):s}function cc(r){var s=hi(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=r;var c=lt,f=c.baseQueue,m=a.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}c.baseQueue=f=m,a.pending=null}if(f!==null){m=f.next,c=c.baseState;var b=v=null,P=null,F=m;do{var Y=F.lane;if((ns&Y)===Y)P!==null&&(P=P.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),c=F.hasEagerState?F.eagerState:r(c,F.action);else{var X={lane:Y,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};P===null?(b=P=X,v=c):P=P.next=X,Ye.lanes|=Y,os|=Y}F=F.next}while(F!==null&&F!==m);P===null?v=c:P.next=b,Si(c,s.memoizedState)||(Vt=!0),s.memoizedState=c,s.baseState=v,s.baseQueue=P,a.lastRenderedState=c}if(r=a.interleaved,r!==null){f=r;do m=f.lane,Ye.lanes|=m,os|=m,f=f.next;while(f!==r)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function uc(r){var s=hi(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=r;var c=a.dispatch,f=a.pending,m=s.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do m=r(m,v.action),v=v.next;while(v!==f);Si(m,s.memoizedState)||(Vt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,c]}function Mp(){}function Tp(r,s){var a=Ye,c=hi(),f=s(),m=!Si(c.memoizedState,f);if(m&&(c.memoizedState=f,Vt=!0),c=c.queue,dc(Ip.bind(null,a,c,r),[r]),c.getSnapshot!==s||m||pt!==null&&pt.memoizedState.tag&1){if(a.flags|=2048,uo(9,Bp.bind(null,a,c,f,s),void 0,null),mt===null)throw Error(i(349));(ns&30)!==0||Op(a,s,f)}return f}function Op(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=Ye.updateQueue,s===null?(s={lastEffect:null,stores:null},Ye.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function Bp(r,s,a,c){s.value=a,s.getSnapshot=c,Ap(s)&&jp(r)}function Ip(r,s,a){return a(function(){Ap(s)&&jp(r)})}function Ap(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!Si(r,a)}catch{return!0}}function jp(r){var s=Xi(r,1);s!==null&&ki(s,r,1,-1)}function Fp(r){var s=Ti();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:co,lastRenderedState:r},s.queue=r,r=r.dispatch=oS.bind(null,Ye,r),[s.memoizedState,r]}function uo(r,s,a,c){return r={tag:r,create:s,destroy:a,deps:c,next:null},s=Ye.updateQueue,s===null?(s={lastEffect:null,stores:null},Ye.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(c=a.next,a.next=r,r.next=c,s.lastEffect=r)),r}function zp(){return hi().memoizedState}function Ha(r,s,a,c){var f=Ti();Ye.flags|=r,f.memoizedState=uo(1|s,a,void 0,c===void 0?null:c)}function $a(r,s,a,c){var f=hi();c=c===void 0?null:c;var m=void 0;if(lt!==null){var v=lt.memoizedState;if(m=v.destroy,c!==null&&ac(c,v.deps)){f.memoizedState=uo(s,a,m,c);return}}Ye.flags|=r,f.memoizedState=uo(1|s,a,m,c)}function Hp(r,s){return Ha(8390656,8,r,s)}function dc(r,s){return $a(2048,8,r,s)}function $p(r,s){return $a(4,2,r,s)}function Wp(r,s){return $a(4,4,r,s)}function Up(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Kp(r,s,a){return a=a!=null?a.concat([r]):null,$a(4,4,Up.bind(null,s,r),a)}function fc(){}function Vp(r,s){var a=hi();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&ac(s,c[1])?c[0]:(a.memoizedState=[r,s],r)}function qp(r,s){var a=hi();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&ac(s,c[1])?c[0]:(r=r(),a.memoizedState=[r,s],r)}function Yp(r,s,a){return(ns&21)===0?(r.baseState&&(r.baseState=!1,Vt=!0),r.memoizedState=a):(Si(a,s)||(a=bf(),Ye.lanes|=a,os|=a,r.baseState=!0),s)}function sS(r,s){var a=Ae;Ae=a!==0&&4>a?a:4,r(!0);var c=oc.transition;oc.transition={};try{r(!1),s()}finally{Ae=a,oc.transition=c}}function Qp(){return hi().memoizedState}function nS(r,s,a){var c=Lr(r);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Gp(r))Xp(s,a);else if(a=Rp(r,s,a,c),a!==null){var f=It();ki(a,r,c,f),Jp(a,s,c)}}function oS(r,s,a){var c=Lr(r),f={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Gp(r))Xp(s,f);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var v=s.lastRenderedState,b=m(v,a);if(f.hasEagerState=!0,f.eagerState=b,Si(b,v)){var P=s.interleaved;P===null?(f.next=f,ec(s)):(f.next=P.next,P.next=f),s.interleaved=f;return}}catch{}finally{}a=Rp(r,s,f,c),a!==null&&(f=It(),ki(a,r,c,f),Jp(a,s,c))}}function Gp(r){var s=r.alternate;return r===Ye||s!==null&&s===Ye}function Xp(r,s){lo=za=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function Jp(r,s,a){if((a&4194240)!==0){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,mh(r,a)}}var Wa={readContext:li,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},aS={readContext:li,useCallback:function(r,s){return Ti().memoizedState=[r,s===void 0?null:s],r},useContext:li,useEffect:Hp,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,Ha(4194308,4,Up.bind(null,s,r),a)},useLayoutEffect:function(r,s){return Ha(4194308,4,r,s)},useInsertionEffect:function(r,s){return Ha(4,2,r,s)},useMemo:function(r,s){var a=Ti();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var c=Ti();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},c.queue=r,r=r.dispatch=nS.bind(null,Ye,r),[c.memoizedState,r]},useRef:function(r){var s=Ti();return r={current:r},s.memoizedState=r},useState:Fp,useDebugValue:fc,useDeferredValue:function(r){return Ti().memoizedState=r},useTransition:function(){var r=Fp(!1),s=r[0];return r=sS.bind(null,r[1]),Ti().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var c=Ye,f=Ti();if(We){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),mt===null)throw Error(i(349));(ns&30)!==0||Op(c,s,a)}f.memoizedState=a;var m={value:a,getSnapshot:s};return f.queue=m,Hp(Ip.bind(null,c,m,r),[r]),c.flags|=2048,uo(9,Bp.bind(null,c,m,a,s),void 0,null),a},useId:function(){var r=Ti(),s=mt.identifierPrefix;if(We){var a=Gi,c=Qi;a=(c&~(1<<32-yi(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=ho++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=rS++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},lS={readContext:li,useCallback:Vp,useContext:li,useEffect:dc,useImperativeHandle:Kp,useInsertionEffect:$p,useLayoutEffect:Wp,useMemo:qp,useReducer:cc,useRef:zp,useState:function(){return cc(co)},useDebugValue:fc,useDeferredValue:function(r){var s=hi();return Yp(s,lt.memoizedState,r)},useTransition:function(){var r=cc(co)[0],s=hi().memoizedState;return[r,s]},useMutableSource:Mp,useSyncExternalStore:Tp,useId:Qp,unstable_isNewReconciler:!1},hS={readContext:li,useCallback:Vp,useContext:li,useEffect:dc,useImperativeHandle:Kp,useInsertionEffect:$p,useLayoutEffect:Wp,useMemo:qp,useReducer:uc,useRef:zp,useState:function(){return uc(co)},useDebugValue:fc,useDeferredValue:function(r){var s=hi();return lt===null?s.memoizedState=r:Yp(s,lt.memoizedState,r)},useTransition:function(){var r=uc(co)[0],s=hi().memoizedState;return[r,s]},useMutableSource:Mp,useSyncExternalStore:Tp,useId:Qp,unstable_isNewReconciler:!1};function xi(r,s){if(r&&r.defaultProps){s=Z({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function pc(r,s,a,c){s=r.memoizedState,a=a(c,s),a=a==null?s:Z({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Ua={isMounted:function(r){return(r=r._reactInternals)?Jr(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var c=It(),f=Lr(r),m=Ji(c,f);m.payload=s,a!=null&&(m.callback=a),s=kr(r,m,f),s!==null&&(ki(s,r,f,c),Ia(s,r,f))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var c=It(),f=Lr(r),m=Ji(c,f);m.tag=1,m.payload=s,a!=null&&(m.callback=a),s=kr(r,m,f),s!==null&&(ki(s,r,f,c),Ia(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=It(),c=Lr(r),f=Ji(a,c);f.tag=2,s!=null&&(f.callback=s),s=kr(r,f,c),s!==null&&(ki(s,r,c,a),Ia(s,r,c))}};function Zp(r,s,a,c,f,m,v){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,m,v):s.prototype&&s.prototype.isPureReactComponent?!Xn(a,c)||!Xn(f,m):!0}function em(r,s,a){var c=!1,f=xr,m=s.contextType;return typeof m=="object"&&m!==null?m=li(m):(f=Kt(s)?es:Pt.current,c=s.contextTypes,m=(c=c!=null)?Us(r,f):xr),s=new s(a,m),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ua,r.stateNode=s,s._reactInternals=r,c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=m),s}function tm(r,s,a,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==r&&Ua.enqueueReplaceState(s,s.state,null)}function mc(r,s,a,c){var f=r.stateNode;f.props=a,f.state=r.memoizedState,f.refs={},tc(r);var m=s.contextType;typeof m=="object"&&m!==null?f.context=li(m):(m=Kt(s)?es:Pt.current,f.context=Us(r,m)),f.state=r.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(pc(r,s,m,a),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Ua.enqueueReplaceState(f,f.state,null),Aa(r,a,f,c),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function Js(r,s){try{var a="",c=s;do a+=_e(c),c=c.return;while(c);var f=a}catch(m){f=`
Error generating stack: `+m.message+`
`+m.stack}return{value:r,source:s,stack:f,digest:null}}function gc(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function _c(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var cS=typeof WeakMap=="function"?WeakMap:Map;function im(r,s,a){a=Ji(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Xa||(Xa=!0,Mc=c),_c(r,s)},a}function rm(r,s,a){a=Ji(-1,a),a.tag=3;var c=r.type.getDerivedStateFromError;if(typeof c=="function"){var f=s.value;a.payload=function(){return c(f)},a.callback=function(){_c(r,s)}}var m=r.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){_c(r,s),typeof c!="function"&&(Rr===null?Rr=new Set([this]):Rr.add(this));var v=s.stack;this.componentDidCatch(s.value,{componentStack:v!==null?v:""})}),a}function sm(r,s,a){var c=r.pingCache;if(c===null){c=r.pingCache=new cS;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(a)||(f.add(a),r=bS.bind(null,r,s,a),s.then(r,r))}function nm(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function om(r,s,a,c,f){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Ji(-1,1),s.tag=2,kr(a,s,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=f,r)}var uS=T.ReactCurrentOwner,Vt=!1;function Bt(r,s,a,c){s.child=r===null?Ep(s,null,a,c):Ys(s,r.child,a,c)}function am(r,s,a,c,f){a=a.render;var m=s.ref;return Gs(s,f),c=lc(r,s,a,c,m,f),a=hc(),r!==null&&!Vt?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Zi(r,s,f)):(We&&a&&Kh(s),s.flags|=1,Bt(r,s,c,f),s.child)}function lm(r,s,a,c,f){if(r===null){var m=a.type;return typeof m=="function"&&!Fc(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=m,hm(r,s,m,c,f)):(r=rl(a.type,null,c,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(m=r.child,(r.lanes&f)===0){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:Xn,a(v,c)&&r.ref===s.ref)return Zi(r,s,f)}return s.flags|=1,r=Dr(m,c),r.ref=s.ref,r.return=s,s.child=r}function hm(r,s,a,c,f){if(r!==null){var m=r.memoizedProps;if(Xn(m,c)&&r.ref===s.ref)if(Vt=!1,s.pendingProps=c=m,(r.lanes&f)!==0)(r.flags&131072)!==0&&(Vt=!0);else return s.lanes=r.lanes,Zi(r,s,f)}return vc(r,s,a,c,f)}function cm(r,s,a){var c=s.pendingProps,f=c.children,m=r!==null?r.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(en,ii),ii|=a;else{if((a&1073741824)===0)return r=m!==null?m.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Fe(en,ii),ii|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,Fe(en,ii),ii|=c}else m!==null?(c=m.baseLanes|a,s.memoizedState=null):c=a,Fe(en,ii),ii|=c;return Bt(r,s,f,a),s.child}function um(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function vc(r,s,a,c,f){var m=Kt(a)?es:Pt.current;return m=Us(s,m),Gs(s,f),a=lc(r,s,a,c,m,f),c=hc(),r!==null&&!Vt?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Zi(r,s,f)):(We&&c&&Kh(s),s.flags|=1,Bt(r,s,a,f),s.child)}function dm(r,s,a,c,f){if(Kt(a)){var m=!0;Pa(s)}else m=!1;if(Gs(s,f),s.stateNode===null)Va(r,s),em(s,a,c),mc(s,a,c,f),c=!0;else if(r===null){var v=s.stateNode,b=s.memoizedProps;v.props=b;var P=v.context,F=a.contextType;typeof F=="object"&&F!==null?F=li(F):(F=Kt(a)?es:Pt.current,F=Us(s,F));var Y=a.getDerivedStateFromProps,X=typeof Y=="function"||typeof v.getSnapshotBeforeUpdate=="function";X||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(b!==c||P!==F)&&tm(s,v,c,F),br=!1;var q=s.memoizedState;v.state=q,Aa(s,c,v,f),P=s.memoizedState,b!==c||q!==P||Ut.current||br?(typeof Y=="function"&&(pc(s,a,Y,c),P=s.memoizedState),(b=br||Zp(s,a,b,c,q,P,F))?(X||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=P),v.props=c,v.state=P,v.context=F,c=b):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{v=s.stateNode,Pp(r,s),b=s.memoizedProps,F=s.type===s.elementType?b:xi(s.type,b),v.props=F,X=s.pendingProps,q=v.context,P=a.contextType,typeof P=="object"&&P!==null?P=li(P):(P=Kt(a)?es:Pt.current,P=Us(s,P));var ae=a.getDerivedStateFromProps;(Y=typeof ae=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(b!==X||q!==P)&&tm(s,v,c,P),br=!1,q=s.memoizedState,v.state=q,Aa(s,c,v,f);var fe=s.memoizedState;b!==X||q!==fe||Ut.current||br?(typeof ae=="function"&&(pc(s,a,ae,c),fe=s.memoizedState),(F=br||Zp(s,a,F,c,q,fe,P)||!1)?(Y||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,fe,P),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,fe,P)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||b===r.memoizedProps&&q===r.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||b===r.memoizedProps&&q===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=fe),v.props=c,v.state=fe,v.context=P,c=F):(typeof v.componentDidUpdate!="function"||b===r.memoizedProps&&q===r.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||b===r.memoizedProps&&q===r.memoizedState||(s.flags|=1024),c=!1)}return yc(r,s,a,c,m,f)}function yc(r,s,a,c,f,m){um(r,s);var v=(s.flags&128)!==0;if(!c&&!v)return f&&_p(s,a,!1),Zi(r,s,m);c=s.stateNode,uS.current=s;var b=v&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,r!==null&&v?(s.child=Ys(s,r.child,null,m),s.child=Ys(s,null,b,m)):Bt(r,s,b,m),s.memoizedState=c.state,f&&_p(s,a,!0),s.child}function fm(r){var s=r.stateNode;s.pendingContext?mp(r,s.pendingContext,s.pendingContext!==s.context):s.context&&mp(r,s.context,!1),ic(r,s.containerInfo)}function pm(r,s,a,c,f){return qs(),Qh(f),s.flags|=256,Bt(r,s,a,c),s.child}var Sc={dehydrated:null,treeContext:null,retryLane:0};function wc(r){return{baseLanes:r,cachePool:null,transitions:null}}function mm(r,s,a){var c=s.pendingProps,f=qe.current,m=!1,v=(s.flags&128)!==0,b;if((b=v)||(b=r!==null&&r.memoizedState===null?!1:(f&2)!==0),b?(m=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),Fe(qe,f&1),r===null)return Yh(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(v=c.children,r=c.fallback,m?(c=s.mode,m=s.child,v={mode:"hidden",children:v},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=v):m=sl(v,c,0,null),r=cs(r,c,a,null),m.return=s,r.return=s,m.sibling=r,s.child=m,s.child.memoizedState=wc(a),s.memoizedState=Sc,r):xc(s,v));if(f=r.memoizedState,f!==null&&(b=f.dehydrated,b!==null))return dS(r,s,v,c,b,f,a);if(m){m=c.fallback,v=s.mode,f=r.child,b=f.sibling;var P={mode:"hidden",children:c.children};return(v&1)===0&&s.child!==f?(c=s.child,c.childLanes=0,c.pendingProps=P,s.deletions=null):(c=Dr(f,P),c.subtreeFlags=f.subtreeFlags&14680064),b!==null?m=Dr(b,m):(m=cs(m,v,a,null),m.flags|=2),m.return=s,c.return=s,c.sibling=m,s.child=c,c=m,m=s.child,v=r.child.memoizedState,v=v===null?wc(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},m.memoizedState=v,m.childLanes=r.childLanes&~a,s.memoizedState=Sc,c}return m=r.child,r=m.sibling,c=Dr(m,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=c,s.memoizedState=null,c}function xc(r,s){return s=sl({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Ka(r,s,a,c){return c!==null&&Qh(c),Ys(s,r.child,null,a),r=xc(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function dS(r,s,a,c,f,m,v){if(a)return s.flags&256?(s.flags&=-257,c=gc(Error(i(422))),Ka(r,s,v,c)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(m=c.fallback,f=s.mode,c=sl({mode:"visible",children:c.children},f,0,null),m=cs(m,f,v,null),m.flags|=2,c.return=s,m.return=s,c.sibling=m,s.child=c,(s.mode&1)!==0&&Ys(s,r.child,null,v),s.child.memoizedState=wc(v),s.memoizedState=Sc,m);if((s.mode&1)===0)return Ka(r,s,v,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var b=c.dgst;return c=b,m=Error(i(419)),c=gc(m,c,void 0),Ka(r,s,v,c)}if(b=(v&r.childLanes)!==0,Vt||b){if(c=mt,c!==null){switch(v&-v){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(c.suspendedLanes|v))!==0?0:f,f!==0&&f!==m.retryLane&&(m.retryLane=f,Xi(r,f),ki(c,r,f,-1))}return jc(),c=gc(Error(i(421))),Ka(r,s,v,c)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=kS.bind(null,r),f._reactRetry=s,null):(r=m.treeContext,ti=Sr(f.nextSibling),ei=s,We=!0,wi=null,r!==null&&(oi[ai++]=Qi,oi[ai++]=Gi,oi[ai++]=ts,Qi=r.id,Gi=r.overflow,ts=s),s=xc(s,c.children),s.flags|=4096,s)}function gm(r,s,a){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),Zh(r.return,s,a)}function Cc(r,s,a,c,f){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=f)}function _m(r,s,a){var c=s.pendingProps,f=c.revealOrder,m=c.tail;if(Bt(r,s,c.children,a),c=qe.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&gm(r,a,s);else if(r.tag===19)gm(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}if(Fe(qe,c),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)r=a.alternate,r!==null&&ja(r)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Cc(s,!1,f,a,m);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&ja(r)===null){s.child=f;break}r=f.sibling,f.sibling=a,a=f,f=r}Cc(s,!0,a,null,m);break;case"together":Cc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Va(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Zi(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),os|=s.lanes,(a&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,a=Dr(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=Dr(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function fS(r,s,a){switch(s.tag){case 3:fm(s),qs();break;case 5:Dp(s);break;case 1:Kt(s.type)&&Pa(s);break;case 4:ic(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,f=s.memoizedProps.value;Fe(Oa,c._currentValue),c._currentValue=f;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Fe(qe,qe.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?mm(r,s,a):(Fe(qe,qe.current&1),r=Zi(r,s,a),r!==null?r.sibling:null);Fe(qe,qe.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(r.flags&128)!==0){if(c)return _m(r,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Fe(qe,qe.current),c)break;return null;case 22:case 23:return s.lanes=0,cm(r,s,a)}return Zi(r,s,a)}var vm,bc,ym,Sm;vm=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},bc=function(){},ym=function(r,s,a,c){var f=r.memoizedProps;if(f!==c){r=s.stateNode,ss(Mi.current);var m=null;switch(a){case"input":f=Xr(r,f),c=Xr(r,c),m=[];break;case"select":f=Z({},f,{value:void 0}),c=Z({},c,{value:void 0}),m=[];break;case"textarea":f=ih(r,f),c=ih(r,c),m=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(r.onclick=ka)}sh(a,c);var v;a=null;for(F in f)if(!c.hasOwnProperty(F)&&f.hasOwnProperty(F)&&f[F]!=null)if(F==="style"){var b=f[F];for(v in b)b.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(o.hasOwnProperty(F)?m||(m=[]):(m=m||[]).push(F,null));for(F in c){var P=c[F];if(b=f!=null?f[F]:void 0,c.hasOwnProperty(F)&&P!==b&&(P!=null||b!=null))if(F==="style")if(b){for(v in b)!b.hasOwnProperty(v)||P&&P.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in P)P.hasOwnProperty(v)&&b[v]!==P[v]&&(a||(a={}),a[v]=P[v])}else a||(m||(m=[]),m.push(F,a)),a=P;else F==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,b=b?b.__html:void 0,P!=null&&b!==P&&(m=m||[]).push(F,P)):F==="children"?typeof P!="string"&&typeof P!="number"||(m=m||[]).push(F,""+P):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(o.hasOwnProperty(F)?(P!=null&&F==="onScroll"&&ze("scroll",r),m||b===P||(m=[])):(m=m||[]).push(F,P))}a&&(m=m||[]).push("style",a);var F=m;(s.updateQueue=F)&&(s.flags|=4)}},Sm=function(r,s,a,c){a!==c&&(s.flags|=4)};function fo(r,s){if(!We)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function Nt(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,c=0;if(s)for(var f=r.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=c,r.childLanes=a,s}function pS(r,s,a){var c=s.pendingProps;switch(Vh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(s),null;case 1:return Kt(s.type)&&Ra(),Nt(s),null;case 3:return c=s.stateNode,Xs(),He(Ut),He(Pt),nc(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(Ma(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,wi!==null&&(Bc(wi),wi=null))),bc(r,s),Nt(s),null;case 5:rc(s);var f=ss(ao.current);if(a=s.type,r!==null&&s.stateNode!=null)ym(r,s,a,c,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Nt(s),null}if(r=ss(Mi.current),Ma(s)){c=s.stateNode,a=s.type;var m=s.memoizedProps;switch(c[Di]=s,c[io]=m,r=(s.mode&1)!==0,a){case"dialog":ze("cancel",c),ze("close",c);break;case"iframe":case"object":case"embed":ze("load",c);break;case"video":case"audio":for(f=0;f<Zn.length;f++)ze(Zn[f],c);break;case"source":ze("error",c);break;case"img":case"image":case"link":ze("error",c),ze("load",c);break;case"details":ze("toggle",c);break;case"input":Zd(c,m),ze("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},ze("invalid",c);break;case"textarea":rf(c,m),ze("invalid",c)}sh(a,m),f=null;for(var v in m)if(m.hasOwnProperty(v)){var b=m[v];v==="children"?typeof b=="string"?c.textContent!==b&&(m.suppressHydrationWarning!==!0&&ba(c.textContent,b,r),f=["children",b]):typeof b=="number"&&c.textContent!==""+b&&(m.suppressHydrationWarning!==!0&&ba(c.textContent,b,r),f=["children",""+b]):o.hasOwnProperty(v)&&b!=null&&v==="onScroll"&&ze("scroll",c)}switch(a){case"input":Ct(c),tf(c,m,!0);break;case"textarea":Ct(c),nf(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=ka)}c=f,s.updateQueue=c,c!==null&&(s.flags|=4)}else{v=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=of(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=v.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof c.is=="string"?r=v.createElement(a,{is:c.is}):(r=v.createElement(a),a==="select"&&(v=r,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):r=v.createElementNS(r,a),r[Di]=s,r[io]=c,vm(r,s,!1,!1),s.stateNode=r;e:{switch(v=nh(a,c),a){case"dialog":ze("cancel",r),ze("close",r),f=c;break;case"iframe":case"object":case"embed":ze("load",r),f=c;break;case"video":case"audio":for(f=0;f<Zn.length;f++)ze(Zn[f],r);f=c;break;case"source":ze("error",r),f=c;break;case"img":case"image":case"link":ze("error",r),ze("load",r),f=c;break;case"details":ze("toggle",r),f=c;break;case"input":Zd(r,c),f=Xr(r,c),ze("invalid",r);break;case"option":f=c;break;case"select":r._wrapperState={wasMultiple:!!c.multiple},f=Z({},c,{value:void 0}),ze("invalid",r);break;case"textarea":rf(r,c),f=ih(r,c),ze("invalid",r);break;default:f=c}sh(a,f),b=f;for(m in b)if(b.hasOwnProperty(m)){var P=b[m];m==="style"?hf(r,P):m==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&af(r,P)):m==="children"?typeof P=="string"?(a!=="textarea"||P!=="")&&On(r,P):typeof P=="number"&&On(r,""+P):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?P!=null&&m==="onScroll"&&ze("scroll",r):P!=null&&O(r,m,P,v))}switch(a){case"input":Ct(r),tf(r,c,!1);break;case"textarea":Ct(r),nf(r);break;case"option":c.value!=null&&r.setAttribute("value",""+de(c.value));break;case"select":r.multiple=!!c.multiple,m=c.value,m!=null?Ms(r,!!c.multiple,m,!1):c.defaultValue!=null&&Ms(r,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=ka)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Nt(s),null;case 6:if(r&&s.stateNode!=null)Sm(r,s,r.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(a=ss(ao.current),ss(Mi.current),Ma(s)){if(c=s.stateNode,a=s.memoizedProps,c[Di]=s,(m=c.nodeValue!==a)&&(r=ei,r!==null))switch(r.tag){case 3:ba(c.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&ba(c.nodeValue,a,(r.mode&1)!==0)}m&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Di]=s,s.stateNode=c}return Nt(s),null;case 13:if(He(qe),c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(We&&ti!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Cp(),qs(),s.flags|=98560,m=!1;else if(m=Ma(s),c!==null&&c.dehydrated!==null){if(r===null){if(!m)throw Error(i(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[Di]=s}else qs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Nt(s),m=!1}else wi!==null&&(Bc(wi),wi=null),m=!0;if(!m)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(r!==null&&r.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(qe.current&1)!==0?ht===0&&(ht=3):jc())),s.updateQueue!==null&&(s.flags|=4),Nt(s),null);case 4:return Xs(),bc(r,s),r===null&&eo(s.stateNode.containerInfo),Nt(s),null;case 10:return Jh(s.type._context),Nt(s),null;case 17:return Kt(s.type)&&Ra(),Nt(s),null;case 19:if(He(qe),m=s.memoizedState,m===null)return Nt(s),null;if(c=(s.flags&128)!==0,v=m.rendering,v===null)if(c)fo(m,!1);else{if(ht!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(v=ja(r),v!==null){for(s.flags|=128,fo(m,!1),c=v.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)m=a,r=c,m.flags&=14680066,v=m.alternate,v===null?(m.childLanes=0,m.lanes=r,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=v.childLanes,m.lanes=v.lanes,m.child=v.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=v.memoizedProps,m.memoizedState=v.memoizedState,m.updateQueue=v.updateQueue,m.type=v.type,r=v.dependencies,m.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return Fe(qe,qe.current&1|2),s.child}r=r.sibling}m.tail!==null&&it()>tn&&(s.flags|=128,c=!0,fo(m,!1),s.lanes=4194304)}else{if(!c)if(r=ja(v),r!==null){if(s.flags|=128,c=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),fo(m,!0),m.tail===null&&m.tailMode==="hidden"&&!v.alternate&&!We)return Nt(s),null}else 2*it()-m.renderingStartTime>tn&&a!==1073741824&&(s.flags|=128,c=!0,fo(m,!1),s.lanes=4194304);m.isBackwards?(v.sibling=s.child,s.child=v):(a=m.last,a!==null?a.sibling=v:s.child=v,m.last=v)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=it(),s.sibling=null,a=qe.current,Fe(qe,c?a&1|2:a&1),s):(Nt(s),null);case 22:case 23:return Ac(),c=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(ii&1073741824)!==0&&(Nt(s),s.subtreeFlags&6&&(s.flags|=8192)):Nt(s),null;case 24:return null;case 25:return null}throw Error(i(156,s.tag))}function mS(r,s){switch(Vh(s),s.tag){case 1:return Kt(s.type)&&Ra(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Xs(),He(Ut),He(Pt),nc(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return rc(s),null;case 13:if(He(qe),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));qs()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return He(qe),null;case 4:return Xs(),null;case 10:return Jh(s.type._context),null;case 22:case 23:return Ac(),null;case 24:return null;default:return null}}var qa=!1,Dt=!1,gS=typeof WeakSet=="function"?WeakSet:Set,ce=null;function Zs(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){Xe(r,s,c)}else a.current=null}function kc(r,s,a){try{a()}catch(c){Xe(r,s,c)}}var wm=!1;function _S(r,s){if(Ah=fa,r=Zf(),Lh(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var v=0,b=-1,P=-1,F=0,Y=0,X=r,q=null;t:for(;;){for(var ae;X!==a||f!==0&&X.nodeType!==3||(b=v+f),X!==m||c!==0&&X.nodeType!==3||(P=v+c),X.nodeType===3&&(v+=X.nodeValue.length),(ae=X.firstChild)!==null;)q=X,X=ae;for(;;){if(X===r)break t;if(q===a&&++F===f&&(b=v),q===m&&++Y===c&&(P=v),(ae=X.nextSibling)!==null)break;X=q,q=X.parentNode}X=ae}a=b===-1||P===-1?null:{start:b,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(jh={focusedElem:r,selectionRange:a},fa=!1,ce=s;ce!==null;)if(s=ce,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,ce=r;else for(;ce!==null;){s=ce;try{var fe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var me=fe.memoizedProps,rt=fe.memoizedState,B=s.stateNode,D=B.getSnapshotBeforeUpdate(s.elementType===s.type?me:xi(s.type,me),rt);B.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var I=s.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(J){Xe(s,s.return,J)}if(r=s.sibling,r!==null){r.return=s.return,ce=r;break}ce=s.return}return fe=wm,wm=!1,fe}function po(r,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&r)===r){var m=f.destroy;f.destroy=void 0,m!==void 0&&kc(s,a,m)}f=f.next}while(f!==c)}}function Ya(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function Ec(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function xm(r){var s=r.alternate;s!==null&&(r.alternate=null,xm(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[Di],delete s[io],delete s[$h],delete s[Zy],delete s[eS])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Cm(r){return r.tag===5||r.tag===3||r.tag===4}function bm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Cm(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Rc(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=ka));else if(c!==4&&(r=r.child,r!==null))for(Rc(r,s,a),r=r.sibling;r!==null;)Rc(r,s,a),r=r.sibling}function Pc(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(c!==4&&(r=r.child,r!==null))for(Pc(r,s,a),r=r.sibling;r!==null;)Pc(r,s,a),r=r.sibling}var bt=null,Ci=!1;function Er(r,s,a){for(a=a.child;a!==null;)km(r,s,a),a=a.sibling}function km(r,s,a){if(Ni&&typeof Ni.onCommitFiberUnmount=="function")try{Ni.onCommitFiberUnmount(aa,a)}catch{}switch(a.tag){case 5:Dt||Zs(a,s);case 6:var c=bt,f=Ci;bt=null,Er(r,s,a),bt=c,Ci=f,bt!==null&&(Ci?(r=bt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):bt.removeChild(a.stateNode));break;case 18:bt!==null&&(Ci?(r=bt,a=a.stateNode,r.nodeType===8?Hh(r.parentNode,a):r.nodeType===1&&Hh(r,a),Kn(r)):Hh(bt,a.stateNode));break;case 4:c=bt,f=Ci,bt=a.stateNode.containerInfo,Ci=!0,Er(r,s,a),bt=c,Ci=f;break;case 0:case 11:case 14:case 15:if(!Dt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var m=f,v=m.destroy;m=m.tag,v!==void 0&&((m&2)!==0||(m&4)!==0)&&kc(a,s,v),f=f.next}while(f!==c)}Er(r,s,a);break;case 1:if(!Dt&&(Zs(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(b){Xe(a,s,b)}Er(r,s,a);break;case 21:Er(r,s,a);break;case 22:a.mode&1?(Dt=(c=Dt)||a.memoizedState!==null,Er(r,s,a),Dt=c):Er(r,s,a);break;default:Er(r,s,a)}}function Em(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new gS),s.forEach(function(c){var f=ES.bind(null,r,c);a.has(c)||(a.add(c),c.then(f,f))})}}function bi(r,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];try{var m=r,v=s,b=v;e:for(;b!==null;){switch(b.tag){case 5:bt=b.stateNode,Ci=!1;break e;case 3:bt=b.stateNode.containerInfo,Ci=!0;break e;case 4:bt=b.stateNode.containerInfo,Ci=!0;break e}b=b.return}if(bt===null)throw Error(i(160));km(m,v,f),bt=null,Ci=!1;var P=f.alternate;P!==null&&(P.return=null),f.return=null}catch(F){Xe(f,s,F)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Rm(s,r),s=s.sibling}function Rm(r,s){var a=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(bi(s,r),Oi(r),c&4){try{po(3,r,r.return),Ya(3,r)}catch(me){Xe(r,r.return,me)}try{po(5,r,r.return)}catch(me){Xe(r,r.return,me)}}break;case 1:bi(s,r),Oi(r),c&512&&a!==null&&Zs(a,a.return);break;case 5:if(bi(s,r),Oi(r),c&512&&a!==null&&Zs(a,a.return),r.flags&32){var f=r.stateNode;try{On(f,"")}catch(me){Xe(r,r.return,me)}}if(c&4&&(f=r.stateNode,f!=null)){var m=r.memoizedProps,v=a!==null?a.memoizedProps:m,b=r.type,P=r.updateQueue;if(r.updateQueue=null,P!==null)try{b==="input"&&m.type==="radio"&&m.name!=null&&ef(f,m),nh(b,v);var F=nh(b,m);for(v=0;v<P.length;v+=2){var Y=P[v],X=P[v+1];Y==="style"?hf(f,X):Y==="dangerouslySetInnerHTML"?af(f,X):Y==="children"?On(f,X):O(f,Y,X,F)}switch(b){case"input":eh(f,m);break;case"textarea":sf(f,m);break;case"select":var q=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!m.multiple;var ae=m.value;ae!=null?Ms(f,!!m.multiple,ae,!1):q!==!!m.multiple&&(m.defaultValue!=null?Ms(f,!!m.multiple,m.defaultValue,!0):Ms(f,!!m.multiple,m.multiple?[]:"",!1))}f[io]=m}catch(me){Xe(r,r.return,me)}}break;case 6:if(bi(s,r),Oi(r),c&4){if(r.stateNode===null)throw Error(i(162));f=r.stateNode,m=r.memoizedProps;try{f.nodeValue=m}catch(me){Xe(r,r.return,me)}}break;case 3:if(bi(s,r),Oi(r),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Kn(s.containerInfo)}catch(me){Xe(r,r.return,me)}break;case 4:bi(s,r),Oi(r);break;case 13:bi(s,r),Oi(r),f=r.child,f.flags&8192&&(m=f.memoizedState!==null,f.stateNode.isHidden=m,!m||f.alternate!==null&&f.alternate.memoizedState!==null||(Dc=it())),c&4&&Em(r);break;case 22:if(Y=a!==null&&a.memoizedState!==null,r.mode&1?(Dt=(F=Dt)||Y,bi(s,r),Dt=F):bi(s,r),Oi(r),c&8192){if(F=r.memoizedState!==null,(r.stateNode.isHidden=F)&&!Y&&(r.mode&1)!==0)for(ce=r,Y=r.child;Y!==null;){for(X=ce=Y;ce!==null;){switch(q=ce,ae=q.child,q.tag){case 0:case 11:case 14:case 15:po(4,q,q.return);break;case 1:Zs(q,q.return);var fe=q.stateNode;if(typeof fe.componentWillUnmount=="function"){c=q,a=q.return;try{s=c,fe.props=s.memoizedProps,fe.state=s.memoizedState,fe.componentWillUnmount()}catch(me){Xe(c,a,me)}}break;case 5:Zs(q,q.return);break;case 22:if(q.memoizedState!==null){Nm(X);continue}}ae!==null?(ae.return=q,ce=ae):Nm(X)}Y=Y.sibling}e:for(Y=null,X=r;;){if(X.tag===5){if(Y===null){Y=X;try{f=X.stateNode,F?(m=f.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(b=X.stateNode,P=X.memoizedProps.style,v=P!=null&&P.hasOwnProperty("display")?P.display:null,b.style.display=lf("display",v))}catch(me){Xe(r,r.return,me)}}}else if(X.tag===6){if(Y===null)try{X.stateNode.nodeValue=F?"":X.memoizedProps}catch(me){Xe(r,r.return,me)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===r)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===r)break e;for(;X.sibling===null;){if(X.return===null||X.return===r)break e;Y===X&&(Y=null),X=X.return}Y===X&&(Y=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:bi(s,r),Oi(r),c&4&&Em(r);break;case 21:break;default:bi(s,r),Oi(r)}}function Oi(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(Cm(a)){var c=a;break e}a=a.return}throw Error(i(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(On(f,""),c.flags&=-33);var m=bm(r);Pc(r,m,f);break;case 3:case 4:var v=c.stateNode.containerInfo,b=bm(r);Rc(r,b,v);break;default:throw Error(i(161))}}catch(P){Xe(r,r.return,P)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function vS(r,s,a){ce=r,Pm(r)}function Pm(r,s,a){for(var c=(r.mode&1)!==0;ce!==null;){var f=ce,m=f.child;if(f.tag===22&&c){var v=f.memoizedState!==null||qa;if(!v){var b=f.alternate,P=b!==null&&b.memoizedState!==null||Dt;b=qa;var F=Dt;if(qa=v,(Dt=P)&&!F)for(ce=f;ce!==null;)v=ce,P=v.child,v.tag===22&&v.memoizedState!==null?Dm(f):P!==null?(P.return=v,ce=P):Dm(f);for(;m!==null;)ce=m,Pm(m),m=m.sibling;ce=f,qa=b,Dt=F}Lm(r)}else(f.subtreeFlags&8772)!==0&&m!==null?(m.return=f,ce=m):Lm(r)}}function Lm(r){for(;ce!==null;){var s=ce;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Dt||Ya(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Dt)if(a===null)c.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:xi(s.type,a.memoizedProps);c.componentDidUpdate(f,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=s.updateQueue;m!==null&&Np(s,m,c);break;case 3:var v=s.updateQueue;if(v!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Np(s,v,a)}break;case 5:var b=s.stateNode;if(a===null&&s.flags&4){a=b;var P=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&a.focus();break;case"img":P.src&&(a.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var F=s.alternate;if(F!==null){var Y=F.memoizedState;if(Y!==null){var X=Y.dehydrated;X!==null&&Kn(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Dt||s.flags&512&&Ec(s)}catch(q){Xe(s,s.return,q)}}if(s===r){ce=null;break}if(a=s.sibling,a!==null){a.return=s.return,ce=a;break}ce=s.return}}function Nm(r){for(;ce!==null;){var s=ce;if(s===r){ce=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ce=a;break}ce=s.return}}function Dm(r){for(;ce!==null;){var s=ce;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Ya(4,s)}catch(P){Xe(s,a,P)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var f=s.return;try{c.componentDidMount()}catch(P){Xe(s,f,P)}}var m=s.return;try{Ec(s)}catch(P){Xe(s,m,P)}break;case 5:var v=s.return;try{Ec(s)}catch(P){Xe(s,v,P)}}}catch(P){Xe(s,s.return,P)}if(s===r){ce=null;break}var b=s.sibling;if(b!==null){b.return=s.return,ce=b;break}ce=s.return}}var yS=Math.ceil,Qa=T.ReactCurrentDispatcher,Lc=T.ReactCurrentOwner,ci=T.ReactCurrentBatchConfig,Oe=0,mt=null,nt=null,kt=0,ii=0,en=wr(0),ht=0,mo=null,os=0,Ga=0,Nc=0,go=null,qt=null,Dc=0,tn=1/0,er=null,Xa=!1,Mc=null,Rr=null,Ja=!1,Pr=null,Za=0,_o=0,Tc=null,el=-1,tl=0;function It(){return(Oe&6)!==0?it():el!==-1?el:el=it()}function Lr(r){return(r.mode&1)===0?1:(Oe&2)!==0&&kt!==0?kt&-kt:iS.transition!==null?(tl===0&&(tl=bf()),tl):(r=Ae,r!==0||(r=window.event,r=r===void 0?16:Tf(r.type)),r)}function ki(r,s,a,c){if(50<_o)throw _o=0,Tc=null,Error(i(185));zn(r,a,c),((Oe&2)===0||r!==mt)&&(r===mt&&((Oe&2)===0&&(Ga|=a),ht===4&&Nr(r,kt)),Yt(r,c),a===1&&Oe===0&&(s.mode&1)===0&&(tn=it()+500,La&&Cr()))}function Yt(r,s){var a=r.callbackNode;iy(r,s);var c=ca(r,r===mt?kt:0);if(c===0)a!==null&&wf(a),r.callbackNode=null,r.callbackPriority=0;else if(s=c&-c,r.callbackPriority!==s){if(a!=null&&wf(a),s===1)r.tag===0?tS(Tm.bind(null,r)):vp(Tm.bind(null,r)),Xy(function(){(Oe&6)===0&&Cr()}),a=null;else{switch(kf(c)){case 1:a=dh;break;case 4:a=xf;break;case 16:a=oa;break;case 536870912:a=Cf;break;default:a=oa}a=Hm(a,Mm.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function Mm(r,s){if(el=-1,tl=0,(Oe&6)!==0)throw Error(i(327));var a=r.callbackNode;if(rn()&&r.callbackNode!==a)return null;var c=ca(r,r===mt?kt:0);if(c===0)return null;if((c&30)!==0||(c&r.expiredLanes)!==0||s)s=il(r,c);else{s=c;var f=Oe;Oe|=2;var m=Bm();(mt!==r||kt!==s)&&(er=null,tn=it()+500,ls(r,s));do try{xS();break}catch(b){Om(r,b)}while(!0);Xh(),Qa.current=m,Oe=f,nt!==null?s=0:(mt=null,kt=0,s=ht)}if(s!==0){if(s===2&&(f=fh(r),f!==0&&(c=f,s=Oc(r,f))),s===1)throw a=mo,ls(r,0),Nr(r,c),Yt(r,it()),a;if(s===6)Nr(r,c);else{if(f=r.current.alternate,(c&30)===0&&!SS(f)&&(s=il(r,c),s===2&&(m=fh(r),m!==0&&(c=m,s=Oc(r,m))),s===1))throw a=mo,ls(r,0),Nr(r,c),Yt(r,it()),a;switch(r.finishedWork=f,r.finishedLanes=c,s){case 0:case 1:throw Error(i(345));case 2:hs(r,qt,er);break;case 3:if(Nr(r,c),(c&130023424)===c&&(s=Dc+500-it(),10<s)){if(ca(r,0)!==0)break;if(f=r.suspendedLanes,(f&c)!==c){It(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=zh(hs.bind(null,r,qt,er),s);break}hs(r,qt,er);break;case 4:if(Nr(r,c),(c&4194240)===c)break;for(s=r.eventTimes,f=-1;0<c;){var v=31-yi(c);m=1<<v,v=s[v],v>f&&(f=v),c&=~m}if(c=f,c=it()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*yS(c/1960))-c,10<c){r.timeoutHandle=zh(hs.bind(null,r,qt,er),c);break}hs(r,qt,er);break;case 5:hs(r,qt,er);break;default:throw Error(i(329))}}}return Yt(r,it()),r.callbackNode===a?Mm.bind(null,r):null}function Oc(r,s){var a=go;return r.current.memoizedState.isDehydrated&&(ls(r,s).flags|=256),r=il(r,s),r!==2&&(s=qt,qt=a,s!==null&&Bc(s)),r}function Bc(r){qt===null?qt=r:qt.push.apply(qt,r)}function SS(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var f=a[c],m=f.getSnapshot;f=f.value;try{if(!Si(m(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Nr(r,s){for(s&=~Nc,s&=~Ga,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-yi(s),c=1<<a;r[a]=-1,s&=~c}}function Tm(r){if((Oe&6)!==0)throw Error(i(327));rn();var s=ca(r,0);if((s&1)===0)return Yt(r,it()),null;var a=il(r,s);if(r.tag!==0&&a===2){var c=fh(r);c!==0&&(s=c,a=Oc(r,c))}if(a===1)throw a=mo,ls(r,0),Nr(r,s),Yt(r,it()),a;if(a===6)throw Error(i(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,hs(r,qt,er),Yt(r,it()),null}function Ic(r,s){var a=Oe;Oe|=1;try{return r(s)}finally{Oe=a,Oe===0&&(tn=it()+500,La&&Cr())}}function as(r){Pr!==null&&Pr.tag===0&&(Oe&6)===0&&rn();var s=Oe;Oe|=1;var a=ci.transition,c=Ae;try{if(ci.transition=null,Ae=1,r)return r()}finally{Ae=c,ci.transition=a,Oe=s,(Oe&6)===0&&Cr()}}function Ac(){ii=en.current,He(en)}function ls(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,Gy(a)),nt!==null)for(a=nt.return;a!==null;){var c=a;switch(Vh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Ra();break;case 3:Xs(),He(Ut),He(Pt),nc();break;case 5:rc(c);break;case 4:Xs();break;case 13:He(qe);break;case 19:He(qe);break;case 10:Jh(c.type._context);break;case 22:case 23:Ac()}a=a.return}if(mt=r,nt=r=Dr(r.current,null),kt=ii=s,ht=0,mo=null,Nc=Ga=os=0,qt=go=null,rs!==null){for(s=0;s<rs.length;s++)if(a=rs[s],c=a.interleaved,c!==null){a.interleaved=null;var f=c.next,m=a.pending;if(m!==null){var v=m.next;m.next=f,c.next=v}a.pending=c}rs=null}return r}function Om(r,s){do{var a=nt;try{if(Xh(),Fa.current=Wa,za){for(var c=Ye.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}za=!1}if(ns=0,pt=lt=Ye=null,lo=!1,ho=0,Lc.current=null,a===null||a.return===null){ht=1,mo=s,nt=null;break}e:{var m=r,v=a.return,b=a,P=s;if(s=kt,b.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var F=P,Y=b,X=Y.tag;if((Y.mode&1)===0&&(X===0||X===11||X===15)){var q=Y.alternate;q?(Y.updateQueue=q.updateQueue,Y.memoizedState=q.memoizedState,Y.lanes=q.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var ae=nm(v);if(ae!==null){ae.flags&=-257,om(ae,v,b,m,s),ae.mode&1&&sm(m,F,s),s=ae,P=F;var fe=s.updateQueue;if(fe===null){var me=new Set;me.add(P),s.updateQueue=me}else fe.add(P);break e}else{if((s&1)===0){sm(m,F,s),jc();break e}P=Error(i(426))}}else if(We&&b.mode&1){var rt=nm(v);if(rt!==null){(rt.flags&65536)===0&&(rt.flags|=256),om(rt,v,b,m,s),Qh(Js(P,b));break e}}m=P=Js(P,b),ht!==4&&(ht=2),go===null?go=[m]:go.push(m),m=v;do{switch(m.tag){case 3:m.flags|=65536,s&=-s,m.lanes|=s;var B=im(m,P,s);Lp(m,B);break e;case 1:b=P;var D=m.type,I=m.stateNode;if((m.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Rr===null||!Rr.has(I)))){m.flags|=65536,s&=-s,m.lanes|=s;var J=rm(m,b,s);Lp(m,J);break e}}m=m.return}while(m!==null)}Am(a)}catch(ve){s=ve,nt===a&&a!==null&&(nt=a=a.return);continue}break}while(!0)}function Bm(){var r=Qa.current;return Qa.current=Wa,r===null?Wa:r}function jc(){(ht===0||ht===3||ht===2)&&(ht=4),mt===null||(os&268435455)===0&&(Ga&268435455)===0||Nr(mt,kt)}function il(r,s){var a=Oe;Oe|=2;var c=Bm();(mt!==r||kt!==s)&&(er=null,ls(r,s));do try{wS();break}catch(f){Om(r,f)}while(!0);if(Xh(),Oe=a,Qa.current=c,nt!==null)throw Error(i(261));return mt=null,kt=0,ht}function wS(){for(;nt!==null;)Im(nt)}function xS(){for(;nt!==null&&!q0();)Im(nt)}function Im(r){var s=zm(r.alternate,r,ii);r.memoizedProps=r.pendingProps,s===null?Am(r):nt=s,Lc.current=null}function Am(r){var s=r;do{var a=s.alternate;if(r=s.return,(s.flags&32768)===0){if(a=pS(a,s,ii),a!==null){nt=a;return}}else{if(a=mS(a,s),a!==null){a.flags&=32767,nt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{ht=6,nt=null;return}}if(s=s.sibling,s!==null){nt=s;return}nt=s=r}while(s!==null);ht===0&&(ht=5)}function hs(r,s,a){var c=Ae,f=ci.transition;try{ci.transition=null,Ae=1,CS(r,s,a,c)}finally{ci.transition=f,Ae=c}return null}function CS(r,s,a,c){do rn();while(Pr!==null);if((Oe&6)!==0)throw Error(i(327));a=r.finishedWork;var f=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(i(177));r.callbackNode=null,r.callbackPriority=0;var m=a.lanes|a.childLanes;if(ry(r,m),r===mt&&(nt=mt=null,kt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Ja||(Ja=!0,Hm(oa,function(){return rn(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=ci.transition,ci.transition=null;var v=Ae;Ae=1;var b=Oe;Oe|=4,Lc.current=null,_S(r,a),Rm(a,r),Wy(jh),fa=!!Ah,jh=Ah=null,r.current=a,vS(a),Y0(),Oe=b,Ae=v,ci.transition=m}else r.current=a;if(Ja&&(Ja=!1,Pr=r,Za=f),m=r.pendingLanes,m===0&&(Rr=null),X0(a.stateNode),Yt(r,it()),s!==null)for(c=r.onRecoverableError,a=0;a<s.length;a++)f=s[a],c(f.value,{componentStack:f.stack,digest:f.digest});if(Xa)throw Xa=!1,r=Mc,Mc=null,r;return(Za&1)!==0&&r.tag!==0&&rn(),m=r.pendingLanes,(m&1)!==0?r===Tc?_o++:(_o=0,Tc=r):_o=0,Cr(),null}function rn(){if(Pr!==null){var r=kf(Za),s=ci.transition,a=Ae;try{if(ci.transition=null,Ae=16>r?16:r,Pr===null)var c=!1;else{if(r=Pr,Pr=null,Za=0,(Oe&6)!==0)throw Error(i(331));var f=Oe;for(Oe|=4,ce=r.current;ce!==null;){var m=ce,v=m.child;if((ce.flags&16)!==0){var b=m.deletions;if(b!==null){for(var P=0;P<b.length;P++){var F=b[P];for(ce=F;ce!==null;){var Y=ce;switch(Y.tag){case 0:case 11:case 15:po(8,Y,m)}var X=Y.child;if(X!==null)X.return=Y,ce=X;else for(;ce!==null;){Y=ce;var q=Y.sibling,ae=Y.return;if(xm(Y),Y===F){ce=null;break}if(q!==null){q.return=ae,ce=q;break}ce=ae}}}var fe=m.alternate;if(fe!==null){var me=fe.child;if(me!==null){fe.child=null;do{var rt=me.sibling;me.sibling=null,me=rt}while(me!==null)}}ce=m}}if((m.subtreeFlags&2064)!==0&&v!==null)v.return=m,ce=v;else e:for(;ce!==null;){if(m=ce,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:po(9,m,m.return)}var B=m.sibling;if(B!==null){B.return=m.return,ce=B;break e}ce=m.return}}var D=r.current;for(ce=D;ce!==null;){v=ce;var I=v.child;if((v.subtreeFlags&2064)!==0&&I!==null)I.return=v,ce=I;else e:for(v=D;ce!==null;){if(b=ce,(b.flags&2048)!==0)try{switch(b.tag){case 0:case 11:case 15:Ya(9,b)}}catch(ve){Xe(b,b.return,ve)}if(b===v){ce=null;break e}var J=b.sibling;if(J!==null){J.return=b.return,ce=J;break e}ce=b.return}}if(Oe=f,Cr(),Ni&&typeof Ni.onPostCommitFiberRoot=="function")try{Ni.onPostCommitFiberRoot(aa,r)}catch{}c=!0}return c}finally{Ae=a,ci.transition=s}}return!1}function jm(r,s,a){s=Js(a,s),s=im(r,s,1),r=kr(r,s,1),s=It(),r!==null&&(zn(r,1,s),Yt(r,s))}function Xe(r,s,a){if(r.tag===3)jm(r,r,a);else for(;s!==null;){if(s.tag===3){jm(s,r,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Rr===null||!Rr.has(c))){r=Js(a,r),r=rm(s,r,1),s=kr(s,r,1),r=It(),s!==null&&(zn(s,1,r),Yt(s,r));break}}s=s.return}}function bS(r,s,a){var c=r.pingCache;c!==null&&c.delete(s),s=It(),r.pingedLanes|=r.suspendedLanes&a,mt===r&&(kt&a)===a&&(ht===4||ht===3&&(kt&130023424)===kt&&500>it()-Dc?ls(r,0):Nc|=a),Yt(r,s)}function Fm(r,s){s===0&&((r.mode&1)===0?s=1:(s=ha,ha<<=1,(ha&130023424)===0&&(ha=4194304)));var a=It();r=Xi(r,s),r!==null&&(zn(r,s,a),Yt(r,a))}function kS(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),Fm(r,a)}function ES(r,s){var a=0;switch(r.tag){case 13:var c=r.stateNode,f=r.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=r.stateNode;break;default:throw Error(i(314))}c!==null&&c.delete(s),Fm(r,a)}var zm;zm=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||Ut.current)Vt=!0;else{if((r.lanes&a)===0&&(s.flags&128)===0)return Vt=!1,fS(r,s,a);Vt=(r.flags&131072)!==0}else Vt=!1,We&&(s.flags&1048576)!==0&&yp(s,Da,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Va(r,s),r=s.pendingProps;var f=Us(s,Pt.current);Gs(s,a),f=lc(null,s,c,r,f,a);var m=hc();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Kt(c)?(m=!0,Pa(s)):m=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,tc(s),f.updater=Ua,s.stateNode=f,f._reactInternals=s,mc(s,c,r,a),s=yc(null,s,c,!0,m,a)):(s.tag=0,We&&m&&Kh(s),Bt(null,s,f,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Va(r,s),r=s.pendingProps,f=c._init,c=f(c._payload),s.type=c,f=s.tag=PS(c),r=xi(c,r),f){case 0:s=vc(null,s,c,r,a);break e;case 1:s=dm(null,s,c,r,a);break e;case 11:s=am(null,s,c,r,a);break e;case 14:s=lm(null,s,c,xi(c.type,r),a);break e}throw Error(i(306,c,""))}return s;case 0:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:xi(c,f),vc(r,s,c,f,a);case 1:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:xi(c,f),dm(r,s,c,f,a);case 3:e:{if(fm(s),r===null)throw Error(i(387));c=s.pendingProps,m=s.memoizedState,f=m.element,Pp(r,s),Aa(s,c,null,a);var v=s.memoizedState;if(c=v.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){f=Js(Error(i(423)),s),s=pm(r,s,c,a,f);break e}else if(c!==f){f=Js(Error(i(424)),s),s=pm(r,s,c,a,f);break e}else for(ti=Sr(s.stateNode.containerInfo.firstChild),ei=s,We=!0,wi=null,a=Ep(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(qs(),c===f){s=Zi(r,s,a);break e}Bt(r,s,c,a)}s=s.child}return s;case 5:return Dp(s),r===null&&Yh(s),c=s.type,f=s.pendingProps,m=r!==null?r.memoizedProps:null,v=f.children,Fh(c,f)?v=null:m!==null&&Fh(c,m)&&(s.flags|=32),um(r,s),Bt(r,s,v,a),s.child;case 6:return r===null&&Yh(s),null;case 13:return mm(r,s,a);case 4:return ic(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=Ys(s,null,c,a):Bt(r,s,c,a),s.child;case 11:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:xi(c,f),am(r,s,c,f,a);case 7:return Bt(r,s,s.pendingProps,a),s.child;case 8:return Bt(r,s,s.pendingProps.children,a),s.child;case 12:return Bt(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,f=s.pendingProps,m=s.memoizedProps,v=f.value,Fe(Oa,c._currentValue),c._currentValue=v,m!==null)if(Si(m.value,v)){if(m.children===f.children&&!Ut.current){s=Zi(r,s,a);break e}}else for(m=s.child,m!==null&&(m.return=s);m!==null;){var b=m.dependencies;if(b!==null){v=m.child;for(var P=b.firstContext;P!==null;){if(P.context===c){if(m.tag===1){P=Ji(-1,a&-a),P.tag=2;var F=m.updateQueue;if(F!==null){F=F.shared;var Y=F.pending;Y===null?P.next=P:(P.next=Y.next,Y.next=P),F.pending=P}}m.lanes|=a,P=m.alternate,P!==null&&(P.lanes|=a),Zh(m.return,a,s),b.lanes|=a;break}P=P.next}}else if(m.tag===10)v=m.type===s.type?null:m.child;else if(m.tag===18){if(v=m.return,v===null)throw Error(i(341));v.lanes|=a,b=v.alternate,b!==null&&(b.lanes|=a),Zh(v,a,s),v=m.sibling}else v=m.child;if(v!==null)v.return=m;else for(v=m;v!==null;){if(v===s){v=null;break}if(m=v.sibling,m!==null){m.return=v.return,v=m;break}v=v.return}m=v}Bt(r,s,f.children,a),s=s.child}return s;case 9:return f=s.type,c=s.pendingProps.children,Gs(s,a),f=li(f),c=c(f),s.flags|=1,Bt(r,s,c,a),s.child;case 14:return c=s.type,f=xi(c,s.pendingProps),f=xi(c.type,f),lm(r,s,c,f,a);case 15:return hm(r,s,s.type,s.pendingProps,a);case 17:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:xi(c,f),Va(r,s),s.tag=1,Kt(c)?(r=!0,Pa(s)):r=!1,Gs(s,a),em(s,c,f),mc(s,c,f,a),yc(null,s,c,!0,r,a);case 19:return _m(r,s,a);case 22:return cm(r,s,a)}throw Error(i(156,s.tag))};function Hm(r,s){return Sf(r,s)}function RS(r,s,a,c){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ui(r,s,a,c){return new RS(r,s,a,c)}function Fc(r){return r=r.prototype,!(!r||!r.isReactComponent)}function PS(r){if(typeof r=="function")return Fc(r)?1:0;if(r!=null){if(r=r.$$typeof,r===z)return 11;if(r===V)return 14}return 2}function Dr(r,s){var a=r.alternate;return a===null?(a=ui(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function rl(r,s,a,c,f,m){var v=2;if(c=r,typeof r=="function")Fc(r)&&(v=1);else if(typeof r=="string")v=5;else e:switch(r){case le:return cs(a.children,f,m,s);case ue:v=8,f|=8;break;case ye:return r=ui(12,a,s,f|2),r.elementType=ye,r.lanes=m,r;case j:return r=ui(13,a,s,f),r.elementType=j,r.lanes=m,r;case U:return r=ui(19,a,s,f),r.elementType=U,r.lanes=m,r;case te:return sl(a,f,m,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case ie:v=10;break e;case se:v=9;break e;case z:v=11;break e;case V:v=14;break e;case K:v=16,c=null;break e}throw Error(i(130,r==null?r:typeof r,""))}return s=ui(v,a,s,f),s.elementType=r,s.type=c,s.lanes=m,s}function cs(r,s,a,c){return r=ui(7,r,c,s),r.lanes=a,r}function sl(r,s,a,c){return r=ui(22,r,c,s),r.elementType=te,r.lanes=a,r.stateNode={isHidden:!1},r}function zc(r,s,a){return r=ui(6,r,null,s),r.lanes=a,r}function Hc(r,s,a){return s=ui(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function LS(r,s,a,c,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ph(0),this.expirationTimes=ph(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ph(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function $c(r,s,a,c,f,m,v,b,P){return r=new LS(r,s,a,b,P),s===1?(s=1,m===!0&&(s|=8)):s=0,m=ui(3,null,null,s),r.current=m,m.stateNode=r,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},tc(m),r}function NS(r,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G,key:c==null?null:""+c,children:r,containerInfo:s,implementation:a}}function $m(r){if(!r)return xr;r=r._reactInternals;e:{if(Jr(r)!==r||r.tag!==1)throw Error(i(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Kt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(i(171))}if(r.tag===1){var a=r.type;if(Kt(a))return gp(r,a,s)}return s}function Wm(r,s,a,c,f,m,v,b,P){return r=$c(a,c,!0,r,f,m,v,b,P),r.context=$m(null),a=r.current,c=It(),f=Lr(a),m=Ji(c,f),m.callback=s??null,kr(a,m,f),r.current.lanes=f,zn(r,f,c),Yt(r,c),r}function nl(r,s,a,c){var f=s.current,m=It(),v=Lr(f);return a=$m(a),s.context===null?s.context=a:s.pendingContext=a,s=Ji(m,v),s.payload={element:r},c=c===void 0?null:c,c!==null&&(s.callback=c),r=kr(f,s,v),r!==null&&(ki(r,f,v,m),Ia(r,f,v)),v}function ol(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Um(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function Wc(r,s){Um(r,s),(r=r.alternate)&&Um(r,s)}function DS(){return null}var Km=typeof reportError=="function"?reportError:function(r){console.error(r)};function Uc(r){this._internalRoot=r}al.prototype.render=Uc.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));nl(r,s,null,null)},al.prototype.unmount=Uc.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;as(function(){nl(null,r,null,null)}),s[qi]=null}};function al(r){this._internalRoot=r}al.prototype.unstable_scheduleHydration=function(r){if(r){var s=Pf();r={blockedOn:null,target:r,priority:s};for(var a=0;a<_r.length&&s!==0&&s<_r[a].priority;a++);_r.splice(a,0,r),a===0&&Df(r)}};function Kc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function ll(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Vm(){}function MS(r,s,a,c,f){if(f){if(typeof c=="function"){var m=c;c=function(){var F=ol(v);m.call(F)}}var v=Wm(s,c,r,0,null,!1,!1,"",Vm);return r._reactRootContainer=v,r[qi]=v.current,eo(r.nodeType===8?r.parentNode:r),as(),v}for(;f=r.lastChild;)r.removeChild(f);if(typeof c=="function"){var b=c;c=function(){var F=ol(P);b.call(F)}}var P=$c(r,0,!1,null,null,!1,!1,"",Vm);return r._reactRootContainer=P,r[qi]=P.current,eo(r.nodeType===8?r.parentNode:r),as(function(){nl(s,P,a,c)}),P}function hl(r,s,a,c,f){var m=a._reactRootContainer;if(m){var v=m;if(typeof f=="function"){var b=f;f=function(){var P=ol(v);b.call(P)}}nl(s,v,r,f)}else v=MS(a,s,r,f,c);return ol(v)}Ef=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=Fn(s.pendingLanes);a!==0&&(mh(s,a|1),Yt(s,it()),(Oe&6)===0&&(tn=it()+500,Cr()))}break;case 13:as(function(){var c=Xi(r,1);if(c!==null){var f=It();ki(c,r,1,f)}}),Wc(r,1)}},gh=function(r){if(r.tag===13){var s=Xi(r,134217728);if(s!==null){var a=It();ki(s,r,134217728,a)}Wc(r,134217728)}},Rf=function(r){if(r.tag===13){var s=Lr(r),a=Xi(r,s);if(a!==null){var c=It();ki(a,r,s,c)}Wc(r,s)}},Pf=function(){return Ae},Lf=function(r,s){var a=Ae;try{return Ae=r,s()}finally{Ae=a}},lh=function(r,s,a){switch(s){case"input":if(eh(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==r&&c.form===r.form){var f=Ea(c);if(!f)throw Error(i(90));Ot(c),eh(c,f)}}}break;case"textarea":sf(r,a);break;case"select":s=a.value,s!=null&&Ms(r,!!a.multiple,s,!1)}},ff=Ic,pf=as;var TS={usingClientEntryPoint:!1,Events:[ro,$s,Ea,uf,df,Ic]},vo={findFiberByHostInstance:Zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OS={bundleType:vo.bundleType,version:vo.version,rendererPackageName:vo.rendererPackageName,rendererConfig:vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=vf(r),r===null?null:r.stateNode},findFiberByHostInstance:vo.findFiberByHostInstance||DS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cl.isDisabled&&cl.supportsFiber)try{aa=cl.inject(OS),Ni=cl}catch{}}return Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TS,Qt.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kc(s))throw Error(i(200));return NS(r,s,null,a)},Qt.createRoot=function(r,s){if(!Kc(r))throw Error(i(299));var a=!1,c="",f=Km;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=$c(r,1,!1,null,null,a,!1,c,f),r[qi]=s.current,eo(r.nodeType===8?r.parentNode:r),new Uc(s)},Qt.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=vf(s),r=r===null?null:r.stateNode,r},Qt.flushSync=function(r){return as(r)},Qt.hydrate=function(r,s,a){if(!ll(s))throw Error(i(200));return hl(null,r,s,!0,a)},Qt.hydrateRoot=function(r,s,a){if(!Kc(r))throw Error(i(405));var c=a!=null&&a.hydratedSources||null,f=!1,m="",v=Km;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),s=Wm(s,null,r,1,a??null,f,!1,m,v),r[qi]=s.current,eo(r),c)for(r=0;r<c.length;r++)a=c[r],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new al(s)},Qt.render=function(r,s,a){if(!ll(s))throw Error(i(200));return hl(null,r,s,!1,a)},Qt.unmountComponentAtNode=function(r){if(!ll(r))throw Error(i(40));return r._reactRootContainer?(as(function(){hl(null,null,r,!1,function(){r._reactRootContainer=null,r[qi]=null})}),!0):!1},Qt.unstable_batchedUpdates=Ic,Qt.unstable_renderSubtreeIntoContainer=function(r,s,a,c){if(!ll(a))throw Error(i(200));if(r==null||r._reactInternals===void 0)throw Error(i(38));return hl(r,s,a,!1,c)},Qt.version="18.3.1-next-f1338f8080-20240426",Qt}var tg;function WS(){if(tg)return Qc.exports;tg=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Qc.exports=$S(),Qc.exports}var ig;function US(){if(ig)return dl;ig=1;var e=WS();return dl.createRoot=e.createRoot,dl.hydrateRoot=e.hydrateRoot,dl}var KS=US();const VS=ev(KS);var En=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},qS={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Fr,kd,z_,YS=(z_=class{constructor(){Se(this,Fr,qS);Se(this,kd,!1)}setTimeoutProvider(e){ne(this,Fr,e)}setTimeout(e,t){return R(this,Fr).setTimeout(e,t)}clearTimeout(e){R(this,Fr).clearTimeout(e)}setInterval(e,t){return R(this,Fr).setInterval(e,t)}clearInterval(e){R(this,Fr).clearInterval(e)}},Fr=new WeakMap,kd=new WeakMap,z_),ps=new YS;function QS(e){setTimeout(e,0)}var Es=typeof window>"u"||"Deno"in globalThis;function zt(){}function GS(e,t){return typeof e=="function"?e(t):e}function xu(e){return typeof e=="number"&&e>=0&&e!==1/0}function tv(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Qr(e,t){return typeof e=="function"?e(t):e}function mi(e,t){return typeof e=="function"?e(t):e}function rg(e,t){const{type:i="all",exact:n,fetchStatus:o,predicate:l,queryKey:h,stale:u}=e;if(h){if(n){if(t.queryHash!==Ed(h,t.options))return!1}else if(!Ao(t.queryKey,h))return!1}if(i!=="all"){const p=t.isActive();if(i==="active"&&!p||i==="inactive"&&p)return!1}return!(typeof u=="boolean"&&t.isStale()!==u||o&&o!==t.state.fetchStatus||l&&!l(t))}function sg(e,t){const{exact:i,status:n,predicate:o,mutationKey:l}=e;if(l){if(!t.options.mutationKey)return!1;if(i){if(Rs(t.options.mutationKey)!==Rs(l))return!1}else if(!Ao(t.options.mutationKey,l))return!1}return!(n&&t.state.status!==n||o&&!o(t))}function Ed(e,t){return((t==null?void 0:t.queryKeyHashFn)||Rs)(e)}function Rs(e){return JSON.stringify(e,(t,i)=>Cu(i)?Object.keys(i).sort().reduce((n,o)=>(n[o]=i[o],n),{}):i)}function Ao(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(i=>Ao(e[i],t[i])):!1}var XS=Object.prototype.hasOwnProperty;function iv(e,t){if(e===t)return e;const i=ng(e)&&ng(t);if(!i&&!(Cu(e)&&Cu(t)))return t;const o=(i?e:Object.keys(e)).length,l=i?t:Object.keys(t),h=l.length,u=i?new Array(h):{};let p=0;for(let d=0;d<h;d++){const _=i?d:l[d],g=e[_],y=t[_];if(g===y){u[_]=g,(i?d<o:XS.call(e,_))&&p++;continue}if(g===null||y===null||typeof g!="object"||typeof y!="object"){u[_]=y;continue}const w=iv(g,y);u[_]=w,w===g&&p++}return o===h&&p===o?e:u}function Tl(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(e[i]!==t[i])return!1;return!0}function ng(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Cu(e){if(!og(e))return!1;const t=e.constructor;if(t===void 0)return!0;const i=t.prototype;return!(!og(i)||!i.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function og(e){return Object.prototype.toString.call(e)==="[object Object]"}function JS(e){return new Promise(t=>{ps.setTimeout(t,e)})}function bu(e,t,i){return typeof i.structuralSharing=="function"?i.structuralSharing(e,t):i.structuralSharing!==!1?iv(e,t):t}function ZS(e,t,i=0){const n=[...e,t];return i&&n.length>i?n.slice(1):n}function e1(e,t,i=0){const n=[t,...e];return i&&n.length>i?n.slice(0,-1):n}var Rd=Symbol();function rv(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Rd?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Pd(e,t){return typeof e=="function"?e(...t):!!e}function t1(e,t,i){let n=!1,o;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(o??(o=t()),n||(n=!0,o.aborted?i():o.addEventListener("abort",i,{once:!0})),o)}),e}var gs,zr,dn,H_,i1=(H_=class extends En{constructor(){super();Se(this,gs);Se(this,zr);Se(this,dn);ne(this,dn,t=>{if(!Es&&window.addEventListener){const i=()=>t();return window.addEventListener("visibilitychange",i,!1),()=>{window.removeEventListener("visibilitychange",i)}}})}onSubscribe(){R(this,zr)||this.setEventListener(R(this,dn))}onUnsubscribe(){var t;this.hasListeners()||((t=R(this,zr))==null||t.call(this),ne(this,zr,void 0))}setEventListener(t){var i;ne(this,dn,t),(i=R(this,zr))==null||i.call(this),ne(this,zr,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){R(this,gs)!==t&&(ne(this,gs,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(i=>{i(t)})}isFocused(){var t;return typeof R(this,gs)=="boolean"?R(this,gs):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},gs=new WeakMap,zr=new WeakMap,dn=new WeakMap,H_),Ld=new i1;function ku(){let e,t;const i=new Promise((o,l)=>{e=o,t=l});i.status="pending",i.catch(()=>{});function n(o){Object.assign(i,o),delete i.resolve,delete i.reject}return i.resolve=o=>{n({status:"fulfilled",value:o}),e(o)},i.reject=o=>{n({status:"rejected",reason:o}),t(o)},i}var r1=QS;function s1(){let e=[],t=0,i=u=>{u()},n=u=>{u()},o=r1;const l=u=>{t?e.push(u):o(()=>{i(u)})},h=()=>{const u=e;e=[],u.length&&o(()=>{n(()=>{u.forEach(p=>{i(p)})})})};return{batch:u=>{let p;t++;try{p=u()}finally{t--,t||h()}return p},batchCalls:u=>(...p)=>{l(()=>{u(...p)})},schedule:l,setNotifyFunction:u=>{i=u},setBatchNotifyFunction:u=>{n=u},setScheduler:u=>{o=u}}}var dt=s1(),fn,Hr,pn,$_,n1=($_=class extends En{constructor(){super();Se(this,fn,!0);Se(this,Hr);Se(this,pn);ne(this,pn,t=>{if(!Es&&window.addEventListener){const i=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",i,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",n)}}})}onSubscribe(){R(this,Hr)||this.setEventListener(R(this,pn))}onUnsubscribe(){var t;this.hasListeners()||((t=R(this,Hr))==null||t.call(this),ne(this,Hr,void 0))}setEventListener(t){var i;ne(this,pn,t),(i=R(this,Hr))==null||i.call(this),ne(this,Hr,t(this.setOnline.bind(this)))}setOnline(t){R(this,fn)!==t&&(ne(this,fn,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return R(this,fn)}},fn=new WeakMap,Hr=new WeakMap,pn=new WeakMap,$_),Ol=new n1;function o1(e){return Math.min(1e3*2**e,3e4)}function sv(e){return(e??"online")==="online"?Ol.isOnline():!0}var Eu=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function nv(e){let t=!1,i=0,n;const o=ku(),l=()=>o.status!=="pending",h=C=>{var k;if(!l()){const L=new Eu(C);y(L),(k=e.onCancel)==null||k.call(e,L)}},u=()=>{t=!0},p=()=>{t=!1},d=()=>Ld.isFocused()&&(e.networkMode==="always"||Ol.isOnline())&&e.canRun(),_=()=>sv(e.networkMode)&&e.canRun(),g=C=>{l()||(n==null||n(),o.resolve(C))},y=C=>{l()||(n==null||n(),o.reject(C))},w=()=>new Promise(C=>{var k;n=L=>{(l()||d())&&C(L)},(k=e.onPause)==null||k.call(e)}).then(()=>{var C;n=void 0,l()||(C=e.onContinue)==null||C.call(e)}),x=()=>{if(l())return;let C;const k=i===0?e.initialPromise:void 0;try{C=k??e.fn()}catch(L){C=Promise.reject(L)}Promise.resolve(C).then(g).catch(L=>{var G;if(l())return;const W=e.retry??(Es?0:3),O=e.retryDelay??o1,T=typeof O=="function"?O(i,L):O,$=W===!0||typeof W=="number"&&i<W||typeof W=="function"&&W(i,L);if(t||!$){y(L);return}i++,(G=e.onFail)==null||G.call(e,i,L),JS(T).then(()=>d()?void 0:w()).then(()=>{t?y(L):x()})})};return{promise:o,status:()=>o.status,cancel:h,continue:()=>(n==null||n(),o),cancelRetry:u,continueRetry:p,canStart:_,start:()=>(_()?x():w().then(x),o)}}var _s,W_,ov=(W_=class{constructor(){Se(this,_s)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),xu(this.gcTime)&&ne(this,_s,ps.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Es?1/0:300*1e3))}clearGcTimeout(){R(this,_s)&&(ps.clearTimeout(R(this,_s)),ne(this,_s,void 0))}},_s=new WeakMap,W_),vs,mn,pi,ys,_t,Ko,Ss,Ri,ir,U_,a1=(U_=class extends ov{constructor(t){super();Se(this,Ri);Se(this,vs);Se(this,mn);Se(this,pi);Se(this,ys);Se(this,_t);Se(this,Ko);Se(this,Ss);ne(this,Ss,!1),ne(this,Ko,t.defaultOptions),this.setOptions(t.options),this.observers=[],ne(this,ys,t.client),ne(this,pi,R(this,ys).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ne(this,vs,lg(this.options)),this.state=t.state??R(this,vs),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=R(this,_t))==null?void 0:t.promise}setOptions(t){if(this.options={...R(this,Ko),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const i=lg(this.options);i.data!==void 0&&(this.setState(ag(i.data,i.dataUpdatedAt)),ne(this,vs,i))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&R(this,pi).remove(this)}setData(t,i){const n=bu(this.state.data,t,this.options);return Re(this,Ri,ir).call(this,{data:n,type:"success",dataUpdatedAt:i==null?void 0:i.updatedAt,manual:i==null?void 0:i.manual}),n}setState(t,i){Re(this,Ri,ir).call(this,{type:"setState",state:t,setStateOptions:i})}cancel(t){var n,o;const i=(n=R(this,_t))==null?void 0:n.promise;return(o=R(this,_t))==null||o.cancel(t),i?i.then(zt).catch(zt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(R(this,vs))}isActive(){return this.observers.some(t=>mi(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Rd||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Qr(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!tv(this.state.dataUpdatedAt,t)}onFocus(){var i;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(i=R(this,_t))==null||i.continue()}onOnline(){var i;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(i=R(this,_t))==null||i.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),R(this,pi).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(i=>i!==t),this.observers.length||(R(this,_t)&&(R(this,Ss)?R(this,_t).cancel({revert:!0}):R(this,_t).cancelRetry()),this.scheduleGc()),R(this,pi).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Re(this,Ri,ir).call(this,{type:"invalidate"})}async fetch(t,i){var p,d,_,g,y,w,x,C,k,L,W,O;if(this.state.fetchStatus!=="idle"&&((p=R(this,_t))==null?void 0:p.status())!=="rejected"){if(this.state.data!==void 0&&(i!=null&&i.cancelRefetch))this.cancel({silent:!0});else if(R(this,_t))return R(this,_t).continueRetry(),R(this,_t).promise}if(t&&this.setOptions(t),!this.options.queryFn){const T=this.observers.find($=>$.options.queryFn);T&&this.setOptions(T.options)}const n=new AbortController,o=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(ne(this,Ss,!0),n.signal)})},l=()=>{const T=rv(this.options,i),G=(()=>{const le={client:R(this,ys),queryKey:this.queryKey,meta:this.meta};return o(le),le})();return ne(this,Ss,!1),this.options.persister?this.options.persister(T,G,this):T(G)},u=(()=>{const T={fetchOptions:i,options:this.options,queryKey:this.queryKey,client:R(this,ys),state:this.state,fetchFn:l};return o(T),T})();(d=this.options.behavior)==null||d.onFetch(u,this),ne(this,mn,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((_=u.fetchOptions)==null?void 0:_.meta))&&Re(this,Ri,ir).call(this,{type:"fetch",meta:(g=u.fetchOptions)==null?void 0:g.meta}),ne(this,_t,nv({initialPromise:i==null?void 0:i.initialPromise,fn:u.fetchFn,onCancel:T=>{T instanceof Eu&&T.revert&&this.setState({...R(this,mn),fetchStatus:"idle"}),n.abort()},onFail:(T,$)=>{Re(this,Ri,ir).call(this,{type:"failed",failureCount:T,error:$})},onPause:()=>{Re(this,Ri,ir).call(this,{type:"pause"})},onContinue:()=>{Re(this,Ri,ir).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0}));try{const T=await R(this,_t).start();if(T===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(T),(w=(y=R(this,pi).config).onSuccess)==null||w.call(y,T,this),(C=(x=R(this,pi).config).onSettled)==null||C.call(x,T,this.state.error,this),T}catch(T){if(T instanceof Eu){if(T.silent)return R(this,_t).promise;if(T.revert){if(this.state.data===void 0)throw T;return this.state.data}}throw Re(this,Ri,ir).call(this,{type:"error",error:T}),(L=(k=R(this,pi).config).onError)==null||L.call(k,T,this),(O=(W=R(this,pi).config).onSettled)==null||O.call(W,this.state.data,T,this),T}finally{this.scheduleGc()}}},vs=new WeakMap,mn=new WeakMap,pi=new WeakMap,ys=new WeakMap,_t=new WeakMap,Ko=new WeakMap,Ss=new WeakMap,Ri=new WeakSet,ir=function(t){const i=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...av(n.data,this.options),fetchMeta:t.meta??null};case"success":const o={...n,...ag(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ne(this,mn,t.manual?o:void 0),o;case"error":const l=t.error;return{...n,error:l,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=i(this.state),dt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),R(this,pi).notify({query:this,type:"updated",action:t})})},U_);function av(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:sv(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function ag(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function lg(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,i=t!==void 0,n=i?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:i?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:i?"success":"pending",fetchStatus:"idle"}}var Xt,Me,Vo,jt,ws,gn,rr,$r,qo,_n,vn,xs,Cs,Wr,yn,Ie,Po,Ru,Pu,Lu,Nu,Du,Mu,Tu,lv,K_,l1=(K_=class extends En{constructor(t,i){super();Se(this,Ie);Se(this,Xt);Se(this,Me);Se(this,Vo);Se(this,jt);Se(this,ws);Se(this,gn);Se(this,rr);Se(this,$r);Se(this,qo);Se(this,_n);Se(this,vn);Se(this,xs);Se(this,Cs);Se(this,Wr);Se(this,yn,new Set);this.options=i,ne(this,Xt,t),ne(this,$r,null),ne(this,rr,ku()),this.bindMethods(),this.setOptions(i)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(R(this,Me).addObserver(this),hg(R(this,Me),this.options)?Re(this,Ie,Po).call(this):this.updateResult(),Re(this,Ie,Nu).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ou(R(this,Me),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ou(R(this,Me),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Re(this,Ie,Du).call(this),Re(this,Ie,Mu).call(this),R(this,Me).removeObserver(this)}setOptions(t){const i=this.options,n=R(this,Me);if(this.options=R(this,Xt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof mi(this.options.enabled,R(this,Me))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Re(this,Ie,Tu).call(this),R(this,Me).setOptions(this.options),i._defaulted&&!Tl(this.options,i)&&R(this,Xt).getQueryCache().notify({type:"observerOptionsUpdated",query:R(this,Me),observer:this});const o=this.hasListeners();o&&cg(R(this,Me),n,this.options,i)&&Re(this,Ie,Po).call(this),this.updateResult(),o&&(R(this,Me)!==n||mi(this.options.enabled,R(this,Me))!==mi(i.enabled,R(this,Me))||Qr(this.options.staleTime,R(this,Me))!==Qr(i.staleTime,R(this,Me)))&&Re(this,Ie,Ru).call(this);const l=Re(this,Ie,Pu).call(this);o&&(R(this,Me)!==n||mi(this.options.enabled,R(this,Me))!==mi(i.enabled,R(this,Me))||l!==R(this,Wr))&&Re(this,Ie,Lu).call(this,l)}getOptimisticResult(t){const i=R(this,Xt).getQueryCache().build(R(this,Xt),t),n=this.createResult(i,t);return c1(this,n)&&(ne(this,jt,n),ne(this,gn,this.options),ne(this,ws,R(this,Me).state)),n}getCurrentResult(){return R(this,jt)}trackResult(t,i){return new Proxy(t,{get:(n,o)=>(this.trackProp(o),i==null||i(o),o==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&R(this,rr).status==="pending"&&R(this,rr).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,o))})}trackProp(t){R(this,yn).add(t)}getCurrentQuery(){return R(this,Me)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const i=R(this,Xt).defaultQueryOptions(t),n=R(this,Xt).getQueryCache().build(R(this,Xt),i);return n.fetch().then(()=>this.createResult(n,i))}fetch(t){return Re(this,Ie,Po).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),R(this,jt)))}createResult(t,i){var ye;const n=R(this,Me),o=this.options,l=R(this,jt),h=R(this,ws),u=R(this,gn),d=t!==n?t.state:R(this,Vo),{state:_}=t;let g={..._},y=!1,w;if(i._optimisticResults){const ie=this.hasListeners(),se=!ie&&hg(t,i),z=ie&&cg(t,n,i,o);(se||z)&&(g={...g,...av(_.data,t.options)}),i._optimisticResults==="isRestoring"&&(g.fetchStatus="idle")}let{error:x,errorUpdatedAt:C,status:k}=g;w=g.data;let L=!1;if(i.placeholderData!==void 0&&w===void 0&&k==="pending"){let ie;l!=null&&l.isPlaceholderData&&i.placeholderData===(u==null?void 0:u.placeholderData)?(ie=l.data,L=!0):ie=typeof i.placeholderData=="function"?i.placeholderData((ye=R(this,vn))==null?void 0:ye.state.data,R(this,vn)):i.placeholderData,ie!==void 0&&(k="success",w=bu(l==null?void 0:l.data,ie,i),y=!0)}if(i.select&&w!==void 0&&!L)if(l&&w===(h==null?void 0:h.data)&&i.select===R(this,qo))w=R(this,_n);else try{ne(this,qo,i.select),w=i.select(w),w=bu(l==null?void 0:l.data,w,i),ne(this,_n,w),ne(this,$r,null)}catch(ie){ne(this,$r,ie)}R(this,$r)&&(x=R(this,$r),w=R(this,_n),C=Date.now(),k="error");const W=g.fetchStatus==="fetching",O=k==="pending",T=k==="error",$=O&&W,G=w!==void 0,ue={status:k,fetchStatus:g.fetchStatus,isPending:O,isSuccess:k==="success",isError:T,isInitialLoading:$,isLoading:$,data:w,dataUpdatedAt:g.dataUpdatedAt,error:x,errorUpdatedAt:C,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>d.dataUpdateCount||g.errorUpdateCount>d.errorUpdateCount,isFetching:W,isRefetching:W&&!O,isLoadingError:T&&!G,isPaused:g.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:T&&G,isStale:Nd(t,i),refetch:this.refetch,promise:R(this,rr),isEnabled:mi(i.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const ie=j=>{ue.status==="error"?j.reject(ue.error):ue.data!==void 0&&j.resolve(ue.data)},se=()=>{const j=ne(this,rr,ue.promise=ku());ie(j)},z=R(this,rr);switch(z.status){case"pending":t.queryHash===n.queryHash&&ie(z);break;case"fulfilled":(ue.status==="error"||ue.data!==z.value)&&se();break;case"rejected":(ue.status!=="error"||ue.error!==z.reason)&&se();break}}return ue}updateResult(){const t=R(this,jt),i=this.createResult(R(this,Me),this.options);if(ne(this,ws,R(this,Me).state),ne(this,gn,this.options),R(this,ws).data!==void 0&&ne(this,vn,R(this,Me)),Tl(i,t))return;ne(this,jt,i);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!R(this,yn).size)return!0;const h=new Set(l??R(this,yn));return this.options.throwOnError&&h.add("error"),Object.keys(R(this,jt)).some(u=>{const p=u;return R(this,jt)[p]!==t[p]&&h.has(p)})};Re(this,Ie,lv).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Re(this,Ie,Nu).call(this)}},Xt=new WeakMap,Me=new WeakMap,Vo=new WeakMap,jt=new WeakMap,ws=new WeakMap,gn=new WeakMap,rr=new WeakMap,$r=new WeakMap,qo=new WeakMap,_n=new WeakMap,vn=new WeakMap,xs=new WeakMap,Cs=new WeakMap,Wr=new WeakMap,yn=new WeakMap,Ie=new WeakSet,Po=function(t){Re(this,Ie,Tu).call(this);let i=R(this,Me).fetch(this.options,t);return t!=null&&t.throwOnError||(i=i.catch(zt)),i},Ru=function(){Re(this,Ie,Du).call(this);const t=Qr(this.options.staleTime,R(this,Me));if(Es||R(this,jt).isStale||!xu(t))return;const n=tv(R(this,jt).dataUpdatedAt,t)+1;ne(this,xs,ps.setTimeout(()=>{R(this,jt).isStale||this.updateResult()},n))},Pu=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(R(this,Me)):this.options.refetchInterval)??!1},Lu=function(t){Re(this,Ie,Mu).call(this),ne(this,Wr,t),!(Es||mi(this.options.enabled,R(this,Me))===!1||!xu(R(this,Wr))||R(this,Wr)===0)&&ne(this,Cs,ps.setInterval(()=>{(this.options.refetchIntervalInBackground||Ld.isFocused())&&Re(this,Ie,Po).call(this)},R(this,Wr)))},Nu=function(){Re(this,Ie,Ru).call(this),Re(this,Ie,Lu).call(this,Re(this,Ie,Pu).call(this))},Du=function(){R(this,xs)&&(ps.clearTimeout(R(this,xs)),ne(this,xs,void 0))},Mu=function(){R(this,Cs)&&(ps.clearInterval(R(this,Cs)),ne(this,Cs,void 0))},Tu=function(){const t=R(this,Xt).getQueryCache().build(R(this,Xt),this.options);if(t===R(this,Me))return;const i=R(this,Me);ne(this,Me,t),ne(this,Vo,t.state),this.hasListeners()&&(i==null||i.removeObserver(this),t.addObserver(this))},lv=function(t){dt.batch(()=>{t.listeners&&this.listeners.forEach(i=>{i(R(this,jt))}),R(this,Xt).getQueryCache().notify({query:R(this,Me),type:"observerResultsUpdated"})})},K_);function h1(e,t){return mi(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function hg(e,t){return h1(e,t)||e.state.data!==void 0&&Ou(e,t,t.refetchOnMount)}function Ou(e,t,i){if(mi(t.enabled,e)!==!1&&Qr(t.staleTime,e)!=="static"){const n=typeof i=="function"?i(e):i;return n==="always"||n!==!1&&Nd(e,t)}return!1}function cg(e,t,i,n){return(e!==t||mi(n.enabled,e)===!1)&&(!i.suspense||e.state.status!=="error")&&Nd(e,i)}function Nd(e,t){return mi(t.enabled,e)!==!1&&e.isStaleByTime(Qr(t.staleTime,e))}function c1(e,t){return!Tl(e.getCurrentResult(),t)}function ug(e){return{onFetch:(t,i)=>{var _,g,y,w,x;const n=t.options,o=(y=(g=(_=t.fetchOptions)==null?void 0:_.meta)==null?void 0:g.fetchMore)==null?void 0:y.direction,l=((w=t.state.data)==null?void 0:w.pages)||[],h=((x=t.state.data)==null?void 0:x.pageParams)||[];let u={pages:[],pageParams:[]},p=0;const d=async()=>{let C=!1;const k=O=>{t1(O,()=>t.signal,()=>C=!0)},L=rv(t.options,t.fetchOptions),W=async(O,T,$)=>{if(C)return Promise.reject();if(T==null&&O.pages.length)return Promise.resolve(O);const le=(()=>{const se={client:t.client,queryKey:t.queryKey,pageParam:T,direction:$?"backward":"forward",meta:t.options.meta};return k(se),se})(),ue=await L(le),{maxPages:ye}=t.options,ie=$?e1:ZS;return{pages:ie(O.pages,ue,ye),pageParams:ie(O.pageParams,T,ye)}};if(o&&l.length){const O=o==="backward",T=O?u1:dg,$={pages:l,pageParams:h},G=T(n,$);u=await W($,G,O)}else{const O=e??l.length;do{const T=p===0?h[0]??n.initialPageParam:dg(n,u);if(p>0&&T==null)break;u=await W(u,T),p++}while(p<O)}return u};t.options.persister?t.fetchFn=()=>{var C,k;return(k=(C=t.options).persister)==null?void 0:k.call(C,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},i)}:t.fetchFn=d}}}function dg(e,{pages:t,pageParams:i}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,i[n],i):void 0}function u1(e,{pages:t,pageParams:i}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,i[0],i):void 0}var Yo,ji,Ft,bs,Fi,Ir,V_,d1=(V_=class extends ov{constructor(t){super();Se(this,Fi);Se(this,Yo);Se(this,ji);Se(this,Ft);Se(this,bs);ne(this,Yo,t.client),this.mutationId=t.mutationId,ne(this,Ft,t.mutationCache),ne(this,ji,[]),this.state=t.state||hv(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){R(this,ji).includes(t)||(R(this,ji).push(t),this.clearGcTimeout(),R(this,Ft).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ne(this,ji,R(this,ji).filter(i=>i!==t)),this.scheduleGc(),R(this,Ft).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){R(this,ji).length||(this.state.status==="pending"?this.scheduleGc():R(this,Ft).remove(this))}continue(){var t;return((t=R(this,bs))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var h,u,p,d,_,g,y,w,x,C,k,L,W,O,T,$,G,le,ue,ye;const i=()=>{Re(this,Fi,Ir).call(this,{type:"continue"})},n={client:R(this,Yo),meta:this.options.meta,mutationKey:this.options.mutationKey};ne(this,bs,nv({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(ie,se)=>{Re(this,Fi,Ir).call(this,{type:"failed",failureCount:ie,error:se})},onPause:()=>{Re(this,Fi,Ir).call(this,{type:"pause"})},onContinue:i,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>R(this,Ft).canRun(this)}));const o=this.state.status==="pending",l=!R(this,bs).canStart();try{if(o)i();else{Re(this,Fi,Ir).call(this,{type:"pending",variables:t,isPaused:l}),await((u=(h=R(this,Ft).config).onMutate)==null?void 0:u.call(h,t,this,n));const se=await((d=(p=this.options).onMutate)==null?void 0:d.call(p,t,n));se!==this.state.context&&Re(this,Fi,Ir).call(this,{type:"pending",context:se,variables:t,isPaused:l})}const ie=await R(this,bs).start();return await((g=(_=R(this,Ft).config).onSuccess)==null?void 0:g.call(_,ie,t,this.state.context,this,n)),await((w=(y=this.options).onSuccess)==null?void 0:w.call(y,ie,t,this.state.context,n)),await((C=(x=R(this,Ft).config).onSettled)==null?void 0:C.call(x,ie,null,this.state.variables,this.state.context,this,n)),await((L=(k=this.options).onSettled)==null?void 0:L.call(k,ie,null,t,this.state.context,n)),Re(this,Fi,Ir).call(this,{type:"success",data:ie}),ie}catch(ie){try{await((O=(W=R(this,Ft).config).onError)==null?void 0:O.call(W,ie,t,this.state.context,this,n))}catch(se){Promise.reject(se)}try{await(($=(T=this.options).onError)==null?void 0:$.call(T,ie,t,this.state.context,n))}catch(se){Promise.reject(se)}try{await((le=(G=R(this,Ft).config).onSettled)==null?void 0:le.call(G,void 0,ie,this.state.variables,this.state.context,this,n))}catch(se){Promise.reject(se)}try{await((ye=(ue=this.options).onSettled)==null?void 0:ye.call(ue,void 0,ie,t,this.state.context,n))}catch(se){Promise.reject(se)}throw Re(this,Fi,Ir).call(this,{type:"error",error:ie}),ie}finally{R(this,Ft).runNext(this)}}},Yo=new WeakMap,ji=new WeakMap,Ft=new WeakMap,bs=new WeakMap,Fi=new WeakSet,Ir=function(t){const i=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=i(this.state),dt.batch(()=>{R(this,ji).forEach(n=>{n.onMutationUpdate(t)}),R(this,Ft).notify({mutation:this,type:"updated",action:t})})},V_);function hv(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var sr,Pi,Qo,q_,f1=(q_=class extends En{constructor(t={}){super();Se(this,sr);Se(this,Pi);Se(this,Qo);this.config=t,ne(this,sr,new Set),ne(this,Pi,new Map),ne(this,Qo,0)}build(t,i,n){const o=new d1({client:t,mutationCache:this,mutationId:++ul(this,Qo)._,options:t.defaultMutationOptions(i),state:n});return this.add(o),o}add(t){R(this,sr).add(t);const i=fl(t);if(typeof i=="string"){const n=R(this,Pi).get(i);n?n.push(t):R(this,Pi).set(i,[t])}this.notify({type:"added",mutation:t})}remove(t){if(R(this,sr).delete(t)){const i=fl(t);if(typeof i=="string"){const n=R(this,Pi).get(i);if(n)if(n.length>1){const o=n.indexOf(t);o!==-1&&n.splice(o,1)}else n[0]===t&&R(this,Pi).delete(i)}}this.notify({type:"removed",mutation:t})}canRun(t){const i=fl(t);if(typeof i=="string"){const n=R(this,Pi).get(i),o=n==null?void 0:n.find(l=>l.state.status==="pending");return!o||o===t}else return!0}runNext(t){var n;const i=fl(t);if(typeof i=="string"){const o=(n=R(this,Pi).get(i))==null?void 0:n.find(l=>l!==t&&l.state.isPaused);return(o==null?void 0:o.continue())??Promise.resolve()}else return Promise.resolve()}clear(){dt.batch(()=>{R(this,sr).forEach(t=>{this.notify({type:"removed",mutation:t})}),R(this,sr).clear(),R(this,Pi).clear()})}getAll(){return Array.from(R(this,sr))}find(t){const i={exact:!0,...t};return this.getAll().find(n=>sg(i,n))}findAll(t={}){return this.getAll().filter(i=>sg(t,i))}notify(t){dt.batch(()=>{this.listeners.forEach(i=>{i(t)})})}resumePausedMutations(){const t=this.getAll().filter(i=>i.state.isPaused);return dt.batch(()=>Promise.all(t.map(i=>i.continue().catch(zt))))}},sr=new WeakMap,Pi=new WeakMap,Qo=new WeakMap,q_);function fl(e){var t;return(t=e.options.scope)==null?void 0:t.id}var nr,Ur,Jt,or,hr,xl,Bu,Y_,p1=(Y_=class extends En{constructor(i,n){super();Se(this,hr);Se(this,nr);Se(this,Ur);Se(this,Jt);Se(this,or);ne(this,nr,i),this.setOptions(n),this.bindMethods(),Re(this,hr,xl).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(i){var o;const n=this.options;this.options=R(this,nr).defaultMutationOptions(i),Tl(this.options,n)||R(this,nr).getMutationCache().notify({type:"observerOptionsUpdated",mutation:R(this,Jt),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Rs(n.mutationKey)!==Rs(this.options.mutationKey)?this.reset():((o=R(this,Jt))==null?void 0:o.state.status)==="pending"&&R(this,Jt).setOptions(this.options)}onUnsubscribe(){var i;this.hasListeners()||(i=R(this,Jt))==null||i.removeObserver(this)}onMutationUpdate(i){Re(this,hr,xl).call(this),Re(this,hr,Bu).call(this,i)}getCurrentResult(){return R(this,Ur)}reset(){var i;(i=R(this,Jt))==null||i.removeObserver(this),ne(this,Jt,void 0),Re(this,hr,xl).call(this),Re(this,hr,Bu).call(this)}mutate(i,n){var o;return ne(this,or,n),(o=R(this,Jt))==null||o.removeObserver(this),ne(this,Jt,R(this,nr).getMutationCache().build(R(this,nr),this.options)),R(this,Jt).addObserver(this),R(this,Jt).execute(i)}},nr=new WeakMap,Ur=new WeakMap,Jt=new WeakMap,or=new WeakMap,hr=new WeakSet,xl=function(){var n;const i=((n=R(this,Jt))==null?void 0:n.state)??hv();ne(this,Ur,{...i,isPending:i.status==="pending",isSuccess:i.status==="success",isError:i.status==="error",isIdle:i.status==="idle",mutate:this.mutate,reset:this.reset})},Bu=function(i){dt.batch(()=>{var n,o,l,h,u,p,d,_;if(R(this,or)&&this.hasListeners()){const g=R(this,Ur).variables,y=R(this,Ur).context,w={client:R(this,nr),meta:this.options.meta,mutationKey:this.options.mutationKey};if((i==null?void 0:i.type)==="success"){try{(o=(n=R(this,or)).onSuccess)==null||o.call(n,i.data,g,y,w)}catch(x){Promise.reject(x)}try{(h=(l=R(this,or)).onSettled)==null||h.call(l,i.data,null,g,y,w)}catch(x){Promise.reject(x)}}else if((i==null?void 0:i.type)==="error"){try{(p=(u=R(this,or)).onError)==null||p.call(u,i.error,g,y,w)}catch(x){Promise.reject(x)}try{(_=(d=R(this,or)).onSettled)==null||_.call(d,void 0,i.error,g,y,w)}catch(x){Promise.reject(x)}}}this.listeners.forEach(g=>{g(R(this,Ur))})})},Y_),zi,Q_,m1=(Q_=class extends En{constructor(t={}){super();Se(this,zi);this.config=t,ne(this,zi,new Map)}build(t,i,n){const o=i.queryKey,l=i.queryHash??Ed(o,i);let h=this.get(l);return h||(h=new a1({client:t,queryKey:o,queryHash:l,options:t.defaultQueryOptions(i),state:n,defaultOptions:t.getQueryDefaults(o)}),this.add(h)),h}add(t){R(this,zi).has(t.queryHash)||(R(this,zi).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const i=R(this,zi).get(t.queryHash);i&&(t.destroy(),i===t&&R(this,zi).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){dt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return R(this,zi).get(t)}getAll(){return[...R(this,zi).values()]}find(t){const i={exact:!0,...t};return this.getAll().find(n=>rg(i,n))}findAll(t={}){const i=this.getAll();return Object.keys(t).length>0?i.filter(n=>rg(t,n)):i}notify(t){dt.batch(()=>{this.listeners.forEach(i=>{i(t)})})}onFocus(){dt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){dt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},zi=new WeakMap,Q_),Je,Kr,Vr,Sn,wn,qr,xn,Cn,G_,g1=(G_=class{constructor(e={}){Se(this,Je);Se(this,Kr);Se(this,Vr);Se(this,Sn);Se(this,wn);Se(this,qr);Se(this,xn);Se(this,Cn);ne(this,Je,e.queryCache||new m1),ne(this,Kr,e.mutationCache||new f1),ne(this,Vr,e.defaultOptions||{}),ne(this,Sn,new Map),ne(this,wn,new Map),ne(this,qr,0)}mount(){ul(this,qr)._++,R(this,qr)===1&&(ne(this,xn,Ld.subscribe(async e=>{e&&(await this.resumePausedMutations(),R(this,Je).onFocus())})),ne(this,Cn,Ol.subscribe(async e=>{e&&(await this.resumePausedMutations(),R(this,Je).onOnline())})))}unmount(){var e,t;ul(this,qr)._--,R(this,qr)===0&&((e=R(this,xn))==null||e.call(this),ne(this,xn,void 0),(t=R(this,Cn))==null||t.call(this),ne(this,Cn,void 0))}isFetching(e){return R(this,Je).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return R(this,Kr).findAll({...e,status:"pending"}).length}getQueryData(e){var i;const t=this.defaultQueryOptions({queryKey:e});return(i=R(this,Je).get(t.queryHash))==null?void 0:i.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),i=R(this,Je).build(this,t),n=i.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&i.isStaleByTime(Qr(t.staleTime,i))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return R(this,Je).findAll(e).map(({queryKey:t,state:i})=>{const n=i.data;return[t,n]})}setQueryData(e,t,i){const n=this.defaultQueryOptions({queryKey:e}),o=R(this,Je).get(n.queryHash),l=o==null?void 0:o.state.data,h=GS(t,l);if(h!==void 0)return R(this,Je).build(this,n).setData(h,{...i,manual:!0})}setQueriesData(e,t,i){return dt.batch(()=>R(this,Je).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,i)]))}getQueryState(e){var i;const t=this.defaultQueryOptions({queryKey:e});return(i=R(this,Je).get(t.queryHash))==null?void 0:i.state}removeQueries(e){const t=R(this,Je);dt.batch(()=>{t.findAll(e).forEach(i=>{t.remove(i)})})}resetQueries(e,t){const i=R(this,Je);return dt.batch(()=>(i.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const i={revert:!0,...t},n=dt.batch(()=>R(this,Je).findAll(e).map(o=>o.cancel(i)));return Promise.all(n).then(zt).catch(zt)}invalidateQueries(e,t={}){return dt.batch(()=>(R(this,Je).findAll(e).forEach(i=>{i.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const i={...t,cancelRefetch:t.cancelRefetch??!0},n=dt.batch(()=>R(this,Je).findAll(e).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let l=o.fetch(void 0,i);return i.throwOnError||(l=l.catch(zt)),o.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(n).then(zt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const i=R(this,Je).build(this,t);return i.isStaleByTime(Qr(t.staleTime,i))?i.fetch(t):Promise.resolve(i.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(zt).catch(zt)}fetchInfiniteQuery(e){return e.behavior=ug(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(zt).catch(zt)}ensureInfiniteQueryData(e){return e.behavior=ug(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ol.isOnline()?R(this,Kr).resumePausedMutations():Promise.resolve()}getQueryCache(){return R(this,Je)}getMutationCache(){return R(this,Kr)}getDefaultOptions(){return R(this,Vr)}setDefaultOptions(e){ne(this,Vr,e)}setQueryDefaults(e,t){R(this,Sn).set(Rs(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...R(this,Sn).values()],i={};return t.forEach(n=>{Ao(e,n.queryKey)&&Object.assign(i,n.defaultOptions)}),i}setMutationDefaults(e,t){R(this,wn).set(Rs(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...R(this,wn).values()],i={};return t.forEach(n=>{Ao(e,n.mutationKey)&&Object.assign(i,n.defaultOptions)}),i}defaultQueryOptions(e){if(e._defaulted)return e;const t={...R(this,Vr).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Ed(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Rd&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...R(this,Vr).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){R(this,Je).clear(),R(this,Kr).clear()}},Je=new WeakMap,Kr=new WeakMap,Vr=new WeakMap,Sn=new WeakMap,wn=new WeakMap,qr=new WeakMap,xn=new WeakMap,Cn=new WeakMap,G_),cv=N.createContext(void 0),Rn=e=>{const t=N.useContext(cv);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},_1=({client:e,children:t})=>(N.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),S.jsx(cv.Provider,{value:e,children:t})),uv=N.createContext(!1),v1=()=>N.useContext(uv);uv.Provider;function y1(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var S1=N.createContext(y1()),w1=()=>N.useContext(S1),x1=(e,t,i)=>{const n=i!=null&&i.state.error&&typeof e.throwOnError=="function"?Pd(e.throwOnError,[i.state.error,i]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||n)&&(t.isReset()||(e.retryOnMount=!1))},C1=e=>{N.useEffect(()=>{e.clearReset()},[e])},b1=({result:e,errorResetBoundary:t,throwOnError:i,query:n,suspense:o})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(o&&e.data===void 0||Pd(i,[e.error,n])),k1=e=>{if(e.suspense){const i=o=>o==="static"?o:Math.max(o??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...o)=>i(n(...o)):i(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},E1=(e,t)=>e.isLoading&&e.isFetching&&!t,R1=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,fg=(e,t,i)=>t.fetchOptimistic(e).catch(()=>{i.clearReset()});function P1(e,t,i){var y,w,x,C;const n=v1(),o=w1(),l=Rn(),h=l.defaultQueryOptions(e);(w=(y=l.getDefaultOptions().queries)==null?void 0:y._experimental_beforeQuery)==null||w.call(y,h);const u=l.getQueryCache().get(h.queryHash);h._optimisticResults=n?"isRestoring":"optimistic",k1(h),x1(h,o,u),C1(o);const p=!l.getQueryCache().get(h.queryHash),[d]=N.useState(()=>new t(l,h)),_=d.getOptimisticResult(h),g=!n&&e.subscribed!==!1;if(N.useSyncExternalStore(N.useCallback(k=>{const L=g?d.subscribe(dt.batchCalls(k)):zt;return d.updateResult(),L},[d,g]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),N.useEffect(()=>{d.setOptions(h)},[h,d]),R1(h,_))throw fg(h,d,o);if(b1({result:_,errorResetBoundary:o,throwOnError:h.throwOnError,query:u,suspense:h.suspense}))throw _.error;if((C=(x=l.getDefaultOptions().queries)==null?void 0:x._experimental_afterQuery)==null||C.call(x,h,_),h.experimental_prefetchInRender&&!Es&&E1(_,n)){const k=p?fg(h,d,o):u==null?void 0:u.promise;k==null||k.catch(zt).finally(()=>{d.updateResult()})}return h.notifyOnChangeProps?_:d.trackResult(_)}function Wi(e,t){return P1(e,l1)}function jo(e,t){const i=Rn(),[n]=N.useState(()=>new p1(i,e));N.useEffect(()=>{n.setOptions(e)},[n,e]);const o=N.useSyncExternalStore(N.useCallback(h=>n.subscribe(dt.batchCalls(h)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),l=N.useCallback((h,u)=>{n.mutate(h,u).catch(zt)},[n]);if(o.error&&Pd(n.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:l,mutateAsync:o.mutate}}/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var pg="popstate";function L1(e={}){function t(n,o){let{pathname:l,search:h,hash:u}=n.location;return Iu("",{pathname:l,search:h,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function i(n,o){return typeof o=="string"?o:Fo(o)}return D1(t,i,null,e)}function Ue(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function vi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function N1(){return Math.random().toString(36).substring(2,10)}function mg(e,t){return{usr:e.state,key:e.key,idx:t}}function Iu(e,t,i=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Pn(t):t,state:i,key:t&&t.key||n||N1()}}function Fo({pathname:e="/",search:t="",hash:i=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Pn(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substring(i),e=e.substring(0,i));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function D1(e,t,i,n={}){let{window:o=document.defaultView,v5Compat:l=!1}=n,h=o.history,u="POP",p=null,d=_();d==null&&(d=0,h.replaceState({...h.state,idx:d},""));function _(){return(h.state||{idx:null}).idx}function g(){u="POP";let k=_(),L=k==null?null:k-d;d=k,p&&p({action:u,location:C.location,delta:L})}function y(k,L){u="PUSH";let W=Iu(C.location,k,L);d=_()+1;let O=mg(W,d),T=C.createHref(W);try{h.pushState(O,"",T)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;o.location.assign(T)}l&&p&&p({action:u,location:C.location,delta:1})}function w(k,L){u="REPLACE";let W=Iu(C.location,k,L);d=_();let O=mg(W,d),T=C.createHref(W);h.replaceState(O,"",T),l&&p&&p({action:u,location:C.location,delta:0})}function x(k){return M1(k)}let C={get action(){return u},get location(){return e(o,h)},listen(k){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(pg,g),p=k,()=>{o.removeEventListener(pg,g),p=null}},createHref(k){return t(o,k)},createURL:x,encodeLocation(k){let L=x(k);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:y,replace:w,go(k){return h.go(k)}};return C}function M1(e,t=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Ue(i,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Fo(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=i+n),new URL(n,i)}function dv(e,t,i="/"){return T1(e,t,i,!1)}function T1(e,t,i,n){let o=typeof t=="string"?Pn(t):t,l=cr(o.pathname||"/",i);if(l==null)return null;let h=fv(e);O1(h);let u=null;for(let p=0;u==null&&p<h.length;++p){let d=K1(l);u=W1(h[p],d,n)}return u}function fv(e,t=[],i=[],n="",o=!1){let l=(h,u,p=o,d)=>{let _={relativePath:d===void 0?h.path||"":d,caseSensitive:h.caseSensitive===!0,childrenIndex:u,route:h};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(n)&&p)return;Ue(_.relativePath.startsWith(n),`Absolute route path "${_.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(n.length)}let g=lr([n,_.relativePath]),y=i.concat(_);h.children&&h.children.length>0&&(Ue(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),fv(h.children,t,y,g,p)),!(h.path==null&&!h.index)&&t.push({path:g,score:H1(g,h.index),routesMeta:y})};return e.forEach((h,u)=>{var p;if(h.path===""||!((p=h.path)!=null&&p.includes("?")))l(h,u);else for(let d of pv(h.path))l(h,u,!0,d)}),t}function pv(e){let t=e.split("/");if(t.length===0)return[];let[i,...n]=t,o=i.endsWith("?"),l=i.replace(/\?$/,"");if(n.length===0)return o?[l,""]:[l];let h=pv(n.join("/")),u=[];return u.push(...h.map(p=>p===""?l:[l,p].join("/"))),o&&u.push(...h),u.map(p=>e.startsWith("/")&&p===""?"/":p)}function O1(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:$1(t.routesMeta.map(n=>n.childrenIndex),i.routesMeta.map(n=>n.childrenIndex)))}var B1=/^:[\w-]+$/,I1=3,A1=2,j1=1,F1=10,z1=-2,gg=e=>e==="*";function H1(e,t){let i=e.split("/"),n=i.length;return i.some(gg)&&(n+=z1),t&&(n+=A1),i.filter(o=>!gg(o)).reduce((o,l)=>o+(B1.test(l)?I1:l===""?j1:F1),n)}function $1(e,t){return e.length===t.length&&e.slice(0,-1).every((n,o)=>n===t[o])?e[e.length-1]-t[t.length-1]:0}function W1(e,t,i=!1){let{routesMeta:n}=e,o={},l="/",h=[];for(let u=0;u<n.length;++u){let p=n[u],d=u===n.length-1,_=l==="/"?t:t.slice(l.length)||"/",g=Bl({path:p.relativePath,caseSensitive:p.caseSensitive,end:d},_),y=p.route;if(!g&&d&&i&&!n[n.length-1].route.index&&(g=Bl({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!g)return null;Object.assign(o,g.params),h.push({params:o,pathname:lr([l,g.pathname]),pathnameBase:Q1(lr([l,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(l=lr([l,g.pathnameBase]))}return h}function Bl(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,n]=U1(e.path,e.caseSensitive,e.end),o=t.match(i);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),u=o.slice(1);return{params:n.reduce((d,{paramName:_,isOptional:g},y)=>{if(_==="*"){let x=u[y]||"";h=l.slice(0,l.length-x.length).replace(/(.)\/+$/,"$1")}const w=u[y];return g&&!w?d[_]=void 0:d[_]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:h,pattern:e}}function U1(e,t=!1,i=!0){vi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,u,p)=>(n.push({paramName:u,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),n]}function K1(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return vi(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function cr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,n=e.charAt(i);return n&&n!=="/"?null:e.slice(i)||"/"}var mv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,V1=e=>mv.test(e);function q1(e,t="/"){let{pathname:i,search:n="",hash:o=""}=typeof e=="string"?Pn(e):e,l;if(i)if(V1(i))l=i;else{if(i.includes("//")){let h=i;i=i.replace(/\/\/+/g,"/"),vi(!1,`Pathnames cannot have embedded double slashes - normalizing ${h} -> ${i}`)}i.startsWith("/")?l=_g(i.substring(1),"/"):l=_g(i,t)}else l=t;return{pathname:l,search:G1(n),hash:X1(o)}}function _g(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?i.length>1&&i.pop():o!=="."&&i.push(o)}),i.length>1?i.join("/"):"/"}function Jc(e,t,i,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Y1(e){return e.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function Dd(e){let t=Y1(e);return t.map((i,n)=>n===t.length-1?i.pathname:i.pathnameBase)}function Md(e,t,i,n=!1){let o;typeof e=="string"?o=Pn(e):(o={...e},Ue(!o.pathname||!o.pathname.includes("?"),Jc("?","pathname","search",o)),Ue(!o.pathname||!o.pathname.includes("#"),Jc("#","pathname","hash",o)),Ue(!o.search||!o.search.includes("#"),Jc("#","search","hash",o)));let l=e===""||o.pathname==="",h=l?"/":o.pathname,u;if(h==null)u=i;else{let g=t.length-1;if(!n&&h.startsWith("..")){let y=h.split("/");for(;y[0]==="..";)y.shift(),g-=1;o.pathname=y.join("/")}u=g>=0?t[g]:"/"}let p=q1(o,u),d=h&&h!=="/"&&h.endsWith("/"),_=(l||h===".")&&i.endsWith("/");return!p.pathname.endsWith("/")&&(d||_)&&(p.pathname+="/"),p}var lr=e=>e.join("/").replace(/\/\/+/g,"/"),Q1=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),G1=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,X1=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,J1=class{constructor(e,t,i,n=!1){this.status=e,this.statusText=t||"",this.internal=n,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function Z1(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function ew(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var gv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function _v(e,t){let i=e;if(typeof i!="string"||!mv.test(i))return{absoluteURL:void 0,isExternal:!1,to:i};let n=i,o=!1;if(gv)try{let l=new URL(window.location.href),h=i.startsWith("//")?new URL(l.protocol+i):new URL(i),u=cr(h.pathname,t);h.origin===l.origin&&u!=null?i=u+h.search+h.hash:o=!0}catch{vi(!1,`<Link to="${i}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:o,to:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var vv=["POST","PUT","PATCH","DELETE"];new Set(vv);var tw=["GET",...vv];new Set(tw);var Ln=N.createContext(null);Ln.displayName="DataRouter";var ql=N.createContext(null);ql.displayName="DataRouterState";var iw=N.createContext(!1),yv=N.createContext({isTransitioning:!1});yv.displayName="ViewTransition";var rw=N.createContext(new Map);rw.displayName="Fetchers";var sw=N.createContext(null);sw.displayName="Await";var ni=N.createContext(null);ni.displayName="Navigation";var Go=N.createContext(null);Go.displayName="Location";var Li=N.createContext({outlet:null,matches:[],isDataRoute:!1});Li.displayName="Route";var Td=N.createContext(null);Td.displayName="RouteError";var Sv="REACT_ROUTER_ERROR",nw="REDIRECT",ow="ROUTE_ERROR_RESPONSE";function aw(e){if(e.startsWith(`${Sv}:${nw}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function lw(e){if(e.startsWith(`${Sv}:${ow}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new J1(t.status,t.statusText,t.data)}catch{}}function hw(e,{relative:t}={}){Ue(Nn(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:n}=N.useContext(ni),{hash:o,pathname:l,search:h}=Xo(e,{relative:t}),u=l;return i!=="/"&&(u=l==="/"?i:lr([i,l])),n.createHref({pathname:u,search:h,hash:o})}function Nn(){return N.useContext(Go)!=null}function ur(){return Ue(Nn(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Go).location}var wv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xv(e){N.useContext(ni).static||N.useLayoutEffect(e)}function Cv(){let{isDataRoute:e}=N.useContext(Li);return e?Cw():cw()}function cw(){Ue(Nn(),"useNavigate() may be used only in the context of a <Router> component.");let e=N.useContext(Ln),{basename:t,navigator:i}=N.useContext(ni),{matches:n}=N.useContext(Li),{pathname:o}=ur(),l=JSON.stringify(Dd(n)),h=N.useRef(!1);return xv(()=>{h.current=!0}),N.useCallback((p,d={})=>{if(vi(h.current,wv),!h.current)return;if(typeof p=="number"){i.go(p);return}let _=Md(p,JSON.parse(l),o,d.relative==="path");e==null&&t!=="/"&&(_.pathname=_.pathname==="/"?t:lr([t,_.pathname])),(d.replace?i.replace:i.push)(_,d.state,d)},[t,i,l,o,e])}N.createContext(null);function uw(){let{matches:e}=N.useContext(Li),t=e[e.length-1];return t?t.params:{}}function Xo(e,{relative:t}={}){let{matches:i}=N.useContext(Li),{pathname:n}=ur(),o=JSON.stringify(Dd(i));return N.useMemo(()=>Md(e,JSON.parse(o),n,t==="path"),[e,o,n,t])}function dw(e,t){return bv(e,t)}function bv(e,t,i,n,o){var W;Ue(Nn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=N.useContext(ni),{matches:h}=N.useContext(Li),u=h[h.length-1],p=u?u.params:{},d=u?u.pathname:"/",_=u?u.pathnameBase:"/",g=u&&u.route;{let O=g&&g.path||"";Ev(d,!g||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let y=ur(),w;if(t){let O=typeof t=="string"?Pn(t):t;Ue(_==="/"||((W=O.pathname)==null?void 0:W.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${O.pathname}" was given in the \`location\` prop.`),w=O}else w=y;let x=w.pathname||"/",C=x;if(_!=="/"){let O=_.replace(/^\//,"").split("/");C="/"+x.replace(/^\//,"").split("/").slice(O.length).join("/")}let k=dv(e,{pathname:C});vi(g||k!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),vi(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=_w(k&&k.map(O=>Object.assign({},O,{params:Object.assign({},p,O.params),pathname:lr([_,l.encodeLocation?l.encodeLocation(O.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?_:lr([_,l.encodeLocation?l.encodeLocation(O.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathnameBase])})),h,i,n,o);return t&&L?N.createElement(Go.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},L):L}function fw(){let e=xw(),t=Z1(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:n},l={padding:"2px 4px",backgroundColor:n},h=null;return console.error("Error handled by React Router default ErrorBoundary:",e),h=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:l},"ErrorBoundary")," or"," ",N.createElement("code",{style:l},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),i?N.createElement("pre",{style:o},i):null,h)}var pw=N.createElement(fw,null),kv=class extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const i=lw(e.digest);i&&(e=i)}let t=e!==void 0?N.createElement(Li.Provider,{value:this.props.routeContext},N.createElement(Td.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?N.createElement(mw,{error:e},t):t}};kv.contextType=iw;var Zc=new WeakMap;function mw({children:e,error:t}){let{basename:i}=N.useContext(ni);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let n=aw(t.digest);if(n){let o=Zc.get(t);if(o)throw o;let l=_v(n.location,i);if(gv&&!Zc.get(t))if(l.isExternal||n.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:n.replace}));throw Zc.set(t,h),h}return N.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return e}function gw({routeContext:e,match:t,children:i}){let n=N.useContext(Ln);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),N.createElement(Li.Provider,{value:e},i)}function _w(e,t=[],i=null,n=null,o=null){if(e==null){if(!i)return null;if(i.errors)e=i.matches;else if(t.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let l=e,h=i==null?void 0:i.errors;if(h!=null){let _=l.findIndex(g=>g.route.id&&(h==null?void 0:h[g.route.id])!==void 0);Ue(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),l=l.slice(0,Math.min(l.length,_+1))}let u=!1,p=-1;if(i)for(let _=0;_<l.length;_++){let g=l[_];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(p=_),g.route.id){let{loaderData:y,errors:w}=i,x=g.route.loader&&!y.hasOwnProperty(g.route.id)&&(!w||w[g.route.id]===void 0);if(g.route.lazy||x){u=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let d=i&&n?(_,g)=>{var y,w;n(_,{location:i.location,params:((w=(y=i.matches)==null?void 0:y[0])==null?void 0:w.params)??{},unstable_pattern:ew(i.matches),errorInfo:g})}:void 0;return l.reduceRight((_,g,y)=>{let w,x=!1,C=null,k=null;i&&(w=h&&g.route.id?h[g.route.id]:void 0,C=g.route.errorElement||pw,u&&(p<0&&y===0?(Ev("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,k=null):p===y&&(x=!0,k=g.route.hydrateFallbackElement||null)));let L=t.concat(l.slice(0,y+1)),W=()=>{let O;return w?O=C:x?O=k:g.route.Component?O=N.createElement(g.route.Component,null):g.route.element?O=g.route.element:O=_,N.createElement(gw,{match:g,routeContext:{outlet:_,matches:L,isDataRoute:i!=null},children:O})};return i&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?N.createElement(kv,{location:i.location,revalidation:i.revalidation,component:C,error:w,children:W(),routeContext:{outlet:null,matches:L,isDataRoute:!0},onError:d}):W()},null)}function Od(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vw(e){let t=N.useContext(Ln);return Ue(t,Od(e)),t}function yw(e){let t=N.useContext(ql);return Ue(t,Od(e)),t}function Sw(e){let t=N.useContext(Li);return Ue(t,Od(e)),t}function Bd(e){let t=Sw(e),i=t.matches[t.matches.length-1];return Ue(i.route.id,`${e} can only be used on routes that contain a unique "id"`),i.route.id}function ww(){return Bd("useRouteId")}function xw(){var n;let e=N.useContext(Td),t=yw("useRouteError"),i=Bd("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function Cw(){let{router:e}=vw("useNavigate"),t=Bd("useNavigate"),i=N.useRef(!1);return xv(()=>{i.current=!0}),N.useCallback(async(o,l={})=>{vi(i.current,wv),i.current&&(typeof o=="number"?await e.navigate(o):await e.navigate(o,{fromRouteId:t,...l}))},[e,t])}var vg={};function Ev(e,t,i){!t&&!vg[e]&&(vg[e]=!0,vi(!1,i))}N.memo(bw);function bw({routes:e,future:t,state:i,onError:n}){return bv(e,void 0,i,n,t)}function eu({to:e,replace:t,state:i,relative:n}){Ue(Nn(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=N.useContext(ni);vi(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=N.useContext(Li),{pathname:h}=ur(),u=Cv(),p=Md(e,Dd(l),h,n==="path"),d=JSON.stringify(p);return N.useEffect(()=>{u(JSON.parse(d),{replace:t,state:i,relative:n})},[u,d,n,t,i]),null}function Ar(e){Ue(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function kw({basename:e="/",children:t=null,location:i,navigationType:n="POP",navigator:o,static:l=!1,unstable_useTransitions:h}){Ue(!Nn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),p=N.useMemo(()=>({basename:u,navigator:o,static:l,unstable_useTransitions:h,future:{}}),[u,o,l,h]);typeof i=="string"&&(i=Pn(i));let{pathname:d="/",search:_="",hash:g="",state:y=null,key:w="default"}=i,x=N.useMemo(()=>{let C=cr(d,u);return C==null?null:{location:{pathname:C,search:_,hash:g,state:y,key:w},navigationType:n}},[u,d,_,g,y,w,n]);return vi(x!=null,`<Router basename="${u}"> is not able to match the URL "${d}${_}${g}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:N.createElement(ni.Provider,{value:p},N.createElement(Go.Provider,{children:t,value:x}))}function Ew({children:e,location:t}){return dw(Au(e),t)}function Au(e,t=[]){let i=[];return N.Children.forEach(e,(n,o)=>{if(!N.isValidElement(n))return;let l=[...t,o];if(n.type===N.Fragment){i.push.apply(i,Au(n.props.children,l));return}Ue(n.type===Ar,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ue(!n.props.index||!n.props.children,"An index route cannot have child routes.");let h={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(h.children=Au(n.props.children,l)),i.push(h)}),i}var Cl="get",bl="application/x-www-form-urlencoded";function Yl(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function Rw(e){return Yl(e)&&e.tagName.toLowerCase()==="button"}function Pw(e){return Yl(e)&&e.tagName.toLowerCase()==="form"}function Lw(e){return Yl(e)&&e.tagName.toLowerCase()==="input"}function Nw(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Dw(e,t){return e.button===0&&(!t||t==="_self")&&!Nw(e)}var pl=null;function Mw(){if(pl===null)try{new FormData(document.createElement("form"),0),pl=!1}catch{pl=!0}return pl}var Tw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function tu(e){return e!=null&&!Tw.has(e)?(vi(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bl}"`),null):e}function Ow(e,t){let i,n,o,l,h;if(Pw(e)){let u=e.getAttribute("action");n=u?cr(u,t):null,i=e.getAttribute("method")||Cl,o=tu(e.getAttribute("enctype"))||bl,l=new FormData(e)}else if(Rw(e)||Lw(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=e.getAttribute("formaction")||u.getAttribute("action");if(n=p?cr(p,t):null,i=e.getAttribute("formmethod")||u.getAttribute("method")||Cl,o=tu(e.getAttribute("formenctype"))||tu(u.getAttribute("enctype"))||bl,l=new FormData(u,e),!Mw()){let{name:d,type:_,value:g}=e;if(_==="image"){let y=d?`${d}.`:"";l.append(`${y}x`,"0"),l.append(`${y}y`,"0")}else d&&l.append(d,g)}}else{if(Yl(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=Cl,n=null,o=bl,h=e}return l&&o==="text/plain"&&(h=l,l=void 0),{action:n,method:i.toLowerCase(),encType:o,formData:l,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Id(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Bw(e,t,i){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${i}`:t&&cr(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${i}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${i}`,n}async function Iw(e,t){if(e.id in t)return t[e.id];try{let i=await import(e.module);return t[e.id]=i,i}catch(i){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Aw(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function jw(e,t,i){let n=await Promise.all(e.map(async o=>{let l=t.routes[o.route.id];if(l){let h=await Iw(l,i);return h.links?h.links():[]}return[]}));return $w(n.flat(1).filter(Aw).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function yg(e,t,i,n,o,l){let h=(p,d)=>i[d]?p.route.id!==i[d].route.id:!0,u=(p,d)=>{var _;return i[d].pathname!==p.pathname||((_=i[d].route.path)==null?void 0:_.endsWith("*"))&&i[d].params["*"]!==p.params["*"]};return l==="assets"?t.filter((p,d)=>h(p,d)||u(p,d)):l==="data"?t.filter((p,d)=>{var g;let _=n.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(h(p,d)||u(p,d))return!0;if(p.route.shouldRevalidate){let y=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((g=i[0])==null?void 0:g.params)||{},nextUrl:new URL(e,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function Fw(e,t,{includeHydrateFallback:i}={}){return zw(e.map(n=>{let o=t.routes[n.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),i&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function zw(e){return[...new Set(e)]}function Hw(e){let t={},i=Object.keys(e).sort();for(let n of i)t[n]=e[n];return t}function $w(e,t){let i=new Set;return new Set(t),e.reduce((n,o)=>{let l=JSON.stringify(Hw(o));return i.has(l)||(i.add(l),n.push({key:l,link:o})),n},[])}function Rv(){let e=N.useContext(Ln);return Id(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Ww(){let e=N.useContext(ql);return Id(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Ad=N.createContext(void 0);Ad.displayName="FrameworkContext";function Pv(){let e=N.useContext(Ad);return Id(e,"You must render this element inside a <HydratedRouter> element"),e}function Uw(e,t){let i=N.useContext(Ad),[n,o]=N.useState(!1),[l,h]=N.useState(!1),{onFocus:u,onBlur:p,onMouseEnter:d,onMouseLeave:_,onTouchStart:g}=t,y=N.useRef(null);N.useEffect(()=>{if(e==="render"&&h(!0),e==="viewport"){let C=L=>{L.forEach(W=>{h(W.isIntersecting)})},k=new IntersectionObserver(C,{threshold:.5});return y.current&&k.observe(y.current),()=>{k.disconnect()}}},[e]),N.useEffect(()=>{if(n){let C=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(C)}}},[n]);let w=()=>{o(!0)},x=()=>{o(!1),h(!1)};return i?e!=="intent"?[l,y,{}]:[l,y,{onFocus:So(u,w),onBlur:So(p,x),onMouseEnter:So(d,w),onMouseLeave:So(_,x),onTouchStart:So(g,w)}]:[!1,y,{}]}function So(e,t){return i=>{e&&e(i),i.defaultPrevented||t(i)}}function Kw({page:e,...t}){let{router:i}=Rv(),n=N.useMemo(()=>dv(i.routes,e,i.basename),[i.routes,e,i.basename]);return n?N.createElement(qw,{page:e,matches:n,...t}):null}function Vw(e){let{manifest:t,routeModules:i}=Pv(),[n,o]=N.useState([]);return N.useEffect(()=>{let l=!1;return jw(e,t,i).then(h=>{l||o(h)}),()=>{l=!0}},[e,t,i]),n}function qw({page:e,matches:t,...i}){let n=ur(),{manifest:o,routeModules:l}=Pv(),{basename:h}=Rv(),{loaderData:u,matches:p}=Ww(),d=N.useMemo(()=>yg(e,t,p,o,n,"data"),[e,t,p,o,n]),_=N.useMemo(()=>yg(e,t,p,o,n,"assets"),[e,t,p,o,n]),g=N.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let x=new Set,C=!1;if(t.forEach(L=>{var O;let W=o.routes[L.route.id];!W||!W.hasLoader||(!d.some(T=>T.route.id===L.route.id)&&L.route.id in u&&((O=l[L.route.id])!=null&&O.shouldRevalidate)||W.hasClientLoader?C=!0:x.add(L.route.id))}),x.size===0)return[];let k=Bw(e,h,"data");return C&&x.size>0&&k.searchParams.set("_routes",t.filter(L=>x.has(L.route.id)).map(L=>L.route.id).join(",")),[k.pathname+k.search]},[h,u,n,o,d,t,e,l]),y=N.useMemo(()=>Fw(_,o),[_,o]),w=Vw(_);return N.createElement(N.Fragment,null,g.map(x=>N.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...i})),y.map(x=>N.createElement("link",{key:x,rel:"modulepreload",href:x,...i})),w.map(({key:x,link:C})=>N.createElement("link",{key:x,nonce:i.nonce,...C})))}function Yw(...e){return t=>{e.forEach(i=>{typeof i=="function"?i(t):i!=null&&(i.current=t)})}}var Qw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Qw&&(window.__reactRouterVersion="7.11.0")}catch{}function Gw({basename:e,children:t,unstable_useTransitions:i,window:n}){let o=N.useRef();o.current==null&&(o.current=L1({window:n,v5Compat:!0}));let l=o.current,[h,u]=N.useState({action:l.action,location:l.location}),p=N.useCallback(d=>{i===!1?u(d):N.startTransition(()=>u(d))},[i]);return N.useLayoutEffect(()=>l.listen(p),[l,p]),N.createElement(kw,{basename:e,children:t,location:h.location,navigationType:h.action,navigator:l,unstable_useTransitions:i})}var Lv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bn=N.forwardRef(function({onClick:t,discover:i="render",prefetch:n="none",relative:o,reloadDocument:l,replace:h,state:u,target:p,to:d,preventScrollReset:_,viewTransition:g,unstable_defaultShouldRevalidate:y,...w},x){let{basename:C,unstable_useTransitions:k}=N.useContext(ni),L=typeof d=="string"&&Lv.test(d),W=_v(d,C);d=W.to;let O=hw(d,{relative:o}),[T,$,G]=Uw(n,w),le=ex(d,{replace:h,state:u,target:p,preventScrollReset:_,relative:o,viewTransition:g,unstable_defaultShouldRevalidate:y,unstable_useTransitions:k});function ue(ie){t&&t(ie),ie.defaultPrevented||le(ie)}let ye=N.createElement("a",{...w,...G,href:W.absoluteURL||O,onClick:W.isExternal||l?t:ue,ref:Yw(x,$),target:p,"data-discover":!L&&i==="render"?"true":void 0});return T&&!L?N.createElement(N.Fragment,null,ye,N.createElement(Kw,{page:O})):ye});bn.displayName="Link";var Xw=N.forwardRef(function({"aria-current":t="page",caseSensitive:i=!1,className:n="",end:o=!1,style:l,to:h,viewTransition:u,children:p,...d},_){let g=Xo(h,{relative:d.relative}),y=ur(),w=N.useContext(ql),{navigator:x,basename:C}=N.useContext(ni),k=w!=null&&nx(g)&&u===!0,L=x.encodeLocation?x.encodeLocation(g).pathname:g.pathname,W=y.pathname,O=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;i||(W=W.toLowerCase(),O=O?O.toLowerCase():null,L=L.toLowerCase()),O&&C&&(O=cr(O,C)||O);const T=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let $=W===L||!o&&W.startsWith(L)&&W.charAt(T)==="/",G=O!=null&&(O===L||!o&&O.startsWith(L)&&O.charAt(L.length)==="/"),le={isActive:$,isPending:G,isTransitioning:k},ue=$?t:void 0,ye;typeof n=="function"?ye=n(le):ye=[n,$?"active":null,G?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let ie=typeof l=="function"?l(le):l;return N.createElement(bn,{...d,"aria-current":ue,className:ye,ref:_,style:ie,to:h,viewTransition:u},typeof p=="function"?p(le):p)});Xw.displayName="NavLink";var Jw=N.forwardRef(({discover:e="render",fetcherKey:t,navigate:i,reloadDocument:n,replace:o,state:l,method:h=Cl,action:u,onSubmit:p,relative:d,preventScrollReset:_,viewTransition:g,unstable_defaultShouldRevalidate:y,...w},x)=>{let{unstable_useTransitions:C}=N.useContext(ni),k=rx(),L=sx(u,{relative:d}),W=h.toLowerCase()==="get"?"get":"post",O=typeof u=="string"&&Lv.test(u),T=$=>{if(p&&p($),$.defaultPrevented)return;$.preventDefault();let G=$.nativeEvent.submitter,le=(G==null?void 0:G.getAttribute("formmethod"))||h,ue=()=>k(G||$.currentTarget,{fetcherKey:t,method:le,navigate:i,replace:o,state:l,relative:d,preventScrollReset:_,viewTransition:g,unstable_defaultShouldRevalidate:y});C&&i!==!1?N.startTransition(()=>ue()):ue()};return N.createElement("form",{ref:x,method:W,action:L,onSubmit:n?p:T,...w,"data-discover":!O&&e==="render"?"true":void 0})});Jw.displayName="Form";function Zw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Nv(e){let t=N.useContext(Ln);return Ue(t,Zw(e)),t}function ex(e,{target:t,replace:i,state:n,preventScrollReset:o,relative:l,viewTransition:h,unstable_defaultShouldRevalidate:u,unstable_useTransitions:p}={}){let d=Cv(),_=ur(),g=Xo(e,{relative:l});return N.useCallback(y=>{if(Dw(y,t)){y.preventDefault();let w=i!==void 0?i:Fo(_)===Fo(g),x=()=>d(e,{replace:w,state:n,preventScrollReset:o,relative:l,viewTransition:h,unstable_defaultShouldRevalidate:u});p?N.startTransition(()=>x()):x()}},[_,d,g,i,n,t,e,o,l,h,u,p])}var tx=0,ix=()=>`__${String(++tx)}__`;function rx(){let{router:e}=Nv("useSubmit"),{basename:t}=N.useContext(ni),i=ww(),n=e.fetch,o=e.navigate;return N.useCallback(async(l,h={})=>{let{action:u,method:p,encType:d,formData:_,body:g}=Ow(l,t);if(h.navigate===!1){let y=h.fetcherKey||ix();await n(y,i,h.action||u,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:_,body:g,formMethod:h.method||p,formEncType:h.encType||d,flushSync:h.flushSync})}else await o(h.action||u,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:_,body:g,formMethod:h.method||p,formEncType:h.encType||d,replace:h.replace,state:h.state,fromRouteId:i,flushSync:h.flushSync,viewTransition:h.viewTransition})},[n,o,t,i])}function sx(e,{relative:t}={}){let{basename:i}=N.useContext(ni),n=N.useContext(Li);Ue(n,"useFormAction must be used inside a RouteContext");let[o]=n.matches.slice(-1),l={...Xo(e||".",{relative:t})},h=ur();if(e==null){l.search=h.search;let u=new URLSearchParams(l.search),p=u.getAll("index");if(p.some(_=>_==="")){u.delete("index"),p.filter(g=>g).forEach(g=>u.append("index",g));let _=u.toString();l.search=_?`?${_}`:""}}return(!e||e===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(l.pathname=l.pathname==="/"?i:lr([i,l.pathname])),Fo(l)}function nx(e,{relative:t}={}){let i=N.useContext(yv);Ue(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Nv("useViewTransitionState"),o=Xo(e,{relative:t});if(!i.isTransitioning)return!1;let l=cr(i.currentLocation.pathname,n)||i.currentLocation.pathname,h=cr(i.nextLocation.pathname,n)||i.nextLocation.pathname;return Bl(o.pathname,h)!=null||Bl(o.pathname,l)!=null}const ke=e=>typeof e=="string",wo=()=>{let e,t;const i=new Promise((n,o)=>{e=n,t=o});return i.resolve=e,i.reject=t,i},Sg=e=>e==null?"":""+e,ox=(e,t,i)=>{e.forEach(n=>{t[n]&&(i[n]=t[n])})},ax=/###/g,wg=e=>e&&e.indexOf("###")>-1?e.replace(ax,"."):e,xg=e=>!e||ke(e),Oo=(e,t,i)=>{const n=ke(t)?t.split("."):t;let o=0;for(;o<n.length-1;){if(xg(e))return{};const l=wg(n[o]);!e[l]&&i&&(e[l]=new i),Object.prototype.hasOwnProperty.call(e,l)?e=e[l]:e={},++o}return xg(e)?{}:{obj:e,k:wg(n[o])}},Cg=(e,t,i)=>{const{obj:n,k:o}=Oo(e,t,Object);if(n!==void 0||t.length===1){n[o]=i;return}let l=t[t.length-1],h=t.slice(0,t.length-1),u=Oo(e,h,Object);for(;u.obj===void 0&&h.length;)l=`${h[h.length-1]}.${l}`,h=h.slice(0,h.length-1),u=Oo(e,h,Object),u!=null&&u.obj&&typeof u.obj[`${u.k}.${l}`]<"u"&&(u.obj=void 0);u.obj[`${u.k}.${l}`]=i},lx=(e,t,i,n)=>{const{obj:o,k:l}=Oo(e,t,Object);o[l]=o[l]||[],o[l].push(i)},Il=(e,t)=>{const{obj:i,k:n}=Oo(e,t);if(i&&Object.prototype.hasOwnProperty.call(i,n))return i[n]},hx=(e,t,i)=>{const n=Il(e,i);return n!==void 0?n:Il(t,i)},Dv=(e,t,i)=>{for(const n in t)n!=="__proto__"&&n!=="constructor"&&(n in e?ke(e[n])||e[n]instanceof String||ke(t[n])||t[n]instanceof String?i&&(e[n]=t[n]):Dv(e[n],t[n],i):e[n]=t[n]);return e},sn=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var cx={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const ux=e=>ke(e)?e.replace(/[&<>"'\/]/g,t=>cx[t]):e;class dx{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const i=this.regExpMap.get(t);if(i!==void 0)return i;const n=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,n),this.regExpQueue.push(t),n}}const fx=[" ",",","?","!",";"],px=new dx(20),mx=(e,t,i)=>{t=t||"",i=i||"";const n=fx.filter(h=>t.indexOf(h)<0&&i.indexOf(h)<0);if(n.length===0)return!0;const o=px.getRegExp(`(${n.map(h=>h==="?"?"\\?":h).join("|")})`);let l=!o.test(e);if(!l){const h=e.indexOf(i);h>0&&!o.test(e.substring(0,h))&&(l=!0)}return l},ju=(e,t,i=".")=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const n=t.split(i);let o=e;for(let l=0;l<n.length;){if(!o||typeof o!="object")return;let h,u="";for(let p=l;p<n.length;++p)if(p!==l&&(u+=i),u+=n[p],h=o[u],h!==void 0){if(["string","number","boolean"].indexOf(typeof h)>-1&&p<n.length-1)continue;l+=p-l+1;break}o=h}return o},zo=e=>e==null?void 0:e.replace("_","-"),gx={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var i,n;(n=(i=console==null?void 0:console[e])==null?void 0:i.apply)==null||n.call(i,console,t)}};class Al{constructor(t,i={}){this.init(t,i)}init(t,i={}){this.prefix=i.prefix||"i18next:",this.logger=t||gx,this.options=i,this.debug=i.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,i,n,o){return o&&!this.debug?null:(ke(t[0])&&(t[0]=`${n}${this.prefix} ${t[0]}`),this.logger[i](t))}create(t){return new Al(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Al(this.logger,t)}}var Hi=new Al;class Ql{constructor(){this.observers={}}on(t,i){return t.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const o=this.observers[n].get(i)||0;this.observers[n].set(i,o+1)}),this}off(t,i){if(this.observers[t]){if(!i){delete this.observers[t];return}this.observers[t].delete(i)}}emit(t,...i){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([o,l])=>{for(let h=0;h<l;h++)o(...i)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([o,l])=>{for(let h=0;h<l;h++)o.apply(o,[t,...i])})}}class bg extends Ql{constructor(t,i={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=i,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const i=this.options.ns.indexOf(t);i>-1&&this.options.ns.splice(i,1)}getResource(t,i,n,o={}){var d,_;const l=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,h=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure;let u;t.indexOf(".")>-1?u=t.split("."):(u=[t,i],n&&(Array.isArray(n)?u.push(...n):ke(n)&&l?u.push(...n.split(l)):u.push(n)));const p=Il(this.data,u);return!p&&!i&&!n&&t.indexOf(".")>-1&&(t=u[0],i=u[1],n=u.slice(2).join(".")),p||!h||!ke(n)?p:ju((_=(d=this.data)==null?void 0:d[t])==null?void 0:_[i],n,l)}addResource(t,i,n,o,l={silent:!1}){const h=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator;let u=[t,i];n&&(u=u.concat(h?n.split(h):n)),t.indexOf(".")>-1&&(u=t.split("."),o=i,i=u[1]),this.addNamespaces(i),Cg(this.data,u,o),l.silent||this.emit("added",t,i,n,o)}addResources(t,i,n,o={silent:!1}){for(const l in n)(ke(n[l])||Array.isArray(n[l]))&&this.addResource(t,i,l,n[l],{silent:!0});o.silent||this.emit("added",t,i,n)}addResourceBundle(t,i,n,o,l,h={silent:!1,skipCopy:!1}){let u=[t,i];t.indexOf(".")>-1&&(u=t.split("."),o=n,n=i,i=u[1]),this.addNamespaces(i);let p=Il(this.data,u)||{};h.skipCopy||(n=JSON.parse(JSON.stringify(n))),o?Dv(p,n,l):p={...p,...n},Cg(this.data,u,p),h.silent||this.emit("added",t,i,n)}removeResourceBundle(t,i){this.hasResourceBundle(t,i)&&delete this.data[t][i],this.removeNamespaces(i),this.emit("removed",t,i)}hasResourceBundle(t,i){return this.getResource(t,i)!==void 0}getResourceBundle(t,i){return i||(i=this.options.defaultNS),this.getResource(t,i)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const i=this.getDataByLanguage(t);return!!(i&&Object.keys(i)||[]).find(o=>i[o]&&Object.keys(i[o]).length>0)}toJSON(){return this.data}}var Mv={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,i,n,o){return e.forEach(l=>{var h;t=((h=this.processors[l])==null?void 0:h.process(t,i,n,o))??t}),t}};const Tv=Symbol("i18next/PATH_KEY");function _x(){const e=[],t=Object.create(null);let i;return t.get=(n,o)=>{var l;return(l=i==null?void 0:i.revoke)==null||l.call(i),o===Tv?e:(e.push(o),i=Proxy.revocable(n,t),i.proxy)},Proxy.revocable(Object.create(null),t).proxy}function Fu(e,t){const{[Tv]:i}=e(_x());return i.join((t==null?void 0:t.keySeparator)??".")}const kg={},iu=e=>!ke(e)&&typeof e!="boolean"&&typeof e!="number";class jl extends Ql{constructor(t,i={}){super(),ox(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=i,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Hi.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,i={interpolation:{}}){const n={...i};if(t==null)return!1;const o=this.resolve(t,n);if((o==null?void 0:o.res)===void 0)return!1;const l=iu(o.res);return!(n.returnObjects===!1&&l)}extractFromKey(t,i){let n=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let l=i.ns||this.options.defaultNS||[];const h=n&&t.indexOf(n)>-1,u=!this.options.userDefinedKeySeparator&&!i.keySeparator&&!this.options.userDefinedNsSeparator&&!i.nsSeparator&&!mx(t,n,o);if(h&&!u){const p=t.match(this.interpolator.nestingRegexp);if(p&&p.length>0)return{key:t,namespaces:ke(l)?[l]:l};const d=t.split(n);(n!==o||n===o&&this.options.ns.indexOf(d[0])>-1)&&(l=d.shift()),t=d.join(o)}return{key:t,namespaces:ke(l)?[l]:l}}translate(t,i,n){let o=typeof i=="object"?{...i}:i;if(typeof o!="object"&&this.options.overloadTranslationOptionHandler&&(o=this.options.overloadTranslationOptionHandler(arguments)),typeof o=="object"&&(o={...o}),o||(o={}),t==null)return"";typeof t=="function"&&(t=Fu(t,{...this.options,...o})),Array.isArray(t)||(t=[String(t)]);const l=o.returnDetails!==void 0?o.returnDetails:this.options.returnDetails,h=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,{key:u,namespaces:p}=this.extractFromKey(t[t.length-1],o),d=p[p.length-1];let _=o.nsSeparator!==void 0?o.nsSeparator:this.options.nsSeparator;_===void 0&&(_=":");const g=o.lng||this.language,y=o.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((g==null?void 0:g.toLowerCase())==="cimode")return y?l?{res:`${d}${_}${u}`,usedKey:u,exactUsedKey:u,usedLng:g,usedNS:d,usedParams:this.getUsedParamsDetails(o)}:`${d}${_}${u}`:l?{res:u,usedKey:u,exactUsedKey:u,usedLng:g,usedNS:d,usedParams:this.getUsedParamsDetails(o)}:u;const w=this.resolve(t,o);let x=w==null?void 0:w.res;const C=(w==null?void 0:w.usedKey)||u,k=(w==null?void 0:w.exactUsedKey)||u,L=["[object Number]","[object Function]","[object RegExp]"],W=o.joinArrays!==void 0?o.joinArrays:this.options.joinArrays,O=!this.i18nFormat||this.i18nFormat.handleAsObject,T=o.count!==void 0&&!ke(o.count),$=jl.hasDefaultValue(o),G=T?this.pluralResolver.getSuffix(g,o.count,o):"",le=o.ordinal&&T?this.pluralResolver.getSuffix(g,o.count,{ordinal:!1}):"",ue=T&&!o.ordinal&&o.count===0,ye=ue&&o[`defaultValue${this.options.pluralSeparator}zero`]||o[`defaultValue${G}`]||o[`defaultValue${le}`]||o.defaultValue;let ie=x;O&&!x&&$&&(ie=ye);const se=iu(ie),z=Object.prototype.toString.apply(ie);if(O&&ie&&se&&L.indexOf(z)<0&&!(ke(W)&&Array.isArray(ie))){if(!o.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const j=this.options.returnedObjectHandler?this.options.returnedObjectHandler(C,ie,{...o,ns:p}):`key '${u} (${this.language})' returned an object instead of string.`;return l?(w.res=j,w.usedParams=this.getUsedParamsDetails(o),w):j}if(h){const j=Array.isArray(ie),U=j?[]:{},V=j?k:C;for(const K in ie)if(Object.prototype.hasOwnProperty.call(ie,K)){const te=`${V}${h}${K}`;$&&!x?U[K]=this.translate(te,{...o,defaultValue:iu(ye)?ye[K]:void 0,joinArrays:!1,ns:p}):U[K]=this.translate(te,{...o,joinArrays:!1,ns:p}),U[K]===te&&(U[K]=ie[K])}x=U}}else if(O&&ke(W)&&Array.isArray(x))x=x.join(W),x&&(x=this.extendTranslation(x,t,o,n));else{let j=!1,U=!1;!this.isValidLookup(x)&&$&&(j=!0,x=ye),this.isValidLookup(x)||(U=!0,x=u);const K=(o.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&U?void 0:x,te=$&&ye!==x&&this.options.updateMissing;if(U||j||te){if(this.logger.log(te?"updateKey":"missingKey",g,d,u,te?ye:x),h){const E=this.resolve(u,{...o,keySeparator:!1});E&&E.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let A=[];const re=this.languageUtils.getFallbackCodes(this.options.fallbackLng,o.lng||this.language);if(this.options.saveMissingTo==="fallback"&&re&&re[0])for(let E=0;E<re.length;E++)A.push(re[E]);else this.options.saveMissingTo==="all"?A=this.languageUtils.toResolveHierarchy(o.lng||this.language):A.push(o.lng||this.language);const Z=(E,M,Q)=>{var _e;const he=$&&Q!==x?Q:K;this.options.missingKeyHandler?this.options.missingKeyHandler(E,d,M,he,te,o):(_e=this.backendConnector)!=null&&_e.saveMissing&&this.backendConnector.saveMissing(E,d,M,he,te,o),this.emit("missingKey",E,d,M,x)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?A.forEach(E=>{const M=this.pluralResolver.getSuffixes(E,o);ue&&o[`defaultValue${this.options.pluralSeparator}zero`]&&M.indexOf(`${this.options.pluralSeparator}zero`)<0&&M.push(`${this.options.pluralSeparator}zero`),M.forEach(Q=>{Z([E],u+Q,o[`defaultValue${Q}`]||ye)})}):Z(A,u,ye))}x=this.extendTranslation(x,t,o,w,n),U&&x===u&&this.options.appendNamespaceToMissingKey&&(x=`${d}${_}${u}`),(U||j)&&this.options.parseMissingKeyHandler&&(x=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}${_}${u}`:u,j?x:void 0,o))}return l?(w.res=x,w.usedParams=this.getUsedParamsDetails(o),w):x}extendTranslation(t,i,n,o,l){var p,d;if((p=this.i18nFormat)!=null&&p.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const _=ke(t)&&(((d=n==null?void 0:n.interpolation)==null?void 0:d.skipOnVariables)!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let g;if(_){const w=t.match(this.interpolator.nestingRegexp);g=w&&w.length}let y=n.replace&&!ke(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(y={...this.options.interpolation.defaultVariables,...y}),t=this.interpolator.interpolate(t,y,n.lng||this.language||o.usedLng,n),_){const w=t.match(this.interpolator.nestingRegexp),x=w&&w.length;g<x&&(n.nest=!1)}!n.lng&&o&&o.res&&(n.lng=this.language||o.usedLng),n.nest!==!1&&(t=this.interpolator.nest(t,(...w)=>(l==null?void 0:l[0])===w[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${w[0]} in key: ${i[0]}`),null):this.translate(...w,i),n)),n.interpolation&&this.interpolator.reset()}const h=n.postProcess||this.options.postProcess,u=ke(h)?[h]:h;return t!=null&&(u!=null&&u.length)&&n.applyPostProcessor!==!1&&(t=Mv.handle(u,t,i,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),t}resolve(t,i={}){let n,o,l,h,u;return ke(t)&&(t=[t]),t.forEach(p=>{if(this.isValidLookup(n))return;const d=this.extractFromKey(p,i),_=d.key;o=_;let g=d.namespaces;this.options.fallbackNS&&(g=g.concat(this.options.fallbackNS));const y=i.count!==void 0&&!ke(i.count),w=y&&!i.ordinal&&i.count===0,x=i.context!==void 0&&(ke(i.context)||typeof i.context=="number")&&i.context!=="",C=i.lngs?i.lngs:this.languageUtils.toResolveHierarchy(i.lng||this.language,i.fallbackLng);g.forEach(k=>{var L,W;this.isValidLookup(n)||(u=k,!kg[`${C[0]}-${k}`]&&((L=this.utils)!=null&&L.hasLoadedNamespace)&&!((W=this.utils)!=null&&W.hasLoadedNamespace(u))&&(kg[`${C[0]}-${k}`]=!0,this.logger.warn(`key "${o}" for languages "${C.join(", ")}" won't get resolved as namespace "${u}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),C.forEach(O=>{var G;if(this.isValidLookup(n))return;h=O;const T=[_];if((G=this.i18nFormat)!=null&&G.addLookupKeys)this.i18nFormat.addLookupKeys(T,_,O,k,i);else{let le;y&&(le=this.pluralResolver.getSuffix(O,i.count,i));const ue=`${this.options.pluralSeparator}zero`,ye=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(y&&(i.ordinal&&le.indexOf(ye)===0&&T.push(_+le.replace(ye,this.options.pluralSeparator)),T.push(_+le),w&&T.push(_+ue)),x){const ie=`${_}${this.options.contextSeparator||"_"}${i.context}`;T.push(ie),y&&(i.ordinal&&le.indexOf(ye)===0&&T.push(ie+le.replace(ye,this.options.pluralSeparator)),T.push(ie+le),w&&T.push(ie+ue))}}let $;for(;$=T.pop();)this.isValidLookup(n)||(l=$,n=this.getResource(O,k,$,i))}))})}),{res:n,usedKey:o,exactUsedKey:l,usedLng:h,usedNS:u}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,i,n,o={}){var l;return(l=this.i18nFormat)!=null&&l.getResource?this.i18nFormat.getResource(t,i,n,o):this.resourceStore.getResource(t,i,n,o)}getUsedParamsDetails(t={}){const i=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=t.replace&&!ke(t.replace);let o=n?t.replace:t;if(n&&typeof t.count<"u"&&(o.count=t.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!n){o={...o};for(const l of i)delete o[l]}return o}static hasDefaultValue(t){const i="defaultValue";for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&i===n.substring(0,i.length)&&t[n]!==void 0)return!0;return!1}}class Eg{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Hi.create("languageUtils")}getScriptPartFromCode(t){if(t=zo(t),!t||t.indexOf("-")<0)return null;const i=t.split("-");return i.length===2||(i.pop(),i[i.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(i.join("-"))}getLanguagePartFromCode(t){if(t=zo(t),!t||t.indexOf("-")<0)return t;const i=t.split("-");return this.formatLanguageCode(i[0])}formatLanguageCode(t){if(ke(t)&&t.indexOf("-")>-1){let i;try{i=Intl.getCanonicalLocales(t)[0]}catch{}return i&&this.options.lowerCaseLng&&(i=i.toLowerCase()),i||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let i;return t.forEach(n=>{if(i)return;const o=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(o))&&(i=o)}),!i&&this.options.supportedLngs&&t.forEach(n=>{if(i)return;const o=this.getScriptPartFromCode(n);if(this.isSupportedCode(o))return i=o;const l=this.getLanguagePartFromCode(n);if(this.isSupportedCode(l))return i=l;i=this.options.supportedLngs.find(h=>{if(h===l)return h;if(!(h.indexOf("-")<0&&l.indexOf("-")<0)&&(h.indexOf("-")>0&&l.indexOf("-")<0&&h.substring(0,h.indexOf("-"))===l||h.indexOf(l)===0&&l.length>1))return h})}),i||(i=this.getFallbackCodes(this.options.fallbackLng)[0]),i}getFallbackCodes(t,i){if(!t)return[];if(typeof t=="function"&&(t=t(i)),ke(t)&&(t=[t]),Array.isArray(t))return t;if(!i)return t.default||[];let n=t[i];return n||(n=t[this.getScriptPartFromCode(i)]),n||(n=t[this.formatLanguageCode(i)]),n||(n=t[this.getLanguagePartFromCode(i)]),n||(n=t.default),n||[]}toResolveHierarchy(t,i){const n=this.getFallbackCodes((i===!1?[]:i)||this.options.fallbackLng||[],t),o=[],l=h=>{h&&(this.isSupportedCode(h)?o.push(h):this.logger.warn(`rejecting language code not found in supportedLngs: ${h}`))};return ke(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&l(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&l(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&l(this.getLanguagePartFromCode(t))):ke(t)&&l(this.formatLanguageCode(t)),n.forEach(h=>{o.indexOf(h)<0&&l(this.formatLanguageCode(h))}),o}}const Rg={zero:0,one:1,two:2,few:3,many:4,other:5},Pg={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class vx{constructor(t,i={}){this.languageUtils=t,this.options=i,this.logger=Hi.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,i){this.rules[t]=i}clearCache(){this.pluralRulesCache={}}getRule(t,i={}){const n=zo(t==="dev"?"en":t),o=i.ordinal?"ordinal":"cardinal",l=JSON.stringify({cleanedCode:n,type:o});if(l in this.pluralRulesCache)return this.pluralRulesCache[l];let h;try{h=new Intl.PluralRules(n,{type:o})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Pg;if(!t.match(/-|_/))return Pg;const p=this.languageUtils.getLanguagePartFromCode(t);h=this.getRule(p,i)}return this.pluralRulesCache[l]=h,h}needsPlural(t,i={}){let n=this.getRule(t,i);return n||(n=this.getRule("dev",i)),(n==null?void 0:n.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(t,i,n={}){return this.getSuffixes(t,n).map(o=>`${i}${o}`)}getSuffixes(t,i={}){let n=this.getRule(t,i);return n||(n=this.getRule("dev",i)),n?n.resolvedOptions().pluralCategories.sort((o,l)=>Rg[o]-Rg[l]).map(o=>`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${o}`):[]}getSuffix(t,i,n={}){const o=this.getRule(t,n);return o?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${o.select(i)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",i,n))}}const Lg=(e,t,i,n=".",o=!0)=>{let l=hx(e,t,i);return!l&&o&&ke(i)&&(l=ju(e,i,n),l===void 0&&(l=ju(t,i,n))),l},ru=e=>e.replace(/\$/g,"$$$$");class Ng{constructor(t={}){var i;this.logger=Hi.create("interpolator"),this.options=t,this.format=((i=t==null?void 0:t.interpolation)==null?void 0:i.format)||(n=>n),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:i,escapeValue:n,useRawValueToEscape:o,prefix:l,prefixEscaped:h,suffix:u,suffixEscaped:p,formatSeparator:d,unescapeSuffix:_,unescapePrefix:g,nestingPrefix:y,nestingPrefixEscaped:w,nestingSuffix:x,nestingSuffixEscaped:C,nestingOptionsSeparator:k,maxReplaces:L,alwaysFormat:W}=t.interpolation;this.escape=i!==void 0?i:ux,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=o!==void 0?o:!1,this.prefix=l?sn(l):h||"{{",this.suffix=u?sn(u):p||"}}",this.formatSeparator=d||",",this.unescapePrefix=_?"":g||"-",this.unescapeSuffix=this.unescapePrefix?"":_||"",this.nestingPrefix=y?sn(y):w||sn("$t("),this.nestingSuffix=x?sn(x):C||sn(")"),this.nestingOptionsSeparator=k||",",this.maxReplaces=L||1e3,this.alwaysFormat=W!==void 0?W:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(i,n)=>(i==null?void 0:i.source)===n?(i.lastIndex=0,i):new RegExp(n,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,i,n,o){var w;let l,h,u;const p=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=x=>{if(x.indexOf(this.formatSeparator)<0){const W=Lg(i,p,x,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(W,void 0,n,{...o,...i,interpolationkey:x}):W}const C=x.split(this.formatSeparator),k=C.shift().trim(),L=C.join(this.formatSeparator).trim();return this.format(Lg(i,p,k,this.options.keySeparator,this.options.ignoreJSONStructure),L,n,{...o,...i,interpolationkey:k})};this.resetRegExp();const _=(o==null?void 0:o.missingInterpolationHandler)||this.options.missingInterpolationHandler,g=((w=o==null?void 0:o.interpolation)==null?void 0:w.skipOnVariables)!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:x=>ru(x)},{regex:this.regexp,safeValue:x=>this.escapeValue?ru(this.escape(x)):ru(x)}].forEach(x=>{for(u=0;l=x.regex.exec(t);){const C=l[1].trim();if(h=d(C),h===void 0)if(typeof _=="function"){const L=_(t,l,o);h=ke(L)?L:""}else if(o&&Object.prototype.hasOwnProperty.call(o,C))h="";else if(g){h=l[0];continue}else this.logger.warn(`missed to pass in variable ${C} for interpolating ${t}`),h="";else!ke(h)&&!this.useRawValueToEscape&&(h=Sg(h));const k=x.safeValue(h);if(t=t.replace(l[0],k),g?(x.regex.lastIndex+=h.length,x.regex.lastIndex-=l[0].length):x.regex.lastIndex=0,u++,u>=this.maxReplaces)break}}),t}nest(t,i,n={}){let o,l,h;const u=(p,d)=>{const _=this.nestingOptionsSeparator;if(p.indexOf(_)<0)return p;const g=p.split(new RegExp(`${_}[ ]*{`));let y=`{${g[1]}`;p=g[0],y=this.interpolate(y,h);const w=y.match(/'/g),x=y.match(/"/g);(((w==null?void 0:w.length)??0)%2===0&&!x||x.length%2!==0)&&(y=y.replace(/'/g,'"'));try{h=JSON.parse(y),d&&(h={...d,...h})}catch(C){return this.logger.warn(`failed parsing options string in nesting for key ${p}`,C),`${p}${_}${y}`}return h.defaultValue&&h.defaultValue.indexOf(this.prefix)>-1&&delete h.defaultValue,p};for(;o=this.nestingRegexp.exec(t);){let p=[];h={...n},h=h.replace&&!ke(h.replace)?h.replace:h,h.applyPostProcessor=!1,delete h.defaultValue;const d=/{.*}/.test(o[1])?o[1].lastIndexOf("}")+1:o[1].indexOf(this.formatSeparator);if(d!==-1&&(p=o[1].slice(d).split(this.formatSeparator).map(_=>_.trim()).filter(Boolean),o[1]=o[1].slice(0,d)),l=i(u.call(this,o[1].trim(),h),h),l&&o[0]===t&&!ke(l))return l;ke(l)||(l=Sg(l)),l||(this.logger.warn(`missed to resolve ${o[1]} for nesting ${t}`),l=""),p.length&&(l=p.reduce((_,g)=>this.format(_,g,n.lng,{...n,interpolationkey:o[1].trim()}),l.trim())),t=t.replace(o[0],l),this.regexp.lastIndex=0}return t}}const yx=e=>{let t=e.toLowerCase().trim();const i={};if(e.indexOf("(")>-1){const n=e.split("(");t=n[0].toLowerCase().trim();const o=n[1].substring(0,n[1].length-1);t==="currency"&&o.indexOf(":")<0?i.currency||(i.currency=o.trim()):t==="relativetime"&&o.indexOf(":")<0?i.range||(i.range=o.trim()):o.split(";").forEach(h=>{if(h){const[u,...p]=h.split(":"),d=p.join(":").trim().replace(/^'+|'+$/g,""),_=u.trim();i[_]||(i[_]=d),d==="false"&&(i[_]=!1),d==="true"&&(i[_]=!0),isNaN(d)||(i[_]=parseInt(d,10))}})}return{formatName:t,formatOptions:i}},Dg=e=>{const t={};return(i,n,o)=>{let l=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(l={...l,[o.interpolationkey]:void 0});const h=n+JSON.stringify(l);let u=t[h];return u||(u=e(zo(n),o),t[h]=u),u(i)}},Sx=e=>(t,i,n)=>e(zo(i),n)(t);class wx{constructor(t={}){this.logger=Hi.create("formatter"),this.options=t,this.init(t)}init(t,i={interpolation:{}}){this.formatSeparator=i.interpolation.formatSeparator||",";const n=i.cacheInBuiltFormats?Dg:Sx;this.formats={number:n((o,l)=>{const h=new Intl.NumberFormat(o,{...l});return u=>h.format(u)}),currency:n((o,l)=>{const h=new Intl.NumberFormat(o,{...l,style:"currency"});return u=>h.format(u)}),datetime:n((o,l)=>{const h=new Intl.DateTimeFormat(o,{...l});return u=>h.format(u)}),relativetime:n((o,l)=>{const h=new Intl.RelativeTimeFormat(o,{...l});return u=>h.format(u,l.range||"day")}),list:n((o,l)=>{const h=new Intl.ListFormat(o,{...l});return u=>h.format(u)})}}add(t,i){this.formats[t.toLowerCase().trim()]=i}addCached(t,i){this.formats[t.toLowerCase().trim()]=Dg(i)}format(t,i,n,o={}){const l=i.split(this.formatSeparator);if(l.length>1&&l[0].indexOf("(")>1&&l[0].indexOf(")")<0&&l.find(u=>u.indexOf(")")>-1)){const u=l.findIndex(p=>p.indexOf(")")>-1);l[0]=[l[0],...l.splice(1,u)].join(this.formatSeparator)}return l.reduce((u,p)=>{var g;const{formatName:d,formatOptions:_}=yx(p);if(this.formats[d]){let y=u;try{const w=((g=o==null?void 0:o.formatParams)==null?void 0:g[o.interpolationkey])||{},x=w.locale||w.lng||o.locale||o.lng||n;y=this.formats[d](u,x,{..._,...o,...w})}catch(w){this.logger.warn(w)}return y}else this.logger.warn(`there was no format function for ${d}`);return u},t)}}const xx=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class Cx extends Ql{constructor(t,i,n,o={}){var l,h;super(),this.backend=t,this.store=i,this.services=n,this.languageUtils=n.languageUtils,this.options=o,this.logger=Hi.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],(h=(l=this.backend)==null?void 0:l.init)==null||h.call(l,n,o.backend,o)}queueLoad(t,i,n,o){const l={},h={},u={},p={};return t.forEach(d=>{let _=!0;i.forEach(g=>{const y=`${d}|${g}`;!n.reload&&this.store.hasResourceBundle(d,g)?this.state[y]=2:this.state[y]<0||(this.state[y]===1?h[y]===void 0&&(h[y]=!0):(this.state[y]=1,_=!1,h[y]===void 0&&(h[y]=!0),l[y]===void 0&&(l[y]=!0),p[g]===void 0&&(p[g]=!0)))}),_||(u[d]=!0)}),(Object.keys(l).length||Object.keys(h).length)&&this.queue.push({pending:h,pendingCount:Object.keys(h).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(l),pending:Object.keys(h),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(p)}}loaded(t,i,n){const o=t.split("|"),l=o[0],h=o[1];i&&this.emit("failedLoading",l,h,i),!i&&n&&this.store.addResourceBundle(l,h,n,void 0,void 0,{skipCopy:!0}),this.state[t]=i?-1:2,i&&n&&(this.state[t]=0);const u={};this.queue.forEach(p=>{lx(p.loaded,[l],h),xx(p,t),i&&p.errors.push(i),p.pendingCount===0&&!p.done&&(Object.keys(p.loaded).forEach(d=>{u[d]||(u[d]={});const _=p.loaded[d];_.length&&_.forEach(g=>{u[d][g]===void 0&&(u[d][g]=!0)})}),p.done=!0,p.errors.length?p.callback(p.errors):p.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(p=>!p.done)}read(t,i,n,o=0,l=this.retryTimeout,h){if(!t.length)return h(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:i,fcName:n,tried:o,wait:l,callback:h});return}this.readingCalls++;const u=(d,_)=>{if(this.readingCalls--,this.waitingReads.length>0){const g=this.waitingReads.shift();this.read(g.lng,g.ns,g.fcName,g.tried,g.wait,g.callback)}if(d&&_&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,t,i,n,o+1,l*2,h)},l);return}h(d,_)},p=this.backend[n].bind(this.backend);if(p.length===2){try{const d=p(t,i);d&&typeof d.then=="function"?d.then(_=>u(null,_)).catch(u):u(null,d)}catch(d){u(d)}return}return p(t,i,u)}prepareLoading(t,i,n={},o){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();ke(t)&&(t=this.languageUtils.toResolveHierarchy(t)),ke(i)&&(i=[i]);const l=this.queueLoad(t,i,n,o);if(!l.toLoad.length)return l.pending.length||o(),null;l.toLoad.forEach(h=>{this.loadOne(h)})}load(t,i,n){this.prepareLoading(t,i,{},n)}reload(t,i,n){this.prepareLoading(t,i,{reload:!0},n)}loadOne(t,i=""){const n=t.split("|"),o=n[0],l=n[1];this.read(o,l,"read",void 0,void 0,(h,u)=>{h&&this.logger.warn(`${i}loading namespace ${l} for language ${o} failed`,h),!h&&u&&this.logger.log(`${i}loaded namespace ${l} for language ${o}`,u),this.loaded(t,h,u)})}saveMissing(t,i,n,o,l,h={},u=()=>{}){var p,d,_,g,y;if((d=(p=this.services)==null?void 0:p.utils)!=null&&d.hasLoadedNamespace&&!((g=(_=this.services)==null?void 0:_.utils)!=null&&g.hasLoadedNamespace(i))){this.logger.warn(`did not save key "${n}" as the namespace "${i}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if((y=this.backend)!=null&&y.create){const w={...h,isUpdate:l},x=this.backend.create.bind(this.backend);if(x.length<6)try{let C;x.length===5?C=x(t,i,n,o,w):C=x(t,i,n,o),C&&typeof C.then=="function"?C.then(k=>u(null,k)).catch(u):u(null,C)}catch(C){u(C)}else x(t,i,n,o,u,w)}!t||!t[0]||this.store.addResource(t[0],i,n,o)}}}const Mg=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),ke(e[1])&&(t.defaultValue=e[1]),ke(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const i=e[3]||e[2];Object.keys(i).forEach(n=>{t[n]=i[n]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Tg=e=>{var t,i;return ke(e.ns)&&(e.ns=[e.ns]),ke(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),ke(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),((i=(t=e.supportedLngs)==null?void 0:t.indexOf)==null?void 0:i.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e},ml=()=>{},bx=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(i=>{typeof e[i]=="function"&&(e[i]=e[i].bind(e))})};class Bo extends Ql{constructor(t={},i){if(super(),this.options=Tg(t),this.services={},this.logger=Hi,this.modules={external:[]},bx(this),i&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,i),this;setTimeout(()=>{this.init(t,i)},0)}}init(t={},i){this.isInitializing=!0,typeof t=="function"&&(i=t,t={}),t.defaultNS==null&&t.ns&&(ke(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const n=Mg();this.options={...n,...this.options,...Tg(t)},this.options.interpolation={...n.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=n.overloadTranslationOptionHandler);const o=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?Hi.init(o(this.modules.logger),this.options):Hi.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=wx;const _=new Eg(this.options);this.store=new bg(this.options.resources,this.options);const g=this.services;g.logger=Hi,g.resourceStore=this.store,g.languageUtils=_,g.pluralResolver=new vx(_,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),d&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(g.formatter=o(d),g.formatter.init&&g.formatter.init(g,this.options),this.options.interpolation.format=g.formatter.format.bind(g.formatter)),g.interpolator=new Ng(this.options),g.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},g.backendConnector=new Cx(o(this.modules.backend),g.resourceStore,g,this.options),g.backendConnector.on("*",(w,...x)=>{this.emit(w,...x)}),this.modules.languageDetector&&(g.languageDetector=o(this.modules.languageDetector),g.languageDetector.init&&g.languageDetector.init(g,this.options.detection,this.options)),this.modules.i18nFormat&&(g.i18nFormat=o(this.modules.i18nFormat),g.i18nFormat.init&&g.i18nFormat.init(this)),this.translator=new jl(this.services,this.options),this.translator.on("*",(w,...x)=>{this.emit(w,...x)}),this.modules.external.forEach(w=>{w.init&&w.init(this)})}if(this.format=this.options.interpolation.format,i||(i=ml),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=(..._)=>this.store[d](..._)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=(..._)=>(this.store[d](..._),this)});const u=wo(),p=()=>{const d=(_,g)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),u.resolve(g),i(_,g)};if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initAsync?p():setTimeout(p,0),u}loadResources(t,i=ml){var l,h;let n=i;const o=ke(t)?t:this.language;if(typeof t=="function"&&(n=t),!this.options.resources||this.options.partialBundledLanguages){if((o==null?void 0:o.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const u=[],p=d=>{if(!d||d==="cimode")return;this.services.languageUtils.toResolveHierarchy(d).forEach(g=>{g!=="cimode"&&u.indexOf(g)<0&&u.push(g)})};o?p(o):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(_=>p(_)),(h=(l=this.options.preload)==null?void 0:l.forEach)==null||h.call(l,d=>p(d)),this.services.backendConnector.load(u,this.options.ns,d=>{!d&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(d)})}else n(null)}reloadResources(t,i,n){const o=wo();return typeof t=="function"&&(n=t,t=void 0),typeof i=="function"&&(n=i,i=void 0),t||(t=this.languages),i||(i=this.options.ns),n||(n=ml),this.services.backendConnector.reload(t,i,l=>{o.resolve(),n(l)}),o}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&Mv.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let i=0;i<this.languages.length;i++){const n=this.languages[i];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,i){this.isLanguageChangingTo=t;const n=wo();this.emit("languageChanging",t);const o=u=>{this.language=u,this.languages=this.services.languageUtils.toResolveHierarchy(u),this.resolvedLanguage=void 0,this.setResolvedLanguage(u)},l=(u,p)=>{p?this.isLanguageChangingTo===t&&(o(p),this.translator.changeLanguage(p),this.isLanguageChangingTo=void 0,this.emit("languageChanged",p),this.logger.log("languageChanged",p)):this.isLanguageChangingTo=void 0,n.resolve((...d)=>this.t(...d)),i&&i(u,(...d)=>this.t(...d))},h=u=>{var _,g;!t&&!u&&this.services.languageDetector&&(u=[]);const p=ke(u)?u:u&&u[0],d=this.store.hasLanguageSomeTranslations(p)?p:this.services.languageUtils.getBestMatchFromCodes(ke(u)?[u]:u);d&&(this.language||o(d),this.translator.language||this.translator.changeLanguage(d),(g=(_=this.services.languageDetector)==null?void 0:_.cacheUserLanguage)==null||g.call(_,d)),this.loadResources(d,y=>{l(y,d)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?h(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(h):this.services.languageDetector.detect(h):h(t),n}getFixedT(t,i,n){const o=(l,h,...u)=>{let p;typeof h!="object"?p=this.options.overloadTranslationOptionHandler([l,h].concat(u)):p={...h},p.lng=p.lng||o.lng,p.lngs=p.lngs||o.lngs,p.ns=p.ns||o.ns,p.keyPrefix!==""&&(p.keyPrefix=p.keyPrefix||n||o.keyPrefix);const d=this.options.keySeparator||".";let _;return p.keyPrefix&&Array.isArray(l)?_=l.map(g=>(typeof g=="function"&&(g=Fu(g,{...this.options,...h})),`${p.keyPrefix}${d}${g}`)):(typeof l=="function"&&(l=Fu(l,{...this.options,...h})),_=p.keyPrefix?`${p.keyPrefix}${d}${l}`:l),this.t(_,p)};return ke(t)?o.lng=t:o.lngs=t,o.ns=i,o.keyPrefix=n,o}t(...t){var i;return(i=this.translator)==null?void 0:i.translate(...t)}exists(...t){var i;return(i=this.translator)==null?void 0:i.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,i={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=i.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,l=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const h=(u,p)=>{const d=this.services.backendConnector.state[`${u}|${p}`];return d===-1||d===0||d===2};if(i.precheck){const u=i.precheck(this,h);if(u!==void 0)return u}return!!(this.hasResourceBundle(n,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||h(n,t)&&(!o||h(l,t)))}loadNamespaces(t,i){const n=wo();return this.options.ns?(ke(t)&&(t=[t]),t.forEach(o=>{this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}),this.loadResources(o=>{n.resolve(),i&&i(o)}),n):(i&&i(),Promise.resolve())}loadLanguages(t,i){const n=wo();ke(t)&&(t=[t]);const o=this.options.preload||[],l=t.filter(h=>o.indexOf(h)<0&&this.services.languageUtils.isSupportedCode(h));return l.length?(this.options.preload=o.concat(l),this.loadResources(h=>{n.resolve(),i&&i(h)}),n):(i&&i(),Promise.resolve())}dir(t){var o,l;if(t||(t=this.resolvedLanguage||(((o=this.languages)==null?void 0:o.length)>0?this.languages[0]:this.language)),!t)return"rtl";try{const h=new Intl.Locale(t);if(h&&h.getTextInfo){const u=h.getTextInfo();if(u&&u.direction)return u.direction}}catch{}const i=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=((l=this.services)==null?void 0:l.languageUtils)||new Eg(Mg());return t.toLowerCase().indexOf("-latn")>1?"ltr":i.indexOf(n.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},i){const n=new Bo(t,i);return n.createInstance=Bo.createInstance,n}cloneInstance(t={},i=ml){const n=t.forkResourceStore;n&&delete t.forkResourceStore;const o={...this.options,...t,isClone:!0},l=new Bo(o);if((t.debug!==void 0||t.prefix!==void 0)&&(l.logger=l.logger.clone(t)),["store","services","language"].forEach(u=>{l[u]=this[u]}),l.services={...this.services},l.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},n){const u=Object.keys(this.store.data).reduce((p,d)=>(p[d]={...this.store.data[d]},p[d]=Object.keys(p[d]).reduce((_,g)=>(_[g]={...p[d][g]},_),p[d]),p),{});l.store=new bg(u,o),l.services.resourceStore=l.store}return t.interpolation&&(l.services.interpolator=new Ng(o)),l.translator=new jl(l.services,o),l.translator.on("*",(u,...p)=>{l.emit(u,...p)}),l.init(o,i),l.translator.options=o,l.translator.backendConnector.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ht=Bo.createInstance();Ht.createInstance;Ht.dir;Ht.init;Ht.loadResources;Ht.reloadResources;Ht.use;Ht.changeLanguage;Ht.getFixedT;Ht.t;Ht.exists;Ht.setDefaultNamespace;Ht.hasLoadedNamespace;Ht.loadNamespaces;Ht.loadLanguages;const kx=(e,t,i,n)=>{var l,h,u,p;const o=[i,{code:t,...n||{}}];if((h=(l=e==null?void 0:e.services)==null?void 0:l.logger)!=null&&h.forward)return e.services.logger.forward(o,"warn","react-i18next::",!0);Ps(o[0])&&(o[0]=`react-i18next:: ${o[0]}`),(p=(u=e==null?void 0:e.services)==null?void 0:u.logger)!=null&&p.warn?e.services.logger.warn(...o):console!=null&&console.warn&&console.warn(...o)},Og={},Ov=(e,t,i,n)=>{Ps(i)&&Og[i]||(Ps(i)&&(Og[i]=new Date),kx(e,t,i,n))},Bv=(e,t)=>()=>{if(e.isInitialized)t();else{const i=()=>{setTimeout(()=>{e.off("initialized",i)},0),t()};e.on("initialized",i)}},zu=(e,t,i)=>{e.loadNamespaces(t,Bv(e,i))},Bg=(e,t,i,n)=>{if(Ps(i)&&(i=[i]),e.options.preload&&e.options.preload.indexOf(t)>-1)return zu(e,i,n);i.forEach(o=>{e.options.ns.indexOf(o)<0&&e.options.ns.push(o)}),e.loadLanguages(t,Bv(e,n))},Ex=(e,t,i={})=>!t.languages||!t.languages.length?(Ov(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:i.lng,precheck:(n,o)=>{if(i.bindI18n&&i.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!o(n.isLanguageChangingTo,e))return!1}}),Ps=e=>typeof e=="string",Rx=e=>typeof e=="object"&&e!==null,Px=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Lx={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},Nx=e=>Lx[e],Dx=e=>e.replace(Px,Nx);let Hu={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Dx,transDefaultProps:void 0};const Mx=(e={})=>{Hu={...Hu,...e}},Tx=()=>Hu;let Iv;const Ox=e=>{Iv=e},Bx=()=>Iv,Ix={type:"3rdParty",init(e){Mx(e.options.react),Ox(e)}},Ax=N.createContext();class jx{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(i=>{this.usedNamespaces[i]||(this.usedNamespaces[i]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var su={exports:{}},nu={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ig;function Fx(){if(Ig)return nu;Ig=1;var e=Vl();function t(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var i=typeof Object.is=="function"?Object.is:t,n=e.useState,o=e.useEffect,l=e.useLayoutEffect,h=e.useDebugValue;function u(g,y){var w=y(),x=n({inst:{value:w,getSnapshot:y}}),C=x[0].inst,k=x[1];return l(function(){C.value=w,C.getSnapshot=y,p(C)&&k({inst:C})},[g,w,y]),o(function(){return p(C)&&k({inst:C}),g(function(){p(C)&&k({inst:C})})},[g]),h(w),w}function p(g){var y=g.getSnapshot;g=g.value;try{var w=y();return!i(g,w)}catch{return!0}}function d(g,y){return y()}var _=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:u;return nu.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:_,nu}var Ag;function zx(){return Ag||(Ag=1,su.exports=Fx()),su.exports}var Hx=zx();const $x=(e,t)=>Ps(t)?t:Rx(t)&&Ps(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,Wx={t:$x,ready:!1},Ux=()=>()=>{},Jo=(e,t={})=>{var ye,ie,se;const{i18n:i}=t,{i18n:n,defaultNS:o}=N.useContext(Ax)||{},l=i||n||Bx();l&&!l.reportNamespaces&&(l.reportNamespaces=new jx),l||Ov(l,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const h=N.useMemo(()=>{var z;return{...Tx(),...(z=l==null?void 0:l.options)==null?void 0:z.react,...t}},[l,t]),{useSuspense:u,keyPrefix:p}=h,d=o||((ye=l==null?void 0:l.options)==null?void 0:ye.defaultNS),_=Ps(d)?[d]:d||["translation"],g=N.useMemo(()=>_,_);(se=(ie=l==null?void 0:l.reportNamespaces)==null?void 0:ie.addUsedNamespaces)==null||se.call(ie,g);const y=N.useRef(0),w=N.useCallback(z=>{if(!l)return Ux;const{bindI18n:j,bindI18nStore:U}=h,V=()=>{y.current+=1,z()};return j&&l.on(j,V),U&&l.store.on(U,V),()=>{j&&j.split(" ").forEach(K=>l.off(K,V)),U&&U.split(" ").forEach(K=>l.store.off(K,V))}},[l,h]),x=N.useRef(),C=N.useCallback(()=>{if(!l)return Wx;const z=!!(l.isInitialized||l.initializedStoreOnce)&&g.every(A=>Ex(A,l,h)),j=t.lng||l.language,U=y.current,V=x.current;if(V&&V.ready===z&&V.lng===j&&V.keyPrefix===p&&V.revision===U)return V;const te={t:l.getFixedT(j,h.nsMode==="fallback"?g:g[0],p),ready:z,lng:j,keyPrefix:p,revision:U};return x.current=te,te},[l,g,p,h,t.lng]),[k,L]=N.useState(0),{t:W,ready:O}=Hx.useSyncExternalStore(w,C,C);N.useEffect(()=>{if(l&&!O&&!u){const z=()=>L(j=>j+1);t.lng?Bg(l,t.lng,g,z):zu(l,g,z)}},[l,t.lng,g,O,u,k]);const T=l||{},$=N.useRef(null),G=N.useRef(),le=z=>{const j=Object.getOwnPropertyDescriptors(z);j.__original&&delete j.__original;const U=Object.create(Object.getPrototypeOf(z),j);if(!Object.prototype.hasOwnProperty.call(U,"__original"))try{Object.defineProperty(U,"__original",{value:z,writable:!1,enumerable:!1,configurable:!1})}catch{}return U},ue=N.useMemo(()=>{const z=T,j=z==null?void 0:z.language;let U=z;z&&($.current&&$.current.__original===z?G.current!==j?(U=le(z),$.current=U,G.current=j):U=$.current:(U=le(z),$.current=U,G.current=j));const V=[W,U,O];return V.t=W,V.i18n=U,V.ready=O,V},[W,T,O,T.resolvedLanguage,T.language,T.languages]);if(l&&u&&!O)throw new Promise(z=>{const j=()=>z();t.lng?Bg(l,t.lng,g,j):zu(l,g,j)});return ue};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Av=(...e)=>e.filter((t,i,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===i).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=N.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:o="",children:l,iconNode:h,...u},p)=>N.createElement("svg",{ref:p,...Vx,width:t,height:t,stroke:e,strokeWidth:n?Number(i)*24/Number(t):i,className:Av("lucide",o),...u},[...h.map(([d,_])=>N.createElement(d,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=(e,t)=>{const i=N.forwardRef(({className:n,...o},l)=>N.createElement(qx,{ref:l,iconNode:t,className:Av(`lucide-${Kx(e)}`,n),...o}));return i.displayName=`${e}`,i};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=De("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=De("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=De("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=De("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=De("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=De("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=De("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=De("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=De("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=De("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=De("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=De("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=De("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=De("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=De("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fl=De("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=De("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=De("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=De("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=De("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=De("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=De("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=De("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=De("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=De("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=De("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=De("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=De("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=De("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=De("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=De("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=De("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=De("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=De("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=De("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=De("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=De("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Tt="";async function pC(){const e=await fetch(`${Tt}/api/runs`);if(!e.ok)throw new Error("Failed to fetch runs");return e.json()}async function mC(e){const t=await fetch(`${Tt}/api/runs/${e}`);if(!t.ok)throw new Error("Failed to fetch run");return t.json()}async function gC(e,t){const i=typeof e=="string"?{goal:e,repoPath:t}:e,n=await fetch(`${Tt}/api/runs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({goal:i.goal,repo_path:i.repoPath,project_id:i.projectId})});if(!n.ok)throw new Error("Failed to create run");return n.json()}async function _C(e){if(!(await fetch(`${Tt}/api/runs/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete run")}async function vC(){const e=await fetch(`${Tt}/api/projects`);if(!e.ok)throw new Error("Failed to fetch projects");return e.json()}async function yC(e){const t=await fetch(`${Tt}/api/projects/${e}`);if(!t.ok)throw new Error("Failed to fetch project");return t.json()}async function SC(e){const t=await fetch(`${Tt}/api/projects`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create project");return t.json()}async function wC(e){if(!(await fetch(`${Tt}/api/projects/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete project")}async function xC(e,t){const i=new URL(`${Tt}/api/logs/${e}`,window.location.origin),n=await fetch(i.toString());if(!n.ok)throw new Error("Failed to fetch logs");return n.json()}async function CC(e){const t=await fetch(`${Tt}/api/runs/${e}/dag`);if(t.status===404||t.status===202)return null;if(!t.ok)throw new Error("Failed to fetch DAG");return t.json()}async function $v(){const e=await fetch(`${Tt}/health`);if(!e.ok)throw new Error("Failed to fetch health");return e.json()}function bC(e,t,i){const n=new URL(`${Tt}/api/events`,window.location.origin);e&&n.searchParams.set("run_id",e);const o=new EventSource(n.toString());return o.onmessage=l=>{try{const h=JSON.parse(l.data);h.type!=="connected"&&t(h)}catch(h){console.error("Failed to parse SSE message:",h)}},o.onerror=l=>{console.error("SSE error:",l),i==null||i(l)},()=>o.close()}async function Wv(){const e=await fetch(`${Tt}/api/settings`);if(!e.ok)throw new Error("Failed to fetch settings");return e.json()}async function Uv(e){const t=await fetch(`${Tt}/api/settings`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update settings");return t.json()}async function Kv(){const e=await fetch(`${Tt}/api/copilot/status`);if(!e.ok)throw new Error("Failed to fetch copilot status");return e.json()}async function kC(){const e=await fetch(`${Tt}/api/copilot/models`);if(!e.ok)throw new Error("Failed to fetch copilot models");return e.json()}function Vv(e){var t,i,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(i=Vv(e[t]))&&(n&&(n+=" "),n+=i)}else for(i in e)e[i]&&(n&&(n+=" "),n+=i);return n}function et(){for(var e,t,i=0,n="",o=arguments.length;i<o;i++)(e=arguments[i])&&(t=Vv(e))&&(n&&(n+=" "),n+=t);return n}const EC=[{path:"/projects",labelKey:"nav.projects",icon:Hd},{path:"/shell",labelKey:"nav.shell",icon:Ho},{path:"/settings",labelKey:"nav.settings",icon:cC}];function RC({children:e}){const{t}=Jo(),i=ur(),[n,o]=N.useState(!1),{data:l}=Wi({queryKey:["health"],queryFn:$v,refetchInterval:3e4});return S.jsxs("div",{className:"min-h-screen bg-slate-50",children:[S.jsxs("header",{className:"lg:hidden fixed top-0 left-0 right-0 h-14 bg-white border-b border-slate-200 flex items-center px-4 z-50",children:[S.jsx("button",{onClick:()=>o(!n),className:"p-2 hover:bg-slate-100 rounded-lg",children:n?S.jsx(Hv,{size:20}):S.jsx(nC,{size:20})}),S.jsx("h1",{className:"ml-3 font-semibold text-slate-800",children:"Tako Agent"})]}),S.jsxs("aside",{className:et("fixed top-0 left-0 h-full w-64 bg-white border-r border-slate-200 z-40 transition-transform lg:translate-x-0",n?"translate-x-0":"-translate-x-full"),children:[S.jsxs("div",{className:"h-14 flex items-center px-4 border-b border-slate-200",children:[S.jsx(Yx,{className:"text-primary-600",size:24}),S.jsx("h1",{className:"ml-2 font-bold text-slate-800",children:"Tako Agent"})]}),S.jsx("nav",{className:"p-4 space-y-1",children:EC.map(({path:h,labelKey:u,icon:p})=>S.jsxs(bn,{to:h,onClick:()=>o(!1),className:et("flex items-center gap-3 px-3 py-2 rounded-lg transition-colors",i.pathname.startsWith(h)?"bg-primary-50 text-primary-700":"text-slate-600 hover:bg-slate-100"),children:[S.jsx(p,{size:18}),S.jsx("span",{children:t(u)})]},h))}),S.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-slate-200",children:S.jsxs("div",{className:"text-xs text-slate-500 space-y-1",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:et("w-2 h-2 rounded-full",(l==null?void 0:l.status)==="ok"?"bg-green-500":"bg-red-500")}),S.jsxs("span",{children:["Backend: ",(l==null?void 0:l.status)??"disconnected"]})]}),S.jsxs("div",{className:"text-slate-400",children:["v",(l==null?void 0:l.version)??"?"]})]})})]}),S.jsx("main",{className:"lg:ml-64 pt-14 lg:pt-0 min-h-screen",children:S.jsx("div",{className:"6",children:e})}),n&&S.jsx("div",{className:"fixed inset-0 bg-black/20 z-30 lg:hidden",onClick:()=>o(!1)})]})}const PC="modulepreload",LC=function(e){return"/"+e},Hg={},NC=function(t,i,n){let o=Promise.resolve();if(i&&i.length>0){let h=function(d){return Promise.all(d.map(_=>Promise.resolve(_).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),p=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));o=h(i.map(d=>{if(d=LC(d),d in Hg)return;Hg[d]=!0;const _=d.endsWith(".css"),g=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const y=document.createElement("link");if(y.rel=_?"stylesheet":PC,_||(y.as="script"),y.crossOrigin="",y.href=d,p&&y.setAttribute("nonce",p),document.head.appendChild(y),_)return new Promise((w,x)=>{y.addEventListener("load",w),y.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${d}`)))})}))}function l(h){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=h,window.dispatchEvent(u),!u.defaultPrevented)throw h}return o.then(h=>{for(const u of h||[])u.status==="rejected"&&l(u.reason);return t().catch(l)})},$d=typeof window<"u"&&"__TAURI__"in window;let lu=null;async function DC(){if($d&&!lu)try{lu=await NC(()=>import("./index-CAPIJpMW.js"),[])}catch{console.warn("Failed to load Tauri dialog plugin")}return lu}async function MC(){if(!$d)return null;const e=await DC();if(!e)return null;try{return await e.open({directory:!0,multiple:!1,title:"Select Project Folder"})}catch(t){return console.error("Failed to open folder dialog:",t),null}}function TC({project:e,onDelete:t}){const{t:i}=Jo();return S.jsx(bn,{to:`/projects/${e.project_id}`,className:"block bg-white rounded-xl border border-slate-200 p-5 hover:shadow-lg hover:border-primary-300 transition-all group",children:S.jsxs("div",{className:"flex items-start justify-between gap-3",children:[S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[S.jsx(Hd,{size:20,className:"text-primary-500"}),S.jsx("h3",{className:"font-semibold text-slate-800 truncate text-lg",children:e.name})]}),e.description&&S.jsx("p",{className:"text-sm text-slate-500 line-clamp-2 mb-3",children:e.description}),S.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-400",children:[S.jsxs("div",{className:"flex items-center gap-1",children:[S.jsx(eC,{size:12}),S.jsx("span",{className:"truncate max-w-[200px]",title:e.repo_path,children:e.repo_path.split(/[/\\]/).pop()})]}),S.jsxs("div",{className:"flex items-center gap-1",children:[S.jsx(Jx,{size:12}),S.jsx("span",{children:new Date(e.created_at).toLocaleDateString()})]})]})]}),S.jsx("button",{onClick:n=>{n.preventDefault(),n.stopPropagation(),t()},className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",title:i("common.delete"),children:S.jsx(zv,{size:16})})]})})}function OC(){const{t:e}=Jo(),t=Rn(),[i,n]=N.useState(!1),[o,l]=N.useState(""),[h,u]=N.useState(""),[p,d]=N.useState(""),{data:_,isLoading:g,error:y}=Wi({queryKey:["projects"],queryFn:vC,refetchInterval:1e4}),w=jo({mutationFn:({name:k,description:L,repo_path:W})=>SC({name:k,description:L,repo_path:W}),onSuccess:()=>{t.invalidateQueries({queryKey:["projects"]}),n(!1),l(""),u(""),d("")}}),x=jo({mutationFn:wC,onSuccess:()=>{t.invalidateQueries({queryKey:["projects"]})}}),C=async()=>{const k=await MC();if(k&&(d(k),!o)){const L=k.split(/[/\\]/).pop()||"";l(L)}};return S.jsxs("div",{className:"mx-auto max-w-4xl",children:[S.jsxs("div",{className:"flex items-center justify-between mb-8",children:[S.jsxs("div",{children:[S.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:e("projects.title")}),S.jsx("p",{className:"text-slate-500 mt-1",children:e("projects.subtitle")})]}),S.jsxs("button",{onClick:()=>n(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-primary-600 text-white rounded-xl hover:bg-primary-700 transition-colors shadow-sm",children:[S.jsx(Fv,{size:18}),e("projects.newProject")]})]}),i&&S.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:S.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md p-6",children:[S.jsx("h2",{className:"text-xl font-semibold mb-4",children:e("projects.newProject")}),S.jsxs("form",{onSubmit:k=>{k.preventDefault(),o.trim()&&p.trim()&&w.mutate({name:o.trim(),description:h.trim()||void 0,repo_path:p.trim()})},children:[S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:e("projects.name")}),S.jsx("input",{type:"text",value:o,onChange:k=>l(k.target.value),placeholder:e("projects.namePlaceholder"),className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500",autoFocus:!0,required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:e("projects.description")}),S.jsx("textarea",{value:h,onChange:k=>u(k.target.value),placeholder:e("projects.descriptionPlaceholder"),className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 resize-none",rows:2})]}),S.jsxs("div",{children:[S.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[S.jsx(Fl,{size:14,className:"inline mr-1.5"}),e("projects.repoPath")]}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("input",{type:"text",value:p,onChange:k=>d(k.target.value),placeholder:e("projects.repoPathPlaceholder"),className:"flex-1 px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0}),$d&&S.jsx("button",{type:"button",onClick:C,className:"px-4 py-3 bg-slate-100 text-slate-700 rounded-xl hover:bg-slate-200 transition-colors",title:e("projects.browse"),children:S.jsx(Fl,{size:18})})]})]})]}),S.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[S.jsx("button",{type:"button",onClick:()=>{n(!1),l(""),u(""),d("")},className:"px-4 py-2.5 text-slate-600 hover:bg-slate-100 rounded-xl transition-colors",children:e("common.cancel")}),S.jsxs("button",{type:"submit",disabled:w.isPending||!o.trim()||!p.trim(),className:"flex items-center gap-2 px-5 py-2.5 bg-primary-600 text-white rounded-xl hover:bg-primary-700 disabled:opacity-50 transition-colors",children:[w.isPending&&S.jsx(Ki,{size:18,className:"animate-spin"}),e("common.create")]})]})]})]})}),g?S.jsx("div",{className:"flex items-center justify-center py-16",children:S.jsx(Ki,{size:32,className:"animate-spin text-primary-600"})}):y?S.jsxs("div",{className:"text-center py-16 text-red-600",children:[e("common.error"),": ",y.message]}):(_==null?void 0:_.projects.length)===0?S.jsxs("div",{className:"text-center py-16",children:[S.jsx(Hd,{size:48,className:"mx-auto text-slate-300 mb-4"}),S.jsx("p",{className:"text-slate-500 mb-2",children:e("projects.noProjects")}),S.jsx("p",{className:"text-sm text-slate-400",children:e("projects.createFirst")})]}):S.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:_==null?void 0:_.projects.map(k=>S.jsx(TC,{project:k,onDelete:()=>x.mutate(k.project_id)},k.project_id))})]})}function BC({name:e,className:t}){const i=t||"w-4 h-4",n=e.toLowerCase();return n.includes("read")||n.includes("glob")||n.includes("grep")?S.jsx(kl,{className:i}):n.includes("write")||n.includes("edit")?S.jsx(oC,{className:i}):n.includes("bash")||n.includes("shell")?S.jsx(Ho,{className:i}):n.includes("search")?S.jsx(aC,{className:i}):S.jsx(fC,{className:i})}function IC({message:e}){return S.jsxs("div",{className:"flex gap-3 px-4 py-4",children:[S.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center shrink-0",children:S.jsx(dC,{size:16,className:"text-blue-600"})}),S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"You"}),S.jsx("div",{className:"text-slate-800 whitespace-pre-wrap",children:e.content})]})]})}function AC({message:e}){const t=e.isThinking||e.type==="thinking",i=e.executor==="codex"?"text-green-600":"text-purple-600",n=e.executor==="codex"?"bg-green-100":"bg-purple-100",o=e.executor==="codex"?"Codex":"Claude";return S.jsxs("div",{className:"flex gap-3 px-4 py-4 bg-slate-50",children:[S.jsx("div",{className:et("w-8 h-8 rounded-full flex items-center justify-center shrink-0",n),children:t?S.jsx(Xx,{size:16,className:i}):S.jsx(Gx,{size:16,className:i})}),S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[S.jsx("span",{className:"text-xs text-slate-400",children:o}),t&&S.jsxs("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:[S.jsx(Ki,{size:10,className:"animate-spin"}),"Thinking..."]})]}),S.jsx("div",{className:et("whitespace-pre-wrap",t?"text-slate-500 italic":"text-slate-800"),children:e.content||(t?"Processing...":"")})]})]})}function jC({message:e}){const[t,i]=N.useState(!1),n=e.toolName||"Unknown Tool",o=e.toolInput?JSON.stringify(e.toolInput,null,2):"",l=e.toolInput?Object.entries(e.toolInput).slice(0,2).map(([h,u])=>`${h}: ${typeof u=="string"?u.slice(0,30):JSON.stringify(u).slice(0,30)}`).join(", "):"";return S.jsx("div",{className:"px-4 py-2 ml-11",children:S.jsxs("div",{className:"border border-amber-200 bg-amber-50 rounded-lg overflow-hidden",children:[S.jsxs("button",{onClick:()=>i(!t),className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-amber-100 transition-colors",children:[S.jsx(BC,{name:n,className:"w-4 h-4 text-amber-600"}),S.jsx("span",{className:"font-medium text-sm text-amber-800",children:n}),S.jsx("span",{className:"text-xs text-amber-600 truncate flex-1 text-left font-mono",children:l&&l.length>50?l.slice(0,50)+"...":l}),t?S.jsx(jd,{size:14,className:"text-amber-600"}):S.jsx(jv,{size:14,className:"text-amber-600"})]}),t&&o&&S.jsx("div",{className:"px-3 pb-3 border-t border-amber-200",children:S.jsx("pre",{className:"mt-2 bg-white rounded p-2 text-xs font-mono text-slate-700 overflow-x-auto max-h-48 overflow-y-auto",children:o})})]})})}function FC({message:e}){const[t,i]=N.useState(!1),n=e.isError,o=e.content||e.toolOutput||"",l=o.length>80?o.slice(0,80)+"...":o;return S.jsx("div",{className:"px-4 py-2 ml-11",children:S.jsxs("div",{className:et("border rounded-lg overflow-hidden",n?"border-red-200 bg-red-50":"border-green-200 bg-green-50"),children:[S.jsxs("button",{onClick:()=>i(!t),className:et("w-full flex items-center gap-2 px-3 py-2 transition-colors",n?"hover:bg-red-100":"hover:bg-green-100"),children:[n?S.jsx(zd,{size:14,className:"text-red-500 shrink-0"}):S.jsx(Fd,{size:14,className:"text-green-500 shrink-0"}),S.jsx("span",{className:et("font-medium text-sm",n?"text-red-700":"text-green-700"),children:n?"Error":"Result"}),S.jsx("span",{className:"text-xs text-slate-600 truncate flex-1 text-left",children:l}),o.length>80&&(t?S.jsx(jd,{size:14,className:"text-slate-400"}):S.jsx(jv,{size:14,className:"text-slate-400"}))]}),t&&S.jsx("div",{className:et("px-3 pb-3 border-t",n?"border-red-200":"border-green-200"),children:S.jsx("pre",{className:"mt-2 bg-white rounded p-2 text-xs font-mono text-slate-700 overflow-x-auto max-h-64 overflow-y-auto whitespace-pre-wrap",children:o})})]})})}function zC({message:e}){const t=e.executor==="codex"?"text-green-600":"text-purple-600",i=e.executor==="codex"?"bg-green-50":"bg-purple-50",n=e.executor==="codex"?"border-green-200":"border-purple-200";return S.jsxs("div",{className:"flex gap-3 px-4 py-4",children:[S.jsx("div",{className:et("w-8 h-8 rounded-full flex items-center justify-center shrink-0",e.executor==="codex"?"bg-green-100":"bg-purple-100"),children:S.jsx(Fd,{size:16,className:t})}),S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsx("div",{className:"text-xs text-slate-400 mb-2",children:"Task Completed"}),S.jsx("div",{className:et("rounded-lg border p-3",i,n),children:S.jsx("div",{className:"text-slate-800 whitespace-pre-wrap",children:e.content})})]})]})}function HC({message:e}){const t=e.content.includes("Codex")||e.content.includes(""),i=e.content.includes("Claude")||e.content.includes("");return S.jsx("div",{className:"px-4 py-2",children:S.jsxs("div",{className:et("flex items-center justify-center gap-2 text-xs",t?"text-green-600":i?"text-purple-600":"text-slate-400"),children:[S.jsx("div",{className:et("h-px flex-1",t?"bg-green-200":i?"bg-purple-200":"bg-slate-200")}),S.jsx(Zx,{size:12}),S.jsx("span",{children:e.content}),S.jsx("div",{className:et("h-px flex-1",t?"bg-green-200":i?"bg-purple-200":"bg-slate-200")})]})})}function $C({message:e}){switch(e.type){case"user":return S.jsx(IC,{message:e});case"assistant":case"thinking":return S.jsx(AC,{message:e});case"tool_use":return S.jsx(jC,{message:e});case"tool_result":return S.jsx(FC,{message:e});case"result":return S.jsx(zC,{message:e});case"system":return S.jsx(HC,{message:e});default:return null}}function WC({log:e}){const t={debug:"text-slate-400",info:"text-blue-600",warn:"text-amber-600",error:"text-red-600"},i={debug:"bg-slate-100",info:"bg-blue-50",warn:"bg-amber-50",error:"bg-red-50"};return S.jsxs("div",{className:et("px-3 py-2 border-b border-slate-100 font-mono text-xs",i[e.level]||"bg-white"),children:[S.jsxs("div",{className:"flex items-start gap-2",children:[S.jsx("span",{className:"text-slate-400 shrink-0",children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}),S.jsx("span",{className:et("font-semibold uppercase shrink-0 w-12",t[e.level]||"text-slate-500"),children:e.level}),S.jsxs("span",{className:"text-purple-600 shrink-0",children:["[",e.source,"]"]}),S.jsx("span",{className:"text-slate-700 break-all flex-1",children:e.message})]}),e.metadata&&Object.keys(e.metadata).length>0&&S.jsx("div",{className:"mt-1 ml-[120px] text-slate-500",children:S.jsx("pre",{className:"text-[10px] bg-white/50 rounded p-1 overflow-x-auto",children:JSON.stringify(e.metadata,null,2)})})]})}function UC({current:e,total:t}){const i=t>0?Math.round(e/t*100):0;return S.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[S.jsx("div",{className:"w-24 h-1 bg-slate-200 rounded-full overflow-hidden",children:S.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:`${i}%`}})}),S.jsxs("span",{children:[e,"/",t]})]})}const nn=e=>`supervisor_run_${e}`,on=e=>`supervisor_goal_${e}`;function KC({projectId:e,repoPath:t}){const i=Rn(),[n,o]=N.useState("idle"),[l,h]=N.useState(null),[u,p]=N.useState(""),[d,_]=N.useState(null),[g,y]=N.useState([]),[w,x]=N.useState("chat"),[C,k]=N.useState(!0),[L,W]=N.useState("gpt-5.2"),[O,T]=N.useState(!1),[$,G]=N.useState([]),le=N.useRef(null),ue=N.useRef(null),ye=N.useRef(null),{data:ie}=Wi({queryKey:["copilotStatus"],queryFn:Kv,refetchInterval:1e4}),{data:se}=Wi({queryKey:["copilotModels"],queryFn:kC,enabled:(ie==null?void 0:ie.running)&&(ie==null?void 0:ie.healthy),staleTime:6e4}),{data:z}=Wi({queryKey:["settings"],queryFn:Wv}),j=jo({mutationFn:Uv,onSuccess:()=>{i.invalidateQueries({queryKey:["settings"]})}});N.useEffect(()=>{z!=null&&z.dag_model&&W(z.dag_model)},[z==null?void 0:z.dag_model]);const U=E=>{W(E),T(!1),j.mutate({dag_model:E})},V=((se==null?void 0:se.models)??[]).map(E=>E.id);N.useEffect(()=>{(async()=>{const M=localStorage.getItem(nn(e)),Q=localStorage.getItem(on(e));if(!M){k(!1);return}try{const he=await mC(M);if(he.status==="running"||he.status==="pending"){h(M),o("running"),Q&&G([{id:`user-restored-${Date.now()}`,type:"user",content:Q,timestamp:he.created_at}]);const{logs:_e}=await xC(M);console.log(`[Restore] Loaded ${_e.length} historical logs`);const pe=Q?[{id:`user-restored-${Date.now()}`,type:"user",content:Q,timestamp:he.created_at}]:[];_e.forEach(de=>{y(Ct=>[...Ct,de]);const ge=de.metadata,Ve=de.source==="claude"||de.source==="codex"?de.source:void 0;if(de.source==="supervisor")(de.message.includes("")||de.message.includes("")||de.message.includes(""))&&pe.push({id:`sys-${de.timestamp}-${Math.random().toString(36).slice(2,6)}`,type:"system",content:de.message,timestamp:de.timestamp});else if(de.source==="claude"||de.source==="codex"){const Ct=ge==null?void 0:ge.type;if(Ct==="assistant"){const Ot=(ge==null?void 0:ge.full_content)||de.message;Ot&&Ot.length>5&&pe.push({id:`asst-${de.timestamp}-${Math.random().toString(36).slice(2,6)}`,type:"assistant",content:Ot,timestamp:de.timestamp,executor:Ve})}else Ct==="tool_use"?pe.push({id:`tool-${(ge==null?void 0:ge.tool_use_id)||de.timestamp}`,type:"tool_use",content:de.message,timestamp:de.timestamp,toolName:ge==null?void 0:ge.tool_name,toolInput:ge==null?void 0:ge.tool_input,executor:Ve}):Ct==="tool_result"?pe.push({id:`result-${(ge==null?void 0:ge.tool_use_id)||de.timestamp}`,type:"tool_result",content:(ge==null?void 0:ge.full_content)||de.message,timestamp:de.timestamp,isError:ge==null?void 0:ge.is_error,executor:Ve}):Ct==="result"&&pe.push({id:`final-${de.timestamp}-${Math.random().toString(36).slice(2,6)}`,type:"result",content:(ge==null?void 0:ge.full_result)||de.message,timestamp:de.timestamp,executor:Ve})}}),G(pe);const Ee=await CC(M).catch(()=>null);Ee&&_(Ee)}else(he.status==="completed"||he.status==="failed")&&(localStorage.removeItem(nn(e)),localStorage.removeItem(on(e)))}catch(he){console.error("Failed to restore run:",he),localStorage.removeItem(nn(e)),localStorage.removeItem(on(e))}k(!1)})()},[e]),N.useEffect(()=>{var E,M;w==="chat"?(E=le.current)==null||E.scrollIntoView({behavior:"smooth"}):(M=ue.current)==null||M.scrollIntoView({behavior:"smooth"})},[$,g,w]);const K=N.useCallback(E=>{G(M=>M.some(Q=>Q.id===E.id)?M:[...M,E])},[]),te=N.useCallback((E,M)=>{o(E?"completed":"failed"),localStorage.removeItem(nn(e)),localStorage.removeItem(on(e)),K({id:`complete-${Date.now()}`,type:"system",content:M,timestamp:new Date().toISOString()})},[e,K]);N.useEffect(()=>l?bC(l,M=>{y(_e=>[..._e.slice(-499),M]);const Q=M.metadata,he=M.source==="claude"||M.source==="codex"?M.source:void 0;if(console.log("[SSE]",M.source,Q==null?void 0:Q.type,M.message.slice(0,80)),M.source==="supervisor"){if(M.message.includes(" Run completed")){te(!0,M.message);return}if(M.message.includes(" Run failed")||M.message.includes("Run failed")){te(!1,M.message);return}if(M.message.includes("Task started:")||M.message.includes("")){const _e=M.message.replace(/\s*Task started:\s*/i,"").trim();K({id:`sys-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,type:"system",content:`Starting: ${_e}`,timestamp:M.timestamp})}else if(M.message.includes("Task completed:")||M.message.includes("")){const _e=M.message.replace(/\s*Task completed:\s*/i,"").trim();K({id:`sys-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,type:"system",content:`Completed: ${_e}`,timestamp:M.timestamp})}else(M.message.includes("Task failed:")||M.message.includes(""))&&K({id:`sys-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,type:"system",content:M.message,timestamp:M.timestamp})}if(M.source==="claude"||M.source==="codex"){const _e=Q==null?void 0:Q.type;if(_e==="assistant"){const pe=(Q==null?void 0:Q.full_content)||M.message;pe&&pe.length>5&&K({id:`asst-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,type:"assistant",content:pe,timestamp:M.timestamp,executor:he})}else if(_e==="tool_use"){const pe=Q==null?void 0:Q.tool_name,Ee=Q==null?void 0:Q.tool_input,de=Q==null?void 0:Q.tool_use_id;K({id:`tool-${de||Date.now()}`,type:"tool_use",content:M.message,timestamp:M.timestamp,toolName:pe,toolInput:Ee,executor:he})}else if(_e==="tool_result"){const pe=Q==null?void 0:Q.tool_use_id,Ee=Q==null?void 0:Q.is_error,de=(Q==null?void 0:Q.full_content)||M.message;K({id:`result-${pe||Date.now()}`,type:"tool_result",content:de,timestamp:M.timestamp,isError:Ee,executor:he})}else if(_e==="result"){const pe=(Q==null?void 0:Q.full_result)||M.message;K({id:`final-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,type:"result",content:pe,timestamp:M.timestamp,executor:he})}}},M=>console.error("SSE error:",M)):void 0,[l,K,te]);const A=async()=>{const E=u.trim();if(E&&(p(""),K({id:`user-${Date.now()}`,type:"user",content:E,timestamp:new Date().toISOString()}),n!=="running")){o("running"),y([]),G(M=>M.filter(Q=>Q.type==="user")),_(null);try{const M=await gC({goal:E,repoPath:t,projectId:e});h(M.run_id),localStorage.setItem(nn(e),M.run_id),localStorage.setItem(on(e),E),K({id:`start-${Date.now()}`,type:"system",content:"Starting execution...",timestamp:new Date().toISOString()})}catch(M){o("failed"),K({id:`error-${Date.now()}`,type:"system",content:`Error: ${M instanceof Error?M.message:"Failed to start"}`,timestamp:new Date().toISOString()})}}},re=E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),A())},Z=()=>{o("idle"),h(null),localStorage.removeItem(nn(e)),localStorage.removeItem(on(e)),K({id:`stop-${Date.now()}`,type:"system",content:"Stopped by user",timestamp:new Date().toISOString()})};return C?S.jsxs("div",{className:"flex flex-col h-[calc(100vh-64px)] items-center justify-center bg-white",children:[S.jsx(Ki,{className:"animate-spin text-blue-500 mb-4",size:32}),S.jsx("p",{className:"text-sm text-slate-500",children:"Restoring session..."})]}):S.jsxs("div",{className:"flex flex-col h-[calc(100vh-64px)]",children:[S.jsxs("div",{className:"px-4 py-2 border-b border-slate-100 bg-white flex items-center justify-between",children:[S.jsx("div",{className:"flex-1",children:n==="running"&&(d==null?void 0:d.progress)&&S.jsx(UC,{current:d.progress.completed,total:d.progress.total})}),S.jsxs("div",{className:"flex bg-slate-100 rounded-lg p-0.5",children:[S.jsxs("button",{onClick:()=>x("chat"),className:et("flex items-center gap-1.5 px-3 py-1 rounded-md text-xs font-medium transition-colors",w==="chat"?"bg-white text-slate-800 shadow-sm":"text-slate-500 hover:text-slate-700"),children:[S.jsx(Fg,{size:12}),"Chat",$.length>0&&S.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-blue-100 text-blue-600 rounded-full text-[10px]",children:$.length})]}),S.jsxs("button",{onClick:()=>x("logs"),className:et("flex items-center gap-1.5 px-3 py-1 rounded-md text-xs font-medium transition-colors",w==="logs"?"bg-white text-slate-800 shadow-sm":"text-slate-500 hover:text-slate-700"),children:[S.jsx(sC,{size:12}),"Raw Logs",g.length>0&&S.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-slate-200 text-slate-600 rounded-full text-[10px]",children:g.length})]})]})]}),w==="chat"&&S.jsxs("div",{className:"flex-1 overflow-y-auto bg-white",children:[$.length===0&&S.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[S.jsx(Fg,{size:40,className:"mb-4 opacity-30"}),S.jsx("p",{className:"text-sm",children:"Enter a goal to start"})]}),S.jsx("div",{className:"divide-y divide-slate-100",children:$.map(E=>S.jsx($C,{message:E},E.id))}),n==="running"&&S.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 text-slate-500 bg-slate-50",children:[S.jsx(Ki,{size:14,className:"animate-spin"}),S.jsx("span",{className:"text-sm",children:"Processing..."})]}),S.jsx("div",{ref:le})]}),w==="logs"&&S.jsx("div",{className:"flex-1 overflow-y-auto bg-slate-900",children:g.length===0?S.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[S.jsx(Ho,{size:40,className:"mb-4 opacity-30"}),S.jsx("p",{className:"text-sm",children:"No logs yet. Start a task to see all messages."})]}):S.jsxs("div",{className:"divide-y divide-slate-800",children:[g.map((E,M)=>S.jsx(WC,{log:E},`${E.timestamp}-${M}`)),S.jsx("div",{ref:ue})]})}),S.jsx("div",{className:"border-t border-slate-200 bg-white p-4",children:S.jsxs("div",{className:"max-w-3xl mx-auto",children:[S.jsxs("div",{className:"relative mb-2",children:[S.jsxs("button",{onClick:()=>T(!O),disabled:n==="running",className:"flex items-center gap-1.5 px-2 py-1 text-xs text-slate-600 hover:bg-slate-100 rounded-md transition-colors disabled:opacity-50",children:[S.jsx("span",{className:"font-medium",children:L}),S.jsx(jd,{size:12})]}),O&&V.length>0&&S.jsx("div",{className:"absolute bottom-full left-0 mb-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 min-w-[180px] max-h-[300px] overflow-y-auto z-50",children:V.map(E=>S.jsx("button",{onClick:()=>U(E),className:et("w-full text-left px-3 py-1.5 text-xs hover:bg-slate-50 transition-colors",E===L?"bg-blue-50 text-blue-600":"text-slate-700"),children:E},E))})]}),S.jsxs("div",{className:"relative",children:[S.jsx("textarea",{ref:ye,value:u,onChange:E=>p(E.target.value),onKeyDown:re,placeholder:"Ask me to build, fix, or explain something...",className:"w-full resize-none border border-slate-200 rounded-xl px-4 py-3 pr-24 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent min-h-[52px] max-h-[200px]",rows:1,disabled:n==="running"}),S.jsx("div",{className:"absolute right-2 bottom-2 flex items-center gap-2",children:n==="running"?S.jsx("button",{onClick:Z,className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",title:"Stop",children:S.jsx(uC,{size:16})}):S.jsx("button",{onClick:A,disabled:!u.trim(),className:et("p-2 rounded-lg transition-colors",u.trim()?"bg-blue-500 text-white hover:bg-blue-600":"bg-slate-100 text-slate-400 cursor-not-allowed"),children:S.jsx(lC,{size:16})})})]})]})})]})}function VC(){const e=Rn(),{data:t,isLoading:i}=Wi({queryKey:["runs"],queryFn:pC,staleTime:3e4}),n=jo({mutationFn:_C,onSuccess:()=>{e.invalidateQueries({queryKey:["runs"]})}});if(i)return S.jsx("div",{className:"flex items-center justify-center py-12",children:S.jsx(Ki,{className:"animate-spin text-slate-400"})});const o=(t==null?void 0:t.runs)||[];return o.length===0?S.jsxs("div",{className:"text-center py-16 text-slate-400",children:[S.jsx(jg,{size:40,className:"mx-auto mb-4 opacity-30"}),S.jsx("p",{className:"text-sm",children:"No history yet"})]}):S.jsx("div",{className:"p-6 space-y-3 max-w-3xl mx-auto",children:o.map(l=>S.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4 group hover:border-slate-300 transition-colors",children:S.jsxs("div",{className:"flex items-start justify-between gap-4",children:[S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.status==="completed"&&S.jsx(Fd,{size:16,className:"text-green-500"}),l.status==="failed"&&S.jsx(zd,{size:16,className:"text-red-500"}),l.status==="running"&&S.jsx(Ki,{size:16,className:"text-blue-500 animate-spin"}),l.status==="pending"&&S.jsx(jg,{size:16,className:"text-yellow-500"}),S.jsx("span",{className:"text-xs text-slate-400",children:new Date(l.created_at).toLocaleString()})]}),S.jsx("p",{className:"text-sm text-slate-700 line-clamp-2",children:l.user_goal})]}),S.jsx("button",{onClick:()=>n.mutate(l.run_id),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:S.jsx(zv,{size:16})})]})},l.run_id))})}function qC(){const{projectId:e}=uw(),[t,i]=N.useState("chat"),{data:n,isLoading:o,error:l}=Wi({queryKey:["project",e],queryFn:()=>yC(e),enabled:!!e});return o?S.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:S.jsx(Ki,{className:"animate-spin text-blue-500",size:32})}):l||!n?S.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-50",children:[S.jsx(zd,{className:"text-red-400 mb-4",size:48}),S.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-2",children:"Project not found"}),S.jsx(bn,{to:"/",className:"text-blue-500 hover:underline text-sm",children:"Go back"})]}):S.jsxs("div",{className:"h-screen flex flex-col bg-slate-50",children:[S.jsx("header",{className:"bg-white border-b border-slate-200 shrink-0",children:S.jsxs("div",{className:"max-w-5xl mx-auto px-6 h-16 flex items-center gap-4",children:[S.jsx(bn,{to:"/",className:"p-2 hover:bg-slate-100 rounded-lg transition-colors -ml-2",children:S.jsx(Qx,{size:20,className:"text-slate-500"})}),S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsx("h1",{className:"font-semibold text-slate-800 truncate",children:n.name}),S.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-slate-400",children:[S.jsx(Fl,{size:12}),S.jsx("span",{className:"font-mono truncate",children:n.repo_path})]})]}),S.jsxs("div",{className:"flex bg-slate-100 rounded-lg p-1",children:[S.jsx("button",{onClick:()=>i("chat"),className:et("px-4 py-1.5 rounded-md text-sm font-medium transition-colors",t==="chat"?"bg-white text-slate-800 shadow-sm":"text-slate-500 hover:text-slate-700"),children:"Chat"}),S.jsx("button",{onClick:()=>i("history"),className:et("px-4 py-1.5 rounded-md text-sm font-medium transition-colors",t==="history"?"bg-white text-slate-800 shadow-sm":"text-slate-500 hover:text-slate-700"),children:"History"})]})]})}),S.jsx("main",{className:"flex-1 overflow-hidden",children:t==="chat"?S.jsx(KC,{projectId:e,repoPath:n.repo_path}):S.jsx(VC,{})})]})}/**
 * Copyright (c) 2014-2024 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * @license MIT
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 */var qv=Object.defineProperty,YC=Object.getOwnPropertyDescriptor,QC=(e,t)=>{for(var i in t)qv(e,i,{get:t[i],enumerable:!0})},tt=(e,t,i,n)=>{for(var o=n>1?void 0:n?YC(t,i):t,l=e.length-1,h;l>=0;l--)(h=e[l])&&(o=(n?h(t,i,o):h(o))||o);return n&&o&&qv(t,i,o),o},oe=(e,t)=>(i,n)=>t(i,n,e),$g="Terminal input",$u={get:()=>$g,set:e=>$g=e},Wg="Too much output to announce, navigate to rows manually to read",Wu={get:()=>Wg,set:e=>Wg=e};function GC(e){return e.replace(/\r?\n/g,"\r")}function XC(e,t){return t?"\x1B[200~"+e+"\x1B[201~":e}function JC(e,t){e.clipboardData&&e.clipboardData.setData("text/plain",t.selectionText),e.preventDefault()}function ZC(e,t,i,n){if(e.stopPropagation(),e.clipboardData){let o=e.clipboardData.getData("text/plain");Yv(o,t,i,n)}}function Yv(e,t,i,n){e=GC(e),e=XC(e,i.decPrivateModes.bracketedPasteMode&&n.rawOptions.ignoreBracketedPasteMode!==!0),i.triggerDataEvent(e,!0),t.value=""}function Qv(e,t,i){let n=i.getBoundingClientRect(),o=e.clientX-n.left-10,l=e.clientY-n.top-10;t.style.width="20px",t.style.height="20px",t.style.left=`${o}px`,t.style.top=`${l}px`,t.style.zIndex="1000",t.focus()}function Ug(e,t,i,n,o){Qv(e,t,i),o&&n.rightClickSelect(e),t.value=n.selectionText,t.select()}function jr(e){return e>65535?(e-=65536,String.fromCharCode((e>>10)+55296)+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)}function Gl(e,t=0,i=e.length){let n="";for(let o=t;o<i;++o){let l=e[o];l>65535?(l-=65536,n+=String.fromCharCode((l>>10)+55296)+String.fromCharCode(l%1024+56320)):n+=String.fromCharCode(l)}return n}var eb=class{constructor(){this._interim=0}clear(){this._interim=0}decode(e,t){let i=e.length;if(!i)return 0;let n=0,o=0;if(this._interim){let l=e.charCodeAt(o++);56320<=l&&l<=57343?t[n++]=(this._interim-55296)*1024+l-56320+65536:(t[n++]=this._interim,t[n++]=l),this._interim=0}for(let l=o;l<i;++l){let h=e.charCodeAt(l);if(55296<=h&&h<=56319){if(++l>=i)return this._interim=h,n;let u=e.charCodeAt(l);56320<=u&&u<=57343?t[n++]=(h-55296)*1024+u-56320+65536:(t[n++]=h,t[n++]=u);continue}h!==65279&&(t[n++]=h)}return n}},tb=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(e,t){let i=e.length;if(!i)return 0;let n=0,o,l,h,u,p=0,d=0;if(this.interim[0]){let y=!1,w=this.interim[0];w&=(w&224)===192?31:(w&240)===224?15:7;let x=0,C;for(;(C=this.interim[++x]&63)&&x<4;)w<<=6,w|=C;let k=(this.interim[0]&224)===192?2:(this.interim[0]&240)===224?3:4,L=k-x;for(;d<L;){if(d>=i)return 0;if(C=e[d++],(C&192)!==128){d--,y=!0;break}else this.interim[x++]=C,w<<=6,w|=C&63}y||(k===2?w<128?d--:t[n++]=w:k===3?w<2048||w>=55296&&w<=57343||w===65279||(t[n++]=w):w<65536||w>1114111||(t[n++]=w)),this.interim.fill(0)}let _=i-4,g=d;for(;g<i;){for(;g<_&&!((o=e[g])&128)&&!((l=e[g+1])&128)&&!((h=e[g+2])&128)&&!((u=e[g+3])&128);)t[n++]=o,t[n++]=l,t[n++]=h,t[n++]=u,g+=4;if(o=e[g++],o<128)t[n++]=o;else if((o&224)===192){if(g>=i)return this.interim[0]=o,n;if(l=e[g++],(l&192)!==128){g--;continue}if(p=(o&31)<<6|l&63,p<128){g--;continue}t[n++]=p}else if((o&240)===224){if(g>=i)return this.interim[0]=o,n;if(l=e[g++],(l&192)!==128){g--;continue}if(g>=i)return this.interim[0]=o,this.interim[1]=l,n;if(h=e[g++],(h&192)!==128){g--;continue}if(p=(o&15)<<12|(l&63)<<6|h&63,p<2048||p>=55296&&p<=57343||p===65279)continue;t[n++]=p}else if((o&248)===240){if(g>=i)return this.interim[0]=o,n;if(l=e[g++],(l&192)!==128){g--;continue}if(g>=i)return this.interim[0]=o,this.interim[1]=l,n;if(h=e[g++],(h&192)!==128){g--;continue}if(g>=i)return this.interim[0]=o,this.interim[1]=l,this.interim[2]=h,n;if(u=e[g++],(u&192)!==128){g--;continue}if(p=(o&7)<<18|(l&63)<<12|(h&63)<<6|u&63,p<65536||p>1114111)continue;t[n++]=p}}return n}},Gv="",Yr=" ",Zo=class Xv{constructor(){this.fg=0,this.bg=0,this.extended=new zl}static toColorRGB(t){return[t>>>16&255,t>>>8&255,t&255]}static fromColorRGB(t){return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255}clone(){let t=new Xv;return t.fg=this.fg,t.bg=this.bg,t.extended=this.extended.clone(),t}isInverse(){return this.fg&67108864}isBold(){return this.fg&134217728}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:this.fg&268435456}isBlink(){return this.fg&536870912}isInvisible(){return this.fg&1073741824}isItalic(){return this.bg&67108864}isDim(){return this.bg&134217728}isStrikethrough(){return this.fg&2147483648}isProtected(){return this.bg&536870912}isOverline(){return this.bg&1073741824}getFgColorMode(){return this.fg&50331648}getBgColorMode(){return this.bg&50331648}isFgRGB(){return(this.fg&50331648)===50331648}isBgRGB(){return(this.bg&50331648)===50331648}isFgPalette(){return(this.fg&50331648)===16777216||(this.fg&50331648)===33554432}isBgPalette(){return(this.bg&50331648)===16777216||(this.bg&50331648)===33554432}isFgDefault(){return(this.fg&50331648)===0}isBgDefault(){return(this.bg&50331648)===0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(this.fg&50331648){case 16777216:case 33554432:return this.fg&255;case 50331648:return this.fg&16777215;default:return-1}}getBgColor(){switch(this.bg&50331648){case 16777216:case 33554432:return this.bg&255;case 50331648:return this.bg&16777215;default:return-1}}hasExtendedAttrs(){return this.bg&268435456}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(this.bg&268435456&&~this.extended.underlineColor)switch(this.extended.underlineColor&50331648){case 16777216:case 33554432:return this.extended.underlineColor&255;case 50331648:return this.extended.underlineColor&16777215;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return this.bg&268435456&&~this.extended.underlineColor?this.extended.underlineColor&50331648:this.getFgColorMode()}isUnderlineColorRGB(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===50331648:this.isFgRGB()}isUnderlineColorPalette(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===16777216||(this.extended.underlineColor&50331648)===33554432:this.isFgPalette()}isUnderlineColorDefault(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===0:this.isFgDefault()}getUnderlineStyle(){return this.fg&268435456?this.bg&268435456?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}},zl=class Jv{constructor(t=0,i=0){this._ext=0,this._urlId=0,this._ext=t,this._urlId=i}get ext(){return this._urlId?this._ext&-469762049|this.underlineStyle<<26:this._ext}set ext(t){this._ext=t}get underlineStyle(){return this._urlId?5:(this._ext&469762048)>>26}set underlineStyle(t){this._ext&=-469762049,this._ext|=t<<26&469762048}get underlineColor(){return this._ext&67108863}set underlineColor(t){this._ext&=-67108864,this._ext|=t&67108863}get urlId(){return this._urlId}set urlId(t){this._urlId=t}get underlineVariantOffset(){let t=(this._ext&3758096384)>>29;return t<0?t^4294967288:t}set underlineVariantOffset(t){this._ext&=536870911,this._ext|=t<<29&3758096384}clone(){return new Jv(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}},_i=class Zv extends Zo{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new zl,this.combinedData=""}static fromCharData(t){let i=new Zv;return i.setFromCharData(t),i}isCombined(){return this.content&2097152}getWidth(){return this.content>>22}getChars(){return this.content&2097152?this.combinedData:this.content&2097151?jr(this.content&2097151):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):this.content&2097151}setFromCharData(t){this.fg=t[0],this.bg=0;let i=!1;if(t[1].length>2)i=!0;else if(t[1].length===2){let n=t[1].charCodeAt(0);if(55296<=n&&n<=56319){let o=t[1].charCodeAt(1);56320<=o&&o<=57343?this.content=(n-55296)*1024+o-56320+65536|t[2]<<22:i=!0}else i=!0}else this.content=t[1].charCodeAt(0)|t[2]<<22;i&&(this.combinedData=t[1],this.content=2097152|t[2]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},Kg="di$target",Uu="di$dependencies",hu=new Map;function ib(e){return e[Uu]||[]}function xt(e){if(hu.has(e))return hu.get(e);let t=function(i,n,o){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");rb(t,i,o)};return t._id=e,hu.set(e,t),t}function rb(e,t,i){t[Kg]===t?t[Uu].push({id:e,index:i}):(t[Uu]=[{id:e,index:i}],t[Kg]=t)}var $t=xt("BufferService"),e0=xt("CoreMouseService"),Ds=xt("CoreService"),sb=xt("CharsetService"),Wd=xt("InstantiationService"),t0=xt("LogService"),Wt=xt("OptionsService"),i0=xt("OscLinkService"),nb=xt("UnicodeService"),ea=xt("DecorationService"),Ku=class{constructor(e,t,i){this._bufferService=e,this._optionsService=t,this._oscLinkService=i}provideLinks(e,t){var _;let i=this._bufferService.buffer.lines.get(e-1);if(!i){t(void 0);return}let n=[],o=this._optionsService.rawOptions.linkHandler,l=new _i,h=i.getTrimmedLength(),u=-1,p=-1,d=!1;for(let g=0;g<h;g++)if(!(p===-1&&!i.hasContent(g))){if(i.loadCell(g,l),l.hasExtendedAttrs()&&l.extended.urlId)if(p===-1){p=g,u=l.extended.urlId;continue}else d=l.extended.urlId!==u;else p!==-1&&(d=!0);if(d||p!==-1&&g===h-1){let y=(_=this._oscLinkService.getLinkData(u))==null?void 0:_.uri;if(y){let w={start:{x:p+1,y:e},end:{x:g+(!d&&g===h-1?1:0),y:e}},x=!1;if(!(o!=null&&o.allowNonHttpProtocols))try{let C=new URL(y);["http:","https:"].includes(C.protocol)||(x=!0)}catch{x=!0}x||n.push({text:y,range:w,activate:(C,k)=>o?o.activate(C,k,w):ob(C,k),hover:(C,k)=>{var L;return(L=o==null?void 0:o.hover)==null?void 0:L.call(o,C,k,w)},leave:(C,k)=>{var L;return(L=o==null?void 0:o.leave)==null?void 0:L.call(o,C,k,w)}})}d=!1,l.hasExtendedAttrs()&&l.extended.urlId?(p=g,u=l.extended.urlId):(p=-1,u=-1)}}t(n)}};Ku=tt([oe(0,$t),oe(1,Wt),oe(2,i0)],Ku);function ob(e,t){if(confirm(`Do you want to navigate to ${t}?

WARNING: This link could potentially be dangerous`)){let i=window.open();if(i){try{i.opener=null}catch{}i.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}}var Xl=xt("CharSizeService"),dr=xt("CoreBrowserService"),Ud=xt("MouseService"),fr=xt("RenderService"),ab=xt("SelectionService"),r0=xt("CharacterJoinerService"),Dn=xt("ThemeService"),s0=xt("LinkProviderService"),lb=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?Vg.isErrorNoTelemetry(e)?new Vg(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},hb=new lb;function El(e){cb(e)||hb.onUnexpectedError(e)}var Vu="Canceled";function cb(e){return e instanceof ub?!0:e instanceof Error&&e.name===Vu&&e.message===Vu}var ub=class extends Error{constructor(){super(Vu),this.name=this.message}};function db(e){return new Error(`Illegal argument: ${e}`)}var Vg=class qu extends Error{constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof qu)return t;let i=new qu;return i.message=t.message,i.stack=t.stack,i}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}},Yu=class n0 extends Error{constructor(t){super(t||"An unexpected bug occurred."),Object.setPrototypeOf(this,n0.prototype)}};function ri(e,t=0){return e[e.length-(1+t)]}var fb;(e=>{function t(l){return l<0}e.isLessThan=t;function i(l){return l<=0}e.isLessThanOrEqual=i;function n(l){return l>0}e.isGreaterThan=n;function o(l){return l===0}e.isNeitherLessOrGreaterThan=o,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(fb||(fb={}));function pb(e,t){let i=this,n=!1,o;return function(){return n||(n=!0,t||(o=e.apply(i,arguments))),o}}var o0;(e=>{function t(T){return T&&typeof T=="object"&&typeof T[Symbol.iterator]=="function"}e.is=t;let i=Object.freeze([]);function n(){return i}e.empty=n;function*o(T){yield T}e.single=o;function l(T){return t(T)?T:o(T)}e.wrap=l;function h(T){return T||i}e.from=h;function*u(T){for(let $=T.length-1;$>=0;$--)yield T[$]}e.reverse=u;function p(T){return!T||T[Symbol.iterator]().next().done===!0}e.isEmpty=p;function d(T){return T[Symbol.iterator]().next().value}e.first=d;function _(T,$){let G=0;for(let le of T)if($(le,G++))return!0;return!1}e.some=_;function g(T,$){for(let G of T)if($(G))return G}e.find=g;function*y(T,$){for(let G of T)$(G)&&(yield G)}e.filter=y;function*w(T,$){let G=0;for(let le of T)yield $(le,G++)}e.map=w;function*x(T,$){let G=0;for(let le of T)yield*$(le,G++)}e.flatMap=x;function*C(...T){for(let $ of T)yield*$}e.concat=C;function k(T,$,G){let le=G;for(let ue of T)le=$(le,ue);return le}e.reduce=k;function*L(T,$,G=T.length){for($<0&&($+=T.length),G<0?G+=T.length:G>T.length&&(G=T.length);$<G;$++)yield T[$]}e.slice=L;function W(T,$=Number.POSITIVE_INFINITY){let G=[];if($===0)return[G,T];let le=T[Symbol.iterator]();for(let ue=0;ue<$;ue++){let ye=le.next();if(ye.done)return[G,e.empty()];G.push(ye.value)}return[G,{[Symbol.iterator](){return le}}]}e.consume=W;async function O(T){let $=[];for await(let G of T)$.push(G);return Promise.resolve($)}e.asyncToArray=O})(o0||(o0={}));function Ls(e){if(o0.is(e)){let t=[];for(let i of e)if(i)try{i.dispose()}catch(n){t.push(n)}if(t.length===1)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function mb(...e){return Ke(()=>Ls(e))}function Ke(e){return{dispose:pb(()=>{e()})}}var a0=class l0{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{Ls(this._toDispose)}finally{this._toDispose.clear()}}add(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?l0.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(t),t}delete(t){if(t){if(t===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(t),t.dispose()}}deleteAndLeak(t){t&&this._toDispose.has(t)&&(this._toDispose.delete(t),void 0)}};a0.DISABLE_DISPOSED_WARNING=!1;var Gr=a0,Le=class{constructor(){this._store=new Gr,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};Le.None=Object.freeze({dispose(){}});var kn=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)==null||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)==null||e.dispose(),this._value=void 0}clearAndLeak(){let e=this._value;return this._value=void 0,e}},ar=typeof window=="object"?window:globalThis,Qu=class Gu{constructor(t){this.element=t,this.next=Gu.Undefined,this.prev=Gu.Undefined}};Qu.Undefined=new Qu(void 0);var Qe=Qu,qg=class{constructor(){this._first=Qe.Undefined,this._last=Qe.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Qe.Undefined}clear(){let e=this._first;for(;e!==Qe.Undefined;){let t=e.next;e.prev=Qe.Undefined,e.next=Qe.Undefined,e=t}this._first=Qe.Undefined,this._last=Qe.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){let i=new Qe(e);if(this._first===Qe.Undefined)this._first=i,this._last=i;else if(t){let o=this._last;this._last=i,i.prev=o,o.next=i}else{let o=this._first;this._first=i,i.next=o,o.prev=i}this._size+=1;let n=!1;return()=>{n||(n=!0,this._remove(i))}}shift(){if(this._first!==Qe.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Qe.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Qe.Undefined&&e.next!==Qe.Undefined){let t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Qe.Undefined&&e.next===Qe.Undefined?(this._first=Qe.Undefined,this._last=Qe.Undefined):e.next===Qe.Undefined?(this._last=this._last.prev,this._last.next=Qe.Undefined):e.prev===Qe.Undefined&&(this._first=this._first.next,this._first.prev=Qe.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Qe.Undefined;)yield e.element,e=e.next}},gb=globalThis.performance&&typeof globalThis.performance.now=="function",_b=class h0{static create(t){return new h0(t)}constructor(t){this._now=gb&&t===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}},Rt;(e=>{e.None=()=>Le.None;function t(z,j){return g(z,()=>{},0,void 0,!0,void 0,j)}e.defer=t;function i(z){return(j,U=null,V)=>{let K=!1,te;return te=z(A=>{if(!K)return te?te.dispose():K=!0,j.call(U,A)},null,V),K&&te.dispose(),te}}e.once=i;function n(z,j,U){return d((V,K=null,te)=>z(A=>V.call(K,j(A)),null,te),U)}e.map=n;function o(z,j,U){return d((V,K=null,te)=>z(A=>{j(A),V.call(K,A)},null,te),U)}e.forEach=o;function l(z,j,U){return d((V,K=null,te)=>z(A=>j(A)&&V.call(K,A),null,te),U)}e.filter=l;function h(z){return z}e.signal=h;function u(...z){return(j,U=null,V)=>{let K=mb(...z.map(te=>te(A=>j.call(U,A))));return _(K,V)}}e.any=u;function p(z,j,U,V){let K=U;return n(z,te=>(K=j(K,te),K),V)}e.reduce=p;function d(z,j){let U,V={onWillAddFirstListener(){U=z(K.fire,K)},onDidRemoveLastListener(){U==null||U.dispose()}},K=new ee(V);return j==null||j.add(K),K.event}function _(z,j){return j instanceof Array?j.push(z):j&&j.add(z),z}function g(z,j,U=100,V=!1,K=!1,te,A){let re,Z,E,M=0,Q,he={leakWarningThreshold:te,onWillAddFirstListener(){re=z(pe=>{M++,Z=j(Z,pe),V&&!E&&(_e.fire(Z),Z=void 0),Q=()=>{let Ee=Z;Z=void 0,E=void 0,(!V||M>1)&&_e.fire(Ee),M=0},typeof U=="number"?(clearTimeout(E),E=setTimeout(Q,U)):E===void 0&&(E=0,queueMicrotask(Q))})},onWillRemoveListener(){K&&M>0&&(Q==null||Q())},onDidRemoveLastListener(){Q=void 0,re.dispose()}},_e=new ee(he);return A==null||A.add(_e),_e.event}e.debounce=g;function y(z,j=0,U){return e.debounce(z,(V,K)=>V?(V.push(K),V):[K],j,void 0,!0,void 0,U)}e.accumulate=y;function w(z,j=(V,K)=>V===K,U){let V=!0,K;return l(z,te=>{let A=V||!j(te,K);return V=!1,K=te,A},U)}e.latch=w;function x(z,j,U){return[e.filter(z,j,U),e.filter(z,V=>!j(V),U)]}e.split=x;function C(z,j=!1,U=[],V){let K=U.slice(),te=z(Z=>{K?K.push(Z):re.fire(Z)});V&&V.add(te);let A=()=>{K==null||K.forEach(Z=>re.fire(Z)),K=null},re=new ee({onWillAddFirstListener(){te||(te=z(Z=>re.fire(Z)),V&&V.add(te))},onDidAddFirstListener(){K&&(j?setTimeout(A):A())},onDidRemoveLastListener(){te&&te.dispose(),te=null}});return V&&V.add(re),re.event}e.buffer=C;function k(z,j){return(U,V,K)=>{let te=j(new W);return z(function(A){let re=te.evaluate(A);re!==L&&U.call(V,re)},void 0,K)}}e.chain=k;let L=Symbol("HaltChainable");class W{constructor(){this.steps=[]}map(j){return this.steps.push(j),this}forEach(j){return this.steps.push(U=>(j(U),U)),this}filter(j){return this.steps.push(U=>j(U)?U:L),this}reduce(j,U){let V=U;return this.steps.push(K=>(V=j(V,K),V)),this}latch(j=(U,V)=>U===V){let U=!0,V;return this.steps.push(K=>{let te=U||!j(K,V);return U=!1,V=K,te?K:L}),this}evaluate(j){for(let U of this.steps)if(j=U(j),j===L)break;return j}}function O(z,j,U=V=>V){let V=(...re)=>A.fire(U(...re)),K=()=>z.on(j,V),te=()=>z.removeListener(j,V),A=new ee({onWillAddFirstListener:K,onDidRemoveLastListener:te});return A.event}e.fromNodeEventEmitter=O;function T(z,j,U=V=>V){let V=(...re)=>A.fire(U(...re)),K=()=>z.addEventListener(j,V),te=()=>z.removeEventListener(j,V),A=new ee({onWillAddFirstListener:K,onDidRemoveLastListener:te});return A.event}e.fromDOMEventEmitter=T;function $(z){return new Promise(j=>i(z)(j))}e.toPromise=$;function G(z){let j=new ee;return z.then(U=>{j.fire(U)},()=>{j.fire(void 0)}).finally(()=>{j.dispose()}),j.event}e.fromPromise=G;function le(z,j){return z(U=>j.fire(U))}e.forward=le;function ue(z,j,U){return j(U),z(V=>j(V))}e.runAndSubscribe=ue;class ye{constructor(j,U){this._observable=j,this._counter=0,this._hasChanged=!1;let V={onWillAddFirstListener:()=>{j.addObserver(this)},onDidRemoveLastListener:()=>{j.removeObserver(this)}};this.emitter=new ee(V),U&&U.add(this.emitter)}beginUpdate(j){this._counter++}handlePossibleChange(j){}handleChange(j,U){this._hasChanged=!0}endUpdate(j){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function ie(z,j){return new ye(z,j).emitter.event}e.fromObservable=ie;function se(z){return(j,U,V)=>{let K=0,te=!1,A={beginUpdate(){K++},endUpdate(){K--,K===0&&(z.reportChanges(),te&&(te=!1,j.call(U)))},handlePossibleChange(){},handleChange(){te=!0}};z.addObserver(A),z.reportChanges();let re={dispose(){z.removeObserver(A)}};return V instanceof Gr?V.add(re):Array.isArray(V)&&V.push(re),re}}e.fromObservableLight=se})(Rt||(Rt={}));var Xu=class Ju{constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${t}_${Ju._idPool++}`,Ju.all.add(this)}start(t){this._stopWatch=new _b,this.listenerCount=t}stop(){if(this._stopWatch){let t=this._stopWatch.elapsed();this.durations.push(t),this.elapsedOverall+=t,this.invocationCount+=1,this._stopWatch=void 0}}};Xu.all=new Set,Xu._idPool=0;var vb=Xu,yb=-1,c0=class u0{constructor(t,i,n=(u0._idPool++).toString(16).padStart(3,"0")){this._errorHandler=t,this.threshold=i,this.name=n,this._warnCountdown=0}dispose(){var t;(t=this._stacks)==null||t.clear()}check(t,i){let n=this.threshold;if(n<=0||i<n)return;this._stacks||(this._stacks=new Map);let o=this._stacks.get(t.value)||0;if(this._stacks.set(t.value,o+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let[l,h]=this.getMostFrequentStack(),u=`[${this.name}] potential listener LEAK detected, having ${i} listeners already. MOST frequent listener (${h}):`;console.warn(u),console.warn(l);let p=new xb(u,l);this._errorHandler(p)}return()=>{let l=this._stacks.get(t.value)||0;this._stacks.set(t.value,l-1)}}getMostFrequentStack(){if(!this._stacks)return;let t,i=0;for(let[n,o]of this._stacks)(!t||i<o)&&(t=[n,o],i=o);return t}};c0._idPool=1;var Sb=c0,wb=class d0{constructor(t){this.value=t}static create(){let t=new Error;return new d0(t.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},xb=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},Cb=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},bb=0,cu=class{constructor(e){this.value=e,this.id=bb++}},kb=2,Eb,ee=class{constructor(t){var i,n,o,l;this._size=0,this._options=t,this._leakageMon=(i=this._options)!=null&&i.leakWarningThreshold?new Sb((t==null?void 0:t.onListenerError)??El,((n=this._options)==null?void 0:n.leakWarningThreshold)??yb):void 0,this._perfMon=(o=this._options)!=null&&o._profName?new vb(this._options._profName):void 0,this._deliveryQueue=(l=this._options)==null?void 0:l.deliveryQueue}dispose(){var t,i,n,o;this._disposed||(this._disposed=!0,((t=this._deliveryQueue)==null?void 0:t.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),(n=(i=this._options)==null?void 0:i.onDidRemoveLastListener)==null||n.call(i),(o=this._leakageMon)==null||o.dispose())}get event(){return this._event??(this._event=(t,i,n)=>{var u,p,d,_,g;if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let y=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(y);let w=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],x=new Cb(`${y}. HINT: Stack shows most frequent listener (${w[1]}-times)`,w[0]);return(((u=this._options)==null?void 0:u.onListenerError)||El)(x),Le.None}if(this._disposed)return Le.None;i&&(t=t.bind(i));let o=new cu(t),l;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(o.stack=wb.create(),l=this._leakageMon.check(o.stack,this._size+1)),this._listeners?this._listeners instanceof cu?(this._deliveryQueue??(this._deliveryQueue=new Rb),this._listeners=[this._listeners,o]):this._listeners.push(o):((d=(p=this._options)==null?void 0:p.onWillAddFirstListener)==null||d.call(p,this),this._listeners=o,(g=(_=this._options)==null?void 0:_.onDidAddFirstListener)==null||g.call(_,this)),this._size++;let h=Ke(()=>{l==null||l(),this._removeListener(o)});return n instanceof Gr?n.add(h):Array.isArray(n)&&n.push(h),h}),this._event}_removeListener(t){var l,h,u,p;if((h=(l=this._options)==null?void 0:l.onWillRemoveListener)==null||h.call(l,this),!this._listeners)return;if(this._size===1){this._listeners=void 0,(p=(u=this._options)==null?void 0:u.onDidRemoveLastListener)==null||p.call(u,this),this._size=0;return}let i=this._listeners,n=i.indexOf(t);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,i[n]=void 0;let o=this._deliveryQueue.current===this;if(this._size*kb<=i.length){let d=0;for(let _=0;_<i.length;_++)i[_]?i[d++]=i[_]:o&&(this._deliveryQueue.end--,d<this._deliveryQueue.i&&this._deliveryQueue.i--);i.length=d}}_deliver(t,i){var o;if(!t)return;let n=((o=this._options)==null?void 0:o.onListenerError)||El;if(!n){t.value(i);return}try{t.value(i)}catch(l){n(l)}}_deliverQueue(t){let i=t.current._listeners;for(;t.i<t.end;)this._deliver(i[t.i++],t.value);t.reset()}fire(t){var i,n,o,l;if((i=this._deliveryQueue)!=null&&i.current&&(this._deliverQueue(this._deliveryQueue),(n=this._perfMon)==null||n.stop()),(o=this._perfMon)==null||o.start(this._size),this._listeners)if(this._listeners instanceof cu)this._deliver(this._listeners,t);else{let h=this._deliveryQueue;h.enqueue(this,t,this._listeners.length),this._deliverQueue(h)}(l=this._perfMon)==null||l.stop()}hasListeners(){return this._size>0}},Rb=class{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},Zu=class{constructor(){this.mapWindowIdToZoomLevel=new Map,this._onDidChangeZoomLevel=new ee,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this.mapWindowIdToZoomFactor=new Map,this._onDidChangeFullscreen=new ee,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event,this.mapWindowIdToFullScreen=new Map}getZoomLevel(t){return this.mapWindowIdToZoomLevel.get(this.getWindowId(t))??0}setZoomLevel(t,i){if(this.getZoomLevel(i)===t)return;let n=this.getWindowId(i);this.mapWindowIdToZoomLevel.set(n,t),this._onDidChangeZoomLevel.fire(n)}getZoomFactor(t){return this.mapWindowIdToZoomFactor.get(this.getWindowId(t))??1}setZoomFactor(t,i){this.mapWindowIdToZoomFactor.set(this.getWindowId(i),t)}setFullscreen(t,i){if(this.isFullscreen(i)===t)return;let n=this.getWindowId(i);this.mapWindowIdToFullScreen.set(n,t),this._onDidChangeFullscreen.fire(n)}isFullscreen(t){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(t))}getWindowId(t){return t.vscodeWindowId}};Zu.INSTANCE=new Zu;var Kd=Zu;function Pb(e,t,i){typeof t=="string"&&(t=e.matchMedia(t)),t.addEventListener("change",i)}Kd.INSTANCE.onDidChangeZoomLevel;function Lb(e){return Kd.INSTANCE.getZoomFactor(e)}Kd.INSTANCE.onDidChangeFullscreen;var Mn=typeof navigator=="object"?navigator.userAgent:"",ed=Mn.indexOf("Firefox")>=0,Nb=Mn.indexOf("AppleWebKit")>=0,Vd=Mn.indexOf("Chrome")>=0,Db=!Vd&&Mn.indexOf("Safari")>=0;Mn.indexOf("Electron/")>=0;Mn.indexOf("Android")>=0;var uu=!1;if(typeof ar.matchMedia=="function"){let e=ar.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),t=ar.matchMedia("(display-mode: fullscreen)");uu=e.matches,Pb(ar,e,({matches:i})=>{uu&&t.matches||(uu=i)})}var un="en",td=!1,id=!1,Rl=!1,f0=!1,gl,Pl=un,Yg=un,Mb,Ei,ks=globalThis,Et,X_;typeof ks.vscode<"u"&&typeof ks.vscode.process<"u"?Et=ks.vscode.process:typeof process<"u"&&typeof((X_=process==null?void 0:process.versions)==null?void 0:X_.node)=="string"&&(Et=process);var J_,Tb=typeof((J_=Et==null?void 0:Et.versions)==null?void 0:J_.electron)=="string",Ob=Tb&&(Et==null?void 0:Et.type)==="renderer",Z_;if(typeof Et=="object"){td=Et.platform==="win32",id=Et.platform==="darwin",Rl=Et.platform==="linux",Rl&&Et.env.SNAP&&Et.env.SNAP_REVISION,Et.env.CI||Et.env.BUILD_ARTIFACTSTAGINGDIRECTORY,gl=un,Pl=un;let e=Et.env.VSCODE_NLS_CONFIG;if(e)try{let t=JSON.parse(e);gl=t.userLocale,Yg=t.osLocale,Pl=t.resolvedLanguage||un,Mb=(Z_=t.languagePack)==null?void 0:Z_.translationsConfigFile}catch{}f0=!0}else typeof navigator=="object"&&!Ob?(Ei=navigator.userAgent,td=Ei.indexOf("Windows")>=0,id=Ei.indexOf("Macintosh")>=0,(Ei.indexOf("Macintosh")>=0||Ei.indexOf("iPad")>=0||Ei.indexOf("iPhone")>=0)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Rl=Ei.indexOf("Linux")>=0,(Ei==null?void 0:Ei.indexOf("Mobi"))>=0,Pl=globalThis._VSCODE_NLS_LANGUAGE||un,gl=navigator.language.toLowerCase(),Yg=gl):console.error("Unable to resolve platform.");var p0=td,Ui=id,Bb=Rl,Qg=f0,Vi=Ei,Tr=Pl,Ib;(e=>{function t(){return Tr}e.value=t;function i(){return Tr.length===2?Tr==="en":Tr.length>=3?Tr[0]==="e"&&Tr[1]==="n"&&Tr[2]==="-":!1}e.isDefaultVariant=i;function n(){return Tr==="en"}e.isDefault=n})(Ib||(Ib={}));var Ab=typeof ks.postMessage=="function"&&!ks.importScripts;(()=>{if(Ab){let e=[];ks.addEventListener("message",i=>{if(i.data&&i.data.vscodeScheduleAsyncWork)for(let n=0,o=e.length;n<o;n++){let l=e[n];if(l.id===i.data.vscodeScheduleAsyncWork){e.splice(n,1),l.callback();return}}});let t=0;return i=>{let n=++t;e.push({id:n,callback:i}),ks.postMessage({vscodeScheduleAsyncWork:n},"*")}}return e=>setTimeout(e)})();var jb=!!(Vi&&Vi.indexOf("Chrome")>=0);Vi&&Vi.indexOf("Firefox")>=0;!jb&&Vi&&Vi.indexOf("Safari")>=0;Vi&&Vi.indexOf("Edg/")>=0;Vi&&Vi.indexOf("Android")>=0;var an=typeof navigator=="object"?navigator:{};Qg||document.queryCommandSupported&&document.queryCommandSupported("copy")||an&&an.clipboard&&an.clipboard.writeText,Qg||an&&an.clipboard&&an.clipboard.readText;var qd=class{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}},du=new qd,Gg=new qd,Xg=new qd,Fb=new Array(230),m0;(e=>{function t(u){return du.keyCodeToStr(u)}e.toString=t;function i(u){return du.strToKeyCode(u)}e.fromString=i;function n(u){return Gg.keyCodeToStr(u)}e.toUserSettingsUS=n;function o(u){return Xg.keyCodeToStr(u)}e.toUserSettingsGeneral=o;function l(u){return Gg.strToKeyCode(u)||Xg.strToKeyCode(u)}e.fromUserSettings=l;function h(u){if(u>=98&&u<=113)return null;switch(u){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return du.keyCodeToStr(u)}e.toElectronAccelerator=h})(m0||(m0={}));var zb=class g0{constructor(t,i,n,o,l){this.ctrlKey=t,this.shiftKey=i,this.altKey=n,this.metaKey=o,this.keyCode=l}equals(t){return t instanceof g0&&this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode}getHashCode(){let t=this.ctrlKey?"1":"0",i=this.shiftKey?"1":"0",n=this.altKey?"1":"0",o=this.metaKey?"1":"0";return`K${t}${i}${n}${o}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new Hb([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},Hb=class{constructor(e){if(e.length===0)throw db("chords");this.chords=e}getHashCode(){let e="";for(let t=0,i=this.chords.length;t<i;t++)t!==0&&(e+=";"),e+=this.chords[t].getHashCode();return e}equals(e){if(e===null||this.chords.length!==e.chords.length)return!1;for(let t=0;t<this.chords.length;t++)if(!this.chords[t].equals(e.chords[t]))return!1;return!0}};function $b(e){if(e.charCode){let i=String.fromCharCode(e.charCode).toUpperCase();return m0.fromString(i)}let t=e.keyCode;if(t===3)return 7;if(ed)switch(t){case 59:return 85;case 60:if(Bb)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(Ui)return 57;break}else if(Nb&&(Ui&&t===93||!Ui&&t===92))return 57;return Fb[t]||0}var Wb=Ui?256:2048,Ub=512,Kb=1024,Vb=Ui?2048:256,Jg=class{constructor(e){var i;this._standardKeyboardEventBrand=!0;let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=(i=t.getModifierState)==null?void 0:i.call(t,"AltGraph"),this.keyCode=$b(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=Wb),this.altKey&&(t|=Ub),this.shiftKey&&(t|=Kb),this.metaKey&&(t|=Vb),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new zb(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}},Zg=new WeakMap;function qb(e){if(!e.parent||e.parent===e)return null;try{let t=e.location,i=e.parent.location;if(t.origin!=="null"&&i.origin!=="null"&&t.origin!==i.origin)return null}catch{return null}return e.parent}var Yb=class{static getSameOriginWindowChain(e){let t=Zg.get(e);if(!t){t=[],Zg.set(e,t);let i=e,n;do n=qb(i),n?t.push({window:new WeakRef(i),iframeElement:i.frameElement||null}):t.push({window:new WeakRef(i),iframeElement:null}),i=n;while(i)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let i=0,n=0,o=this.getSameOriginWindowChain(e);for(let l of o){let h=l.window.deref();if(i+=(h==null?void 0:h.scrollY)??0,n+=(h==null?void 0:h.scrollX)??0,h===t||!l.iframeElement)break;let u=l.iframeElement.getBoundingClientRect();i+=u.top,n+=u.left}return{top:i,left:n}}},_l=class{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let i=Yb.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=i.left,this.posy-=i.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}},e_=class{constructor(e,t=0,i=0){var o;this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=i,this.deltaX=t;let n=!1;if(Vd){let l=navigator.userAgent.match(/Chrome\/(\d+)/);n=(l?parseInt(l[1]):123)<=122}if(e){let l=e,h=e,u=((o=e.view)==null?void 0:o.devicePixelRatio)||1;if(typeof l.wheelDeltaY<"u")n?this.deltaY=l.wheelDeltaY/(120*u):this.deltaY=l.wheelDeltaY/120;else if(typeof h.VERTICAL_AXIS<"u"&&h.axis===h.VERTICAL_AXIS)this.deltaY=-h.detail/3;else if(e.type==="wheel"){let p=e;p.deltaMode===p.DOM_DELTA_LINE?ed&&!Ui?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof l.wheelDeltaX<"u")Db&&p0?this.deltaX=-(l.wheelDeltaX/120):n?this.deltaX=l.wheelDeltaX/(120*u):this.deltaX=l.wheelDeltaX/120;else if(typeof h.HORIZONTAL_AXIS<"u"&&h.axis===h.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){let p=e;p.deltaMode===p.DOM_DELTA_LINE?ed&&!Ui?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(n?this.deltaY=e.wheelDelta/(120*u):this.deltaY=e.wheelDelta/120)}}preventDefault(){var e;(e=this.browserEvent)==null||e.preventDefault()}stopPropagation(){var e;(e=this.browserEvent)==null||e.stopPropagation()}},_0=Object.freeze(function(e,t){let i=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(i)}}}),Qb;(e=>{function t(i){return i===e.None||i===e.Cancelled||i instanceof Gb?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}e.isCancellationToken=t,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Rt.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:_0})})(Qb||(Qb={}));var Gb=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?_0:(this._emitter||(this._emitter=new ee),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},Yd=class{constructor(e,t){this._isDisposed=!1,this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new Yu("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new Yu("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}},Xb=class{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){var e;(e=this.disposable)==null||e.dispose(),this.disposable=void 0}cancelAndSet(e,t,i=globalThis){if(this.isDisposed)throw new Yu("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let n=i.setInterval(()=>{e()},t);this.disposable=Ke(()=>{i.clearInterval(n),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},Jb;(e=>{async function t(n){let o,l=await Promise.all(n.map(h=>h.then(u=>u,u=>{o||(o=u)})));if(typeof o<"u")throw o;return l}e.settled=t;function i(n){return new Promise(async(o,l)=>{try{await n(o,l)}catch(h){l(h)}})}e.withAsyncBody=i})(Jb||(Jb={}));var t_=class fi{static fromArray(t){return new fi(i=>{i.emitMany(t)})}static fromPromise(t){return new fi(async i=>{i.emitMany(await t)})}static fromPromises(t){return new fi(async i=>{await Promise.all(t.map(async n=>i.emitOne(await n)))})}static merge(t){return new fi(async i=>{await Promise.all(t.map(async n=>{for await(let o of n)i.emitOne(o)}))})}constructor(t,i){this._state=0,this._results=[],this._error=null,this._onReturn=i,this._onStateChanged=new ee,queueMicrotask(async()=>{let n={emitOne:o=>this.emitOne(o),emitMany:o=>this.emitMany(o),reject:o=>this.reject(o)};try{await Promise.resolve(t(n)),this.resolve()}catch(o){this.reject(o)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(t<this._results.length)return{done:!1,value:this._results[t++]};if(this._state===1)return{done:!0,value:void 0};await Rt.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>{var i;return(i=this._onReturn)==null||i.call(this),{done:!0,value:void 0}}}}static map(t,i){return new fi(async n=>{for await(let o of t)n.emitOne(i(o))})}map(t){return fi.map(this,t)}static filter(t,i){return new fi(async n=>{for await(let o of t)i(o)&&n.emitOne(o)})}filter(t){return fi.filter(this,t)}static coalesce(t){return fi.filter(t,i=>!!i)}coalesce(){return fi.coalesce(this)}static async toPromise(t){let i=[];for await(let n of t)i.push(n);return i}toPromise(){return fi.toPromise(this)}emitOne(t){this._state===0&&(this._results.push(t),this._onStateChanged.fire())}emitMany(t){this._state===0&&(this._results=this._results.concat(t),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(t){this._state===0&&(this._state=2,this._error=t,this._onStateChanged.fire())}};t_.EMPTY=t_.fromArray([]);var{getWindow:$i,getWindowId:Zb,onDidRegisterWindow:ek}=(function(){let e=new Map,t={window:ar,disposables:new Gr};e.set(ar.vscodeWindowId,t);let i=new ee,n=new ee,o=new ee;function l(h,u){return(typeof h=="number"?e.get(h):void 0)??(u?t:void 0)}return{onDidRegisterWindow:i.event,onWillUnregisterWindow:o.event,onDidUnregisterWindow:n.event,registerWindow(h){if(e.has(h.vscodeWindowId))return Le.None;let u=new Gr,p={window:h,disposables:u.add(new Gr)};return e.set(h.vscodeWindowId,p),u.add(Ke(()=>{e.delete(h.vscodeWindowId),n.fire(h)})),u.add(be(h,vt.BEFORE_UNLOAD,()=>{o.fire(h)})),i.fire(p),u},getWindows(){return e.values()},getWindowsCount(){return e.size},getWindowId(h){return h.vscodeWindowId},hasWindow(h){return e.has(h)},getWindowById:l,getWindow(h){var d;let u=h;if((d=u==null?void 0:u.ownerDocument)!=null&&d.defaultView)return u.ownerDocument.defaultView.window;let p=h;return p!=null&&p.view?p.view.window:ar},getDocument(h){return $i(h).document}}})(),tk=class{constructor(e,t,i,n){this._node=e,this._type=t,this._handler=i,this._options=n||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function be(e,t,i,n){return new tk(e,t,i,n)}var i_=function(e,t,i,n){return be(e,t,i,n)},Qd,ik=class extends Xb{constructor(e){super(),this.defaultTarget=e&&$i(e)}cancelAndSet(e,t,i){return super.cancelAndSet(e,t,i??this.defaultTarget)}},r_=class{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){El(e)}}static sort(e,t){return t.priority-e.priority}};(function(){let e=new Map,t=new Map,i=new Map,n=new Map,o=l=>{i.set(l,!1);let h=e.get(l)??[];for(t.set(l,h),e.set(l,[]),n.set(l,!0);h.length>0;)h.sort(r_.sort),h.shift().execute();n.set(l,!1)};Qd=(l,h,u=0)=>{let p=Zb(l),d=new r_(h,u),_=e.get(p);return _||(_=[],e.set(p,_)),_.push(d),i.get(p)||(i.set(p,!0),l.requestAnimationFrame(()=>o(p))),d}})();function rk(e){let t=e.getBoundingClientRect(),i=$i(e);return{left:t.left+i.scrollX,top:t.top+i.scrollY,width:t.width,height:t.height}}var vt={CLICK:"click",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",KEY_DOWN:"keydown",KEY_UP:"keyup",BEFORE_UNLOAD:"beforeunload",CHANGE:"change",FOCUS:"focus",BLUR:"blur",INPUT:"input"},sk=class{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingTop="",this._paddingLeft="",this._paddingBottom="",this._paddingRight="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){let t=Gt(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){let t=Gt(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){let t=Gt(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){let t=Gt(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){let t=Gt(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){let t=Gt(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){let t=Gt(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingTop(e){let t=Gt(e);this._paddingTop!==t&&(this._paddingTop=t,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(e){let t=Gt(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(e){let t=Gt(e);this._paddingBottom!==t&&(this._paddingBottom=t,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(e){let t=Gt(e);this._paddingRight!==t&&(this._paddingRight=t,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){let t=Gt(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){let t=Gt(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){let t=Gt(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}};function Gt(e){return typeof e=="number"?`${e}px`:e}function Io(e){return new sk(e)}var v0=class{constructor(){this._hooks=new Gr,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let i=this._onStopCallback;this._onStopCallback=null,e&&i&&i(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,i,n,o){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=n,this._onStopCallback=o;let l=e;try{e.setPointerCapture(t),this._hooks.add(Ke(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{l=$i(e)}this._hooks.add(be(l,vt.POINTER_MOVE,h=>{if(h.buttons!==i){this.stopMonitoring(!0);return}h.preventDefault(),this._pointerMoveCallback(h)})),this._hooks.add(be(l,vt.POINTER_UP,h=>this.stopMonitoring(!0)))}};function nk(e,t,i){let n=null,o=null;if(typeof i.value=="function"?(n="value",o=i.value,o.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof i.get=="function"&&(n="get",o=i.get),!o)throw new Error("not supported");let l=`$memoize$${t}`;i[n]=function(...h){return this.hasOwnProperty(l)||Object.defineProperty(this,l,{configurable:!1,enumerable:!1,writable:!1,value:o.apply(this,h)}),this[l]}}var Ai;(e=>(e.Tap="-xterm-gesturetap",e.Change="-xterm-gesturechange",e.Start="-xterm-gesturestart",e.End="-xterm-gesturesend",e.Contextmenu="-xterm-gesturecontextmenu"))(Ai||(Ai={}));var Lo=class Mt extends Le{constructor(){super(),this.dispatched=!1,this.targets=new qg,this.ignoreTargets=new qg,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(Rt.runAndSubscribe(ek,({window:t,disposables:i})=>{i.add(be(t.document,"touchstart",n=>this.onTouchStart(n),{passive:!1})),i.add(be(t.document,"touchend",n=>this.onTouchEnd(t,n))),i.add(be(t.document,"touchmove",n=>this.onTouchMove(n),{passive:!1}))},{window:ar,disposables:this._store}))}static addTarget(t){if(!Mt.isTouchDevice())return Le.None;Mt.INSTANCE||(Mt.INSTANCE=new Mt);let i=Mt.INSTANCE.targets.push(t);return Ke(i)}static ignoreTarget(t){if(!Mt.isTouchDevice())return Le.None;Mt.INSTANCE||(Mt.INSTANCE=new Mt);let i=Mt.INSTANCE.ignoreTargets.push(t);return Ke(i)}static isTouchDevice(){return"ontouchstart"in ar||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(t){let i=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,o=t.targetTouches.length;n<o;n++){let l=t.targetTouches.item(n);this.activeTouches[l.identifier]={id:l.identifier,initialTarget:l.target,initialTimeStamp:i,initialPageX:l.pageX,initialPageY:l.pageY,rollingTimestamps:[i],rollingPageX:[l.pageX],rollingPageY:[l.pageY]};let h=this.newGestureEvent(Ai.Start,l.target);h.pageX=l.pageX,h.pageY=l.pageY,this.dispatchEvent(h)}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}onTouchEnd(t,i){let n=Date.now(),o=Object.keys(this.activeTouches).length;for(let l=0,h=i.changedTouches.length;l<h;l++){let u=i.changedTouches.item(l);if(!this.activeTouches.hasOwnProperty(String(u.identifier))){console.warn("move of an UNKNOWN touch",u);continue}let p=this.activeTouches[u.identifier],d=Date.now()-p.initialTimeStamp;if(d<Mt.HOLD_DELAY&&Math.abs(p.initialPageX-ri(p.rollingPageX))<30&&Math.abs(p.initialPageY-ri(p.rollingPageY))<30){let _=this.newGestureEvent(Ai.Tap,p.initialTarget);_.pageX=ri(p.rollingPageX),_.pageY=ri(p.rollingPageY),this.dispatchEvent(_)}else if(d>=Mt.HOLD_DELAY&&Math.abs(p.initialPageX-ri(p.rollingPageX))<30&&Math.abs(p.initialPageY-ri(p.rollingPageY))<30){let _=this.newGestureEvent(Ai.Contextmenu,p.initialTarget);_.pageX=ri(p.rollingPageX),_.pageY=ri(p.rollingPageY),this.dispatchEvent(_)}else if(o===1){let _=ri(p.rollingPageX),g=ri(p.rollingPageY),y=ri(p.rollingTimestamps)-p.rollingTimestamps[0],w=_-p.rollingPageX[0],x=g-p.rollingPageY[0],C=[...this.targets].filter(k=>p.initialTarget instanceof Node&&k.contains(p.initialTarget));this.inertia(t,C,n,Math.abs(w)/y,w>0?1:-1,_,Math.abs(x)/y,x>0?1:-1,g)}this.dispatchEvent(this.newGestureEvent(Ai.End,p.initialTarget)),delete this.activeTouches[u.identifier]}this.dispatched&&(i.preventDefault(),i.stopPropagation(),this.dispatched=!1)}newGestureEvent(t,i){let n=document.createEvent("CustomEvent");return n.initEvent(t,!1,!0),n.initialTarget=i,n.tapCount=0,n}dispatchEvent(t){if(t.type===Ai.Tap){let i=new Date().getTime(),n=0;i-this._lastSetTapCountTime>Mt.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=i,t.tapCount=n}else(t.type===Ai.Change||t.type===Ai.Contextmenu)&&(this._lastSetTapCountTime=0);if(t.initialTarget instanceof Node){for(let n of this.ignoreTargets)if(n.contains(t.initialTarget))return;let i=[];for(let n of this.targets)if(n.contains(t.initialTarget)){let o=0,l=t.initialTarget;for(;l&&l!==n;)o++,l=l.parentElement;i.push([o,n])}i.sort((n,o)=>n[0]-o[0]);for(let[n,o]of i)o.dispatchEvent(t),this.dispatched=!0}}inertia(t,i,n,o,l,h,u,p,d){this.handle=Qd(t,()=>{let _=Date.now(),g=_-n,y=0,w=0,x=!0;o+=Mt.SCROLL_FRICTION*g,u+=Mt.SCROLL_FRICTION*g,o>0&&(x=!1,y=l*o*g),u>0&&(x=!1,w=p*u*g);let C=this.newGestureEvent(Ai.Change);C.translationX=y,C.translationY=w,i.forEach(k=>k.dispatchEvent(C)),x||this.inertia(t,i,_,o,l,h+y,u,p,d+w)})}onTouchMove(t){let i=Date.now();for(let n=0,o=t.changedTouches.length;n<o;n++){let l=t.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(l.identifier))){console.warn("end of an UNKNOWN touch",l);continue}let h=this.activeTouches[l.identifier],u=this.newGestureEvent(Ai.Change,h.initialTarget);u.translationX=l.pageX-ri(h.rollingPageX),u.translationY=l.pageY-ri(h.rollingPageY),u.pageX=l.pageX,u.pageY=l.pageY,this.dispatchEvent(u),h.rollingPageX.length>3&&(h.rollingPageX.shift(),h.rollingPageY.shift(),h.rollingTimestamps.shift()),h.rollingPageX.push(l.pageX),h.rollingPageY.push(l.pageY),h.rollingTimestamps.push(i)}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}};Lo.SCROLL_FRICTION=-.005,Lo.HOLD_DELAY=700,Lo.CLEAR_TAP_COUNT_TIME=400,tt([nk],Lo,"isTouchDevice",1);var ok=Lo,Gd=class extends Le{onclick(e,t){this._register(be(e,vt.CLICK,i=>t(new _l($i(e),i))))}onmousedown(e,t){this._register(be(e,vt.MOUSE_DOWN,i=>t(new _l($i(e),i))))}onmouseover(e,t){this._register(be(e,vt.MOUSE_OVER,i=>t(new _l($i(e),i))))}onmouseleave(e,t){this._register(be(e,vt.MOUSE_LEAVE,i=>t(new _l($i(e),i))))}onkeydown(e,t){this._register(be(e,vt.KEY_DOWN,i=>t(new Jg(i))))}onkeyup(e,t){this._register(be(e,vt.KEY_UP,i=>t(new Jg(i))))}oninput(e,t){this._register(be(e,vt.INPUT,t))}onblur(e,t){this._register(be(e,vt.BLUR,t))}onfocus(e,t){this._register(be(e,vt.FOCUS,t))}onchange(e,t){this._register(be(e,vt.CHANGE,t))}ignoreGesture(e){return ok.ignoreTarget(e)}},s_=11,ak=class extends Gd{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.style.position="absolute",this.domNode.style.width=s_+"px",this.domNode.style.height=s_+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new v0),this._register(i_(this.bgDomNode,vt.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(i_(this.domNode,vt.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new ik),this._pointerdownScheduleRepeatTimer=this._register(new Yd)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,$i(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,i=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}},lk=class rd{constructor(t,i,n,o,l,h,u){this._forceIntegerValues=t,this._scrollStateBrand=void 0,this._forceIntegerValues&&(i=i|0,n=n|0,o=o|0,l=l|0,h=h|0,u=u|0),this.rawScrollLeft=o,this.rawScrollTop=u,i<0&&(i=0),o+i>n&&(o=n-i),o<0&&(o=0),l<0&&(l=0),u+l>h&&(u=h-l),u<0&&(u=0),this.width=i,this.scrollWidth=n,this.scrollLeft=o,this.height=l,this.scrollHeight=h,this.scrollTop=u}equals(t){return this.rawScrollLeft===t.rawScrollLeft&&this.rawScrollTop===t.rawScrollTop&&this.width===t.width&&this.scrollWidth===t.scrollWidth&&this.scrollLeft===t.scrollLeft&&this.height===t.height&&this.scrollHeight===t.scrollHeight&&this.scrollTop===t.scrollTop}withScrollDimensions(t,i){return new rd(this._forceIntegerValues,typeof t.width<"u"?t.width:this.width,typeof t.scrollWidth<"u"?t.scrollWidth:this.scrollWidth,i?this.rawScrollLeft:this.scrollLeft,typeof t.height<"u"?t.height:this.height,typeof t.scrollHeight<"u"?t.scrollHeight:this.scrollHeight,i?this.rawScrollTop:this.scrollTop)}withScrollPosition(t){return new rd(this._forceIntegerValues,this.width,this.scrollWidth,typeof t.scrollLeft<"u"?t.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof t.scrollTop<"u"?t.scrollTop:this.rawScrollTop)}createScrollEvent(t,i){let n=this.width!==t.width,o=this.scrollWidth!==t.scrollWidth,l=this.scrollLeft!==t.scrollLeft,h=this.height!==t.height,u=this.scrollHeight!==t.scrollHeight,p=this.scrollTop!==t.scrollTop;return{inSmoothScrolling:i,oldWidth:t.width,oldScrollWidth:t.scrollWidth,oldScrollLeft:t.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:t.height,oldScrollHeight:t.scrollHeight,oldScrollTop:t.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:o,scrollLeftChanged:l,heightChanged:h,scrollHeightChanged:u,scrollTopChanged:p}}},hk=class extends Le{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new ee),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new lk(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){var n;let i=this._state.withScrollDimensions(e,t);this._setState(i,!!this._smoothScrolling),(n=this._smoothScrolling)==null||n.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){let t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};let i=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===i.scrollLeft&&this._smoothScrolling.to.scrollTop===i.scrollTop)return;let n;t?n=new o_(this._smoothScrolling.from,i,this._smoothScrolling.startTime,this._smoothScrolling.duration):n=this._smoothScrolling.combine(this._state,i,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=n}else{let i=this._state.withScrollPosition(e);this._smoothScrolling=o_.start(this._state,i,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){let i=this._state;i.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(i,t)))}},n_=class{constructor(e,t,i){this.scrollLeft=e,this.scrollTop=t,this.isDone=i}};function fu(e,t){let i=t-e;return function(n){return e+i*dk(n)}}function ck(e,t,i){return function(n){return n<i?e(n/i):t((n-i)/(1-i))}}var o_=class sd{constructor(t,i,n,o){this.from=t,this.to=i,this.duration=o,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(t,i,n){if(Math.abs(t-i)>2.5*n){let o,l;return t<i?(o=t+.75*n,l=i-.75*n):(o=t-.75*n,l=i+.75*n),ck(fu(t,o),fu(l,i),.33)}return fu(t,i)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(t){this.to=t.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(t){let i=(t-this.startTime)/this.duration;if(i<1){let n=this.scrollLeft(i),o=this.scrollTop(i);return new n_(n,o,!1)}return new n_(this.to.scrollLeft,this.to.scrollTop,!0)}combine(t,i,n){return sd.start(t,i,n)}static start(t,i,n){n=n+10;let o=Date.now()-10;return new sd(t,i,o,n)}};function uk(e){return Math.pow(e,3)}function dk(e){return 1-uk(1-e)}var fk=class extends Le{constructor(e,t,i){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=i,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Yd)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;(e=this._domNode)==null||e.setClassName(this._visibleClassName)},0))}_hide(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(t=this._domNode)==null||t.setClassName(this._invisibleClassName+(e?" fade":"")))}},pk=140,y0=class extends Gd{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new fk(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new v0),this._shouldRender=!0,this.domNode=Io(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(be(this.domNode.domNode,vt.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){let t=this._register(new ak(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,i,n){this.slider=Io(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof i=="number"&&this.slider.setWidth(i),typeof n=="number"&&this.slider.setHeight(n),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(be(this.slider.domNode,vt.POINTER_DOWN,o=>{o.button===0&&(o.preventDefault(),this._sliderPointerDown(o))})),this.onclick(this.slider.domNode,o=>{o.leftButton&&o.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){let t=this.domNode.domNode.getClientRects()[0].top,i=t+this._scrollbarState.getSliderPosition(),n=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),o=this._sliderPointerPosition(e);i<=o&&o<=n?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,i;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,i=e.offsetY;else{let o=rk(this.domNode.domNode);t=e.pageX-o.left,i=e.pageY-o.top}let n=this._pointerDownRelativePosition(t,i);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(n):this._scrollbarState.getDesiredScrollPositionFromOffset(n)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=this._sliderPointerPosition(e),i=this._sliderOrthogonalPointerPosition(e),n=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>{let l=this._sliderOrthogonalPointerPosition(o),h=Math.abs(l-i);if(p0&&h>pk){this._setDesiredScrollPositionNow(n.getScrollPosition());return}let u=this._sliderPointerPosition(o)-t;this._setDesiredScrollPositionNow(n.getDesiredScrollPositionFromDelta(u))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){let t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}},S0=class nd{constructor(t,i,n,o,l,h){this._scrollbarSize=Math.round(i),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(t),this._visibleSize=o,this._scrollSize=l,this._scrollPosition=h,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new nd(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(t){let i=Math.round(t);return this._visibleSize!==i?(this._visibleSize=i,this._refreshComputedValues(),!0):!1}setScrollSize(t){let i=Math.round(t);return this._scrollSize!==i?(this._scrollSize=i,this._refreshComputedValues(),!0):!1}setScrollPosition(t){let i=Math.round(t);return this._scrollPosition!==i?(this._scrollPosition=i,this._refreshComputedValues(),!0):!1}setScrollbarSize(t){this._scrollbarSize=Math.round(t)}setOppositeScrollbarSize(t){this._oppositeScrollbarSize=Math.round(t)}static _computeValues(t,i,n,o,l){let h=Math.max(0,n-t),u=Math.max(0,h-2*i),p=o>0&&o>n;if(!p)return{computedAvailableSize:Math.round(h),computedIsNeeded:p,computedSliderSize:Math.round(u),computedSliderRatio:0,computedSliderPosition:0};let d=Math.round(Math.max(20,Math.floor(n*u/o))),_=(u-d)/(o-n),g=l*_;return{computedAvailableSize:Math.round(h),computedIsNeeded:p,computedSliderSize:Math.round(d),computedSliderRatio:_,computedSliderPosition:Math.round(g)}}_refreshComputedValues(){let t=nd._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=t.computedAvailableSize,this._computedIsNeeded=t.computedIsNeeded,this._computedSliderSize=t.computedSliderSize,this._computedSliderRatio=t.computedSliderRatio,this._computedSliderPosition=t.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(t){if(!this._computedIsNeeded)return 0;let i=t-this._arrowSize-this._computedSliderSize/2;return Math.round(i/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(t){if(!this._computedIsNeeded)return 0;let i=t-this._arrowSize,n=this._scrollPosition;return i<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(t){if(!this._computedIsNeeded)return 0;let i=this._computedSliderPosition+t;return Math.round(i/this._computedSliderRatio)}},mk=class extends y0{constructor(e,t,i){let n=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new S0(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,n.width,n.scrollWidth,o.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}},gk=class extends y0{constructor(e,t,i){let n=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new S0(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,n.height,n.scrollHeight,o.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}},_k=500,a_=50,vk=class{constructor(e,t,i){this.timestamp=e,this.deltaX=t,this.deltaY=i,this.score=0}},od=class{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let t=1,i=0,n=1,o=this._rear;do{let l=o===this._front?t:Math.pow(2,-n);if(t-=l,i+=this._memory[o].score*l,o===this._front)break;o=(this._capacity+o-1)%this._capacity,n++}while(!0);return i<=.5}acceptStandardWheelEvent(t){if(Vd){let i=$i(t.browserEvent),n=Lb(i);this.accept(Date.now(),t.deltaX*n,t.deltaY*n)}else this.accept(Date.now(),t.deltaX,t.deltaY)}accept(t,i,n){let o=null,l=new vk(t,i,n);this._front===-1&&this._rear===-1?(this._memory[0]=l,this._front=0,this._rear=0):(o=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=l),l.score=this._computeScore(l,o)}_computeScore(t,i){if(Math.abs(t.deltaX)>0&&Math.abs(t.deltaY)>0)return 1;let n=.5;if((!this._isAlmostInt(t.deltaX)||!this._isAlmostInt(t.deltaY))&&(n+=.25),i){let o=Math.abs(t.deltaX),l=Math.abs(t.deltaY),h=Math.abs(i.deltaX),u=Math.abs(i.deltaY),p=Math.max(Math.min(o,h),1),d=Math.max(Math.min(l,u),1),_=Math.max(o,h),g=Math.max(l,u);_%p===0&&g%d===0&&(n-=.5)}return Math.min(Math.max(n,0),1)}_isAlmostInt(t){return Math.abs(Math.round(t)-t)<.01}};od.INSTANCE=new od;var yk=od,Sk=class extends Gd{constructor(e,t,i){super(),this._onScroll=this._register(new ee),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new ee),this.onWillScroll=this._onWillScroll.event,this._options=xk(t),this._scrollable=i,this._register(this._scrollable.onScroll(o=>{this._onWillScroll.fire(o),this._onDidScroll(o),this._onScroll.fire(o)}));let n={onMouseWheel:o=>this._onMouseWheel(o),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new gk(this._scrollable,this._options,n)),this._horizontalScrollbar=this._register(new mk(this._scrollable,this._options,n)),this._domNode=document.createElement("div"),this._domNode.className="xterm-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Io(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Io(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Io(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,o=>this._onMouseOver(o)),this.onmouseleave(this._listenOnDomNode,o=>this._onMouseLeave(o)),this._hideTimeout=this._register(new Yd),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=Ls(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Ui&&(this._options.className+=" mac"),this._domNode.className="xterm-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(e){this._revealOnScroll=e}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new e_(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=Ls(this._mouseWheelToDispose),e)){let t=i=>{this._onMouseWheel(new e_(i))};this._mouseWheelToDispose.push(be(this._listenOnDomNode,vt.MOUSE_WHEEL,t,{passive:!1}))}}_onMouseWheel(e){var o;if((o=e.browserEvent)!=null&&o.defaultPrevented)return;let t=yk.INSTANCE;t.acceptStandardWheelEvent(e);let i=!1;if(e.deltaY||e.deltaX){let l=e.deltaY*this._options.mouseWheelScrollSensitivity,h=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&h+l===0?h=l=0:Math.abs(l)>=Math.abs(h)?h=0:l=0),this._options.flipAxes&&([l,h]=[h,l]);let u=!Ui&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||u)&&!h&&(h=l,l=0),e.browserEvent&&e.browserEvent.altKey&&(h=h*this._options.fastScrollSensitivity,l=l*this._options.fastScrollSensitivity);let p=this._scrollable.getFutureScrollPosition(),d={};if(l){let _=a_*l,g=p.scrollTop-(_<0?Math.floor(_):Math.ceil(_));this._verticalScrollbar.writeScrollPosition(d,g)}if(h){let _=a_*h,g=p.scrollLeft-(_<0?Math.floor(_):Math.ceil(_));this._horizontalScrollbar.writeScrollPosition(d,g)}d=this._scrollable.validateScrollPosition(d),(p.scrollLeft!==d.scrollLeft||p.scrollTop!==d.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(d):this._scrollable.setScrollPositionNow(d),i=!0)}let n=i;!n&&this._options.alwaysConsumeMouseWheel&&(n=!0),!n&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(n=!0),n&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,i=e.scrollLeft>0,n=i?" left":"",o=t?" top":"",l=i||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${n}`),this._topShadowDomNode.setClassName(`shadow${o}`),this._topLeftShadowDomNode.setClassName(`shadow${l}${o}${n}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),_k)}},wk=class extends Sk{constructor(e,t,i){super(e,t,i)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}};function xk(e){let t={lazyRender:typeof e.lazyRender<"u"?e.lazyRender:!1,className:typeof e.className<"u"?e.className:"",useShadows:typeof e.useShadows<"u"?e.useShadows:!0,handleMouseWheel:typeof e.handleMouseWheel<"u"?e.handleMouseWheel:!0,flipAxes:typeof e.flipAxes<"u"?e.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof e.consumeMouseWheelIfScrollbarIsNeeded<"u"?e.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof e.alwaysConsumeMouseWheel<"u"?e.alwaysConsumeMouseWheel:!1,scrollYToX:typeof e.scrollYToX<"u"?e.scrollYToX:!1,mouseWheelScrollSensitivity:typeof e.mouseWheelScrollSensitivity<"u"?e.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof e.fastScrollSensitivity<"u"?e.fastScrollSensitivity:5,scrollPredominantAxis:typeof e.scrollPredominantAxis<"u"?e.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof e.mouseWheelSmoothScroll<"u"?e.mouseWheelSmoothScroll:!0,arrowSize:typeof e.arrowSize<"u"?e.arrowSize:11,listenOnDomNode:typeof e.listenOnDomNode<"u"?e.listenOnDomNode:null,horizontal:typeof e.horizontal<"u"?e.horizontal:1,horizontalScrollbarSize:typeof e.horizontalScrollbarSize<"u"?e.horizontalScrollbarSize:10,horizontalSliderSize:typeof e.horizontalSliderSize<"u"?e.horizontalSliderSize:0,horizontalHasArrows:typeof e.horizontalHasArrows<"u"?e.horizontalHasArrows:!1,vertical:typeof e.vertical<"u"?e.vertical:1,verticalScrollbarSize:typeof e.verticalScrollbarSize<"u"?e.verticalScrollbarSize:10,verticalHasArrows:typeof e.verticalHasArrows<"u"?e.verticalHasArrows:!1,verticalSliderSize:typeof e.verticalSliderSize<"u"?e.verticalSliderSize:0,scrollByPage:typeof e.scrollByPage<"u"?e.scrollByPage:!1};return t.horizontalSliderSize=typeof e.horizontalSliderSize<"u"?e.horizontalSliderSize:t.horizontalScrollbarSize,t.verticalSliderSize=typeof e.verticalSliderSize<"u"?e.verticalSliderSize:t.verticalScrollbarSize,Ui&&(t.className+=" mac"),t}var ad=class extends Le{constructor(e,t,i,n,o,l,h,u){super(),this._bufferService=i,this._optionsService=h,this._renderService=u,this._onRequestScrollLines=this._register(new ee),this.onRequestScrollLines=this._onRequestScrollLines.event,this._isSyncing=!1,this._isHandlingScroll=!1,this._suppressOnScrollHandler=!1;let p=this._register(new hk({forceIntegerValues:!1,smoothScrollDuration:this._optionsService.rawOptions.smoothScrollDuration,scheduleAtNextAnimationFrame:d=>Qd(n.window,d)}));this._register(this._optionsService.onSpecificOptionChange("smoothScrollDuration",()=>{p.setSmoothScrollDuration(this._optionsService.rawOptions.smoothScrollDuration)})),this._scrollableElement=this._register(new wk(t,{vertical:1,horizontal:2,useShadows:!1,mouseWheelSmoothScroll:!0,...this._getChangeOptions()},p)),this._register(this._optionsService.onMultipleOptionChange(["scrollSensitivity","fastScrollSensitivity","overviewRuler"],()=>this._scrollableElement.updateOptions(this._getChangeOptions()))),this._register(o.onProtocolChange(d=>{this._scrollableElement.updateOptions({handleMouseWheel:!(d&16)})})),this._scrollableElement.setScrollDimensions({height:0,scrollHeight:0}),this._register(Rt.runAndSubscribe(l.onChangeColors,()=>{this._scrollableElement.getDomNode().style.backgroundColor=l.colors.background.css})),e.appendChild(this._scrollableElement.getDomNode()),this._register(Ke(()=>this._scrollableElement.getDomNode().remove())),this._styleElement=n.mainDocument.createElement("style"),t.appendChild(this._styleElement),this._register(Ke(()=>this._styleElement.remove())),this._register(Rt.runAndSubscribe(l.onChangeColors,()=>{this._styleElement.textContent=[".xterm .xterm-scrollable-element > .scrollbar > .slider {",`  background: ${l.colors.scrollbarSliderBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider:hover {",`  background: ${l.colors.scrollbarSliderHoverBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider.active {",`  background: ${l.colors.scrollbarSliderActiveBackground.css};`,"}"].join(`
`)})),this._register(this._bufferService.onResize(()=>this.queueSync())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._latestYDisp=void 0,this.queueSync()})),this._register(this._bufferService.onScroll(()=>this._sync())),this._register(this._scrollableElement.onScroll(d=>this._handleScroll(d)))}scrollLines(e){let t=this._scrollableElement.getScrollPosition();this._scrollableElement.setScrollPosition({reuseAnimation:!0,scrollTop:t.scrollTop+e*this._renderService.dimensions.css.cell.height})}scrollToLine(e,t){t&&(this._latestYDisp=e),this._scrollableElement.setScrollPosition({reuseAnimation:!t,scrollTop:e*this._renderService.dimensions.css.cell.height})}_getChangeOptions(){var e;return{mouseWheelScrollSensitivity:this._optionsService.rawOptions.scrollSensitivity,fastScrollSensitivity:this._optionsService.rawOptions.fastScrollSensitivity,verticalScrollbarSize:((e=this._optionsService.rawOptions.overviewRuler)==null?void 0:e.width)||14}}queueSync(e){e!==void 0&&(this._latestYDisp=e),this._queuedAnimationFrame===void 0&&(this._queuedAnimationFrame=this._renderService.addRefreshCallback(()=>{this._queuedAnimationFrame=void 0,this._sync(this._latestYDisp)}))}_sync(e=this._bufferService.buffer.ydisp){!this._renderService||this._isSyncing||(this._isSyncing=!0,this._suppressOnScrollHandler=!0,this._scrollableElement.setScrollDimensions({height:this._renderService.dimensions.css.canvas.height,scrollHeight:this._renderService.dimensions.css.cell.height*this._bufferService.buffer.lines.length}),this._suppressOnScrollHandler=!1,e!==this._latestYDisp&&this._scrollableElement.setScrollPosition({scrollTop:e*this._renderService.dimensions.css.cell.height}),this._isSyncing=!1)}_handleScroll(e){if(!this._renderService||this._isHandlingScroll||this._suppressOnScrollHandler)return;this._isHandlingScroll=!0;let t=Math.round(e.scrollTop/this._renderService.dimensions.css.cell.height),i=t-this._bufferService.buffer.ydisp;i!==0&&(this._latestYDisp=t,this._onRequestScrollLines.fire(i)),this._isHandlingScroll=!1}};ad=tt([oe(2,$t),oe(3,dr),oe(4,e0),oe(5,Dn),oe(6,Wt),oe(7,fr)],ad);var ld=class extends Le{constructor(e,t,i,n,o){super(),this._screenElement=e,this._bufferService=t,this._coreBrowserService=i,this._decorationService=n,this._renderService=o,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this._register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this._register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this._register(this._decorationService.onDecorationRemoved(l=>this._removeDecoration(l))),this._register(Ke(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let e of this._decorationService.decorations)this._renderDecoration(e);this._dimensionsChanged=!1}_renderDecoration(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)}_createElement(e){var n;let t=this._coreBrowserService.mainDocument.createElement("div");t.classList.add("xterm-decoration"),t.classList.toggle("xterm-decoration-top-layer",((n=e==null?void 0:e.options)==null?void 0:n.layer)==="top"),t.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,t.style.height=`${(e.options.height||1)*this._renderService.dimensions.css.cell.height}px`,t.style.top=`${(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height}px`,t.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let i=e.options.x??0;return i&&i>this._bufferService.cols&&(t.style.display="none"),this._refreshXPosition(e,t),t}_refreshStyle(e){let t=e.marker.line-this._bufferService.buffers.active.ydisp;if(t<0||t>=this._bufferService.rows)e.element&&(e.element.style.display="none",e.onRenderEmitter.fire(e.element));else{let i=this._decorationElements.get(e);i||(i=this._createElement(e),e.element=i,this._decorationElements.set(e,i),this._container.appendChild(i),e.onDispose(()=>{this._decorationElements.delete(e),i.remove()})),i.style.display=this._altBufferIsActive?"none":"block",this._altBufferIsActive||(i.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,i.style.height=`${(e.options.height||1)*this._renderService.dimensions.css.cell.height}px`,i.style.top=`${t*this._renderService.dimensions.css.cell.height}px`,i.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`),e.onRenderEmitter.fire(i)}}_refreshXPosition(e,t=e.element){if(!t)return;let i=e.options.x??0;(e.options.anchor||"left")==="right"?t.style.right=i?`${i*this._renderService.dimensions.css.cell.width}px`:"":t.style.left=i?`${i*this._renderService.dimensions.css.cell.width}px`:""}_removeDecoration(e){var t;(t=this._decorationElements.get(e))==null||t.remove(),this._decorationElements.delete(e),e.dispose()}};ld=tt([oe(1,$t),oe(2,dr),oe(3,ea),oe(4,fr)],ld);var Ck=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(e){if(e.options.overviewRulerOptions){for(let t of this._zones)if(t.color===e.options.overviewRulerOptions.color&&t.position===e.options.overviewRulerOptions.position){if(this._lineIntersectsZone(t,e.marker.line))return;if(this._lineAdjacentToZone(t,e.marker.line,e.options.overviewRulerOptions.position)){this._addLineToZone(t,e.marker.line);return}}if(this._zonePoolIndex<this._zonePool.length){this._zonePool[this._zonePoolIndex].color=e.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=e.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=e.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=e.marker.line,this._zones.push(this._zonePool[this._zonePoolIndex++]);return}this._zones.push({color:e.options.overviewRulerOptions.color,position:e.options.overviewRulerOptions.position,startBufferLine:e.marker.line,endBufferLine:e.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(e){this._linePadding=e}_lineIntersectsZone(e,t){return t>=e.startBufferLine&&t<=e.endBufferLine}_lineAdjacentToZone(e,t,i){return t>=e.startBufferLine-this._linePadding[i||"full"]&&t<=e.endBufferLine+this._linePadding[i||"full"]}_addLineToZone(e,t){e.startBufferLine=Math.min(e.startBufferLine,t),e.endBufferLine=Math.max(e.endBufferLine,t)}},Bi={full:0,left:0,center:0,right:0},Or={full:0,left:0,center:0,right:0},xo={full:0,left:0,center:0,right:0},Hl=class extends Le{constructor(e,t,i,n,o,l,h,u){var d;super(),this._viewportElement=e,this._screenElement=t,this._bufferService=i,this._decorationService=n,this._renderService=o,this._optionsService=l,this._themeService=h,this._coreBrowserService=u,this._colorZoneStore=new Ck,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(d=this._viewportElement.parentElement)==null||d.insertBefore(this._canvas,this._viewportElement),this._register(Ke(()=>{var _;return(_=this._canvas)==null?void 0:_.remove()}));let p=this._canvas.getContext("2d");if(p)this._ctx=p;else throw new Error("Ctx cannot be null");this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this._register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0))),this._register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this._register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})),this._register(this._renderService.onRender(()=>{(!this._containerHeight||this._containerHeight!==this._screenElement.clientHeight)&&(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._register(this._optionsService.onSpecificOptionChange("overviewRuler",()=>this._queueRefresh(!0))),this._register(this._themeService.onChangeColors(()=>this._queueRefresh())),this._queueRefresh(!0)}get _width(){var e;return((e=this._optionsService.options.overviewRuler)==null?void 0:e.width)||0}_refreshDrawConstants(){let e=Math.floor((this._canvas.width-1)/3),t=Math.ceil((this._canvas.width-1)/3);Or.full=this._canvas.width,Or.left=e,Or.center=t,Or.right=e,this._refreshDrawHeightConstants(),xo.full=1,xo.left=1,xo.center=1+Or.left,xo.right=1+Or.left+Or.center}_refreshDrawHeightConstants(){Bi.full=Math.round(2*this._coreBrowserService.dpr);let e=this._canvas.height/this._bufferService.buffer.lines.length,t=Math.round(Math.max(Math.min(e,12),6)*this._coreBrowserService.dpr);Bi.left=t,Bi.center=t,Bi.right=t}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Bi.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Bi.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Bi.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Bi.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let t of this._decorationService.decorations)this._colorZoneStore.addDecoration(t);this._ctx.lineWidth=1,this._renderRulerOutline();let e=this._colorZoneStore.zones;for(let t of e)t.position!=="full"&&this._renderColorZone(t);for(let t of e)t.position==="full"&&this._renderColorZone(t);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderRulerOutline(){this._ctx.fillStyle=this._themeService.colors.overviewRulerBorder.css,this._ctx.fillRect(0,0,1,this._canvas.height),this._optionsService.rawOptions.overviewRuler.showTopBorder&&this._ctx.fillRect(1,0,this._canvas.width-1,1),this._optionsService.rawOptions.overviewRuler.showBottomBorder&&this._ctx.fillRect(1,this._canvas.height-1,this._canvas.width-1,this._canvas.height)}_renderColorZone(e){this._ctx.fillStyle=e.color,this._ctx.fillRect(xo[e.position||"full"],Math.round((this._canvas.height-1)*(e.startBufferLine/this._bufferService.buffers.active.lines.length)-Bi[e.position||"full"]/2),Or[e.position||"full"],Math.round((this._canvas.height-1)*((e.endBufferLine-e.startBufferLine)/this._bufferService.buffers.active.lines.length)+Bi[e.position||"full"]))}_queueRefresh(e,t){this._shouldUpdateDimensions=e||this._shouldUpdateDimensions,this._shouldUpdateAnchor=t||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};Hl=tt([oe(2,$t),oe(3,ea),oe(4,fr),oe(5,Wt),oe(6,Dn),oe(7,dr)],Hl);var H;(e=>(e.NUL="\0",e.SOH="",e.STX="",e.ETX="",e.EOT="",e.ENQ="",e.ACK="",e.BEL="\x07",e.BS="\b",e.HT="	",e.LF=`
`,e.VT="\v",e.FF="\f",e.CR="\r",e.SO="",e.SI="",e.DLE="",e.DC1="",e.DC2="",e.DC3="",e.DC4="",e.NAK="",e.SYN="",e.ETB="",e.CAN="",e.EM="",e.SUB="",e.ESC="\x1B",e.FS="",e.GS="",e.RS="",e.US="",e.SP=" ",e.DEL=""))(H||(H={}));var Ll;(e=>(e.PAD="",e.HOP="",e.BPH="",e.NBH="",e.IND="",e.NEL="",e.SSA="",e.ESA="",e.HTS="",e.HTJ="",e.VTS="",e.PLD="",e.PLU="",e.RI="",e.SS2="",e.SS3="",e.DCS="",e.PU1="",e.PU2="",e.STS="",e.CCH="",e.MW="",e.SPA="",e.EPA="",e.SOS="",e.SGCI="",e.SCI="",e.CSI="",e.ST="",e.OSC="",e.PM="",e.APC=""))(Ll||(Ll={}));var w0;(e=>e.ST=`${H.ESC}\\`)(w0||(w0={}));var hd=class{constructor(e,t,i,n,o,l){this._textarea=e,this._compositionView=t,this._bufferService=i,this._optionsService=n,this._coreService=o,this._renderService=l,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(e){this._compositionView.textContent=e.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(e){if(this._isComposing||this._isSendingComposition){if(e.keyCode===20||e.keyCode===229||e.keyCode===16||e.keyCode===17||e.keyCode===18)return!1;this._finalizeComposition(!1)}return e.keyCode===229?(this._handleAnyTextareaChanges(),!1):!0}_finalizeComposition(e){if(this._compositionView.classList.remove("active"),this._isComposing=!1,e){let t={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){this._isSendingComposition=!1;let i;t.start+=this._dataAlreadySent.length,this._isComposing?i=this._textarea.value.substring(t.start,this._compositionPosition.start):i=this._textarea.value.substring(t.start),i.length>0&&this._coreService.triggerDataEvent(i,!0)}},0)}else{this._isSendingComposition=!1;let t=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(t,!0)}}_handleAnyTextareaChanges(){let e=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let t=this._textarea.value,i=t.replace(e,"");this._dataAlreadySent=i,t.length>e.length?this._coreService.triggerDataEvent(i,!0):t.length<e.length?this._coreService.triggerDataEvent(`${H.DEL}`,!0):t.length===e.length&&t!==e&&this._coreService.triggerDataEvent(t,!0)}},0)}updateCompositionElements(e){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let t=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),i=this._renderService.dimensions.css.cell.height,n=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,o=t*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=o+"px",this._compositionView.style.top=n+"px",this._compositionView.style.height=i+"px",this._compositionView.style.lineHeight=i+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let l=this._compositionView.getBoundingClientRect();this._textarea.style.left=o+"px",this._textarea.style.top=n+"px",this._textarea.style.width=Math.max(l.width,1)+"px",this._textarea.style.height=Math.max(l.height,1)+"px",this._textarea.style.lineHeight=l.height+"px"}e||setTimeout(()=>this.updateCompositionElements(!0),0)}}};hd=tt([oe(2,$t),oe(3,Wt),oe(4,Ds),oe(5,fr)],hd);var yt=0,St=0,wt=0,Ze=0,l_={css:"#00000000",rgba:0},at;(e=>{function t(o,l,h,u){return u!==void 0?`#${us(o)}${us(l)}${us(h)}${us(u)}`:`#${us(o)}${us(l)}${us(h)}`}e.toCss=t;function i(o,l,h,u=255){return(o<<24|l<<16|h<<8|u)>>>0}e.toRgba=i;function n(o,l,h,u){return{css:e.toCss(o,l,h,u),rgba:e.toRgba(o,l,h,u)}}e.toColor=n})(at||(at={}));var $e;(e=>{function t(p,d){if(Ze=(d.rgba&255)/255,Ze===1)return{css:d.css,rgba:d.rgba};let _=d.rgba>>24&255,g=d.rgba>>16&255,y=d.rgba>>8&255,w=p.rgba>>24&255,x=p.rgba>>16&255,C=p.rgba>>8&255;yt=w+Math.round((_-w)*Ze),St=x+Math.round((g-x)*Ze),wt=C+Math.round((y-C)*Ze);let k=at.toCss(yt,St,wt),L=at.toRgba(yt,St,wt);return{css:k,rgba:L}}e.blend=t;function i(p){return(p.rgba&255)===255}e.isOpaque=i;function n(p,d,_){let g=Nl.ensureContrastRatio(p.rgba,d.rgba,_);if(g)return at.toColor(g>>24&255,g>>16&255,g>>8&255)}e.ensureContrastRatio=n;function o(p){let d=(p.rgba|255)>>>0;return[yt,St,wt]=Nl.toChannels(d),{css:at.toCss(yt,St,wt),rgba:d}}e.opaque=o;function l(p,d){return Ze=Math.round(d*255),[yt,St,wt]=Nl.toChannels(p.rgba),{css:at.toCss(yt,St,wt,Ze),rgba:at.toRgba(yt,St,wt,Ze)}}e.opacity=l;function h(p,d){return Ze=p.rgba&255,l(p,Ze*d/255)}e.multiplyOpacity=h;function u(p){return[p.rgba>>24&255,p.rgba>>16&255,p.rgba>>8&255]}e.toColorRGB=u})($e||($e={}));var Ge;(e=>{let t,i;try{let o=document.createElement("canvas");o.width=1,o.height=1;let l=o.getContext("2d",{willReadFrequently:!0});l&&(t=l,t.globalCompositeOperation="copy",i=t.createLinearGradient(0,0,1,1))}catch{}function n(o){if(o.match(/#[\da-f]{3,8}/i))switch(o.length){case 4:return yt=parseInt(o.slice(1,2).repeat(2),16),St=parseInt(o.slice(2,3).repeat(2),16),wt=parseInt(o.slice(3,4).repeat(2),16),at.toColor(yt,St,wt);case 5:return yt=parseInt(o.slice(1,2).repeat(2),16),St=parseInt(o.slice(2,3).repeat(2),16),wt=parseInt(o.slice(3,4).repeat(2),16),Ze=parseInt(o.slice(4,5).repeat(2),16),at.toColor(yt,St,wt,Ze);case 7:return{css:o,rgba:(parseInt(o.slice(1),16)<<8|255)>>>0};case 9:return{css:o,rgba:parseInt(o.slice(1),16)>>>0}}let l=o.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(l)return yt=parseInt(l[1]),St=parseInt(l[2]),wt=parseInt(l[3]),Ze=Math.round((l[5]===void 0?1:parseFloat(l[5]))*255),at.toColor(yt,St,wt,Ze);if(!t||!i)throw new Error("css.toColor: Unsupported css format");if(t.fillStyle=i,t.fillStyle=o,typeof t.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(t.fillRect(0,0,1,1),[yt,St,wt,Ze]=t.getImageData(0,0,1,1).data,Ze!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:at.toRgba(yt,St,wt,Ze),css:o}}e.toColor=n})(Ge||(Ge={}));var At;(e=>{function t(n){return i(n>>16&255,n>>8&255,n&255)}e.relativeLuminance=t;function i(n,o,l){let h=n/255,u=o/255,p=l/255,d=h<=.03928?h/12.92:Math.pow((h+.055)/1.055,2.4),_=u<=.03928?u/12.92:Math.pow((u+.055)/1.055,2.4),g=p<=.03928?p/12.92:Math.pow((p+.055)/1.055,2.4);return d*.2126+_*.7152+g*.0722}e.relativeLuminance2=i})(At||(At={}));var Nl;(e=>{function t(h,u){if(Ze=(u&255)/255,Ze===1)return u;let p=u>>24&255,d=u>>16&255,_=u>>8&255,g=h>>24&255,y=h>>16&255,w=h>>8&255;return yt=g+Math.round((p-g)*Ze),St=y+Math.round((d-y)*Ze),wt=w+Math.round((_-w)*Ze),at.toRgba(yt,St,wt)}e.blend=t;function i(h,u,p){let d=At.relativeLuminance(h>>8),_=At.relativeLuminance(u>>8);if(tr(d,_)<p){if(_<d){let w=n(h,u,p),x=tr(d,At.relativeLuminance(w>>8));if(x<p){let C=o(h,u,p),k=tr(d,At.relativeLuminance(C>>8));return x>k?w:C}return w}let g=o(h,u,p),y=tr(d,At.relativeLuminance(g>>8));if(y<p){let w=n(h,u,p),x=tr(d,At.relativeLuminance(w>>8));return y>x?g:w}return g}}e.ensureContrastRatio=i;function n(h,u,p){let d=h>>24&255,_=h>>16&255,g=h>>8&255,y=u>>24&255,w=u>>16&255,x=u>>8&255,C=tr(At.relativeLuminance2(y,w,x),At.relativeLuminance2(d,_,g));for(;C<p&&(y>0||w>0||x>0);)y-=Math.max(0,Math.ceil(y*.1)),w-=Math.max(0,Math.ceil(w*.1)),x-=Math.max(0,Math.ceil(x*.1)),C=tr(At.relativeLuminance2(y,w,x),At.relativeLuminance2(d,_,g));return(y<<24|w<<16|x<<8|255)>>>0}e.reduceLuminance=n;function o(h,u,p){let d=h>>24&255,_=h>>16&255,g=h>>8&255,y=u>>24&255,w=u>>16&255,x=u>>8&255,C=tr(At.relativeLuminance2(y,w,x),At.relativeLuminance2(d,_,g));for(;C<p&&(y<255||w<255||x<255);)y=Math.min(255,y+Math.ceil((255-y)*.1)),w=Math.min(255,w+Math.ceil((255-w)*.1)),x=Math.min(255,x+Math.ceil((255-x)*.1)),C=tr(At.relativeLuminance2(y,w,x),At.relativeLuminance2(d,_,g));return(y<<24|w<<16|x<<8|255)>>>0}e.increaseLuminance=o;function l(h){return[h>>24&255,h>>16&255,h>>8&255,h&255]}e.toChannels=l})(Nl||(Nl={}));function us(e){let t=e.toString(16);return t.length<2?"0"+t:t}function tr(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}var bk=class extends Zo{constructor(e,t,i){super(),this.content=0,this.combinedData="",this.fg=e.fg,this.bg=e.bg,this.combinedData=t,this._width=i}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},$l=class{constructor(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new _i}register(e){let t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id}deregister(e){for(let t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1}getJoinedCharacters(e){if(this._characterJoiners.length===0)return[];let t=this._bufferService.buffer.lines.get(e);if(!t||t.length===0)return[];let i=[],n=t.translateToString(!0),o=0,l=0,h=0,u=t.getFg(0),p=t.getBg(0);for(let d=0;d<t.getTrimmedLength();d++)if(t.loadCell(d,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==u||this._workCell.bg!==p){if(d-o>1){let _=this._getJoinedRanges(n,h,l,t,o);for(let g=0;g<_.length;g++)i.push(_[g])}o=d,h=l,u=this._workCell.fg,p=this._workCell.bg}l+=this._workCell.getChars().length||Yr.length}if(this._bufferService.cols-o>1){let d=this._getJoinedRanges(n,h,l,t,o);for(let _=0;_<d.length;_++)i.push(d[_])}return i}_getJoinedRanges(e,t,i,n,o){let l=e.substring(t,i),h=[];try{h=this._characterJoiners[0].handler(l)}catch(u){console.error(u)}for(let u=1;u<this._characterJoiners.length;u++)try{let p=this._characterJoiners[u].handler(l);for(let d=0;d<p.length;d++)$l._mergeRanges(h,p[d])}catch(p){console.error(p)}return this._stringRangesToCellRanges(h,n,o),h}_stringRangesToCellRanges(e,t,i){let n=0,o=!1,l=0,h=e[n];if(h){for(let u=i;u<this._bufferService.cols;u++){let p=t.getWidth(u),d=t.getString(u).length||Yr.length;if(p!==0){if(!o&&h[0]<=l&&(h[0]=u,o=!0),h[1]<=l){if(h[1]=u,h=e[++n],!h)break;h[0]<=l?(h[0]=u,o=!0):o=!1}l+=d}}h&&(h[1]=this._bufferService.cols)}}static _mergeRanges(e,t){let i=!1;for(let n=0;n<e.length;n++){let o=e[n];if(i){if(t[1]<=o[0])return e[n-1][1]=t[1],e;if(t[1]<=o[1])return e[n-1][1]=Math.max(t[1],o[1]),e.splice(n,1),e;e.splice(n,1),n--}else{if(t[1]<=o[0])return e.splice(n,0,t),e;if(t[1]<=o[1])return o[0]=Math.min(t[0],o[0]),e;t[0]<o[1]&&(o[0]=Math.min(t[0],o[0]),i=!0);continue}}return i?e[e.length-1][1]=t[1]:e.push(t),e}};$l=tt([oe(0,$t)],$l);function kk(e){return 57508<=e&&e<=57558}function Ek(e){return 9472<=e&&e<=9631}function Rk(e){return kk(e)||Ek(e)}function Pk(){return{css:{canvas:vl(),cell:vl()},device:{canvas:vl(),cell:vl(),char:{width:0,height:0,left:0,top:0}}}}function vl(){return{width:0,height:0}}var cd=class{constructor(e,t,i,n,o,l,h){this._document=e,this._characterJoinerService=t,this._optionsService=i,this._coreBrowserService=n,this._coreService=o,this._decorationService=l,this._themeService=h,this._workCell=new _i,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(e,t,i){this._selectionStart=e,this._selectionEnd=t,this._columnSelectMode=i}createRow(e,t,i,n,o,l,h,u,p,d,_){let g=[],y=this._characterJoinerService.getJoinedCharacters(t),w=this._themeService.colors,x=e.getNoBgTrimmedLength();i&&x<l+1&&(x=l+1);let C,k=0,L="",W=0,O=0,T=0,$=0,G=!1,le=0,ue=!1,ye=0,ie=0,se=[],z=d!==-1&&_!==-1;for(let j=0;j<x;j++){e.loadCell(j,this._workCell);let U=this._workCell.getWidth();if(U===0)continue;let V=!1,K=j>=ie,te=j,A=this._workCell;if(y.length>0&&j===y[0][0]&&K){let Te=y.shift(),Xr=this._isCellInSelection(Te[0],t);for(W=Te[0]+1;W<Te[1];W++)K&&(K=Xr===this._isCellInSelection(W,t));K&&(K=!i||l<Te[0]||l>=Te[1]),K?(V=!0,A=new bk(this._workCell,e.translateToString(!0,Te[0],Te[1]),Te[1]-Te[0]),te=Te[1]-1,U=A.getWidth()):ie=Te[1]}let re=this._isCellInSelection(j,t),Z=i&&j===l,E=z&&j>=d&&j<=_,M=!1;this._decorationService.forEachDecorationAtCell(j,t,void 0,Te=>{M=!0});let Q=A.getChars()||Yr;if(Q===" "&&(A.isUnderline()||A.isOverline())&&(Q=""),ye=U*u-p.get(Q,A.isBold(),A.isItalic()),!C)C=this._document.createElement("span");else if(k&&(re&&ue||!re&&!ue&&A.bg===O)&&(re&&ue&&w.selectionForeground||A.fg===T)&&A.extended.ext===$&&E===G&&ye===le&&!Z&&!V&&!M&&K){A.isInvisible()?L+=Yr:L+=Q,k++;continue}else k&&(C.textContent=L),C=this._document.createElement("span"),k=0,L="";if(O=A.bg,T=A.fg,$=A.extended.ext,G=E,le=ye,ue=re,V&&l>=j&&l<=te&&(l=j),!this._coreService.isCursorHidden&&Z&&this._coreService.isCursorInitialized){if(se.push("xterm-cursor"),this._coreBrowserService.isFocused)h&&se.push("xterm-cursor-blink"),se.push(n==="bar"?"xterm-cursor-bar":n==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(o)switch(o){case"outline":se.push("xterm-cursor-outline");break;case"block":se.push("xterm-cursor-block");break;case"bar":se.push("xterm-cursor-bar");break;case"underline":se.push("xterm-cursor-underline");break}}if(A.isBold()&&se.push("xterm-bold"),A.isItalic()&&se.push("xterm-italic"),A.isDim()&&se.push("xterm-dim"),A.isInvisible()?L=Yr:L=A.getChars()||Yr,A.isUnderline()&&(se.push(`xterm-underline-${A.extended.underlineStyle}`),L===" "&&(L=""),!A.isUnderlineColorDefault()))if(A.isUnderlineColorRGB())C.style.textDecorationColor=`rgb(${Zo.toColorRGB(A.getUnderlineColor()).join(",")})`;else{let Te=A.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&A.isBold()&&Te<8&&(Te+=8),C.style.textDecorationColor=w.ansi[Te].css}A.isOverline()&&(se.push("xterm-overline"),L===" "&&(L="")),A.isStrikethrough()&&se.push("xterm-strikethrough"),E&&(C.style.textDecoration="underline");let he=A.getFgColor(),_e=A.getFgColorMode(),pe=A.getBgColor(),Ee=A.getBgColorMode(),de=!!A.isInverse();if(de){let Te=he;he=pe,pe=Te;let Xr=_e;_e=Ee,Ee=Xr}let ge,Ve,Ct=!1;this._decorationService.forEachDecorationAtCell(j,t,void 0,Te=>{Te.options.layer!=="top"&&Ct||(Te.backgroundColorRGB&&(Ee=50331648,pe=Te.backgroundColorRGB.rgba>>8&16777215,ge=Te.backgroundColorRGB),Te.foregroundColorRGB&&(_e=50331648,he=Te.foregroundColorRGB.rgba>>8&16777215,Ve=Te.foregroundColorRGB),Ct=Te.options.layer==="top")}),!Ct&&re&&(ge=this._coreBrowserService.isFocused?w.selectionBackgroundOpaque:w.selectionInactiveBackgroundOpaque,pe=ge.rgba>>8&16777215,Ee=50331648,Ct=!0,w.selectionForeground&&(_e=50331648,he=w.selectionForeground.rgba>>8&16777215,Ve=w.selectionForeground)),Ct&&se.push("xterm-decoration-top");let Ot;switch(Ee){case 16777216:case 33554432:Ot=w.ansi[pe],se.push(`xterm-bg-${pe}`);break;case 50331648:Ot=at.toColor(pe>>16,pe>>8&255,pe&255),this._addStyle(C,`background-color:#${h_((pe>>>0).toString(16),"0",6)}`);break;case 0:default:de?(Ot=w.foreground,se.push("xterm-bg-257")):Ot=w.background}switch(ge||A.isDim()&&(ge=$e.multiplyOpacity(Ot,.5)),_e){case 16777216:case 33554432:A.isBold()&&he<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(he+=8),this._applyMinimumContrast(C,Ot,w.ansi[he],A,ge,void 0)||se.push(`xterm-fg-${he}`);break;case 50331648:let Te=at.toColor(he>>16&255,he>>8&255,he&255);this._applyMinimumContrast(C,Ot,Te,A,ge,Ve)||this._addStyle(C,`color:#${h_(he.toString(16),"0",6)}`);break;case 0:default:this._applyMinimumContrast(C,Ot,w.foreground,A,ge,Ve)||de&&se.push("xterm-fg-257")}se.length&&(C.className=se.join(" "),se.length=0),!Z&&!V&&!M&&K?k++:C.textContent=L,ye!==this.defaultSpacing&&(C.style.letterSpacing=`${ye}px`),g.push(C),j=te}return C&&k&&(C.textContent=L),g}_applyMinimumContrast(e,t,i,n,o,l){if(this._optionsService.rawOptions.minimumContrastRatio===1||Rk(n.getCode()))return!1;let h=this._getContrastCache(n),u;if(!o&&!l&&(u=h.getColor(t.rgba,i.rgba)),u===void 0){let p=this._optionsService.rawOptions.minimumContrastRatio/(n.isDim()?2:1);u=$e.ensureContrastRatio(o||t,l||i,p),h.setColor((o||t).rgba,(l||i).rgba,u??null)}return u?(this._addStyle(e,`color:${u.css}`),!0):!1}_getContrastCache(e){return e.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(e,t){e.setAttribute("style",`${e.getAttribute("style")||""}${t};`)}_isCellInSelection(e,t){let i=this._selectionStart,n=this._selectionEnd;return!i||!n?!1:this._columnSelectMode?i[0]<=n[0]?e>=i[0]&&t>=i[1]&&e<n[0]&&t<=n[1]:e<i[0]&&t>=i[1]&&e>=n[0]&&t<=n[1]:t>i[1]&&t<n[1]||i[1]===n[1]&&t===i[1]&&e>=i[0]&&e<n[0]||i[1]<n[1]&&t===n[1]&&e<n[0]||i[1]<n[1]&&t===i[1]&&e>=i[0]}};cd=tt([oe(1,r0),oe(2,Wt),oe(3,dr),oe(4,Ds),oe(5,ea),oe(6,Dn)],cd);function h_(e,t,i){for(;e.length<i;)e=t+e;return e}var Lk=class{constructor(e,t){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=e.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let i=e.createElement("span");i.classList.add("xterm-char-measure-element");let n=e.createElement("span");n.classList.add("xterm-char-measure-element"),n.style.fontWeight="bold";let o=e.createElement("span");o.classList.add("xterm-char-measure-element"),o.style.fontStyle="italic";let l=e.createElement("span");l.classList.add("xterm-char-measure-element"),l.style.fontWeight="bold",l.style.fontStyle="italic",this._measureElements=[i,n,o,l],this._container.appendChild(i),this._container.appendChild(n),this._container.appendChild(o),this._container.appendChild(l),t.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(e,t,i,n){e===this._font&&t===this._fontSize&&i===this._weight&&n===this._weightBold||(this._font=e,this._fontSize=t,this._weight=i,this._weightBold=n,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${i}`,this._measureElements[1].style.fontWeight=`${n}`,this._measureElements[2].style.fontWeight=`${i}`,this._measureElements[3].style.fontWeight=`${n}`,this.clear())}get(e,t,i){let n=0;if(!t&&!i&&e.length===1&&(n=e.charCodeAt(0))<256){if(this._flat[n]!==-9999)return this._flat[n];let h=this._measure(e,0);return h>0&&(this._flat[n]=h),h}let o=e;t&&(o+="B"),i&&(o+="I");let l=this._holey.get(o);if(l===void 0){let h=0;t&&(h|=1),i&&(h|=2),l=this._measure(e,h),l>0&&this._holey.set(o,l)}return l}_measure(e,t){let i=this._measureElements[t];return i.textContent=e.repeat(32),i.offsetWidth/32}},Nk=class{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(e,t,i,n=!1){if(this.selectionStart=t,this.selectionEnd=i,!t||!i||t[0]===i[0]&&t[1]===i[1]){this.clear();return}let o=e.buffers.active.ydisp,l=t[1]-o,h=i[1]-o,u=Math.max(l,0),p=Math.min(h,e.rows-1);if(u>=e.rows||p<0){this.clear();return}this.hasSelection=!0,this.columnSelectMode=n,this.viewportStartRow=l,this.viewportEndRow=h,this.viewportCappedStartRow=u,this.viewportCappedEndRow=p,this.startCol=t[0],this.endCol=i[0]}isCellSelected(e,t,i){return this.hasSelection?(i-=e.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?t>=this.startCol&&i>=this.viewportCappedStartRow&&t<this.endCol&&i<=this.viewportCappedEndRow:t<this.startCol&&i>=this.viewportCappedStartRow&&t>=this.endCol&&i<=this.viewportCappedEndRow:i>this.viewportStartRow&&i<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&i===this.viewportStartRow&&t>=this.startCol&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportEndRow&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportStartRow&&t>=this.startCol):!1}};function Dk(){return new Nk}var pu="xterm-dom-renderer-owner-",di="xterm-rows",yl="xterm-fg-",c_="xterm-bg-",Co="xterm-focus",Sl="xterm-selection",Mk=1,ud=class extends Le{constructor(e,t,i,n,o,l,h,u,p,d,_,g,y,w){super(),this._terminal=e,this._document=t,this._element=i,this._screenElement=n,this._viewportElement=o,this._helperContainer=l,this._linkifier2=h,this._charSizeService=p,this._optionsService=d,this._bufferService=_,this._coreService=g,this._coreBrowserService=y,this._themeService=w,this._terminalClass=Mk++,this._rowElements=[],this._selectionRenderModel=Dk(),this.onRequestRedraw=this._register(new ee).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(di),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(Sl),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=Pk(),this._updateDimensions(),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._themeService.onChangeColors(x=>this._injectCss(x))),this._injectCss(this._themeService.colors),this._rowFactory=u.createInstance(cd,document),this._element.classList.add(pu+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this._register(this._linkifier2.onShowLinkUnderline(x=>this._handleLinkHover(x))),this._register(this._linkifier2.onHideLinkUnderline(x=>this._handleLinkLeave(x))),this._register(Ke(()=>{this._element.classList.remove(pu+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new Lk(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let e=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*e,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*e),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/e),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/e),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let i of this._rowElements)i.style.width=`${this.dimensions.css.canvas.width}px`,i.style.height=`${this.dimensions.css.cell.height}px`,i.style.lineHeight=`${this.dimensions.css.cell.height}px`,i.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let t=`${this._terminalSelector} .${di} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=t,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(e){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let t=`${this._terminalSelector} .${di} { pointer-events: none; color: ${e.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;t+=`${this._terminalSelector} .${di} .xterm-dim { color: ${$e.multiplyOpacity(e.foreground,.5).css};}`,t+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let i=`blink_underline_${this._terminalClass}`,n=`blink_bar_${this._terminalClass}`,o=`blink_block_${this._terminalClass}`;t+=`@keyframes ${i} { 50% {  border-bottom-style: hidden; }}`,t+=`@keyframes ${n} { 50% {  box-shadow: none; }}`,t+=`@keyframes ${o} { 0% {  background-color: ${e.cursor.css};  color: ${e.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${e.cursor.css}; }}`,t+=`${this._terminalSelector} .${di}.${Co} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${i} 1s step-end infinite;}${this._terminalSelector} .${di}.${Co} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${n} 1s step-end infinite;}${this._terminalSelector} .${di}.${Co} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${o} 1s step-end infinite;}${this._terminalSelector} .${di} .xterm-cursor.xterm-cursor-block { background-color: ${e.cursor.css}; color: ${e.cursorAccent.css};}${this._terminalSelector} .${di} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${e.cursor.css} !important; color: ${e.cursorAccent.css} !important;}${this._terminalSelector} .${di} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${e.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${di} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${e.cursor.css} inset;}${this._terminalSelector} .${di} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${e.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,t+=`${this._terminalSelector} .${Sl} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${Sl} div { position: absolute; background-color: ${e.selectionBackgroundOpaque.css};}${this._terminalSelector} .${Sl} div { position: absolute; background-color: ${e.selectionInactiveBackgroundOpaque.css};}`;for(let[l,h]of e.ansi.entries())t+=`${this._terminalSelector} .${yl}${l} { color: ${h.css}; }${this._terminalSelector} .${yl}${l}.xterm-dim { color: ${$e.multiplyOpacity(h,.5).css}; }${this._terminalSelector} .${c_}${l} { background-color: ${h.css}; }`;t+=`${this._terminalSelector} .${yl}257 { color: ${$e.opaque(e.background).css}; }${this._terminalSelector} .${yl}257.xterm-dim { color: ${$e.multiplyOpacity($e.opaque(e.background),.5).css}; }${this._terminalSelector} .${c_}257 { background-color: ${e.foreground.css}; }`,this._themeStyleElement.textContent=t}_setDefaultSpacing(){let e=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${e}px`,this._rowFactory.defaultSpacing=e}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(e,t){for(let i=this._rowElements.length;i<=t;i++){let n=this._document.createElement("div");this._rowContainer.appendChild(n),this._rowElements.push(n)}for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(e,t){this._refreshRowElements(e,t),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(Co),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(Co),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(e,t,i){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(e,t,i),this.renderRows(0,this._bufferService.rows-1),!e||!t||(this._selectionRenderModel.update(this._terminal,e,t,i),!this._selectionRenderModel.hasSelection))return;let n=this._selectionRenderModel.viewportStartRow,o=this._selectionRenderModel.viewportEndRow,l=this._selectionRenderModel.viewportCappedStartRow,h=this._selectionRenderModel.viewportCappedEndRow,u=this._document.createDocumentFragment();if(i){let p=e[0]>t[0];u.appendChild(this._createSelectionElement(l,p?t[0]:e[0],p?e[0]:t[0],h-l+1))}else{let p=n===l?e[0]:0,d=l===o?t[0]:this._bufferService.cols;u.appendChild(this._createSelectionElement(l,p,d));let _=h-l-1;if(u.appendChild(this._createSelectionElement(l+1,0,this._bufferService.cols,_)),l!==h){let g=o===h?t[0]:this._bufferService.cols;u.appendChild(this._createSelectionElement(h,0,g))}}this._selectionContainer.appendChild(u)}_createSelectionElement(e,t,i,n=1){let o=this._document.createElement("div"),l=t*this.dimensions.css.cell.width,h=this.dimensions.css.cell.width*(i-t);return l+h>this.dimensions.css.canvas.width&&(h=this.dimensions.css.canvas.width-l),o.style.height=`${n*this.dimensions.css.cell.height}px`,o.style.top=`${e*this.dimensions.css.cell.height}px`,o.style.left=`${l}px`,o.style.width=`${h}px`,o}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let e of this._rowElements)e.replaceChildren()}renderRows(e,t){let i=this._bufferService.buffer,n=i.ybase+i.y,o=Math.min(i.x,this._bufferService.cols-1),l=this._coreService.decPrivateModes.cursorBlink??this._optionsService.rawOptions.cursorBlink,h=this._coreService.decPrivateModes.cursorStyle??this._optionsService.rawOptions.cursorStyle,u=this._optionsService.rawOptions.cursorInactiveStyle;for(let p=e;p<=t;p++){let d=p+i.ydisp,_=this._rowElements[p],g=i.lines.get(d);if(!_||!g)break;_.replaceChildren(...this._rowFactory.createRow(g,d,d===n,h,u,o,l,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${pu}${this._terminalClass}`}_handleLinkHover(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)}_handleLinkLeave(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)}_setCellUnderline(e,t,i,n,o,l){i<0&&(e=0),n<0&&(t=0);let h=this._bufferService.rows-1;i=Math.max(Math.min(i,h),0),n=Math.max(Math.min(n,h),0),o=Math.min(o,this._bufferService.cols);let u=this._bufferService.buffer,p=u.ybase+u.y,d=Math.min(u.x,o-1),_=this._optionsService.rawOptions.cursorBlink,g=this._optionsService.rawOptions.cursorStyle,y=this._optionsService.rawOptions.cursorInactiveStyle;for(let w=i;w<=n;++w){let x=w+u.ydisp,C=this._rowElements[w],k=u.lines.get(x);if(!C||!k)break;C.replaceChildren(...this._rowFactory.createRow(k,x,x===p,g,y,d,_,this.dimensions.css.cell.width,this._widthCache,l?w===i?e:0:-1,l?(w===n?t:o)-1:-1))}}};ud=tt([oe(7,Wd),oe(8,Xl),oe(9,Wt),oe(10,$t),oe(11,Ds),oe(12,dr),oe(13,Dn)],ud);var dd=class extends Le{constructor(e,t,i){super(),this._optionsService=i,this.width=0,this.height=0,this._onCharSizeChange=this._register(new ee),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this._register(new Ok(this._optionsService))}catch{this._measureStrategy=this._register(new Tk(e,t,this._optionsService))}this._register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){let e=this._measureStrategy.measure();(e.width!==this.width||e.height!==this.height)&&(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};dd=tt([oe(2,Wt)],dd);var x0=class extends Le{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(e,t){e!==void 0&&e>0&&t!==void 0&&t>0&&(this._result.width=e,this._result.height=t)}},Tk=class extends x0{constructor(e,t,i){super(),this._document=e,this._parentElement=t,this._optionsService=i,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}},Ok=class extends x0{constructor(e){super(),this._optionsService=e,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let t=this._ctx.measureText("W");if(!("width"in t&&"fontBoundingBoxAscent"in t&&"fontBoundingBoxDescent"in t))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let e=this._ctx.measureText("W");return this._validateAndSet(e.width,e.fontBoundingBoxAscent+e.fontBoundingBoxDescent),this._result}},Bk=class extends Le{constructor(e,t,i){super(),this._textarea=e,this._window=t,this.mainDocument=i,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=this._register(new Ik(this._window)),this._onDprChange=this._register(new ee),this.onDprChange=this._onDprChange.event,this._onWindowChange=this._register(new ee),this.onWindowChange=this._onWindowChange.event,this._register(this.onWindowChange(n=>this._screenDprMonitor.setWindow(n))),this._register(Rt.forward(this._screenDprMonitor.onDprChange,this._onDprChange)),this._register(be(this._textarea,"focus",()=>this._isFocused=!0)),this._register(be(this._textarea,"blur",()=>this._isFocused=!1))}get window(){return this._window}set window(e){this._window!==e&&(this._window=e,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}},Ik=class extends Le{constructor(e){super(),this._parentWindow=e,this._windowResizeListener=this._register(new kn),this._onDprChange=this._register(new ee),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this._register(Ke(()=>this.clearListener()))}setWindow(e){this._parentWindow=e,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=be(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var e;this._outerListener&&((e=this._resolutionMediaMatchList)==null||e.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){!this._resolutionMediaMatchList||!this._outerListener||(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}},Ak=class extends Le{constructor(){super(),this.linkProviders=[],this._register(Ke(()=>this.linkProviders.length=0))}registerLinkProvider(e){return this.linkProviders.push(e),{dispose:()=>{let t=this.linkProviders.indexOf(e);t!==-1&&this.linkProviders.splice(t,1)}}}};function Xd(e,t,i){let n=i.getBoundingClientRect(),o=e.getComputedStyle(i),l=parseInt(o.getPropertyValue("padding-left")),h=parseInt(o.getPropertyValue("padding-top"));return[t.clientX-n.left-l,t.clientY-n.top-h]}function jk(e,t,i,n,o,l,h,u,p){if(!l)return;let d=Xd(e,t,i);if(d)return d[0]=Math.ceil((d[0]+(p?h/2:0))/h),d[1]=Math.ceil(d[1]/u),d[0]=Math.min(Math.max(d[0],1),n+(p?1:0)),d[1]=Math.min(Math.max(d[1],1),o),d}var fd=class{constructor(e,t){this._renderService=e,this._charSizeService=t}getCoords(e,t,i,n,o){return jk(window,e,t,i,n,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,o)}getMouseReportCoords(e,t){let i=Xd(window,e,t);if(this._charSizeService.hasValidSize)return i[0]=Math.min(Math.max(i[0],0),this._renderService.dimensions.css.canvas.width-1),i[1]=Math.min(Math.max(i[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(i[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(i[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(i[0]),y:Math.floor(i[1])}}};fd=tt([oe(0,fr),oe(1,Xl)],fd);var Fk=class{constructor(t,i){this._renderCallback=t,this._coreBrowserService=i,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(t){return this._refreshCallbacks.push(t),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(t,i,n){this._rowCount=n,t=t!==void 0?t:0,i=i!==void 0?i:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,t):t,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,i):i,!this._animationFrame&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0){this._runRefreshCallbacks();return}let t=Math.max(this._rowStart,0),i=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(t,i),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let t of this._refreshCallbacks)t(0);this._refreshCallbacks=[]}},C0={};QC(C0,{getSafariVersion:()=>Hk,isChromeOS:()=>R0,isFirefox:()=>b0,isIpad:()=>$k,isIphone:()=>Wk,isLegacyEdge:()=>zk,isLinux:()=>Jd,isMac:()=>Wl,isNode:()=>Jl,isSafari:()=>k0,isWindows:()=>E0});var Jl=typeof process<"u"&&"title"in process,ta=Jl?"node":navigator.userAgent,ia=Jl?"node":navigator.platform,b0=ta.includes("Firefox"),zk=ta.includes("Edge"),k0=/^((?!chrome|android).)*safari/i.test(ta);function Hk(){if(!k0)return 0;let e=ta.match(/Version\/(\d+)/);return e===null||e.length<2?0:parseInt(e[1])}var Wl=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(ia),$k=ia==="iPad",Wk=ia==="iPhone",E0=["Windows","Win16","Win32","WinCE"].includes(ia),Jd=ia.indexOf("Linux")>=0,R0=/\bCrOS\b/.test(ta),P0=class{constructor(){this._tasks=[],this._i=0}enqueue(e){this._tasks.push(e),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(e){this._idleCallback=void 0;let t=0,i=0,n=e.timeRemaining(),o=0;for(;this._i<this._tasks.length;){if(t=performance.now(),this._tasks[this._i]()||this._i++,t=Math.max(1,performance.now()-t),i=Math.max(t,i),o=e.timeRemaining(),i*1.5>o){n-t<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-t))}ms`),this._start();return}n=o}this.clear()}},Uk=class extends P0{_requestCallback(e){return setTimeout(()=>e(this._createDeadline(16)))}_cancelCallback(e){clearTimeout(e)}_createDeadline(e){let t=performance.now()+e;return{timeRemaining:()=>Math.max(0,t-performance.now())}}},Kk=class extends P0{_requestCallback(e){return requestIdleCallback(e)}_cancelCallback(e){cancelIdleCallback(e)}},Ul=!Jl&&"requestIdleCallback"in window?Kk:Uk,Vk=class{constructor(){this._queue=new Ul}set(e){this._queue.clear(),this._queue.enqueue(e)}flush(){this._queue.flush()}},pd=class extends Le{constructor(e,t,i,n,o,l,h,u,p){super(),this._rowCount=e,this._optionsService=i,this._charSizeService=n,this._coreService=o,this._coreBrowserService=u,this._renderer=this._register(new kn),this._pausedResizeTask=new Vk,this._observerDisposable=this._register(new kn),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this._register(new ee),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this._register(new ee),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this._register(new ee),this.onRender=this._onRender.event,this._onRefreshRequest=this._register(new ee),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new Fk((d,_)=>this._renderRows(d,_),this._coreBrowserService),this._register(this._renderDebouncer),this._syncOutputHandler=new qk(this._coreBrowserService,this._coreService,()=>this._fullRefresh()),this._register(Ke(()=>this._syncOutputHandler.dispose())),this._register(this._coreBrowserService.onDprChange(()=>this.handleDevicePixelRatioChange())),this._register(h.onResize(()=>this._fullRefresh())),this._register(h.buffers.onBufferActivate(()=>{var d;return(d=this._renderer.value)==null?void 0:d.clear()})),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this._register(l.onDecorationRegistered(()=>this._fullRefresh())),this._register(l.onDecorationRemoved(()=>this._fullRefresh())),this._register(this._optionsService.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(h.cols,h.rows),this._fullRefresh()})),this._register(this._optionsService.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(h.buffer.y,h.buffer.y,!0))),this._register(p.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(this._coreBrowserService.window,t),this._register(this._coreBrowserService.onWindowChange(d=>this._registerIntersectionObserver(d,t)))}get dimensions(){return this._renderer.value.dimensions}_registerIntersectionObserver(e,t){if("IntersectionObserver"in e){let i=new e.IntersectionObserver(n=>this._handleIntersectionChange(n[n.length-1]),{threshold:0});i.observe(t),this._observerDisposable.value=Ke(()=>i.disconnect())}}_handleIntersectionChange(e){this._isPaused=e.isIntersecting===void 0?e.intersectionRatio===0:!e.isIntersecting,!this._isPaused&&!this._charSizeService.hasValidSize&&this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(e,t,i=!1){if(this._isPaused){this._needsFullRefresh=!0;return}if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(e,t);return}let n=this._syncOutputHandler.flush();n&&(e=Math.min(e,n.start),t=Math.max(t,n.end)),i||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,t,this._rowCount)}_renderRows(e,t){if(this._renderer.value){if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(e,t);return}e=Math.min(e,this._rowCount-1),t=Math.min(t,this._rowCount-1),this._renderer.value.renderRows(e,t),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:t}),this._onRender.fire({start:e,end:t}),this._isNextRenderRedrawOnly=!0}}resize(e,t){this._rowCount=t,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(e){this._renderer.value=e,this._renderer.value&&(this._renderer.value.onRequestRedraw(t=>this.refreshRows(t.start,t.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(e){return this._renderDebouncer.addRefreshCallback(e)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var e,t;this._renderer.value&&((t=(e=this._renderer.value).clearTextureAtlas)==null||t.call(e),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(e,t){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var i;return(i=this._renderer.value)==null?void 0:i.handleResize(e,t)}):this._renderer.value.handleResize(e,t),this._fullRefresh())}handleCharSizeChanged(){var e;(e=this._renderer.value)==null||e.handleCharSizeChanged()}handleBlur(){var e;(e=this._renderer.value)==null||e.handleBlur()}handleFocus(){var e;(e=this._renderer.value)==null||e.handleFocus()}handleSelectionChanged(e,t,i){var n;this._selectionState.start=e,this._selectionState.end=t,this._selectionState.columnSelectMode=i,(n=this._renderer.value)==null||n.handleSelectionChanged(e,t,i)}handleCursorMove(){var e;(e=this._renderer.value)==null||e.handleCursorMove()}clear(){var e;(e=this._renderer.value)==null||e.clear()}};pd=tt([oe(2,Wt),oe(3,Xl),oe(4,Ds),oe(5,ea),oe(6,$t),oe(7,dr),oe(8,Dn)],pd);var qk=class{constructor(e,t,i){this._coreBrowserService=e,this._coreService=t,this._onTimeout=i,this._start=0,this._end=0,this._isBuffering=!1}bufferRows(e,t){this._isBuffering?(this._start=Math.min(this._start,e),this._end=Math.max(this._end,t)):(this._start=e,this._end=t,this._isBuffering=!0),this._timeout===void 0&&(this._timeout=this._coreBrowserService.window.setTimeout(()=>{this._timeout=void 0,this._coreService.decPrivateModes.synchronizedOutput=!1,this._onTimeout()},1e3))}flush(){if(this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0),!this._isBuffering)return;let e={start:this._start,end:this._end};return this._isBuffering=!1,e}dispose(){this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0)}};function Yk(e,t,i,n){let o=i.buffer.x,l=i.buffer.y;if(!i.buffer.hasScrollback)return Xk(o,l,e,t,i,n)+Zl(l,t,i,n)+Jk(o,l,e,t,i,n);let h;if(l===t)return h=o>e?"D":"C",Wo(Math.abs(o-e),$o(h,n));h=l>t?"D":"C";let u=Math.abs(l-t),p=Gk(l>t?e:o,i)+(u-1)*i.cols+1+Qk(l>t?o:e);return Wo(p,$o(h,n))}function Qk(e,t){return e-1}function Gk(e,t){return t.cols-e}function Xk(e,t,i,n,o,l){return Zl(t,n,o,l).length===0?"":Wo(N0(e,t,e,t-Ns(t,o),!1,o).length,$o("D",l))}function Zl(e,t,i,n){let o=e-Ns(e,i),l=t-Ns(t,i),h=Math.abs(o-l)-Zk(e,t,i);return Wo(h,$o(L0(e,t),n))}function Jk(e,t,i,n,o,l){let h;Zl(t,n,o,l).length>0?h=n-Ns(n,o):h=t;let u=n,p=e2(e,t,i,n,o,l);return Wo(N0(e,h,i,u,p==="C",o).length,$o(p,l))}function Zk(e,t,i){var h;let n=0,o=e-Ns(e,i),l=t-Ns(t,i);for(let u=0;u<Math.abs(o-l);u++){let p=L0(e,t)==="A"?-1:1;(h=i.buffer.lines.get(o+p*u))!=null&&h.isWrapped&&n++}return n}function Ns(e,t){let i=0,n=t.buffer.lines.get(e),o=n==null?void 0:n.isWrapped;for(;o&&e>=0&&e<t.rows;)i++,n=t.buffer.lines.get(--e),o=n==null?void 0:n.isWrapped;return i}function e2(e,t,i,n,o,l){let h;return Zl(i,n,o,l).length>0?h=n-Ns(n,o):h=t,e<i&&h<=n||e>=i&&h<n?"C":"D"}function L0(e,t){return e>t?"A":"B"}function N0(e,t,i,n,o,l){let h=e,u=t,p="";for(;(h!==i||u!==n)&&u>=0&&u<l.buffer.lines.length;)h+=o?1:-1,o&&h>l.cols-1?(p+=l.buffer.translateBufferLineToString(u,!1,e,h),h=0,e=0,u++):!o&&h<0&&(p+=l.buffer.translateBufferLineToString(u,!1,0,e+1),h=l.cols-1,e=h,u--);return p+l.buffer.translateBufferLineToString(u,!1,e,h)}function $o(e,t){let i=t?"O":"[";return H.ESC+i+e}function Wo(e,t){e=Math.floor(e);let i="";for(let n=0;n<e;n++)i+=t;return i}var t2=class{constructor(e){this._bufferService=e,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:!this.selectionEnd||!this.selectionStart?this.selectionStart:this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?e%this._bufferService.cols===0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)-1]:[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[e,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[Math.max(e,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let e=this.selectionStart,t=this.selectionEnd;return!e||!t?!1:e[1]>t[1]||e[1]===t[1]&&e[0]>t[0]}handleTrim(e){return this.selectionStart&&(this.selectionStart[1]-=e),this.selectionEnd&&(this.selectionEnd[1]-=e),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}};function u_(e,t){if(e.start.y>e.end.y)throw new Error(`Buffer range end (${e.end.x}, ${e.end.y}) cannot be before start (${e.start.x}, ${e.start.y})`);return t*(e.end.y-e.start.y)+(e.end.x-e.start.x+1)}var mu=50,i2=15,r2=50,s2=500,n2="",o2=new RegExp(n2,"g"),md=class extends Le{constructor(e,t,i,n,o,l,h,u,p){super(),this._element=e,this._screenElement=t,this._linkifier=i,this._bufferService=n,this._coreService=o,this._mouseService=l,this._optionsService=h,this._renderService=u,this._coreBrowserService=p,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new _i,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this._register(new ee),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this._register(new ee),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this._register(new ee),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this._register(new ee),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=d=>this._handleMouseMove(d),this._mouseUpListener=d=>this._handleMouseUp(d),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(d=>this._handleTrim(d)),this._register(this._bufferService.buffers.onBufferActivate(d=>this._handleBufferActivate(d))),this.enable(),this._model=new t2(this._bufferService),this._activeSelectionMode=0,this._register(Ke(()=>{this._removeMouseDownListeners()})),this._register(this._bufferService.onResize(d=>{d.rowsChanged&&this.clearSelection()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;return!e||!t?!1:e[0]!==t[0]||e[1]!==t[1]}get selectionText(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;if(!e||!t)return"";let i=this._bufferService.buffer,n=[];if(this._activeSelectionMode===3){if(e[0]===t[0])return"";let o=e[0]<t[0]?e[0]:t[0],l=e[0]<t[0]?t[0]:e[0];for(let h=e[1];h<=t[1];h++){let u=i.translateBufferLineToString(h,!0,o,l);n.push(u)}}else{let o=e[1]===t[1]?t[0]:void 0;n.push(i.translateBufferLineToString(e[1],!0,e[0],o));for(let l=e[1]+1;l<=t[1]-1;l++){let h=i.lines.get(l),u=i.translateBufferLineToString(l,!0);h!=null&&h.isWrapped?n[n.length-1]+=u:n.push(u)}if(e[1]!==t[1]){let l=i.lines.get(t[1]),h=i.translateBufferLineToString(t[1],!0,0,t[0]);l&&l.isWrapped?n[n.length-1]+=h:n.push(h)}}return n.map(o=>o.replace(o2," ")).join(E0?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(e){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),Jd&&e&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(e){let t=this._getMouseBufferCoords(e),i=this._model.finalSelectionStart,n=this._model.finalSelectionEnd;return!i||!n||!t?!1:this._areCoordsInSelection(t,i,n)}isCellInSelection(e,t){let i=this._model.finalSelectionStart,n=this._model.finalSelectionEnd;return!i||!n?!1:this._areCoordsInSelection([e,t],i,n)}_areCoordsInSelection(e,t,i){return e[1]>t[1]&&e[1]<i[1]||t[1]===i[1]&&e[1]===t[1]&&e[0]>=t[0]&&e[0]<i[0]||t[1]<i[1]&&e[1]===i[1]&&e[0]<i[0]||t[1]<i[1]&&e[1]===t[1]&&e[0]>=t[0]}_selectWordAtCursor(e,t){var o,l;let i=(l=(o=this._linkifier.currentLink)==null?void 0:o.link)==null?void 0:l.range;if(i)return this._model.selectionStart=[i.start.x-1,i.start.y-1],this._model.selectionStartLength=u_(i,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let n=this._getMouseBufferCoords(e);return n?(this._selectWordAt(n,t),this._model.selectionEnd=void 0,!0):!1}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(e,t){this._model.clearSelection(),e=Math.max(e,0),t=Math.min(t,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._bufferService.cols,t],this.refresh(),this._onSelectionChange.fire()}_handleTrim(e){this._model.handleTrim(e)&&this.refresh()}_getMouseBufferCoords(e){let t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(t)return t[0]--,t[1]--,t[1]+=this._bufferService.buffer.ydisp,t}_getMouseEventScrollAmount(e){let t=Xd(this._coreBrowserService.window,e,this._screenElement)[1],i=this._renderService.dimensions.css.canvas.height;return t>=0&&t<=i?0:(t>i&&(t-=i),t=Math.min(Math.max(t,-mu),mu),t/=mu,t/Math.abs(t)+Math.round(t*(i2-1)))}shouldForceSelection(e){return Wl?e.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:e.shiftKey}handleMouseDown(e){if(this._mouseDownTimeStamp=e.timeStamp,!(e.button===2&&this.hasSelection)&&e.button===0){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._handleIncrementalClick(e):e.detail===1?this._handleSingleClick(e):e.detail===2?this._handleDoubleClick(e):e.detail===3&&this._handleTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),r2)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))}_handleSingleClick(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?3:0,this._model.selectionStart=this._getMouseBufferCoords(e),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let t=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);t&&t.length!==this._model.selectionStart[0]&&t.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(e){this._selectWordAtCursor(e,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(e){let t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=2,this._selectLineAt(t[1]))}shouldColumnSelect(e){return e.altKey&&!(Wl&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(e){if(e.stopImmediatePropagation(),!this._model.selectionStart)return;let t=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),!this._model.selectionEnd){this.refresh(!0);return}this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let i=this._bufferService.buffer;if(this._model.selectionEnd[1]<i.lines.length){let n=i.lines.get(this._model.selectionEnd[1]);n&&n.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}(!t||t[0]!==this._model.selectionEnd[0]||t[1]!==this._model.selectionEnd[1])&&this.refresh(!0)}_dragScroll(){if(!(!this._model.selectionEnd||!this._model.selectionStart)&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let e=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(e.ydisp+this._bufferService.rows,e.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=e.ydisp),this.refresh()}}_handleMouseUp(e){let t=e.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&t<s2&&e.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let i=this._mouseService.getCoords(e,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(i&&i[0]!==void 0&&i[1]!==void 0){let n=Yk(i[0]-1,i[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(n,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd,i=!!e&&!!t&&(e[0]!==t[0]||e[1]!==t[1]);if(!i){this._oldHasSelection&&this._fireOnSelectionChange(e,t,i);return}!e||!t||(!this._oldSelectionStart||!this._oldSelectionEnd||e[0]!==this._oldSelectionStart[0]||e[1]!==this._oldSelectionStart[1]||t[0]!==this._oldSelectionEnd[0]||t[1]!==this._oldSelectionEnd[1])&&this._fireOnSelectionChange(e,t,i)}_fireOnSelectionChange(e,t,i){this._oldSelectionStart=e,this._oldSelectionEnd=t,this._oldHasSelection=i,this._onSelectionChange.fire()}_handleBufferActivate(e){this.clearSelection(),this._trimListener.dispose(),this._trimListener=e.activeBuffer.lines.onTrim(t=>this._handleTrim(t))}_convertViewportColToCharacterIndex(e,t){let i=t;for(let n=0;t>=n;n++){let o=e.loadCell(n,this._workCell).getChars().length;this._workCell.getWidth()===0?i--:o>1&&t!==n&&(i+=o-1)}return i}setSelection(e,t,i){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,t],this._model.selectionStartLength=i,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(e){this._isClickInSelection(e)||(this._selectWordAtCursor(e,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(e,t,i=!0,n=!0){if(e[0]>=this._bufferService.cols)return;let o=this._bufferService.buffer,l=o.lines.get(e[1]);if(!l)return;let h=o.translateBufferLineToString(e[1],!1),u=this._convertViewportColToCharacterIndex(l,e[0]),p=u,d=e[0]-u,_=0,g=0,y=0,w=0;if(h.charAt(u)===" "){for(;u>0&&h.charAt(u-1)===" ";)u--;for(;p<h.length&&h.charAt(p+1)===" ";)p++}else{let k=e[0],L=e[0];l.getWidth(k)===0&&(_++,k--),l.getWidth(L)===2&&(g++,L++);let W=l.getString(L).length;for(W>1&&(w+=W-1,p+=W-1);k>0&&u>0&&!this._isCharWordSeparator(l.loadCell(k-1,this._workCell));){l.loadCell(k-1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===0?(_++,k--):O>1&&(y+=O-1,u-=O-1),u--,k--}for(;L<l.length&&p+1<h.length&&!this._isCharWordSeparator(l.loadCell(L+1,this._workCell));){l.loadCell(L+1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===2?(g++,L++):O>1&&(w+=O-1,p+=O-1),p++,L++}}p++;let x=u+d-_+y,C=Math.min(this._bufferService.cols,p-u+_+g-y-w);if(!(!t&&h.slice(u,p).trim()==="")){if(i&&x===0&&l.getCodePoint(0)!==32){let k=o.lines.get(e[1]-1);if(k&&l.isWrapped&&k.getCodePoint(this._bufferService.cols-1)!==32){let L=this._getWordAt([this._bufferService.cols-1,e[1]-1],!1,!0,!1);if(L){let W=this._bufferService.cols-L.start;x-=W,C+=W}}}if(n&&x+C===this._bufferService.cols&&l.getCodePoint(this._bufferService.cols-1)!==32){let k=o.lines.get(e[1]+1);if(k!=null&&k.isWrapped&&k.getCodePoint(0)!==32){let L=this._getWordAt([0,e[1]+1],!1,!1,!0);L&&(C+=L.length)}}return{start:x,length:C}}}_selectWordAt(e,t){let i=this._getWordAt(e,t);if(i){for(;i.start<0;)i.start+=this._bufferService.cols,e[1]--;this._model.selectionStart=[i.start,e[1]],this._model.selectionStartLength=i.length}}_selectToWordAt(e){let t=this._getWordAt(e,!0);if(t){let i=e[1];for(;t.start<0;)t.start+=this._bufferService.cols,i--;if(!this._model.areSelectionValuesReversed())for(;t.start+t.length>this._bufferService.cols;)t.length-=this._bufferService.cols,i++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?t.start:t.start+t.length,i]}}_isCharWordSeparator(e){return e.getWidth()===0?!1:this._optionsService.rawOptions.wordSeparator.indexOf(e.getChars())>=0}_selectLineAt(e){let t=this._bufferService.buffer.getWrappedRangeForLine(e),i={start:{x:0,y:t.first},end:{x:this._bufferService.cols-1,y:t.last}};this._model.selectionStart=[0,t.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=u_(i,this._bufferService.cols)}};md=tt([oe(3,$t),oe(4,Ds),oe(5,Ud),oe(6,Wt),oe(7,fr),oe(8,dr)],md);var d_=class{constructor(){this._data={}}set(e,t,i){this._data[e]||(this._data[e]={}),this._data[e][t]=i}get(e,t){return this._data[e]?this._data[e][t]:void 0}clear(){this._data={}}},f_=class{constructor(){this._color=new d_,this._css=new d_}setCss(e,t,i){this._css.set(e,t,i)}getCss(e,t){return this._css.get(e,t)}setColor(e,t,i){this._color.set(e,t,i)}getColor(e,t){return this._color.get(e,t)}clear(){this._color.clear(),this._css.clear()}},ct=Object.freeze((()=>{let e=[Ge.toColor("#2e3436"),Ge.toColor("#cc0000"),Ge.toColor("#4e9a06"),Ge.toColor("#c4a000"),Ge.toColor("#3465a4"),Ge.toColor("#75507b"),Ge.toColor("#06989a"),Ge.toColor("#d3d7cf"),Ge.toColor("#555753"),Ge.toColor("#ef2929"),Ge.toColor("#8ae234"),Ge.toColor("#fce94f"),Ge.toColor("#729fcf"),Ge.toColor("#ad7fa8"),Ge.toColor("#34e2e2"),Ge.toColor("#eeeeec")],t=[0,95,135,175,215,255];for(let i=0;i<216;i++){let n=t[i/36%6|0],o=t[i/6%6|0],l=t[i%6];e.push({css:at.toCss(n,o,l),rgba:at.toRgba(n,o,l)})}for(let i=0;i<24;i++){let n=8+i*10;e.push({css:at.toCss(n,n,n),rgba:at.toRgba(n,n,n)})}return e})()),ds=Ge.toColor("#ffffff"),No=Ge.toColor("#000000"),p_=Ge.toColor("#ffffff"),m_=No,bo={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117},a2=ds,gd=class extends Le{constructor(e){super(),this._optionsService=e,this._contrastCache=new f_,this._halfContrastCache=new f_,this._onChangeColors=this._register(new ee),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:ds,background:No,cursor:p_,cursorAccent:m_,selectionForeground:void 0,selectionBackgroundTransparent:bo,selectionBackgroundOpaque:$e.blend(No,bo),selectionInactiveBackgroundTransparent:bo,selectionInactiveBackgroundOpaque:$e.blend(No,bo),scrollbarSliderBackground:$e.opacity(ds,.2),scrollbarSliderHoverBackground:$e.opacity(ds,.4),scrollbarSliderActiveBackground:$e.opacity(ds,.5),overviewRulerBorder:ds,ansi:ct.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this._register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this._register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(e={}){let t=this._colors;if(t.foreground=je(e.foreground,ds),t.background=je(e.background,No),t.cursor=$e.blend(t.background,je(e.cursor,p_)),t.cursorAccent=$e.blend(t.background,je(e.cursorAccent,m_)),t.selectionBackgroundTransparent=je(e.selectionBackground,bo),t.selectionBackgroundOpaque=$e.blend(t.background,t.selectionBackgroundTransparent),t.selectionInactiveBackgroundTransparent=je(e.selectionInactiveBackground,t.selectionBackgroundTransparent),t.selectionInactiveBackgroundOpaque=$e.blend(t.background,t.selectionInactiveBackgroundTransparent),t.selectionForeground=e.selectionForeground?je(e.selectionForeground,l_):void 0,t.selectionForeground===l_&&(t.selectionForeground=void 0),$e.isOpaque(t.selectionBackgroundTransparent)&&(t.selectionBackgroundTransparent=$e.opacity(t.selectionBackgroundTransparent,.3)),$e.isOpaque(t.selectionInactiveBackgroundTransparent)&&(t.selectionInactiveBackgroundTransparent=$e.opacity(t.selectionInactiveBackgroundTransparent,.3)),t.scrollbarSliderBackground=je(e.scrollbarSliderBackground,$e.opacity(t.foreground,.2)),t.scrollbarSliderHoverBackground=je(e.scrollbarSliderHoverBackground,$e.opacity(t.foreground,.4)),t.scrollbarSliderActiveBackground=je(e.scrollbarSliderActiveBackground,$e.opacity(t.foreground,.5)),t.overviewRulerBorder=je(e.overviewRulerBorder,a2),t.ansi=ct.slice(),t.ansi[0]=je(e.black,ct[0]),t.ansi[1]=je(e.red,ct[1]),t.ansi[2]=je(e.green,ct[2]),t.ansi[3]=je(e.yellow,ct[3]),t.ansi[4]=je(e.blue,ct[4]),t.ansi[5]=je(e.magenta,ct[5]),t.ansi[6]=je(e.cyan,ct[6]),t.ansi[7]=je(e.white,ct[7]),t.ansi[8]=je(e.brightBlack,ct[8]),t.ansi[9]=je(e.brightRed,ct[9]),t.ansi[10]=je(e.brightGreen,ct[10]),t.ansi[11]=je(e.brightYellow,ct[11]),t.ansi[12]=je(e.brightBlue,ct[12]),t.ansi[13]=je(e.brightMagenta,ct[13]),t.ansi[14]=je(e.brightCyan,ct[14]),t.ansi[15]=je(e.brightWhite,ct[15]),e.extendedAnsi){let i=Math.min(t.ansi.length-16,e.extendedAnsi.length);for(let n=0;n<i;n++)t.ansi[n+16]=je(e.extendedAnsi[n],ct[n+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(e){this._restoreColor(e),this._onChangeColors.fire(this.colors)}_restoreColor(e){if(e===void 0){for(let t=0;t<this._restoreColors.ansi.length;++t)this._colors.ansi[t]=this._restoreColors.ansi[t];return}switch(e){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[e]=this._restoreColors.ansi[e]}}modifyColors(e){e(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};gd=tt([oe(0,Wt)],gd);function je(e,t){if(e!==void 0)try{return Ge.toColor(e)}catch{}return t}var l2=class{constructor(...e){this._entries=new Map;for(let[t,i]of e)this.set(t,i)}set(e,t){let i=this._entries.get(e);return this._entries.set(e,t),i}forEach(e){for(let[t,i]of this._entries.entries())e(t,i)}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}},h2=class{constructor(){this._services=new l2,this._services.set(Wd,this)}setService(e,t){this._services.set(e,t)}getService(e){return this._services.get(e)}createInstance(e,...t){let i=ib(e).sort((l,h)=>l.index-h.index),n=[];for(let l of i){let h=this._services.get(l.id);if(!h)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${l.id._id}.`);n.push(h)}let o=i.length>0?i[0].index:t.length;if(t.length!==o)throw new Error(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);return new e(...t,...n)}},c2={trace:0,debug:1,info:2,warn:3,error:4,off:5},u2="xterm.js: ",_d=class extends Le{constructor(e){super(),this._optionsService=e,this._logLevel=5,this._updateLogLevel(),this._register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}get logLevel(){return this._logLevel}_updateLogLevel(){this._logLevel=c2[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(e){for(let t=0;t<e.length;t++)typeof e[t]=="function"&&(e[t]=e[t]())}_log(e,t,i){this._evalLazyOptionalParams(i),e.call(console,(this._optionsService.options.logger?"":u2)+t,...i)}trace(e,...t){var i;this._logLevel<=0&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.trace.bind(this._optionsService.options.logger))??console.log,e,t)}debug(e,...t){var i;this._logLevel<=1&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.debug.bind(this._optionsService.options.logger))??console.log,e,t)}info(e,...t){var i;this._logLevel<=2&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.info.bind(this._optionsService.options.logger))??console.info,e,t)}warn(e,...t){var i;this._logLevel<=3&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.warn.bind(this._optionsService.options.logger))??console.warn,e,t)}error(e,...t){var i;this._logLevel<=4&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.error.bind(this._optionsService.options.logger))??console.error,e,t)}};_d=tt([oe(0,Wt)],_d);var g_=class extends Le{constructor(e){super(),this._maxLength=e,this.onDeleteEmitter=this._register(new ee),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this._register(new ee),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this._register(new ee),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(e){if(this._maxLength===e)return;let t=new Array(e);for(let i=0;i<Math.min(e,this.length);i++)t[i]=this._array[this._getCyclicIndex(i)];this._array=t,this._maxLength=e,this._startIndex=0}get length(){return this._length}set length(e){if(e>this._length)for(let t=this._length;t<e;t++)this._array[t]=void 0;this._length=e}get(e){return this._array[this._getCyclicIndex(e)]}set(e,t){this._array[this._getCyclicIndex(e)]=t}push(e){this._array[this._getCyclicIndex(this._length)]=e,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(e,t,...i){if(t){for(let n=e;n<this._length-t;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+t)];this._length-=t,this.onDeleteEmitter.fire({index:e,amount:t})}for(let n=this._length-1;n>=e;n--)this._array[this._getCyclicIndex(n+i.length)]=this._array[this._getCyclicIndex(n)];for(let n=0;n<i.length;n++)this._array[this._getCyclicIndex(e+n)]=i[n];if(i.length&&this.onInsertEmitter.fire({index:e,amount:i.length}),this._length+i.length>this._maxLength){let n=this._length+i.length-this._maxLength;this._startIndex+=n,this._length=this._maxLength,this.onTrimEmitter.fire(n)}else this._length+=i.length}trimStart(e){e>this._length&&(e=this._length),this._startIndex+=e,this._length-=e,this.onTrimEmitter.fire(e)}shiftElements(e,t,i){if(!(t<=0)){if(e<0||e>=this._length)throw new Error("start argument out of range");if(e+i<0)throw new Error("Cannot shift elements in list beyond index 0");if(i>0){for(let o=t-1;o>=0;o--)this.set(e+o+i,this.get(e+o));let n=e+t+i-this._length;if(n>0)for(this._length+=n;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let n=0;n<t;n++)this.set(e+n+i,this.get(e+n))}}_getCyclicIndex(e){return(this._startIndex+e)%this._maxLength}},Pe=3,ot=Object.freeze(new Zo),wl=0,gu=2,Do=class D0{constructor(t,i,n=!1){this.isWrapped=n,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(t*Pe);let o=i||_i.fromCharData([0,Gv,1,0]);for(let l=0;l<t;++l)this.setCell(l,o);this.length=t}get(t){let i=this._data[t*Pe+0],n=i&2097151;return[this._data[t*Pe+1],i&2097152?this._combined[t]:n?jr(n):"",i>>22,i&2097152?this._combined[t].charCodeAt(this._combined[t].length-1):n]}set(t,i){this._data[t*Pe+1]=i[0],i[1].length>1?(this._combined[t]=i[1],this._data[t*Pe+0]=t|2097152|i[2]<<22):this._data[t*Pe+0]=i[1].charCodeAt(0)|i[2]<<22}getWidth(t){return this._data[t*Pe+0]>>22}hasWidth(t){return this._data[t*Pe+0]&12582912}getFg(t){return this._data[t*Pe+1]}getBg(t){return this._data[t*Pe+2]}hasContent(t){return this._data[t*Pe+0]&4194303}getCodePoint(t){let i=this._data[t*Pe+0];return i&2097152?this._combined[t].charCodeAt(this._combined[t].length-1):i&2097151}isCombined(t){return this._data[t*Pe+0]&2097152}getString(t){let i=this._data[t*Pe+0];return i&2097152?this._combined[t]:i&2097151?jr(i&2097151):""}isProtected(t){return this._data[t*Pe+2]&536870912}loadCell(t,i){return wl=t*Pe,i.content=this._data[wl+0],i.fg=this._data[wl+1],i.bg=this._data[wl+2],i.content&2097152&&(i.combinedData=this._combined[t]),i.bg&268435456&&(i.extended=this._extendedAttrs[t]),i}setCell(t,i){i.content&2097152&&(this._combined[t]=i.combinedData),i.bg&268435456&&(this._extendedAttrs[t]=i.extended),this._data[t*Pe+0]=i.content,this._data[t*Pe+1]=i.fg,this._data[t*Pe+2]=i.bg}setCellFromCodepoint(t,i,n,o){o.bg&268435456&&(this._extendedAttrs[t]=o.extended),this._data[t*Pe+0]=i|n<<22,this._data[t*Pe+1]=o.fg,this._data[t*Pe+2]=o.bg}addCodepointToCell(t,i,n){let o=this._data[t*Pe+0];o&2097152?this._combined[t]+=jr(i):o&2097151?(this._combined[t]=jr(o&2097151)+jr(i),o&=-2097152,o|=2097152):o=i|1<<22,n&&(o&=-12582913,o|=n<<22),this._data[t*Pe+0]=o}insertCells(t,i,n){if(t%=this.length,t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,n),i<this.length-t){let o=new _i;for(let l=this.length-t-i-1;l>=0;--l)this.setCell(t+i+l,this.loadCell(t+l,o));for(let l=0;l<i;++l)this.setCell(t+l,n)}else for(let o=t;o<this.length;++o)this.setCell(o,n);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,n)}deleteCells(t,i,n){if(t%=this.length,i<this.length-t){let o=new _i;for(let l=0;l<this.length-t-i;++l)this.setCell(t+l,this.loadCell(t+i+l,o));for(let l=this.length-i;l<this.length;++l)this.setCell(l,n)}else for(let o=t;o<this.length;++o)this.setCell(o,n);t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,n),this.getWidth(t)===0&&!this.hasContent(t)&&this.setCellFromCodepoint(t,0,1,n)}replaceCells(t,i,n,o=!1){if(o){for(t&&this.getWidth(t-1)===2&&!this.isProtected(t-1)&&this.setCellFromCodepoint(t-1,0,1,n),i<this.length&&this.getWidth(i-1)===2&&!this.isProtected(i)&&this.setCellFromCodepoint(i,0,1,n);t<i&&t<this.length;)this.isProtected(t)||this.setCell(t,n),t++;return}for(t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,n),i<this.length&&this.getWidth(i-1)===2&&this.setCellFromCodepoint(i,0,1,n);t<i&&t<this.length;)this.setCell(t++,n)}resize(t,i){if(t===this.length)return this._data.length*4*gu<this._data.buffer.byteLength;let n=t*Pe;if(t>this.length){if(this._data.buffer.byteLength>=n*4)this._data=new Uint32Array(this._data.buffer,0,n);else{let o=new Uint32Array(n);o.set(this._data),this._data=o}for(let o=this.length;o<t;++o)this.setCell(o,i)}else{this._data=this._data.subarray(0,n);let o=Object.keys(this._combined);for(let h=0;h<o.length;h++){let u=parseInt(o[h],10);u>=t&&delete this._combined[u]}let l=Object.keys(this._extendedAttrs);for(let h=0;h<l.length;h++){let u=parseInt(l[h],10);u>=t&&delete this._extendedAttrs[u]}}return this.length=t,n*4*gu<this._data.buffer.byteLength}cleanupMemory(){if(this._data.length*4*gu<this._data.buffer.byteLength){let t=new Uint32Array(this._data.length);return t.set(this._data),this._data=t,1}return 0}fill(t,i=!1){if(i){for(let n=0;n<this.length;++n)this.isProtected(n)||this.setCell(n,t);return}this._combined={},this._extendedAttrs={};for(let n=0;n<this.length;++n)this.setCell(n,t)}copyFrom(t){this.length!==t.length?this._data=new Uint32Array(t._data):this._data.set(t._data),this.length=t.length,this._combined={};for(let i in t._combined)this._combined[i]=t._combined[i];this._extendedAttrs={};for(let i in t._extendedAttrs)this._extendedAttrs[i]=t._extendedAttrs[i];this.isWrapped=t.isWrapped}clone(){let t=new D0(0);t._data=new Uint32Array(this._data),t.length=this.length;for(let i in this._combined)t._combined[i]=this._combined[i];for(let i in this._extendedAttrs)t._extendedAttrs[i]=this._extendedAttrs[i];return t.isWrapped=this.isWrapped,t}getTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(this._data[t*Pe+0]&4194303)return t+(this._data[t*Pe+0]>>22);return 0}getNoBgTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(this._data[t*Pe+0]&4194303||this._data[t*Pe+2]&50331648)return t+(this._data[t*Pe+0]>>22);return 0}copyCellsFrom(t,i,n,o,l){let h=t._data;if(l)for(let p=o-1;p>=0;p--){for(let d=0;d<Pe;d++)this._data[(n+p)*Pe+d]=h[(i+p)*Pe+d];h[(i+p)*Pe+2]&268435456&&(this._extendedAttrs[n+p]=t._extendedAttrs[i+p])}else for(let p=0;p<o;p++){for(let d=0;d<Pe;d++)this._data[(n+p)*Pe+d]=h[(i+p)*Pe+d];h[(i+p)*Pe+2]&268435456&&(this._extendedAttrs[n+p]=t._extendedAttrs[i+p])}let u=Object.keys(t._combined);for(let p=0;p<u.length;p++){let d=parseInt(u[p],10);d>=i&&(this._combined[d-i+n]=t._combined[d])}}translateToString(t,i,n,o){i=i??0,n=n??this.length,t&&(n=Math.min(n,this.getTrimmedLength())),o&&(o.length=0);let l="";for(;i<n;){let h=this._data[i*Pe+0],u=h&2097151,p=h&2097152?this._combined[i]:u?jr(u):Yr;if(l+=p,o)for(let d=0;d<p.length;++d)o.push(i);i+=h>>22||1}return o&&o.push(i),l}};function d2(e,t,i,n,o,l){let h=[];for(let u=0;u<e.length-1;u++){let p=u,d=e.get(++p);if(!d.isWrapped)continue;let _=[e.get(u)];for(;p<e.length&&d.isWrapped;)_.push(d),d=e.get(++p);if(!l&&n>=u&&n<p){u+=_.length-1;continue}let g=0,y=Uo(_,g,t),w=1,x=0;for(;w<_.length;){let k=Uo(_,w,t),L=k-x,W=i-y,O=Math.min(L,W);_[g].copyCellsFrom(_[w],x,y,O,!1),y+=O,y===i&&(g++,y=0),x+=O,x===k&&(w++,x=0),y===0&&g!==0&&_[g-1].getWidth(i-1)===2&&(_[g].copyCellsFrom(_[g-1],i-1,y++,1,!1),_[g-1].setCell(i-1,o))}_[g].replaceCells(y,i,o);let C=0;for(let k=_.length-1;k>0&&(k>g||_[k].getTrimmedLength()===0);k--)C++;C>0&&(h.push(u+_.length-C),h.push(C)),u+=_.length-1}return h}function f2(e,t){let i=[],n=0,o=t[n],l=0;for(let h=0;h<e.length;h++)if(o===h){let u=t[++n];e.onDeleteEmitter.fire({index:h-l,amount:u}),h+=u-1,l+=u,o=t[++n]}else i.push(h);return{layout:i,countRemoved:l}}function p2(e,t){let i=[];for(let n=0;n<t.length;n++)i.push(e.get(t[n]));for(let n=0;n<i.length;n++)e.set(n,i[n]);e.length=t.length}function m2(e,t,i){let n=[],o=e.map((p,d)=>Uo(e,d,t)).reduce((p,d)=>p+d),l=0,h=0,u=0;for(;u<o;){if(o-u<i){n.push(o-u);break}l+=i;let p=Uo(e,h,t);l>p&&(l-=p,h++);let d=e[h].getWidth(l-1)===2;d&&l--;let _=d?i-1:i;n.push(_),u+=_}return n}function Uo(e,t,i){if(t===e.length-1)return e[t].getTrimmedLength();let n=!e[t].hasContent(i-1)&&e[t].getWidth(i-1)===1,o=e[t+1].getWidth(0)===2;return n&&o?i-1:i}var M0=class T0{constructor(t){this.line=t,this.isDisposed=!1,this._disposables=[],this._id=T0._nextId++,this._onDispose=this.register(new ee),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),Ls(this._disposables),this._disposables.length=0)}register(t){return this._disposables.push(t),t}};M0._nextId=1;var g2=M0,ft={},fs=ft.B;ft[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""};ft.A={"#":""};ft.B=void 0;ft[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""};ft.C=ft[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};ft.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};ft.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};ft.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};ft.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""};ft.E=ft[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};ft.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""};ft.H=ft[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};ft["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""};var __=4294967295,v_=class{constructor(e,t,i){this._hasScrollback=e,this._optionsService=t,this._bufferService=i,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=ot.clone(),this.savedCharset=fs,this.markers=[],this._nullCell=_i.fromCharData([0,Gv,1,0]),this._whitespaceCell=_i.fromCharData([0,Yr,1,32]),this._isClearing=!1,this._memoryCleanupQueue=new Ul,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new g_(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new zl),this._nullCell}getWhitespaceCell(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new zl),this._whitespaceCell}getBlankLine(e,t){return new Do(this._bufferService.cols,this.getNullCell(e),t)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows}_getCorrectBufferLength(e){if(!this._hasScrollback)return e;let t=e+this._optionsService.rawOptions.scrollback;return t>__?__:t}fillViewportRows(e){if(this.lines.length===0){e===void 0&&(e=ot);let t=this._rows;for(;t--;)this.lines.push(this.getBlankLine(e))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new g_(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(e,t){let i=this.getNullCell(ot),n=0,o=this._getCorrectBufferLength(t);if(o>this.lines.maxLength&&(this.lines.maxLength=o),this.lines.length>0){if(this._cols<e)for(let h=0;h<this.lines.length;h++)n+=+this.lines.get(h).resize(e,i);let l=0;if(this._rows<t)for(let h=this._rows;h<t;h++)this.lines.length<t+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new Do(e,i)):this.ybase>0&&this.lines.length<=this.ybase+this.y+l+1?(this.ybase--,l++,this.ydisp>0&&this.ydisp--):this.lines.push(new Do(e,i)));else for(let h=this._rows;h>t;h--)this.lines.length>t+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(o<this.lines.maxLength){let h=this.lines.length-o;h>0&&(this.lines.trimStart(h),this.ybase=Math.max(this.ybase-h,0),this.ydisp=Math.max(this.ydisp-h,0),this.savedY=Math.max(this.savedY-h,0)),this.lines.maxLength=o}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,t-1),l&&(this.y+=l),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=t-1,this._isReflowEnabled&&(this._reflow(e,t),this._cols>e))for(let l=0;l<this.lines.length;l++)n+=+this.lines.get(l).resize(e,i);this._cols=e,this._rows=t,this._memoryCleanupQueue.clear(),n>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let e=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,e=!1);let t=0;for(;this._memoryCleanupPosition<this.lines.length;)if(t+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),t>100)return!0;return e}get _isReflowEnabled(){let e=this._optionsService.rawOptions.windowsPty;return e&&e.buildNumber?this._hasScrollback&&e.backend==="conpty"&&e.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(e,t){this._cols!==e&&(e>this._cols?this._reflowLarger(e,t):this._reflowSmaller(e,t))}_reflowLarger(e,t){let i=this._optionsService.rawOptions.reflowCursorLine,n=d2(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(ot),i);if(n.length>0){let o=f2(this.lines,n);p2(this.lines,o.layout),this._reflowLargerAdjustViewport(e,t,o.countRemoved)}}_reflowLargerAdjustViewport(e,t,i){let n=this.getNullCell(ot),o=i;for(;o-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<t&&this.lines.push(new Do(e,n))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-i,0)}_reflowSmaller(e,t){let i=this._optionsService.rawOptions.reflowCursorLine,n=this.getNullCell(ot),o=[],l=0;for(let h=this.lines.length-1;h>=0;h--){let u=this.lines.get(h);if(!u||!u.isWrapped&&u.getTrimmedLength()<=e)continue;let p=[u];for(;u.isWrapped&&h>0;)u=this.lines.get(--h),p.unshift(u);if(!i){let O=this.ybase+this.y;if(O>=h&&O<h+p.length)continue}let d=p[p.length-1].getTrimmedLength(),_=m2(p,this._cols,e),g=_.length-p.length,y;this.ybase===0&&this.y!==this.lines.length-1?y=Math.max(0,this.y-this.lines.maxLength+g):y=Math.max(0,this.lines.length-this.lines.maxLength+g);let w=[];for(let O=0;O<g;O++){let T=this.getBlankLine(ot,!0);w.push(T)}w.length>0&&(o.push({start:h+p.length+l,newLines:w}),l+=w.length),p.push(...w);let x=_.length-1,C=_[x];C===0&&(x--,C=_[x]);let k=p.length-g-1,L=d;for(;k>=0;){let O=Math.min(L,C);if(p[x]===void 0)break;if(p[x].copyCellsFrom(p[k],L-O,C-O,O,!0),C-=O,C===0&&(x--,C=_[x]),L-=O,L===0){k--;let T=Math.max(k,0);L=Uo(p,T,this._cols)}}for(let O=0;O<p.length;O++)_[O]<e&&p[O].setCell(_[O],n);let W=g-y;for(;W-- >0;)this.ybase===0?this.y<t-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+l)-t&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+g,this.ybase+t-1)}if(o.length>0){let h=[],u=[];for(let C=0;C<this.lines.length;C++)u.push(this.lines.get(C));let p=this.lines.length,d=p-1,_=0,g=o[_];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+l);let y=0;for(let C=Math.min(this.lines.maxLength-1,p+l-1);C>=0;C--)if(g&&g.start>d+y){for(let k=g.newLines.length-1;k>=0;k--)this.lines.set(C--,g.newLines[k]);C++,h.push({index:d+1,amount:g.newLines.length}),y+=g.newLines.length,g=o[++_]}else this.lines.set(C,u[d--]);let w=0;for(let C=h.length-1;C>=0;C--)h[C].index+=w,this.lines.onInsertEmitter.fire(h[C]),w+=h[C].amount;let x=Math.max(0,p+l-this.lines.maxLength);x>0&&this.lines.onTrimEmitter.fire(x)}}translateBufferLineToString(e,t,i=0,n){let o=this.lines.get(e);return o?o.translateToString(t,i,n):""}getWrappedRangeForLine(e){let t=e,i=e;for(;t>0&&this.lines.get(t).isWrapped;)t--;for(;i+1<this.lines.length&&this.lines.get(i+1).isWrapped;)i++;return{first:t,last:i}}setupTabStops(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0}prevStop(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e}nextStop(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e}clearMarkers(e){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].line===e&&(this.markers[t].dispose(),this.markers.splice(t--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].dispose();this.markers.length=0,this._isClearing=!1}addMarker(e){let t=new g2(e);return this.markers.push(t),t.register(this.lines.onTrim(i=>{t.line-=i,t.line<0&&t.dispose()})),t.register(this.lines.onInsert(i=>{t.line>=i.index&&(t.line+=i.amount)})),t.register(this.lines.onDelete(i=>{t.line>=i.index&&t.line<i.index+i.amount&&t.dispose(),t.line>i.index&&(t.line-=i.amount)})),t.register(t.onDispose(()=>this._removeMarker(t))),t}_removeMarker(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)}},_2=class extends Le{constructor(e,t){super(),this._optionsService=e,this._bufferService=t,this._onBufferActivate=this._register(new ee),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this._register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this._register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new v_(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new v_(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(e,t){this._normal.resize(e,t),this._alt.resize(e,t),this.setupTabStops(e)}setupTabStops(e){this._normal.setupTabStops(e),this._alt.setupTabStops(e)}},O0=2,B0=1,vd=class extends Le{constructor(e){super(),this.isUserScrolling=!1,this._onResize=this._register(new ee),this.onResize=this._onResize.event,this._onScroll=this._register(new ee),this.onScroll=this._onScroll.event,this.cols=Math.max(e.rawOptions.cols||0,O0),this.rows=Math.max(e.rawOptions.rows||0,B0),this.buffers=this._register(new _2(e,this)),this._register(this.buffers.onBufferActivate(t=>{this._onScroll.fire(t.activeBuffer.ydisp)}))}get buffer(){return this.buffers.active}resize(e,t){let i=this.cols!==e,n=this.rows!==t;this.cols=e,this.rows=t,this.buffers.resize(e,t),this._onResize.fire({cols:e,rows:t,colsChanged:i,rowsChanged:n})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(e,t=!1){let i=this.buffer,n;n=this._cachedBlankLine,(!n||n.length!==this.cols||n.getFg(0)!==e.fg||n.getBg(0)!==e.bg)&&(n=i.getBlankLine(e,t),this._cachedBlankLine=n),n.isWrapped=t;let o=i.ybase+i.scrollTop,l=i.ybase+i.scrollBottom;if(i.scrollTop===0){let h=i.lines.isFull;l===i.lines.length-1?h?i.lines.recycle().copyFrom(n):i.lines.push(n.clone()):i.lines.splice(l+1,0,n.clone()),h?this.isUserScrolling&&(i.ydisp=Math.max(i.ydisp-1,0)):(i.ybase++,this.isUserScrolling||i.ydisp++)}else{let h=l-o+1;i.lines.shiftElements(o+1,h-1,-1),i.lines.set(l,n.clone())}this.isUserScrolling||(i.ydisp=i.ybase),this._onScroll.fire(i.ydisp)}scrollLines(e,t){let i=this.buffer;if(e<0){if(i.ydisp===0)return;this.isUserScrolling=!0}else e+i.ydisp>=i.ybase&&(this.isUserScrolling=!1);let n=i.ydisp;i.ydisp=Math.max(Math.min(i.ydisp+e,i.ybase),0),n!==i.ydisp&&(t||this._onScroll.fire(i.ydisp))}};vd=tt([oe(0,Wt)],vd);var ln={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnEraseInDisplay:!1,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},reflowCursorLine:!1,rescaleOverlappingGlyphs:!1,rightClickSelectsWord:Wl,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRuler:{}},v2=["normal","bold","100","200","300","400","500","600","700","800","900"],y2=class extends Le{constructor(e){super(),this._onOptionChange=this._register(new ee),this.onOptionChange=this._onOptionChange.event;let t={...ln};for(let i in e)if(i in t)try{let n=e[i];t[i]=this._sanitizeAndValidateOption(i,n)}catch(n){console.error(n)}this.rawOptions=t,this.options={...t},this._setupOptions(),this._register(Ke(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(e,t){return this.onOptionChange(i=>{i===e&&t(this.rawOptions[e])})}onMultipleOptionChange(e,t){return this.onOptionChange(i=>{e.indexOf(i)!==-1&&t()})}_setupOptions(){let e=i=>{if(!(i in ln))throw new Error(`No option with key "${i}"`);return this.rawOptions[i]},t=(i,n)=>{if(!(i in ln))throw new Error(`No option with key "${i}"`);n=this._sanitizeAndValidateOption(i,n),this.rawOptions[i]!==n&&(this.rawOptions[i]=n,this._onOptionChange.fire(i))};for(let i in this.rawOptions){let n={get:e.bind(this,i),set:t.bind(this,i)};Object.defineProperty(this.options,i,n)}}_sanitizeAndValidateOption(e,t){switch(e){case"cursorStyle":if(t||(t=ln[e]),!S2(t))throw new Error(`"${t}" is not a valid value for ${e}`);break;case"wordSeparator":t||(t=ln[e]);break;case"fontWeight":case"fontWeightBold":if(typeof t=="number"&&1<=t&&t<=1e3)break;t=v2.includes(t)?t:ln[e];break;case"cursorWidth":t=Math.floor(t);case"lineHeight":case"tabStopWidth":if(t<1)throw new Error(`${e} cannot be less than 1, value: ${t}`);break;case"minimumContrastRatio":t=Math.max(1,Math.min(21,Math.round(t*10)/10));break;case"scrollback":if(t=Math.min(t,4294967295),t<0)throw new Error(`${e} cannot be less than 0, value: ${t}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(t<=0)throw new Error(`${e} cannot be less than or equal to 0, value: ${t}`);break;case"rows":case"cols":if(!t&&t!==0)throw new Error(`${e} must be numeric, value: ${t}`);break;case"windowsPty":t=t??{};break}return t}};function S2(e){return e==="block"||e==="underline"||e==="bar"}function Mo(e,t=5){if(typeof e!="object")return e;let i=Array.isArray(e)?[]:{};for(let n in e)i[n]=t<=1?e[n]:e[n]&&Mo(e[n],t-1);return i}var y_=Object.freeze({insertMode:!1}),S_=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,cursorBlink:void 0,cursorStyle:void 0,origin:!1,reverseWraparound:!1,sendFocus:!1,synchronizedOutput:!1,wraparound:!0}),yd=class extends Le{constructor(e,t,i){super(),this._bufferService=e,this._logService=t,this._optionsService=i,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this._register(new ee),this.onData=this._onData.event,this._onUserInput=this._register(new ee),this.onUserInput=this._onUserInput.event,this._onBinary=this._register(new ee),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this._register(new ee),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=Mo(y_),this.decPrivateModes=Mo(S_)}reset(){this.modes=Mo(y_),this.decPrivateModes=Mo(S_)}triggerDataEvent(e,t=!1){if(this._optionsService.rawOptions.disableStdin)return;let i=this._bufferService.buffer;t&&this._optionsService.rawOptions.scrollOnUserInput&&i.ybase!==i.ydisp&&this._onRequestScrollToBottom.fire(),t&&this._onUserInput.fire(),this._logService.debug(`sending data "${e}"`),this._logService.trace("sending data (codes)",()=>e.split("").map(n=>n.charCodeAt(0))),this._onData.fire(e)}triggerBinaryEvent(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${e}"`),this._logService.trace("sending binary (codes)",()=>e.split("").map(t=>t.charCodeAt(0))),this._onBinary.fire(e))}};yd=tt([oe(0,$t),oe(1,t0),oe(2,Wt)],yd);var w_={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:e=>e.button===4||e.action!==1?!1:(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)},VT200:{events:19,restrict:e=>e.action!==32},DRAG:{events:23,restrict:e=>!(e.action===32&&e.button===3)},ANY:{events:31,restrict:e=>!0}};function _u(e,t){let i=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return e.button===4?(i|=64,i|=e.action):(i|=e.button&3,e.button&4&&(i|=64),e.button&8&&(i|=128),e.action===32?i|=32:e.action===0&&!t&&(i|=3)),i}var vu=String.fromCharCode,x_={DEFAULT:e=>{let t=[_u(e,!1)+32,e.col+32,e.row+32];return t[0]>255||t[1]>255||t[2]>255?"":`\x1B[M${vu(t[0])}${vu(t[1])}${vu(t[2])}`},SGR:e=>{let t=e.action===0&&e.button!==4?"m":"M";return`\x1B[<${_u(e,!0)};${e.col};${e.row}${t}`},SGR_PIXELS:e=>{let t=e.action===0&&e.button!==4?"m":"M";return`\x1B[<${_u(e,!0)};${e.x};${e.y}${t}`}},Sd=class extends Le{constructor(e,t,i){super(),this._bufferService=e,this._coreService=t,this._optionsService=i,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._wheelPartialScroll=0,this._onProtocolChange=this._register(new ee),this.onProtocolChange=this._onProtocolChange.event;for(let n of Object.keys(w_))this.addProtocol(n,w_[n]);for(let n of Object.keys(x_))this.addEncoding(n,x_[n]);this.reset()}addProtocol(e,t){this._protocols[e]=t}addEncoding(e,t){this._encodings[e]=t}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(e){if(!this._protocols[e])throw new Error(`unknown protocol "${e}"`);this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(e){if(!this._encodings[e])throw new Error(`unknown encoding "${e}"`);this._activeEncoding=e}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null,this._wheelPartialScroll=0}consumeWheelEvent(e,t,i){if(e.deltaY===0||e.shiftKey||t===void 0||i===void 0)return 0;let n=t/i,o=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(o/=n+0,Math.abs(e.deltaY)<50&&(o*=.3),this._wheelPartialScroll+=o,o=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._bufferService.rows),o}_applyScrollModifier(e,t){return t.altKey||t.ctrlKey||t.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity}triggerMouseEvent(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows||e.button===4&&e.action===32||e.button===3&&e.action!==32||e.button!==4&&(e.action===2||e.action===3)||(e.col++,e.row++,e.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,e,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(e))return!1;let t=this._encodings[this._activeEncoding](e);return t&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=e,!0}explainEvents(e){return{down:!!(e&1),up:!!(e&2),drag:!!(e&4),move:!!(e&8),wheel:!!(e&16)}}_equalEvents(e,t,i){if(i){if(e.x!==t.x||e.y!==t.y)return!1}else if(e.col!==t.col||e.row!==t.row)return!1;return!(e.button!==t.button||e.action!==t.action||e.ctrl!==t.ctrl||e.alt!==t.alt||e.shift!==t.shift)}};Sd=tt([oe(0,$t),oe(1,Ds),oe(2,Wt)],Sd);var yu=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],w2=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],ut;function x2(e,t){let i=0,n=t.length-1,o;if(e<t[0][0]||e>t[n][1])return!1;for(;n>=i;)if(o=i+n>>1,e>t[o][1])i=o+1;else if(e<t[o][0])n=o-1;else return!0;return!1}var C2=class{constructor(){if(this.version="6",!ut){ut=new Uint8Array(65536),ut.fill(1),ut[0]=0,ut.fill(0,1,32),ut.fill(0,127,160),ut.fill(2,4352,4448),ut[9001]=2,ut[9002]=2,ut.fill(2,11904,42192),ut[12351]=1,ut.fill(2,44032,55204),ut.fill(2,63744,64256),ut.fill(2,65040,65050),ut.fill(2,65072,65136),ut.fill(2,65280,65377),ut.fill(2,65504,65511);for(let e=0;e<yu.length;++e)ut.fill(0,yu[e][0],yu[e][1]+1)}}wcwidth(e){return e<32?0:e<127?1:e<65536?ut[e]:x2(e,w2)?0:e>=131072&&e<=196605||e>=196608&&e<=262141?2:1}charProperties(e,t){let i=this.wcwidth(e),n=i===0&&t!==0;if(n){let o=ms.extractWidth(t);o===0?n=!1:o>i&&(i=o)}return ms.createPropertyValue(0,i,n)}},ms=class Dl{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new ee,this.onChange=this._onChange.event;let t=new C2;this.register(t),this._active=t.version,this._activeProvider=t}static extractShouldJoin(t){return(t&1)!==0}static extractWidth(t){return t>>1&3}static extractCharKind(t){return t>>3}static createPropertyValue(t,i,n=!1){return(t&16777215)<<3|(i&3)<<1|(n?1:0)}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(t){if(!this._providers[t])throw new Error(`unknown Unicode version "${t}"`);this._active=t,this._activeProvider=this._providers[t],this._onChange.fire(t)}register(t){this._providers[t.version]=t}wcwidth(t){return this._activeProvider.wcwidth(t)}getStringCellWidth(t){let i=0,n=0,o=t.length;for(let l=0;l<o;++l){let h=t.charCodeAt(l);if(55296<=h&&h<=56319){if(++l>=o)return i+this.wcwidth(h);let d=t.charCodeAt(l);56320<=d&&d<=57343?h=(h-55296)*1024+d-56320+65536:i+=this.wcwidth(d)}let u=this.charProperties(h,n),p=Dl.extractWidth(u);Dl.extractShouldJoin(u)&&(p-=Dl.extractWidth(n)),i+=p,n=u}return i}charProperties(t,i){return this._activeProvider.charProperties(t,i)}},b2=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(e){this.glevel=e,this.charset=this._charsets[e]}setgCharset(e,t){this._charsets[e]=t,this.glevel===e&&(this.charset=t)}};function C_(e){var n;let t=(n=e.buffer.lines.get(e.buffer.ybase+e.buffer.y-1))==null?void 0:n.get(e.cols-1),i=e.buffer.lines.get(e.buffer.ybase+e.buffer.y);i&&t&&(i.isWrapped=t[3]!==0&&t[3]!==32)}var ko=2147483647,k2=256,I0=class wd{constructor(t=32,i=32){if(this.maxLength=t,this.maxSubParamsLength=i,i>k2)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(t),this.length=0,this._subParams=new Int32Array(i),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(t),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(t){let i=new wd;if(!t.length)return i;for(let n=Array.isArray(t[0])?1:0;n<t.length;++n){let o=t[n];if(Array.isArray(o))for(let l=0;l<o.length;++l)i.addSubParam(o[l]);else i.addParam(o)}return i}clone(){let t=new wd(this.maxLength,this.maxSubParamsLength);return t.params.set(this.params),t.length=this.length,t._subParams.set(this._subParams),t._subParamsLength=this._subParamsLength,t._subParamsIdx.set(this._subParamsIdx),t._rejectDigits=this._rejectDigits,t._rejectSubDigits=this._rejectSubDigits,t._digitIsSub=this._digitIsSub,t}toArray(){let t=[];for(let i=0;i<this.length;++i){t.push(this.params[i]);let n=this._subParamsIdx[i]>>8,o=this._subParamsIdx[i]&255;o-n>0&&t.push(Array.prototype.slice.call(this._subParams,n,o))}return t}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(t){if(this._digitIsSub=!1,this.length>=this.maxLength){this._rejectDigits=!0;return}if(t<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=t>ko?ko:t}addSubParam(t){if(this._digitIsSub=!0,!!this.length){if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength){this._rejectSubDigits=!0;return}if(t<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=t>ko?ko:t,this._subParamsIdx[this.length-1]++}}hasSubParams(t){return(this._subParamsIdx[t]&255)-(this._subParamsIdx[t]>>8)>0}getSubParams(t){let i=this._subParamsIdx[t]>>8,n=this._subParamsIdx[t]&255;return n-i>0?this._subParams.subarray(i,n):null}getSubParamsAll(){let t={};for(let i=0;i<this.length;++i){let n=this._subParamsIdx[i]>>8,o=this._subParamsIdx[i]&255;o-n>0&&(t[i]=this._subParams.slice(n,o))}return t}addDigit(t){let i;if(this._rejectDigits||!(i=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let n=this._digitIsSub?this._subParams:this.params,o=n[i-1];n[i-1]=~o?Math.min(o*10+t,ko):t}},Eo=[],E2=class{constructor(){this._state=0,this._active=Eo,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(e,t){this._handlers[e]===void 0&&(this._handlers[e]=[]);let i=this._handlers[e];return i.push(t),{dispose:()=>{let n=i.indexOf(t);n!==-1&&i.splice(n,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=Eo}reset(){if(this._state===2)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].end(!1);this._stack.paused=!1,this._active=Eo,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||Eo,!this._active.length)this._handlerFb(this._id,"START");else for(let e=this._active.length-1;e>=0;e--)this._active[e].start()}_put(e,t,i){if(!this._active.length)this._handlerFb(this._id,"PUT",Gl(e,t,i));else for(let n=this._active.length-1;n>=0;n--)this._active[n].put(e,t,i)}start(){this.reset(),this._state=1}put(e,t,i){if(this._state!==3){if(this._state===1)for(;t<i;){let n=e[t++];if(n===59){this._state=2,this._start();break}if(n<48||57<n){this._state=3;return}this._id===-1&&(this._id=0),this._id=this._id*10+n-48}this._state===2&&i-t>0&&this._put(e,t,i)}}end(e,t=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),!this._active.length)this._handlerFb(this._id,"END",e);else{let i=!1,n=this._active.length-1,o=!1;if(this._stack.paused&&(n=this._stack.loopPosition-1,i=t,o=this._stack.fallThrough,this._stack.paused=!1),!o&&i===!1){for(;n>=0&&(i=this._active[n].end(e),i!==!0);n--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!1,i;n--}for(;n>=0;n--)if(i=this._active[n].end(!1),i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!0,i}this._active=Eo,this._id=-1,this._state=0}}},si=class{constructor(e){this._handler=e,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(e,t,i){this._hitLimit||(this._data+=Gl(e,t,i),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}end(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data),t instanceof Promise))return t.then(i=>(this._data="",this._hitLimit=!1,i));return this._data="",this._hitLimit=!1,t}},Ro=[],R2=class{constructor(){this._handlers=Object.create(null),this._active=Ro,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=Ro}registerHandler(e,t){this._handlers[e]===void 0&&(this._handlers[e]=[]);let i=this._handlers[e];return i.push(t),{dispose:()=>{let n=i.indexOf(t);n!==-1&&i.splice(n,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}reset(){if(this._active.length)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].unhook(!1);this._stack.paused=!1,this._active=Ro,this._ident=0}hook(e,t){if(this.reset(),this._ident=e,this._active=this._handlers[e]||Ro,!this._active.length)this._handlerFb(this._ident,"HOOK",t);else for(let i=this._active.length-1;i>=0;i--)this._active[i].hook(t)}put(e,t,i){if(!this._active.length)this._handlerFb(this._ident,"PUT",Gl(e,t,i));else for(let n=this._active.length-1;n>=0;n--)this._active[n].put(e,t,i)}unhook(e,t=!0){if(!this._active.length)this._handlerFb(this._ident,"UNHOOK",e);else{let i=!1,n=this._active.length-1,o=!1;if(this._stack.paused&&(n=this._stack.loopPosition-1,i=t,o=this._stack.fallThrough,this._stack.paused=!1),!o&&i===!1){for(;n>=0&&(i=this._active[n].unhook(e),i!==!0);n--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!1,i;n--}for(;n>=0;n--)if(i=this._active[n].unhook(!1),i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!0,i}this._active=Ro,this._ident=0}},To=new I0;To.addParam(0);var b_=class{constructor(e){this._handler=e,this._data="",this._params=To,this._hitLimit=!1}hook(e){this._params=e.length>1||e.params[0]?e.clone():To,this._data="",this._hitLimit=!1}put(e,t,i){this._hitLimit||(this._data+=Gl(e,t,i),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}unhook(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data,this._params),t instanceof Promise))return t.then(i=>(this._params=To,this._data="",this._hitLimit=!1,i));return this._params=To,this._data="",this._hitLimit=!1,t}},P2=class{constructor(e){this.table=new Uint8Array(e)}setDefault(e,t){this.table.fill(e<<4|t)}add(e,t,i,n){this.table[t<<8|e]=i<<4|n}addMany(e,t,i,n){for(let o=0;o<e.length;o++)this.table[t<<8|e[o]]=i<<4|n}},gi=160,L2=(function(){let e=new P2(4095),t=Array.apply(null,Array(256)).map((u,p)=>p),i=(u,p)=>t.slice(u,p),n=i(32,127),o=i(0,24);o.push(25),o.push.apply(o,i(28,32));let l=i(0,14),h;e.setDefault(1,0),e.addMany(n,0,2,0);for(h in l)e.addMany([24,26,153,154],h,3,0),e.addMany(i(128,144),h,3,0),e.addMany(i(144,152),h,3,0),e.add(156,h,0,0),e.add(27,h,11,1),e.add(157,h,4,8),e.addMany([152,158,159],h,0,7),e.add(155,h,11,3),e.add(144,h,11,9);return e.addMany(o,0,3,0),e.addMany(o,1,3,1),e.add(127,1,0,1),e.addMany(o,8,0,8),e.addMany(o,3,3,3),e.add(127,3,0,3),e.addMany(o,4,3,4),e.add(127,4,0,4),e.addMany(o,6,3,6),e.addMany(o,5,3,5),e.add(127,5,0,5),e.addMany(o,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(n,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(i(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(n,7,0,7),e.addMany(o,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(i(64,127),3,7,0),e.addMany(i(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(i(48,60),4,8,4),e.addMany(i(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(i(32,64),6,0,6),e.add(127,6,0,6),e.addMany(i(64,127),6,0,0),e.addMany(i(32,48),3,9,5),e.addMany(i(32,48),5,9,5),e.addMany(i(48,64),5,0,6),e.addMany(i(64,127),5,7,0),e.addMany(i(32,48),4,9,5),e.addMany(i(32,48),1,9,2),e.addMany(i(32,48),2,9,2),e.addMany(i(48,127),2,10,0),e.addMany(i(48,80),1,10,0),e.addMany(i(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(i(96,127),1,10,0),e.add(80,1,11,9),e.addMany(o,9,0,9),e.add(127,9,0,9),e.addMany(i(28,32),9,0,9),e.addMany(i(32,48),9,9,12),e.addMany(i(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(o,11,0,11),e.addMany(i(32,128),11,0,11),e.addMany(i(28,32),11,0,11),e.addMany(o,10,0,10),e.add(127,10,0,10),e.addMany(i(28,32),10,0,10),e.addMany(i(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(i(32,48),10,9,12),e.addMany(o,12,0,12),e.add(127,12,0,12),e.addMany(i(28,32),12,0,12),e.addMany(i(32,48),12,9,12),e.addMany(i(48,64),12,0,11),e.addMany(i(64,127),12,12,13),e.addMany(i(64,127),10,12,13),e.addMany(i(64,127),9,12,13),e.addMany(o,13,13,13),e.addMany(n,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(gi,0,2,0),e.add(gi,8,5,8),e.add(gi,6,0,6),e.add(gi,11,0,11),e.add(gi,13,13,13),e})(),N2=class extends Le{constructor(e=L2){super(),this._transitions=e,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new I0,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(t,i,n)=>{},this._executeHandlerFb=t=>{},this._csiHandlerFb=(t,i)=>{},this._escHandlerFb=t=>{},this._errorHandlerFb=t=>t,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this._register(Ke(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this._register(new E2),this._dcsParser=this._register(new R2),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(e,t=[64,126]){let i=0;if(e.prefix){if(e.prefix.length>1)throw new Error("only one byte as prefix supported");if(i=e.prefix.charCodeAt(0),i&&60>i||i>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(e.intermediates){if(e.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let o=0;o<e.intermediates.length;++o){let l=e.intermediates.charCodeAt(o);if(32>l||l>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");i<<=8,i|=l}}if(e.final.length!==1)throw new Error("final must be a single byte");let n=e.final.charCodeAt(0);if(t[0]>n||n>t[1])throw new Error(`final must be in range ${t[0]} .. ${t[1]}`);return i<<=8,i|=n,i}identToString(e){let t=[];for(;e;)t.push(String.fromCharCode(e&255)),e>>=8;return t.reverse().join("")}setPrintHandler(e){this._printHandler=e}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(e,t){let i=this._identifier(e,[48,126]);this._escHandlers[i]===void 0&&(this._escHandlers[i]=[]);let n=this._escHandlers[i];return n.push(t),{dispose:()=>{let o=n.indexOf(t);o!==-1&&n.splice(o,1)}}}clearEscHandler(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]}setEscHandlerFallback(e){this._escHandlerFb=e}setExecuteHandler(e,t){this._executeHandlers[e.charCodeAt(0)]=t}clearExecuteHandler(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]}setExecuteHandlerFallback(e){this._executeHandlerFb=e}registerCsiHandler(e,t){let i=this._identifier(e);this._csiHandlers[i]===void 0&&(this._csiHandlers[i]=[]);let n=this._csiHandlers[i];return n.push(t),{dispose:()=>{let o=n.indexOf(t);o!==-1&&n.splice(o,1)}}}clearCsiHandler(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]}setCsiHandlerFallback(e){this._csiHandlerFb=e}registerDcsHandler(e,t){return this._dcsParser.registerHandler(this._identifier(e),t)}clearDcsHandler(e){this._dcsParser.clearHandler(this._identifier(e))}setDcsHandlerFallback(e){this._dcsParser.setHandlerFallback(e)}registerOscHandler(e,t){return this._oscParser.registerHandler(e,t)}clearOscHandler(e){this._oscParser.clearHandler(e)}setOscHandlerFallback(e){this._oscParser.setHandlerFallback(e)}setErrorHandler(e){this._errorHandler=e}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(e,t,i,n,o){this._parseStack.state=e,this._parseStack.handlers=t,this._parseStack.handlerPos=i,this._parseStack.transition=n,this._parseStack.chunkPos=o}parse(e,t,i){let n=0,o=0,l=0,h;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,l=this._parseStack.chunkPos+1;else{if(i===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let u=this._parseStack.handlers,p=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(i===!1&&p>-1){for(;p>=0&&(h=u[p](this._params),h!==!0);p--)if(h instanceof Promise)return this._parseStack.handlerPos=p,h}this._parseStack.handlers=[];break;case 4:if(i===!1&&p>-1){for(;p>=0&&(h=u[p](),h!==!0);p--)if(h instanceof Promise)return this._parseStack.handlerPos=p,h}this._parseStack.handlers=[];break;case 6:if(n=e[this._parseStack.chunkPos],h=this._dcsParser.unhook(n!==24&&n!==26,i),h)return h;n===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(n=e[this._parseStack.chunkPos],h=this._oscParser.end(n!==24&&n!==26,i),h)return h;n===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break}this._parseStack.state=0,l=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=this._parseStack.transition&15}for(let u=l;u<t;++u){switch(n=e[u],o=this._transitions.table[this.currentState<<8|(n<160?n:gi)],o>>4){case 2:for(let y=u+1;;++y){if(y>=t||(n=e[y])<32||n>126&&n<gi){this._printHandler(e,u,y),u=y-1;break}if(++y>=t||(n=e[y])<32||n>126&&n<gi){this._printHandler(e,u,y),u=y-1;break}if(++y>=t||(n=e[y])<32||n>126&&n<gi){this._printHandler(e,u,y),u=y-1;break}if(++y>=t||(n=e[y])<32||n>126&&n<gi){this._printHandler(e,u,y),u=y-1;break}}break;case 3:this._executeHandlers[n]?this._executeHandlers[n]():this._executeHandlerFb(n),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:u,code:n,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let p=this._csiHandlers[this._collect<<8|n],d=p?p.length-1:-1;for(;d>=0&&(h=p[d](this._params),h!==!0);d--)if(h instanceof Promise)return this._preserveStack(3,p,d,o,u),h;d<0&&this._csiHandlerFb(this._collect<<8|n,this._params),this.precedingJoinState=0;break;case 8:do switch(n){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(n-48)}while(++u<t&&(n=e[u])>47&&n<60);u--;break;case 9:this._collect<<=8,this._collect|=n;break;case 10:let _=this._escHandlers[this._collect<<8|n],g=_?_.length-1:-1;for(;g>=0&&(h=_[g](),h!==!0);g--)if(h instanceof Promise)return this._preserveStack(4,_,g,o,u),h;g<0&&this._escHandlerFb(this._collect<<8|n),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|n,this._params);break;case 13:for(let y=u+1;;++y)if(y>=t||(n=e[y])===24||n===26||n===27||n>127&&n<gi){this._dcsParser.put(e,u,y),u=y-1;break}break;case 14:if(h=this._dcsParser.unhook(n!==24&&n!==26),h)return this._preserveStack(6,[],0,o,u),h;n===27&&(o|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let y=u+1;;y++)if(y>=t||(n=e[y])<32||n>127&&n<gi){this._oscParser.put(e,u,y),u=y-1;break}break;case 6:if(h=this._oscParser.end(n!==24&&n!==26),h)return this._preserveStack(5,[],0,o,u),h;n===27&&(o|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break}this.currentState=o&15}}},D2=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,M2=/^[\da-f]+$/;function k_(e){if(!e)return;let t=e.toLowerCase();if(t.indexOf("rgb:")===0){t=t.slice(4);let i=D2.exec(t);if(i){let n=i[1]?15:i[4]?255:i[7]?4095:65535;return[Math.round(parseInt(i[1]||i[4]||i[7]||i[10],16)/n*255),Math.round(parseInt(i[2]||i[5]||i[8]||i[11],16)/n*255),Math.round(parseInt(i[3]||i[6]||i[9]||i[12],16)/n*255)]}}else if(t.indexOf("#")===0&&(t=t.slice(1),M2.exec(t)&&[3,6,9,12].includes(t.length))){let i=t.length/3,n=[0,0,0];for(let o=0;o<3;++o){let l=parseInt(t.slice(i*o,i*o+i),16);n[o]=i===1?l<<4:i===2?l:i===3?l>>4:l>>8}return n}}function Su(e,t){let i=e.toString(16),n=i.length<2?"0"+i:i;switch(t){case 4:return i[0];case 8:return n;case 12:return(n+n).slice(0,3);default:return n+n}}function T2(e,t=16){let[i,n,o]=e;return`rgb:${Su(i,t)}/${Su(n,t)}/${Su(o,t)}`}var O2={"(":0,")":1,"*":2,"+":3,"-":1,".":2},Br=131072,E_=10;function R_(e,t){if(e>24)return t.setWinLines||!1;switch(e){case 1:return!!t.restoreWin;case 2:return!!t.minimizeWin;case 3:return!!t.setWinPosition;case 4:return!!t.setWinSizePixels;case 5:return!!t.raiseWin;case 6:return!!t.lowerWin;case 7:return!!t.refreshWin;case 8:return!!t.setWinSizeChars;case 9:return!!t.maximizeWin;case 10:return!!t.fullscreenWin;case 11:return!!t.getWinState;case 13:return!!t.getWinPosition;case 14:return!!t.getWinSizePixels;case 15:return!!t.getScreenSizePixels;case 16:return!!t.getCellSizePixels;case 18:return!!t.getWinSizeChars;case 19:return!!t.getScreenSizeChars;case 20:return!!t.getIconTitle;case 21:return!!t.getWinTitle;case 22:return!!t.pushTitle;case 23:return!!t.popTitle;case 24:return!!t.setWinLines}return!1}var P_=5e3,L_=0,B2=class extends Le{constructor(e,t,i,n,o,l,h,u,p=new N2){super(),this._bufferService=e,this._charsetService=t,this._coreService=i,this._logService=n,this._optionsService=o,this._oscLinkService=l,this._coreMouseService=h,this._unicodeService=u,this._parser=p,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new eb,this._utf8Decoder=new tb,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=ot.clone(),this._eraseAttrDataInternal=ot.clone(),this._onRequestBell=this._register(new ee),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this._register(new ee),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this._register(new ee),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this._register(new ee),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this._register(new ee),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this._register(new ee),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this._register(new ee),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this._register(new ee),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this._register(new ee),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this._register(new ee),this.onLineFeed=this._onLineFeed.event,this._onScroll=this._register(new ee),this.onScroll=this._onScroll.event,this._onTitleChange=this._register(new ee),this.onTitleChange=this._onTitleChange.event,this._onColor=this._register(new ee),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this._register(this._parser),this._dirtyRowTracker=new xd(this._bufferService),this._activeBuffer=this._bufferService.buffer,this._register(this._bufferService.buffers.onBufferActivate(d=>this._activeBuffer=d.activeBuffer)),this._parser.setCsiHandlerFallback((d,_)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(d),params:_.toArray()})}),this._parser.setEscHandlerFallback(d=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(d)})}),this._parser.setExecuteHandlerFallback(d=>{this._logService.debug("Unknown EXECUTE code: ",{code:d})}),this._parser.setOscHandlerFallback((d,_,g)=>{this._logService.debug("Unknown OSC code: ",{identifier:d,action:_,data:g})}),this._parser.setDcsHandlerFallback((d,_,g)=>{_==="HOOK"&&(g=g.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(d),action:_,payload:g})}),this._parser.setPrintHandler((d,_,g)=>this.print(d,_,g)),this._parser.registerCsiHandler({final:"@"},d=>this.insertChars(d)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},d=>this.scrollLeft(d)),this._parser.registerCsiHandler({final:"A"},d=>this.cursorUp(d)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},d=>this.scrollRight(d)),this._parser.registerCsiHandler({final:"B"},d=>this.cursorDown(d)),this._parser.registerCsiHandler({final:"C"},d=>this.cursorForward(d)),this._parser.registerCsiHandler({final:"D"},d=>this.cursorBackward(d)),this._parser.registerCsiHandler({final:"E"},d=>this.cursorNextLine(d)),this._parser.registerCsiHandler({final:"F"},d=>this.cursorPrecedingLine(d)),this._parser.registerCsiHandler({final:"G"},d=>this.cursorCharAbsolute(d)),this._parser.registerCsiHandler({final:"H"},d=>this.cursorPosition(d)),this._parser.registerCsiHandler({final:"I"},d=>this.cursorForwardTab(d)),this._parser.registerCsiHandler({final:"J"},d=>this.eraseInDisplay(d,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},d=>this.eraseInDisplay(d,!0)),this._parser.registerCsiHandler({final:"K"},d=>this.eraseInLine(d,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},d=>this.eraseInLine(d,!0)),this._parser.registerCsiHandler({final:"L"},d=>this.insertLines(d)),this._parser.registerCsiHandler({final:"M"},d=>this.deleteLines(d)),this._parser.registerCsiHandler({final:"P"},d=>this.deleteChars(d)),this._parser.registerCsiHandler({final:"S"},d=>this.scrollUp(d)),this._parser.registerCsiHandler({final:"T"},d=>this.scrollDown(d)),this._parser.registerCsiHandler({final:"X"},d=>this.eraseChars(d)),this._parser.registerCsiHandler({final:"Z"},d=>this.cursorBackwardTab(d)),this._parser.registerCsiHandler({final:"`"},d=>this.charPosAbsolute(d)),this._parser.registerCsiHandler({final:"a"},d=>this.hPositionRelative(d)),this._parser.registerCsiHandler({final:"b"},d=>this.repeatPrecedingCharacter(d)),this._parser.registerCsiHandler({final:"c"},d=>this.sendDeviceAttributesPrimary(d)),this._parser.registerCsiHandler({prefix:">",final:"c"},d=>this.sendDeviceAttributesSecondary(d)),this._parser.registerCsiHandler({final:"d"},d=>this.linePosAbsolute(d)),this._parser.registerCsiHandler({final:"e"},d=>this.vPositionRelative(d)),this._parser.registerCsiHandler({final:"f"},d=>this.hVPosition(d)),this._parser.registerCsiHandler({final:"g"},d=>this.tabClear(d)),this._parser.registerCsiHandler({final:"h"},d=>this.setMode(d)),this._parser.registerCsiHandler({prefix:"?",final:"h"},d=>this.setModePrivate(d)),this._parser.registerCsiHandler({final:"l"},d=>this.resetMode(d)),this._parser.registerCsiHandler({prefix:"?",final:"l"},d=>this.resetModePrivate(d)),this._parser.registerCsiHandler({final:"m"},d=>this.charAttributes(d)),this._parser.registerCsiHandler({final:"n"},d=>this.deviceStatus(d)),this._parser.registerCsiHandler({prefix:"?",final:"n"},d=>this.deviceStatusPrivate(d)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},d=>this.softReset(d)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},d=>this.setCursorStyle(d)),this._parser.registerCsiHandler({final:"r"},d=>this.setScrollRegion(d)),this._parser.registerCsiHandler({final:"s"},d=>this.saveCursor(d)),this._parser.registerCsiHandler({final:"t"},d=>this.windowOptions(d)),this._parser.registerCsiHandler({final:"u"},d=>this.restoreCursor(d)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},d=>this.insertColumns(d)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},d=>this.deleteColumns(d)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},d=>this.selectProtected(d)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},d=>this.requestMode(d,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},d=>this.requestMode(d,!1)),this._parser.setExecuteHandler(H.BEL,()=>this.bell()),this._parser.setExecuteHandler(H.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(H.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(H.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(H.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(H.BS,()=>this.backspace()),this._parser.setExecuteHandler(H.HT,()=>this.tab()),this._parser.setExecuteHandler(H.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(H.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(Ll.IND,()=>this.index()),this._parser.setExecuteHandler(Ll.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(Ll.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new si(d=>(this.setTitle(d),this.setIconName(d),!0))),this._parser.registerOscHandler(1,new si(d=>this.setIconName(d))),this._parser.registerOscHandler(2,new si(d=>this.setTitle(d))),this._parser.registerOscHandler(4,new si(d=>this.setOrReportIndexedColor(d))),this._parser.registerOscHandler(8,new si(d=>this.setHyperlink(d))),this._parser.registerOscHandler(10,new si(d=>this.setOrReportFgColor(d))),this._parser.registerOscHandler(11,new si(d=>this.setOrReportBgColor(d))),this._parser.registerOscHandler(12,new si(d=>this.setOrReportCursorColor(d))),this._parser.registerOscHandler(104,new si(d=>this.restoreIndexedColor(d))),this._parser.registerOscHandler(110,new si(d=>this.restoreFgColor(d))),this._parser.registerOscHandler(111,new si(d=>this.restoreBgColor(d))),this._parser.registerOscHandler(112,new si(d=>this.restoreCursorColor(d))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let d in ft)this._parser.registerEscHandler({intermediates:"(",final:d},()=>this.selectCharset("("+d)),this._parser.registerEscHandler({intermediates:")",final:d},()=>this.selectCharset(")"+d)),this._parser.registerEscHandler({intermediates:"*",final:d},()=>this.selectCharset("*"+d)),this._parser.registerEscHandler({intermediates:"+",final:d},()=>this.selectCharset("+"+d)),this._parser.registerEscHandler({intermediates:"-",final:d},()=>this.selectCharset("-"+d)),this._parser.registerEscHandler({intermediates:".",final:d},()=>this.selectCharset("."+d)),this._parser.registerEscHandler({intermediates:"/",final:d},()=>this.selectCharset("/"+d));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(d=>(this._logService.error("Parsing error: ",d),d)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new b_((d,_)=>this.requestStatusString(d,_)))}getAttrData(){return this._curAttrData}_preserveStack(e,t,i,n){this._parseStack.paused=!0,this._parseStack.cursorStartX=e,this._parseStack.cursorStartY=t,this._parseStack.decodedLength=i,this._parseStack.position=n}_logSlowResolvingAsync(e){this._logService.logLevel<=3&&Promise.race([e,new Promise((t,i)=>setTimeout(()=>i("#SLOW_TIMEOUT"),P_))]).catch(t=>{if(t!=="#SLOW_TIMEOUT")throw t;console.warn(`async parser handler taking longer than ${P_} ms`)})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(e,t){let i,n=this._activeBuffer.x,o=this._activeBuffer.y,l=0,h=this._parseStack.paused;if(h){if(i=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,t))return this._logSlowResolvingAsync(i),i;n=this._parseStack.cursorStartX,o=this._parseStack.cursorStartY,this._parseStack.paused=!1,e.length>Br&&(l=this._parseStack.position+Br)}if(this._logService.logLevel<=1&&this._logService.debug(`parsing data ${typeof e=="string"?` "${e}"`:` "${Array.prototype.map.call(e,d=>String.fromCharCode(d)).join("")}"`}`),this._logService.logLevel===0&&this._logService.trace("parsing data (codes)",typeof e=="string"?e.split("").map(d=>d.charCodeAt(0)):e),this._parseBuffer.length<e.length&&this._parseBuffer.length<Br&&(this._parseBuffer=new Uint32Array(Math.min(e.length,Br))),h||this._dirtyRowTracker.clearRange(),e.length>Br)for(let d=l;d<e.length;d+=Br){let _=d+Br<e.length?d+Br:e.length,g=typeof e=="string"?this._stringDecoder.decode(e.substring(d,_),this._parseBuffer):this._utf8Decoder.decode(e.subarray(d,_),this._parseBuffer);if(i=this._parser.parse(this._parseBuffer,g))return this._preserveStack(n,o,g,d),this._logSlowResolvingAsync(i),i}else if(!h){let d=typeof e=="string"?this._stringDecoder.decode(e,this._parseBuffer):this._utf8Decoder.decode(e,this._parseBuffer);if(i=this._parser.parse(this._parseBuffer,d))return this._preserveStack(n,o,d,0),this._logSlowResolvingAsync(i),i}(this._activeBuffer.x!==n||this._activeBuffer.y!==o)&&this._onCursorMove.fire();let u=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),p=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);p<this._bufferService.rows&&this._onRequestRefreshRows.fire({start:Math.min(p,this._bufferService.rows-1),end:Math.min(u,this._bufferService.rows-1)})}print(e,t,i){let n,o,l=this._charsetService.charset,h=this._optionsService.rawOptions.screenReaderMode,u=this._bufferService.cols,p=this._coreService.decPrivateModes.wraparound,d=this._coreService.modes.insertMode,_=this._curAttrData,g=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&i-t>0&&g.getWidth(this._activeBuffer.x-1)===2&&g.setCellFromCodepoint(this._activeBuffer.x-1,0,1,_);let y=this._parser.precedingJoinState;for(let w=t;w<i;++w){if(n=e[w],n<127&&l){let L=l[String.fromCharCode(n)];L&&(n=L.charCodeAt(0))}let x=this._unicodeService.charProperties(n,y);o=ms.extractWidth(x);let C=ms.extractShouldJoin(x),k=C?ms.extractWidth(y):0;if(y=x,h&&this._onA11yChar.fire(jr(n)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+o-k>u){if(p){let L=g,W=this._activeBuffer.x-k;for(this._activeBuffer.x=k,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),g=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),k>0&&g instanceof Do&&g.copyCellsFrom(L,W,0,k,!1);W<u;)L.setCellFromCodepoint(W++,0,1,_)}else if(this._activeBuffer.x=u-1,o===2)continue}if(C&&this._activeBuffer.x){let L=g.getWidth(this._activeBuffer.x-1)?1:2;g.addCodepointToCell(this._activeBuffer.x-L,n,o);for(let W=o-k;--W>=0;)g.setCellFromCodepoint(this._activeBuffer.x++,0,0,_);continue}if(d&&(g.insertCells(this._activeBuffer.x,o-k,this._activeBuffer.getNullCell(_)),g.getWidth(u-1)===2&&g.setCellFromCodepoint(u-1,0,1,_)),g.setCellFromCodepoint(this._activeBuffer.x++,n,o,_),o>0)for(;--o;)g.setCellFromCodepoint(this._activeBuffer.x++,0,0,_)}this._parser.precedingJoinState=y,this._activeBuffer.x<u&&i-t>0&&g.getWidth(this._activeBuffer.x)===0&&!g.hasContent(this._activeBuffer.x)&&g.setCellFromCodepoint(this._activeBuffer.x,0,1,_),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(e,t){return e.final==="t"&&!e.prefix&&!e.intermediates?this._parser.registerCsiHandler(e,i=>R_(i.params[0],this._optionsService.rawOptions.windowOptions)?t(i):!0):this._parser.registerCsiHandler(e,t)}registerDcsHandler(e,t){return this._parser.registerDcsHandler(e,new b_(t))}registerEscHandler(e,t){return this._parser.registerEscHandler(e,t)}registerOscHandler(e,t){return this._parser.registerOscHandler(e,new si(t))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var e;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&e.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);t.hasWidth(this._activeBuffer.x)&&!t.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let e=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-e),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(e=this._bufferService.cols-1){this._activeBuffer.x=Math.min(e,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(e,t){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=e,this._activeBuffer.y=this._activeBuffer.scrollTop+t):(this._activeBuffer.x=e,this._activeBuffer.y=t),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(e,t){this._restrictCursor(),this._setCursor(this._activeBuffer.x+e,this._activeBuffer.y+t)}cursorUp(e){let t=this._activeBuffer.y-this._activeBuffer.scrollTop;return t>=0?this._moveCursor(0,-Math.min(t,e.params[0]||1)):this._moveCursor(0,-(e.params[0]||1)),!0}cursorDown(e){let t=this._activeBuffer.scrollBottom-this._activeBuffer.y;return t>=0?this._moveCursor(0,Math.min(t,e.params[0]||1)):this._moveCursor(0,e.params[0]||1),!0}cursorForward(e){return this._moveCursor(e.params[0]||1,0),!0}cursorBackward(e){return this._moveCursor(-(e.params[0]||1),0),!0}cursorNextLine(e){return this.cursorDown(e),this._activeBuffer.x=0,!0}cursorPrecedingLine(e){return this.cursorUp(e),this._activeBuffer.x=0,!0}cursorCharAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(e){return this._setCursor(e.length>=2?(e.params[1]||1)-1:0,(e.params[0]||1)-1),!0}charPosAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(e){return this._moveCursor(e.params[0]||1,0),!0}linePosAbsolute(e){return this._setCursor(this._activeBuffer.x,(e.params[0]||1)-1),!0}vPositionRelative(e){return this._moveCursor(0,e.params[0]||1),!0}hVPosition(e){return this.cursorPosition(e),!0}tabClear(e){let t=e.params[0];return t===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:t===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(e){let t=e.params[0];return t===1&&(this._curAttrData.bg|=536870912),(t===2||t===0)&&(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(e,t,i,n=!1,o=!1){let l=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);l.replaceCells(t,i,this._activeBuffer.getNullCell(this._eraseAttrData()),o),n&&(l.isWrapped=!1)}_resetBufferLine(e,t=!1){let i=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);i&&(i.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),t),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+e),i.isWrapped=!1)}eraseInDisplay(e,t=!1){var n;this._restrictCursor(this._bufferService.cols);let i;switch(e.params[0]){case 0:for(i=this._activeBuffer.y,this._dirtyRowTracker.markDirty(i),this._eraseInBufferLine(i++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,t);i<this._bufferService.rows;i++)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(i);break;case 1:for(i=this._activeBuffer.y,this._dirtyRowTracker.markDirty(i),this._eraseInBufferLine(i,0,this._activeBuffer.x+1,!0,t),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(i+1).isWrapped=!1);i--;)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(0);break;case 2:if(this._optionsService.rawOptions.scrollOnEraseInDisplay){for(i=this._bufferService.rows,this._dirtyRowTracker.markRangeDirty(0,i-1);i--&&!((n=this._activeBuffer.lines.get(this._activeBuffer.ybase+i))!=null&&n.getTrimmedLength()););for(;i>=0;i--)this._bufferService.scroll(this._eraseAttrData())}else{for(i=this._bufferService.rows,this._dirtyRowTracker.markDirty(i-1);i--;)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(0)}break;case 3:let o=this._activeBuffer.lines.length-this._bufferService.rows;o>0&&(this._activeBuffer.lines.trimStart(o),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-o,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-o,0),this._onScroll.fire(0));break}return!0}eraseInLine(e,t=!1){switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,t);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,t);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,t);break}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let i=this._activeBuffer.ybase+this._activeBuffer.y,n=this._bufferService.rows-1-this._activeBuffer.scrollBottom,o=this._bufferService.rows-1+this._activeBuffer.ybase-n+1;for(;t--;)this._activeBuffer.lines.splice(o-1,1),this._activeBuffer.lines.splice(i,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let i=this._activeBuffer.ybase+this._activeBuffer.y,n;for(n=this._bufferService.rows-1-this._activeBuffer.scrollBottom,n=this._bufferService.rows-1+this._activeBuffer.ybase-n;t--;)this._activeBuffer.lines.splice(i,1),this._activeBuffer.lines.splice(n,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.insertCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.deleteCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(ot));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);n.deleteCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData())),n.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);n.insertCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData())),n.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);n.insertCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData())),n.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);n.deleteCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData())),n.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(e.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(e){let t=this._parser.precedingJoinState;if(!t)return!0;let i=e.params[0]||1,n=ms.extractWidth(t),o=this._activeBuffer.x-n,l=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(o),h=new Uint32Array(l.length*i),u=0;for(let d=0;d<l.length;){let _=l.codePointAt(d)||0;h[u++]=_,d+=_>65535?2:1}let p=u;for(let d=1;d<i;++d)h.copyWithin(p,0,u),p+=u;return this.print(h,0,p),!0}sendDeviceAttributesPrimary(e){return e.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(H.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(H.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(e){return e.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(H.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(H.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(e.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(H.ESC+"[>83;40003;0c")),!0}_is(e){return(this._optionsService.rawOptions.termName+"").indexOf(e)===0}setMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0;break}return!0}setModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,fs),this._charsetService.setgCharset(1,fs),this._charsetService.setgCharset(2,fs),this._charsetService.setgCharset(3,fs);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!0;break}return!0}resetMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1;break}return!0}resetModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),e.params[t]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!1,this._onRequestRefreshRows.fire(void 0);break}return!0}requestMode(e,t){(C=>(C[C.NOT_RECOGNIZED=0]="NOT_RECOGNIZED",C[C.SET=1]="SET",C[C.RESET=2]="RESET",C[C.PERMANENTLY_SET=3]="PERMANENTLY_SET",C[C.PERMANENTLY_RESET=4]="PERMANENTLY_RESET"))(void 0||(i={}));let n=this._coreService.decPrivateModes,{activeProtocol:o,activeEncoding:l}=this._coreMouseService,h=this._coreService,{buffers:u,cols:p}=this._bufferService,{active:d,alt:_}=u,g=this._optionsService.rawOptions,y=(C,k)=>(h.triggerDataEvent(`${H.ESC}[${t?"":"?"}${C};${k}$y`),!0),w=C=>C?1:2,x=e.params[0];return t?x===2?y(x,4):x===4?y(x,w(h.modes.insertMode)):x===12?y(x,3):x===20?y(x,w(g.convertEol)):y(x,0):x===1?y(x,w(n.applicationCursorKeys)):x===3?y(x,g.windowOptions.setWinLines?p===80?2:p===132?1:0:0):x===6?y(x,w(n.origin)):x===7?y(x,w(n.wraparound)):x===8?y(x,3):x===9?y(x,w(o==="X10")):x===12?y(x,w(g.cursorBlink)):x===25?y(x,w(!h.isCursorHidden)):x===45?y(x,w(n.reverseWraparound)):x===66?y(x,w(n.applicationKeypad)):x===67?y(x,4):x===1e3?y(x,w(o==="VT200")):x===1002?y(x,w(o==="DRAG")):x===1003?y(x,w(o==="ANY")):x===1004?y(x,w(n.sendFocus)):x===1005?y(x,4):x===1006?y(x,w(l==="SGR")):x===1015?y(x,4):x===1016?y(x,w(l==="SGR_PIXELS")):x===1048?y(x,1):x===47||x===1047||x===1049?y(x,w(d===_)):x===2004?y(x,w(n.bracketedPasteMode)):x===2026?y(x,w(n.synchronizedOutput)):y(x,0)}_updateAttrColor(e,t,i,n,o){return t===2?(e|=50331648,e&=-16777216,e|=Zo.fromColorRGB([i,n,o])):t===5&&(e&=-50331904,e|=33554432|i&255),e}_extractColor(e,t,i){let n=[0,0,-1,0,0,0],o=0,l=0;do{if(n[l+o]=e.params[t+l],e.hasSubParams(t+l)){let h=e.getSubParams(t+l),u=0;do n[1]===5&&(o=1),n[l+u+1+o]=h[u];while(++u<h.length&&u+l+1+o<n.length);break}if(n[1]===5&&l+o>=2||n[1]===2&&l+o>=5)break;n[1]&&(o=1)}while(++l+t<e.length&&l+o<n.length);for(let h=2;h<n.length;++h)n[h]===-1&&(n[h]=0);switch(n[0]){case 38:i.fg=this._updateAttrColor(i.fg,n[1],n[3],n[4],n[5]);break;case 48:i.bg=this._updateAttrColor(i.bg,n[1],n[3],n[4],n[5]);break;case 58:i.extended=i.extended.clone(),i.extended.underlineColor=this._updateAttrColor(i.extended.underlineColor,n[1],n[3],n[4],n[5])}return l}_processUnderline(e,t){t.extended=t.extended.clone(),(!~e||e>5)&&(e=1),t.extended.underlineStyle=e,t.fg|=268435456,e===0&&(t.fg&=-268435457),t.updateExtended()}_processSGR0(e){e.fg=ot.fg,e.bg=ot.bg,e.extended=e.extended.clone(),e.extended.underlineStyle=0,e.extended.underlineColor&=-67108864,e.updateExtended()}charAttributes(e){if(e.length===1&&e.params[0]===0)return this._processSGR0(this._curAttrData),!0;let t=e.length,i,n=this._curAttrData;for(let o=0;o<t;o++)i=e.params[o],i>=30&&i<=37?(n.fg&=-50331904,n.fg|=16777216|i-30):i>=40&&i<=47?(n.bg&=-50331904,n.bg|=16777216|i-40):i>=90&&i<=97?(n.fg&=-50331904,n.fg|=16777216|i-90|8):i>=100&&i<=107?(n.bg&=-50331904,n.bg|=16777216|i-100|8):i===0?this._processSGR0(n):i===1?n.fg|=134217728:i===3?n.bg|=67108864:i===4?(n.fg|=268435456,this._processUnderline(e.hasSubParams(o)?e.getSubParams(o)[0]:1,n)):i===5?n.fg|=536870912:i===7?n.fg|=67108864:i===8?n.fg|=1073741824:i===9?n.fg|=2147483648:i===2?n.bg|=134217728:i===21?this._processUnderline(2,n):i===22?(n.fg&=-134217729,n.bg&=-134217729):i===23?n.bg&=-67108865:i===24?(n.fg&=-268435457,this._processUnderline(0,n)):i===25?n.fg&=-536870913:i===27?n.fg&=-67108865:i===28?n.fg&=-1073741825:i===29?n.fg&=2147483647:i===39?(n.fg&=-67108864,n.fg|=ot.fg&16777215):i===49?(n.bg&=-67108864,n.bg|=ot.bg&16777215):i===38||i===48||i===58?o+=this._extractColor(e,o,n):i===53?n.bg|=1073741824:i===55?n.bg&=-1073741825:i===59?(n.extended=n.extended.clone(),n.extended.underlineColor=-1,n.updateExtended()):i===100?(n.fg&=-67108864,n.fg|=ot.fg&16777215,n.bg&=-67108864,n.bg|=ot.bg&16777215):this._logService.debug("Unknown SGR attribute: %d.",i);return!0}deviceStatus(e){switch(e.params[0]){case 5:this._coreService.triggerDataEvent(`${H.ESC}[0n`);break;case 6:let t=this._activeBuffer.y+1,i=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${H.ESC}[${t};${i}R`);break}return!0}deviceStatusPrivate(e){switch(e.params[0]){case 6:let t=this._activeBuffer.y+1,i=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${H.ESC}[?${t};${i}R`);break}return!0}softReset(e){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=ot.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(e){let t=e.length===0?1:e.params[0];if(t===0)this._coreService.decPrivateModes.cursorStyle=void 0,this._coreService.decPrivateModes.cursorBlink=void 0;else{switch(t){case 1:case 2:this._coreService.decPrivateModes.cursorStyle="block";break;case 3:case 4:this._coreService.decPrivateModes.cursorStyle="underline";break;case 5:case 6:this._coreService.decPrivateModes.cursorStyle="bar";break}let i=t%2===1;this._coreService.decPrivateModes.cursorBlink=i}return!0}setScrollRegion(e){let t=e.params[0]||1,i;return(e.length<2||(i=e.params[1])>this._bufferService.rows||i===0)&&(i=this._bufferService.rows),i>t&&(this._activeBuffer.scrollTop=t-1,this._activeBuffer.scrollBottom=i-1,this._setCursor(0,0)),!0}windowOptions(e){if(!R_(e.params[0],this._optionsService.rawOptions.windowOptions))return!0;let t=e.length>1?e.params[1]:0;switch(e.params[0]){case 14:t!==2&&this._onRequestWindowsOptionsReport.fire(0);break;case 16:this._onRequestWindowsOptionsReport.fire(1);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${H.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:(t===0||t===2)&&(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>E_&&this._windowTitleStack.shift()),(t===0||t===1)&&(this._iconNameStack.push(this._iconName),this._iconNameStack.length>E_&&this._iconNameStack.shift());break;case 23:(t===0||t===2)&&this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),(t===0||t===1)&&this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop());break}return!0}saveCursor(e){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(e){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(e){return this._windowTitle=e,this._onTitleChange.fire(e),!0}setIconName(e){return this._iconName=e,!0}setOrReportIndexedColor(e){let t=[],i=e.split(";");for(;i.length>1;){let n=i.shift(),o=i.shift();if(/^\d+$/.exec(n)){let l=parseInt(n);if(N_(l))if(o==="?")t.push({type:0,index:l});else{let h=k_(o);h&&t.push({type:1,index:l,color:h})}}}return t.length&&this._onColor.fire(t),!0}setHyperlink(e){let t=e.indexOf(";");if(t===-1)return!0;let i=e.slice(0,t).trim(),n=e.slice(t+1);return n?this._createHyperlink(i,n):i.trim()?!1:this._finishHyperlink()}_createHyperlink(e,t){this._getCurrentLinkId()&&this._finishHyperlink();let i=e.split(":"),n,o=i.findIndex(l=>l.startsWith("id="));return o!==-1&&(n=i[o].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:n,uri:t}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(e,t){let i=e.split(";");for(let n=0;n<i.length&&!(t>=this._specialColors.length);++n,++t)if(i[n]==="?")this._onColor.fire([{type:0,index:this._specialColors[t]}]);else{let o=k_(i[n]);o&&this._onColor.fire([{type:1,index:this._specialColors[t],color:o}])}return!0}setOrReportFgColor(e){return this._setOrReportSpecialColor(e,0)}setOrReportBgColor(e){return this._setOrReportSpecialColor(e,1)}setOrReportCursorColor(e){return this._setOrReportSpecialColor(e,2)}restoreIndexedColor(e){if(!e)return this._onColor.fire([{type:2}]),!0;let t=[],i=e.split(";");for(let n=0;n<i.length;++n)if(/^\d+$/.exec(i[n])){let o=parseInt(i[n]);N_(o)&&t.push({type:2,index:o})}return t.length&&this._onColor.fire(t),!0}restoreFgColor(e){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(e){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(e){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,fs),!0}selectCharset(e){return e.length!==2?(this.selectDefaultCharset(),!0):(e[0]==="/"||this._charsetService.setgCharset(O2[e[0]],ft[e[1]]||fs),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let e=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,e,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=ot.clone(),this._eraseAttrDataInternal=ot.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=this._curAttrData.bg&67108863,this._eraseAttrDataInternal}setgLevel(e){return this._charsetService.setgLevel(e),!0}screenAlignmentPattern(){let e=new _i;e.content=1<<22|69,e.fg=this._curAttrData.fg,e.bg=this._curAttrData.bg,this._setCursor(0,0);for(let t=0;t<this._bufferService.rows;++t){let i=this._activeBuffer.ybase+this._activeBuffer.y+t,n=this._activeBuffer.lines.get(i);n&&(n.fill(e),n.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(e,t){let i=h=>(this._coreService.triggerDataEvent(`${H.ESC}${h}${H.ESC}\\`),!0),n=this._bufferService.buffer,o=this._optionsService.rawOptions;return i(e==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:e==='"p'?'P1$r61;1"p':e==="r"?`P1$r${n.scrollTop+1};${n.scrollBottom+1}r`:e==="m"?"P1$r0m":e===" q"?`P1$r${{block:2,underline:4,bar:6}[o.cursorStyle]-(o.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(e,t){this._dirtyRowTracker.markRangeDirty(e,t)}},xd=class{constructor(e){this._bufferService=e,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(e){e<this.start?this.start=e:e>this.end&&(this.end=e)}markRangeDirty(e,t){e>t&&(L_=e,e=t,t=L_),e<this.start&&(this.start=e),t>this.end&&(this.end=t)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};xd=tt([oe(0,$t)],xd);function N_(e){return 0<=e&&e<256}var I2=5e7,D_=12,A2=50,j2=class extends Le{constructor(e){super(),this._action=e,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this._register(new ee),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(e,t){if(t!==void 0&&this._syncCalls>t){this._syncCalls=0;return}if(this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;this._isSyncWriting=!0;let i;for(;i=this._writeBuffer.shift();){this._action(i);let n=this._callbacks.shift();n&&n()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(e,t){if(this._pendingData>I2)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput){this._didUserInput=!1,this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t),this._innerWrite();return}setTimeout(()=>this._innerWrite())}this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t)}_innerWrite(e=0,t=!0){let i=e||performance.now();for(;this._writeBuffer.length>this._bufferOffset;){let n=this._writeBuffer[this._bufferOffset],o=this._action(n,t);if(o){let h=u=>performance.now()-i>=D_?setTimeout(()=>this._innerWrite(0,u)):this._innerWrite(i,u);o.catch(u=>(queueMicrotask(()=>{throw u}),Promise.resolve(!1))).then(h);return}let l=this._callbacks[this._bufferOffset];if(l&&l(),this._bufferOffset++,this._pendingData-=n.length,performance.now()-i>=D_)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>A2&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}},Cd=class{constructor(e){this._bufferService=e,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(e){let t=this._bufferService.buffer;if(e.id===void 0){let u=t.addMarker(t.ybase+t.y),p={data:e,id:this._nextId++,lines:[u]};return u.onDispose(()=>this._removeMarkerFromLink(p,u)),this._dataByLinkId.set(p.id,p),p.id}let i=e,n=this._getEntryIdKey(i),o=this._entriesWithId.get(n);if(o)return this.addLineToLink(o.id,t.ybase+t.y),o.id;let l=t.addMarker(t.ybase+t.y),h={id:this._nextId++,key:this._getEntryIdKey(i),data:i,lines:[l]};return l.onDispose(()=>this._removeMarkerFromLink(h,l)),this._entriesWithId.set(h.key,h),this._dataByLinkId.set(h.id,h),h.id}addLineToLink(e,t){let i=this._dataByLinkId.get(e);if(i&&i.lines.every(n=>n.line!==t)){let n=this._bufferService.buffer.addMarker(t);i.lines.push(n),n.onDispose(()=>this._removeMarkerFromLink(i,n))}}getLinkData(e){var t;return(t=this._dataByLinkId.get(e))==null?void 0:t.data}_getEntryIdKey(e){return`${e.id};;${e.uri}`}_removeMarkerFromLink(e,t){let i=e.lines.indexOf(t);i!==-1&&(e.lines.splice(i,1),e.lines.length===0&&(e.data.id!==void 0&&this._entriesWithId.delete(e.key),this._dataByLinkId.delete(e.id)))}};Cd=tt([oe(0,$t)],Cd);var M_=!1,F2=class extends Le{constructor(e){super(),this._windowsWrappingHeuristics=this._register(new kn),this._onBinary=this._register(new ee),this.onBinary=this._onBinary.event,this._onData=this._register(new ee),this.onData=this._onData.event,this._onLineFeed=this._register(new ee),this.onLineFeed=this._onLineFeed.event,this._onResize=this._register(new ee),this.onResize=this._onResize.event,this._onWriteParsed=this._register(new ee),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this._register(new ee),this._instantiationService=new h2,this.optionsService=this._register(new y2(e)),this._instantiationService.setService(Wt,this.optionsService),this._bufferService=this._register(this._instantiationService.createInstance(vd)),this._instantiationService.setService($t,this._bufferService),this._logService=this._register(this._instantiationService.createInstance(_d)),this._instantiationService.setService(t0,this._logService),this.coreService=this._register(this._instantiationService.createInstance(yd)),this._instantiationService.setService(Ds,this.coreService),this.coreMouseService=this._register(this._instantiationService.createInstance(Sd)),this._instantiationService.setService(e0,this.coreMouseService),this.unicodeService=this._register(this._instantiationService.createInstance(ms)),this._instantiationService.setService(nb,this.unicodeService),this._charsetService=this._instantiationService.createInstance(b2),this._instantiationService.setService(sb,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(Cd),this._instantiationService.setService(i0,this._oscLinkService),this._inputHandler=this._register(new B2(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this._register(Rt.forward(this._inputHandler.onLineFeed,this._onLineFeed)),this._register(this._inputHandler),this._register(Rt.forward(this._bufferService.onResize,this._onResize)),this._register(Rt.forward(this.coreService.onData,this._onData)),this._register(Rt.forward(this.coreService.onBinary,this._onBinary)),this._register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom(!0))),this._register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this._register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this._register(this._bufferService.onScroll(()=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this._register(new j2((t,i)=>this._inputHandler.parse(t,i))),this._register(Rt.forward(this._writeBuffer.onWriteParsed,this._onWriteParsed))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this._register(new ee),this._onScroll.event(e=>{var t;(t=this._onScrollApi)==null||t.fire(e.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(e){for(let t in e)this.optionsService.options[t]=e[t]}write(e,t){this._writeBuffer.write(e,t)}writeSync(e,t){this._logService.logLevel<=3&&!M_&&(this._logService.warn("writeSync is unreliable and will be removed soon."),M_=!0),this._writeBuffer.writeSync(e,t)}input(e,t=!0){this.coreService.triggerDataEvent(e,t)}resize(e,t){isNaN(e)||isNaN(t)||(e=Math.max(e,O0),t=Math.max(t,B0),this._bufferService.resize(e,t))}scroll(e,t=!1){this._bufferService.scroll(e,t)}scrollLines(e,t){this._bufferService.scrollLines(e,t)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(e){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){let t=e-this._bufferService.buffer.ydisp;t!==0&&this.scrollLines(t)}registerEscHandler(e,t){return this._inputHandler.registerEscHandler(e,t)}registerDcsHandler(e,t){return this._inputHandler.registerDcsHandler(e,t)}registerCsiHandler(e,t){return this._inputHandler.registerCsiHandler(e,t)}registerOscHandler(e,t){return this._inputHandler.registerOscHandler(e,t)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let e=!1,t=this.optionsService.rawOptions.windowsPty;t&&t.buildNumber!==void 0&&t.buildNumber!==void 0?e=t.backend==="conpty"&&t.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(e=!0),e?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let e=[];e.push(this.onLineFeed(C_.bind(null,this._bufferService))),e.push(this.registerCsiHandler({final:"H"},()=>(C_(this._bufferService),!1))),this._windowsWrappingHeuristics.value=Ke(()=>{for(let t of e)t.dispose()})}}},z2={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};function H2(e,t,i,n){var h;let o={type:0,cancel:!1,key:void 0},l=(e.shiftKey?1:0)|(e.altKey?2:0)|(e.ctrlKey?4:0)|(e.metaKey?8:0);switch(e.keyCode){case 0:e.key==="UIKeyInputUpArrow"?t?o.key=H.ESC+"OA":o.key=H.ESC+"[A":e.key==="UIKeyInputLeftArrow"?t?o.key=H.ESC+"OD":o.key=H.ESC+"[D":e.key==="UIKeyInputRightArrow"?t?o.key=H.ESC+"OC":o.key=H.ESC+"[C":e.key==="UIKeyInputDownArrow"&&(t?o.key=H.ESC+"OB":o.key=H.ESC+"[B");break;case 8:o.key=e.ctrlKey?"\b":H.DEL,e.altKey&&(o.key=H.ESC+o.key);break;case 9:if(e.shiftKey){o.key=H.ESC+"[Z";break}o.key=H.HT,o.cancel=!0;break;case 13:o.key=e.altKey?H.ESC+H.CR:H.CR,o.cancel=!0;break;case 27:o.key=H.ESC,e.altKey&&(o.key=H.ESC+H.ESC),o.cancel=!0;break;case 37:if(e.metaKey)break;l?o.key=H.ESC+"[1;"+(l+1)+"D":t?o.key=H.ESC+"OD":o.key=H.ESC+"[D";break;case 39:if(e.metaKey)break;l?o.key=H.ESC+"[1;"+(l+1)+"C":t?o.key=H.ESC+"OC":o.key=H.ESC+"[C";break;case 38:if(e.metaKey)break;l?o.key=H.ESC+"[1;"+(l+1)+"A":t?o.key=H.ESC+"OA":o.key=H.ESC+"[A";break;case 40:if(e.metaKey)break;l?o.key=H.ESC+"[1;"+(l+1)+"B":t?o.key=H.ESC+"OB":o.key=H.ESC+"[B";break;case 45:!e.shiftKey&&!e.ctrlKey&&(o.key=H.ESC+"[2~");break;case 46:l?o.key=H.ESC+"[3;"+(l+1)+"~":o.key=H.ESC+"[3~";break;case 36:l?o.key=H.ESC+"[1;"+(l+1)+"H":t?o.key=H.ESC+"OH":o.key=H.ESC+"[H";break;case 35:l?o.key=H.ESC+"[1;"+(l+1)+"F":t?o.key=H.ESC+"OF":o.key=H.ESC+"[F";break;case 33:e.shiftKey?o.type=2:e.ctrlKey?o.key=H.ESC+"[5;"+(l+1)+"~":o.key=H.ESC+"[5~";break;case 34:e.shiftKey?o.type=3:e.ctrlKey?o.key=H.ESC+"[6;"+(l+1)+"~":o.key=H.ESC+"[6~";break;case 112:l?o.key=H.ESC+"[1;"+(l+1)+"P":o.key=H.ESC+"OP";break;case 113:l?o.key=H.ESC+"[1;"+(l+1)+"Q":o.key=H.ESC+"OQ";break;case 114:l?o.key=H.ESC+"[1;"+(l+1)+"R":o.key=H.ESC+"OR";break;case 115:l?o.key=H.ESC+"[1;"+(l+1)+"S":o.key=H.ESC+"OS";break;case 116:l?o.key=H.ESC+"[15;"+(l+1)+"~":o.key=H.ESC+"[15~";break;case 117:l?o.key=H.ESC+"[17;"+(l+1)+"~":o.key=H.ESC+"[17~";break;case 118:l?o.key=H.ESC+"[18;"+(l+1)+"~":o.key=H.ESC+"[18~";break;case 119:l?o.key=H.ESC+"[19;"+(l+1)+"~":o.key=H.ESC+"[19~";break;case 120:l?o.key=H.ESC+"[20;"+(l+1)+"~":o.key=H.ESC+"[20~";break;case 121:l?o.key=H.ESC+"[21;"+(l+1)+"~":o.key=H.ESC+"[21~";break;case 122:l?o.key=H.ESC+"[23;"+(l+1)+"~":o.key=H.ESC+"[23~";break;case 123:l?o.key=H.ESC+"[24;"+(l+1)+"~":o.key=H.ESC+"[24~";break;default:if(e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey)e.keyCode>=65&&e.keyCode<=90?o.key=String.fromCharCode(e.keyCode-64):e.keyCode===32?o.key=H.NUL:e.keyCode>=51&&e.keyCode<=55?o.key=String.fromCharCode(e.keyCode-51+27):e.keyCode===56?o.key=H.DEL:e.keyCode===219?o.key=H.ESC:e.keyCode===220?o.key=H.FS:e.keyCode===221&&(o.key=H.GS);else if((!i||n)&&e.altKey&&!e.metaKey){let u=(h=z2[e.keyCode])==null?void 0:h[e.shiftKey?1:0];if(u)o.key=H.ESC+u;else if(e.keyCode>=65&&e.keyCode<=90){let p=e.ctrlKey?e.keyCode-64:e.keyCode+32,d=String.fromCharCode(p);e.shiftKey&&(d=d.toUpperCase()),o.key=H.ESC+d}else if(e.keyCode===32)o.key=H.ESC+(e.ctrlKey?H.NUL:" ");else if(e.key==="Dead"&&e.code.startsWith("Key")){let p=e.code.slice(3,4);e.shiftKey||(p=p.toLowerCase()),o.key=H.ESC+p,o.cancel=!0}}else i&&!e.altKey&&!e.ctrlKey&&!e.shiftKey&&e.metaKey?e.keyCode===65&&(o.type=1):e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.keyCode>=48&&e.key.length===1?o.key=e.key:e.key&&e.ctrlKey&&(e.key==="_"&&(o.key=H.US),e.key==="@"&&(o.key=H.NUL));break}return o}var st=0,$2=class{constructor(e){this._getKey=e,this._array=[],this._insertedValues=[],this._flushInsertedTask=new Ul,this._isFlushingInserted=!1,this._deletedIndices=[],this._flushDeletedTask=new Ul,this._isFlushingDeleted=!1}clear(){this._array.length=0,this._insertedValues.length=0,this._flushInsertedTask.clear(),this._isFlushingInserted=!1,this._deletedIndices.length=0,this._flushDeletedTask.clear(),this._isFlushingDeleted=!1}insert(e){this._flushCleanupDeleted(),this._insertedValues.length===0&&this._flushInsertedTask.enqueue(()=>this._flushInserted()),this._insertedValues.push(e)}_flushInserted(){let e=this._insertedValues.sort((o,l)=>this._getKey(o)-this._getKey(l)),t=0,i=0,n=new Array(this._array.length+this._insertedValues.length);for(let o=0;o<n.length;o++)i>=this._array.length||this._getKey(e[t])<=this._getKey(this._array[i])?(n[o]=e[t],t++):n[o]=this._array[i++];this._array=n,this._insertedValues.length=0}_flushCleanupInserted(){!this._isFlushingInserted&&this._insertedValues.length>0&&this._flushInsertedTask.flush()}delete(e){if(this._flushCleanupInserted(),this._array.length===0)return!1;let t=this._getKey(e);if(t===void 0||(st=this._search(t),st===-1)||this._getKey(this._array[st])!==t)return!1;do if(this._array[st]===e)return this._deletedIndices.length===0&&this._flushDeletedTask.enqueue(()=>this._flushDeleted()),this._deletedIndices.push(st),!0;while(++st<this._array.length&&this._getKey(this._array[st])===t);return!1}_flushDeleted(){this._isFlushingDeleted=!0;let e=this._deletedIndices.sort((o,l)=>o-l),t=0,i=new Array(this._array.length-e.length),n=0;for(let o=0;o<this._array.length;o++)e[t]===o?t++:i[n++]=this._array[o];this._array=i,this._deletedIndices.length=0,this._isFlushingDeleted=!1}_flushCleanupDeleted(){!this._isFlushingDeleted&&this._deletedIndices.length>0&&this._flushDeletedTask.flush()}*getKeyIterator(e){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(st=this._search(e),!(st<0||st>=this._array.length)&&this._getKey(this._array[st])===e))do yield this._array[st];while(++st<this._array.length&&this._getKey(this._array[st])===e)}forEachByKey(e,t){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(st=this._search(e),!(st<0||st>=this._array.length)&&this._getKey(this._array[st])===e))do t(this._array[st]);while(++st<this._array.length&&this._getKey(this._array[st])===e)}values(){return this._flushCleanupInserted(),this._flushCleanupDeleted(),[...this._array].values()}_search(e){let t=0,i=this._array.length-1;for(;i>=t;){let n=t+i>>1,o=this._getKey(this._array[n]);if(o>e)i=n-1;else if(o<e)t=n+1;else{for(;n>0&&this._getKey(this._array[n-1])===e;)n--;return n}}return t}},wu=0,T_=0,W2=class extends Le{constructor(){super(),this._decorations=new $2(e=>e==null?void 0:e.marker.line),this._onDecorationRegistered=this._register(new ee),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this._register(new ee),this.onDecorationRemoved=this._onDecorationRemoved.event,this._register(Ke(()=>this.reset()))}get decorations(){return this._decorations.values()}registerDecoration(e){if(e.marker.isDisposed)return;let t=new U2(e);if(t){let i=t.marker.onDispose(()=>t.dispose()),n=t.onDispose(()=>{n.dispose(),t&&(this._decorations.delete(t)&&this._onDecorationRemoved.fire(t),i.dispose())});this._decorations.insert(t),this._onDecorationRegistered.fire(t)}return t}reset(){for(let e of this._decorations.values())e.dispose();this._decorations.clear()}*getDecorationsAtCell(e,t,i){let n=0,o=0;for(let l of this._decorations.getKeyIterator(t))n=l.options.x??0,o=n+(l.options.width??1),e>=n&&e<o&&(!i||(l.options.layer??"bottom")===i)&&(yield l)}forEachDecorationAtCell(e,t,i,n){this._decorations.forEachByKey(t,o=>{wu=o.options.x??0,T_=wu+(o.options.width??1),e>=wu&&e<T_&&(!i||(o.options.layer??"bottom")===i)&&n(o)})}},U2=class extends Gr{constructor(e){super(),this.options=e,this.onRenderEmitter=this.add(new ee),this.onRender=this.onRenderEmitter.event,this._onDispose=this.add(new ee),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=e.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=Ge.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=Ge.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}},K2=1e3,V2=class{constructor(e,t=K2){this._renderCallback=e,this._debounceThresholdMS=t,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(e,t,i){this._rowCount=i,e=e!==void 0?e:0,t=t!==void 0?t:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,e):e,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,t):t;let n=performance.now();if(n-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=n,this._innerRefresh();else if(!this._additionalRefreshRequested){let o=n-this._lastRefreshMs,l=this._debounceThresholdMS-o;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=performance.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},l)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t)}},O_=20,Kl=class extends Le{constructor(e,t,i,n){super(),this._terminal=e,this._coreBrowserService=i,this._renderService=n,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="";let o=this._coreBrowserService.mainDocument;this._accessibilityContainer=o.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=o.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let l=0;l<this._terminal.rows;l++)this._rowElements[l]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[l]);if(this._topBoundaryFocusListener=l=>this._handleBoundaryFocus(l,0),this._bottomBoundaryFocusListener=l=>this._handleBoundaryFocus(l,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=o.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this._register(new V2(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this._register(this._terminal.onResize(l=>this._handleResize(l.rows))),this._register(this._terminal.onRender(l=>this._refreshRows(l.start,l.end))),this._register(this._terminal.onScroll(()=>this._refreshRows())),this._register(this._terminal.onA11yChar(l=>this._handleChar(l))),this._register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this._register(this._terminal.onA11yTab(l=>this._handleTab(l))),this._register(this._terminal.onKey(l=>this._handleKey(l.key))),this._register(this._terminal.onBlur(()=>this._clearLiveRegion())),this._register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._register(be(o,"selectionchange",()=>this._handleSelectionChange())),this._register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRowsDimensions(),this._refreshRows(),this._register(Ke(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(e){for(let t=0;t<e;t++)this._handleChar(" ")}_handleChar(e){this._liveRegionLineCount<O_+1&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,e===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===O_+1&&(this._liveRegion.textContent+=Wu.get())))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(e){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(e)||this._charsToConsume.push(e)}_refreshRows(e,t){this._liveRegionDebouncer.refresh(e,t,this._terminal.rows)}_renderRows(e,t){let i=this._terminal.buffer,n=i.lines.length.toString();for(let o=e;o<=t;o++){let l=i.lines.get(i.ydisp+o),h=[],u=(l==null?void 0:l.translateToString(!0,void 0,void 0,h))||"",p=(i.ydisp+o+1).toString(),d=this._rowElements[o];d&&(u.length===0?(d.textContent="",this._rowColumns.set(d,[0,1])):(d.textContent=u,this._rowColumns.set(d,h)),d.setAttribute("aria-posinset",p),d.setAttribute("aria-setsize",n),this._alignRowWidth(d))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(e,t){let i=e.target,n=this._rowElements[t===0?1:this._rowElements.length-2],o=i.getAttribute("aria-posinset"),l=t===0?"1":`${this._terminal.buffer.lines.length}`;if(o===l||e.relatedTarget!==n)return;let h,u;if(t===0?(h=i,u=this._rowElements.pop(),this._rowContainer.removeChild(u)):(h=this._rowElements.shift(),u=i,this._rowContainer.removeChild(h)),h.removeEventListener("focus",this._topBoundaryFocusListener),u.removeEventListener("focus",this._bottomBoundaryFocusListener),t===0){let p=this._createAccessibilityTreeNode();this._rowElements.unshift(p),this._rowContainer.insertAdjacentElement("afterbegin",p)}else{let p=this._createAccessibilityTreeNode();this._rowElements.push(p),this._rowContainer.appendChild(p)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(t===0?-1:1),this._rowElements[t===0?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}_handleSelectionChange(){var u;if(this._rowElements.length===0)return;let e=this._coreBrowserService.mainDocument.getSelection();if(!e)return;if(e.isCollapsed){this._rowContainer.contains(e.anchorNode)&&this._terminal.clearSelection();return}if(!e.anchorNode||!e.focusNode){console.error("anchorNode and/or focusNode are null");return}let t={node:e.anchorNode,offset:e.anchorOffset},i={node:e.focusNode,offset:e.focusOffset};if((t.node.compareDocumentPosition(i.node)&Node.DOCUMENT_POSITION_PRECEDING||t.node===i.node&&t.offset>i.offset)&&([t,i]=[i,t]),t.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(t={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(t.node))return;let n=this._rowElements.slice(-1)[0];if(i.node.compareDocumentPosition(n)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(i={node:n,offset:((u=n.textContent)==null?void 0:u.length)??0}),!this._rowContainer.contains(i.node))return;let o=({node:p,offset:d})=>{let _=p instanceof Text?p.parentNode:p,g=parseInt(_==null?void 0:_.getAttribute("aria-posinset"),10)-1;if(isNaN(g))return console.warn("row is invalid. Race condition?"),null;let y=this._rowColumns.get(_);if(!y)return console.warn("columns is null. Race condition?"),null;let w=d<y.length?y[d]:y.slice(-1)[0]+1;return w>=this._terminal.cols&&(++g,w=0),{row:g,column:w}},l=o(t),h=o(i);if(!(!l||!h)){if(l.row>h.row||l.row===h.row&&l.column>=h.column)throw new Error("invalid range");this._terminal.select(l.column,l.row,(h.row-l.row)*this._terminal.cols-l.column+h.column)}}_handleResize(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let t=this._rowContainer.children.length;t<this._terminal.rows;t++)this._rowElements[t]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[t]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let e=this._coreBrowserService.mainDocument.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){Object.assign(this._accessibilityContainer.style,{width:`${this._renderService.dimensions.css.canvas.width}px`,fontSize:`${this._terminal.options.fontSize}px`}),this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e]),this._alignRowWidth(this._rowElements[e])}}_refreshRowDimensions(e){e.style.height=`${this._renderService.dimensions.css.cell.height}px`}_alignRowWidth(e){var o,l;e.style.transform="";let t=e.getBoundingClientRect().width,i=(l=(o=this._rowColumns.get(e))==null?void 0:o.slice(-1))==null?void 0:l[0];if(!i)return;let n=i*this._renderService.dimensions.css.cell.width;e.style.transform=`scaleX(${n/t})`}};Kl=tt([oe(1,Wd),oe(2,dr),oe(3,fr)],Kl);var bd=class extends Le{constructor(e,t,i,n,o){super(),this._element=e,this._mouseService=t,this._renderService=i,this._bufferService=n,this._linkProviderService=o,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this._register(new ee),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this._register(new ee),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this._register(Ke(()=>{var l;Ls(this._linkCacheDisposables),this._linkCacheDisposables.length=0,this._lastMouseEvent=void 0,(l=this._activeProviderReplies)==null||l.clear()})),this._register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this._register(be(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this._register(be(this._element,"mousemove",this._handleMouseMove.bind(this))),this._register(be(this._element,"mousedown",this._handleMouseDown.bind(this))),this._register(be(this._element,"mouseup",this._handleMouseUp.bind(this)))}get currentLink(){return this._currentLink}_handleMouseMove(e){this._lastMouseEvent=e;let t=this._positionFromMouseEvent(e,this._element,this._mouseService);if(!t)return;this._isMouseOut=!1;let i=e.composedPath();for(let n=0;n<i.length;n++){let o=i[n];if(o.classList.contains("xterm"))break;if(o.classList.contains("xterm-hover"))return}(!this._lastBufferCell||t.x!==this._lastBufferCell.x||t.y!==this._lastBufferCell.y)&&(this._handleHover(t),this._lastBufferCell=t)}_handleHover(e){if(this._activeLine!==e.y||this._wasResized){this._clearCurrentLink(),this._askForLink(e,!1),this._wasResized=!1;return}this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))}_askForLink(e,t){var n,o;(!this._activeProviderReplies||!t)&&((n=this._activeProviderReplies)==null||n.forEach(l=>{l==null||l.forEach(h=>{h.link.dispose&&h.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);let i=!1;for(let[l,h]of this._linkProviderService.linkProviders.entries())t?(o=this._activeProviderReplies)!=null&&o.get(l)&&(i=this._checkLinkProviderResult(l,e,i)):h.provideLinks(e.y,u=>{var d,_;if(this._isMouseOut)return;let p=u==null?void 0:u.map(g=>({link:g}));(d=this._activeProviderReplies)==null||d.set(l,p),i=this._checkLinkProviderResult(l,e,i),((_=this._activeProviderReplies)==null?void 0:_.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(e.y,this._activeProviderReplies)})}_removeIntersectingLinks(e,t){let i=new Set;for(let n=0;n<t.size;n++){let o=t.get(n);if(o)for(let l=0;l<o.length;l++){let h=o[l],u=h.link.range.start.y<e?0:h.link.range.start.x,p=h.link.range.end.y>e?this._bufferService.cols:h.link.range.end.x;for(let d=u;d<=p;d++){if(i.has(d)){o.splice(l--,1);break}i.add(d)}}}}_checkLinkProviderResult(e,t,i){var l;if(!this._activeProviderReplies)return i;let n=this._activeProviderReplies.get(e),o=!1;for(let h=0;h<e;h++)(!this._activeProviderReplies.has(h)||this._activeProviderReplies.get(h))&&(o=!0);if(!o&&n){let h=n.find(u=>this._linkAtPosition(u.link,t));h&&(i=!0,this._handleNewLink(h))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!i)for(let h=0;h<this._activeProviderReplies.size;h++){let u=(l=this._activeProviderReplies.get(h))==null?void 0:l.find(p=>this._linkAtPosition(p.link,t));if(u){i=!0,this._handleNewLink(u);break}}return i}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(e){if(!this._currentLink)return;let t=this._positionFromMouseEvent(e,this._element,this._mouseService);t&&this._mouseDownLink&&q2(this._mouseDownLink.link,this._currentLink.link)&&this._linkAtPosition(this._currentLink.link,t)&&this._currentLink.link.activate(e,this._currentLink.link.text)}_clearCurrentLink(e,t){!this._currentLink||!this._lastMouseEvent||(!e||!t||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=t)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,Ls(this._linkCacheDisposables),this._linkCacheDisposables.length=0)}_handleNewLink(e){if(!this._lastMouseEvent)return;let t=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);t&&this._linkAtPosition(e.link,t)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0?!0:e.link.decorations.underline,pointerCursor:e.link.decorations===void 0?!0:e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:()=>{var i,n;return(n=(i=this._currentLink)==null?void 0:i.state)==null?void 0:n.decorations.pointerCursor},set:i=>{var n;(n=this._currentLink)!=null&&n.state&&this._currentLink.state.decorations.pointerCursor!==i&&(this._currentLink.state.decorations.pointerCursor=i,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",i))}},underline:{get:()=>{var i,n;return(n=(i=this._currentLink)==null?void 0:i.state)==null?void 0:n.decorations.underline},set:i=>{var n,o,l;(n=this._currentLink)!=null&&n.state&&((l=(o=this._currentLink)==null?void 0:o.state)==null?void 0:l.decorations.underline)!==i&&(this._currentLink.state.decorations.underline=i,this._currentLink.state.isHovered&&this._fireUnderlineEvent(e.link,i))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(i=>{if(!this._currentLink)return;let n=i.start===0?0:i.start+1+this._bufferService.buffer.ydisp,o=this._bufferService.buffer.ydisp+1+i.end;if(this._currentLink.link.range.start.y>=n&&this._currentLink.link.range.end.y<=o&&(this._clearCurrentLink(n,o),this._lastMouseEvent)){let l=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);l&&this._askForLink(l,!1)}})))}_linkHover(e,t,i){var n;(n=this._currentLink)!=null&&n.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),t.hover&&t.hover(i,t.text)}_fireUnderlineEvent(e,t){let i=e.range,n=this._bufferService.buffer.ydisp,o=this._createLinkUnderlineEvent(i.start.x-1,i.start.y-n-1,i.end.x,i.end.y-n-1,void 0);(t?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(o)}_linkLeave(e,t,i){var n;(n=this._currentLink)!=null&&n.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),t.leave&&t.leave(i,t.text)}_linkAtPosition(e,t){let i=e.range.start.y*this._bufferService.cols+e.range.start.x,n=e.range.end.y*this._bufferService.cols+e.range.end.x,o=t.y*this._bufferService.cols+t.x;return i<=o&&o<=n}_positionFromMouseEvent(e,t,i){let n=i.getCoords(e,t,this._bufferService.cols,this._bufferService.rows);if(n)return{x:n[0],y:n[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(e,t,i,n,o){return{x1:e,y1:t,x2:i,y2:n,cols:this._bufferService.cols,fg:o}}};bd=tt([oe(1,Ud),oe(2,fr),oe(3,$t),oe(4,s0)],bd);function q2(e,t){return e.text===t.text&&e.range.start.x===t.range.start.x&&e.range.start.y===t.range.start.y&&e.range.end.x===t.range.end.x&&e.range.end.y===t.range.end.y}var Y2=class extends F2{constructor(e={}){super(e),this._linkifier=this._register(new kn),this.browser=C0,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this._register(new kn),this._onCursorMove=this._register(new ee),this.onCursorMove=this._onCursorMove.event,this._onKey=this._register(new ee),this.onKey=this._onKey.event,this._onRender=this._register(new ee),this.onRender=this._onRender.event,this._onSelectionChange=this._register(new ee),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this._register(new ee),this.onTitleChange=this._onTitleChange.event,this._onBell=this._register(new ee),this.onBell=this._onBell.event,this._onFocus=this._register(new ee),this._onBlur=this._register(new ee),this._onA11yCharEmitter=this._register(new ee),this._onA11yTabEmitter=this._register(new ee),this._onWillOpen=this._register(new ee),this._setup(),this._decorationService=this._instantiationService.createInstance(W2),this._instantiationService.setService(ea,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(Ak),this._instantiationService.setService(s0,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(Ku)),this._register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this._register(this._inputHandler.onRequestRefreshRows(t=>this.refresh((t==null?void 0:t.start)??0,(t==null?void 0:t.end)??this.rows-1))),this._register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this._register(this._inputHandler.onRequestReset(()=>this.reset())),this._register(this._inputHandler.onRequestWindowsOptionsReport(t=>this._reportWindowsOptions(t))),this._register(this._inputHandler.onColor(t=>this._handleColorEvent(t))),this._register(Rt.forward(this._inputHandler.onCursorMove,this._onCursorMove)),this._register(Rt.forward(this._inputHandler.onTitleChange,this._onTitleChange)),this._register(Rt.forward(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this._register(Rt.forward(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this._register(this._bufferService.onResize(t=>this._afterResize(t.cols,t.rows))),this._register(Ke(()=>{var t,i;this._customKeyEventHandler=void 0,(i=(t=this.element)==null?void 0:t.parentNode)==null||i.removeChild(this.element)}))}get linkifier(){return this._linkifier.value}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(e){if(this._themeService)for(let t of e){let i,n="";switch(t.index){case 256:i="foreground",n="10";break;case 257:i="background",n="11";break;case 258:i="cursor",n="12";break;default:i="ansi",n="4;"+t.index}switch(t.type){case 0:let o=$e.toColorRGB(i==="ansi"?this._themeService.colors.ansi[t.index]:this._themeService.colors[i]);this.coreService.triggerDataEvent(`${H.ESC}]${n};${T2(o)}${w0.ST}`);break;case 1:if(i==="ansi")this._themeService.modifyColors(l=>l.ansi[t.index]=at.toColor(...t.color));else{let l=i;this._themeService.modifyColors(h=>h[l]=at.toColor(...t.color))}break;case 2:this._themeService.restoreColor(t.index);break}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(e){e?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(Kl,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(e){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(H.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var e;return(e=this.textarea)==null?void 0:e.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(H.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let e=this.buffer.ybase+this.buffer.y,t=this.buffer.lines.get(e);if(!t)return;let i=Math.min(this.buffer.x,this.cols-1),n=this._renderService.dimensions.css.cell.height,o=t.getWidth(i),l=this._renderService.dimensions.css.cell.width*o,h=this.buffer.y*this._renderService.dimensions.css.cell.height,u=i*this._renderService.dimensions.css.cell.width;this.textarea.style.left=u+"px",this.textarea.style.top=h+"px",this.textarea.style.width=l+"px",this.textarea.style.height=n+"px",this.textarea.style.lineHeight=n+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this._register(be(this.element,"copy",t=>{this.hasSelection()&&JC(t,this._selectionService)}));let e=t=>ZC(t,this.textarea,this.coreService,this.optionsService);this._register(be(this.textarea,"paste",e)),this._register(be(this.element,"paste",e)),b0?this._register(be(this.element,"mousedown",t=>{t.button===2&&Ug(t,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this._register(be(this.element,"contextmenu",t=>{Ug(t,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),Jd&&this._register(be(this.element,"auxclick",t=>{t.button===1&&Qv(t,this.textarea,this.screenElement)}))}_bindKeys(){this._register(be(this.textarea,"keyup",e=>this._keyUp(e),!0)),this._register(be(this.textarea,"keydown",e=>this._keyDown(e),!0)),this._register(be(this.textarea,"keypress",e=>this._keyPress(e),!0)),this._register(be(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this._register(be(this.textarea,"compositionupdate",e=>this._compositionHelper.compositionupdate(e))),this._register(be(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this._register(be(this.textarea,"input",e=>this._inputEvent(e),!0)),this._register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(e){var o;if(!e)throw new Error("Terminal requires a parent element.");if(e.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((o=this.element)==null?void 0:o.ownerDocument.defaultView)&&this._coreBrowserService){this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView);return}this._document=e.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),e.appendChild(this.element);let t=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),t.appendChild(this._viewportElement),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._register(be(this.screenElement,"mousemove",l=>this.updateCursorStyle(l))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),t.appendChild(this.screenElement);let i=this.textarea=this._document.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",$u.get()),R0||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._register(this.optionsService.onSpecificOptionChange("disableStdin",()=>i.readOnly=this.optionsService.rawOptions.disableStdin)),this.textarea.readOnly=this.optionsService.rawOptions.disableStdin,this._coreBrowserService=this._register(this._instantiationService.createInstance(Bk,this.textarea,e.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(dr,this._coreBrowserService),this._register(be(this.textarea,"focus",l=>this._handleTextAreaFocus(l))),this._register(be(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(dd,this._document,this._helperContainer),this._instantiationService.setService(Xl,this._charSizeService),this._themeService=this._instantiationService.createInstance(gd),this._instantiationService.setService(Dn,this._themeService),this._characterJoinerService=this._instantiationService.createInstance($l),this._instantiationService.setService(r0,this._characterJoinerService),this._renderService=this._register(this._instantiationService.createInstance(pd,this.rows,this.screenElement)),this._instantiationService.setService(fr,this._renderService),this._register(this._renderService.onRenderedViewportChange(l=>this._onRender.fire(l))),this.onResize(l=>this._renderService.resize(l.cols,l.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(hd,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(fd),this._instantiationService.setService(Ud,this._mouseService);let n=this._linkifier.value=this._register(this._instantiationService.createInstance(bd,this.screenElement));this.element.appendChild(t);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this._register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this._register(this.onBlur(()=>this._renderService.handleBlur())),this._register(this.onFocus(()=>this._renderService.handleFocus())),this._viewport=this._register(this._instantiationService.createInstance(ad,this.element,this.screenElement)),this._register(this._viewport.onRequestScrollLines(l=>{super.scrollLines(l,!1),this.refresh(0,this.rows-1)})),this._selectionService=this._register(this._instantiationService.createInstance(md,this.element,this.screenElement,n)),this._instantiationService.setService(ab,this._selectionService),this._register(this._selectionService.onRequestScrollLines(l=>this.scrollLines(l.amount,l.suppressScrollEvent))),this._register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this._register(this._selectionService.onRequestRedraw(l=>this._renderService.handleSelectionChanged(l.start,l.end,l.columnSelectMode))),this._register(this._selectionService.onLinuxMouseSelection(l=>{this.textarea.value=l,this.textarea.focus(),this.textarea.select()})),this._register(Rt.any(this._onScroll.event,this._inputHandler.onScroll)(()=>{var l;this._selectionService.refresh(),(l=this._viewport)==null||l.queueSync()})),this._register(this._instantiationService.createInstance(ld,this.screenElement)),this._register(be(this.element,"mousedown",l=>this._selectionService.handleMouseDown(l))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(Kl,this)),this._register(this.optionsService.onSpecificOptionChange("screenReaderMode",l=>this._handleScreenReaderModeOptionChange(l))),this.options.overviewRuler.width&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(Hl,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRuler",l=>{!this._overviewRulerRenderer&&l&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(Hl,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(ud,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let e=this,t=this.element;function i(l){var d,_,g,y,w;let h=e._mouseService.getMouseReportCoords(l,e.screenElement);if(!h)return!1;let u,p;switch(l.overrideType||l.type){case"mousemove":p=32,l.buttons===void 0?(u=3,l.button!==void 0&&(u=l.button<3?l.button:3)):u=l.buttons&1?0:l.buttons&4?1:l.buttons&2?2:3;break;case"mouseup":p=0,u=l.button<3?l.button:3;break;case"mousedown":p=1,u=l.button<3?l.button:3;break;case"wheel":if(e._customWheelEventHandler&&e._customWheelEventHandler(l)===!1)return!1;let x=l.deltaY;if(x===0||e.coreMouseService.consumeWheelEvent(l,(y=(g=(_=(d=e._renderService)==null?void 0:d.dimensions)==null?void 0:_.device)==null?void 0:g.cell)==null?void 0:y.height,(w=e._coreBrowserService)==null?void 0:w.dpr)===0)return!1;p=x<0?0:1,u=4;break;default:return!1}return p===void 0||u===void 0||u>4?!1:e.coreMouseService.triggerMouseEvent({col:h.col,row:h.row,x:h.x,y:h.y,button:u,action:p,ctrl:l.ctrlKey,alt:l.altKey,shift:l.shiftKey})}let n={mouseup:null,wheel:null,mousedrag:null,mousemove:null},o={mouseup:l=>(i(l),l.buttons||(this._document.removeEventListener("mouseup",n.mouseup),n.mousedrag&&this._document.removeEventListener("mousemove",n.mousedrag)),this.cancel(l)),wheel:l=>(i(l),this.cancel(l,!0)),mousedrag:l=>{l.buttons&&i(l)},mousemove:l=>{l.buttons||i(l)}};this._register(this.coreMouseService.onProtocolChange(l=>{l?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(l)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),l&8?n.mousemove||(t.addEventListener("mousemove",o.mousemove),n.mousemove=o.mousemove):(t.removeEventListener("mousemove",n.mousemove),n.mousemove=null),l&16?n.wheel||(t.addEventListener("wheel",o.wheel,{passive:!1}),n.wheel=o.wheel):(t.removeEventListener("wheel",n.wheel),n.wheel=null),l&2?n.mouseup||(n.mouseup=o.mouseup):(this._document.removeEventListener("mouseup",n.mouseup),n.mouseup=null),l&4?n.mousedrag||(n.mousedrag=o.mousedrag):(this._document.removeEventListener("mousemove",n.mousedrag),n.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this._register(be(t,"mousedown",l=>{if(l.preventDefault(),this.focus(),!(!this.coreMouseService.areMouseEventsActive||this._selectionService.shouldForceSelection(l)))return i(l),n.mouseup&&this._document.addEventListener("mouseup",n.mouseup),n.mousedrag&&this._document.addEventListener("mousemove",n.mousedrag),this.cancel(l)})),this._register(be(t,"wheel",l=>{var h,u,p,d,_;if(!n.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(l)===!1)return!1;if(!this.buffer.hasScrollback){if(l.deltaY===0)return!1;if(e.coreMouseService.consumeWheelEvent(l,(d=(p=(u=(h=e._renderService)==null?void 0:h.dimensions)==null?void 0:u.device)==null?void 0:p.cell)==null?void 0:d.height,(_=e._coreBrowserService)==null?void 0:_.dpr)===0)return this.cancel(l,!0);let g=H.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(l.deltaY<0?"A":"B");return this.coreService.triggerDataEvent(g,!0),this.cancel(l,!0)}}},{passive:!1}))}refresh(e,t){var i;(i=this._renderService)==null||i.refreshRows(e,t)}updateCursorStyle(e){var t;(t=this._selectionService)!=null&&t.shouldColumnSelect(e)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(e,t){this._viewport?this._viewport.scrollLines(e):super.scrollLines(e,t),this.refresh(0,this.rows-1)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(e){e&&this._viewport?this._viewport.scrollToLine(this.buffer.ybase,!0):this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){let t=e-this._bufferService.buffer.ydisp;t!==0&&this.scrollLines(t)}paste(e){Yv(e,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(e){this._customKeyEventHandler=e}attachCustomWheelEventHandler(e){this._customWheelEventHandler=e}registerLinkProvider(e){return this._linkProviderService.registerLinkProvider(e)}registerCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let t=this._characterJoinerService.register(e);return this.refresh(0,this.rows-1),t}deregisterCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(e)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(e){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)}registerDecoration(e){return this._decorationService.registerDecoration(e)}hasSelection(){return this._selectionService?this._selectionService.hasSelection:!1}select(e,t,i){this._selectionService.setSelection(e,t,i)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(!(!this._selectionService||!this._selectionService.hasSelection))return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var e;(e=this._selectionService)==null||e.clearSelection()}selectAll(){var e;(e=this._selectionService)==null||e.selectAll()}selectLines(e,t){var i;(i=this._selectionService)==null||i.selectLines(e,t)}_keyDown(e){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)return!1;let t=this.browser.isMac&&this.options.macOptionIsMeta&&e.altKey;if(!t&&!this._compositionHelper.keydown(e))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(!0),!1;!t&&(e.key==="Dead"||e.key==="AltGraph")&&(this._unprocessedDeadKey=!0);let i=H2(e,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),i.type===3||i.type===2){let n=this.rows-1;return this.scrollLines(i.type===2?-n:n),this.cancel(e,!0)}if(i.type===1&&this.selectAll(),this._isThirdLevelShift(this.browser,e)||(i.cancel&&this.cancel(e,!0),!i.key)||e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.key.length===1&&e.key.charCodeAt(0)>=65&&e.key.charCodeAt(0)<=90)return!0;if(this._unprocessedDeadKey)return this._unprocessedDeadKey=!1,!0;if((i.key===H.ETX||i.key===H.CR)&&(this.textarea.value=""),this._onKey.fire({key:i.key,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(i.key,!0),!this.optionsService.rawOptions.screenReaderMode||e.altKey||e.ctrlKey)return this.cancel(e,!0);this._keyDownHandled=!0}_isThirdLevelShift(e,t){let i=e.isMac&&!this.options.macOptionIsMeta&&t.altKey&&!t.ctrlKey&&!t.metaKey||e.isWindows&&t.altKey&&t.ctrlKey&&!t.metaKey||e.isWindows&&t.getModifierState("AltGraph");return t.type==="keypress"?i:i&&(!t.keyCode||t.keyCode>47)}_keyUp(e){this._keyDownSeen=!1,!(this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)&&(Q2(e)||this.focus(),this.updateCursorStyle(e),this._keyPressHandled=!1)}_keyPress(e){let t;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)return!1;if(this.cancel(e),e.charCode)t=e.charCode;else if(e.which===null||e.which===void 0)t=e.keyCode;else if(e.which!==0&&e.charCode!==0)t=e.which;else return!1;return!t||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e)?!1:(t=String.fromCharCode(t),this._onKey.fire({key:t,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(t,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,!0)}_inputEvent(e){if(e.data&&e.inputType==="insertText"&&(!e.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let t=e.data;return this.coreService.triggerDataEvent(t,!0),this.cancel(e),!0}return!1}resize(e,t){if(e===this.cols&&t===this.rows){this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure();return}super.resize(e,t)}_afterResize(e,t){var i;(i=this._charSizeService)==null||i.measure()}clear(){if(!(this.buffer.ybase===0&&this.buffer.y===0)){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let e=1;e<this.rows;e++)this.buffer.lines.push(this.buffer.getBlankLine(ot));this._onScroll.fire({position:this.buffer.ydisp}),this.refresh(0,this.rows-1)}}reset(){var t;this.options.rows=this.rows,this.options.cols=this.cols;let e=this._customKeyEventHandler;this._setup(),super.reset(),(t=this._selectionService)==null||t.reset(),this._decorationService.reset(),this._customKeyEventHandler=e,this.refresh(0,this.rows-1)}clearTextureAtlas(){var e;(e=this._renderService)==null||e.clearTextureAtlas()}_reportFocus(){var e;(e=this.element)!=null&&e.classList.contains("focus")?this.coreService.triggerDataEvent(H.ESC+"[I"):this.coreService.triggerDataEvent(H.ESC+"[O")}_reportWindowsOptions(e){if(this._renderService)switch(e){case 0:let t=this._renderService.dimensions.css.canvas.width.toFixed(0),i=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${H.ESC}[4;${i};${t}t`);break;case 1:let n=this._renderService.dimensions.css.cell.width.toFixed(0),o=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${H.ESC}[6;${o};${n}t`);break}}cancel(e,t){if(!(!this.options.cancelEvents&&!t))return e.preventDefault(),e.stopPropagation(),!1}};function Q2(e){return e.keyCode===16||e.keyCode===17||e.keyCode===18}var G2=class{constructor(){this._addons=[]}dispose(){for(let e=this._addons.length-1;e>=0;e--)this._addons[e].instance.dispose()}loadAddon(e,t){let i={instance:t,dispose:t.dispose,isDisposed:!1};this._addons.push(i),t.dispose=()=>this._wrappedAddonDispose(i),t.activate(e)}_wrappedAddonDispose(e){if(e.isDisposed)return;let t=-1;for(let i=0;i<this._addons.length;i++)if(this._addons[i]===e){t=i;break}if(t===-1)throw new Error("Could not dispose an addon that has not been loaded");e.isDisposed=!0,e.dispose.apply(e.instance),this._addons.splice(t,1)}},X2=class{constructor(e){this._line=e}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(e,t){if(!(e<0||e>=this._line.length))return t?(this._line.loadCell(e,t),t):this._line.loadCell(e,new _i)}translateToString(e,t,i){return this._line.translateToString(e,t,i)}},B_=class{constructor(e,t){this._buffer=e,this.type=t}init(e){return this._buffer=e,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(e){let t=this._buffer.lines.get(e);if(t)return new X2(t)}getNullCell(){return new _i}},J2=class extends Le{constructor(e){super(),this._core=e,this._onBufferChange=this._register(new ee),this.onBufferChange=this._onBufferChange.event,this._normal=new B_(this._core.buffers.normal,"normal"),this._alternate=new B_(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}},Z2=class{constructor(e){this._core=e}registerCsiHandler(e,t){return this._core.registerCsiHandler(e,i=>t(i.toArray()))}addCsiHandler(e,t){return this.registerCsiHandler(e,t)}registerDcsHandler(e,t){return this._core.registerDcsHandler(e,(i,n)=>t(i,n.toArray()))}addDcsHandler(e,t){return this.registerDcsHandler(e,t)}registerEscHandler(e,t){return this._core.registerEscHandler(e,t)}addEscHandler(e,t){return this.registerEscHandler(e,t)}registerOscHandler(e,t){return this._core.registerOscHandler(e,t)}addOscHandler(e,t){return this.registerOscHandler(e,t)}},eE=class{constructor(e){this._core=e}register(e){this._core.unicodeService.register(e)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(e){this._core.unicodeService.activeVersion=e}},tE=["cols","rows"],Ii=0,iE=class extends Le{constructor(e){super(),this._core=this._register(new Y2(e)),this._addonManager=this._register(new G2),this._publicOptions={...this._core.options};let t=n=>this._core.options[n],i=(n,o)=>{this._checkReadonlyOptions(n),this._core.options[n]=o};for(let n in this._core.options){let o={get:t.bind(this,n),set:i.bind(this,n)};Object.defineProperty(this._publicOptions,n,o)}}_checkReadonlyOptions(e){if(tE.includes(e))throw new Error(`Option "${e}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new Z2(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new eE(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this._register(new J2(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let e=this._core.coreService.decPrivateModes,t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any";break}return{applicationCursorKeysMode:e.applicationCursorKeys,applicationKeypadMode:e.applicationKeypad,bracketedPasteMode:e.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:e.origin,reverseWraparoundMode:e.reverseWraparound,sendFocusMode:e.sendFocus,synchronizedOutputMode:e.synchronizedOutput,wraparoundMode:e.wraparound}}get options(){return this._publicOptions}set options(e){for(let t in e)this._publicOptions[t]=e[t]}blur(){this._core.blur()}focus(){this._core.focus()}input(e,t=!0){this._core.input(e,t)}resize(e,t){this._verifyIntegers(e,t),this._core.resize(e,t)}open(e){this._core.open(e)}attachCustomKeyEventHandler(e){this._core.attachCustomKeyEventHandler(e)}attachCustomWheelEventHandler(e){this._core.attachCustomWheelEventHandler(e)}registerLinkProvider(e){return this._core.registerLinkProvider(e)}registerCharacterJoiner(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)}deregisterCharacterJoiner(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)}registerMarker(e=0){return this._verifyIntegers(e),this._core.registerMarker(e)}registerDecoration(e){return this._checkProposedApi(),this._verifyPositiveIntegers(e.x??0,e.width??0,e.height??0),this._core.registerDecoration(e)}hasSelection(){return this._core.hasSelection()}select(e,t,i){this._verifyIntegers(e,t,i),this._core.select(e,t,i)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(e,t){this._verifyIntegers(e,t),this._core.selectLines(e,t)}dispose(){super.dispose()}scrollLines(e){this._verifyIntegers(e),this._core.scrollLines(e)}scrollPages(e){this._verifyIntegers(e),this._core.scrollPages(e)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(e){this._verifyIntegers(e),this._core.scrollToLine(e)}clear(){this._core.clear()}write(e,t){this._core.write(e,t)}writeln(e,t){this._core.write(e),this._core.write(`\r
`,t)}paste(e){this._core.paste(e)}refresh(e,t){this._verifyIntegers(e,t),this._core.refresh(e,t)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(e){this._addonManager.loadAddon(this,e)}static get strings(){return{get promptLabel(){return $u.get()},set promptLabel(e){$u.set(e)},get tooMuchOutput(){return Wu.get()},set tooMuchOutput(e){Wu.set(e)}}}_verifyIntegers(...e){for(Ii of e)if(Ii===1/0||isNaN(Ii)||Ii%1!==0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...e){for(Ii of e)if(Ii&&(Ii===1/0||isNaN(Ii)||Ii%1!==0||Ii<0))throw new Error("This API only accepts positive integers")}};/**
 * Copyright (c) 2014-2024 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * @license MIT
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 */var rE=2,sE=1,nE=class{activate(e){this._terminal=e}dispose(){}fit(){let e=this.proposeDimensions();if(!e||!this._terminal||isNaN(e.cols)||isNaN(e.rows))return;let t=this._terminal._core;(this._terminal.rows!==e.rows||this._terminal.cols!==e.cols)&&(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}proposeDimensions(){var g;if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let e=this._terminal._core._renderService.dimensions;if(e.css.cell.width===0||e.css.cell.height===0)return;let t=this._terminal.options.scrollback===0?0:((g=this._terminal.options.overviewRuler)==null?void 0:g.width)||14,i=window.getComputedStyle(this._terminal.element.parentElement),n=parseInt(i.getPropertyValue("height")),o=Math.max(0,parseInt(i.getPropertyValue("width"))),l=window.getComputedStyle(this._terminal.element),h={top:parseInt(l.getPropertyValue("padding-top")),bottom:parseInt(l.getPropertyValue("padding-bottom")),right:parseInt(l.getPropertyValue("padding-right")),left:parseInt(l.getPropertyValue("padding-left"))},u=h.top+h.bottom,p=h.right+h.left,d=n-u,_=o-p-t;return{cols:Math.max(rE,Math.floor(_/e.css.cell.width)),rows:Math.max(sE,Math.floor(d/e.css.cell.height))}}};/**
 * Copyright (c) 2014-2024 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * @license MIT
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 */var oE=class{constructor(e,t,i,n={}){this._terminal=e,this._regex=t,this._handler=i,this._options=n}provideLinks(e,t){let i=lE.computeLink(e,this._regex,this._terminal,this._handler);t(this._addCallbacks(i))}_addCallbacks(e){return e.map(t=>(t.leave=this._options.leave,t.hover=(i,n)=>{if(this._options.hover){let{range:o}=t;this._options.hover(i,n,o)}},t))}};function aE(e){try{let t=new URL(e),i=t.password&&t.username?`${t.protocol}//${t.username}:${t.password}@${t.host}`:t.username?`${t.protocol}//${t.username}@${t.host}`:`${t.protocol}//${t.host}`;return e.toLocaleLowerCase().startsWith(i.toLocaleLowerCase())}catch{return!1}}var lE=class Ml{static computeLink(t,i,n,o){let l=new RegExp(i.source,(i.flags||"")+"g"),[h,u]=Ml._getWindowedLineStrings(t-1,n),p=h.join(""),d,_=[];for(;d=l.exec(p);){let g=d[0];if(!aE(g))continue;let[y,w]=Ml._mapStrIdx(n,u,0,d.index),[x,C]=Ml._mapStrIdx(n,y,w,g.length);if(y===-1||w===-1||x===-1||C===-1)continue;let k={start:{x:w+1,y:y+1},end:{x:C,y:x+1}};_.push({range:k,text:g,activate:o})}return _}static _getWindowedLineStrings(t,i){let n,o=t,l=t,h=0,u="",p=[];if(n=i.buffer.active.getLine(t)){let d=n.translateToString(!0);if(n.isWrapped&&d[0]!==" "){for(h=0;(n=i.buffer.active.getLine(--o))&&h<2048&&(u=n.translateToString(!0),h+=u.length,p.push(u),!(!n.isWrapped||u.indexOf(" ")!==-1)););p.reverse()}for(p.push(d),h=0;(n=i.buffer.active.getLine(++l))&&n.isWrapped&&h<2048&&(u=n.translateToString(!0),h+=u.length,p.push(u),u.indexOf(" ")===-1););}return[p,o]}static _mapStrIdx(t,i,n,o){let l=t.buffer.active,h=l.getNullCell(),u=n;for(;o;){let p=l.getLine(i);if(!p)return[-1,-1];for(let d=u;d<p.length;++d){p.getCell(d,h);let _=h.getChars();if(h.getWidth()&&(o-=_.length||1,d===p.length-1&&_==="")){let g=l.getLine(i+1);g&&g.isWrapped&&(g.getCell(0,h),h.getWidth()===2&&(o+=1))}if(o<0)return[i,d]}i++,u=0}return[i,u]}},hE=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function cE(e,t){let i=window.open();if(i){try{i.opener=null}catch{}i.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}var uE=class{constructor(e=cE,t={}){this._handler=e,this._options=t}activate(e){this._terminal=e;let t=this._options,i=t.urlRegex||hE;this._linkProvider=this._terminal.registerLinkProvider(new oE(this._terminal,i,this._handler,t))}dispose(){var e;(e=this._linkProvider)==null||e.dispose()}};function dE(){const{t:e}=Jo(),[t,i]=N.useState([]),[n,o]=N.useState(null),[l,h]=N.useState(""),u=N.useRef(new Map),p=N.useRef(null),d=N.useCallback(y=>{const w=`tab-${Date.now()}`,x=y||l||"",C={id:w,title:x&&x.split(/[/\\]/).pop()||"Terminal",cwd:x};i(k=>[...k,C]),o(w),setTimeout(()=>_(w,x),0)},[l]),_=N.useCallback((y,w)=>{const x=document.getElementById(`terminal-${y}`);if(!x)return;const C=new iE({cursorBlink:!0,fontSize:14,fontFamily:'Consolas, "Courier New", monospace',theme:{background:"#1e1e2e",foreground:"#cdd6f4",cursor:"#f5e0dc",cursorAccent:"#1e1e2e",selectionBackground:"#585b70",black:"#45475a",red:"#f38ba8",green:"#a6e3a1",yellow:"#f9e2af",blue:"#89b4fa",magenta:"#f5c2e7",cyan:"#94e2d5",white:"#bac2de",brightBlack:"#585b70",brightRed:"#f38ba8",brightGreen:"#a6e3a1",brightYellow:"#f9e2af",brightBlue:"#89b4fa",brightMagenta:"#f5c2e7",brightCyan:"#94e2d5",brightWhite:"#a6adc8"},allowProposedApi:!0}),k=new nE;C.loadAddon(k),C.loadAddon(new uE),C.open(x),k.fit();const L=window.location.protocol==="https:"?"wss:":"ws:",W=window.location.host,O=`${L}//${W}/api/terminal?cwd=${encodeURIComponent(w)}&cols=${C.cols}&rows=${C.rows}`,T=new WebSocket(O);T.onopen=()=>{C.writeln(`\x1B[32m Connected to terminal\x1B[0m\r
`)},T.onmessage=$=>{try{const G=JSON.parse($.data);switch(G.type){case"output":C.write(G.data);break;case"session":i(le=>le.map(ue=>ue.id===y?{...ue,title:G.cwd.split(/[/\\]/).pop()||G.shell}:ue));break;case"exit":C.writeln(`\r
\x1B[33m Process exited with code ${G.exitCode}\x1B[0m`);break}}catch{C.write($.data)}},T.onclose=()=>{C.writeln(`\r
\x1B[31m Disconnected from terminal\x1B[0m`)},T.onerror=()=>{C.writeln(`\r
\x1B[31m Connection error\x1B[0m`)},C.onData($=>{T.readyState===WebSocket.OPEN&&T.send(JSON.stringify({type:"input",data:$}))}),C.onResize(({cols:$,rows:G})=>{T.readyState===WebSocket.OPEN&&T.send(JSON.stringify({type:"resize",cols:$,rows:G}))}),u.current.set(y,{terminal:C,ws:T,fitAddon:k}),C.focus()},[]),g=N.useCallback(y=>{const w=u.current.get(y);w&&(w.ws.close(),w.terminal.dispose(),u.current.delete(y)),i(x=>{const C=x.filter(k=>k.id!==y);return n===y&&C.length>0?o(C[C.length-1].id):C.length===0&&o(null),C})},[n]);return N.useEffect(()=>{const y=()=>{if(n){const w=u.current.get(n);w&&w.fitAddon.fit()}};return window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[n]),N.useEffect(()=>{if(n){const y=u.current.get(n);y&&setTimeout(()=>{y.fitAddon.fit(),y.terminal.focus()},0)}},[n]),N.useEffect(()=>{t.length===0&&d()},[]),S.jsxs("div",{className:"h-full flex flex-col",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsxs("div",{children:[S.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:e("shell.title")}),S.jsx("p",{className:"text-slate-500",children:e("shell.subtitle")})]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(Fl,{size:18,className:"text-slate-500"}),S.jsx("input",{type:"text",value:l,onChange:y=>h(y.target.value),placeholder:e("shell.workingDirectoryPlaceholder"),className:"w-64 px-3 py-1.5 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),S.jsxs("button",{onClick:()=>d(),className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[S.jsx(Fv,{size:18}),e("shell.newTab")]})]})]}),t.length>0&&S.jsx("div",{className:"flex items-center gap-1 bg-slate-800 rounded-t-lg px-2 pt-2",children:t.map(y=>S.jsxs("div",{onClick:()=>o(y.id),className:`flex items-center gap-2 px-3 py-1.5 rounded-t-lg cursor-pointer transition-colors ${n===y.id?"bg-[#1e1e2e] text-white":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:[S.jsx(Ho,{size:14}),S.jsx("span",{className:"text-sm max-w-32 truncate",children:y.title}),S.jsx("button",{onClick:w=>{w.stopPropagation(),g(y.id)},className:"p-0.5 hover:bg-slate-600 rounded",children:S.jsx(Hv,{size:14})})]},y.id))}),S.jsx("div",{ref:p,className:"flex-1 bg-[#1e1e2e] rounded-b-lg overflow-hidden",style:{minHeight:"400px"},children:t.length===0?S.jsx("div",{className:"h-full flex items-center justify-center text-slate-500",children:S.jsxs("div",{className:"text-center",children:[S.jsx(Ho,{size:48,className:"mx-auto mb-4 opacity-50"}),S.jsx("p",{children:e("shell.noTerminals")}),S.jsx("button",{onClick:()=>d(),className:"mt-4 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:e("shell.newTab")})]})}):t.map(y=>S.jsx("div",{id:`terminal-${y.id}`,className:`h-full w-full p-2 ${n===y.id?"":"hidden"}`},y.id))}),S.jsx("p",{className:"mt-4 text-sm text-slate-500",children:e("shell.tip")})]})}const{slice:fE,forEach:pE}=[];function mE(e){return pE.call(fE.call(arguments,1),t=>{if(t)for(const i in t)e[i]===void 0&&(e[i]=t[i])}),e}function gE(e){return typeof e!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(i=>i.test(e))}const I_=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,_E=function(e,t){const n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},o=encodeURIComponent(t);let l=`${e}=${o}`;if(n.maxAge>0){const h=n.maxAge-0;if(Number.isNaN(h))throw new Error("maxAge should be a Number");l+=`; Max-Age=${Math.floor(h)}`}if(n.domain){if(!I_.test(n.domain))throw new TypeError("option domain is invalid");l+=`; Domain=${n.domain}`}if(n.path){if(!I_.test(n.path))throw new TypeError("option path is invalid");l+=`; Path=${n.path}`}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");l+=`; Expires=${n.expires.toUTCString()}`}if(n.httpOnly&&(l+="; HttpOnly"),n.secure&&(l+="; Secure"),n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"strict":l+="; SameSite=Strict";break;case"none":l+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(l+="; Partitioned"),l},A_={create(e,t,i,n){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};i&&(o.expires=new Date,o.expires.setTime(o.expires.getTime()+i*60*1e3)),n&&(o.domain=n),document.cookie=_E(e,t,o)},read(e){const t=`${e}=`,i=document.cookie.split(";");for(let n=0;n<i.length;n++){let o=i[n];for(;o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(t)===0)return o.substring(t.length,o.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var vE={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return A_.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:i,cookieMinutes:n,cookieDomain:o,cookieOptions:l}=t;i&&typeof document<"u"&&A_.create(i,e,n,o,l)}},yE={name:"querystring",lookup(e){var n;let{lookupQuerystring:t}=e,i;if(typeof window<"u"){let{search:o}=window.location;!window.location.search&&((n=window.location.hash)==null?void 0:n.indexOf("?"))>-1&&(o=window.location.hash.substring(window.location.hash.indexOf("?")));const h=o.substring(1).split("&");for(let u=0;u<h.length;u++){const p=h[u].indexOf("=");p>0&&h[u].substring(0,p)===t&&(i=h[u].substring(p+1))}}return i}},SE={name:"hash",lookup(e){var o;let{lookupHash:t,lookupFromHashIndex:i}=e,n;if(typeof window<"u"){const{hash:l}=window.location;if(l&&l.length>2){const h=l.substring(1);if(t){const u=h.split("&");for(let p=0;p<u.length;p++){const d=u[p].indexOf("=");d>0&&u[p].substring(0,d)===t&&(n=u[p].substring(d+1))}}if(n)return n;if(!n&&i>-1){const u=l.match(/\/([a-zA-Z-]*)/g);return Array.isArray(u)?(o=u[typeof i=="number"?i:0])==null?void 0:o.replace("/",""):void 0}}}return n}};let hn=null;const j_=()=>{if(hn!==null)return hn;try{if(hn=typeof window<"u"&&window.localStorage!==null,!hn)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{hn=!1}return hn};var wE={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&j_())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:i}=t;i&&j_()&&window.localStorage.setItem(i,e)}};let cn=null;const F_=()=>{if(cn!==null)return cn;try{if(cn=typeof window<"u"&&window.sessionStorage!==null,!cn)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{cn=!1}return cn};var xE={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&F_())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:i}=t;i&&F_()&&window.sessionStorage.setItem(i,e)}},CE={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:i,userLanguage:n,language:o}=navigator;if(i)for(let l=0;l<i.length;l++)t.push(i[l]);n&&t.push(n),o&&t.push(o)}return t.length>0?t:void 0}},bE={name:"htmlTag",lookup(e){let{htmlTag:t}=e,i;const n=t||(typeof document<"u"?document.documentElement:null);return n&&typeof n.getAttribute=="function"&&(i=n.getAttribute("lang")),i}},kE={name:"path",lookup(e){var o;let{lookupFromPathIndex:t}=e;if(typeof window>"u")return;const i=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(i)?(o=i[typeof t=="number"?t:0])==null?void 0:o.replace("/",""):void 0}},EE={name:"subdomain",lookup(e){var o,l;let{lookupFromSubdomainIndex:t}=e;const i=typeof t=="number"?t+1:1,n=typeof window<"u"&&((l=(o=window.location)==null?void 0:o.hostname)==null?void 0:l.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(n)return n[i]}};let A0=!1;try{document.cookie,A0=!0}catch{}const j0=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];A0||j0.splice(1,1);const RE=()=>({order:j0,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e});class F0{constructor(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,i)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=mE(i,this.options||{},RE()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=o=>o.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(vE),this.addDetector(yE),this.addDetector(wE),this.addDetector(xE),this.addDetector(CE),this.addDetector(bE),this.addDetector(kE),this.addDetector(EE),this.addDetector(SE)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,i=[];return t.forEach(n=>{if(this.detectors[n]){let o=this.detectors[n].lookup(this.options);o&&typeof o=="string"&&(o=[o]),o&&(i=i.concat(o))}}),i=i.filter(n=>n!=null&&!gE(n)).map(n=>this.options.convertDetectedLanguage(n)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?i:i.length>0?i[0]:null}cacheUserLanguage(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;i&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||i.forEach(n=>{this.detectors[n]&&this.detectors[n].cacheUserLanguage(t,this.options)}))}}F0.type="languageDetector";const PE={loading:"Loading...",error:"Error",save:"Save",cancel:"Cancel",delete:"Delete",create:"Create",edit:"Edit",close:"Close",confirm:"Confirm",back:"Back",clear:"Clear",execute:"Execute",refresh:"Refresh",start:"Start",stop:"Stop",pause:"Pause",resume:"Resume"},LE={projects:"Projects",shell:"Shell",settings:"Settings"},NE={title:"Projects",subtitle:"Manage AI agent projects",newProject:"New Project",noProjects:"No projects yet. Create one to get started!",untitled:"Untitled Project",noDescription:"No description",name:"Project Name",namePlaceholder:"Enter project name...",goal:"Goal",goalPlaceholder:"Describe what you want to accomplish...",repoPath:"Repository Path",repoPathPlaceholder:"/path/to/your/project",browse:"Browse",runs:"Runs",noRuns:"No runs yet",startRun:"Start Run",specs:"Specifications",specsMeta:"Meta & Constraints",specsOverview:"Overview",specsGlossary:"Glossary",specsRequirements:"Specification",specsInterfaces:"Implementation Status",specsDecisions:"Decisions",specsEmpty:"No specifications yet",specsListHint:"One per line",specsMetaPlaceholder:"Constraints, scope, non-goals...",specsOverviewPlaceholder:"Intent, background, goals, success criteria...",specsGlossaryPlaceholder:"Term: definition",specsRequirementsPlaceholder:"Specification details...",specsInterfacesPlaceholder:"Implementation status, progress, gaps...",specsDecisionsPlaceholder:"- Decision and rationale",status:{planning:"Planning",planned:"Planned",pending:"Pending",running:"Running",verifying:"Verifying",debugging:"Debugging",completed:"Completed",failed:"Failed",needs_input:"Needs Input"},detail:{title:"Project Details",backToProjects:"Back to projects",viewReport:"View Report",hideReport:"Hide Report",finalReport:"Final Report",information:"Information",created:"Created",updated:"Updated",verification:"Verification",verificationPassed:"Verification Passed",verificationFailed:"Verification Failed"},logs:{title:"Logs",noLogs:"No logs yet...",autoScroll:"Auto-scroll"},plan:{title:"Plan",subtitle:"Plan tasks before execution",noPlan:"No plan yet",createPlan:"Create Plan",editPlan:"Edit Plan",approvePlan:"Approve Plan",rejectPlan:"Reject Plan",regeneratePlan:"Regenerate Plan",tasks:"Tasks",addTask:"Add Task",taskName:"Task Name",taskDescription:"Task Description",estimatedEffort:"Estimated Effort",dependencies:"Dependencies",priority:"Priority",high:"High",medium:"Medium",low:"Low",status:{draft:"Draft",pending_approval:"Pending Approval",approved:"Approved",rejected:"Rejected"},aiGenerate:"Generate Plan with AI",generating:"Generating plan..."},execution:{title:"Execution",startExecution:"Start Execution",stopExecution:"Stop Execution",executionHistory:"Execution History"},specsCount:"{{count}} items",specsBulkEdit:"Bulk edit",specsInlineEdit:"Inline edit",specsExpand:"Expand",specsCollapse:"Collapse",specsSpecification:"Specification",specsImplementationStatus:"Implementation Status",specsMarkdownHint:"Markdown supported",specsFiles:"Files",specsAddFile:"Add file",specsAddFolder:"Add folder",specsNoFiles:"No files yet",specsSelectFile:"Select a file to preview",specsFolderSelected:"Folder selected",specsRename:"Rename",specsNamePlaceholder:"Name...",specsFileNamePlaceholder:"new-file.md",specsFolderNamePlaceholder:"new-folder",specsSpecificationPlaceholder:"Specification details, scope, constraints...",specsImplementationStatusPlaceholder:"Implementation status, progress, gaps..."},DE={title:"Terminal",subtitle:"Full-featured terminal emulator",workingDirectory:"Working Directory (optional)",workingDirectoryPlaceholder:"/path/to/directory",commandPlaceholder:"Enter command...",noCommands:"Enter a command below to get started",tip:"Tip: Full terminal support with tab completion, colors, and interactive programs",newTab:"New Tab",noTerminals:"No terminal sessions. Click the button below to start one."},ME={title:"Settings",subtitle:"Configure Supervisor Agent",backendStatus:"Backend Status",status:"Status",version:"Version",apiUsage:"API Usage",premiumRequests:"Premium Requests",copilotNotConfigured:"Copilot API not configured",configuration:"Configuration",defaultRepoPath:"Default Repository Path",apiBaseUrl:"API Base URL",copilotApiUrl:"Copilot API URL",maxDebugIterations:"Max Debug Iterations",saveSettings:"Save Settings",language:"Language",selectLanguage:"Select Language"},TE={settings:"Settings",repoPath:"Repository Path",repoPathPlaceholder:"/path/to/your/project",agentModel:"Agent Model",maxIterations:"Max Iterations",welcome:"Welcome to your project",welcomeDescription:"What would you like to accomplish? I can help with fixing bugs, adding features, running tests, and more.",inputPlaceholder:"Type a message...",inputHint:"Press Enter to send, Shift+Enter for new line",thinking:"Thinking...",readyToHelp:"Ready to help. What would you like to do?",suggestions:{runTests:"Run tests",fixBug:"Fix a bug",addFeature:"Add a feature"}},OE={common:PE,nav:LE,projects:NE,shell:DE,settings:ME,chat:TE},BE={loading:"...",error:"",save:"",cancel:"",delete:"",create:"",edit:"",close:"",confirm:"",back:"",clear:"",execute:"",refresh:"",start:"",stop:"",pause:"",resume:""},IE={projects:"",shell:"",settings:""},AE={title:"",subtitle:"AI ",newProject:"",noProjects:"",createFirst:"",untitled:"",noDescription:"",name:"",namePlaceholder:"...",description:"",descriptionPlaceholder:"",goal:"",goalPlaceholder:"...",repoPath:"",repoPathPlaceholder:"/path/to/your/project",browse:"",runs:"",noRuns:"",startRun:"",specs:"",specsMeta:"",specsOverview:"",specsGlossary:"",specsRequirements:"",specsInterfaces:"",specsDecisions:"",specsEmpty:"",specsListHint:"11",specsMetaPlaceholder:"...",specsOverviewPlaceholder:"/...",specsGlossaryPlaceholder:": ",specsRequirementsPlaceholder:"...",specsInterfacesPlaceholder:"...",specsDecisionsPlaceholder:"- ",specsCount:"{{count}} ",specsBulkEdit:"",specsInlineEdit:"",specsExpand:"",specsCollapse:"",requirements:"",acceptanceCriteria:"",notes:"",status:{planning:"",planned:"",pending:"",running:"",verifying:"",debugging:"",completed:"",failed:"",needs_input:""},detail:{title:"",backToProjects:"",viewReport:"",hideReport:"",finalReport:"",information:"",created:"",updated:"",verification:"",verificationPassed:"",verificationFailed:""},logs:{title:"",noLogs:"...",autoScroll:""},plan:{title:"",subtitle:"",noPlan:"",createPlan:"",editPlan:"",approvePlan:"",rejectPlan:"",regeneratePlan:"",tasks:"",addTask:"",taskName:"",taskDescription:"",estimatedEffort:"",dependencies:"",priority:"",high:"",medium:"",low:"",status:{draft:"",pending_approval:"",approved:"",rejected:""},aiGenerate:"AI ",generating:"..."},execution:{title:"",startExecution:"",stopExecution:"",executionHistory:""},specsSpecification:"",specsImplementationStatus:"",specsMarkdownHint:"",specsFiles:"",specsAddFile:"",specsAddFolder:"",specsNoFiles:"",specsSelectFile:"",specsFolderSelected:"",specsRename:"",specsNamePlaceholder:"...",specsFileNamePlaceholder:"new-file.md",specsFolderNamePlaceholder:"new-folder",specsSpecificationPlaceholder:"...",specsImplementationStatusPlaceholder:"..."},jE={title:"",subtitle:"",workingDirectory:"",workingDirectoryPlaceholder:"/path/to/directory",commandPlaceholder:"...",noCommands:"",tip:": ",newTab:"",noTerminals:""},FE={title:"",subtitle:"Supervisor Agent ",backendStatus:"",status:"",version:"",apiUsage:"API ",premiumRequests:"",copilotNotConfigured:"Copilot API ",configuration:"",defaultRepoPath:"",apiBaseUrl:"API  URL",copilotApiUrl:"Copilot API URL",maxDebugIterations:"",saveSettings:"",language:"",selectLanguage:""},zE={settings:"",repoPath:"",repoPathPlaceholder:"/path/to/your/project",agentModel:"",maxIterations:"",welcome:"",welcomeDescription:"",inputPlaceholder:"...",inputHint:"Enter Shift+Enter ",thinking:"...",readyToHelp:"",suggestions:{runTests:"",fixBug:"",addFeature:""}},HE={common:BE,nav:IE,projects:AE,shell:jE,settings:FE,chat:zE},$E={en:{translation:OE},ja:{translation:HE}};Ht.use(F0).use(Ix).init({resources:$E,fallbackLng:"en",supportedLngs:["en","ja"],interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator","htmlTag"],caches:["localStorage"]}});const WE=[{code:"en",name:"English",nativeName:"English"},{code:"ja",name:"Japanese",nativeName:""}];function UE(){const{t:e,i18n:t}=Jo(),i=Rn(),[n,o]=N.useState(""),[l,h]=N.useState(""),[u,p]=N.useState(!1),[d,_]=N.useState(!1),[g,y]=N.useState(""),[w,x]=N.useState(!1),{data:C,refetch:k}=Wi({queryKey:["health"],queryFn:$v}),{data:L,refetch:W}=Wi({queryKey:["settings"],queryFn:Wv}),{data:O}=Wi({queryKey:["copilotStatus"],queryFn:Kv,refetchInterval:5e3}),T=jo({mutationFn:Uv,onSuccess:()=>{i.invalidateQueries({queryKey:["settings"]}),i.invalidateQueries({queryKey:["copilotStatus"]}),o(""),h(""),y("")}}),$=()=>{const se={};n&&(se.openai_api_key=n),l&&(se.anthropic_api_key=l),Object.keys(se).length>0&&T.mutate(se)},G=()=>{g&&T.mutate({github_token:g})},le=()=>{T.mutate({openai_api_key:""})},ue=()=>{T.mutate({anthropic_api_key:""})},ye=()=>{T.mutate({github_token:""})},ie=se=>{t.changeLanguage(se)};return S.jsxs("div",{children:[S.jsxs("div",{className:"mb-6",children:[S.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:e("settings.title")}),S.jsx("p",{className:"text-slate-500",children:e("settings.subtitle")})]}),S.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[S.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6 lg:col-span-2",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsxs("h2",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[S.jsx(rC,{size:20}),"API Keys"]}),S.jsx("button",{onClick:()=>W(),className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:S.jsx(zg,{size:16})})]}),S.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Configure API keys for AI services. Keys are stored securely and take precedence over environment variables."}),S.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[S.jsxs("div",{children:[S.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["OpenAI API Key",(L==null?void 0:L.openai_api_key_set)&&S.jsxs("span",{className:"ml-2 text-xs text-green-600 font-normal",children:[S.jsx(ou,{size:12,className:"inline mr-1"}),"Configured (",L.openai_api_key,")"]})]}),S.jsxs("div",{className:"relative",children:[S.jsx("input",{type:u?"text":"password",value:n,onChange:se=>o(se.target.value),placeholder:L!=null&&L.openai_api_key_set?"Enter new key to update":"sk-...",className:"w-full px-3 py-2 pr-20 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),S.jsx("button",{type:"button",onClick:()=>p(!u),className:"absolute right-10 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:u?S.jsx(au,{size:18}):S.jsx(kl,{size:18})}),(L==null?void 0:L.openai_api_key_set)&&S.jsx("button",{type:"button",onClick:le,className:"absolute right-2 top-1/2 -translate-y-1/2 text-red-400 hover:text-red-600 text-xs",children:"Clear"})]})]}),S.jsxs("div",{children:[S.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Anthropic API Key",(L==null?void 0:L.anthropic_api_key_set)&&S.jsxs("span",{className:"ml-2 text-xs text-green-600 font-normal",children:[S.jsx(ou,{size:12,className:"inline mr-1"}),"Configured (",L.anthropic_api_key,")"]})]}),S.jsxs("div",{className:"relative",children:[S.jsx("input",{type:d?"text":"password",value:l,onChange:se=>h(se.target.value),placeholder:L!=null&&L.anthropic_api_key_set?"Enter new key to update":"sk-ant-...",className:"w-full px-3 py-2 pr-20 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),S.jsx("button",{type:"button",onClick:()=>_(!d),className:"absolute right-10 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:d?S.jsx(au,{size:18}):S.jsx(kl,{size:18})}),(L==null?void 0:L.anthropic_api_key_set)&&S.jsx("button",{type:"button",onClick:ue,className:"absolute right-2 top-1/2 -translate-y-1/2 text-red-400 hover:text-red-600 text-xs",children:"Clear"})]})]})]}),S.jsx("div",{className:"mt-4",children:S.jsxs("button",{onClick:$,disabled:!n&&!l||T.isPending,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[T.isPending&&S.jsx(Ki,{size:16,className:"animate-spin"}),"Save API Keys"]})})]}),S.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6 lg:col-span-2",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsxs("h2",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[S.jsx(tC,{size:20}),"GitHub Copilot API"]}),(L==null?void 0:L.github_token_set)&&S.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[S.jsx("span",{className:`w-2 h-2 rounded-full ${O!=null&&O.running&&(O!=null&&O.healthy)?"bg-green-500":O!=null&&O.running?"bg-yellow-500 animate-pulse":"bg-red-500"}`}),S.jsx("span",{className:"text-slate-500",children:O!=null&&O.running&&(O!=null&&O.healthy)?"Running":O!=null&&O.running?"Starting...":"Not running"})]})]}),(O==null?void 0:O.error)&&(L==null?void 0:L.github_token_set)&&S.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:O.error}),S.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Use GitHub Copilot as an OpenAI-compatible API proxy. Set your GitHub token below and the proxy will start automatically."}),S.jsxs("div",{className:"max-w-md",children:[S.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["GitHub Token",(L==null?void 0:L.github_token_set)&&S.jsxs("span",{className:"ml-2 text-xs text-green-600 font-normal",children:[S.jsx(ou,{size:12,className:"inline mr-1"}),"Configured (",L.github_token,")"]})]}),S.jsxs("div",{className:"flex gap-2",children:[S.jsxs("div",{className:"relative flex-1",children:[S.jsx("input",{type:w?"text":"password",value:g,onChange:se=>y(se.target.value),placeholder:L!=null&&L.github_token_set?"Enter new token to update":"ghp_...",className:"w-full px-3 py-2 pr-10 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),S.jsx("button",{type:"button",onClick:()=>x(!w),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:w?S.jsx(au,{size:18}):S.jsx(kl,{size:18})})]}),S.jsxs("button",{onClick:G,disabled:!g||T.isPending,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[T.isPending&&S.jsx(Ki,{size:16,className:"animate-spin"}),"Save"]}),(L==null?void 0:L.github_token_set)&&S.jsx("button",{onClick:ye,className:"px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:"Clear"})]}),S.jsxs("p",{className:"text-xs text-slate-400 mt-2",children:["Get your token from"," ",S.jsx("a",{href:"https://github.com/settings/tokens",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:"GitHub Settings  Tokens"})]})]})]}),S.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[S.jsxs("h2",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2 mb-4",children:[S.jsx(iC,{size:20}),e("settings.language")]}),S.jsx("div",{className:"space-y-2",children:WE.map(se=>S.jsxs("button",{onClick:()=>ie(se.code),className:`w-full text-left px-4 py-3 rounded-lg border transition-colors ${t.language===se.code?"border-primary-500 bg-primary-50 text-primary-700":"border-slate-200 hover:bg-slate-50"}`,children:[S.jsx("span",{className:"font-medium",children:se.nativeName}),S.jsxs("span",{className:"text-slate-500 ml-2",children:["(",se.name,")"]})]},se.code))})]}),S.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsxs("h2",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[S.jsx(hC,{size:20}),e("settings.backendStatus")]}),S.jsx("button",{onClick:()=>k(),className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:S.jsx(zg,{size:16})})]}),S.jsxs("dl",{className:"space-y-3",children:[S.jsxs("div",{className:"flex justify-between",children:[S.jsx("dt",{className:"text-slate-500",children:e("settings.status")}),S.jsxs("dd",{className:"flex items-center gap-2",children:[S.jsx("span",{className:`w-2 h-2 rounded-full ${(C==null?void 0:C.status)==="ok"?"bg-green-500":"bg-red-500"}`}),(C==null?void 0:C.status)??"Unknown"]})]}),S.jsxs("div",{className:"flex justify-between",children:[S.jsx("dt",{className:"text-slate-500",children:e("settings.version")}),S.jsx("dd",{className:"font-mono text-sm",children:(C==null?void 0:C.version)??"-"})]})]})]})]})]})}function KE(){return S.jsx(RC,{children:S.jsxs(Ew,{children:[S.jsx(Ar,{path:"/",element:S.jsx(eu,{to:"/projects",replace:!0})}),S.jsx(Ar,{path:"/projects",element:S.jsx(OC,{})}),S.jsx(Ar,{path:"/projects/:projectId",element:S.jsx(qC,{})}),S.jsx(Ar,{path:"/runs",element:S.jsx(eu,{to:"/projects",replace:!0})}),S.jsx(Ar,{path:"/runs/:runId",element:S.jsx(eu,{to:"/projects/:runId",replace:!0})}),S.jsx(Ar,{path:"/shell",element:S.jsx(dE,{})}),S.jsx(Ar,{path:"/settings",element:S.jsx(UE,{})})]})})}const VE=new g1({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}});VS.createRoot(document.getElementById("root")).render(S.jsx(FS.StrictMode,{children:S.jsx(_1,{client:VE,children:S.jsx(Gw,{children:S.jsx(KE,{})})})}));
